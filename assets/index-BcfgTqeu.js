var Z5=Object.defineProperty;var Ab=t=>{throw TypeError(t)};var eD=(t,e,n)=>e in t?Z5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yu=(t,e,n)=>eD(t,typeof e!="symbol"?e+"":e,n),fp=(t,e,n)=>e.has(t)||Ab("Cannot "+n);var O=(t,e,n)=>(fp(t,e,"read from private field"),n?n.call(t):e.get(t)),ke=(t,e,n)=>e.has(t)?Ab("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),he=(t,e,n,r)=>(fp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),At=(t,e,n)=>(fp(t,e,"access private method"),n);var Qu=(t,e,n,r)=>({set _(s){he(t,e,s,n)},get _(){return O(t,e,r)}});function tD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function OS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LS={exports:{}},$f={},FS={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=Symbol.for("react.element"),nD=Symbol.for("react.portal"),rD=Symbol.for("react.fragment"),sD=Symbol.for("react.strict_mode"),iD=Symbol.for("react.profiler"),oD=Symbol.for("react.provider"),aD=Symbol.for("react.context"),lD=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),uD=Symbol.for("react.memo"),dD=Symbol.for("react.lazy"),Mb=Symbol.iterator;function hD(t){return t===null||typeof t!="object"?null:(t=Mb&&t[Mb]||t["@@iterator"],typeof t=="function"?t:null)}var $S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VS=Object.assign,US={};function cl(t,e,n){this.props=t,this.context=e,this.refs=US,this.updater=n||$S}cl.prototype.isReactComponent={};cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BS(){}BS.prototype=cl.prototype;function ux(t,e,n){this.props=t,this.context=e,this.refs=US,this.updater=n||$S}var dx=ux.prototype=new BS;dx.constructor=ux;VS(dx,cl.prototype);dx.isPureReactComponent=!0;var Db=Array.isArray,zS=Object.prototype.hasOwnProperty,hx={current:null},WS={key:!0,ref:!0,__self:!0,__source:!0};function HS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zS.call(e,r)&&!WS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:mu,type:t,key:i,ref:o,props:s,_owner:hx.current}}function fD(t,e){return{$$typeof:mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fx(t){return typeof t=="object"&&t!==null&&t.$$typeof===mu}function mD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ob=/\/+/g;function mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mD(""+t.key):e.toString(36)}function Od(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mu:case nD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+mp(o,0):r,Db(s)?(n="",t!=null&&(n=t.replace(Ob,"$&/")+"/"),Od(s,e,n,"",function(u){return u})):s!=null&&(fx(s)&&(s=fD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ob,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Db(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+mp(i,l);o+=Od(i,e,n,c,s)}else if(c=hD(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+mp(i,l++),o+=Od(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xu(t,e,n){if(t==null)return t;var r=[],s=0;return Od(t,r,"","",function(i){return e.call(n,i,s++)}),r}function pD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},Ld={transition:null},gD={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:hx};function GS(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!fx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=cl;be.Fragment=rD;be.Profiler=iD;be.PureComponent=ux;be.StrictMode=sD;be.Suspense=cD;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD;be.act=GS;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zS.call(e,c)&&!WS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:mu,type:t.type,key:s,ref:i,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:aD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oD,_context:t},t.Consumer=t};be.createElement=HS;be.createFactory=function(t){var e=HS.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:lD,render:t}};be.isValidElement=fx;be.lazy=function(t){return{$$typeof:dD,_payload:{_status:-1,_result:t},_init:pD}};be.memo=function(t,e){return{$$typeof:uD,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Ld.transition;Ld.transition={};try{t()}finally{Ld.transition=e}};be.unstable_act=GS;be.useCallback=function(t,e){return Zt.current.useCallback(t,e)};be.useContext=function(t){return Zt.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};be.useEffect=function(t,e){return Zt.current.useEffect(t,e)};be.useId=function(){return Zt.current.useId()};be.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return Zt.current.useMemo(t,e)};be.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};be.useRef=function(t){return Zt.current.useRef(t)};be.useState=function(t){return Zt.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return Zt.current.useTransition()};be.version="18.3.1";FS.exports=be;var m=FS.exports;const G=OS(m),mx=tD({__proto__:null,default:G},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=m,xD=Symbol.for("react.element"),yD=Symbol.for("react.fragment"),wD=Object.prototype.hasOwnProperty,bD=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_D={key:!0,ref:!0,__self:!0,__source:!0};function qS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wD.call(e,r)&&!_D.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xD,type:t,key:i,ref:o,props:s,_owner:bD.current}}$f.Fragment=yD;$f.jsx=qS;$f.jsxs=qS;LS.exports=$f;var a=LS.exports,KS={exports:{}},Sn={},YS={exports:{}},QS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,D){var j=A.length;A.push(D);e:for(;0<j;){var q=j-1>>>1,Q=A[q];if(0<s(Q,D))A[q]=D,A[j]=Q,j=q;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var D=A[0],j=A.pop();if(j!==D){A[0]=j;e:for(var q=0,Q=A.length,ie=Q>>>1;q<ie;){var le=2*(q+1)-1,Re=A[le],Oe=le+1,Z=A[Oe];if(0>s(Re,j))Oe<Q&&0>s(Z,Re)?(A[q]=Z,A[Oe]=j,q=Oe):(A[q]=Re,A[le]=j,q=le);else if(Oe<Q&&0>s(Z,j))A[q]=Z,A[Oe]=j,q=Oe;else break e}}return D}function s(A,D){var j=A.sortIndex-D.sortIndex;return j!==0?j:A.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,w=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(A){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=A)r(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(u)}}function C(A){if(x=!1,_(A),!w)if(n(c)!==null)w=!0,$(b);else{var D=n(u);D!==null&&H(C,D.startTime-A)}}function b(A,D){w=!1,x&&(x=!1,y(E),E=-1),p=!0;var j=f;try{for(_(D),h=n(c);h!==null&&(!(h.expirationTime>D)||A&&!R());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var Q=q(h.expirationTime<=D);D=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(c)&&r(c),_(D)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var le=n(u);le!==null&&H(C,le.startTime-D),ie=!1}return ie}finally{h=null,f=j,p=!1}}var N=!1,S=null,E=-1,k=5,T=-1;function R(){return!(t.unstable_now()-T<k)}function I(){if(S!==null){var A=t.unstable_now();T=A;var D=!0;try{D=S(!0,A)}finally{D?L():(N=!1,S=null)}}else N=!1}var L;if(typeof v=="function")L=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=I,L=function(){V.postMessage(null)}}else L=function(){g(I,0)};function $(A){S=A,N||(N=!0,L())}function H(A,D){E=g(function(){A(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,$(b))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var j=f;f=D;try{return A()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=f;f=A;try{return D()}finally{f=j}},t.unstable_scheduleCallback=function(A,D,j){var q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?q+j:q):j=q,A){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=j+Q,A={id:d++,callback:D,priorityLevel:A,startTime:j,expirationTime:Q,sortIndex:-1},j>q?(A.sortIndex=j,e(u,A),n(c)===null&&A===n(u)&&(x?(y(E),E=-1):x=!0,H(C,j-q))):(A.sortIndex=Q,e(c,A),w||p||(w=!0,$(b))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var D=f;return function(){var j=f;f=D;try{return A.apply(this,arguments)}finally{f=j}}}})(QS);YS.exports=QS;var ND=YS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD=m,Cn=ND;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XS=new Set,kc={};function Mo(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for(kc[t]=e,t=0;t<e.length;t++)XS.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,SD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lb={},Fb={};function ED(t){return Lg.call(Fb,t)?!0:Lg.call(Lb,t)?!1:SD.test(t)?Fb[t]=!0:(Lb[t]=!0,!1)}function kD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TD(t,e,n,r){if(e===null||typeof e>"u"||kD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var px=/[\-:]([a-z])/g;function gx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(px,gx);It[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(px,gx);It[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(px,gx);It[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function vx(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TD(e,n,s,r)&&(n=null),r||s===null?ED(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ns=CD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Yo=Symbol.for("react.fragment"),xx=Symbol.for("react.strict_mode"),Fg=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),yx=Symbol.for("react.forward_ref"),$g=Symbol.for("react.suspense"),Vg=Symbol.for("react.suspense_list"),wx=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),eE=Symbol.for("react.offscreen"),$b=Symbol.iterator;function Ml(t){return t===null||typeof t!="object"?null:(t=$b&&t[$b]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,pp;function Xl(t){if(pp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pp=e&&e[1]||""}return`
`+pp+t}var gp=!1;function vp(t,e){if(!t||gp)return"";gp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{gp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xl(t):""}function jD(t){switch(t.tag){case 5:return Xl(t.type);case 16:return Xl("Lazy");case 13:return Xl("Suspense");case 19:return Xl("SuspenseList");case 0:case 2:case 15:return t=vp(t.type,!1),t;case 11:return t=vp(t.type.render,!1),t;case 1:return t=vp(t.type,!0),t;default:return""}}function Ug(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yo:return"Fragment";case Ko:return"Portal";case Fg:return"Profiler";case xx:return"StrictMode";case $g:return"Suspense";case Vg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZS:return(t.displayName||"Context")+".Consumer";case JS:return(t._context.displayName||"Context")+".Provider";case yx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wx:return e=t.displayName||null,e!==null?e:Ug(t.type)||"Memo";case As:e=t._payload,t=t._init;try{return Ug(t(e))}catch{}}return null}function RD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ug(e);case 8:return e===xx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ID(t){var e=tE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=ID(t))}function nE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bg(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rE(t,e){e=e.checked,e!=null&&vx(t,"checked",e,!1)}function zg(t,e){rE(t,e);var n=pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wg(t,e.type,pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ub(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wg(t,e,n){(e!=="number"||hh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jl=Array.isArray;function ma(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Jl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pi(n)}}function sE(t,e){var n=pi(e.value),r=pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,oE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PD=["Webkit","ms","Moz","O"];Object.keys(ic).forEach(function(t){PD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ic[e]=ic[t]})});function aE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ic.hasOwnProperty(t)&&ic[t]?(""+e).trim():e+"px"}function lE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var AD=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qg(t,e){if(e){if(AD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Kg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yg=null;function bx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qg=null,pa=null,ga=null;function Wb(t){if(t=vu(t)){if(typeof Qg!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Wf(e),Qg(t.stateNode,t.type,e))}}function cE(t){pa?ga?ga.push(t):ga=[t]:pa=t}function uE(){if(pa){var t=pa,e=ga;if(ga=pa=null,Wb(t),e)for(t=0;t<e.length;t++)Wb(e[t])}}function dE(t,e){return t(e)}function hE(){}var xp=!1;function fE(t,e,n){if(xp)return t(e,n);xp=!0;try{return dE(t,e,n)}finally{xp=!1,(pa!==null||ga!==null)&&(hE(),uE())}}function jc(t,e){var n=t.stateNode;if(n===null)return null;var r=Wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Xg=!1;if(ds)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{Xg=!1}function MD(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var oc=!1,fh=null,mh=!1,Jg=null,DD={onError:function(t){oc=!0,fh=t}};function OD(t,e,n,r,s,i,o,l,c){oc=!1,fh=null,MD.apply(DD,arguments)}function LD(t,e,n,r,s,i,o,l,c){if(OD.apply(this,arguments),oc){if(oc){var u=fh;oc=!1,fh=null}else throw Error(Y(198));mh||(mh=!0,Jg=u)}}function Do(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hb(t){if(Do(t)!==t)throw Error(Y(188))}function FD(t){var e=t.alternate;if(!e){if(e=Do(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hb(s),t;if(i===r)return Hb(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function pE(t){return t=FD(t),t!==null?gE(t):null}function gE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gE(t);if(e!==null)return e;t=t.sibling}return null}var vE=Cn.unstable_scheduleCallback,Gb=Cn.unstable_cancelCallback,$D=Cn.unstable_shouldYield,VD=Cn.unstable_requestPaint,it=Cn.unstable_now,UD=Cn.unstable_getCurrentPriorityLevel,_x=Cn.unstable_ImmediatePriority,xE=Cn.unstable_UserBlockingPriority,ph=Cn.unstable_NormalPriority,BD=Cn.unstable_LowPriority,yE=Cn.unstable_IdlePriority,Vf=null,Rr=null;function zD(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(Vf,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:GD,WD=Math.log,HD=Math.LN2;function GD(t){return t>>>=0,t===0?32:31-(WD(t)/HD|0)|0}var td=64,nd=4194304;function Zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Zl(l):(i&=o,i!==0&&(r=Zl(i)))}else o=n&~s,o!==0?r=Zl(o):i!==0&&(r=Zl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function qD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=qD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Zg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function yp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function YD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Nx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function bE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _E,Cx,NE,CE,SE,e0=!1,rd=[],Zs=null,ei=null,ti=null,Rc=new Map,Ic=new Map,Ds=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qb(t,e){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Rc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ic.delete(e.pointerId)}}function Ol(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vu(e),e!==null&&Cx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function XD(t,e,n,r,s){switch(e){case"focusin":return Zs=Ol(Zs,t,e,n,r,s),!0;case"dragenter":return ei=Ol(ei,t,e,n,r,s),!0;case"mouseover":return ti=Ol(ti,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Rc.set(i,Ol(Rc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ic.set(i,Ol(Ic.get(i)||null,t,e,n,r,s)),!0}return!1}function EE(t){var e=Yi(t.target);if(e!==null){var n=Do(e);if(n!==null){if(e=n.tag,e===13){if(e=mE(n),e!==null){t.blockedOn=e,SE(t.priority,function(){NE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=t0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yg=r,n.target.dispatchEvent(r),Yg=null}else return e=vu(n),e!==null&&Cx(e),t.blockedOn=n,!1;e.shift()}return!0}function Kb(t,e,n){Fd(t)&&n.delete(e)}function JD(){e0=!1,Zs!==null&&Fd(Zs)&&(Zs=null),ei!==null&&Fd(ei)&&(ei=null),ti!==null&&Fd(ti)&&(ti=null),Rc.forEach(Kb),Ic.forEach(Kb)}function Ll(t,e){t.blockedOn===e&&(t.blockedOn=null,e0||(e0=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,JD)))}function Pc(t){function e(s){return Ll(s,t)}if(0<rd.length){Ll(rd[0],t);for(var n=1;n<rd.length;n++){var r=rd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zs!==null&&Ll(Zs,t),ei!==null&&Ll(ei,t),ti!==null&&Ll(ti,t),Rc.forEach(e),Ic.forEach(e),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)EE(n),n.blockedOn===null&&Ds.shift()}var va=Ns.ReactCurrentBatchConfig,vh=!0;function ZD(t,e,n,r){var s=Ie,i=va.transition;va.transition=null;try{Ie=1,Sx(t,e,n,r)}finally{Ie=s,va.transition=i}}function e4(t,e,n,r){var s=Ie,i=va.transition;va.transition=null;try{Ie=4,Sx(t,e,n,r)}finally{Ie=s,va.transition=i}}function Sx(t,e,n,r){if(vh){var s=t0(t,e,n,r);if(s===null)jp(t,e,r,xh,n),qb(t,r);else if(XD(s,t,e,n,r))r.stopPropagation();else if(qb(t,r),e&4&&-1<QD.indexOf(t)){for(;s!==null;){var i=vu(s);if(i!==null&&_E(i),i=t0(t,e,n,r),i===null&&jp(t,e,r,xh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else jp(t,e,r,null,n)}}var xh=null;function t0(t,e,n,r){if(xh=null,t=bx(r),t=Yi(t),t!==null)if(e=Do(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xh=t,null}function kE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UD()){case _x:return 1;case xE:return 4;case ph:case BD:return 16;case yE:return 536870912;default:return 16}default:return 16}}var Ys=null,Ex=null,$d=null;function TE(){if($d)return $d;var t,e=Ex,n=e.length,r,s="value"in Ys?Ys.value:Ys.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $d=s.slice(t,1<r?1-r:void 0)}function Vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sd(){return!0}function Yb(){return!1}function En(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sd:Yb,this.isPropagationStopped=Yb,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),e}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kx=En(ul),gu=Je({},ul,{view:0,detail:0}),t4=En(gu),wp,bp,Fl,Uf=Je({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(wp=t.screenX-Fl.screenX,bp=t.screenY-Fl.screenY):bp=wp=0,Fl=t),wp)},movementY:function(t){return"movementY"in t?t.movementY:bp}}),Qb=En(Uf),n4=Je({},Uf,{dataTransfer:0}),r4=En(n4),s4=Je({},gu,{relatedTarget:0}),_p=En(s4),i4=Je({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),o4=En(i4),a4=Je({},ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l4=En(a4),c4=Je({},ul,{data:0}),Xb=En(c4),u4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=h4[t])?!!e[t]:!1}function Tx(){return f4}var m4=Je({},gu,{key:function(t){if(t.key){var e=u4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tx,charCode:function(t){return t.type==="keypress"?Vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p4=En(m4),g4=Je({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jb=En(g4),v4=Je({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tx}),x4=En(v4),y4=Je({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),w4=En(y4),b4=Je({},Uf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_4=En(b4),N4=[9,13,27,32],jx=ds&&"CompositionEvent"in window,ac=null;ds&&"documentMode"in document&&(ac=document.documentMode);var C4=ds&&"TextEvent"in window&&!ac,jE=ds&&(!jx||ac&&8<ac&&11>=ac),Zb=" ",e_=!1;function RE(t,e){switch(t){case"keyup":return N4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function S4(t,e){switch(t){case"compositionend":return IE(e);case"keypress":return e.which!==32?null:(e_=!0,Zb);case"textInput":return t=e.data,t===Zb&&e_?null:t;default:return null}}function E4(t,e){if(Qo)return t==="compositionend"||!jx&&RE(t,e)?(t=TE(),$d=Ex=Ys=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jE&&e.locale!=="ko"?null:e.data;default:return null}}var k4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k4[t.type]:e==="textarea"}function PE(t,e,n,r){cE(r),e=yh(e,"onChange"),0<e.length&&(n=new kx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lc=null,Ac=null;function T4(t){zE(t,0)}function Bf(t){var e=Zo(t);if(nE(e))return t}function j4(t,e){if(t==="change")return e}var AE=!1;if(ds){var Np;if(ds){var Cp="oninput"in document;if(!Cp){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),Cp=typeof n_.oninput=="function"}Np=Cp}else Np=!1;AE=Np&&(!document.documentMode||9<document.documentMode)}function r_(){lc&&(lc.detachEvent("onpropertychange",ME),Ac=lc=null)}function ME(t){if(t.propertyName==="value"&&Bf(Ac)){var e=[];PE(e,Ac,t,bx(t)),fE(T4,e)}}function R4(t,e,n){t==="focusin"?(r_(),lc=e,Ac=n,lc.attachEvent("onpropertychange",ME)):t==="focusout"&&r_()}function I4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bf(Ac)}function P4(t,e){if(t==="click")return Bf(e)}function A4(t,e){if(t==="input"||t==="change")return Bf(e)}function M4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:M4;function Mc(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lg.call(e,s)||!cr(t[s],e[s]))return!1}return!0}function s_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i_(t,e){var n=s_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s_(n)}}function DE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OE(){for(var t=window,e=hh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hh(t.document)}return e}function Rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D4(t){var e=OE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DE(n.ownerDocument.documentElement,n)){if(r!==null&&Rx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=i_(n,i);var o=i_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O4=ds&&"documentMode"in document&&11>=document.documentMode,Xo=null,n0=null,cc=null,r0=!1;function o_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r0||Xo==null||Xo!==hh(r)||(r=Xo,"selectionStart"in r&&Rx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cc&&Mc(cc,r)||(cc=r,r=yh(n0,"onSelect"),0<r.length&&(e=new kx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xo)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jo={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Sp={},LE={};ds&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function zf(t){if(Sp[t])return Sp[t];if(!Jo[t])return t;var e=Jo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LE)return Sp[t]=e[n];return t}var FE=zf("animationend"),$E=zf("animationiteration"),VE=zf("animationstart"),UE=zf("transitionend"),BE=new Map,a_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(t,e){BE.set(t,e),Mo(e,[t])}for(var Ep=0;Ep<a_.length;Ep++){var kp=a_[Ep],L4=kp.toLowerCase(),F4=kp[0].toUpperCase()+kp.slice(1);Si(L4,"on"+F4)}Si(FE,"onAnimationEnd");Si($E,"onAnimationIteration");Si(VE,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(UE,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$4=new Set("cancel close invalid load scroll toggle".split(" ").concat(ec));function l_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LD(r,e,void 0,t),t.currentTarget=null}function zE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;l_(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;l_(s,l,u),i=c}}}if(mh)throw t=Jg,mh=!1,Jg=null,t}function ze(t,e){var n=e[l0];n===void 0&&(n=e[l0]=new Set);var r=t+"__bubble";n.has(r)||(WE(e,t,2,!1),n.add(r))}function Tp(t,e,n){var r=0;e&&(r|=4),WE(n,t,r,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function Dc(t){if(!t[od]){t[od]=!0,XS.forEach(function(n){n!=="selectionchange"&&($4.has(n)||Tp(n,!1,t),Tp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,Tp("selectionchange",!1,e))}}function WE(t,e,n,r){switch(kE(e)){case 1:var s=ZD;break;case 4:s=e4;break;default:s=Sx}n=s.bind(null,e,n,t),s=void 0,!Xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function jp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Yi(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}fE(function(){var u=i,d=bx(n),h=[];e:{var f=BE.get(t);if(f!==void 0){var p=kx,w=t;switch(t){case"keypress":if(Vd(n)===0)break e;case"keydown":case"keyup":p=p4;break;case"focusin":w="focus",p=_p;break;case"focusout":w="blur",p=_p;break;case"beforeblur":case"afterblur":p=_p;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=r4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=x4;break;case FE:case $E:case VE:p=o4;break;case UE:p=w4;break;case"scroll":p=t4;break;case"wheel":p=_4;break;case"copy":case"cut":case"paste":p=l4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jb}var x=(e&4)!==0,g=!x&&t==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var v=u,_;v!==null;){_=v;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,y!==null&&(C=jc(v,y),C!=null&&x.push(Oc(v,C,_)))),g)break;v=v.return}0<x.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Yg&&(w=n.relatedTarget||n.fromElement)&&(Yi(w)||w[hs]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?Yi(w):null,w!==null&&(g=Do(w),w!==g||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(x=Qb,C="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=Jb,C="onPointerLeave",y="onPointerEnter",v="pointer"),g=p==null?f:Zo(p),_=w==null?f:Zo(w),f=new x(C,v+"leave",p,n,d),f.target=g,f.relatedTarget=_,C=null,Yi(d)===u&&(x=new x(y,v+"enter",w,n,d),x.target=_,x.relatedTarget=g,C=x),g=C,p&&w)t:{for(x=p,y=w,v=0,_=x;_;_=Bo(_))v++;for(_=0,C=y;C;C=Bo(C))_++;for(;0<v-_;)x=Bo(x),v--;for(;0<_-v;)y=Bo(y),_--;for(;v--;){if(x===y||y!==null&&x===y.alternate)break t;x=Bo(x),y=Bo(y)}x=null}else x=null;p!==null&&c_(h,f,p,x,!1),w!==null&&g!==null&&c_(h,g,w,x,!0)}}e:{if(f=u?Zo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var b=j4;else if(t_(f))if(AE)b=A4;else{b=I4;var N=R4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=P4);if(b&&(b=b(t,u))){PE(h,b,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Wg(f,"number",f.value)}switch(N=u?Zo(u):window,t){case"focusin":(t_(N)||N.contentEditable==="true")&&(Xo=N,n0=u,cc=null);break;case"focusout":cc=n0=Xo=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,o_(h,n,d);break;case"selectionchange":if(O4)break;case"keydown":case"keyup":o_(h,n,d)}var S;if(jx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qo?RE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(jE&&n.locale!=="ko"&&(Qo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qo&&(S=TE()):(Ys=d,Ex="value"in Ys?Ys.value:Ys.textContent,Qo=!0)),N=yh(u,E),0<N.length&&(E=new Xb(E,t,null,n,d),h.push({event:E,listeners:N}),S?E.data=S:(S=IE(n),S!==null&&(E.data=S)))),(S=C4?S4(t,n):E4(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(d=new Xb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}zE(h,e)})}function Oc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jc(t,n),i!=null&&r.unshift(Oc(t,i,s)),i=jc(t,e),i!=null&&r.push(Oc(t,i,s))),t=t.return}return r}function Bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=jc(n,i),c!=null&&o.unshift(Oc(n,c,l))):s||(c=jc(n,i),c!=null&&o.push(Oc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var V4=/\r\n?/g,U4=/\u0000|\uFFFD/g;function u_(t){return(typeof t=="string"?t:""+t).replace(V4,`
`).replace(U4,"")}function ad(t,e,n){if(e=u_(e),u_(t)!==e&&n)throw Error(Y(425))}function wh(){}var s0=null,i0=null;function o0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a0=typeof setTimeout=="function"?setTimeout:void 0,B4=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,z4=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(t){return d_.resolve(null).then(t).catch(W4)}:a0;function W4(t){setTimeout(function(){throw t})}function Rp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Pc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Pc(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dl=Math.random().toString(36).slice(2),Er="__reactFiber$"+dl,Lc="__reactProps$"+dl,hs="__reactContainer$"+dl,l0="__reactEvents$"+dl,H4="__reactListeners$"+dl,G4="__reactHandles$"+dl;function Yi(t){var e=t[Er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hs]||n[Er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h_(t);t!==null;){if(n=t[Er])return n;t=h_(t)}return e}t=n,n=t.parentNode}return null}function vu(t){return t=t[Er]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Wf(t){return t[Lc]||null}var c0=[],ea=-1;function Ei(t){return{current:t}}function We(t){0>ea||(t.current=c0[ea],c0[ea]=null,ea--)}function Ve(t,e){ea++,c0[ea]=t.current,t.current=e}var gi={},Ut=Ei(gi),ln=Ei(!1),go=gi;function Va(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function bh(){We(ln),We(Ut)}function f_(t,e,n){if(Ut.current!==gi)throw Error(Y(168));Ve(Ut,e),Ve(ln,n)}function HE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,RD(t)||"Unknown",s));return Je({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,go=Ut.current,Ve(Ut,t),Ve(ln,ln.current),!0}function m_(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=HE(t,e,go),r.__reactInternalMemoizedMergedChildContext=t,We(ln),We(Ut),Ve(Ut,t)):We(ln),Ve(ln,n)}var ts=null,Hf=!1,Ip=!1;function GE(t){ts===null?ts=[t]:ts.push(t)}function q4(t){Hf=!0,GE(t)}function ki(){if(!Ip&&ts!==null){Ip=!0;var t=0,e=Ie;try{var n=ts;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ts=null,Hf=!1}catch(s){throw ts!==null&&(ts=ts.slice(t+1)),vE(_x,ki),s}finally{Ie=e,Ip=!1}}return null}var ta=[],na=0,Nh=null,Ch=0,In=[],Pn=0,vo=null,rs=1,ss="";function zi(t,e){ta[na++]=Ch,ta[na++]=Nh,Nh=t,Ch=e}function qE(t,e,n){In[Pn++]=rs,In[Pn++]=ss,In[Pn++]=vo,vo=t;var r=rs;t=ss;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,rs=1<<32-or(e)+s|n<<s|r,ss=i+t}else rs=1<<i|n<<s|r,ss=t}function Ix(t){t.return!==null&&(zi(t,1),qE(t,1,0))}function Px(t){for(;t===Nh;)Nh=ta[--na],ta[na]=null,Ch=ta[--na],ta[na]=null;for(;t===vo;)vo=In[--Pn],In[Pn]=null,ss=In[--Pn],In[Pn]=null,rs=In[--Pn],In[Pn]=null}var _n=null,bn=null,qe=!1,er=null;function KE(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,bn=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vo!==null?{id:rs,overflow:ss}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,bn=null,!0):!1;default:return!1}}function u0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d0(t){if(qe){var e=bn;if(e){var n=e;if(!p_(t,e)){if(u0(t))throw Error(Y(418));e=ni(n.nextSibling);var r=_n;e&&p_(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,qe=!1,_n=t)}}else{if(u0(t))throw Error(Y(418));t.flags=t.flags&-4097|2,qe=!1,_n=t}}}function g_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function ld(t){if(t!==_n)return!1;if(!qe)return g_(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o0(t.type,t.memoizedProps)),e&&(e=bn)){if(u0(t))throw YE(),Error(Y(418));for(;e;)KE(t,e),e=ni(e.nextSibling)}if(g_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=_n?ni(t.stateNode.nextSibling):null;return!0}function YE(){for(var t=bn;t;)t=ni(t.nextSibling)}function Ua(){bn=_n=null,qe=!1}function Ax(t){er===null?er=[t]:er.push(t)}var K4=Ns.ReactCurrentBatchConfig;function $l(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v_(t){var e=t._init;return e(t._payload)}function QE(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=oi(y,v),y.index=0,y.sibling=null,y}function i(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,_,C){return v===null||v.tag!==6?(v=Fp(_,y.mode,C),v.return=y,v):(v=s(v,_),v.return=y,v)}function c(y,v,_,C){var b=_.type;return b===Yo?d(y,v,_.props.children,C,_.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===As&&v_(b)===v.type)?(C=s(v,_.props),C.ref=$l(y,v,_),C.return=y,C):(C=qd(_.type,_.key,_.props,null,y.mode,C),C.ref=$l(y,v,_),C.return=y,C)}function u(y,v,_,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=$p(_,y.mode,C),v.return=y,v):(v=s(v,_.children||[]),v.return=y,v)}function d(y,v,_,C,b){return v===null||v.tag!==7?(v=lo(_,y.mode,C,b),v.return=y,v):(v=s(v,_),v.return=y,v)}function h(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fp(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ju:return _=qd(v.type,v.key,v.props,null,y.mode,_),_.ref=$l(y,null,v),_.return=y,_;case Ko:return v=$p(v,y.mode,_),v.return=y,v;case As:var C=v._init;return h(y,C(v._payload),_)}if(Jl(v)||Ml(v))return v=lo(v,y.mode,_,null),v.return=y,v;cd(y,v)}return null}function f(y,v,_,C){var b=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:l(y,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ju:return _.key===b?c(y,v,_,C):null;case Ko:return _.key===b?u(y,v,_,C):null;case As:return b=_._init,f(y,v,b(_._payload),C)}if(Jl(_)||Ml(_))return b!==null?null:d(y,v,_,C,null);cd(y,_)}return null}function p(y,v,_,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(_)||null,l(v,y,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ju:return y=y.get(C.key===null?_:C.key)||null,c(v,y,C,b);case Ko:return y=y.get(C.key===null?_:C.key)||null,u(v,y,C,b);case As:var N=C._init;return p(y,v,_,N(C._payload),b)}if(Jl(C)||Ml(C))return y=y.get(_)||null,d(v,y,C,b,null);cd(v,C)}return null}function w(y,v,_,C){for(var b=null,N=null,S=v,E=v=0,k=null;S!==null&&E<_.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var T=f(y,S,_[E],C);if(T===null){S===null&&(S=k);break}t&&S&&T.alternate===null&&e(y,S),v=i(T,v,E),N===null?b=T:N.sibling=T,N=T,S=k}if(E===_.length)return n(y,S),qe&&zi(y,E),b;if(S===null){for(;E<_.length;E++)S=h(y,_[E],C),S!==null&&(v=i(S,v,E),N===null?b=S:N.sibling=S,N=S);return qe&&zi(y,E),b}for(S=r(y,S);E<_.length;E++)k=p(S,y,E,_[E],C),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),v=i(k,v,E),N===null?b=k:N.sibling=k,N=k);return t&&S.forEach(function(R){return e(y,R)}),qe&&zi(y,E),b}function x(y,v,_,C){var b=Ml(_);if(typeof b!="function")throw Error(Y(150));if(_=b.call(_),_==null)throw Error(Y(151));for(var N=b=null,S=v,E=v=0,k=null,T=_.next();S!==null&&!T.done;E++,T=_.next()){S.index>E?(k=S,S=null):k=S.sibling;var R=f(y,S,T.value,C);if(R===null){S===null&&(S=k);break}t&&S&&R.alternate===null&&e(y,S),v=i(R,v,E),N===null?b=R:N.sibling=R,N=R,S=k}if(T.done)return n(y,S),qe&&zi(y,E),b;if(S===null){for(;!T.done;E++,T=_.next())T=h(y,T.value,C),T!==null&&(v=i(T,v,E),N===null?b=T:N.sibling=T,N=T);return qe&&zi(y,E),b}for(S=r(y,S);!T.done;E++,T=_.next())T=p(S,y,E,T.value,C),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?E:T.key),v=i(T,v,E),N===null?b=T:N.sibling=T,N=T);return t&&S.forEach(function(I){return e(y,I)}),qe&&zi(y,E),b}function g(y,v,_,C){if(typeof _=="object"&&_!==null&&_.type===Yo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ju:e:{for(var b=_.key,N=v;N!==null;){if(N.key===b){if(b=_.type,b===Yo){if(N.tag===7){n(y,N.sibling),v=s(N,_.props.children),v.return=y,y=v;break e}}else if(N.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===As&&v_(b)===N.type){n(y,N.sibling),v=s(N,_.props),v.ref=$l(y,N,_),v.return=y,y=v;break e}n(y,N);break}else e(y,N);N=N.sibling}_.type===Yo?(v=lo(_.props.children,y.mode,C,_.key),v.return=y,y=v):(C=qd(_.type,_.key,_.props,null,y.mode,C),C.ref=$l(y,v,_),C.return=y,y=C)}return o(y);case Ko:e:{for(N=_.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=s(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=$p(_,y.mode,C),v.return=y,y=v}return o(y);case As:return N=_._init,g(y,v,N(_._payload),C)}if(Jl(_))return w(y,v,_,C);if(Ml(_))return x(y,v,_,C);cd(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,_),v.return=y,y=v):(n(y,v),v=Fp(_,y.mode,C),v.return=y,y=v),o(y)):n(y,v)}return g}var Ba=QE(!0),XE=QE(!1),Sh=Ei(null),Eh=null,ra=null,Mx=null;function Dx(){Mx=ra=Eh=null}function Ox(t){var e=Sh.current;We(Sh),t._currentValue=e}function h0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xa(t,e){Eh=t,Mx=ra=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Mx!==t)if(t={context:t,memoizedValue:e,next:null},ra===null){if(Eh===null)throw Error(Y(308));ra=t,Eh.dependencies={lanes:0,firstContext:t}}else ra=ra.next=t;return e}var Qi=null;function Lx(t){Qi===null?Qi=[t]:Qi.push(t)}function JE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lx(e)):(n.next=s.next,s.next=n),e.interleaved=n,fs(t,r)}function fs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ms=!1;function Fx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fs(t,n)}return s=r.interleaved,s===null?(e.next=e,Lx(r)):(e.next=s.next,s.next=e),r.interleaved=e,fs(t,n)}function Ud(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nx(t,n)}}function x_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kh(t,e,n,r){var s=t.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,x=l;switch(f=e,p=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Je({},h,f);break e;case 2:Ms=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yo|=o,t.lanes=o,t.memoizedState=h}}function y_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var xu={},Ir=Ei(xu),Fc=Ei(xu),$c=Ei(xu);function Xi(t){if(t===xu)throw Error(Y(174));return t}function $x(t,e){switch(Ve($c,e),Ve(Fc,t),Ve(Ir,xu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gg(e,t)}We(Ir),Ve(Ir,e)}function za(){We(Ir),We(Fc),We($c)}function ek(t){Xi($c.current);var e=Xi(Ir.current),n=Gg(e,t.type);e!==n&&(Ve(Fc,t),Ve(Ir,n))}function Vx(t){Fc.current===t&&(We(Ir),We(Fc))}var Ye=Ei(0);function Th(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pp=[];function Ux(){for(var t=0;t<Pp.length;t++)Pp[t]._workInProgressVersionPrimary=null;Pp.length=0}var Bd=Ns.ReactCurrentDispatcher,Ap=Ns.ReactCurrentBatchConfig,xo=0,Xe=null,dt=null,wt=null,jh=!1,uc=!1,Vc=0,Y4=0;function Mt(){throw Error(Y(321))}function Bx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function zx(t,e,n,r,s,i){if(xo=i,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bd.current=t===null||t.memoizedState===null?Z4:eO,t=n(r,s),uc){i=0;do{if(uc=!1,Vc=0,25<=i)throw Error(Y(301));i+=1,wt=dt=null,e.updateQueue=null,Bd.current=tO,t=n(r,s)}while(uc)}if(Bd.current=Rh,e=dt!==null&&dt.next!==null,xo=0,wt=dt=Xe=null,jh=!1,e)throw Error(Y(300));return t}function Wx(){var t=Vc!==0;return Vc=0,t}function _r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Xe.memoizedState=wt=t:wt=wt.next=t,wt}function Vn(){if(dt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=wt===null?Xe.memoizedState:wt.next;if(e!==null)wt=e,dt=t;else{if(t===null)throw Error(Y(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},wt===null?Xe.memoizedState=wt=t:wt=wt.next=t}return wt}function Uc(t,e){return typeof e=="function"?e(t):e}function Mp(t){var e=Vn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((xo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Xe.lanes|=d,yo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,cr(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Xe.lanes|=i,yo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dp(t){var e=Vn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cr(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tk(){}function nk(t,e){var n=Xe,r=Vn(),s=e(),i=!cr(r.memoizedState,s);if(i&&(r.memoizedState=s,sn=!0),r=r.queue,Hx(ik.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Bc(9,sk.bind(null,n,r,s,e),void 0,null),_t===null)throw Error(Y(349));xo&30||rk(n,e,s)}return s}function rk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sk(t,e,n,r){e.value=n,e.getSnapshot=r,ok(e)&&ak(t)}function ik(t,e,n){return n(function(){ok(e)&&ak(t)})}function ok(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function ak(t){var e=fs(t,1);e!==null&&ar(e,t,1,-1)}function w_(t){var e=_r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:t},e.queue=t,t=t.dispatch=J4.bind(null,Xe,t),[e.memoizedState,t]}function Bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lk(){return Vn().memoizedState}function zd(t,e,n,r){var s=_r();Xe.flags|=t,s.memoizedState=Bc(1|e,n,void 0,r===void 0?null:r)}function Gf(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(dt!==null){var o=dt.memoizedState;if(i=o.destroy,r!==null&&Bx(r,o.deps)){s.memoizedState=Bc(e,n,i,r);return}}Xe.flags|=t,s.memoizedState=Bc(1|e,n,i,r)}function b_(t,e){return zd(8390656,8,t,e)}function Hx(t,e){return Gf(2048,8,t,e)}function ck(t,e){return Gf(4,2,t,e)}function uk(t,e){return Gf(4,4,t,e)}function dk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hk(t,e,n){return n=n!=null?n.concat([t]):null,Gf(4,4,dk.bind(null,e,t),n)}function Gx(){}function fk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pk(t,e,n){return xo&21?(cr(n,e)||(n=wE(),Xe.lanes|=n,yo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function Q4(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Ap.transition;Ap.transition={};try{t(!1),e()}finally{Ie=n,Ap.transition=r}}function gk(){return Vn().memoizedState}function X4(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vk(t))xk(e,n);else if(n=JE(t,e,n,r),n!==null){var s=Qt();ar(n,t,r,s),yk(n,e,r)}}function J4(t,e,n){var r=ii(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vk(t))xk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,cr(l,o)){var c=e.interleaved;c===null?(s.next=s,Lx(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=JE(t,e,s,r),n!==null&&(s=Qt(),ar(n,t,r,s),yk(n,e,r))}}function vk(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function xk(t,e){uc=jh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nx(t,n)}}var Rh={readContext:$n,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Z4={readContext:$n,useCallback:function(t,e){return _r().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:b_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zd(4194308,4,dk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return zd(4,2,t,e)},useMemo:function(t,e){var n=_r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=X4.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=_r();return t={current:t},e.memoizedState=t},useState:w_,useDebugValue:Gx,useDeferredValue:function(t){return _r().memoizedState=t},useTransition:function(){var t=w_(!1),e=t[0];return t=Q4.bind(null,t[1]),_r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,s=_r();if(qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),_t===null)throw Error(Y(349));xo&30||rk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,b_(ik.bind(null,r,i,t),[t]),r.flags|=2048,Bc(9,sk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_r(),e=_t.identifierPrefix;if(qe){var n=ss,r=rs;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Y4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eO={readContext:$n,useCallback:fk,useContext:$n,useEffect:Hx,useImperativeHandle:hk,useInsertionEffect:ck,useLayoutEffect:uk,useMemo:mk,useReducer:Mp,useRef:lk,useState:function(){return Mp(Uc)},useDebugValue:Gx,useDeferredValue:function(t){var e=Vn();return pk(e,dt.memoizedState,t)},useTransition:function(){var t=Mp(Uc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:tk,useSyncExternalStore:nk,useId:gk,unstable_isNewReconciler:!1},tO={readContext:$n,useCallback:fk,useContext:$n,useEffect:Hx,useImperativeHandle:hk,useInsertionEffect:ck,useLayoutEffect:uk,useMemo:mk,useReducer:Dp,useRef:lk,useState:function(){return Dp(Uc)},useDebugValue:Gx,useDeferredValue:function(t){var e=Vn();return dt===null?e.memoizedState=t:pk(e,dt.memoizedState,t)},useTransition:function(){var t=Dp(Uc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:tk,useSyncExternalStore:nk,useId:gk,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function f0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qf={isMounted:function(t){return(t=t._reactInternals)?Do(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ii(t),i=cs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(ar(e,t,s,r),Ud(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ii(t),i=cs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ri(t,i,s),e!==null&&(ar(e,t,s,r),Ud(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=ii(t),s=cs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ri(t,s,r),e!==null&&(ar(e,t,r,n),Ud(e,t,r))}};function __(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Mc(n,r)||!Mc(s,i):!0}function wk(t,e,n){var r=!1,s=gi,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=cn(e)?go:Ut.current,r=e.contextTypes,i=(r=r!=null)?Va(t,s):gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function N_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qf.enqueueReplaceState(e,e.state,null)}function m0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Fx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=cn(e)?go:Ut.current,s.context=Va(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(f0(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qf.enqueueReplaceState(s,s.state,null),kh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wa(t,e){try{var n="",r=e;do n+=jD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function p0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nO=typeof WeakMap=="function"?WeakMap:Map;function bk(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ph||(Ph=!0,S0=r),p0(t,e)},n}function _k(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){p0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){p0(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function C_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=gO.bind(null,t,e,n),e.then(t,t))}function S_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var rO=Ns.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?XE(e,null,n,r):Ba(e,t.child,n,r)}function k_(t,e,n,r,s){n=n.render;var i=e.ref;return xa(e,s),r=zx(t,e,n,r,i,s),n=Wx(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(qe&&n&&Ix(e),e.flags|=1,Gt(t,e,r,s),e.child)}function T_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ey(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Nk(t,e,i,r,s)):(t=qd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(o,r)&&t.ref===e.ref)return ms(t,e,s)}return e.flags|=1,t=oi(i,r),t.ref=e.ref,t.return=e,e.child=t}function Nk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Mc(i,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,ms(t,e,s)}return g0(t,e,n,r,s)}function Ck(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(ia,yn),yn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(ia,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ve(ia,yn),yn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ve(ia,yn),yn|=r;return Gt(t,e,s,n),e.child}function Sk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function g0(t,e,n,r,s){var i=cn(n)?go:Ut.current;return i=Va(e,i),xa(e,s),n=zx(t,e,n,r,i,s),r=Wx(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(qe&&r&&Ix(e),e.flags|=1,Gt(t,e,n,s),e.child)}function j_(t,e,n,r,s){if(cn(n)){var i=!0;_h(e)}else i=!1;if(xa(e,s),e.stateNode===null)Wd(t,e),wk(e,n,r),m0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=cn(n)?go:Ut.current,u=Va(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&N_(e,o,r,u),Ms=!1;var f=e.memoizedState;o.state=f,kh(e,r,o,s),c=e.memoizedState,l!==r||f!==c||ln.current||Ms?(typeof d=="function"&&(f0(e,n,d,r),c=e.memoizedState),(l=Ms||__(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Kn(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=$n(c):(c=cn(n)?go:Ut.current,c=Va(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&N_(e,o,r,c),Ms=!1,f=e.memoizedState,o.state=f,kh(e,r,o,s);var w=e.memoizedState;l!==h||f!==w||ln.current||Ms?(typeof p=="function"&&(f0(e,n,p,r),w=e.memoizedState),(u=Ms||__(e,n,u,r,f,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return v0(t,e,n,r,i,s)}function v0(t,e,n,r,s,i){Sk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&m_(e,n,!1),ms(t,e,i);r=e.stateNode,rO.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ba(e,t.child,null,i),e.child=Ba(e,null,l,i)):Gt(t,e,l,i),e.memoizedState=r.state,s&&m_(e,n,!0),e.child}function Ek(t){var e=t.stateNode;e.pendingContext?f_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f_(t,e.context,!1),$x(t,e.containerInfo)}function R_(t,e,n,r,s){return Ua(),Ax(s),e.flags|=256,Gt(t,e,n,r),e.child}var x0={dehydrated:null,treeContext:null,retryLane:0};function y0(t){return{baseLanes:t,cachePool:null,transitions:null}}function kk(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve(Ye,s&1),t===null)return d0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qf(o,r,0,null),t=lo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=y0(n),e.memoizedState=x0,t):qx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return sO(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=oi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=oi(l,i):(i=lo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?y0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=x0,r}return i=t.child,t=i.sibling,r=oi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qx(t,e){return e=Qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,r){return r!==null&&Ax(r),Ba(e,t.child,null,n),t=qx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Op(Error(Y(422))),ud(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qf({mode:"visible",children:r.children},s,0,null),i=lo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ba(e,t.child,null,o),e.child.memoizedState=y0(o),e.memoizedState=x0,i);if(!(e.mode&1))return ud(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Y(419)),r=Op(i,r,void 0),ud(t,e,o,r)}if(l=(o&t.childLanes)!==0,sn||l){if(r=_t,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fs(t,s),ar(r,t,s,-1))}return Zx(),r=Op(Error(Y(421))),ud(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=ni(s.nextSibling),_n=e,qe=!0,er=null,t!==null&&(In[Pn++]=rs,In[Pn++]=ss,In[Pn++]=vo,rs=t.id,ss=t.overflow,vo=e),e=qx(e,r.children),e.flags|=4096,e)}function I_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),h0(t.return,e,n)}function Lp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Tk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Gt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I_(t,n,e);else if(t.tag===19)I_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Th(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Th(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lp(e,!0,n,null,i);break;case"together":Lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iO(t,e,n){switch(e.tag){case 3:Ek(e),Ua();break;case 5:ek(e);break;case 1:cn(e.type)&&_h(e);break;case 4:$x(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ve(Sh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?kk(t,e,n):(Ve(Ye,Ye.current&1),t=ms(t,e,n),t!==null?t.sibling:null);Ve(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Tk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Ck(t,e,n)}return ms(t,e,n)}var jk,w0,Rk,Ik;jk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w0=function(){};Rk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xi(Ir.current);var i=null;switch(n){case"input":s=Bg(t,s),r=Bg(t,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=Hg(t,s),r=Hg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wh)}qg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ze("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ik=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vl(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oO(t,e,n){var r=e.pendingProps;switch(Px(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return cn(e.type)&&bh(),Dt(e),null;case 3:return r=e.stateNode,za(),We(ln),We(Ut),Ux(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(T0(er),er=null))),w0(t,e),Dt(e),null;case 5:Vx(e);var s=Xi($c.current);if(n=e.type,t!==null&&e.stateNode!=null)Rk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Dt(e),null}if(t=Xi(Ir.current),ld(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Er]=e,r[Lc]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<ec.length;s++)ze(ec[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Vb(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":Bb(r,i),ze("invalid",r)}qg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ad(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ad(r.textContent,l,t),s=["children",""+l]):kc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Zu(r),Ub(r,i,!0);break;case"textarea":Zu(r),zb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Er]=e,t[Lc]=r,jk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kg(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<ec.length;s++)ze(ec[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":Vb(t,r),s=Bg(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),ze("invalid",t);break;case"textarea":Bb(t,r),s=Hg(t,r),ze("invalid",t);break;default:s=r}qg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tc(t,c):typeof c=="number"&&Tc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",t):c!=null&&vx(t,i,c,o))}switch(n){case"input":Zu(t),Ub(t,r,!1);break;case"textarea":Zu(t),zb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ma(t,!!r.multiple,i,!1):r.defaultValue!=null&&ma(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)Ik(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Xi($c.current),Xi(Ir.current),ld(e)){if(r=e.stateNode,n=e.memoizedProps,r[Er]=e,(i=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=e,e.stateNode=r}return Dt(e),null;case 13:if(We(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&bn!==null&&e.mode&1&&!(e.flags&128))YE(),Ua(),e.flags|=98560,i=!1;else if(i=ld(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[Er]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else er!==null&&(T0(er),er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?pt===0&&(pt=3):Zx())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return za(),w0(t,e),t===null&&Dc(e.stateNode.containerInfo),Dt(e),null;case 10:return Ox(e.type._context),Dt(e),null;case 17:return cn(e.type)&&bh(),Dt(e),null;case 19:if(We(Ye),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Vl(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Th(t),o!==null){for(e.flags|=128,Vl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>Ha&&(e.flags|=128,r=!0,Vl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Th(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return Dt(e),null}else 2*it()-i.renderingStartTime>Ha&&n!==1073741824&&(e.flags|=128,r=!0,Vl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=Ye.current,Ve(Ye,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Jx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function aO(t,e){switch(Px(e),e.tag){case 1:return cn(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return za(),We(ln),We(Ut),Ux(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vx(e),null;case 13:if(We(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ye),null;case 4:return za(),null;case 10:return Ox(e.type._context),null;case 22:case 23:return Jx(),null;case 24:return null;default:return null}}var dd=!1,$t=!1,lO=typeof WeakSet=="function"?WeakSet:Set,ee=null;function sa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function b0(t,e,n){try{n()}catch(r){tt(t,e,r)}}var P_=!1;function cO(t,e){if(s0=vh,t=OE(),Rx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(i0={focusedElem:t,selectionRange:n},vh=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,g=w.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:Kn(e.type,x),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(C){tt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return w=P_,P_=!1,w}function dc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&b0(e,n,i)}s=s.next}while(s!==r)}}function Kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pk(t){var e=t.alternate;e!==null&&(t.alternate=null,Pk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[Lc],delete e[l0],delete e[H4],delete e[G4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ak(t){return t.tag===5||t.tag===3||t.tag===4}function A_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ak(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function N0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wh));else if(r!==4&&(t=t.child,t!==null))for(N0(t,e,n),t=t.sibling;t!==null;)N0(t,e,n),t=t.sibling}function C0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(C0(t,e,n),t=t.sibling;t!==null;)C0(t,e,n),t=t.sibling}var Et=null,Jn=!1;function Es(t,e,n){for(n=n.child;n!==null;)Mk(t,e,n),n=n.sibling}function Mk(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(Vf,n)}catch{}switch(n.tag){case 5:$t||sa(n,e);case 6:var r=Et,s=Jn;Et=null,Es(t,e,n),Et=r,Jn=s,Et!==null&&(Jn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Jn?(t=Et,n=n.stateNode,t.nodeType===8?Rp(t.parentNode,n):t.nodeType===1&&Rp(t,n),Pc(t)):Rp(Et,n.stateNode));break;case 4:r=Et,s=Jn,Et=n.stateNode.containerInfo,Jn=!0,Es(t,e,n),Et=r,Jn=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&b0(n,e,o),s=s.next}while(s!==r)}Es(t,e,n);break;case 1:if(!$t&&(sa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,e,l)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,Es(t,e,n),$t=r):Es(t,e,n);break;default:Es(t,e,n)}}function M_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lO),e.forEach(function(r){var s=xO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,Jn=!1;break e;case 3:Et=l.stateNode.containerInfo,Jn=!0;break e;case 4:Et=l.stateNode.containerInfo,Jn=!0;break e}l=l.return}if(Et===null)throw Error(Y(160));Mk(i,o,s),Et=null,Jn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dk(e,t),e=e.sibling}function Dk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),br(t),r&4){try{dc(3,t,t.return),Kf(3,t)}catch(x){tt(t,t.return,x)}try{dc(5,t,t.return)}catch(x){tt(t,t.return,x)}}break;case 1:zn(e,t),br(t),r&512&&n!==null&&sa(n,n.return);break;case 5:if(zn(e,t),br(t),r&512&&n!==null&&sa(n,n.return),t.flags&32){var s=t.stateNode;try{Tc(s,"")}catch(x){tt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rE(s,i),Kg(l,o);var u=Kg(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?lE(s,h):d==="dangerouslySetInnerHTML"?oE(s,h):d==="children"?Tc(s,h):vx(s,d,h,u)}switch(l){case"input":zg(s,i);break;case"textarea":sE(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ma(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ma(s,!!i.multiple,i.defaultValue,!0):ma(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lc]=i}catch(x){tt(t,t.return,x)}}break;case 6:if(zn(e,t),br(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){tt(t,t.return,x)}}break;case 3:if(zn(e,t),br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pc(e.containerInfo)}catch(x){tt(t,t.return,x)}break;case 4:zn(e,t),br(t);break;case 13:zn(e,t),br(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qx=it())),r&4&&M_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||d,zn(e,t),$t=u):zn(e,t),br(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:dc(4,f,f.return);break;case 1:sa(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){tt(r,n,x)}}break;case 5:sa(f,f.return);break;case 22:if(f.memoizedState!==null){O_(h);continue}}p!==null?(p.return=f,ee=p):O_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=aE("display",o))}catch(x){tt(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){tt(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zn(e,t),br(t),r&4&&M_(t);break;case 21:break;default:zn(e,t),br(t)}}function br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ak(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tc(s,""),r.flags&=-33);var i=A_(t);C0(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=A_(t);N0(t,l,o);break;default:throw Error(Y(161))}}catch(c){tt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uO(t,e,n){ee=t,Ok(t)}function Ok(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||dd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||$t;l=dd;var u=$t;if(dd=o,($t=c)&&!u)for(ee=s;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?L_(s):c!==null?(c.return=o,ee=c):L_(s);for(;i!==null;)ee=i,Ok(i),i=i.sibling;ee=s,dd=l,$t=u}D_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):D_(t)}}function D_(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Pc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}$t||e.flags&512&&_0(e)}catch(f){tt(e,e.return,f)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function O_(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function L_(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kf(4,e)}catch(c){tt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tt(e,s,c)}}var i=e.return;try{_0(e)}catch(c){tt(e,i,c)}break;case 5:var o=e.return;try{_0(e)}catch(c){tt(e,o,c)}}}catch(c){tt(e,e.return,c)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var dO=Math.ceil,Ih=Ns.ReactCurrentDispatcher,Kx=Ns.ReactCurrentOwner,Ln=Ns.ReactCurrentBatchConfig,Se=0,_t=null,lt=null,Rt=0,yn=0,ia=Ei(0),pt=0,zc=null,yo=0,Yf=0,Yx=0,hc=null,rn=null,Qx=0,Ha=1/0,es=null,Ph=!1,S0=null,si=null,hd=!1,Qs=null,Ah=0,fc=0,E0=null,Hd=-1,Gd=0;function Qt(){return Se&6?it():Hd!==-1?Hd:Hd=it()}function ii(t){return t.mode&1?Se&2&&Rt!==0?Rt&-Rt:K4.transition!==null?(Gd===0&&(Gd=wE()),Gd):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:kE(t.type)),t):1}function ar(t,e,n,r){if(50<fc)throw fc=0,E0=null,Error(Y(185));pu(t,n,r),(!(Se&2)||t!==_t)&&(t===_t&&(!(Se&2)&&(Yf|=n),pt===4&&Os(t,Rt)),un(t,r),n===1&&Se===0&&!(e.mode&1)&&(Ha=it()+500,Hf&&ki()))}function un(t,e){var n=t.callbackNode;KD(t,e);var r=gh(t,t===_t?Rt:0);if(r===0)n!==null&&Gb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gb(n),e===1)t.tag===0?q4(F_.bind(null,t)):GE(F_.bind(null,t)),z4(function(){!(Se&6)&&ki()}),n=null;else{switch(bE(r)){case 1:n=_x;break;case 4:n=xE;break;case 16:n=ph;break;case 536870912:n=yE;break;default:n=ph}n=Wk(n,Lk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lk(t,e){if(Hd=-1,Gd=0,Se&6)throw Error(Y(327));var n=t.callbackNode;if(ya()&&t.callbackNode!==n)return null;var r=gh(t,t===_t?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mh(t,r);else{e=r;var s=Se;Se|=2;var i=$k();(_t!==t||Rt!==e)&&(es=null,Ha=it()+500,ao(t,e));do try{mO();break}catch(l){Fk(t,l)}while(!0);Dx(),Ih.current=i,Se=s,lt!==null?e=0:(_t=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(s=Zg(t),s!==0&&(r=s,e=k0(t,s))),e===1)throw n=zc,ao(t,0),Os(t,r),un(t,it()),n;if(e===6)Os(t,r);else{if(s=t.current.alternate,!(r&30)&&!hO(s)&&(e=Mh(t,r),e===2&&(i=Zg(t),i!==0&&(r=i,e=k0(t,i))),e===1))throw n=zc,ao(t,0),Os(t,r),un(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Wi(t,rn,es);break;case 3:if(Os(t,r),(r&130023424)===r&&(e=Qx+500-it(),10<e)){if(gh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=a0(Wi.bind(null,t,rn,es),e);break}Wi(t,rn,es);break;case 4:if(Os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dO(r/1960))-r,10<r){t.timeoutHandle=a0(Wi.bind(null,t,rn,es),r);break}Wi(t,rn,es);break;case 5:Wi(t,rn,es);break;default:throw Error(Y(329))}}}return un(t,it()),t.callbackNode===n?Lk.bind(null,t):null}function k0(t,e){var n=hc;return t.current.memoizedState.isDehydrated&&(ao(t,e).flags|=256),t=Mh(t,e),t!==2&&(e=rn,rn=n,e!==null&&T0(e)),t}function T0(t){rn===null?rn=t:rn.push.apply(rn,t)}function hO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~Yx,e&=~Yf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function F_(t){if(Se&6)throw Error(Y(327));ya();var e=gh(t,0);if(!(e&1))return un(t,it()),null;var n=Mh(t,e);if(t.tag!==0&&n===2){var r=Zg(t);r!==0&&(e=r,n=k0(t,r))}if(n===1)throw n=zc,ao(t,0),Os(t,e),un(t,it()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wi(t,rn,es),un(t,it()),null}function Xx(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Ha=it()+500,Hf&&ki())}}function wo(t){Qs!==null&&Qs.tag===0&&!(Se&6)&&ya();var e=Se;Se|=1;var n=Ln.transition,r=Ie;try{if(Ln.transition=null,Ie=1,t)return t()}finally{Ie=r,Ln.transition=n,Se=e,!(Se&6)&&ki()}}function Jx(){yn=ia.current,We(ia)}function ao(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B4(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Px(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:za(),We(ln),We(Ut),Ux();break;case 5:Vx(r);break;case 4:za();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Ox(r.type._context);break;case 22:case 23:Jx()}n=n.return}if(_t=t,lt=t=oi(t.current,null),Rt=yn=e,pt=0,zc=null,Yx=Yf=yo=0,rn=hc=null,Qi!==null){for(e=0;e<Qi.length;e++)if(n=Qi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qi=null}return t}function Fk(t,e){do{var n=lt;try{if(Dx(),Bd.current=Rh,jh){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jh=!1}if(xo=0,wt=dt=Xe=null,uc=!1,Vc=0,Kx.current=null,n===null||n.return===null){pt=1,zc=e,lt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Rt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=S_(o);if(p!==null){p.flags&=-257,E_(p,o,l,i,e),p.mode&1&&C_(i,u,e),e=p,c=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(c),e.updateQueue=x}else w.add(c);break e}else{if(!(e&1)){C_(i,u,e),Zx();break e}c=Error(Y(426))}}else if(qe&&l.mode&1){var g=S_(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),E_(g,o,l,i,e),Ax(Wa(c,l));break e}}i=c=Wa(c,l),pt!==4&&(pt=2),hc===null?hc=[i]:hc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=bk(i,c,e);x_(i,y);break e;case 1:l=c;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(si===null||!si.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=_k(i,l,e);x_(i,C);break e}}i=i.return}while(i!==null)}Uk(n)}catch(b){e=b,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function $k(){var t=Ih.current;return Ih.current=Rh,t===null?Rh:t}function Zx(){(pt===0||pt===3||pt===2)&&(pt=4),_t===null||!(yo&268435455)&&!(Yf&268435455)||Os(_t,Rt)}function Mh(t,e){var n=Se;Se|=2;var r=$k();(_t!==t||Rt!==e)&&(es=null,ao(t,e));do try{fO();break}catch(s){Fk(t,s)}while(!0);if(Dx(),Se=n,Ih.current=r,lt!==null)throw Error(Y(261));return _t=null,Rt=0,pt}function fO(){for(;lt!==null;)Vk(lt)}function mO(){for(;lt!==null&&!$D();)Vk(lt)}function Vk(t){var e=zk(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?Uk(t):lt=e,Kx.current=null}function Uk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aO(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,lt=null;return}}else if(n=oO(n,e,yn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);pt===0&&(pt=5)}function Wi(t,e,n){var r=Ie,s=Ln.transition;try{Ln.transition=null,Ie=1,pO(t,e,n,r)}finally{Ln.transition=s,Ie=r}return null}function pO(t,e,n,r){do ya();while(Qs!==null);if(Se&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(YD(t,i),t===_t&&(lt=_t=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,Wk(ph,function(){return ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var o=Ie;Ie=1;var l=Se;Se|=4,Kx.current=null,cO(t,n),Dk(n,t),D4(i0),vh=!!s0,i0=s0=null,t.current=n,uO(n),VD(),Se=l,Ie=o,Ln.transition=i}else t.current=n;if(hd&&(hd=!1,Qs=t,Ah=s),i=t.pendingLanes,i===0&&(si=null),zD(n.stateNode),un(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ph)throw Ph=!1,t=S0,S0=null,t;return Ah&1&&t.tag!==0&&ya(),i=t.pendingLanes,i&1?t===E0?fc++:(fc=0,E0=t):fc=0,ki(),null}function ya(){if(Qs!==null){var t=bE(Ah),e=Ln.transition,n=Ie;try{if(Ln.transition=null,Ie=16>t?16:t,Qs===null)var r=!1;else{if(t=Qs,Qs=null,Ah=0,Se&6)throw Error(Y(331));var s=Se;for(Se|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:dc(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,p=d.return;if(Pk(d),d===u){ee=null;break}if(f!==null){f.return=p,ee=f;break}ee=p}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:dc(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ee=y;break e}ee=i.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ee=_;else e:for(o=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Kf(9,l)}}catch(b){tt(l,l.return,b)}if(l===o){ee=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,ee=C;break e}ee=l.return}}if(Se=s,ki(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(Vf,t)}catch{}r=!0}return r}finally{Ie=n,Ln.transition=e}}return!1}function $_(t,e,n){e=Wa(n,e),e=bk(t,e,1),t=ri(t,e,1),e=Qt(),t!==null&&(pu(t,1,e),un(t,e))}function tt(t,e,n){if(t.tag===3)$_(t,t,n);else for(;e!==null;){if(e.tag===3){$_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=Wa(n,t),t=_k(e,t,1),e=ri(e,t,1),t=Qt(),e!==null&&(pu(e,1,t),un(e,t));break}}e=e.return}}function gO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(Rt&n)===n&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>it()-Qx?ao(t,0):Yx|=n),un(t,e)}function Bk(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=Qt();t=fs(t,e),t!==null&&(pu(t,e,n),un(t,n))}function vO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Bk(t,n)}function xO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),Bk(t,n)}var zk;zk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,iO(t,e,n);sn=!!(t.flags&131072)}else sn=!1,qe&&e.flags&1048576&&qE(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wd(t,e),t=e.pendingProps;var s=Va(e,Ut.current);xa(e,n),s=zx(null,e,r,t,s,n);var i=Wx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,_h(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fx(e),s.updater=qf,e.stateNode=s,s._reactInternals=e,m0(e,r,t,n),e=v0(null,e,r,!0,i,n)):(e.tag=0,qe&&i&&Ix(e),Gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wO(r),t=Kn(r,t),s){case 0:e=g0(null,e,r,t,n);break e;case 1:e=j_(null,e,r,t,n);break e;case 11:e=k_(null,e,r,t,n);break e;case 14:e=T_(null,e,r,Kn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),g0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),j_(t,e,r,s,n);case 3:e:{if(Ek(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ZE(t,e),kh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wa(Error(Y(423)),e),e=R_(t,e,r,n,s);break e}else if(r!==s){s=Wa(Error(Y(424)),e),e=R_(t,e,r,n,s);break e}else for(bn=ni(e.stateNode.containerInfo.firstChild),_n=e,qe=!0,er=null,n=XE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),r===s){e=ms(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return ek(e),t===null&&d0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,o0(r,s)?o=null:i!==null&&o0(r,i)&&(e.flags|=32),Sk(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&d0(e),null;case 13:return kk(t,e,n);case 4:return $x(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ba(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),k_(t,e,r,s,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ve(Sh,r._currentValue),r._currentValue=o,i!==null)if(cr(i.value,o)){if(i.children===s.children&&!ln.current){e=ms(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=cs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),h0(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),h0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xa(e,n),s=$n(s),r=r(s),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),T_(t,e,r,s,n);case 15:return Nk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Wd(t,e),e.tag=1,cn(r)?(t=!0,_h(e)):t=!1,xa(e,n),wk(e,r,s),m0(e,r,s,n),v0(null,e,r,!0,t,n);case 19:return Tk(t,e,n);case 22:return Ck(t,e,n)}throw Error(Y(156,e.tag))};function Wk(t,e){return vE(t,e)}function yO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new yO(t,e,n,r)}function ey(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wO(t){if(typeof t=="function")return ey(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yx)return 11;if(t===wx)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ey(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yo:return lo(n.children,s,i,e);case xx:o=8,s|=8;break;case Fg:return t=Mn(12,n,e,s|2),t.elementType=Fg,t.lanes=i,t;case $g:return t=Mn(13,n,e,s),t.elementType=$g,t.lanes=i,t;case Vg:return t=Mn(19,n,e,s),t.elementType=Vg,t.lanes=i,t;case eE:return Qf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JS:o=10;break e;case ZS:o=9;break e;case yx:o=11;break e;case wx:o=14;break e;case As:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function lo(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Qf(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=eE,t.lanes=n,t.stateNode={isHidden:!1},t}function Fp(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function $p(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yp(0),this.expirationTimes=yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ty(t,e,n,r,s,i,o,l,c){return t=new bO(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fx(i),t}function _O(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hk(t){if(!t)return gi;t=t._reactInternals;e:{if(Do(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(cn(n))return HE(t,n,e)}return e}function Gk(t,e,n,r,s,i,o,l,c){return t=ty(n,r,!0,t,s,i,o,l,c),t.context=Hk(null),n=t.current,r=Qt(),s=ii(n),i=cs(r,s),i.callback=e??null,ri(n,i,s),t.current.lanes=s,pu(t,s,r),un(t,r),t}function Xf(t,e,n,r){var s=e.current,i=Qt(),o=ii(s);return n=Hk(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(s,e,o),t!==null&&(ar(t,s,o,i),Ud(t,s,o)),o}function Dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ny(t,e){V_(t,e),(t=t.alternate)&&V_(t,e)}function NO(){return null}var qk=typeof reportError=="function"?reportError:function(t){console.error(t)};function ry(t){this._internalRoot=t}Jf.prototype.render=ry.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Xf(t,e,null,null)};Jf.prototype.unmount=ry.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){Xf(null,t,null,null)}),e[hs]=null}};function Jf(t){this._internalRoot=t}Jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&EE(t)}};function sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U_(){}function CO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Dh(o);i.call(u)}}var o=Gk(e,r,t,0,null,!1,!1,"",U_);return t._reactRootContainer=o,t[hs]=o.current,Dc(t.nodeType===8?t.parentNode:t),wo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Dh(c);l.call(u)}}var c=ty(t,0,!1,null,null,!1,!1,"",U_);return t._reactRootContainer=c,t[hs]=c.current,Dc(t.nodeType===8?t.parentNode:t),wo(function(){Xf(e,c,n,r)}),c}function em(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Dh(o);l.call(c)}}Xf(e,o,t,s)}else o=CO(n,e,t,s,r);return Dh(o)}_E=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zl(e.pendingLanes);n!==0&&(Nx(e,n|1),un(e,it()),!(Se&6)&&(Ha=it()+500,ki()))}break;case 13:wo(function(){var r=fs(t,1);if(r!==null){var s=Qt();ar(r,t,1,s)}}),ny(t,1)}};Cx=function(t){if(t.tag===13){var e=fs(t,134217728);if(e!==null){var n=Qt();ar(e,t,134217728,n)}ny(t,134217728)}};NE=function(t){if(t.tag===13){var e=ii(t),n=fs(t,e);if(n!==null){var r=Qt();ar(n,t,e,r)}ny(t,e)}};CE=function(){return Ie};SE=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Qg=function(t,e,n){switch(e){case"input":if(zg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wf(r);if(!s)throw Error(Y(90));nE(r),zg(r,s)}}}break;case"textarea":sE(t,n);break;case"select":e=n.value,e!=null&&ma(t,!!n.multiple,e,!1)}};dE=Xx;hE=wo;var SO={usingClientEntryPoint:!1,Events:[vu,Zo,Wf,cE,uE,Xx]},Ul={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EO={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||NO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Vf=fd.inject(EO),Rr=fd}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SO;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(e))throw Error(Y(200));return _O(t,e,null,n)};Sn.createRoot=function(t,e){if(!sy(t))throw Error(Y(299));var n=!1,r="",s=qk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ty(t,1,!1,null,null,n,!1,r,s),t[hs]=e.current,Dc(t.nodeType===8?t.parentNode:t),new ry(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=pE(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return wo(t)};Sn.hydrate=function(t,e,n){if(!Zf(e))throw Error(Y(200));return em(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!sy(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Gk(e,null,t,1,n??null,s,!1,i,o),t[hs]=e.current,Dc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Jf(e)};Sn.render=function(t,e,n){if(!Zf(e))throw Error(Y(200));return em(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Zf(t))throw Error(Y(40));return t._reactRootContainer?(wo(function(){em(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};Sn.unstable_batchedUpdates=Xx;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return em(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function Kk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kk)}catch(t){console.error(t)}}Kk(),KS.exports=Sn;var Oo=KS.exports;const iy=OS(Oo);var Yk,B_=Oo;Yk=B_.createRoot,B_.hydrateRoot;const kO=1,TO=1e6;let Vp=0;function jO(){return Vp=(Vp+1)%Number.MAX_SAFE_INTEGER,Vp.toString()}const Up=new Map,z_=t=>{if(Up.has(t))return;const e=setTimeout(()=>{Up.delete(t),mc({type:"REMOVE_TOAST",toastId:t})},TO);Up.set(t,e)},RO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,kO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?z_(n):t.toasts.forEach(r=>{z_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Kd=[];let Yd={toasts:[]};function mc(t){Yd=RO(Yd,t),Kd.forEach(e=>{e(Yd)})}function IO({...t}){const e=jO(),n=s=>mc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>mc({type:"DISMISS_TOAST",toastId:e});return mc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Nt(){const[t,e]=m.useState(Yd);return m.useEffect(()=>(Kd.push(e),()=>{const n=Kd.indexOf(e);n>-1&&Kd.splice(n,1)}),[t]),{...t,toast:IO,dismiss:n=>mc({type:"DISMISS_TOAST",toastId:n})}}function ne(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function W_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Qk(...t){return e=>{let n=!1;const r=t.map(s=>{const i=W_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():W_(t[s],null)}}}}function ve(...t){return m.useCallback(Qk(...t),t)}function PO(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function fn(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=h=>{var y;const{scope:f,children:p,...w}=h,x=((y=f==null?void 0:f[t])==null?void 0:y[c])||l,g=m.useMemo(()=>w,Object.values(w));return a.jsx(x.Provider,{value:g,children:p})};u.displayName=i+"Provider";function d(h,f){var x;const p=((x=f==null?void 0:f[t])==null?void 0:x[c])||l,w=m.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,AO(s,...e)]}function AO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ga(t){const e=DO(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(LO);if(c){const u=c.props.children,d=l.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var MO=Ga("Slot");function DO(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=$O(s),l=FO(i,s.props);return s.type!==m.Fragment&&(l.ref=r?Qk(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Xk=Symbol("radix.slottable");function OO(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Xk,e}function LO(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Xk}function FO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $O(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tm(t){const e=t+"CollectionProvider",[n,r]=fn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:g,children:y}=x,v=G.useRef(null),_=G.useRef(new Map).current;return a.jsx(s,{scope:g,itemMap:_,collectionRef:v,children:y})};o.displayName=e;const l=t+"CollectionSlot",c=Ga(l),u=G.forwardRef((x,g)=>{const{scope:y,children:v}=x,_=i(l,y),C=ve(g,_.collectionRef);return a.jsx(c,{ref:C,children:v})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Ga(d),p=G.forwardRef((x,g)=>{const{scope:y,children:v,..._}=x,C=G.useRef(null),b=ve(g,C),N=i(d,y);return G.useEffect(()=>(N.itemMap.set(C,{ref:C,..._}),()=>void N.itemMap.delete(C))),a.jsx(f,{[h]:"",ref:b,children:v})});p.displayName=d;function w(x){const g=i(t+"CollectionConsumer",x);return G.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((N,S)=>_.indexOf(N.ref.current)-_.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},w,r]}var VO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],se=VO.reduce((t,e)=>{const n=Ga(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Jk(t,e){t&&Oo.flushSync(()=>t.dispatchEvent(e))}function ft(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function UO(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var BO="DismissableLayer",j0="dismissableLayer.update",zO="dismissableLayer.pointerDownOutside",WO="dismissableLayer.focusOutside",H_,Zk=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(Zk),[d,h]=m.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),w=ve(e,S=>h(S)),x=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(g),v=d?x.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,C=v>=y,b=GO(S=>{const E=S.target,k=[...u.branches].some(T=>T.contains(E));!C||k||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},f),N=qO(S=>{const E=S.target;[...u.branches].some(T=>T.contains(E))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},f);return UO(S=>{v===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},f),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(H_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),G_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=H_)}},[d,f,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),G_())},[d,u]),m.useEffect(()=>{const S=()=>p({});return document.addEventListener(j0,S),()=>document.removeEventListener(j0,S)},[]),a.jsx(se.div,{...c,ref:w,style:{pointerEvents:_?C?"auto":"none":void 0,...t.style},onFocusCapture:ne(t.onFocusCapture,N.onFocusCapture),onBlurCapture:ne(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ne(t.onPointerDownCapture,b.onPointerDownCapture)})});yu.displayName=BO;var HO="DismissableLayerBranch",eT=m.forwardRef((t,e)=>{const n=m.useContext(Zk),r=m.useRef(null),s=ve(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(se.div,{...t,ref:s})});eT.displayName=HO;function GO(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){tT(zO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function qO(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&tT(WO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function G_(){const t=new CustomEvent(j0);document.dispatchEvent(t)}function tT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Jk(s,i):s.dispatchEvent(i)}var KO=yu,YO=eT,vt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},QO="Portal",nm=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);vt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?iy.createPortal(a.jsx(se.div,{...r,ref:e}),o):null});nm.displayName=QO;function XO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var kn=t=>{const{present:e,children:n}=t,r=JO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=ve(r.ref,ZO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};kn.displayName="Presence";function JO(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=XO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=md(r.current);i.current=l==="mounted"?u:"none"},[l]),vt(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,p=md(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),vt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const x=md(r.current).includes(p.animationName);if(p.target===e&&x&&(c("ANIMATION_END"),!s.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=p=>{p.target===e&&(i.current=md(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function md(t){return(t==null?void 0:t.animationName)||"none"}function ZO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var eL=mx[" useInsertionEffect ".trim().toString()]||vt;function ur({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=tL({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=m.useRef(t!==void 0);m.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=m.useCallback(d=>{var h;if(l){const f=nL(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,t,i,o]);return[c,u]}function tL({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return eL(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function nL(t){return typeof t=="function"}var nT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rL="VisuallyHidden",rm=m.forwardRef((t,e)=>a.jsx(se.span,{...t,ref:e,style:{...nT,...t.style}}));rm.displayName=rL;var sL=rm,oy="ToastProvider",[ay,iL,oL]=tm("Toast"),[rT,KZ]=fn("Toast",[oL]),[aL,sm]=rT(oy),sT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${oy}\`. Expected non-empty \`string\`.`),a.jsx(ay.Provider,{scope:e,children:a.jsx(aL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};sT.displayName=oy;var iT="ToastViewport",lL=["F8"],R0="toast.viewportPause",I0="toast.viewportResume",oT=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=lL,label:s="Notifications ({hotkey})",...i}=t,o=sm(iT,n),l=iL(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=ve(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;m.useEffect(()=>{const g=y=>{var _;r.length!==0&&r.every(C=>y[C]||y.code===C)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),m.useEffect(()=>{const g=c.current,y=h.current;if(w&&g&&y){const v=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(R0);y.dispatchEvent(N),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(I0);y.dispatchEvent(N),o.isClosePausedRef.current=!1}},C=N=>{!g.contains(N.relatedTarget)&&_()},b=()=>{g.contains(document.activeElement)||_()};return g.addEventListener("focusin",v),g.addEventListener("focusout",C),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",b),window.addEventListener("blur",v),window.addEventListener("focus",_),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",C),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",b),window.removeEventListener("blur",v),window.removeEventListener("focus",_)}}},[w,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:g})=>{const v=l().map(_=>{const C=_.ref.current,b=[C,...bL(C)];return g==="forwards"?b:b.reverse()});return(g==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const g=h.current;if(g){const y=v=>{var b,N,S;const _=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!_){const E=document.activeElement,k=v.shiftKey;if(v.target===g&&k){(b=u.current)==null||b.focus();return}const I=x({tabbingDirection:k?"backwards":"forwards"}),L=I.findIndex(P=>P===E);Bp(I.slice(L+1))?v.preventDefault():k?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[l,x]),a.jsxs(YO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(P0,{ref:u,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});Bp(g)}}),a.jsx(ay.Slot,{scope:n,children:a.jsx(se.ol,{tabIndex:-1,...i,ref:f})}),w&&a.jsx(P0,{ref:d,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});Bp(g)}})]})});oT.displayName=iT;var aT="ToastFocusProxy",P0=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=sm(aT,n);return a.jsx(rm,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});P0.displayName=aT;var wu="Toast",cL="toast.swipeStart",uL="toast.swipeMove",dL="toast.swipeCancel",hL="toast.swipeEnd",lT=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=ur({prop:r,defaultProp:s??!0,onChange:i,caller:wu});return a.jsx(kn,{present:n||l,children:a.jsx(pL,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ft(t.onPause),onResume:ft(t.onResume),onSwipeStart:ne(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ne(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ne(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ne(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});lT.displayName=wu;var[fL,mL]=rT(wu,{onClose(){}}),pL=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...w}=t,x=sm(wu,n),[g,y]=m.useState(null),v=ve(e,P=>y(P)),_=m.useRef(null),C=m.useRef(null),b=s||x.duration,N=m.useRef(0),S=m.useRef(b),E=m.useRef(0),{onToastAdd:k,onToastRemove:T}=x,R=ft(()=>{var V;(g==null?void 0:g.contains(document.activeElement))&&((V=x.viewport)==null||V.focus()),o()}),I=m.useCallback(P=>{!P||P===1/0||(window.clearTimeout(E.current),N.current=new Date().getTime(),E.current=window.setTimeout(R,P))},[R]);m.useEffect(()=>{const P=x.viewport;if(P){const V=()=>{I(S.current),u==null||u()},$=()=>{const H=new Date().getTime()-N.current;S.current=S.current-H,window.clearTimeout(E.current),c==null||c()};return P.addEventListener(R0,$),P.addEventListener(I0,V),()=>{P.removeEventListener(R0,$),P.removeEventListener(I0,V)}}},[x.viewport,b,c,u,I]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&I(b)},[i,b,x.isClosePausedRef,I]),m.useEffect(()=>(k(),()=>T()),[k,T]);const L=m.useMemo(()=>g?pT(g):null,[g]);return x.viewport?a.jsxs(a.Fragment,{children:[L&&a.jsx(gL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),a.jsx(fL,{scope:n,onClose:R,children:Oo.createPortal(a.jsx(ay.ItemSlot,{scope:n,children:a.jsx(KO,{asChild:!0,onEscapeKeyDown:ne(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||R(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ne(t.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:ne(t.onPointerDown,P=>{P.button===0&&(_.current={x:P.clientX,y:P.clientY})}),onPointerMove:ne(t.onPointerMove,P=>{if(!_.current)return;const V=P.clientX-_.current.x,$=P.clientY-_.current.y,H=!!C.current,A=["left","right"].includes(x.swipeDirection),D=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,j=A?D(0,V):0,q=A?0:D(0,$),Q=P.pointerType==="touch"?10:2,ie={x:j,y:q},le={originalEvent:P,delta:ie};H?(C.current=ie,pd(uL,h,le,{discrete:!1})):q_(ie,x.swipeDirection,Q)?(C.current=ie,pd(cL,d,le,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(V)>Q||Math.abs($)>Q)&&(_.current=null)}),onPointerUp:ne(t.onPointerUp,P=>{const V=C.current,$=P.target;if($.hasPointerCapture(P.pointerId)&&$.releasePointerCapture(P.pointerId),C.current=null,_.current=null,V){const H=P.currentTarget,A={originalEvent:P,delta:V};q_(V,x.swipeDirection,x.swipeThreshold)?pd(hL,p,A,{discrete:!0}):pd(dL,f,A,{discrete:!0}),H.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),gL=t=>{const{__scopeToast:e,children:n,...r}=t,s=sm(wu,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return yL(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(nm,{asChild:!0,children:a.jsx(rm,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},vL="ToastTitle",cT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(se.div,{...r,ref:e})});cT.displayName=vL;var xL="ToastDescription",uT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(se.div,{...r,ref:e})});uT.displayName=xL;var dT="ToastAction",hT=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(mT,{altText:n,asChild:!0,children:a.jsx(ly,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${dT}\`. Expected non-empty \`string\`.`),null)});hT.displayName=dT;var fT="ToastClose",ly=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=mL(fT,n);return a.jsx(mT,{asChild:!0,children:a.jsx(se.button,{type:"button",...r,ref:e,onClick:ne(t.onClick,s.onClose)})})});ly.displayName=fT;var mT=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function pT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),wL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...pT(r))}}),e}function pd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Jk(s,i):s.dispatchEvent(i)}var q_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function yL(t=()=>{}){const e=ft(t);vt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function wL(t){return t.nodeType===t.ELEMENT_NODE}function bL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Bp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var _L=sT,gT=oT,vT=lT,xT=cT,yT=uT,wT=hT,bT=ly;function _T(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=_T(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=_T(t))&&(r&&(r+=" "),r+=e);return r}const K_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Y_=NT,im=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Y_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=K_(d)||K_(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[x,g]=w;return Array.isArray(g)?g.includes({...i,...l}[x]):{...i,...l}[x]===g})?[...u,h,f]:u},[]);return Y_(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...CL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:CT("lucide",s),...l},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(SL,{ref:i,iconNode:e,className:CT(`lucide-${NL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=de("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=de("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=de("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=de("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=de("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=de("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=de("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=de("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=de("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=de("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=de("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=de("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=de("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=de("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=de("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=de("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=de("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=de("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),dy="-",LL=t=>{const e=$L(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(dy);return l[0]===""&&l.length!==1&&l.shift(),kT(l,e)||FL(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},kT=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?kT(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(dy);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},e1=/^\[(.+)\]$/,FL=t=>{if(e1.test(t)){const e=e1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},$L=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UL(Object.entries(t.classGroups),n).forEach(([i,o])=>{O0(o,r,i,e)}),r},O0=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:t1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(VL(s)){O0(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{O0(o,t1(e,i),n,r)})})},t1=(t,e)=>{let n=t;return e.split(dy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},VL=t=>t.isThemeGetter,UL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,BL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},TT="!",zL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let g=0;g<l.length;g++){let y=l[g];if(u===0){if(y===s&&(r||l.slice(g,g+i)===e)){c.push(l.slice(d,g)),d=g+i;continue}if(y==="/"){h=g;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?l:l.substring(d),p=f.startsWith(TT),w=p?f.substring(1):f,x=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},WL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},HL=t=>({cache:BL(t.cacheSize),parseClassName:zL(t),...LL(t)}),GL=/\s+/,qL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(GL);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let w=!!p,x=r(w?f.substring(0,p):f);if(!x){if(!w){l=u+(l.length>0?" "+l:l);continue}if(x=r(f),!x){l=u+(l.length>0?" "+l:l);continue}w=!1}const g=WL(d).join(":"),y=h?g+TT:g,v=y+x;if(i.includes(v))continue;i.push(v);const _=s(x,w);for(let C=0;C<_.length;++C){const b=_[C];i.push(y+b)}l=u+(l.length>0?" "+l:l)}return l};function KL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jT(e))&&(r&&(r+=" "),r+=n);return r}const jT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jT(t[r]))&&(n&&(n+=" "),n+=e);return n};function YL(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=HL(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=qL(c,n);return s(c,d),d}return function(){return i(KL.apply(null,arguments))}}const Be=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},RT=/^\[(?:([a-z-]+):)?(.+)\]$/i,QL=/^\d+\/\d+$/,XL=new Set(["px","full","screen"]),JL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jr=t=>ba(t)||XL.has(t)||QL.test(t),ks=t=>fl(t,"length",u3),ba=t=>!!t&&!Number.isNaN(Number(t)),Wp=t=>fl(t,"number",ba),Bl=t=>!!t&&Number.isInteger(Number(t)),r3=t=>t.endsWith("%")&&ba(t.slice(0,-1)),fe=t=>RT.test(t),Ts=t=>JL.test(t),s3=new Set(["length","size","percentage"]),i3=t=>fl(t,s3,IT),o3=t=>fl(t,"position",IT),a3=new Set(["image","url"]),l3=t=>fl(t,a3,h3),c3=t=>fl(t,"",d3),zl=()=>!0,fl=(t,e,n)=>{const r=RT.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},u3=t=>ZL.test(t)&&!e3.test(t),IT=()=>!1,d3=t=>t3.test(t),h3=t=>n3.test(t),f3=()=>{const t=Be("colors"),e=Be("spacing"),n=Be("blur"),r=Be("brightness"),s=Be("borderColor"),i=Be("borderRadius"),o=Be("borderSpacing"),l=Be("borderWidth"),c=Be("contrast"),u=Be("grayscale"),d=Be("hueRotate"),h=Be("invert"),f=Be("gap"),p=Be("gradientColorStops"),w=Be("gradientColorStopPositions"),x=Be("inset"),g=Be("margin"),y=Be("opacity"),v=Be("padding"),_=Be("saturate"),C=Be("scale"),b=Be("sepia"),N=Be("skew"),S=Be("space"),E=Be("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",fe,e],I=()=>[fe,e],L=()=>["",Jr,ks],P=()=>["auto",ba,fe],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",fe],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[ba,fe];return{cacheSize:500,separator:":",theme:{colors:[zl],spacing:[Jr,ks],blur:["none","",Ts,fe],brightness:q(),borderColor:[t],borderRadius:["none","","full",Ts,fe],borderSpacing:I(),borderWidth:L(),contrast:q(),grayscale:D(),hueRotate:q(),invert:D(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[r3,ks],inset:R(),margin:R(),opacity:q(),padding:I(),saturate:q(),scale:q(),sepia:D(),skew:q(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Ts]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),fe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bl,fe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Bl,fe]}],"grid-cols":[{"grid-cols":[zl]}],"col-start-end":[{col:["auto",{span:["full",Bl,fe]},fe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[zl]}],"row-start-end":[{row:["auto",{span:[Bl,fe]},fe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[Ts]},Ts]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ts,ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wp]}],"font-family":[{font:[zl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",ba,Wp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jr,ks]}],"underline-offset":[{"underline-offset":["auto",Jr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),o3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",i3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},l3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Jr,fe]}],"outline-w":[{outline:[Jr,ks]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Jr,ks]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ts,c3]}],"shadow-color":[{shadow:[zl]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ts,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Bl,fe]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jr,ks,Wp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},m3=YL(f3);function F(...t){return m3(NT(t))}const p3=_L,PT=m.forwardRef(({className:t,...e},n)=>a.jsx(gT,{ref:n,className:F("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));PT.displayName=gT.displayName;const g3=im("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AT=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(vT,{ref:r,className:F(g3({variant:e}),t),...n}));AT.displayName=vT.displayName;const v3=m.forwardRef(({className:t,...e},n)=>a.jsx(wT,{ref:n,className:F("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));v3.displayName=wT.displayName;const MT=m.forwardRef(({className:t,...e},n)=>a.jsx(bT,{ref:n,className:F("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(rr,{className:"h-4 w-4"})}));MT.displayName=bT.displayName;const DT=m.forwardRef(({className:t,...e},n)=>a.jsx(xT,{ref:n,className:F("text-sm font-semibold",t),...e}));DT.displayName=xT.displayName;const OT=m.forwardRef(({className:t,...e},n)=>a.jsx(yT,{ref:n,className:F("text-sm opacity-90",t),...e}));OT.displayName=yT.displayName;function x3(){const{toasts:t}=Nt();return a.jsxs(p3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(AT,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(DT,{children:n}),r&&a.jsx(OT,{children:r})]}),s,a.jsx(MT,{})]},e)}),a.jsx(PT,{})]})}var n1=["light","dark"],y3="(prefers-color-scheme: dark)",w3=m.createContext(void 0),b3={setTheme:t=>{},themes:[]},_3=()=>{var t;return(t=m.useContext(w3))!=null?t:b3};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?n1.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,x=!1,g=!0)=>{let y=o?o[w]:w,v=x?w+"|| ''":`'${y}'`,_="";return s&&g&&!x&&n1.includes(w)&&(_+=`d.style.colorScheme = '${w}';`),n==="class"?x||y?_+=`c.add(${v})`:_+="null":y&&(_+=`d[s](n,${v})`),_},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${y3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var N3=t=>{switch(t){case"success":return E3;case"info":return T3;case"warning":return k3;case"error":return j3;default:return null}},C3=Array(12).fill(0),S3=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},C3.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),E3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),k3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),T3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),j3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),I3=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},L0=1,P3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:L0++,i=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],G.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(M3(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||L0++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},nn=new P3,A3=(t,e)=>{let n=(e==null?void 0:e.id)||L0++;return nn.addToast({title:t,...e,id:n}),n},M3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",D3=A3,O3=()=>nn.toasts,L3=()=>nn.getActiveToasts(),ot=Object.assign(D3,{success:nn.success,info:nn.info,warning:nn.warning,error:nn.error,custom:nn.custom,message:nn.message,promise:nn.promise,dismiss:nn.dismiss,loading:nn.loading},{getHistory:O3,getToasts:L3});function F3(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}F3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function gd(t){return t.label!==void 0}var $3=3,V3="32px",U3="16px",r1=4e3,B3=356,z3=14,W3=20,H3=200;function Wn(...t){return t.filter(Boolean).join(" ")}function G3(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var q3=t=>{var e,n,r,s,i,o,l,c,u,d,h;let{invert:f,toast:p,unstyled:w,interacting:x,setHeights:g,visibleToasts:y,heights:v,index:_,toasts:C,expanded:b,removeToast:N,defaultRichColors:S,closeButton:E,style:k,cancelButtonStyle:T,actionButtonStyle:R,className:I="",descriptionClassName:L="",duration:P,position:V,gap:$,loadingIcon:H,expandByDefault:A,classNames:D,icons:j,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:Q}=t,[ie,le]=G.useState(null),[Re,Oe]=G.useState(null),[Z,Ne]=G.useState(!1),[je,_e]=G.useState(!1),[K,me]=G.useState(!1),[Ue,xt]=G.useState(!1),[qr,xr]=G.useState(!1),[Kr,Mi]=G.useState(0),[Ss,Wu]=G.useState(0),Di=G.useRef(p.duration||P||r1),Rl=G.useRef(null),Yr=G.useRef(null),rp=_===0,$o=_+1<=y,Bt=p.type,Qr=p.dismissible!==!1,sp=p.className||"",ip=p.descriptionClassName||"",Oi=G.useMemo(()=>v.findIndex(ue=>ue.toastId===p.id)||0,[v,p.id]),Vo=G.useMemo(()=>{var ue;return(ue=p.closeButton)!=null?ue:E},[p.closeButton,E]),Hu=G.useMemo(()=>p.duration||P||r1,[p.duration,P]),Gu=G.useRef(0),Li=G.useRef(0),op=G.useRef(0),Fi=G.useRef(null),[Nb,ap]=V.split("-"),Il=G.useMemo(()=>v.reduce((ue,Ce,Le)=>Le>=Oi?ue:ue+Ce.height,0),[v,Oi]),$i=I3(),qu=p.invert||f,Uo=Bt==="loading";Li.current=G.useMemo(()=>Oi*$+Il,[Oi,Il]),G.useEffect(()=>{Di.current=Hu},[Hu]),G.useEffect(()=>{Ne(!0)},[]),G.useEffect(()=>{let ue=Yr.current;if(ue){let Ce=ue.getBoundingClientRect().height;return Wu(Ce),g(Le=>[{toastId:p.id,height:Ce,position:p.position},...Le]),()=>g(Le=>Le.filter(gn=>gn.toastId!==p.id))}},[g,p.id]),G.useLayoutEffect(()=>{if(!Z)return;let ue=Yr.current,Ce=ue.style.height;ue.style.height="auto";let Le=ue.getBoundingClientRect().height;ue.style.height=Ce,Wu(Le),g(gn=>gn.find(vn=>vn.toastId===p.id)?gn.map(vn=>vn.toastId===p.id?{...vn,height:Le}:vn):[{toastId:p.id,height:Le,position:p.position},...gn])},[Z,p.title,p.description,g,p.id]);let yr=G.useCallback(()=>{_e(!0),Mi(Li.current),g(ue=>ue.filter(Ce=>Ce.toastId!==p.id)),setTimeout(()=>{N(p)},H3)},[p,N,g,Li]);G.useEffect(()=>{if(p.promise&&Bt==="loading"||p.duration===1/0||p.type==="loading")return;let ue;return b||x||Q&&$i?(()=>{if(op.current<Gu.current){let Ce=new Date().getTime()-Gu.current;Di.current=Di.current-Ce}op.current=new Date().getTime()})():Di.current!==1/0&&(Gu.current=new Date().getTime(),ue=setTimeout(()=>{var Ce;(Ce=p.onAutoClose)==null||Ce.call(p,p),yr()},Di.current)),()=>clearTimeout(ue)},[b,x,p,Bt,Q,$i,yr]),G.useEffect(()=>{p.delete&&yr()},[yr,p.delete]);function lp(){var ue,Ce,Le;return j!=null&&j.loading?G.createElement("div",{className:Wn(D==null?void 0:D.loader,(ue=p==null?void 0:p.classNames)==null?void 0:ue.loader,"sonner-loader"),"data-visible":Bt==="loading"},j.loading):H?G.createElement("div",{className:Wn(D==null?void 0:D.loader,(Ce=p==null?void 0:p.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":Bt==="loading"},H):G.createElement(S3,{className:Wn(D==null?void 0:D.loader,(Le=p==null?void 0:p.classNames)==null?void 0:Le.loader),visible:Bt==="loading"})}return G.createElement("li",{tabIndex:0,ref:Yr,className:Wn(I,sp,D==null?void 0:D.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[Bt],(n=p==null?void 0:p.classNames)==null?void 0:n[Bt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":Z,"data-promise":!!p.promise,"data-swiped":qr,"data-removed":je,"data-visible":$o,"data-y-position":Nb,"data-x-position":ap,"data-index":_,"data-front":rp,"data-swiping":K,"data-dismissible":Qr,"data-type":Bt,"data-invert":qu,"data-swipe-out":Ue,"data-swipe-direction":Re,"data-expanded":!!(b||A&&Z),style:{"--index":_,"--toasts-before":_,"--z-index":C.length-_,"--offset":`${je?Kr:Li.current}px`,"--initial-height":A?"auto":`${Ss}px`,...k,...p.style},onDragEnd:()=>{me(!1),le(null),Fi.current=null},onPointerDown:ue=>{Uo||!Qr||(Rl.current=new Date,Mi(Li.current),ue.target.setPointerCapture(ue.pointerId),ue.target.tagName!=="BUTTON"&&(me(!0),Fi.current={x:ue.clientX,y:ue.clientY}))},onPointerUp:()=>{var ue,Ce,Le,gn;if(Ue||!Qr)return;Fi.current=null;let vn=Number(((ue=Yr.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),wr=Number(((Ce=Yr.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xr=new Date().getTime()-((Le=Rl.current)==null?void 0:Le.getTime()),tn=ie==="x"?vn:wr,xn=Math.abs(tn)/Xr;if(Math.abs(tn)>=W3||xn>.11){Mi(Li.current),(gn=p.onDismiss)==null||gn.call(p,p),Oe(ie==="x"?vn>0?"right":"left":wr>0?"down":"up"),yr(),xt(!0),xr(!1);return}me(!1),le(null)},onPointerMove:ue=>{var Ce,Le,gn,vn;if(!Fi.current||!Qr||((Ce=window.getSelection())==null?void 0:Ce.toString().length)>0)return;let wr=ue.clientY-Fi.current.y,Xr=ue.clientX-Fi.current.x,tn=(Le=t.swipeDirections)!=null?Le:G3(V);!ie&&(Math.abs(Xr)>1||Math.abs(wr)>1)&&le(Math.abs(Xr)>Math.abs(wr)?"x":"y");let xn={x:0,y:0};ie==="y"?(tn.includes("top")||tn.includes("bottom"))&&(tn.includes("top")&&wr<0||tn.includes("bottom")&&wr>0)&&(xn.y=wr):ie==="x"&&(tn.includes("left")||tn.includes("right"))&&(tn.includes("left")&&Xr<0||tn.includes("right")&&Xr>0)&&(xn.x=Xr),(Math.abs(xn.x)>0||Math.abs(xn.y)>0)&&xr(!0),(gn=Yr.current)==null||gn.style.setProperty("--swipe-amount-x",`${xn.x}px`),(vn=Yr.current)==null||vn.style.setProperty("--swipe-amount-y",`${xn.y}px`)}},Vo&&!p.jsx?G.createElement("button",{"aria-label":q,"data-disabled":Uo,"data-close-button":!0,onClick:Uo||!Qr?()=>{}:()=>{var ue;yr(),(ue=p.onDismiss)==null||ue.call(p,p)},className:Wn(D==null?void 0:D.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=j==null?void 0:j.close)!=null?i:R3):null,p.jsx||m.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:G.createElement(G.Fragment,null,Bt||p.icon||p.promise?G.createElement("div",{"data-icon":"",className:Wn(D==null?void 0:D.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||lp():null,p.type!=="loading"?p.icon||(j==null?void 0:j[Bt])||N3(Bt):null):null,G.createElement("div",{"data-content":"",className:Wn(D==null?void 0:D.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},G.createElement("div",{"data-title":"",className:Wn(D==null?void 0:D.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?G.createElement("div",{"data-description":"",className:Wn(L,ip,D==null?void 0:D.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),m.isValidElement(p.cancel)?p.cancel:p.cancel&&gd(p.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:ue=>{var Ce,Le;gd(p.cancel)&&Qr&&((Le=(Ce=p.cancel).onClick)==null||Le.call(Ce,ue),yr())},className:Wn(D==null?void 0:D.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,m.isValidElement(p.action)?p.action:p.action&&gd(p.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:ue=>{var Ce,Le;gd(p.action)&&((Le=(Ce=p.action).onClick)==null||Le.call(Ce,ue),!ue.defaultPrevented&&yr())},className:Wn(D==null?void 0:D.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function s1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function K3(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?U3:V3;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var Y3=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:w=$3,toastOptions:x,dir:g=s1(),gap:y=z3,loadingIcon:v,icons:_,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:b}=t,[N,S]=G.useState([]),E=G.useMemo(()=>Array.from(new Set([r].concat(N.filter(Q=>Q.position).map(Q=>Q.position)))),[N,r]),[k,T]=G.useState([]),[R,I]=G.useState(!1),[L,P]=G.useState(!1),[V,$]=G.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=G.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=G.useRef(null),j=G.useRef(!1),q=G.useCallback(Q=>{S(ie=>{var le;return(le=ie.find(Re=>Re.id===Q.id))!=null&&le.delete||nn.dismiss(Q.id),ie.filter(({id:Re})=>Re!==Q.id)})},[]);return G.useEffect(()=>nn.subscribe(Q=>{if(Q.dismiss){S(ie=>ie.map(le=>le.id===Q.id?{...le,delete:!0}:le));return}setTimeout(()=>{iy.flushSync(()=>{S(ie=>{let le=ie.findIndex(Re=>Re.id===Q.id);return le!==-1?[...ie.slice(0,le),{...ie[le],...Q},...ie.slice(le+1)]:[Q,...ie]})})})}),[]),G.useEffect(()=>{if(d!=="system"){$(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:ie})=>{$(ie?"dark":"light")})}catch{Q.addListener(({matches:le})=>{try{$(le?"dark":"light")}catch(Re){console.error(Re)}})}},[d]),G.useEffect(()=>{N.length<=1&&I(!1)},[N]),G.useEffect(()=>{let Q=ie=>{var le,Re;s.every(Oe=>ie[Oe]||ie.code===Oe)&&(I(!0),(le=H.current)==null||le.focus()),ie.code==="Escape"&&(document.activeElement===H.current||(Re=H.current)!=null&&Re.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[s]),G.useEffect(()=>{if(H.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,j.current=!1)}},[H.current]),G.createElement("section",{ref:e,"aria-label":`${C} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((Q,ie)=>{var le;let[Re,Oe]=Q.split("-");return N.length?G.createElement("ol",{key:Q,dir:g==="auto"?s1():g,tabIndex:-1,ref:H,className:l,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":Re,"data-lifted":R&&N.length>1&&!i,"data-x-position":Oe,style:{"--front-toast-height":`${((le=k[0])==null?void 0:le.height)||0}px`,"--width":`${B3}px`,"--gap":`${y}px`,...p,...K3(c,u)},onBlur:Z=>{j.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(j.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||j.current||(j.current=!0,D.current=Z.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{L||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},N.filter(Z=>!Z.position&&ie===0||Z.position===Q).map((Z,Ne)=>{var je,_e;return G.createElement(q3,{key:Z.id,icons:_,index:Ne,toast:Z,defaultRichColors:h,duration:(je=x==null?void 0:x.duration)!=null?je:f,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:w,closeButton:(_e=x==null?void 0:x.closeButton)!=null?_e:o,interacting:L,position:Q,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:q,toasts:N.filter(K=>K.position==Z.position),heights:k.filter(K=>K.position==Z.position),setHeights:T,expandByDefault:i,gap:y,loadingIcon:v,expanded:R,pauseWhenPageIsHidden:b,swipeDirections:t.swipeDirections})})):null}))});const Q3=({...t})=>{const{theme:e="system"}=_3();return a.jsx(Y3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var X3=mx[" useId ".trim().toString()]||(()=>{}),J3=0;function Pr(t){const[e,n]=m.useState(X3());return vt(()=>{t||n(r=>r??String(J3++))},[t]),t||(e?`radix-${e}`:"")}const Z3=["top","right","bottom","left"],vi=Math.min,wn=Math.max,Bh=Math.round,vd=Math.floor,Ar=t=>({x:t,y:t}),e6={left:"right",right:"left",bottom:"top",top:"bottom"},t6={start:"end",end:"start"};function F0(t,e,n){return wn(t,vi(e,n))}function ps(t,e){return typeof t=="function"?t(e):t}function gs(t){return t.split("-")[0]}function ml(t){return t.split("-")[1]}function hy(t){return t==="x"?"y":"x"}function fy(t){return t==="y"?"height":"width"}const n6=new Set(["top","bottom"]);function Tr(t){return n6.has(gs(t))?"y":"x"}function my(t){return hy(Tr(t))}function r6(t,e,n){n===void 0&&(n=!1);const r=ml(t),s=my(t),i=fy(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=zh(o)),[o,zh(o)]}function s6(t){const e=zh(t);return[$0(t),e,$0(e)]}function $0(t){return t.replace(/start|end/g,e=>t6[e])}const i1=["left","right"],o1=["right","left"],i6=["top","bottom"],o6=["bottom","top"];function a6(t,e,n){switch(t){case"top":case"bottom":return n?e?o1:i1:e?i1:o1;case"left":case"right":return e?i6:o6;default:return[]}}function l6(t,e,n,r){const s=ml(t);let i=a6(gs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map($0)))),i}function zh(t){return t.replace(/left|right|bottom|top/g,e=>e6[e])}function c6(t){return{top:0,right:0,bottom:0,left:0,...t}}function LT(t){return typeof t!="number"?c6(t):{top:t,right:t,bottom:t,left:t}}function Wh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function a1(t,e,n){let{reference:r,floating:s}=t;const i=Tr(e),o=my(e),l=fy(o),c=gs(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(ml(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const u6=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=a1(u,r,c),f=r,p={},w=0;for(let x=0;x<l.length;x++){const{name:g,fn:y}=l[x],{x:v,y:_,data:C,reset:b}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=_??h,p={...p,[g]:{...p[g],...C}},b&&w<=50&&(w++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(u=b.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):b.rects),{x:d,y:h}=a1(u,f,c)),x=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Wc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ps(e,t),w=LT(p),g=l[f?h==="floating"?"reference":"floating":h],y=Wh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},b=Wh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:_,strategy:c}):v);return{top:(y.top-b.top+w.top)/C.y,bottom:(b.bottom-y.bottom+w.bottom)/C.y,left:(y.left-b.left+w.left)/C.x,right:(b.right-y.right+w.right)/C.x}}const d6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ps(t,e)||{};if(u==null)return{};const h=LT(d),f={x:n,y:r},p=my(s),w=fy(p),x=await o.getDimensions(u),g=p==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",C=i.reference[w]+i.reference[p]-f[p]-i.floating[w],b=f[p]-i.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=N?N[_]:0;(!S||!await(o.isElement==null?void 0:o.isElement(N)))&&(S=l.floating[_]||i.floating[w]);const E=C/2-b/2,k=S/2-x[w]/2-1,T=vi(h[y],k),R=vi(h[v],k),I=T,L=S-x[w]-R,P=S/2-x[w]/2+E,V=F0(I,P,L),$=!c.arrow&&ml(s)!=null&&P!==V&&i.reference[w]/2-(P<I?T:R)-x[w]/2<0,H=$?P<I?P-I:P-L:0;return{[p]:f[p]+H,data:{[p]:V,centerOffset:P-V-H,...$&&{alignmentOffset:H}},reset:$}}}),h6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...g}=ps(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=gs(s),v=Tr(l),_=gs(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),b=f||(_||!x?[zh(l)]:s6(l)),N=w!=="none";!f&&N&&b.push(...l6(l,x,w,C));const S=[l,...b],E=await Wc(e,g),k=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(E[y]),h){const P=r6(s,o,C);k.push(E[P[0]],E[P[1]])}if(T=[...T,{placement:s,overflows:k}],!k.every(P=>P<=0)){var R,I;const P=(((R=i.flip)==null?void 0:R.index)||0)+1,V=S[P];if(V&&(!(h==="alignment"?v!==Tr(V):!1)||T.every(A=>A.overflows[0]>0&&Tr(A.placement)===v)))return{data:{index:P,overflows:T},reset:{placement:V}};let $=(I=T.filter(H=>H.overflows[0]<=0).sort((H,A)=>H.overflows[1]-A.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(p){case"bestFit":{var L;const H=(L=T.filter(A=>{if(N){const D=Tr(A.placement);return D===v||D==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(D=>D>0).reduce((D,j)=>D+j,0)]).sort((A,D)=>A[1]-D[1])[0])==null?void 0:L[0];H&&($=H);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function l1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function c1(t){return Z3.some(e=>t[e]>=0)}const f6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ps(t,e);switch(r){case"referenceHidden":{const i=await Wc(e,{...s,elementContext:"reference"}),o=l1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:c1(o)}}}case"escaped":{const i=await Wc(e,{...s,altBoundary:!0}),o=l1(i,n.floating);return{data:{escapedOffsets:o,escaped:c1(o)}}}default:return{}}}}},FT=new Set(["left","top"]);async function m6(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=gs(n),l=ml(n),c=Tr(n)==="y",u=FT.has(o)?-1:1,d=i&&c?-1:1,h=ps(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const p6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await m6(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},g6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...c}=ps(t,e),u={x:n,y:r},d=await Wc(e,c),h=Tr(gs(s)),f=hy(h);let p=u[f],w=u[h];if(i){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+d[g],_=p-d[y];p=F0(v,p,_)}if(o){const g=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=w+d[g],_=w-d[y];w=F0(v,w,_)}const x=l.fn({...e,[f]:p,[h]:w});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[f]:i,[h]:o}}}}}},v6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ps(t,e),d={x:n,y:r},h=Tr(s),f=hy(h);let p=d[f],w=d[h];const x=ps(l,e),g=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const _=f==="y"?"height":"width",C=i.reference[f]-i.floating[_]+g.mainAxis,b=i.reference[f]+i.reference[_]-g.mainAxis;p<C?p=C:p>b&&(p=b)}if(u){var y,v;const _=f==="y"?"width":"height",C=FT.has(gs(s)),b=i.reference[h]-i.floating[_]+(C&&((y=o.offset)==null?void 0:y[h])||0)+(C?0:g.crossAxis),N=i.reference[h]+i.reference[_]+(C?0:((v=o.offset)==null?void 0:v[h])||0)-(C?g.crossAxis:0);w<b?w=b:w>N&&(w=N)}return{[f]:p,[h]:w}}}},x6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ps(t,e),d=await Wc(e,u),h=gs(s),f=ml(s),p=Tr(s)==="y",{width:w,height:x}=i.floating;let g,y;h==="top"||h==="bottom"?(g=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,g=f==="end"?"top":"bottom");const v=x-d.top-d.bottom,_=w-d.left-d.right,C=vi(x-d[g],v),b=vi(w-d[y],_),N=!e.middlewareData.shift;let S=C,E=b;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=v),N&&!f){const T=wn(d.left,0),R=wn(d.right,0),I=wn(d.top,0),L=wn(d.bottom,0);p?E=w-2*(T!==0||R!==0?T+R:wn(d.left,d.right)):S=x-2*(I!==0||L!==0?I+L:wn(d.top,d.bottom))}await c({...e,availableWidth:E,availableHeight:S});const k=await o.getDimensions(l.floating);return w!==k.width||x!==k.height?{reset:{rects:!0}}:{}}}};function om(){return typeof window<"u"}function pl(t){return $T(t)?(t.nodeName||"").toLowerCase():"#document"}function Nn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ur(t){var e;return(e=($T(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $T(t){return om()?t instanceof Node||t instanceof Nn(t).Node:!1}function dr(t){return om()?t instanceof Element||t instanceof Nn(t).Element:!1}function $r(t){return om()?t instanceof HTMLElement||t instanceof Nn(t).HTMLElement:!1}function u1(t){return!om()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Nn(t).ShadowRoot}const y6=new Set(["inline","contents"]);function Cu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!y6.has(s)}const w6=new Set(["table","td","th"]);function b6(t){return w6.has(pl(t))}const _6=[":popover-open",":modal"];function am(t){return _6.some(e=>{try{return t.matches(e)}catch{return!1}})}const N6=["transform","translate","scale","rotate","perspective"],C6=["transform","translate","scale","rotate","perspective","filter"],S6=["paint","layout","strict","content"];function py(t){const e=gy(),n=dr(t)?hr(t):t;return N6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||C6.some(r=>(n.willChange||"").includes(r))||S6.some(r=>(n.contain||"").includes(r))}function E6(t){let e=xi(t);for(;$r(e)&&!Ka(e);){if(py(e))return e;if(am(e))return null;e=xi(e)}return null}function gy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const k6=new Set(["html","body","#document"]);function Ka(t){return k6.has(pl(t))}function hr(t){return Nn(t).getComputedStyle(t)}function lm(t){return dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function xi(t){if(pl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||u1(t)&&t.host||Ur(t);return u1(e)?e.host:e}function VT(t){const e=xi(t);return Ka(e)?t.ownerDocument?t.ownerDocument.body:t.body:$r(e)&&Cu(e)?e:VT(e)}function Hc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=VT(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Nn(s);if(i){const l=V0(o);return e.concat(o,o.visualViewport||[],Cu(s)?s:[],l&&n?Hc(l):[])}return e.concat(s,Hc(s,[],n))}function V0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function UT(t){const e=hr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=$r(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Bh(n)!==i||Bh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function vy(t){return dr(t)?t:t.contextElement}function _a(t){const e=vy(t);if(!$r(e))return Ar(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=UT(e);let o=(i?Bh(n.width):n.width)/r,l=(i?Bh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const T6=Ar(0);function BT(t){const e=Nn(t);return!gy()||!e.visualViewport?T6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function j6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Nn(t)?!1:e}function Co(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=vy(t);let o=Ar(1);e&&(r?dr(r)&&(o=_a(r)):o=_a(t));const l=j6(i,n,r)?BT(i):Ar(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Nn(i),p=r&&dr(r)?Nn(r):r;let w=f,x=V0(w);for(;x&&r&&p!==w;){const g=_a(x),y=x.getBoundingClientRect(),v=hr(x),_=y.left+(x.clientLeft+parseFloat(v.paddingLeft))*g.x,C=y.top+(x.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,h*=g.y,c+=_,u+=C,w=Nn(x),x=V0(w)}}return Wh({width:d,height:h,x:c,y:u})}function xy(t,e){const n=lm(t).scrollLeft;return e?e.left+n:Co(Ur(t)).left+n}function zT(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:xy(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function R6(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ur(r),l=e?am(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ar(1);const d=Ar(0),h=$r(r);if((h||!h&&!i)&&((pl(r)!=="body"||Cu(o))&&(c=lm(r)),$r(r))){const p=Co(r);u=_a(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?zT(o,c,!0):Ar(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function I6(t){return Array.from(t.getClientRects())}function P6(t){const e=Ur(t),n=lm(t),r=t.ownerDocument.body,s=wn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+xy(t);const l=-n.scrollTop;return hr(r).direction==="rtl"&&(o+=wn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function A6(t,e){const n=Nn(t),r=Ur(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=gy();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const M6=new Set(["absolute","fixed"]);function D6(t,e){const n=Co(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=$r(t)?_a(t):Ar(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function d1(t,e,n){let r;if(e==="viewport")r=A6(t,n);else if(e==="document")r=P6(Ur(t));else if(dr(e))r=D6(e,n);else{const s=BT(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wh(r)}function WT(t,e){const n=xi(t);return n===e||!dr(n)||Ka(n)?!1:hr(n).position==="fixed"||WT(n,e)}function O6(t,e){const n=e.get(t);if(n)return n;let r=Hc(t,[],!1).filter(l=>dr(l)&&pl(l)!=="body"),s=null;const i=hr(t).position==="fixed";let o=i?xi(t):t;for(;dr(o)&&!Ka(o);){const l=hr(o),c=py(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&M6.has(s.position)||Cu(o)&&!c&&WT(t,o))?r=r.filter(d=>d!==o):s=l,o=xi(o)}return e.set(t,r),r}function L6(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?am(e)?[]:O6(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=d1(e,d,s);return u.top=wn(h.top,u.top),u.right=vi(h.right,u.right),u.bottom=vi(h.bottom,u.bottom),u.left=wn(h.left,u.left),u},d1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function F6(t){const{width:e,height:n}=UT(t);return{width:e,height:n}}function $6(t,e,n){const r=$r(e),s=Ur(e),i=n==="fixed",o=Co(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Ar(0);function u(){c.x=xy(s)}if(r||!r&&!i)if((pl(e)!=="body"||Cu(s))&&(l=lm(e)),r){const p=Co(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?zT(s,l):Ar(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Hp(t){return hr(t).position==="static"}function h1(t,e){if(!$r(t)||hr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ur(t)===n&&(n=n.ownerDocument.body),n}function HT(t,e){const n=Nn(t);if(am(t))return n;if(!$r(t)){let s=xi(t);for(;s&&!Ka(s);){if(dr(s)&&!Hp(s))return s;s=xi(s)}return n}let r=h1(t,e);for(;r&&b6(r)&&Hp(r);)r=h1(r,e);return r&&Ka(r)&&Hp(r)&&!py(r)?n:r||E6(t)||n}const V6=async function(t){const e=this.getOffsetParent||HT,n=this.getDimensions,r=await n(t.floating);return{reference:$6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function U6(t){return hr(t).direction==="rtl"}const B6={convertOffsetParentRelativeRectToViewportRelativeRect:R6,getDocumentElement:Ur,getClippingRect:L6,getOffsetParent:HT,getElementRects:V6,getClientRects:I6,getDimensions:F6,getScale:_a,isElement:dr,isRTL:U6};function GT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function z6(t,e){let n=null,r;const s=Ur(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||e(),!f||!p)return;const w=vd(h),x=vd(s.clientWidth-(d+f)),g=vd(s.clientHeight-(h+p)),y=vd(d),_={rootMargin:-w+"px "+-x+"px "+-g+"px "+-y+"px",threshold:wn(0,vi(1,c))||1};let C=!0;function b(N){const S=N[0].intersectionRatio;if(S!==c){if(!C)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!GT(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(b,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,_)}n.observe(t)}return o(!0),i}function W6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=vy(t),d=s||i?[...u?Hc(u):[],...Hc(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const h=u&&l?z6(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let w,x=c?Co(t):null;c&&g();function g(){const y=Co(t);x&&!GT(x,y)&&n(),x=y,w=requestAnimationFrame(g)}return n(),()=>{var y;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(w)}}const H6=p6,G6=g6,q6=h6,K6=x6,Y6=f6,f1=d6,Q6=v6,X6=(t,e,n)=>{const r=new Map,s={platform:B6,...n},i={...s.platform,_c:r};return u6(t,e,{...s,platform:i})};var J6=typeof document<"u",Z6=function(){},Qd=J6?m.useLayoutEffect:Z6;function Hh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Hh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Hh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function m1(t,e){const n=qT(t);return Math.round(e*n)/n}function Gp(t){const e=m.useRef(t);return Qd(()=>{e.current=t}),e}function eF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(r);Hh(f,r)||p(r);const[w,x]=m.useState(null),[g,y]=m.useState(null),v=m.useCallback(A=>{A!==N.current&&(N.current=A,x(A))},[]),_=m.useCallback(A=>{A!==S.current&&(S.current=A,y(A))},[]),C=i||w,b=o||g,N=m.useRef(null),S=m.useRef(null),E=m.useRef(d),k=c!=null,T=Gp(c),R=Gp(s),I=Gp(u),L=m.useCallback(()=>{if(!N.current||!S.current)return;const A={placement:e,strategy:n,middleware:f};R.current&&(A.platform=R.current),X6(N.current,S.current,A).then(D=>{const j={...D,isPositioned:I.current!==!1};P.current&&!Hh(E.current,j)&&(E.current=j,Oo.flushSync(()=>{h(j)}))})},[f,e,n,R,I]);Qd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[u]);const P=m.useRef(!1);Qd(()=>(P.current=!0,()=>{P.current=!1}),[]),Qd(()=>{if(C&&(N.current=C),b&&(S.current=b),C&&b){if(T.current)return T.current(C,b,L);L()}},[C,b,L,T,k]);const V=m.useMemo(()=>({reference:N,floating:S,setReference:v,setFloating:_}),[v,_]),$=m.useMemo(()=>({reference:C,floating:b}),[C,b]),H=m.useMemo(()=>{const A={position:n,left:0,top:0};if(!$.floating)return A;const D=m1($.floating,d.x),j=m1($.floating,d.y);return l?{...A,transform:"translate("+D+"px, "+j+"px)",...qT($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:j}},[n,l,$.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:L,refs:V,elements:$,floatingStyles:H}),[d,L,V,$,H])}const tF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?f1({element:r.current,padding:s}).fn(n):{}:r?f1({element:r,padding:s}).fn(n):{}}}},nF=(t,e)=>({...H6(t),options:[t,e]}),rF=(t,e)=>({...G6(t),options:[t,e]}),sF=(t,e)=>({...Q6(t),options:[t,e]}),iF=(t,e)=>({...q6(t),options:[t,e]}),oF=(t,e)=>({...K6(t),options:[t,e]}),aF=(t,e)=>({...Y6(t),options:[t,e]}),lF=(t,e)=>({...tF(t),options:[t,e]});var cF="Arrow",KT=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(se.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});KT.displayName=cF;var uF=KT;function yy(t){const[e,n]=m.useState(void 0);return vt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var wy="Popper",[YT,cm]=fn(wy),[dF,QT]=YT(wy),XT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(dF,{scope:e,anchor:r,onAnchorChange:s,children:n})};XT.displayName=wy;var JT="PopperAnchor",ZT=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=QT(JT,n),o=m.useRef(null),l=ve(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(se.div,{...s,ref:l})});ZT.displayName=JT;var by="PopperContent",[hF,fF]=YT(by),ej=m.forwardRef((t,e)=>{var Z,Ne,je,_e,K,me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...x}=t,g=QT(by,n),[y,v]=m.useState(null),_=ve(e,Ue=>v(Ue)),[C,b]=m.useState(null),N=yy(C),S=(N==null?void 0:N.width)??0,E=(N==null?void 0:N.height)??0,k=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],I=R.length>0,L={padding:T,boundary:R.filter(pF),altBoundary:I},{refs:P,floatingStyles:V,placement:$,isPositioned:H,middlewareData:A}=eF({strategy:"fixed",placement:k,whileElementsMounted:(...Ue)=>W6(...Ue,{animationFrame:p==="always"}),elements:{reference:g.anchor},middleware:[nF({mainAxis:s+E,alignmentAxis:o}),c&&rF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?sF():void 0,...L}),c&&iF({...L}),oF({...L,apply:({elements:Ue,rects:xt,availableWidth:qr,availableHeight:xr})=>{const{width:Kr,height:Mi}=xt.reference,Ss=Ue.floating.style;Ss.setProperty("--radix-popper-available-width",`${qr}px`),Ss.setProperty("--radix-popper-available-height",`${xr}px`),Ss.setProperty("--radix-popper-anchor-width",`${Kr}px`),Ss.setProperty("--radix-popper-anchor-height",`${Mi}px`)}}),C&&lF({element:C,padding:l}),gF({arrowWidth:S,arrowHeight:E}),f&&aF({strategy:"referenceHidden",...L})]}),[D,j]=rj($),q=ft(w);vt(()=>{H&&(q==null||q())},[H,q]);const Q=(Z=A.arrow)==null?void 0:Z.x,ie=(Ne=A.arrow)==null?void 0:Ne.y,le=((je=A.arrow)==null?void 0:je.centerOffset)!==0,[Re,Oe]=m.useState();return vt(()=>{y&&Oe(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:H?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(_e=A.transformOrigin)==null?void 0:_e.x,(K=A.transformOrigin)==null?void 0:K.y].join(" "),...((me=A.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(hF,{scope:n,placedSide:D,onArrowChange:b,arrowX:Q,arrowY:ie,shouldHideArrow:le,children:a.jsx(se.div,{"data-side":D,"data-align":j,...x,ref:_,style:{...x.style,animation:H?void 0:"none"}})})})});ej.displayName=by;var tj="PopperArrow",mF={top:"bottom",right:"left",bottom:"top",left:"right"},nj=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=fF(tj,r),o=mF[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(uF,{...s,ref:n,style:{...s.style,display:"block"}})})});nj.displayName=tj;function pF(t){return t!==null}var gF=t=>({name:"transformOrigin",options:t,fn(e){var g,y,v;const{placement:n,rects:r,middlewareData:s}=e,o=((g=s.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=rj(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let w="",x="";return u==="bottom"?(w=o?h:`${f}px`,x=`${-c}px`):u==="top"?(w=o?h:`${f}px`,x=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,x=o?h:`${p}px`):u==="left"&&(w=`${r.floating.width+c}px`,x=o?h:`${p}px`),{data:{x:w,y:x}}}});function rj(t){const[e,n="center"]=t.split("-");return[e,n]}var vF=XT,sj=ZT,ij=ej,oj=nj,[um,YZ]=fn("Tooltip",[cm]),_y=cm(),aj="TooltipProvider",xF=700,p1="tooltip.open",[yF,lj]=um(aj),cj=t=>{const{__scopeTooltip:e,delayDuration:n=xF,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(yF,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};cj.displayName=aj;var uj="Tooltip",[QZ,dm]=um(uj),U0="TooltipTrigger",wF=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=dm(U0,n),i=lj(U0,n),o=_y(n),l=m.useRef(null),c=ve(e,l,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(sj,{asChild:!0,...o,children:a.jsx(se.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ne(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ne(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ne(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ne(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ne(t.onBlur,s.onClose),onClick:ne(t.onClick,s.onClose)})})});wF.displayName=U0;var bF="TooltipPortal",[XZ,_F]=um(bF,{forceMount:void 0}),Ya="TooltipContent",dj=m.forwardRef((t,e)=>{const n=_F(Ya,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=dm(Ya,t.__scopeTooltip);return a.jsx(kn,{present:r||o.open,children:o.disableHoverableContent?a.jsx(hj,{side:s,...i,ref:e}):a.jsx(NF,{side:s,...i,ref:e})})}),NF=m.forwardRef((t,e)=>{const n=dm(Ya,t.__scopeTooltip),r=lj(Ya,t.__scopeTooltip),s=m.useRef(null),i=ve(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=m.useCallback(()=>{l(null),h(!1)},[h]),p=m.useCallback((w,x)=>{const g=w.currentTarget,y={x:w.clientX,y:w.clientY},v=TF(y,g.getBoundingClientRect()),_=jF(y,v),C=RF(x.getBoundingClientRect()),b=PF([..._,...C]);l(b),h(!0)},[h]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&d){const w=g=>p(g,d),x=g=>p(g,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",x)}}},[c,d,p,f]),m.useEffect(()=>{if(o){const w=x=>{const g=x.target,y={x:x.clientX,y:x.clientY},v=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),_=!IF(y,o);v?f():_&&(f(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,o,u,f]),a.jsx(hj,{...t,ref:i})}),[CF,SF]=um(uj,{isInside:!1}),EF=OO("TooltipContent"),hj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=dm(Ya,n),u=_y(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(p1,d),()=>document.removeEventListener(p1,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(yu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(ij,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(EF,{children:r}),a.jsx(CF,{scope:n,isInside:!0,children:a.jsx(sL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});dj.displayName=Ya;var fj="TooltipArrow",kF=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=_y(n);return SF(fj,n).isInside?null:a.jsx(oj,{...s,...r,ref:e})});kF.displayName=fj;function TF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function RF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function IF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function PF(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),AF(e)}function AF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var MF=cj,mj=dj;const DF=MF,OF=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(mj,{ref:r,sideOffset:e,className:F("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));OF.displayName=mj.displayName;var hm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fm=typeof window>"u"||"Deno"in globalThis;function Yn(){}function LF(t,e){return typeof t=="function"?t(e):t}function FF(t){return typeof t=="number"&&t>=0&&t!==1/0}function $F(t,e){return Math.max(t+(e||0)-Date.now(),0)}function B0(t,e){return typeof t=="function"?t(e):t}function VF(t,e){return typeof t=="function"?t(e):t}function g1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Ny(o,e.options))return!1}else if(!qc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function v1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Gc(e.options.mutationKey)!==Gc(i))return!1}else if(!qc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ny(t,e){return((e==null?void 0:e.queryKeyHashFn)||Gc)(t)}function Gc(t){return JSON.stringify(t,(e,n)=>z0(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>qc(t[n],e[n])):!1}function pj(t,e){if(t===e)return t;const n=x1(t)&&x1(e);if(n||z0(t)&&z0(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=pj(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function x1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function z0(t){if(!y1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!y1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function y1(t){return Object.prototype.toString.call(t)==="[object Object]"}function UF(t){return new Promise(e=>{setTimeout(e,t)})}function BF(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?pj(t,e):e}function zF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function WF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Cy=Symbol();function gj(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var to,Ws,Ia,TS,HF=(TS=class extends hm{constructor(){super();ke(this,to);ke(this,Ws);ke(this,Ia);he(this,Ia,e=>{if(!fm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,Ws)||this.setEventListener(O(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Ws))==null||e.call(this),he(this,Ws,void 0))}setEventListener(e){var n;he(this,Ia,e),(n=O(this,Ws))==null||n.call(this),he(this,Ws,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,to)!==e&&(he(this,to,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,to)=="boolean"?O(this,to):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},to=new WeakMap,Ws=new WeakMap,Ia=new WeakMap,TS),vj=new HF,Pa,Hs,Aa,jS,GF=(jS=class extends hm{constructor(){super();ke(this,Pa,!0);ke(this,Hs);ke(this,Aa);he(this,Aa,e=>{if(!fm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,Hs)||this.setEventListener(O(this,Aa))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Hs))==null||e.call(this),he(this,Hs,void 0))}setEventListener(e){var n;he(this,Aa,e),(n=O(this,Hs))==null||n.call(this),he(this,Hs,e(this.setOnline.bind(this)))}setOnline(e){O(this,Pa)!==e&&(he(this,Pa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,Pa)}},Pa=new WeakMap,Hs=new WeakMap,Aa=new WeakMap,jS),Gh=new GF;function qF(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function KF(t){return Math.min(1e3*2**t,3e4)}function xj(t){return(t??"online")==="online"?Gh.isOnline():!0}var yj=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function qp(t){return t instanceof yj}function wj(t){let e=!1,n=0,r=!1,s;const i=qF(),o=x=>{var g;r||(f(new yj(x)),(g=t.abort)==null||g.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>vj.isFocused()&&(t.networkMode==="always"||Gh.isOnline())&&t.canRun(),d=()=>xj(t.networkMode)&&t.canRun(),h=x=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,x),s==null||s(),i.resolve(x))},f=x=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,x),s==null||s(),i.reject(x))},p=()=>new Promise(x=>{var g;s=y=>{(r||u())&&x(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),w=()=>{if(r)return;let x;const g=n===0?t.initialPromise:void 0;try{x=g??t.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(h).catch(y=>{var N;if(r)return;const v=t.retry??(fm?0:3),_=t.retryDelay??KF,C=typeof _=="function"?_(n,y):_,b=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!b){f(y);return}n++,(N=t.onFail)==null||N.call(t,n,y),UF(C).then(()=>u()?void 0:p()).then(()=>{e?f(y):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?w():p().then(w),i)}}var YF=t=>setTimeout(t,0);function QF(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=YF;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var qt=QF(),no,RS,bj=(RS=class{constructor(){ke(this,no)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),FF(this.gcTime)&&he(this,no,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fm?1/0:5*60*1e3))}clearGcTimeout(){O(this,no)&&(clearTimeout(O(this,no)),he(this,no,void 0))}},no=new WeakMap,RS),Ma,ro,Rn,so,Lt,hu,io,Qn,Zr,IS,XF=(IS=class extends bj{constructor(e){super();ke(this,Qn);ke(this,Ma);ke(this,ro);ke(this,Rn);ke(this,so);ke(this,Lt);ke(this,hu);ke(this,io);he(this,io,!1),he(this,hu,e.defaultOptions),this.setOptions(e.options),this.observers=[],he(this,so,e.client),he(this,Rn,O(this,so).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,he(this,Ma,ZF(this.options)),this.state=e.state??O(this,Ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=O(this,Lt))==null?void 0:e.promise}setOptions(e){this.options={...O(this,hu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Rn).remove(this)}setData(e,n){const r=BF(this.state.data,e,this.options);return At(this,Qn,Zr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){At(this,Qn,Zr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=O(this,Lt))==null?void 0:r.promise;return(s=O(this,Lt))==null||s.cancel(e),n?n.then(Yn).catch(Yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,Ma))}isActive(){return this.observers.some(e=>VF(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>B0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$F(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,Lt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,Lt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),O(this,Rn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(O(this,Lt)&&(O(this,io)?O(this,Lt).cancel({revert:!0}):O(this,Lt).cancelRetry()),this.scheduleGc()),O(this,Rn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||At(this,Qn,Zr).call(this,{type:"invalidate"})}fetch(e,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(O(this,Lt))return O(this,Lt).continueRetry(),O(this,Lt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(he(this,io,!0),r.signal)})},i=()=>{const f=gj(this.options,n),w=(()=>{const x={client:O(this,so),queryKey:this.queryKey,meta:this.meta};return s(x),x})();return he(this,io,!1),this.options.persister?this.options.persister(f,w,this):f(w)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:O(this,so),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),he(this,ro,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&At(this,Qn,Zr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,w,x,g;qp(f)&&f.silent||At(this,Qn,Zr).call(this,{type:"error",error:f}),qp(f)||((w=(p=O(this,Rn).config).onError)==null||w.call(p,f,this),(g=(x=O(this,Rn).config).onSettled)==null||g.call(x,this.state.data,f,this)),this.scheduleGc()};return he(this,Lt,wj({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,w,x,g;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){c(y);return}(w=(p=O(this,Rn).config).onSuccess)==null||w.call(p,f,this),(g=(x=O(this,Rn).config).onSettled)==null||g.call(x,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{At(this,Qn,Zr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{At(this,Qn,Zr).call(this,{type:"pause"})},onContinue:()=>{At(this,Qn,Zr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Lt).start()}},Ma=new WeakMap,ro=new WeakMap,Rn=new WeakMap,so=new WeakMap,Lt=new WeakMap,hu=new WeakMap,io=new WeakMap,Qn=new WeakSet,Zr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...JF(r.data,this.options),fetchMeta:e.meta??null};case"success":return he(this,ro,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return qp(s)&&s.revert&&O(this,ro)?{...O(this,ro),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),qt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),O(this,Rn).notify({query:this,type:"updated",action:e})})},IS);function JF(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xj(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ZF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Nr,PS,e$=(PS=class extends hm{constructor(e={}){super();ke(this,Nr);this.config=e,he(this,Nr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Ny(s,n);let o=this.get(i);return o||(o=new XF({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){O(this,Nr).has(e.queryHash)||(O(this,Nr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,Nr).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,Nr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,Nr).get(e)}getAll(){return[...O(this,Nr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>g1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>g1(e,r)):n}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Nr=new WeakMap,PS),Cr,Ht,oo,Sr,Rs,AS,t$=(AS=class extends bj{constructor(e){super();ke(this,Sr);ke(this,Cr);ke(this,Ht);ke(this,oo);this.mutationId=e.mutationId,he(this,Ht,e.mutationCache),he(this,Cr,[]),this.state=e.state||n$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){O(this,Cr).includes(e)||(O(this,Cr).push(e),this.clearGcTimeout(),O(this,Ht).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){he(this,Cr,O(this,Cr).filter(n=>n!==e)),this.scheduleGc(),O(this,Ht).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){O(this,Cr).length||(this.state.status==="pending"?this.scheduleGc():O(this,Ht).remove(this))}continue(){var e;return((e=O(this,oo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,u,d,h,f,p,w,x,g,y,v,_,C,b,N,S,E;const n=()=>{At(this,Sr,Rs).call(this,{type:"continue"})};he(this,oo,wj({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{At(this,Sr,Rs).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{At(this,Sr,Rs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Ht).canRun(this)}));const r=this.state.status==="pending",s=!O(this,oo).canStart();try{if(r)n();else{At(this,Sr,Rs).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=O(this,Ht).config).onMutate)==null?void 0:o.call(i,e,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));T!==this.state.context&&At(this,Sr,Rs).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const k=await O(this,oo).start();return await((d=(u=O(this,Ht).config).onSuccess)==null?void 0:d.call(u,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((w=(p=O(this,Ht).config).onSettled)==null?void 0:w.call(p,k,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,k,null,e,this.state.context)),At(this,Sr,Rs).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(y=O(this,Ht).config).onError)==null?void 0:v.call(y,k,e,this.state.context,this)),await((C=(_=this.options).onError)==null?void 0:C.call(_,k,e,this.state.context)),await((N=(b=O(this,Ht).config).onSettled)==null?void 0:N.call(b,void 0,k,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,k,e,this.state.context)),k}finally{At(this,Sr,Rs).call(this,{type:"error",error:k})}}finally{O(this,Ht).runNext(this)}}},Cr=new WeakMap,Ht=new WeakMap,oo=new WeakMap,Sr=new WeakSet,Rs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qt.batch(()=>{O(this,Cr).forEach(r=>{r.onMutationUpdate(e)}),O(this,Ht).notify({mutation:this,type:"updated",action:e})})},AS);function n$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ns,Xn,fu,MS,r$=(MS=class extends hm{constructor(e={}){super();ke(this,ns);ke(this,Xn);ke(this,fu);this.config=e,he(this,ns,new Set),he(this,Xn,new Map),he(this,fu,0)}build(e,n,r){const s=new t$({mutationCache:this,mutationId:++Qu(this,fu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){O(this,ns).add(e);const n=xd(e);if(typeof n=="string"){const r=O(this,Xn).get(n);r?r.push(e):O(this,Xn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(O(this,ns).delete(e)){const n=xd(e);if(typeof n=="string"){const r=O(this,Xn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&O(this,Xn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=xd(e);if(typeof n=="string"){const r=O(this,Xn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=xd(e);if(typeof n=="string"){const s=(r=O(this,Xn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qt.batch(()=>{O(this,ns).forEach(e=>{this.notify({type:"removed",mutation:e})}),O(this,ns).clear(),O(this,Xn).clear()})}getAll(){return Array.from(O(this,ns))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>v1(n,r))}findAll(e={}){return this.getAll().filter(n=>v1(e,n))}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return qt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Yn))))}},ns=new WeakMap,Xn=new WeakMap,fu=new WeakMap,MS);function xd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function w1(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const g=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},y=gj(e.options,e.fetchOptions),v=async(_,C,b)=>{if(x)return Promise.reject();if(C==null&&_.pages.length)return Promise.resolve(_);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:C,direction:b?"backward":"forward",meta:e.options.meta};return g(R),R})(),E=await y(S),{maxPages:k}=e.options,T=b?WF:zF;return{pages:T(_.pages,E,k),pageParams:T(_.pageParams,C,k)}};if(s&&i.length){const _=s==="backward",C=_?s$:b1,b={pages:i,pageParams:o},N=C(r,b);l=await v(b,N,_)}else{const _=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:b1(r,l);if(c>0&&C==null)break;l=await v(l,C),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var x,g;return(g=(x=e.options).persister)==null?void 0:g.call(x,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function b1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function s$(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ze,Gs,qs,Da,Oa,Ks,La,Fa,DS,i$=(DS=class{constructor(t={}){ke(this,Ze);ke(this,Gs);ke(this,qs);ke(this,Da);ke(this,Oa);ke(this,Ks);ke(this,La);ke(this,Fa);he(this,Ze,t.queryCache||new e$),he(this,Gs,t.mutationCache||new r$),he(this,qs,t.defaultOptions||{}),he(this,Da,new Map),he(this,Oa,new Map),he(this,Ks,0)}mount(){Qu(this,Ks)._++,O(this,Ks)===1&&(he(this,La,vj.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Ze).onFocus())})),he(this,Fa,Gh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Ze).onOnline())})))}unmount(){var t,e;Qu(this,Ks)._--,O(this,Ks)===0&&((t=O(this,La))==null||t.call(this),he(this,La,void 0),(e=O(this,Fa))==null||e.call(this),he(this,Fa,void 0))}isFetching(t){return O(this,Ze).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Gs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Ze).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=O(this,Ze).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(B0(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return O(this,Ze).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,Ze).get(r.queryHash),i=s==null?void 0:s.state.data,o=LF(e,i);if(o!==void 0)return O(this,Ze).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return qt.batch(()=>O(this,Ze).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Ze).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,Ze);qt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,Ze);return qt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=qt.batch(()=>O(this,Ze).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Yn).catch(Yn)}invalidateQueries(t,e={}){return qt.batch(()=>(O(this,Ze).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=qt.batch(()=>O(this,Ze).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Yn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Yn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,Ze).build(this,e);return n.isStaleByTime(B0(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Yn).catch(Yn)}fetchInfiniteQuery(t){return t.behavior=w1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Yn).catch(Yn)}ensureInfiniteQueryData(t){return t.behavior=w1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Gh.isOnline()?O(this,Gs).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,Ze)}getMutationCache(){return O(this,Gs)}getDefaultOptions(){return O(this,qs)}setDefaultOptions(t){he(this,qs,t)}setQueryDefaults(t,e){O(this,Da).set(Gc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Da).values()],n={};return e.forEach(r=>{qc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){O(this,Oa).set(Gc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Oa).values()],n={};return e.forEach(r=>{qc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,qs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ny(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,qs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,Ze).clear(),O(this,Gs).clear()}},Ze=new WeakMap,Gs=new WeakMap,qs=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Ks=new WeakMap,La=new WeakMap,Fa=new WeakMap,DS),o$=m.createContext(void 0),a$=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(o$.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(this,arguments)}var Xs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xs||(Xs={}));const _1="popstate";function l$(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:c=""}=Su(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),W0("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:_j(i))}function r(s,i){Sy(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return u$(e,n,r,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c$(){return Math.random().toString(36).substr(2,8)}function N1(t,e){return{usr:t.state,key:t.key,idx:e}}function W0(t,e,n,r){return n===void 0&&(n=null),qh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Su(e):e,{state:n,key:e&&e.key||r||c$()})}function _j(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Su(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function u$(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Xs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(qh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Xs.Pop;let g=d(),y=g==null?null:g-u;u=g,c&&c({action:l,location:x.location,delta:y})}function f(g,y){l=Xs.Push;let v=W0(x.location,g,y);n&&n(v,g),u=d()+1;let _=N1(v,u),C=x.createHref(v);try{o.pushState(_,"",C)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(C)}i&&c&&c({action:l,location:x.location,delta:1})}function p(g,y){l=Xs.Replace;let v=W0(x.location,g,y);n&&n(v,g),u=d();let _=N1(v,u),C=x.createHref(v);o.replaceState(_,"",C),i&&c&&c({action:l,location:x.location,delta:0})}function w(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof g=="string"?g:_j(g);return v=v.replace(/ $/,"%20"),hn(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let x={get action(){return l},get location(){return t(s,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(_1,h),c=g,()=>{s.removeEventListener(_1,h),c=null}},createHref(g){return e(s,g)},createURL:w,encodeLocation(g){let y=w(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(g){return o.go(g)}};return x}var C1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C1||(C1={}));function d$(t,e,n){return n===void 0&&(n="/"),h$(t,e,n,!1)}function h$(t,e,n,r){let s=typeof e=="string"?Su(e):e,i=Sj(s.pathname||"/",n);if(i==null)return null;let o=Nj(t);f$(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=C$(i);l=_$(o[c],u,r)}return l}function Nj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(hn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Na([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(hn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Nj(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:w$(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Cj(i.path))s(i,o,c)}),e}function Cj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Cj(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function f$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const m$=/^:[\w-]+$/,p$=3,g$=2,v$=1,x$=10,y$=-2,S1=t=>t==="*";function w$(t,e){let n=t.split("/"),r=n.length;return n.some(S1)&&(r+=y$),e&&(r+=g$),n.filter(s=>!S1(s)).reduce((s,i)=>s+(m$.test(i)?p$:i===""?v$:x$),r)}function b$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function _$(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=E1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=E1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Na([i,h.pathname]),pathnameBase:S$(Na([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Na([i,h.pathnameBase]))}return o}function E1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N$(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[h];return p&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function N$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Sy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function C$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Sj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Na=t=>t.join("/").replace(/\/\/+/g,"/"),S$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function E$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ej=["post","put","patch","delete"];new Set(Ej);const k$=["get",...Ej];new Set(k$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}const T$=m.createContext(null),j$=m.createContext(null),kj=m.createContext(null),mm=m.createContext(null),pm=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Tj=m.createContext(null);function Ey(){return m.useContext(mm)!=null}function jj(){return Ey()||hn(!1),m.useContext(mm).location}function R$(t,e){return I$(t,e)}function I$(t,e,n,r){Ey()||hn(!1);let{navigator:s}=m.useContext(kj),{matches:i}=m.useContext(pm),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=jj(),d;if(e){var h;let g=typeof e=="string"?Su(e):e;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||hn(!1),d=g}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let w=d$(t,{pathname:p}),x=O$(w&&w.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Na([c,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Na([c,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&x?m.createElement(mm.Provider,{value:{location:Kh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Xs.Pop}},x):x}function P$(){let t=V$(),e=E$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const A$=m.createElement(P$,null);class M$ extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(pm.Provider,{value:this.props.routeContext},m.createElement(Tj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D$(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(T$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(pm.Provider,{value:e},r)}function O$(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||hn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,x=null,g=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||A$,c&&(u<0&&f===0?(w=!0,g=null):u===f&&(w=!0,g=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let _;return p?_=x:w?_=g:h.route.Component?_=m.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,m.createElement(D$,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(M$,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var H0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(H0||{});function L$(t){let e=m.useContext(j$);return e||hn(!1),e}function F$(t){let e=m.useContext(pm);return e||hn(!1),e}function $$(t){let e=F$(),n=e.matches[e.matches.length-1];return n.route.id||hn(!1),n.route.id}function V$(){var t;let e=m.useContext(Tj),n=L$(H0.UseRouteError),r=$$(H0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function U$(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function G0(t){hn(!1)}function B$(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xs.Pop,navigator:i,static:o=!1,future:l}=t;Ey()&&hn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:Kh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Su(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=r,x=m.useMemo(()=>{let g=Sj(d,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:p,key:w},navigationType:s}},[c,d,h,f,p,w,s]);return x==null?null:m.createElement(kj.Provider,{value:u},m.createElement(mm.Provider,{children:n,value:x}))}function z$(t){let{children:e,location:n}=t;return R$(q0(e),n)}new Promise(()=>{});function q0(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,q0(r.props.children,i));return}r.type!==G0&&hn(!1),!r.props.index||!r.props.children||hn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=q0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const W$="6";try{window.__reactRouterVersion=W$}catch{}const H$="startTransition",k1=mx[H$];function G$(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=l$({window:s,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&k1?k1(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>U$(r),[r]),m.createElement(B$,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var T1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(T1||(T1={}));var j1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(j1||(j1={}));const q$=()=>{};var R1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw gl(e)},gl=function(t){return new Error("Firebase Database ("+Rj.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},K$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ij(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):K$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new Y$;const f=i<<2|l>>4;if(r.push(f),u!==64){const p=l<<4&240|u>>2;if(r.push(p),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pj=function(t){const e=Ij(t);return ky.encodeByteArray(e,!0)},Yh=function(t){return Pj(t).replace(/\./g,"")},Qh=function(t){try{return ky.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){return Aj(void 0,t)}function Aj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!X$(n)||(t[n]=Aj(t[n],e[n]));return t}function X$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$=()=>J$().__FIREBASE_DEFAULTS__,eV=()=>{if(typeof process>"u"||typeof R1>"u")return;const t=R1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qh(t[1]);return e&&JSON.parse(e)},Ty=()=>{try{return q$()||Z$()||eV()||tV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mj=t=>{var e,n;return(n=(e=Ty())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},nV=t=>{const e=Mj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dj=()=>{var t;return(t=Ty())==null?void 0:t.config},Oj=t=>{var e;return(e=Ty())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yh(JSON.stringify(n)),Yh(JSON.stringify(o)),""].join(".")}const pc={};function sV(){const t={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?t.emulator.push(e):t.prod.push(e);return t}function iV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let I1=!1;function Fj(t,e){if(typeof window>"u"||typeof document>"u"||!vl(window.location.host)||pc[t]===e||pc[t]||I1)return;pc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=sV().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{I1=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=iV(r),p=n("text"),w=document.getElementById(p)||document.createElement("span"),x=n("learnmore"),g=document.getElementById(x)||document.createElement("a"),y=n("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;l(_),d(g,x);const C=u();c(v,y),_.append(v,w,g,C),document.body.appendChild(_)}i?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function oV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $j(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lV(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vj(){return Rj.NODE_ADMIN===!0}function cV(){try{return typeof indexedDB=="object"}catch{return!1}}function uV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dV,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ku.prototype.create)}}class ku{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?hV(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,l,r)}}function hV(t,e){return t.replace(fV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Kc(Qh(i[0])||""),n=Kc(Qh(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},mV=function(t){const e=Uj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},pV=function(t){const e=Uj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function K0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xh(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function So(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(P1(i)&&P1(o)){if(!So(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function P1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):h<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function vV(t,e){const n=new xV(t,e);return n.subscribe.bind(n)}class xV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kp(){}function gm(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,X(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){return t&&t._delegate?t._delegate:t}class Eo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Eu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NV(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_V(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _V(t){return t===Hi?void 0:t}function NV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const SV={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},EV=Ae.INFO,kV={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},TV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=EV,this._logHandler=TV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const jV=(t,e)=>e.some(n=>t instanceof n);let A1,M1;function RV(){return A1||(A1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IV(){return M1||(M1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bj=new WeakMap,Y0=new WeakMap,zj=new WeakMap,Yp=new WeakMap,Iy=new WeakMap;function PV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(li(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bj.set(n,t)}).catch(()=>{}),Iy.set(e,t),e}function AV(t){if(Y0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Y0.set(t,e)}let Q0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Y0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MV(t){Q0=t(Q0)}function DV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qp(this),e,...n);return zj.set(r,e.sort?e.sort():[e]),li(r)}:IV().includes(t)?function(...e){return t.apply(Qp(this),e),li(Bj.get(this))}:function(...e){return li(t.apply(Qp(this),e))}}function OV(t){return typeof t=="function"?DV(t):(t instanceof IDBTransaction&&AV(t),jV(t,RV())?new Proxy(t,Q0):t)}function li(t){if(t instanceof IDBRequest)return PV(t);if(Yp.has(t))return Yp.get(t);const e=OV(t);return e!==t&&(Yp.set(t,e),Iy.set(e,t)),e}const Qp=t=>Iy.get(t);function LV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=li(o);return r&&o.addEventListener("upgradeneeded",c=>{r(li(o.result),c.oldVersion,c.newVersion,li(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const FV=["get","getKey","getAll","getAllKeys","count"],$V=["put","add","delete","clear"],Xp=new Map;function D1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$V.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FV.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Xp.set(e,i),i}MV(t=>({...t,get:(e,n,r)=>D1(e,n)||t.get(e,n,r),has:(e,n)=>!!D1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const X0="@firebase/app",O1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Ry("@firebase/app"),BV="@firebase/app-compat",zV="@firebase/analytics-compat",WV="@firebase/analytics",HV="@firebase/app-check-compat",GV="@firebase/app-check",qV="@firebase/auth",KV="@firebase/auth-compat",YV="@firebase/database",QV="@firebase/data-connect",XV="@firebase/database-compat",JV="@firebase/functions",ZV="@firebase/functions-compat",e8="@firebase/installations",t8="@firebase/installations-compat",n8="@firebase/messaging",r8="@firebase/messaging-compat",s8="@firebase/performance",i8="@firebase/performance-compat",o8="@firebase/remote-config",a8="@firebase/remote-config-compat",l8="@firebase/storage",c8="@firebase/storage-compat",u8="@firebase/firestore",d8="@firebase/ai",h8="@firebase/firestore-compat",f8="firebase",m8="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="[DEFAULT]",p8={[X0]:"fire-core",[BV]:"fire-core-compat",[WV]:"fire-analytics",[zV]:"fire-analytics-compat",[GV]:"fire-app-check",[HV]:"fire-app-check-compat",[qV]:"fire-auth",[KV]:"fire-auth-compat",[YV]:"fire-rtdb",[QV]:"fire-data-connect",[XV]:"fire-rtdb-compat",[JV]:"fire-fn",[ZV]:"fire-fn-compat",[e8]:"fire-iid",[t8]:"fire-iid-compat",[n8]:"fire-fcm",[r8]:"fire-fcm-compat",[s8]:"fire-perf",[i8]:"fire-perf-compat",[o8]:"fire-rc",[a8]:"fire-rc-compat",[l8]:"fire-gcs",[c8]:"fire-gcs-compat",[u8]:"fire-fst",[h8]:"fire-fst-compat",[d8]:"fire-vertex","fire-js":"fire-js",[f8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Map,g8=new Map,Z0=new Map;function L1(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(Z0.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Z0.set(e,t);for(const n of Jh.values())L1(n,t);for(const n of g8.values())L1(n,t);return!0}function Py(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new ku("app","Firebase",v8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=m8;function Wj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:J0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ci.create("bad-app-name",{appName:String(s)});if(n||(n=Dj()),!n)throw ci.create("no-options");const i=Jh.get(s);if(i){if(So(n,i.options)&&So(r,i.config))return i;throw ci.create("duplicate-app",{appName:s})}const o=new CV(s);for(const c of Z0.values())o.addComponent(c);const l=new x8(n,r,o);return Jh.set(s,l),l}function Hj(t=J0){const e=Jh.get(t);if(!e&&t===J0&&Dj())return Wj();if(!e)throw ci.create("no-app",{appName:t});return e}function ui(t,e,n){let r=p8[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(o.join(" "));return}Xa(new Eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="firebase-heartbeat-database",w8=1,Yc="firebase-heartbeat-store";let Jp=null;function Gj(){return Jp||(Jp=LV(y8,w8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function b8(t){try{const n=(await Gj()).transaction(Yc),r=await n.objectStore(Yc).get(qj(t));return await n.done,r}catch(e){if(e instanceof Ti)vs.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(n.message)}}}async function F1(t,e){try{const r=(await Gj()).transaction(Yc,"readwrite");await r.objectStore(Yc).put(e,qj(t)),await r.done}catch(n){if(n instanceof Ti)vs.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vs.warn(r.message)}}}function qj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=1024,N8=30;class C8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>N8){const o=k8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$1(),{heartbeatsToSend:r,unsentEntries:s}=S8(this._heartbeatsCache.heartbeats),i=Yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return vs.warn(n),""}}}function $1(){return new Date().toISOString().substring(0,10)}function S8(t,e=_8){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),V1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),V1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class E8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cV()?uV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V1(t){return Yh(JSON.stringify({version:2,heartbeats:t})).length}function k8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){Xa(new Eo("platform-logger",e=>new VV(e),"PRIVATE")),Xa(new Eo("heartbeat",e=>new C8(e),"PRIVATE")),ui(X0,O1,t),ui(X0,O1,"esm2020"),ui("fire-js","")}T8("");function Kj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j8=Kj,Yj=new ku("auth","Firebase",Kj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Ry("@firebase/auth");function R8(t,...e){Zh.logLevel<=Ae.WARN&&Zh.warn(`Auth (${yl}): ${t}`,...e)}function Xd(t,...e){Zh.logLevel<=Ae.ERROR&&Zh.error(`Auth (${yl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,...e){throw Ay(t,...e)}function Mr(t,...e){return Ay(t,...e)}function Qj(t,e,n){const r={...j8(),[e]:n};return new ku("auth","Firebase",r).create(e,{appName:t.name})}function di(t){return Qj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ay(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yj.create(t,...e)}function ce(t,e,...n){if(!t)throw Ay(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function ys(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function I8(){return U1()==="http:"||U1()==="https:"}function U1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I8()||aV()||"connection"in navigator)?navigator.onLine:!0}function A8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ys(n>e,"Short delay should be less than long delay!"),this.isMobile=jy()||$j()}get(){return P8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e){ys(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],O8=new Tu(3e4,6e4);function xm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function wl(t,e,n,r,s={}){return Jj(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=xl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return oV()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&vl(t.emulatorConfig.host)&&(u.credentials="include"),Xj.fetch()(await e2(t,t.config.apiHost,n,l),u)})}async function Jj(t,e,n){t._canInitEmulator=!1;const r={...M8,...e};try{const s=new L8(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw yd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw yd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw yd(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qj(t,d,u);xs(t,d)}}catch(s){if(s instanceof Ti)throw s;xs(t,"network-request-failed",{message:String(s)})}}async function Zj(t,e,n,r,s={}){const i=await wl(t,e,n,r,s);return"mfaPendingCredential"in i&&xs(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function e2(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?My(t.config,s):`${t.config.apiScheme}://${s}`;return D8.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class L8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mr(this.auth,"network-request-failed")),O8.get())})}}function yd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t,e){return wl(t,"POST","/v1/accounts:delete",e)}async function ef(t,e){return wl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $8(t,e=!1){const n=mn(t),r=await n.getIdToken(e),s=Dy(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:gc(Zp(s.auth_time)),issuedAtTime:gc(Zp(s.iat)),expirationTime:gc(Zp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function Dy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const s=Qh(n);return s?JSON.parse(s):(Xd("Failed to decode base64 JWT payload"),null)}catch(s){return Xd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function B1(t){const e=Dy(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ti&&V8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function V8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Qc(t,ef(e,{idToken:n}));ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?t2(s.providerUserInfo):[],o=z8(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function B8(t){const e=mn(t);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function t2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(t,e){const n=await Jj(t,{},async()=>{const r=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await e2(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&vl(t.emulatorConfig.host)&&(c.credentials="include"),Xj.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function H8(t,e){return wl(t,"POST","/v2/accounts:revokeToken",xm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=B1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await W8(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ca;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new U8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qc(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $8(this,e)}reload(){return B8(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await Qc(this,F8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:x}=n;ce(h&&x,e,"internal-error");const g=Ca.fromJSON(this.name,x);ce(typeof h=="string",e,"internal-error"),js(r,e.name),js(s,e.name),ce(typeof f=="boolean",e,"internal-error"),ce(typeof p=="boolean",e,"internal-error"),js(i,e.name),js(o,e.name),js(l,e.name),js(c,e.name),js(u,e.name),js(d,e.name);const y=new sr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:g,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(y.providerData=w.map(v=>({...v}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ca;s.updateFromServerResponse(n);const i=new sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?t2(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ca;l.updateFromIdToken(r);const c=new sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new tv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function as(t){ys(t instanceof Function,"Expected a class definition");let e=z1.get(t);return e?(ys(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}n2.type="NONE";const W1=n2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){return`firebase:${t}:${e}:${n}`}class Sa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Jd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Jd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?sr._fromGetAccountInfoResponse(this.auth,n,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Sa(as(W1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||as(W1);const o=Jd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await ef(e,{idToken:d}).catch(()=>{});if(!f)break;h=await sr._fromGetAccountInfoResponse(e,f,d)}else h=sr._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Sa(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Sa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l2(e))return"Blackberry";if(c2(e))return"Webos";if(s2(e))return"Safari";if((e.includes("chrome/")||i2(e))&&!e.includes("edge/"))return"Chrome";if(a2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function r2(t=Jt()){return/firefox\//i.test(t)}function s2(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function i2(t=Jt()){return/crios\//i.test(t)}function o2(t=Jt()){return/iemobile/i.test(t)}function a2(t=Jt()){return/android/i.test(t)}function l2(t=Jt()){return/blackberry/i.test(t)}function c2(t=Jt()){return/webos/i.test(t)}function Oy(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G8(t=Jt()){var e;return Oy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function q8(){return lV()&&document.documentMode===10}function u2(t=Jt()){return Oy(t)||a2(t)||c2(t)||l2(t)||/windows phone/i.test(t)||o2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e=[]){let n;switch(t){case"Browser":n=H1(Jt());break;case"Worker":n=`${H1(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y8(t,e={}){return wl(t,"GET","/v2/passwordPolicy",xm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=6;class X8{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Q8,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G1(this),this.idTokenSubscription=new G1(this),this.beforeStateQueue=new K8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Sa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ef(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(di(this));const n=e?mn(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y8(this),n=new X8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ku("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await H8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Sa.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&R8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ym(t){return mn(t)}class G1{constructor(e){this.auth=e,this.observer=null,this.addObserver=vV(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ly={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z8(t){Ly=t}function eU(t){return Ly.loadJS(t)}function tU(){return Ly.gapiScript}function nU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t,e){const n=Py(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(So(i,e??{}))return s;xs(s,"already-initialized")}return n.initialize({options:e})}function sU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iU(t,e,n){const r=ym(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=h2(e),{host:o,port:l}=oU(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(So(u,r.config.emulator)&&So(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,vl(o)?(Lj(`${i}//${o}${c}`),Fj("Auth",!0)):aU()}function h2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oU(t){const e=h2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:q1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:q1(o)}}}function q1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e){return Zj(t,"POST","/v1/accounts:signInWithIdp",xm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="http://localhost";class ko extends f2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ko(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ea(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ea(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ea(e,n)}buildRequest(){const e={requestUri:lU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends m2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends ju{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fs.credential(n,r)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends ju{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends ju{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e){return Zj(t,"POST","/v1/accounts:signUp",xm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sr._fromIdTokenResponse(e,r,s),o=K1(r);return new yi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=K1(r);return new yi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function K1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t){var s;if(tr(t.app))return Promise.reject(di(t));const e=ym(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new yi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await cU(e,{returnSecureToken:!0}),r=await yi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Ti{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nf(e,n,r,s)}}function p2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(t,i,e,r):i})}async function dU(t,e,n=!1){const r=await Qc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e,n=!1){const{auth:r}=t;if(tr(r.app))return Promise.reject(di(r));const s="reauthenticate";try{const i=await Qc(t,p2(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=Dy(i.idToken);ce(o,r,"internal-error");const{sub:l}=o;return ce(t.uid===l,r,"user-mismatch"),yi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e,n=!1){if(tr(t.app))return Promise.reject(di(t));const r="signIn",s=await p2(t,r,e),i=await yi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function mU(t,e,n,r){return mn(t).onIdTokenChanged(e,n,r)}function pU(t,e,n){return mn(t).beforeAuthStateChanged(e,n)}function gU(t,e,n,r){return mn(t).onAuthStateChanged(e,n,r)}function vU(t){return mn(t).signOut()}const rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=1e3,yU=10;class v2 extends g2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);q8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,yU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v2.type="LOCAL";const wU=v2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends g2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}x2.type="SESSION";const y2=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await bU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Fy("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function NU(t){Dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function CU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function EU(){return w2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebaseLocalStorageDb",kU=1,sf="firebaseLocalStorage",_2="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bm(t,e){return t.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function TU(){const t=indexedDB.deleteDatabase(b2);return new Ru(t).toPromise()}function nv(){const t=indexedDB.open(b2,kU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sf,{keyPath:_2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sf)?e(r):(r.close(),await TU(),e(await nv()))})})}async function Y1(t,e,n){const r=bm(t,!0).put({[_2]:e,value:n});return new Ru(r).toPromise()}async function jU(t,e){const n=bm(t,!1).get(e),r=await new Ru(n).toPromise();return r===void 0?null:r.value}function Q1(t,e){const n=bm(t,!0).delete(e);return new Ru(n).toPromise()}const RU=800,IU=3;class N2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return w2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(EU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await CU(),!this.activeServiceWorker)return;this.sender=new _U(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await Y1(e,rf,"1"),await Q1(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Y1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Q1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bm(s,!1).getAll();return new Ru(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N2.type="LOCAL";const PU=N2;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e){return e?as(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends f2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MU(t){return fU(t.auth,new $y(t),t.bypassAuthState)}function DU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),hU(n,new $y(t),t.bypassAuthState)}async function OU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),dU(n,new $y(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MU;case"linkViaPopup":case"linkViaRedirect":return OU;case"reauthViaPopup":case"reauthViaRedirect":return DU;default:xs(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Tu(2e3,1e4);class oa extends C2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LU.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="pendingRedirect",Zd=new Map;class $U extends C2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const r=await VU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VU(t,e){const n=zU(e),r=BU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function UU(t,e){Zd.set(t._key(),e)}function BU(t){return as(t._redirectPersistence)}function zU(t){return Jd(FU,t.config.apiKey,t.name)}async function WU(t,e,n=!1){if(tr(t.app))return Promise.reject(di(t));const r=ym(t),s=AU(r,e),o=await new $U(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=10*60*1e3;class GU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!S2(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HU&&this.cachedEventUids.clear(),this.cachedEventUids.has(X1(e))}saveEventToCache(e){this.cachedEventUids.add(X1(e)),this.lastProcessedEventTime=Date.now()}}function X1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function S2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t,e={}){return wl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QU=/^https?/;async function XU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await KU(t);for(const n of e)try{if(JU(n))return}catch{}xs(t,"unauthorized-domain")}function JU(t){const e=ev(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!QU.test(n))return!1;if(YU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=new Tu(3e4,6e4);function J1(){const t=Dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eB(t){return new Promise((e,n)=>{var s,i,o;function r(){J1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J1(),n(Mr(t,"network-request-failed"))},timeout:ZU.get()})}if((i=(s=Dr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Dr().gapi)!=null&&o.load)r();else{const l=nU("iframefcb");return Dr()[l]=()=>{gapi.load?r():n(Mr(t,"network-request-failed"))},eU(`${tU()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw eh=null,e})}let eh=null;function tB(t){return eh=eh||eB(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new Tu(5e3,15e3),rB="__/auth/iframe",sB="emulator/auth/iframe",iB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aB(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?My(e,sB):`https://${t.config.authDomain}/${rB}`,r={apiKey:e.apiKey,appName:t.name,v:yl},s=oB.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xl(r).slice(1)}`}async function lB(t){const e=await tB(t),n=Dr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:aB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iB,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Mr(t,"network-request-failed"),l=Dr().setTimeout(()=>{i(o)},nB.get());function c(){Dr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uB=500,dB=600,hB="_blank",fB="http://localhost";class Z1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mB(t,e,n,r=uB,s=dB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...cB,width:r.toString(),height:s.toString(),top:i,left:o},u=Jt().toLowerCase();n&&(l=i2(u)?hB:n),r2(u)&&(e=e||fB,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(G8(u)&&l!=="_self")return pB(e||"",l),new Z1(null);const h=window.open(e||"",l,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new Z1(h)}function pB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="__/auth/handler",vB="emulator/auth/handler",xB=encodeURIComponent("fac");async function eN(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yl,eventId:s};if(e instanceof m2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",K0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ju){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${xB}=${encodeURIComponent(c)}`:"";return`${yB(t)}?${xl(l).slice(1)}${u}`}function yB({config:t}){return t.emulator?My(t,vB):`https://${t.authDomain}/${gB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="webStorageSupport";class wB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=y2,this._completeRedirectFn=WU,this._overrideRedirectResult=UU}async _openPopup(e,n,r,s){var o;ys((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await eN(e,n,r,ev(),s);return mB(e,i,Fy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await eN(e,n,r,ev(),s);return NU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ys(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lB(e),r=new GU(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eg,{type:eg},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[eg];i!==void 0&&n(!!i),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return u2()||s2()||Oy()}}const bB=wB;var tN="@firebase/auth",nN="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CB(t){Xa(new Eo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d2(t)},u=new J8(r,s,i,c);return sU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xa(new Eo("auth-internal",e=>{const n=ym(e.getProvider("auth").getImmediate());return(r=>new _B(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(tN,nN,NB(t)),ui(tN,nN,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=5*60,EB=Oj("authIdTokenMaxAge")||SB;let rN=null;const kB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>EB)return;const s=n==null?void 0:n.token;rN!==s&&(rN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TB(t=Hj()){const e=Py(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rU(t,{popupRedirectResolver:bB,persistence:[PU,wU,y2]}),r=Oj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=kB(i.toString());pU(n,o,()=>o(n.currentUser)),mU(n,l=>o(l))}}const s=Mj("auth");return s&&iU(n,`http://${s}`),n}function jB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Z8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Mr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",jB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CB("Browser");var sN={};const iN="@firebase/database",oN="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E2="";function RB(t){E2=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Kc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Br(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IB(e)}}catch{}return new PB},Ji=k2("localStorage"),AB=k2("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Ry("@firebase/database"),MB=function(){let t=1;return function(){return t++}}(),T2=function(t){const e=wV(t),n=new gV;n.update(e);const r=n.digest();return ky.encodeByteArray(r)},Iu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Iu.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e};let vc=null,aN=!0;const DB=function(t,e){X(!e,"Can't turn on custom loggers persistently."),ka.logLevel=Ae.VERBOSE,vc=ka.log.bind(ka)},jt=function(...t){if(aN===!0&&(aN=!1,vc===null&&AB.get("logging_enabled")===!0&&DB()),vc){const e=Iu.apply(null,t);vc(e)}},Pu=function(t){return function(...e){jt(t,...e)}},rv=function(...t){const e="FIREBASE INTERNAL ERROR: "+Iu(...t);ka.error(e)},ws=function(...t){const e=`FIREBASE FATAL ERROR: ${Iu(...t)}`;throw ka.error(e),new Error(e)},Xt=function(...t){const e="FIREBASE WARNING: "+Iu(...t);ka.warn(e)},OB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},LB=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ja="[MIN_NAME]",To="[MAX_NAME]",Lo=function(t,e){if(t===e)return 0;if(t===Ja||e===To)return-1;if(e===Ja||t===To)return 1;{const n=lN(t),r=lN(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},FB=function(t,e){return t===e?0:t<e?-1:1},Wl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},Uy=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=Uy(t[e[r]]);return n+="}",n},j2=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Pt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const R2=function(t){X(!Vy(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},$B=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function UB(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const BB=new RegExp("^-?(0*)\\d{1,10}$"),zB=-2147483648,WB=2147483647,lN=function(t){if(BB.test(t)){const e=Number(t);if(e>=zB&&e<=WB)return e}return null},bl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},HB=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,tr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xt(e)}}class th{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}th.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="5",I2="v",P2="s",A2="r",M2="f",D2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,O2="ls",L2="p",sv="ac",F2="websocket",$2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r,s,i=!1,o="",l=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ji.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ji.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function KB(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function U2(t,e,n){X(typeof e=="string","typeof type must == string"),X(typeof n=="object","typeof params must == object");let r;if(e===F2)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);KB(t)&&(n.ns=t.namespace);const s=[];return Pt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this.counters_={}}incrementCounter(e,n=1){Br(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Q$(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg={},ng={};function zy(t){const e=t.toString();return tg[e]||(tg[e]=new YB),tg[e]}function QB(t,e){const n=t.toString();return ng[n]||(ng[n]=e()),ng[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&bl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="start",JB="close",ZB="pLPCommand",ez="pRTLPCB",B2="id",z2="pw",W2="ser",tz="cb",nz="seg",rz="ts",sz="d",iz="dframe",H2=1870,G2=30,oz=H2-G2,az=25e3,lz=3e4;class aa{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pu(e),this.stats_=zy(n),this.urlFn=c=>(this.appCheckToken&&(c[sv]=this.appCheckToken),U2(n,$2,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new XB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lz)),LB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wy((...i)=>{const[o,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cN)this.id=l,this.password=c;else if(o===JB)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[cN]="t",r[W2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[tz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[I2]=By,this.transportSessionId&&(r[P2]=this.transportSessionId),this.lastSessionId&&(r[O2]=this.lastSessionId),this.applicationId&&(r[L2]=this.applicationId),this.appCheckToken&&(r[sv]=this.appCheckToken),typeof location<"u"&&location.hostname&&D2.test(location.hostname)&&(r[A2]=M2);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){aa.forceAllow_=!0}static forceDisallow(){aa.forceDisallow_=!0}static isAvailable(){return aa.forceAllow_?!0:!aa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$B()&&!VB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pj(n),s=j2(r,oz);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[iz]="t",r[B2]=e,r[z2]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Wy{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MB(),window[ZB+this.uniqueCallbackIdentifier]=e,window[ez+this.uniqueCallbackIdentifier]=n,this.myIFrame=Wy.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){jt("frame writing exception"),l.stack&&jt(l.stack),jt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||jt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[B2]=this.myID,e[z2]=this.myPW,e[W2]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+G2+r.length<=H2;){const o=this.pendingSegs.shift();r=r+"&"+nz+s+"="+o.seg+"&"+rz+s+"="+o.ts+"&"+sz+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(az)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=16384,uz=45e3;let of=null;typeof MozWebSocket<"u"?of=MozWebSocket:typeof WebSocket<"u"&&(of=WebSocket);class nr{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pu(this.connId),this.stats_=zy(n),this.connURL=nr.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[I2]=By,typeof location<"u"&&location.hostname&&D2.test(location.hostname)&&(o[A2]=M2),n&&(o[P2]=n),r&&(o[O2]=r),s&&(o[sv]=s),i&&(o[L2]=i),U2(e,F2,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ji.set("previous_websocket_failure",!0);try{let r;Vj(),this.mySock=new of(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){nr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&of!==null&&!nr.forceDisallow_}static previouslyFailed(){return Ji.isInMemoryStorage||Ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ji.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Kc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=j2(n,cz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(uz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}nr.responsesRequiredToBeHealthy=2;nr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{static get ALL_TRANSPORTS(){return[aa,nr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=nr&&nr.isAvailable();let r=n&&!nr.previouslyFailed();if(e.webSocketOnly&&(n||Xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[nr];else{const s=this.transports_=[];for(const i of Xc.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Xc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=6e4,hz=5e3,fz=10*1024,mz=100*1024,rg="t",uN="d",pz="s",dN="r",gz="e",hN="o",fN="a",mN="n",pN="p",vz="h";class xz{constructor(e,n,r,s,i,o,l,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pu("c:"+this.id+":"),this.transportManager_=new Xc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=xc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(rg in e){const n=e[rg];n===fN?this.upgradeIfSecondaryHealthy_():n===dN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===hN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Wl("t",e),r=Wl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fN,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Wl("t",e),r=Wl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Wl(rg,e);if(uN in e){const r=e[uN];if(n===vz){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===mN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pz?this.onConnectionShutdown_(r):n===dN?this.onReset_(r):n===gz?rv("Server Error: "+r):n===hN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),By!==r&&Xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pN,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){X(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends K2{static getInstance(){return new af}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=32,vN=768;class Me{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Te(){return new Me("")}function xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wi(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Me(t.pieces_,e)}function Hy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Jc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Y2(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Me(e,0)}function nt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Me(n,0)}function we(t){return t.pieceNum_>=t.pieces_.length}function Kt(t,e){const n=xe(t),r=xe(e);if(n===null)return e;if(n===r)return Kt($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wz(t,e){const n=Jc(t,0),r=Jc(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Lo(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Gy(t,e){if(wi(t)!==wi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Dn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(wi(t)>wi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class bz{constructor(e,n){this.errorPrefix_=n,this.parts_=Jc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vm(this.parts_[r]);Q2(this)}}function _z(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vm(e),Q2(t)}function Nz(t){const e=t.parts_.pop();t.byteLength_-=vm(e),t.parts_.length>0&&(t.byteLength_-=1)}function Q2(t){if(t.byteLength_>vN)throw new Error(t.errorPrefix_+"has a key path longer than "+vN+" bytes ("+t.byteLength_+").");if(t.parts_.length>gN)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+gN+") or object contains a cycle "+Gi(t))}function Gi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends K2{static getInstance(){return new qy}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=1e3,Cz=60*5*1e3,xN=30*1e3,Sz=1.3,Ez=3e4,kz="server_kill",yN=3;class us extends q2{constructor(e,n,r,s,i,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=us.nextPersistentConnectionId_++,this.log_=Pu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hl,this.maxReconnectDelay_=Cz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Vj())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&af.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(mt(i)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Eu,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;us.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Br(e,"w")){const r=Qa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||pV(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xN)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=mV(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):rv("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Ez&&(this.reconnectDelay_=Hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Sz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+us.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},u=function(h){X(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?jt("getToken() completed but was canceled"):(jt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new xz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Xt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(kz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Xt(h),c())}}}interrupt(e){jt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){jt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],K0(this.interruptReasons_)&&(this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Uy(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Me(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){jt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yN&&(this.reconnectDelay_=xN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){jt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+E2.replace(/\./g,"-")]=1,jy()?e["framework.cordova"]=1:$j()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=af.getInstance().currentlyOnline();return K0(this.interruptReasons_)&&e}}us.nextPersistentConnectionId_=0;us.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ye(Ja,e),s=new ye(Ja,n);return this.compare(r,s)!==0}minPost(){return ye.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd;class X2 extends _m{static get __EMPTY_NODE(){return wd}static set __EMPTY_NODE(e){wd=e}compare(e,n){return Lo(e.name,n.name)}isDefinedOn(e){throw gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ye.MIN}maxPost(){return new ye(To,wd)}makePost(e,n){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,wd)}toString(){return".key"}}const Ta=new X2;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bt.RED,this.left=s??on.EMPTY_NODE,this.right=i??on.EMPTY_NODE}copy(e,n,r,s,i){return new bt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return on.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return on.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class Tz{copy(e,n,r,s,i){return this}insert(e,n,r){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class on{constructor(e,n=on.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new on(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new on(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bd(this.root_,null,this.comparator_,!0,e)}}on.EMPTY_NODE=new Tz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(t,e){return Lo(t.name,e.name)}function Ky(t,e){return Lo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv;function Rz(t){iv=t}const J2=function(t){return typeof t=="number"?"number:"+R2(t):"string:"+t},Z2=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Br(e,".sv"),"Priority must be a string or number.")}else X(t===iv||t.isEmpty(),"priority of unexpected type.");X(t===iv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wN;class yt{static set __childrenNodeConstructor(e){wN=e}static get __childrenNodeConstructor(){return wN}constructor(e,n=yt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Z2(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return we(e)?this:xe(e)===".priority"?this.priorityNode_:yt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:yt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=xe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(X(r!==".priority"||wi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,yt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+J2(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=R2(this.value_):e+=this.value_,this.lazyHash_=T2(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yt.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=yt.VALUE_TYPE_ORDER.indexOf(n),i=yt.VALUE_TYPE_ORDER.indexOf(r);return X(s>=0,"Unknown leaf type: "+n),X(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}yt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eR,tR;function Iz(t){eR=t}function Pz(t){tR=t}class Az extends _m{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Lo(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(To,new yt("[PRIORITY-POST]",tR))}makePost(e,n){const r=eR(e);return new ye(n,new yt("[PRIORITY-POST]",r))}toString(){return".priority"}}const rt=new Az;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=Math.log(2);class Dz{constructor(e){const n=i=>parseInt(Math.log(i)/Mz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lf=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new bt(f,h.node,bt.BLACK,null,null);{const p=parseInt(d/2,10)+c,w=s(c,p),x=s(p+1,u);return h=t[p],f=n?n(h):h,new bt(f,h.node,bt.BLACK,w,x)}},i=function(c){let u=null,d=null,h=t.length;const f=function(w,x){const g=h-w,y=h;h-=w;const v=s(g+1,y),_=t[g],C=n?n(_):_;p(new bt(C,_.node,x,null,v))},p=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){const x=c.nextBitIsOne(),g=Math.pow(2,c.count-(w+1));x?f(g,bt.BLACK):(f(g,bt.BLACK),f(g,bt.RED))}return d},o=new Dz(t.length),l=i(o);return new on(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;const zo={};class ls{static get Default(){return X(zo&&rt,"ChildrenNode.ts has not been loaded"),sg=sg||new ls({".priority":zo},{".priority":rt}),sg}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Qa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof on?n:null}hasIndex(e){return Br(this.indexSet_,e.toString())}addIndex(e,n){X(e!==Ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ye.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=lf(r,e.getCompare()):l=zo;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=l,new ls(d,u)}addToIndexes(e,n){const r=Xh(this.indexes_,(s,i)=>{const o=Qa(this.indexSet_,i);if(X(o,"Missing index implementation for "+i),s===zo)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(ye.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),lf(l,o.getCompare())}else return zo;else{const l=n.get(e.name);let c=s;return l&&(c=c.remove(new ye(e.name,l))),c.insert(e,e.node)}});return new ls(r,this.indexSet_)}removeFromIndexes(e,n){const r=Xh(this.indexes_,s=>{if(s===zo)return s;{const i=n.get(e.name);return i?s.remove(new ye(e.name,i)):s}});return new ls(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl;class oe{static get EMPTY_NODE(){return Gl||(Gl=new oe(new on(Ky),null,ls.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Z2(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gl}updatePriority(e){return this.children_.isEmpty()?this:new oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Gl:n}}getChild(e){const n=xe(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(X(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ye(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Gl:this.priorityNode_;return new oe(s,o,i)}}updateChild(e,n){const r=xe(e);if(r===null)return n;{X(xe(e)!==".priority"||wi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild($e(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(rt,(o,l)=>{n[o]=l.val(e),r++,i&&oe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+J2(this.getPriority().val())+":"),this.forEachChild(rt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":T2(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ye(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ye(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ye.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ye.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Au?-1:0}withIndex(e){if(e===Ta||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new oe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ta||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(rt),s=n.getIterator(rt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ta?null:this.indexMap_.get(e.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Oz extends oe{constructor(){super(new on(Ky),oe.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return oe.EMPTY_NODE}isEmpty(){return!1}}const Au=new Oz;Object.defineProperties(ye,{MIN:{value:new ye(Ja,oe.EMPTY_NODE)},MAX:{value:new ye(To,Au)}});X2.__EMPTY_NODE=oe.EMPTY_NODE;yt.__childrenNodeConstructor=oe;Rz(Au);Pz(Au);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=!0;function ht(t,e=null){if(t===null)return oe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new yt(n,ht(e))}if(!(t instanceof Array)&&Lz){const n=[];let r=!1;if(Pt(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=ht(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ye(o,c)))}}),n.length===0)return oe.EMPTY_NODE;const i=lf(n,jz,o=>o.name,Ky);if(r){const o=lf(n,rt.getCompare());return new oe(i,ht(e),new ls({".priority":o},{".priority":rt}))}else return new oe(i,ht(e),ls.Default)}else{let n=oe.EMPTY_NODE;return Pt(t,(r,s)=>{if(Br(t,r)&&r.substring(0,1)!=="."){const i=ht(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ht(e))}}Iz(ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz extends _m{constructor(e){super(),this.indexPath_=e,X(!we(e)&&xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Lo(e.name,n.name):i}makePost(e,n){const r=ht(e),s=oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(n,s)}maxPost(){const e=oe.EMPTY_NODE.updateChild(this.indexPath_,Au);return new ye(To,e)}toString(){return Jc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z extends _m{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Lo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,n){const r=ht(e);return new ye(n,r)}toString(){return".value"}}const Vz=new $z;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){return{type:"value",snapshotNode:t}}function Za(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Zc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function eu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Uz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Zc(n,l)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Za(n,r)):o.trackChildChange(eu(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(rt,(s,i)=>{n.hasChild(s)||r.trackChildChange(Zc(s,i))}),n.isLeafNode()||n.forEachChild(rt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(eu(s,i,o))}else r.trackChildChange(Za(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?oe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.indexedFilter_=new Yy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tu.getStartPost_(e),this.endPost_=tu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ye(n,r))||(r=oe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=oe.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(oe.EMPTY_NODE);const i=this;return n.forEachChild(rt,(o,l)=>{i.matches(new ye(o,l))||(s=s.updateImmediateChild(o,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new tu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ye(n,r))||(r=oe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=oe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(oe.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const l=e;X(l.numChildren()===this.limit_,"");const c=new ye(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,c);if(d&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(eu(n,r,h)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Zc(n,h));const x=l.updateImmediateChild(n,oe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Za(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(Zc(u.name,u.node)),i.trackChildChange(Za(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,oe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ja}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:To}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new Qy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zz(t){return t.loadsAllData()?new Yy(t.getIndex()):t.hasLimit()?new Bz(t):new tu(t)}function bN(t){const e={};if(t.isDefault())return e;let n;if(t.index_===rt?n="$priority":t.index_===Vz?n="$value":t.index_===Ta?n="$key":(X(t.index_ instanceof Fz,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _N(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==rt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf extends q2{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Pu("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=cf.getListenId_(e,r),l={};this.listens_[o]=l;const c=bN(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),Qa(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=cf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=bN(e._queryParams),r=e._path.toString(),s=new Eu;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+xl(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Kc(l.responseText)}catch{Xt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&Xt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){return{value:null,children:new Map}}function rR(t,e,n){if(we(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=xe(e);t.children.has(r)||t.children.set(r,uf());const s=t.children.get(r);e=$e(e),rR(s,e,n)}}function ov(t,e,n){t.value!==null?n(e,t.value):Hz(t,(r,s)=>{const i=new Me(e.toString()+"/"+r);ov(s,i,n)})}function Hz(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Pt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=10*1e3,qz=30*1e3,Kz=5*60*1e3;class Yz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Gz(e);const r=NN+(qz-NN)*Math.random();xc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Pt(e,(s,i)=>{i>0&&Br(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),xc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Kz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ir||(ir={}));function Xy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Jy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ir.ACK_USER_WRITE,this.source=Xy()}operationForChild(e){if(we(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Me(e));return new df(Te(),n,this.revert)}}else return X(xe(this.path)===e,"operationForChild called for unrelated child."),new df($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.source=e,this.path=n,this.type=ir.LISTEN_COMPLETE}operationForChild(e){return we(this.path)?new nu(this.source,Te()):new nu(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ir.OVERWRITE}operationForChild(e){return we(this.path)?new jo(this.source,Te(),this.snap.getImmediateChild(e)):new jo(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ir.MERGE}operationForChild(e){if(we(this.path)){const n=this.children.subtree(new Me(e));return n.isEmpty()?null:n.value?new jo(this.source,Te(),n.value):new el(this.source,Te(),n)}else return X(xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new el(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;const n=xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Xz(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Uz(o.childName,o.snapshotNode))}),ql(t,s,"child_removed",e,r,n),ql(t,s,"child_added",e,r,n),ql(t,s,"child_moved",i,r,n),ql(t,s,"child_changed",e,r,n),ql(t,s,"value",e,r,n),s}function ql(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,c)=>Zz(t,l,c)),o.forEach(l=>{const c=Jz(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function Jz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Zz(t,e,n){if(e.childName==null||n.childName==null)throw gl("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),s=new ye(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){return{eventCache:t,serverCache:e}}function yc(t,e,n,r){return Nm(new bi(e,n,r),t.serverCache)}function sR(t,e,n,r){return Nm(t.eventCache,new bi(e,n,r))}function hf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ro(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig;const eW=()=>(ig||(ig=new on(FB)),ig);class Fe{static fromObject(e){let n=new Fe(null);return Pt(e,(r,s)=>{n=n.set(new Me(r),s)}),n}constructor(e,n=eW()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Te(),value:this.value};if(we(e))return null;{const r=xe(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue($e(e),n);return i!=null?{path:nt(new Me(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(we(e))return this;{const n=xe(e),r=this.children.get(n);return r!==null?r.subtree($e(e)):new Fe(null)}}set(e,n){if(we(e))return new Fe(n,this.children);{const r=xe(e),i=(this.children.get(r)||new Fe(null)).set($e(e),n),o=this.children.insert(r,i);return new Fe(this.value,o)}}remove(e){if(we(e))return this.children.isEmpty()?new Fe(null):new Fe(null,this.children);{const n=xe(e),r=this.children.get(n);if(r){const s=r.remove($e(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Fe(null):new Fe(this.value,i)}else return this}}get(e){if(we(e))return this.value;{const n=xe(e),r=this.children.get(n);return r?r.get($e(e)):null}}setTree(e,n){if(we(e))return n;{const r=xe(e),i=(this.children.get(r)||new Fe(null)).setTree($e(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Fe(this.value,o)}}fold(e){return this.fold_(Te(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(nt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Te(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(we(e))return null;{const i=xe(e),o=this.children.get(i);return o?o.findOnPath_($e(e),nt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Te(),n)}foreachOnPath_(e,n,r){if(we(e))return this;{this.value&&r(n,this.value);const s=xe(e),i=this.children.get(s);return i?i.foreachOnPath_($e(e),nt(n,s),r):new Fe(null)}}foreach(e){this.foreach_(Te(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(nt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new Fe(null))}}function wc(t,e,n){if(we(e))return new lr(new Fe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Kt(s,e);return i=i.updateChild(o,n),new lr(t.writeTree_.set(s,i))}else{const s=new Fe(n),i=t.writeTree_.setTree(e,s);return new lr(i)}}}function av(t,e,n){let r=t;return Pt(n,(s,i)=>{r=wc(r,nt(e,s),i)}),r}function CN(t,e){if(we(e))return lr.empty();{const n=t.writeTree_.setTree(e,new Fe(null));return new lr(n)}}function lv(t,e){return Fo(t,e)!=null}function Fo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Kt(n.path,e)):null}function SN(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(rt,(r,s)=>{e.push(new ye(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ye(r,s.value))}),e}function hi(t,e){if(we(e))return t;{const n=Fo(t,e);return n!=null?new lr(new Fe(n)):new lr(t.writeTree_.subtree(e))}}function cv(t){return t.writeTree_.isEmpty()}function tl(t,e){return iR(Te(),t.writeTree_,e)}function iR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(X(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=iR(nt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(nt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){return cR(e,t)}function tW(t,e,n,r,s){X(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=wc(t.visibleWrites,e,n)),t.lastWriteId=r}function nW(t,e,n,r){X(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=av(t.visibleWrites,e,n),t.lastWriteId=r}function rW(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function sW(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);X(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&iW(l,r.path)?s=!1:Dn(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return oW(t),!0;if(r.snap)t.visibleWrites=CN(t.visibleWrites,r.path);else{const l=r.children;Pt(l,c=>{t.visibleWrites=CN(t.visibleWrites,nt(r.path,c))})}return!0}else return!1}function iW(t,e){if(t.snap)return Dn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Dn(nt(t.path,n),e))return!0;return!1}function oW(t){t.visibleWrites=oR(t.allWrites,aW,Te()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aW(t){return t.visible}function oR(t,e,n){let r=lr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)Dn(n,o)?(l=Kt(n,o),r=wc(r,l,i.snap)):Dn(o,n)&&(l=Kt(o,n),r=wc(r,Te(),i.snap.getChild(l)));else if(i.children){if(Dn(n,o))l=Kt(n,o),r=av(r,l,i.children);else if(Dn(o,n))if(l=Kt(o,n),we(l))r=av(r,Te(),i.children);else{const c=Qa(i.children,xe(l));if(c){const u=c.getChild($e(l));r=wc(r,Te(),u)}}}else throw gl("WriteRecord should have .snap or .children")}}return r}function aR(t,e,n,r,s){if(!r&&!s){const i=Fo(t.visibleWrites,e);if(i!=null)return i;{const o=hi(t.visibleWrites,e);if(cv(o))return n;if(n==null&&!lv(o,Te()))return null;{const l=n||oe.EMPTY_NODE;return tl(o,l)}}}else{const i=hi(t.visibleWrites,e);if(!s&&cv(i))return n;if(!s&&n==null&&!lv(i,Te()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Dn(u.path,e)||Dn(e,u.path))},l=oR(t.allWrites,o,e),c=n||oe.EMPTY_NODE;return tl(l,c)}}}function lW(t,e,n){let r=oe.EMPTY_NODE;const s=Fo(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(rt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=hi(t.visibleWrites,e);return n.forEachChild(rt,(o,l)=>{const c=tl(hi(i,new Me(o)),l);r=r.updateImmediateChild(o,c)}),SN(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=hi(t.visibleWrites,e);return SN(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function cW(t,e,n,r,s){X(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=nt(e,n);if(lv(t.visibleWrites,i))return null;{const o=hi(t.visibleWrites,i);return cv(o)?s.getChild(n):tl(o,s.getChild(n))}}function uW(t,e,n,r){const s=nt(e,n),i=Fo(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=hi(t.visibleWrites,s);return tl(o,r.getNode().getImmediateChild(n))}else return null}function dW(t,e){return Fo(t.visibleWrites,e)}function hW(t,e,n,r,s,i,o){let l;const c=hi(t.visibleWrites,e),u=Fo(c,Te());if(u!=null)l=u;else if(n!=null)l=tl(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function fW(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function ff(t,e,n,r){return aR(t.writeTree,t.treePath,e,n,r)}function ew(t,e){return lW(t.writeTree,t.treePath,e)}function EN(t,e,n,r){return cW(t.writeTree,t.treePath,e,n,r)}function mf(t,e){return dW(t.writeTree,nt(t.treePath,e))}function mW(t,e,n,r,s,i){return hW(t.writeTree,t.treePath,e,n,r,s,i)}function tw(t,e,n){return uW(t.writeTree,t.treePath,e,n)}function lR(t,e){return cR(nt(t.treePath,e),t.writeTree)}function cR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;X(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),X(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,eu(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Zc(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Za(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,eu(r,e.snapshotNode,s.oldSnap));else throw gl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const uR=new gW;class nw{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new bi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tw(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ro(this.viewCache_),i=mW(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){return{filter:t}}function xW(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function yW(t,e,n,r,s){const i=new pW;let o,l;if(n.type===ir.OVERWRITE){const u=n;u.source.fromUser?o=uv(t,e,u.path,u.snap,r,s,i):(X(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!we(u.path),o=pf(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===ir.MERGE){const u=n;u.source.fromUser?o=bW(t,e,u.path,u.children,r,s,i):(X(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=dv(t,e,u.path,u.children,r,s,l,i))}else if(n.type===ir.ACK_USER_WRITE){const u=n;u.revert?o=CW(t,e,u.path,r,s,i):o=_W(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===ir.LISTEN_COMPLETE)o=NW(t,e,n.path,r,i);else throw gl("Unknown operation type: "+n.type);const c=i.getChanges();return wW(e,o,c),{viewCache:o,changes:c}}function wW(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=hf(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(nR(hf(e)))}}function dR(t,e,n,r,s,i){const o=e.eventCache;if(mf(r,n)!=null)return e;{let l,c;if(we(n))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ro(e),d=u instanceof oe?u:oe.EMPTY_NODE,h=ew(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=ff(r,Ro(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=xe(n);if(u===".priority"){X(wi(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=EN(r,n,d,c);h!=null?l=t.filter.updatePriority(d,h):l=o.getNode()}else{const d=$e(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=EN(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=tw(r,u,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),u,h,d,s,i):l=o.getNode()}}return yc(e,l,o.isFullyInitialized()||we(n),t.filter.filtersNodes())}}function pf(t,e,n,r,s,i,o,l){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(we(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),p,null)}else{const p=xe(n);if(!c.isCompleteForPath(n)&&wi(n)>1)return e;const w=$e(n),g=c.getNode().getImmediateChild(p).updateChild(w,r);p===".priority"?u=d.updatePriority(c.getNode(),g):u=d.updateChild(c.getNode(),p,g,w,uR,null)}const h=sR(e,u,c.isFullyInitialized()||we(n),d.filtersNodes()),f=new nw(s,h,i);return dR(t,h,n,s,f,l)}function uv(t,e,n,r,s,i,o){const l=e.eventCache;let c,u;const d=new nw(s,e,i);if(we(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=yc(e,u,!0,t.filter.filtersNodes());else{const h=xe(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=yc(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=$e(n),p=l.getNode().getImmediateChild(h);let w;if(we(f))w=r;else{const x=d.getCompleteChild(h);x!=null?Hy(f)===".priority"&&x.getChild(Y2(f)).isEmpty()?w=x:w=x.updateChild(f,r):w=oe.EMPTY_NODE}if(p.equals(w))c=e;else{const x=t.filter.updateChild(l.getNode(),h,w,f,d,o);c=yc(e,x,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function kN(t,e){return t.eventCache.isCompleteForChild(e)}function bW(t,e,n,r,s,i,o){let l=e;return r.foreach((c,u)=>{const d=nt(n,c);kN(e,xe(d))&&(l=uv(t,l,d,u,s,i,o))}),r.foreach((c,u)=>{const d=nt(n,c);kN(e,xe(d))||(l=uv(t,l,d,u,s,i,o))}),l}function TN(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function dv(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;we(n)?u=r:u=new Fe(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),w=TN(t,p,f);c=pf(t,c,new Me(h),w,s,i,o,l)}}),u.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const w=e.serverCache.getNode().getImmediateChild(h),x=TN(t,w,f);c=pf(t,c,new Me(h),x,s,i,o,l)}}),c}function _W(t,e,n,r,s,i,o){if(mf(s,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(we(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return pf(t,e,n,c.getNode().getChild(n),s,i,l,o);if(we(n)){let u=new Fe(null);return c.getNode().forEachChild(Ta,(d,h)=>{u=u.set(new Me(d),h)}),dv(t,e,n,u,s,i,l,o)}else return e}else{let u=new Fe(null);return r.foreach((d,h)=>{const f=nt(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),dv(t,e,n,u,s,i,l,o)}}function NW(t,e,n,r,s){const i=e.serverCache,o=sR(e,i.getNode(),i.isFullyInitialized()||we(n),i.isFiltered());return dR(t,o,n,r,uR,s)}function CW(t,e,n,r,s,i){let o;if(mf(r,n)!=null)return e;{const l=new nw(r,e,s),c=e.eventCache.getNode();let u;if(we(n)||xe(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=ff(r,Ro(e));else{const h=e.serverCache.getNode();X(h instanceof oe,"serverChildren would be complete if leaf node"),d=ew(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=xe(n);let h=tw(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,$e(n),l,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,oe.EMPTY_NODE,$e(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ff(r,Ro(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||mf(r,Te())!=null,yc(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Yy(r.getIndex()),i=zz(r);this.processor_=vW(i);const o=n.serverCache,l=n.eventCache,c=s.updateFullNode(oe.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(oe.EMPTY_NODE,l.getNode(),null),d=new bi(c,o.isFullyInitialized(),s.filtersNodes()),h=new bi(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Nm(h,d),this.eventGenerator_=new Qz(this.query_)}get query(){return this.query_}}function EW(t){return t.viewCache_.serverCache.getNode()}function kW(t){return hf(t.viewCache_)}function TW(t,e){const n=Ro(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!we(e)&&!n.getImmediateChild(xe(e)).isEmpty())?n.getChild(e):null}function jN(t){return t.eventRegistrations_.length===0}function jW(t,e){t.eventRegistrations_.push(e)}function RN(t,e,n){const r=[];if(n){X(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function IN(t,e,n,r){e.type===ir.MERGE&&e.source.queryId!==null&&(X(Ro(t.viewCache_),"We should always have a full cache before handling merges"),X(hf(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=yW(t.processor_,s,e,n,r);return xW(t.processor_,i.viewCache),X(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,hR(t,i.changes,i.viewCache.eventCache.getNode(),null)}function RW(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rt,(i,o)=>{r.push(Za(i,o))}),n.isFullyInitialized()&&r.push(nR(n.getNode())),hR(t,r,n.getNode(),e)}function hR(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Xz(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf;class fR{constructor(){this.views=new Map}}function IW(t){X(!gf,"__referenceConstructor has already been defined"),gf=t}function PW(){return X(gf,"Reference.ts has not been loaded"),gf}function AW(t){return t.views.size===0}function rw(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return X(i!=null,"SyncTree gave us an op for an invalid query."),IN(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(IN(o,e,n,r));return i}}function mR(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=ff(n,s?r:null),c=!1;l?c=!0:r instanceof oe?(l=ew(n,r),c=!1):(l=oe.EMPTY_NODE,c=!1);const u=Nm(new bi(l,c,!1),new bi(r,s,!1));return new SW(e,u)}return o}function MW(t,e,n,r,s,i){const o=mR(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),jW(o,n),RW(o,n)}function DW(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=_i(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(RN(u,n,r)),jN(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(RN(c,n,r)),jN(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!_i(t)&&i.push(new(PW())(e._repo,e._path)),{removed:i,events:o}}function pR(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function fi(t,e){let n=null;for(const r of t.views.values())n=n||TW(r,e);return n}function gR(t,e){if(e._queryParams.loadsAllData())return Sm(t);{const r=e._queryIdentifier;return t.views.get(r)}}function vR(t,e){return gR(t,e)!=null}function _i(t){return Sm(t)!=null}function Sm(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf;function OW(t){X(!vf,"__referenceConstructor has already been defined"),vf=t}function LW(){return X(vf,"Reference.ts has not been loaded"),vf}let FW=1;class PN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=fW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xR(t,e,n,r,s){return tW(t.pendingWriteTree_,e,n,r,s),s?_l(t,new jo(Xy(),e,n)):[]}function $W(t,e,n,r){nW(t.pendingWriteTree_,e,n,r);const s=Fe.fromObject(n);return _l(t,new el(Xy(),e,s))}function Js(t,e,n=!1){const r=rW(t.pendingWriteTree_,e);if(sW(t.pendingWriteTree_,e)){let i=new Fe(null);return r.snap!=null?i=i.set(Te(),!0):Pt(r.children,o=>{i=i.set(new Me(o),!0)}),_l(t,new df(r.path,i,n))}else return[]}function Mu(t,e,n){return _l(t,new jo(Jy(),e,n))}function VW(t,e,n){const r=Fe.fromObject(n);return _l(t,new el(Jy(),e,r))}function UW(t,e){return _l(t,new nu(Jy(),e))}function BW(t,e,n){const r=iw(t,n);if(r){const s=ow(r),i=s.path,o=s.queryId,l=Kt(i,e),c=new nu(Zy(o),l);return aw(t,i,c)}else return[]}function xf(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||vR(o,e))){const c=DW(o,e,n,r);AW(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,p)=>_i(p));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=HW(f);for(let w=0;w<p.length;++w){const x=p[w],g=x.query,y=_R(t,x);t.listenProvider_.startListening(bc(g),ru(t,g),y.hashFn,y.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(bc(e),null):u.forEach(f=>{const p=t.queryToTagMap.get(Em(f));t.listenProvider_.stopListening(bc(f),p)}))}GW(t,u)}return l}function yR(t,e,n,r){const s=iw(t,r);if(s!=null){const i=ow(s),o=i.path,l=i.queryId,c=Kt(o,e),u=new jo(Zy(l),c,n);return aw(t,o,u)}else return[]}function zW(t,e,n,r){const s=iw(t,r);if(s){const i=ow(s),o=i.path,l=i.queryId,c=Kt(o,e),u=Fe.fromObject(n),d=new el(Zy(l),c,u);return aw(t,o,d)}else return[]}function hv(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const w=Kt(f,s);i=i||fi(p,w),o=o||_i(p)});let l=t.syncPointTree_.get(s);l?(o=o||_i(l),i=i||fi(l,Te())):(l=new fR,t.syncPointTree_=t.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=oe.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,w)=>{const x=fi(w,Te());x&&(i=i.updateImmediateChild(p,x))}));const u=vR(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=Em(e);X(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=qW();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const d=Cm(t.pendingWriteTree_,s);let h=MW(l,e,n,d,i,c);if(!u&&!o&&!r){const f=gR(l,e);h=h.concat(KW(t,e,f))}return h}function sw(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=Kt(o,e),u=fi(l,c);if(u)return u});return aR(s,e,i,n,!0)}function WW(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Kt(u,n);r=r||fi(d,h)});let s=t.syncPointTree_.get(n);s?r=r||fi(s,Te()):(s=new fR,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new bi(r,!0,!1):null,l=Cm(t.pendingWriteTree_,e._path),c=mR(s,e,l,i?o.getNode():oe.EMPTY_NODE,i);return kW(c)}function _l(t,e){return wR(e,t.syncPointTree_,null,Cm(t.pendingWriteTree_,Te()))}function wR(t,e,n,r){if(we(t.path))return bR(t,e,n,r);{const s=e.get(Te());n==null&&s!=null&&(n=fi(s,Te()));let i=[];const o=xe(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const u=n?n.getImmediateChild(o):null,d=lR(r,o);i=i.concat(wR(l,c,u,d))}return s&&(i=i.concat(rw(s,t,r,n))),i}}function bR(t,e,n,r){const s=e.get(Te());n==null&&s!=null&&(n=fi(s,Te()));let i=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,u=lR(r,o),d=t.operationForChild(o);d&&(i=i.concat(bR(d,l,c,u)))}),s&&(i=i.concat(rw(s,t,r,n))),i}function _R(t,e){const n=e.query,r=ru(t,n);return{hashFn:()=>(EW(e)||oe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?BW(t,n._path,r):UW(t,n._path);{const i=UB(s,n);return xf(t,n,null,i)}}}}function ru(t,e){const n=Em(e);return t.queryToTagMap.get(n)}function Em(t){return t._path.toString()+"$"+t._queryIdentifier}function iw(t,e){return t.tagToQueryMap.get(e)}function ow(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Me(t.substr(0,e))}}function aw(t,e,n){const r=t.syncPointTree_.get(e);X(r,"Missing sync point for query tag that we're tracking");const s=Cm(t.pendingWriteTree_,e);return rw(r,n,s,null)}function HW(t){return t.fold((e,n,r)=>{if(n&&_i(n))return[Sm(n)];{let s=[];return n&&(s=pR(n)),Pt(r,(i,o)=>{s=s.concat(o)}),s}})}function bc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(LW())(t._repo,t._path):t}function GW(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Em(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function qW(){return FW++}function KW(t,e,n){const r=e._path,s=ru(t,e),i=_R(t,n),o=t.listenProvider_.startListening(bc(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)X(!_i(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!we(u)&&d&&_i(d))return[Sm(d).query];{let f=[];return d&&(f=f.concat(pR(d).map(p=>p.query))),Pt(h,(p,w)=>{f=f.concat(w)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(bc(d),ru(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new lw(n)}node(){return this.node_}}class cw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=nt(this.path_,e);return new cw(this.syncTree_,n)}node(){return sw(this.syncTree_,this.path_)}}const YW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},AN=function(t,e,n){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return QW(t[".sv"],e,n);if(typeof t[".sv"]=="object")return XW(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},QW=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:X(!1,"Unexpected server value: "+t)}},XW=function(t,e,n){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&X(!1,"Unexpected increment value: "+r);const s=e.node();if(X(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},NR=function(t,e,n,r){return uw(e,new cw(n,t),r)},CR=function(t,e,n){return uw(t,new lw(e),n)};function uw(t,e,n){const r=t.getPriority().val(),s=AN(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=AN(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new yt(l,ht(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new yt(s))),o.forEachChild(rt,(l,c)=>{const u=uw(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function hw(t,e){let n=e instanceof Me?e:new Me(e),r=t,s=xe(n);for(;s!==null;){const i=Qa(r.node.children,s)||{children:{},childCount:0};r=new dw(s,r,i),n=$e(n),s=xe(n)}return r}function Nl(t){return t.node.value}function SR(t,e){t.node.value=e,fv(t)}function ER(t){return t.node.childCount>0}function JW(t){return Nl(t)===void 0&&!ER(t)}function km(t,e){Pt(t.node.children,(n,r)=>{e(new dw(n,t,r))})}function kR(t,e,n,r){n&&!r&&e(t),km(t,s=>{kR(s,e,!0,r)}),n&&r&&e(t)}function ZW(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Du(t){return new Me(t.parent===null?t.name:Du(t.parent)+"/"+t.name)}function fv(t){t.parent!==null&&e9(t.parent,t.name,t)}function e9(t,e,n){const r=JW(n),s=Br(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,fv(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,fv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=/[\[\].#$\/\u0000-\u001F\u007F]/,n9=/[\[\].#$\u0000-\u001F\u007F]/,og=10*1024*1024,fw=function(t){return typeof t=="string"&&t.length!==0&&!t9.test(t)},TR=function(t){return typeof t=="string"&&t.length!==0&&!n9.test(t)},r9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),TR(t)},s9=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Vy(t)||t&&typeof t=="object"&&Br(t,".sv")},i9=function(t,e,n,r){Tm(gm(t,"value"),e,n)},Tm=function(t,e,n){const r=n instanceof Me?new bz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Gi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Gi(r)+" with contents = "+e.toString());if(Vy(e))throw new Error(t+"contains "+e.toString()+" "+Gi(r));if(typeof e=="string"&&e.length>og/3&&vm(e)>og)throw new Error(t+"contains a string greater than "+og+" utf8 bytes "+Gi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Pt(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!fw(o)))throw new Error(t+" contains an invalid key ("+o+") "+Gi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_z(r,o),Tm(t,l,r),Nz(r)}),s&&i)throw new Error(t+' contains ".value" child '+Gi(r)+" in addition to actual children.")}},o9=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Jc(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!fw(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(wz);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Dn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},a9=function(t,e,n,r){const s=gm(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Pt(e,(o,l)=>{const c=new Me(o);if(Tm(s,l,nt(n,c)),Hy(c)===".priority"&&!s9(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),o9(s,i)},jR=function(t,e,n,r){if(!TR(n))throw new Error(gm(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},l9=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jR(t,e,n)},RR=function(t,e){if(xe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},c9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!fw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!r9(n))throw new Error(gm(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jm(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Gy(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function IR(t,e,n){jm(t,n),PR(t,r=>Gy(r,e))}function Un(t,e,n){jm(t,n),PR(t,r=>Dn(r,e)||Dn(e,r))}function PR(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(d9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function d9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();vc&&jt("event: "+n.toString()),bl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="repo_interrupt",f9=25;class m9{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new u9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uf(),this.transactionQueueTree_=new dw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function p9(t,e,n){if(t.stats_=zy(t.repoInfo_),t.forceRestClient_||HB())t.server_=new cf(t.repoInfo_,(r,s,i,o)=>{MN(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>DN(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new us(t.repoInfo_,e,(r,s,i,o)=>{MN(t,r,s,i,o)},r=>{DN(t,r)},r=>{v9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=QB(t.repoInfo_,()=>new Yz(t.stats_,t.server_)),t.infoData_=new Wz,t.infoSyncTree_=new PN({startListening:(r,s,i,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=Mu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),mw(t,"connected",!1),t.serverSyncTree_=new PN({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,c)=>{const u=o(l,c);Un(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function g9(t){const n=t.infoData_.getNode(new Me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Rm(t){return YW({timestamp:g9(t)})}function MN(t,e,n,r,s){t.dataUpdateCount++;const i=new Me(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Xh(n,u=>ht(u));o=zW(t.serverSyncTree_,i,c,s)}else{const c=ht(n);o=yR(t.serverSyncTree_,i,c,s)}else if(r){const c=Xh(n,u=>ht(u));o=VW(t.serverSyncTree_,i,c)}else{const c=ht(n);o=Mu(t.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=nl(t,i)),Un(t.eventQueue_,l,o)}function DN(t,e){mw(t,"connected",e),e===!1&&b9(t)}function v9(t,e){Pt(e,(n,r)=>{mw(t,n,r)})}function mw(t,e,n){const r=new Me("/.info/"+e),s=ht(n);t.infoData_.updateSnapshot(r,s);const i=Mu(t.infoSyncTree_,r,s);Un(t.eventQueue_,r,i)}function pw(t){return t.nextWriteId_++}function x9(t,e,n){const r=WW(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ht(s).withIndex(e._queryParams.getIndex());hv(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Mu(t.serverSyncTree_,e._path,i);else{const l=ru(t.serverSyncTree_,e);o=yR(t.serverSyncTree_,e._path,i,l)}return Un(t.eventQueue_,e._path,o),xf(t.serverSyncTree_,e,n,null,!0),i},s=>(Ou(t,"get for query "+mt(e)+" failed: "+s),Promise.reject(new Error(s))))}function y9(t,e,n,r,s){Ou(t,"set",{path:e.toString(),value:n,priority:r});const i=Rm(t),o=ht(n,r),l=sw(t.serverSyncTree_,e),c=CR(o,l,i),u=pw(t),d=xR(t.serverSyncTree_,e,c,u,!0);jm(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const w=f==="ok";w||Xt("set at "+e+" failed: "+f);const x=Js(t.serverSyncTree_,u,!w);Un(t.eventQueue_,e,x),mv(t,s,f,p)});const h=vw(t,e);nl(t,h),Un(t.eventQueue_,h,[])}function w9(t,e,n,r){Ou(t,"update",{path:e.toString(),value:n});let s=!0;const i=Rm(t),o={};if(Pt(n,(l,c)=>{s=!1,o[l]=NR(nt(e,l),ht(c),t.serverSyncTree_,i)}),s)jt("update() called with empty data.  Don't do anything."),mv(t,r,"ok",void 0);else{const l=pw(t),c=$W(t.serverSyncTree_,e,o,l);jm(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||Xt("update at "+e+" failed: "+u);const f=Js(t.serverSyncTree_,l,!h),p=f.length>0?nl(t,e):e;Un(t.eventQueue_,p,f),mv(t,r,u,d)}),Pt(n,u=>{const d=vw(t,nt(e,u));nl(t,d)}),Un(t.eventQueue_,e,[])}}function b9(t){Ou(t,"onDisconnectEvents");const e=Rm(t),n=uf();ov(t.onDisconnect_,Te(),(s,i)=>{const o=NR(s,i,t.serverSyncTree_,e);rR(n,s,o)});let r=[];ov(n,Te(),(s,i)=>{r=r.concat(Mu(t.serverSyncTree_,s,i));const o=vw(t,s);nl(t,o)}),t.onDisconnect_=uf(),Un(t.eventQueue_,Te(),r)}function _9(t,e,n){let r;xe(e._path)===".info"?r=hv(t.infoSyncTree_,e,n):r=hv(t.serverSyncTree_,e,n),IR(t.eventQueue_,e._path,r)}function N9(t,e,n){let r;xe(e._path)===".info"?r=xf(t.infoSyncTree_,e,n):r=xf(t.serverSyncTree_,e,n),IR(t.eventQueue_,e._path,r)}function C9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(h9)}function Ou(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),jt(n,...e)}function mv(t,e,n,r){e&&bl(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function AR(t,e,n){return sw(t.serverSyncTree_,e,n)||oe.EMPTY_NODE}function gw(t,e=t.transactionQueueTree_){if(e||Im(t,e),Nl(e)){const n=DR(t,e);X(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&S9(t,Du(e),n)}else ER(e)&&km(e,n=>{gw(t,n)})}function S9(t,e,n){const r=n.map(u=>u.currentWriteId),s=AR(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];X(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Kt(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{Ou(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Js(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Im(t,hw(t.transactionQueueTree_,e)),gw(t,t.transactionQueueTree_),Un(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)bl(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Xt("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}nl(t,e)}},o)}function nl(t,e){const n=MR(t,e),r=Du(n),s=DR(t,n);return E9(t,s,r),r}function E9(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Kt(n,c.path);let d=!1,h;if(X(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Js(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=f9)d=!0,h="maxretry",s=s.concat(Js(t.serverSyncTree_,c.currentWriteId,!0));else{const f=AR(t,c.path,o);c.currentInputSnapshot=f;const p=e[l].update(f.val());if(p!==void 0){Tm("transaction failed: Data returned ",p,c.path);let w=ht(p);typeof p=="object"&&p!=null&&Br(p,".priority")||(w=w.updatePriority(f.getPriority()));const g=c.currentWriteId,y=Rm(t),v=CR(w,f,y);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=v,c.currentWriteId=pw(t),o.splice(o.indexOf(g),1),s=s.concat(xR(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally)),s=s.concat(Js(t.serverSyncTree_,g,!0))}else d=!0,h="nodata",s=s.concat(Js(t.serverSyncTree_,c.currentWriteId,!0))}Un(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(h),!1,null))))}Im(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)bl(r[l]);gw(t,t.transactionQueueTree_)}function MR(t,e){let n,r=t.transactionQueueTree_;for(n=xe(e);n!==null&&Nl(r)===void 0;)r=hw(r,n),e=$e(e),n=xe(e);return r}function DR(t,e){const n=[];return OR(t,e,n),n.sort((r,s)=>r.order-s.order),n}function OR(t,e,n){const r=Nl(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);km(e,s=>{OR(t,s,n)})}function Im(t,e){const n=Nl(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,SR(e,n.length>0?n:void 0)}km(e,r=>{Im(t,r)})}function vw(t,e){const n=Du(MR(t,e)),r=hw(t.transactionQueueTree_,e);return ZW(r,s=>{ag(t,s)}),ag(t,r),kR(r,s=>{ag(t,s)}),n}function ag(t,e){const n=Nl(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(X(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(X(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Js(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?SR(e,void 0):n.length=i+1,Un(t.eventQueue_,Du(e),s);for(let o=0;o<r.length;o++)bl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function T9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xt(`Invalid query segment '${n}' in query '${t}'`)}return e}const ON=function(t,e){const n=j9(t),r=n.namespace;n.domain==="firebase.com"&&ws(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ws("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||OB();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new V2(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Me(n.pathString)}},j9=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=k9(t.substring(d,h)));const f=T9(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class I9{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return we(this._path)?null:Hy(this._path)}get ref(){return new Cs(this._repo,this._path)}get _queryIdentifier(){const e=_N(this._queryParams),n=Uy(e);return n==="{}"?"default":n}get _queryObject(){return _N(this._queryParams)}isEqual(e){if(e=mn(e),!(e instanceof xw))return!1;const n=this._repo===e._repo,r=Gy(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+yz(this._path)}}class Cs extends xw{constructor(e,n){super(e,n,new Qy,!1)}get parent(){const e=Y2(this._path);return e===null?null:new Cs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class su{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Me(e),r=pv(this.ref,e);return new su(this._node.getChild(n),r,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new su(s,pv(this.ref,r),rt)))}hasChild(e){const n=new Me(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function He(t,e){return t=mn(t),t._checkNotDeleted("ref"),e!==void 0?pv(t._root,e):t._root}function pv(t,e){return t=mn(t),xe(t._path)===null?l9("child","path",e):jR("child","path",e),new Cs(t._repo,nt(t._path,e))}function Kl(t){return RR("remove",t._path),la(t,null)}function la(t,e){t=mn(t),RR("set",t._path),i9("set",e,t._path);const n=new Eu;return y9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function LN(t,e){a9("update",e,t._path);const n=new Eu;return w9(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ki(t){t=mn(t);const e=new LR(()=>{}),n=new Pm(e);return x9(t._repo,t,n).then(r=>new su(r,new Cs(t._repo,t._path),t._queryParams.getIndex()))}class Pm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new R9("value",this,new su(e.snapshotNode,new Cs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new I9(this,e,n):null}matches(e){return e instanceof Pm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function P9(t,e,n,r,s){const i=new LR(n,void 0),o=new Pm(i);return _9(t._repo,t,o),()=>N9(t._repo,t,o)}function qo(t,e,n,r){return P9(t,"value",e)}IW(Cs);OW(Cs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="FIREBASE_DATABASE_EMULATOR_HOST",gv={};let M9=!1;function D9(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=vl(i);t.repoInfo_=new V2(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function O9(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||ws("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ON(i,s),l=o.repoInfo,c;typeof process<"u"&&sN&&(c=sN[A9]),c?(i=`http://${c}?ns=${l.namespace}`,o=ON(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new qB(t.name,t.options,e);c9("Invalid Firebase Database URL",o),we(o.path)||ws("Database URL must point to the root of a Firebase Database (not including a child path).");const d=F9(l,t,u,new GB(t,n));return new $9(d,t)}function L9(t,e){const n=gv[e];(!n||n[t.key]!==t)&&ws(`Database ${e}(${t.repoInfo_}) has already been deleted.`),C9(t),delete n[t.key]}function F9(t,e,n,r){let s=gv[e.name];s||(s={},gv[e.name]=s);let i=s[t.toURLString()];return i&&ws("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new m9(t,M9,n,r),s[t.toURLString()]=i,i}class $9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(p9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cs(this._repo,Te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(L9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ws("Cannot call "+e+" on a deleted database.")}}function V9(t=Hj(),e){const n=Py(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=nV("database");r&&U9(n,...r)}return n}function U9(t,e,n,r={}){t=mn(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&So(r,i.repoInfo_.emulatorOptions))return;ws("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ws('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new th(th.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:rV(r.mockUserToken,t.app.options.projectId);o=new th(l)}vl(e)&&(Lj(e),Fj("Database",!0)),D9(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){RB(yl),Xa(new Eo("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return O9(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),ui(iN,oN,t),ui(iN,oN,"esm2020")}us.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};us.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};B9();var z9="firebase",W9="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(z9,W9,"app");const H9={apiKey:"AIzaSyAYzzwkqZjf5iWN6Pc4wSz6MYJAzAFJ0wA",authDomain:"gmae111.firebaseapp.com",projectId:"gmae111",storageBucket:"gmae111.firebasestorage.app",messagingSenderId:"223415325596",appId:"1:223415325596:web:272fd4d7aff74d33b3ee59",measurementId:"G-4TEGC1REF4",databaseURL:"https://gmae111-default-rtdb.asia-southeast1.firebasedatabase.app"},FR=Wj(H9),lg=TB(FR),Ge=V9(FR),$R=m.createContext(void 0),zr=()=>{const t=m.useContext($R);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},G9=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(null),[i,o]=m.useState(!0);m.useEffect(()=>{const h=gU(lg,async f=>{if(n(f),f){const p=He(Ge,`users/${f.uid}`),w=await Ki(p);if(w.exists())s(w.val().displayName);else{const g=`Player_${f.uid.slice(0,6)}`;await la(p,{id:f.uid,displayName:g,createdAt:Date.now(),friends:{},friendRequests:{}}),s(g)}const x=He(Ge,`users/${f.uid}/displayName`);qo(x,g=>{g.exists()&&s(g.val())})}else s(null);o(!1)});return()=>h()},[]);const l=async()=>{try{await uU(lg)}catch(h){throw console.error("Login error:",h),h}},c=async()=>{try{await vU(lg)}catch(h){throw console.error("Logout error:",h),h}},u=async h=>{if(!e)return!1;const f=h.trim();if(f.length<2||f.length>20)return!1;try{const p=He(Ge,`users/${e.uid}`);await LN(p,{displayName:f});const w=He(Ge,`users/${e.uid}/friends`),x=await Ki(w);if(x.exists()){const g=Object.keys(x.val()),y={};g.forEach(v=>{y[`users/${v}/friends/${e.uid}/displayName`]=f}),Object.keys(y).length>0&&await LN(He(Ge),y)}return!0}catch(p){return console.error("Update displayName error:",p),!1}},d={user:e,userId:(e==null?void 0:e.uid)||null,displayName:r,loading:i,login:l,logout:c,updateDisplayName:u};return a.jsx($R.Provider,{value:d,children:t})},yw=m.createContext({});function ww(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const bw=typeof window<"u",VR=bw?m.useLayoutEffect:m.useEffect,Am=m.createContext(null);function _w(t,e){t.indexOf(e)===-1&&t.push(e)}function Nw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bs=(t,e,n)=>n>e?e:n<t?t:n;let yf=()=>{};const _s={},UR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function BR(t){return typeof t=="object"&&t!==null}const zR=t=>/^0[^.\s]+$/u.test(t);function Cw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fn=t=>t,q9=(t,e)=>n=>e(t(n)),Lu=(...t)=>t.reduce(q9),iu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Sw{constructor(){this.subscriptions=[]}add(e){return _w(this.subscriptions,e),()=>Nw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Or=t=>t*1e3,On=t=>t/1e3;function WR(t,e){return e?t*(1e3/e):0}const HR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,K9=1e-7,Y9=12;function Q9(t,e,n,r,s){let i,o,l=0;do o=e+(n-e)/2,i=HR(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>K9&&++l<Y9);return o}function Fu(t,e,n,r){if(t===e&&n===r)return Fn;const s=i=>Q9(i,0,1,t,n);return i=>i===0||i===1?i:HR(s(i),e,r)}const GR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qR=t=>e=>1-t(1-e),KR=Fu(.33,1.53,.69,.99),Ew=qR(KR),YR=GR(Ew),QR=t=>(t*=2)<1?.5*Ew(t):.5*(2-Math.pow(2,-10*(t-1))),kw=t=>1-Math.sin(Math.acos(t)),XR=qR(kw),JR=GR(kw),X9=Fu(.42,0,1,1),J9=Fu(0,0,.58,1),ZR=Fu(.42,0,.58,1),Z9=t=>Array.isArray(t)&&typeof t[0]!="number",eI=t=>Array.isArray(t)&&typeof t[0]=="number",FN={linear:Fn,easeIn:X9,easeInOut:ZR,easeOut:J9,circIn:kw,circInOut:JR,circOut:XR,backIn:Ew,backInOut:YR,backOut:KR,anticipate:QR},e7=t=>typeof t=="string",$N=t=>{if(eI(t)){yf(t.length===4);const[e,n,r,s]=t;return Fu(e,n,r,s)}else if(e7(t))return yf(FN[t]!==void 0),FN[t];return t},_d=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],VN={value:null,addProjectionMetrics:null};function t7(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,p=!1)=>{const x=p&&s?n:r;return f&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&VN.value&&VN.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const n7=40;function tI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=_d.reduce((_,C)=>(_[C]=t7(i,e?C:void 0),_),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:w}=o,x=()=>{const _=_s.useManualTiming?s.timestamp:performance.now();n=!1,_s.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,n7),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(x))},g=()=>{n=!0,r=!0,s.isProcessing||t(x)};return{schedule:_d.reduce((_,C)=>{const b=o[C];return _[C]=(N,S=!1,E=!1)=>(n||g(),b.schedule(N,S,E)),_},{}),cancel:_=>{for(let C=0;C<_d.length;C++)o[_d[C]].cancel(_)},state:s,steps:o}}const{schedule:Ke,cancel:Ni,state:kt,steps:cg}=tI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0);let nh;function r7(){nh=void 0}const an={now:()=>(nh===void 0&&an.set(kt.isProcessing||_s.useManualTiming?kt.timestamp:performance.now()),nh),set:t=>{nh=t,queueMicrotask(r7)}},nI=t=>e=>typeof e=="string"&&e.startsWith(t),rI=nI("--"),s7=nI("var(--"),Tw=t=>s7(t)?i7.test(t.split("/*")[0].trim()):!1,i7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ou={...Cl,transform:t=>bs(0,1,t)},Nd={...Cl,default:1},_c=t=>Math.round(t*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o7(t){return t==null}const a7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rw=(t,e)=>n=>!!(typeof n=="string"&&a7.test(n)&&n.startsWith(t)||e&&!o7(n)&&Object.prototype.hasOwnProperty.call(n,e)),sI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,l]=r.match(jw);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},l7=t=>bs(0,255,t),ug={...Cl,transform:t=>Math.round(l7(t))},Zi={test:Rw("rgb","red"),parse:sI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ug.transform(t)+", "+ug.transform(e)+", "+ug.transform(n)+", "+_c(ou.transform(r))+")"};function c7(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const vv={test:Rw("#"),parse:c7,transform:Zi.transform},$u=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Is=$u("deg"),Lr=$u("%"),ae=$u("px"),u7=$u("vh"),d7=$u("vw"),UN={...Lr,parse:t=>Lr.parse(t)/100,transform:t=>Lr.transform(t*100)},ca={test:Rw("hsl","hue"),parse:sI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Lr.transform(_c(e))+", "+Lr.transform(_c(n))+", "+_c(ou.transform(r))+")"},at={test:t=>Zi.test(t)||vv.test(t)||ca.test(t),parse:t=>Zi.test(t)?Zi.parse(t):ca.test(t)?ca.parse(t):vv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zi.transform(t):ca.transform(t),getAnimatableNone:t=>{const e=at.parse(t);return e.alpha=0,at.transform(e)}},h7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f7(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jw))==null?void 0:e.length)||0)+(((n=t.match(h7))==null?void 0:n.length)||0)>0}const iI="number",oI="color",m7="var",p7="var(",BN="${}",g7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function au(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(g7,c=>(at.test(c)?(r.color.push(i),s.push(oI),n.push(at.parse(c))):c.startsWith(p7)?(r.var.push(i),s.push(m7),n.push(c)):(r.number.push(i),s.push(iI),n.push(parseFloat(c))),++i,BN)).split(BN);return{values:n,split:l,indexes:r,types:s}}function aI(t){return au(t).values}function lI(t){const{split:e,types:n}=au(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const l=n[o];l===iI?i+=_c(s[o]):l===oI?i+=at.transform(s[o]):i+=s[o]}return i}}const v7=t=>typeof t=="number"?0:at.test(t)?at.getAnimatableNone(t):t;function x7(t){const e=aI(t);return lI(t)(e.map(v7))}const Ci={test:f7,parse:aI,createTransformer:lI,getAnimatableNone:x7};function dg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function y7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=dg(c,l,t+1/3),i=dg(c,l,t),o=dg(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function wf(t,e){return n=>n>0?e:t}const Qe=(t,e,n)=>t+(e-t)*n,hg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},w7=[vv,Zi,ca],b7=t=>w7.find(e=>e.test(t));function zN(t){const e=b7(t);if(!e)return!1;let n=e.parse(t);return e===ca&&(n=y7(n)),n}const WN=(t,e)=>{const n=zN(t),r=zN(e);if(!n||!r)return wf(t,e);const s={...n};return i=>(s.red=hg(n.red,r.red,i),s.green=hg(n.green,r.green,i),s.blue=hg(n.blue,r.blue,i),s.alpha=Qe(n.alpha,r.alpha,i),Zi.transform(s))},xv=new Set(["none","hidden"]);function _7(t,e){return xv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function N7(t,e){return n=>Qe(t,e,n)}function Iw(t){return typeof t=="number"?N7:typeof t=="string"?Tw(t)?wf:at.test(t)?WN:E7:Array.isArray(t)?cI:typeof t=="object"?at.test(t)?WN:C7:wf}function cI(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Iw(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function C7(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Iw(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function S7(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],l=t.values[o]??0;n[s]=l,r[i]++}return n}const E7=(t,e)=>{const n=Ci.createTransformer(e),r=au(t),s=au(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?xv.has(t)&&!s.values.length||xv.has(e)&&!r.values.length?_7(t,e):Lu(cI(S7(r,s),s.values),n):wf(t,e)};function uI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Qe(t,e,n):Iw(t)(t,e)}const k7=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ke.update(e,n),stop:()=>Ni(e),now:()=>kt.isProcessing?kt.timestamp:an.now()}},dI=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},bf=2e4;function Pw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<bf;)e+=n,r=t.next(e);return e>=bf?1/0:e}function T7(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Pw(r),bf);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:On(s)}}const j7=5;function hI(t,e,n){const r=Math.max(e-j7,0);return WR(n-t(r),e-r)}const et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fg=.001;function R7({duration:t=et.duration,bounce:e=et.bounce,velocity:n=et.velocity,mass:r=et.mass}){let s,i,o=1-e;o=bs(et.minDamping,et.maxDamping,o),t=bs(et.minDuration,et.maxDuration,On(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,p=yv(u,o),w=Math.exp(-h);return fg-f/p*w},i=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,w=Math.exp(-h),x=yv(Math.pow(u,2),o);return(-s(u)+fg>0?-1:1)*((f-p)*w)/x}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-fg+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=P7(s,i,l);if(t=Or(t),isNaN(c))return{stiffness:et.stiffness,damping:et.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const I7=12;function P7(t,e,n){let r=n;for(let s=1;s<I7;s++)r=r-t(r)/e(r);return r}function yv(t,e){return t*Math.sqrt(1-e*e)}const A7=["duration","bounce"],M7=["stiffness","damping","mass"];function HN(t,e){return e.some(n=>t[n]!==void 0)}function D7(t){let e={velocity:et.velocity,stiffness:et.stiffness,damping:et.damping,mass:et.mass,isResolvedFromDuration:!1,...t};if(!HN(t,M7)&&HN(t,A7))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*bs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:et.mass,stiffness:s,damping:i}}else{const n=R7(t);e={...e,...n,mass:et.mass},e.isResolvedFromDuration=!0}return e}function _f(t=et.visualDuration,e=et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=D7({...n,velocity:-On(n.velocity||0)}),w=f||0,x=u/(2*Math.sqrt(c*d)),g=o-i,y=On(Math.sqrt(c/d)),v=Math.abs(g)<5;r||(r=v?et.restSpeed.granular:et.restSpeed.default),s||(s=v?et.restDelta.granular:et.restDelta.default);let _;if(x<1){const b=yv(y,x);_=N=>{const S=Math.exp(-x*y*N);return o-S*((w+x*y*g)/b*Math.sin(b*N)+g*Math.cos(b*N))}}else if(x===1)_=b=>o-Math.exp(-y*b)*(g+(w+y*g)*b);else{const b=y*Math.sqrt(x*x-1);_=N=>{const S=Math.exp(-x*y*N),E=Math.min(b*N,300);return o-S*((w+x*y*g)*Math.sinh(E)+b*g*Math.cosh(E))/b}}const C={calculatedDuration:p&&h||null,next:b=>{const N=_(b);if(p)l.done=b>=h;else{let S=b===0?w:0;x<1&&(S=b===0?Or(w):hI(_,b,N));const E=Math.abs(S)<=r,k=Math.abs(o-N)<=s;l.done=E&&k}return l.value=l.done?o:N,l},toString:()=>{const b=Math.min(Pw(C),bf),N=dI(S=>C.next(b*S).value,b,30);return b+"ms "+N},toTransition:()=>{}};return C}_f.applyToOptions=t=>{const e=T7(t,100,_f);return t.ease=e.ease,t.duration=Or(e.duration),t.type="keyframes",t};function wv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=E=>l!==void 0&&E<l||c!==void 0&&E>c,w=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let x=n*e;const g=h+x,y=o===void 0?g:o(g);y!==g&&(x=y-h);const v=E=>-x*Math.exp(-E/r),_=E=>y+v(E),C=E=>{const k=v(E),T=_(E);f.done=Math.abs(k)<=u,f.value=f.done?y:T};let b,N;const S=E=>{p(f.value)&&(b=E,N=_f({keyframes:[f.value,w(f.value)],velocity:hI(_,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:E=>{let k=!1;return!N&&b===void 0&&(k=!0,C(E),S(E)),b!==void 0&&E>=b?N.next(E-b):(!k&&C(E),f)}}}function O7(t,e,n){const r=[],s=n||_s.mix||uI,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Fn:e;l=Lu(c,l)}r.push(l)}return r}function L7(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(yf(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=O7(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=iu(t[h],t[h+1],d);return l[h](f)};return n?d=>u(bs(t[0],t[i-1],d)):u}function F7(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=iu(0,e,r);t.push(Qe(n,1,s))}}function $7(t){const e=[0];return F7(e,t.length-1),e}function V7(t,e){return t.map(n=>n*e)}function U7(t,e){return t.map(()=>e||ZR).splice(0,t.length-1)}function Nc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Z9(r)?r.map($N):$N(r),i={done:!1,value:e[0]},o=V7(n&&n.length===e.length?n:$7(e),t),l=L7(o,e,{ease:Array.isArray(s)?s:U7(e,s)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const B7=t=>t!==null;function Aw(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(B7),l=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const z7={decay:wv,inertia:wv,tween:Nc,keyframes:Nc,spring:_f};function fI(t){typeof t.type=="string"&&(t.type=z7[t.type])}class Mw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const W7=t=>t/100;class Dw extends Mw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==an.now()&&this.tick(an.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;fI(e);const{type:n=Nc,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=n||Nc;c!==Nc&&typeof l[0]!="number"&&(this.mixKeyframes=Lu(W7,uI(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Pw(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:w,onUpdate:x,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,C=r;if(h){const E=Math.min(this.currentTime,s)/l;let k=Math.floor(E),T=E%1;!T&&E>=1&&(T=1),T===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(T=1-T,p&&(T-=p/l)):f==="mirror"&&(C=o)),_=bs(0,1,T)*l}const b=v?{done:!1,value:d[0]}:C.next(_);i&&(b.value=i(b.value));let{done:N}=b;!v&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return S&&w!==wv&&(b.value=Aw(d,this.options,g,this.speed)),x&&x(b.value),S&&this.finish(),b}then(e,n){return this.finished.then(e,n)}get duration(){return On(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+On(e)}get time(){return On(this.currentTime)}set time(e){var n;e=Or(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(an.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=On(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=k7,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(an.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function H7(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const eo=t=>t*180/Math.PI,bv=t=>{const e=eo(Math.atan2(t[1],t[0]));return _v(e)},G7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:bv,rotateZ:bv,skewX:t=>eo(Math.atan(t[1])),skewY:t=>eo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_v=t=>(t=t%360,t<0&&(t+=360),t),GN=bv,qN=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),KN=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),q7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:qN,scaleY:KN,scale:t=>(qN(t)+KN(t))/2,rotateX:t=>_v(eo(Math.atan2(t[6],t[5]))),rotateY:t=>_v(eo(Math.atan2(-t[2],t[0]))),rotateZ:GN,rotate:GN,skewX:t=>eo(Math.atan(t[4])),skewY:t=>eo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nv(t){return t.includes("scale")?1:0}function Cv(t,e){if(!t||t==="none")return Nv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=q7,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=G7,s=l}if(!s)return Nv(e);const i=r[e],o=s[1].split(",").map(Y7);return typeof i=="function"?i(o):o[i]}const K7=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Cv(n,e)};function Y7(t){return parseFloat(t.trim())}const Sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],El=new Set(Sl),YN=t=>t===Cl||t===ae,Q7=new Set(["x","y","z"]),X7=Sl.filter(t=>!Q7.has(t));function J7(t){const e=[];return X7.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const uo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cv(e,"x"),y:(t,{transform:e})=>Cv(e,"y")};uo.translateX=uo.x;uo.translateY=uo.y;const ho=new Set;let Sv=!1,Ev=!1,kv=!1;function mI(){if(Ev){const t=Array.from(ho).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=J7(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ev=!1,Sv=!1,ho.forEach(t=>t.complete(kv)),ho.clear()}function pI(){ho.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ev=!0)})}function Z7(){kv=!0,pI(),mI(),kv=!1}class Ow{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ho.add(this),Sv||(Sv=!0,Ke.read(pI),Ke.resolveKeyframes(mI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}H7(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ho.delete(this)}cancel(){this.state==="scheduled"&&(ho.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const eH=t=>t.startsWith("--");function tH(t,e,n){eH(e)?t.style.setProperty(e,n):t.style[e]=n}const nH=Cw(()=>window.ScrollTimeline!==void 0),rH={};function sH(t,e){const n=Cw(t);return()=>rH[e]??n()}const gI=sH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,QN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tc([0,.65,.55,1]),circOut:tc([.55,0,1,.45]),backIn:tc([.31,.01,.66,-.59]),backOut:tc([.33,1.53,.69,.99])};function vI(t,e){if(t)return typeof t=="function"?gI()?dI(t,e):"ease-out":eI(t)?tc(t):Array.isArray(t)?t.map(n=>vI(n,e)||QN.easeOut):QN[t]}function iH(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=vI(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function xI(t){return typeof t=="function"&&"applyToOptions"in t}function oH({type:t,...e}){return xI(t)&&gI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class aH extends Mw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,yf(typeof e.type!="string");const u=oH(e);this.animation=iH(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Aw(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):tH(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return On(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+On(e)}get time(){return On(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Or(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&nH()?(this.animation.timeline=e,Fn):n(this)}}const yI={anticipate:QR,backInOut:YR,circInOut:JR};function lH(t){return t in yI}function cH(t){typeof t.ease=="string"&&lH(t.ease)&&(t.ease=yI[t.ease])}const XN=10;class uH extends aH{constructor(e){cH(e),fI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Dw({...o,autoplay:!1}),c=Or(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-XN).value,l.sample(c).value,XN),l.stop()}}const JN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ci.test(t)||t==="0")&&!t.startsWith("url("));function dH(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function hH(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=JN(s,e),l=JN(i,e);return!o||!l?!1:dH(t)||(n==="spring"||xI(n))&&r}function Tv(t){t.duration=0,t.type="keyframes"}const fH=new Set(["opacity","clipPath","filter","transform"]),mH=Cw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function pH(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return mH()&&n&&fH.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const gH=40;class vH extends Mw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var w;super(),this.stop=()=>{var x,g;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=an.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||Ow;this.keyframeResolver=new p(l,(x,g,y)=>this.onKeyframesResolved(x,g,f,!y),c,u,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=an.now(),hH(e,i,o,l)||((_s.instantAnimations||!c)&&(d==null||d(Aw(e,r,n))),e[0]=e[e.length-1],Tv(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>gH?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&pH(f)?new uH({...f,element:f.motionValue.owner.current}):new Dw(f);p.finished.then(()=>this.notifyFinished()).catch(Fn),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Z7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const xH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yH(t){const e=xH.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function wI(t,e,n=1){const[r,s]=yH(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return UR(o)?parseFloat(o):o}return Tw(s)?wI(s,e,n+1):s}function Lw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const bI=new Set(["width","height","top","left","right","bottom",...Sl]),wH={test:t=>t==="auto",parse:t=>t},_I=t=>e=>e.test(t),NI=[Cl,ae,Lr,Is,d7,u7,wH],ZN=t=>NI.find(_I(t));function bH(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zR(t):!0}const _H=new Set(["brightness","contrast","saturate","opacity"]);function NH(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(jw)||[];if(!r)return t;const s=n.replace(r,"");let i=_H.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const CH=/\b([a-z-]*)\(.*?\)/gu,jv={...Ci,getAnimatableNone:t=>{const e=t.match(CH);return e?e.map(NH).join(" "):t}},eC={...Cl,transform:Math.round},SH={rotate:Is,rotateX:Is,rotateY:Is,rotateZ:Is,scale:Nd,scaleX:Nd,scaleY:Nd,scaleZ:Nd,skew:Is,skewX:Is,skewY:Is,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:ou,originX:UN,originY:UN,originZ:ae},Fw={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae,...SH,zIndex:eC,fillOpacity:ou,strokeOpacity:ou,numOctaves:eC},EH={...Fw,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:jv,WebkitFilter:jv},CI=t=>EH[t];function SI(t,e){let n=CI(t);return n!==jv&&(n=Ci),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kH=new Set(["auto","none","0"]);function TH(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!kH.has(i)&&au(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=SI(n,s)}class jH extends Ow{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Tw(u))){const d=wI(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!bI.has(r)||e.length!==2)return;const[s,i]=e,o=ZN(s),l=ZN(i);if(o!==l)if(YN(o)&&YN(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else uo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||bH(e[s]))&&r.push(s);r.length&&TH(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=uo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=uo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function RH(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const EI=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function kI(t){return BR(t)&&"offsetHeight"in t}const tC=30,IH=t=>!isNaN(parseFloat(t));class PH{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=an.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=an.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ke.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=an.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tC);return WR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rl(t,e){return new PH(t,e)}const{schedule:$w,cancel:ZZ}=tI(queueMicrotask,!1),Gn={x:!1,y:!1};function TI(){return Gn.x||Gn.y}function AH(t){return t==="x"||t==="y"?Gn[t]?null:(Gn[t]=!0,()=>{Gn[t]=!1}):Gn.x||Gn.y?null:(Gn.x=Gn.y=!0,()=>{Gn.x=Gn.y=!1})}function jI(t,e){const n=RH(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function nC(t){return!(t.pointerType==="touch"||TI())}function MH(t,e,n={}){const[r,s,i]=jI(t,n),o=l=>{if(!nC(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{nC(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const RI=(t,e)=>e?t===e?!0:RI(t,e.parentElement):!1,Vw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,DH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OH(t){return DH.has(t.tagName)||t.tabIndex!==-1}const rh=new WeakSet;function rC(t){return e=>{e.key==="Enter"&&t(e)}}function mg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const LH=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=rC(()=>{if(rh.has(n))return;mg(n,"down");const s=rC(()=>{mg(n,"up")}),i=()=>mg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function sC(t){return Vw(t)&&!TI()}function FH(t,e,n={}){const[r,s,i]=jI(t,n),o=l=>{const c=l.currentTarget;if(!sC(l))return;rh.add(c);const u=e(c,l),d=(p,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),rh.has(c)&&rh.delete(c),sC(p)&&typeof u=="function"&&u(p,{success:w})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||RI(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),kI(l)&&(l.addEventListener("focus",u=>LH(u,s)),!OH(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function II(t){return BR(t)&&"ownerSVGElement"in t}function $H(t){return II(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),VH=[...NI,at,Ci],UH=t=>VH.find(_I(t)),Uw=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function iC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function BH(...t){return e=>{let n=!1;const r=t.map(s=>{const i=iC(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():iC(t[s],null)}}}}function zH(...t){return m.useCallback(BH(...t),t)}class WH extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=kI(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function HH({children:t,isPresent:e,anchorX:n,root:r}){const s=m.useId(),i=m.useRef(null),o=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=m.useContext(Uw),c=zH(i,t==null?void 0:t.ref);return m.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:p}=o.current;if(e||!i.current||!u||!d)return;const w=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const x=document.createElement("style");l&&(x.nonce=l);const g=r??document.head;return g.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{g.contains(x)&&g.removeChild(x)}},[e]),a.jsx(WH,{isPresent:e,childRef:i,sizeRef:o,children:m.cloneElement(t,{ref:c})})}const GH=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=ww(qH),d=m.useId();let h=!0,f=m.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const w of u.values())if(!w)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),m.useMemo(()=>{u.forEach((p,w)=>u.set(w,!1))},[n]),m.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(HH,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(Am.Provider,{value:f,children:t})};function qH(){return new Map}function PI(t=!0){const e=m.useContext(Am);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=m.useId();m.useEffect(()=>{if(t)return s(i)},[t]);const o=m.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Cd=t=>t.key||"";function oC(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const sl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=PI(o),h=m.useMemo(()=>oC(t),[t]),f=o&&!u?[]:h.map(Cd),p=m.useRef(!0),w=m.useRef(h),x=ww(()=>new Map),[g,y]=m.useState(h),[v,_]=m.useState(h);VR(()=>{p.current=!1,w.current=h;for(let N=0;N<v.length;N++){const S=Cd(v[N]);f.includes(S)?x.delete(S):x.get(S)!==!0&&x.set(S,!1)}},[v,f.length,f.join("-")]);const C=[];if(h!==g){let N=[...h];for(let S=0;S<v.length;S++){const E=v[S],k=Cd(E);f.includes(k)||(N.splice(S,0,E),C.push(E))}return i==="wait"&&C.length&&(N=C),_(oC(N)),y(h),null}const{forceRender:b}=m.useContext(yw);return a.jsx(a.Fragment,{children:v.map(N=>{const S=Cd(N),E=o&&!u?!1:h===v||f.includes(S),k=()=>{if(x.has(S))x.set(S,!0);else return;let T=!0;x.forEach(R=>{R||(T=!1)}),T&&(b==null||b(),_(w.current),o&&(d==null||d()),r&&r())};return a.jsx(GH,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:k,anchorX:l,children:N},S)})})},AI=m.createContext({strict:!1}),aC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},il={};for(const t in aC)il[t]={isEnabled:e=>aC[t].some(n=>!!e[n])};function KH(t){for(const e in t)il[e]={...il[e],...t[e]}}const YH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YH.has(t)}let MI=t=>!Nf(t);function QH(t){typeof t=="function"&&(MI=e=>e.startsWith("on")?!Nf(e):t(e))}try{QH(require("@emotion/is-prop-valid").default)}catch{}function XH(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(MI(s)||n===!0&&Nf(s)||!e&&!Nf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Mm=m.createContext({});function Dm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function lu(t){return typeof t=="string"||Array.isArray(t)}const Bw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zw=["initial",...Bw];function Om(t){return Dm(t.animate)||zw.some(e=>lu(t[e]))}function DI(t){return!!(Om(t)||t.variants)}function JH(t,e){if(Om(t)){const{initial:n,animate:r}=t;return{initial:n===!1||lu(n)?n:void 0,animate:lu(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZH(t){const{initial:e,animate:n}=JH(t,m.useContext(Mm));return m.useMemo(()=>({initial:e,animate:n}),[lC(e),lC(n)])}function lC(t){return Array.isArray(t)?t.join(" "):t}function cC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Yl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=cC(t,e.target.x),r=cC(t,e.target.y);return`${n}% ${r}%`}},eG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ci.parse(t);if(s.length>5)return r;const i=Ci.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=Qe(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},Rv={borderRadius:{...Yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yl,borderTopRightRadius:Yl,borderBottomLeftRadius:Yl,borderBottomRightRadius:Yl,boxShadow:eG};function OI(t,{layout:e,layoutId:n}){return El.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Rv[t]||t==="opacity")}const tG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nG=Sl.length;function rG(t,e,n){let r="",s=!0;for(let i=0;i<nG;i++){const o=Sl[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=EI(l,Fw[o]);if(!c){s=!1;const d=tG[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Ww(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(El.has(c)){o=!0;continue}else if(rI(c)){s[c]=u;continue}else{const d=EI(u,Fw[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=rG(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const Hw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LI(t,e,n){for(const r in e)!Vt(e[r])&&!OI(r,n)&&(t[r]=e[r])}function sG({transformTemplate:t},e){return m.useMemo(()=>{const n=Hw();return Ww(n,e,t),Object.assign({},n.vars,n.style)},[e])}function iG(t,e){const n=t.style||{},r={};return LI(r,n,t),Object.assign(r,sG(t,e)),r}function oG(t,e){const n={},r=iG(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const aG={offset:"stroke-dashoffset",array:"stroke-dasharray"},lG={offset:"strokeDashoffset",array:"strokeDasharray"};function cG(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?aG:lG;t[i.offset]=ae.transform(-r);const o=ae.transform(e),l=ae.transform(n);t[i.array]=`${o} ${l}`}function FI(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Ww(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&cG(h,s,i,o,!1)}const $I=()=>({...Hw(),attrs:{}}),VI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uG(t,e,n,r){const s=m.useMemo(()=>{const i=$I();return FI(i,e,VI(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};LI(i,t.style,t),s.style={...i,...s.style}}return s}const dG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gw(t){return typeof t!="string"||t.includes("-")?!1:!!(dG.indexOf(t)>-1||/[A-Z]/u.test(t))}function hG(t,e,n,{latestValues:r},s,i=!1){const l=(Gw(t)?uG:oG)(e,r,s,t),c=XH(e,typeof t=="string",i),u=t!==m.Fragment?{...c,...l,ref:n}:{},{children:d}=e,h=m.useMemo(()=>Vt(d)?d.get():d,[d]);return m.createElement(t,{...u,children:h})}function uC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function qw(t,e,n,r){if(typeof e=="function"){const[s,i]=uC(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=uC(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function sh(t){return Vt(t)?t.get():t}function fG({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:mG(n,r,s,t),renderState:e()}}function mG(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=sh(i[f]);let{initial:o,animate:l}=t;const c=Om(t),u=DI(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Dm(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const w=qw(t,f[p]);if(w){const{transitionEnd:x,transition:g,...y}=w;for(const v in y){let _=y[v];if(Array.isArray(_)){const C=d?_.length-1:0;_=_[C]}_!==null&&(s[v]=_)}for(const v in x)s[v]=x[v]}}}return s}const UI=t=>(e,n)=>{const r=m.useContext(Mm),s=m.useContext(Am),i=()=>fG(t,e,r,s);return n?i():ww(i)};function Kw(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Vt(r[o])||e.style&&Vt(e.style[o])||OI(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const pG=UI({scrapeMotionValuesFromProps:Kw,createRenderState:Hw});function BI(t,e,n){const r=Kw(t,e,n);for(const s in t)if(Vt(t[s])||Vt(e[s])){const i=Sl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const gG=UI({scrapeMotionValuesFromProps:BI,createRenderState:$I}),vG=Symbol.for("motionComponentSymbol");function ua(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xG(t,e,n){return m.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ua(n)&&(n.current=r))},[e])}const Yw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yG="framerAppearId",zI="data-"+Yw(yG),WI=m.createContext({});function wG(t,e,n,r,s){var x,g;const{visualElement:i}=m.useContext(Mm),o=m.useContext(AI),l=m.useContext(Am),c=m.useContext(Uw).reducedMotion,u=m.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=m.useContext(WI);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&bG(u.current,n,s,h);const f=m.useRef(!1);m.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const p=n[zI],w=m.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,p)));return VR(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),w.current=!1),d.enteringChildren=void 0)}),d}function bG(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HI(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&ua(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function HI(t){if(t)return t.options.allowProjection!==!1?t.projection:HI(t.parent)}function pg(t,{forwardMotionProps:e=!1}={},n,r){n&&KH(n);const s=Gw(t)?gG:pG;function i(l,c){let u;const d={...m.useContext(Uw),...l,layoutId:_G(l)},{isStatic:h}=d,f=ZH(l),p=s(l,h);if(!h&&bw){NG();const w=CG(d);u=w.MeasureLayout,f.visualElement=wG(t,p,d,r,w.ProjectionNode)}return a.jsxs(Mm.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,hG(t,l,xG(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=m.forwardRef(i);return o[vG]=t,o}function _G({layoutId:t}){const e=m.useContext(yw).id;return e&&t!==void 0?e+"-"+t:t}function NG(t,e){m.useContext(AI).strict}function CG(t){const{drag:e,layout:n}=il;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function SG(t,e){if(typeof Proxy>"u")return pg;const n=new Map,r=(i,o)=>pg(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,pg(o,void 0,t,e)),n.get(o))})}function GI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function EG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function kG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function gg(t){return t===void 0||t===1}function Iv({scale:t,scaleX:e,scaleY:n}){return!gg(t)||!gg(e)||!gg(n)}function qi(t){return Iv(t)||qI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qI(t){return dC(t.x)||dC(t.y)}function dC(t){return t&&t!=="0%"}function Cf(t,e,n){const r=t-n,s=e*r;return n+s}function hC(t,e,n,r,s){return s!==void 0&&(t=Cf(t,s,r)),Cf(t,n,r)+e}function Pv(t,e=0,n=1,r,s){t.min=hC(t.min,e,n,r,s),t.max=hC(t.max,e,n,r,s)}function KI(t,{x:e,y:n}){Pv(t.x,e.translate,e.scale,e.originPoint),Pv(t.y,n.translate,n.scale,n.originPoint)}const fC=.999999999999,mC=1.0000000000001;function TG(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ha(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KI(t,o)),r&&qi(i.latestValues)&&ha(t,i.latestValues))}e.x<mC&&e.x>fC&&(e.x=1),e.y<mC&&e.y>fC&&(e.y=1)}function da(t,e){t.min=t.min+e,t.max=t.max+e}function pC(t,e,n,r,s=.5){const i=Qe(t.min,t.max,s);Pv(t,e,n,i,r)}function ha(t,e){pC(t.x,e.x,e.scaleX,e.scale,e.originX),pC(t.y,e.y,e.scaleY,e.scale,e.originY)}function YI(t,e){return GI(kG(t.getBoundingClientRect(),e))}function jG(t,e,n){const r=YI(t,n),{scroll:s}=e;return s&&(da(r.x,s.offset.x),da(r.y,s.offset.y)),r}const gC=()=>({translate:0,scale:1,origin:0,originPoint:0}),fa=()=>({x:gC(),y:gC()}),vC=()=>({min:0,max:0}),ut=()=>({x:vC(),y:vC()}),Av={current:null},QI={current:!1};function RG(){if(QI.current=!0,!!bw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Av.current=t.matches;t.addEventListener("change",e),e()}else Av.current=!1}const IG=new WeakMap;function PG(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Vt(s))t.addValue(r,s);else if(Vt(i))t.addValue(r,rl(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,rl(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const xC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AG{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ow,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=an.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ke.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Om(n),this.isVariantNode=DI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Vt(p)&&p.set(c[f])}}mount(e){var n;this.current=e,IG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),QI.current||RG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Av.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ni(this.notifyUpdate),Ni(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=El.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ke.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in il){const n=il[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<xC.length;r++){const s=xC[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=PG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=rl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(UR(r)||zR(r))?r=parseFloat(r):!UH(r)&&Ci.test(n)&&(r=SI(e,n)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=qw(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){$w.render(this.render)}}class XI extends AG{constructor(){super(...arguments),this.KeyframeResolver=jH}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function JI(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function MG(t){return window.getComputedStyle(t)}class DG extends XI{constructor(){super(...arguments),this.type="html",this.renderInstance=JI}readValueFromInstance(e,n){var r;if(El.has(n))return(r=this.projection)!=null&&r.isProjecting?Nv(n):K7(e,n);{const s=MG(e),i=(rI(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YI(e,n)}build(e,n,r){Ww(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Kw(e,n,r)}}const ZI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OG(t,e,n,r){JI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(ZI.has(s)?s:Yw(s),e.attrs[s])}class LG extends XI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(El.has(n)){const r=CI(n);return r&&r.default||0}return n=ZI.has(n)?n:Yw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return BI(e,n,r)}build(e,n,r){FI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){OG(e,n,r,s)}mount(e){this.isSVGTag=VI(e.tagName),super.mount(e)}}const FG=(t,e)=>Gw(t)?new LG(e):new DG(e,{allowProjection:t!==m.Fragment});function ja(t,e,n){const r=t.getProps();return qw(r,e,n!==void 0?n:r.custom,t)}const Mv=t=>Array.isArray(t);function $G(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,rl(n))}function VG(t){return Mv(t)?t[t.length-1]||0:t}function UG(t,e){const n=ja(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const l=VG(i[o]);$G(t,o,l)}}function BG(t){return!!(Vt(t)&&t.add)}function Dv(t,e){const n=t.getValue("willChange");if(BG(n))return n.add(e);if(!n&&_s.WillChange){const r=new _s.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function eP(t){return t.props[zI]}const zG=t=>t!==null;function WG(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(zG),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const HG={type:"spring",stiffness:500,damping:25,restSpeed:10},GG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qG={type:"keyframes",duration:.8},KG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YG=(t,{keyframes:e})=>e.length>2?qG:El.has(t)?t.startsWith("scale")?GG(e[1]):HG:KG;function QG({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Qw=(t,e,n,r={},s,i)=>o=>{const l=Lw(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Or(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};QG(l)||Object.assign(d,YG(t,d)),d.duration&&(d.duration=Or(d.duration)),d.repeatDelay&&(d.repeatDelay=Or(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Tv(d),d.delay===0&&(h=!0)),(_s.instantAnimations||_s.skipAnimations)&&(h=!0,Tv(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const f=WG(d.keyframes,l);if(f!==void 0){Ke.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new Dw(d):new vH(d)};function XG({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),f=l[d];if(f===void 0||u&&XG(u,d))continue;const p={delay:n,...Lw(i||{},d)},w=h.get();if(w!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===w&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const y=eP(t);if(y){const v=window.MotionHandoffAnimation(y,d,Ke);v!==null&&(p.startTime=v,x=!0)}}Dv(t,d),h.start(Qw(d,h,f,t.shouldReduceMotion&&bI.has(d)?{type:!1}:p,t,x));const g=h.animation;g&&c.push(g)}return o&&Promise.all(c).then(()=>{Ke.update(()=>{o&&UG(t,o)})}),c}function nP(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:l-i*r}function Ov(t,e,n={}){var c;const r=ja(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(tP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return JG(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function JG(t,e,n=0,r=0,s=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Ov(c,e,{...o,delay:n+(typeof r=="function"?0:r)+nP(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function ZG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Ov(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Ov(t,e,n);else{const s=typeof e=="function"?ja(t,e,n.custom):e;r=Promise.all(tP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function rP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const eq=zw.length;function sP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eq;n++){const r=zw[n],s=t.props[r];(lu(s)||s===!1)&&(e[r]=s)}return e}const tq=[...Bw].reverse(),nq=Bw.length;function rq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ZG(t,n,r)))}function sq(t){let e=rq(t),n=yC(),r=!0;const s=c=>(u,d)=>{var f;const h=ja(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:w,...x}=h;u={...u,...x,...w}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=sP(t.parent)||{},h=[],f=new Set;let p={},w=1/0;for(let g=0;g<nq;g++){const y=tq[g],v=n[y],_=u[y]!==void 0?u[y]:d[y],C=lu(_),b=y===c?v.isActive:null;b===!1&&(w=g);let N=_===d[y]&&_!==u[y]&&C;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),v.protectedKeys={...p},!v.isActive&&b===null||!_&&!v.prevProp||Dm(_)||typeof _=="boolean")continue;const S=iq(v.prevProp,_);let E=S||y===c&&v.isActive&&!N&&C||g>w&&C,k=!1;const T=Array.isArray(_)?_:[_];let R=T.reduce(s(y),{});b===!1&&(R={});const{prevResolvedValues:I={}}=v,L={...I,...R},P=H=>{E=!0,f.has(H)&&(k=!0,f.delete(H)),v.needsAnimating[H]=!0;const A=t.getValue(H);A&&(A.liveStyle=!1)};for(const H in L){const A=R[H],D=I[H];if(p.hasOwnProperty(H))continue;let j=!1;Mv(A)&&Mv(D)?j=!rP(A,D):j=A!==D,j?A!=null?P(H):f.add(H):A!==void 0&&f.has(H)?P(H):v.protectedKeys[H]=!0}v.prevProp=_,v.prevResolvedValues=R,v.isActive&&(p={...p,...R}),r&&t.blockInitialAnimation&&(E=!1);const V=N&&S;E&&(!V||k)&&h.push(...T.map(H=>{const A={type:y};if(typeof H=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:D}=t,j=ja(D,H);if(D.enteringChildren&&j){const{delayChildren:q}=j.transition||{};A.delay=nP(D.enteringChildren,t,q)}}return{animation:H,options:A}}))}if(f.size){const g={};if(typeof u.initial!="boolean"){const y=ja(t,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(g.transition=y.transition)}f.forEach(y=>{const v=t.getBaseTarget(y),_=t.getValue(y);_&&(_.liveStyle=!0),g[y]=v??null}),h.push({animation:g})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=yC()}}}function iq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!rP(e,t):!1}function Bi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yC(){return{animate:Bi(!0),whileInView:Bi(),whileHover:Bi(),whileTap:Bi(),whileDrag:Bi(),whileFocus:Bi(),exit:Bi()}}class ji{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oq extends ji{constructor(e){super(e),e.animationState||(e.animationState=sq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Dm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let aq=0;class lq extends ji{constructor(){super(...arguments),this.id=aq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cq={animation:{Feature:oq},exit:{Feature:lq}};function cu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Vu(t){return{point:{x:t.pageX,y:t.pageY}}}const uq=t=>e=>Vw(e)&&t(e,Vu(e));function Cc(t,e,n,r){return cu(t,e,uq(n),r)}const iP=1e-4,dq=1-iP,hq=1+iP,oP=.01,fq=0-oP,mq=0+oP;function Yt(t){return t.max-t.min}function pq(t,e,n){return Math.abs(t-e)<=n}function wC(t,e,n,r=.5){t.origin=r,t.originPoint=Qe(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),t.translate=Qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dq&&t.scale<=hq||isNaN(t.scale))&&(t.scale=1),(t.translate>=fq&&t.translate<=mq||isNaN(t.translate))&&(t.translate=0)}function Sc(t,e,n,r){wC(t.x,e.x,n.x,r?r.originX:void 0),wC(t.y,e.y,n.y,r?r.originY:void 0)}function bC(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function gq(t,e,n){bC(t.x,e.x,n.x),bC(t.y,e.y,n.y)}function _C(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function Sf(t,e,n){_C(t.x,e.x,n.x),_C(t.y,e.y,n.y)}function jn(t){return[t("x"),t("y")]}const aP=({current:t})=>t?t.ownerDocument.defaultView:null,NC=(t,e)=>Math.abs(t-e);function vq(t,e){const n=NC(t.x,e.x),r=NC(t.y,e.y);return Math.sqrt(n**2+r**2)}class lP{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=xg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,w=vq(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!w)return;const{point:x}=f,{timestamp:g}=kt;this.history.push({...x,timestamp:g});const{onStart:y,onMove:v}=this.handlers;p||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=vg(p,this.transformPagePoint),Ke.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=xg(f.type==="pointercancel"?this.lastMoveEventInfo:vg(p,this.transformPagePoint),this.history);this.startEvent&&w&&w(f,y),x&&x(f,y)},!Vw(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const l=Vu(e),c=vg(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=kt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,xg(c,this.history)),this.removeListeners=Lu(Cc(this.contextWindow,"pointermove",this.handlePointerMove),Cc(this.contextWindow,"pointerup",this.handlePointerUp),Cc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ni(this.updatePoint)}}function vg(t,e){return e?{point:e(t.point)}:t}function CC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xg({point:t},e){return{point:t,delta:CC(t,cP(e)),offset:CC(t,xq(e)),velocity:yq(e,.1)}}function xq(t){return t[0]}function cP(t){return t[t.length-1]}function yq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=cP(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Or(e)));)n--;if(!r)return{x:0,y:0};const i=On(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Qe(n,t,r.max):Math.min(t,n)),t}function SC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bq(t,{top:e,left:n,bottom:r,right:s}){return{x:SC(t.x,n,s),y:SC(t.y,e,r)}}function EC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _q(t,e){return{x:EC(t.x,e.x),y:EC(t.y,e.y)}}function Nq(t,e){let n=.5;const r=Yt(t),s=Yt(e);return s>r?n=iu(e.min,e.max-r,t.min):r>s&&(n=iu(t.min,t.max-s,e.min)),bs(0,1,n)}function Cq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lv=.35;function Sq(t=Lv){return t===!1?t=0:t===!0&&(t=Lv),{x:kC(t,"left","right"),y:kC(t,"top","bottom")}}function kC(t,e,n){return{min:TC(t,e),max:TC(t,n)}}function TC(t,e){return typeof t=="number"?t:t[e]||0}const Eq=new WeakMap;class kq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vu(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:w,onDragStart:x}=this.getProps();if(p&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AH(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Lr.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const C=_.layout.layoutBox[y];C&&(v=Yt(C)*(parseFloat(v)/100))}}this.originPoint[y]=v}),x&&Ke.postRender(()=>x(h,f)),Dv(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:w,onDirectionLock:x,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=f;if(w&&this.currentDirection===null){this.currentDirection=Tq(y),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),g&&g(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>jn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new lP(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:aP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ke.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Sd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=wq(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&ua(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bq(r.layoutBox,e):this.constraints=!1,this.elastic=Sq(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Cq(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ua(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=jG(r,s.root,this.visualElement.getTransformPagePoint());let o=_q(s.layout.layoutBox,i);if(n){const l=n(EG(o));this.hasMutatedConstraints=!!l,l&&(o=GI(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=jn(d=>{if(!Sd(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Dv(this.visualElement,e),r.start(Qw(e,r,0,n,this.visualElement,!1))}stopAnimation(){jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jn(n=>{const{drag:r}=this.getProps();if(!Sd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(e[n]-Qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ua(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};jn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=Nq({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jn(o=>{if(!Sd(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Qe(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Eq.set(this.visualElement,this);const e=this.visualElement.current,n=Cc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ua(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ke.read(r);const o=cu(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(jn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Lv,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Sd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Tq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jq extends ji{constructor(e){super(e),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new kq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}unmount(){this.removeGroupControls(),this.removeListeners()}}const jC=t=>(e,n)=>{t&&Ke.postRender(()=>t(e,n))};class Rq extends ji{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(e){this.session=new lP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:jC(e),onStart:jC(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ke.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Cc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ih={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let yg=!1;class Iq extends m.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),yg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ih.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,yg=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ke.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$w.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;yg=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uP(t){const[e,n]=PI(),r=m.useContext(yw);return a.jsx(Iq,{...t,layoutGroup:r,switchLayoutGroup:m.useContext(WI),isPresent:e,safeToRemove:n})}function Pq(t,e,n){const r=Vt(t)?t:rl(t);return r.start(Qw("",r,e,n)),r.animation}const Aq=(t,e)=>t.depth-e.depth;class Mq{constructor(){this.children=[],this.isDirty=!1}add(e){_w(this.children,e),this.isDirty=!0}remove(e){Nw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Aq),this.isDirty=!1,this.children.forEach(e)}}function Dq(t,e){const n=an.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ni(r),t(i-e))};return Ke.setup(r,!0),()=>Ni(r)}const dP=["TopLeft","TopRight","BottomLeft","BottomRight"],Oq=dP.length,RC=t=>typeof t=="string"?parseFloat(t):t,IC=t=>typeof t=="number"||ae.test(t);function Lq(t,e,n,r,s,i){s?(t.opacity=Qe(0,n.opacity??1,Fq(r)),t.opacityExit=Qe(e.opacity??1,0,$q(r))):i&&(t.opacity=Qe(e.opacity??1,n.opacity??1,r));for(let o=0;o<Oq;o++){const l=`border${dP[o]}Radius`;let c=PC(e,l),u=PC(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||IC(c)===IC(u)?(t[l]=Math.max(Qe(RC(c),RC(u),r),0),(Lr.test(u)||Lr.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Qe(e.rotate||0,n.rotate||0,r))}function PC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Fq=hP(0,.5,XR),$q=hP(.5,.95,Fn);function hP(t,e,n){return r=>r<t?0:r>e?1:n(iu(t,e,r))}function AC(t,e){t.min=e.min,t.max=e.max}function Hn(t,e){AC(t.x,e.x),AC(t.y,e.y)}function MC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function DC(t,e,n,r,s){return t-=e,t=Cf(t,1/n,r),s!==void 0&&(t=Cf(t,1/s,r)),t}function Vq(t,e=0,n=1,r=.5,s,i=t,o=t){if(Lr.test(e)&&(e=parseFloat(e),e=Qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Qe(i.min,i.max,r);t===i&&(l-=e),t.min=DC(t.min,e,n,l,s),t.max=DC(t.max,e,n,l,s)}function OC(t,e,[n,r,s],i,o){Vq(t,e[n],e[r],e[s],e.scale,i,o)}const Uq=["x","scaleX","originX"],Bq=["y","scaleY","originY"];function LC(t,e,n,r){OC(t.x,e,Uq,n?n.x:void 0,r?r.x:void 0),OC(t.y,e,Bq,n?n.y:void 0,r?r.y:void 0)}function FC(t){return t.translate===0&&t.scale===1}function fP(t){return FC(t.x)&&FC(t.y)}function $C(t,e){return t.min===e.min&&t.max===e.max}function zq(t,e){return $C(t.x,e.x)&&$C(t.y,e.y)}function VC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function mP(t,e){return VC(t.x,e.x)&&VC(t.y,e.y)}function UC(t){return Yt(t.x)/Yt(t.y)}function BC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wq{constructor(){this.members=[]}add(e){_w(this.members,e),e.scheduleRender()}remove(e){if(Nw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Hq(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const wg=["","X","Y","Z"],Gq=1e3;let qq=0;function bg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function pP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ke,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&pP(r)}function gP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=qq++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Qq),this.nodes.forEach(eK),this.nodes.forEach(tK),this.nodes.forEach(Xq)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Mq)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sw),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=II(o)&&!$H(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Ke.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=Dq(f,250),ih.hasAnimatedSinceResize&&(ih.hasAnimatedSinceResize=!1,this.nodes.forEach(HC)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||oK,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=u.getProps(),y=!this.targetLayout||!mP(this.targetLayout,p),v=!h&&f;if(this.options.layoutRoot||this.resumeFrom||v||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Lw(w,"layout"),onPlay:x,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,v)}else h||HC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(WC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Zq),this.nodes.forEach(Kq),this.nodes.forEach(Yq)):this.nodes.forEach(WC),this.clearAllSnapshots();const l=an.now();kt.delta=bs(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,cg.update.process(kt),cg.preRender.process(kt),cg.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$w.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Jq),this.sharedNodes.forEach(rK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yt(this.snapshot.measuredBox.x)&&!Yt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!fP(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||qi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),aK(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ut();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(lK))){const{scroll:d}=this.root;d&&(da(l.x,d.offset.x),da(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=ut();if(Hn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Hn(l,o),da(l.x,h.offset.x),da(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=ut();Hn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ha(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qi(d.latestValues)&&ha(c,d.latestValues)}return qi(this.latestValues)&&ha(c,this.latestValues),c}removeTransform(o){const l=ut();Hn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!qi(u.latestValues))continue;Iv(u.latestValues)&&u.updateSnapshot();const d=ut(),h=u.measurePageBox();Hn(d,h),LC(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qi(this.latestValues)&&LC(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=kt.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ut(),this.targetWithTransforms=ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hn(this.target,this.layout.layoutBox),KI(this.target,this.targetDelta)):Hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Iv(this.parent.latestValues)||qI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ut(),this.relativeTargetOrigin=ut(),Sf(this.relativeTargetOrigin,l,c),Hn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Hn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;TG(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ut());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MC(this.prevProjectionDelta.x,this.projectionDelta.x),MC(this.prevProjectionDelta.y,this.projectionDelta.y)),Sc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!BC(this.projectionDelta.x,this.prevProjectionDelta.x)||!BC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fa(),this.projectionDelta=fa(),this.projectionDeltaWithTransform=fa()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=fa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ut(),p=c?c.source:void 0,w=this.layout?this.layout.source:void 0,x=p!==w,g=this.getStack(),y=!g||g.members.length<=1,v=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(iK));this.animationProgress=0;let _;this.mixTargetDelta=C=>{const b=C/1e3;GC(h.x,o.x,b),GC(h.y,o.y,b),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sK(this.relativeTarget,this.relativeTargetOrigin,f,b),_&&zq(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ut()),Hn(_,this.relativeTarget)),x&&(this.animationValues=d,Lq(d,u,this.latestValues,b,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ke.update(()=>{ih.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rl(0)),this.currentAnimation=Pq(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&vP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ut();const h=Yt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Yt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Hn(l,c),ha(l,d),Sc(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Wq),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&bg("z",o,u,this.animationValues);for(let d=0;d<wg.length;d++)bg(`rotate${wg[d]}`,o,u,this.animationValues),bg(`skew${wg[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=sh(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=sh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!qi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Hq(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Rv){if(d[w]===void 0)continue;const{correct:x,applyTo:g,isCSSVariable:y}=Rv[w],v=h==="none"?d[w]:x(d[w],u);if(g){const _=g.length;for(let C=0;C<_;C++)o[g[C]]=v}else y?this.options.visualElement.renderState.vars[w]=v:o[w]=v}this.options.layoutId&&(o.pointerEvents=u===this?sh(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(zC),this.root.sharedNodes.clear()}}}function Kq(t){t.updateLayout()}function Yq(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?jn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Yt(f);f.min=r[h].min,f.max=f.min+p}):vP(i,e.layoutBox,r)&&jn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Yt(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const l=fa();Sc(l,r,e.layoutBox);const c=fa();o?Sc(c,t.applyTransform(s,!0),e.measuredBox):Sc(c,r,e.layoutBox);const u=!fP(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const w=ut();Sf(w,e.layoutBox,f.layoutBox);const x=ut();Sf(x,r,p.layoutBox),mP(w,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=w,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Qq(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Xq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Jq(t){t.clearSnapshot()}function zC(t){t.clearMeasurements()}function WC(t){t.isLayoutDirty=!1}function Zq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function HC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eK(t){t.resolveTargetDelta()}function tK(t){t.calcProjection()}function nK(t){t.resetSkewAndRotation()}function rK(t){t.removeLeadSnapshot()}function GC(t,e,n){t.translate=Qe(e.translate,0,n),t.scale=Qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qC(t,e,n,r){t.min=Qe(e.min,n.min,r),t.max=Qe(e.max,n.max,r)}function sK(t,e,n,r){qC(t.x,e.x,n.x,r),qC(t.y,e.y,n.y,r)}function iK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oK={duration:.45,ease:[.4,0,.1,1]},KC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),YC=KC("applewebkit/")&&!KC("chrome/")?Math.round:Fn;function QC(t){t.min=YC(t.min),t.max=YC(t.max)}function aK(t){QC(t.x),QC(t.y)}function vP(t,e,n){return t==="position"||t==="preserve-aspect"&&!pq(UC(e),UC(n),.2)}function lK(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const cK=gP({attachResizeListener:(t,e)=>cu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_g={current:void 0},xP=gP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_g.current){const t=new cK({});t.mount(window),t.setOptions({layoutScroll:!0}),_g.current=t}return _g.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uK={pan:{Feature:Rq},drag:{Feature:jq,ProjectionNode:xP,MeasureLayout:uP}};function XC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ke.postRender(()=>i(e,Vu(e)))}class dK extends ji{mount(){const{current:e}=this.node;e&&(this.unmount=MH(e,(n,r)=>(XC(this.node,r,"Start"),s=>XC(this.node,s,"End"))))}unmount(){}}class hK extends ji{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lu(cu(this.node.current,"focus",()=>this.onFocus()),cu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JC(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ke.postRender(()=>i(e,Vu(e)))}class fK extends ji{mount(){const{current:e}=this.node;e&&(this.unmount=FH(e,(n,r)=>(JC(this.node,r,"Start"),(s,{success:i})=>JC(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fv=new WeakMap,Ng=new WeakMap,mK=t=>{const e=Fv.get(t.target);e&&e(t)},pK=t=>{t.forEach(mK)};function gK({root:t,...e}){const n=t||document;Ng.has(n)||Ng.set(n,{});const r=Ng.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(pK,{root:t,...e})),r[s]}function vK(t,e,n){const r=gK(e);return Fv.set(t,n),r.observe(t),()=>{Fv.delete(t),r.unobserve(t)}}const xK={some:0,all:1};class yK extends ji{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xK[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return vK(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(wK(e,n))&&this.startObserver()}unmount(){}}function wK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bK={inView:{Feature:yK},tap:{Feature:fK},focus:{Feature:hK},hover:{Feature:dK}},_K={layout:{ProjectionNode:xP,MeasureLayout:uP}},NK={...cq,...bK,...uK,..._K},W=SG(NK,FG),Vr=Object.create(null);Vr.open="0";Vr.close="1";Vr.ping="2";Vr.pong="3";Vr.message="4";Vr.upgrade="5";Vr.noop="6";const oh=Object.create(null);Object.keys(Vr).forEach(t=>{oh[Vr[t]]=t});const $v={type:"error",data:"parser error"},yP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wP=typeof ArrayBuffer=="function",bP=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Xw=({type:t,data:e},n,r)=>yP&&e instanceof Blob?n?r(e):ZC(e,r):wP&&(e instanceof ArrayBuffer||bP(e))?n?r(e):ZC(new Blob([e]),r):r(Vr[t]+(e||"")),ZC=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function eS(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Cg;function CK(t,e){if(yP&&t.data instanceof Blob)return t.data.arrayBuffer().then(eS).then(e);if(wP&&(t.data instanceof ArrayBuffer||bP(t.data)))return e(eS(t.data));Xw(t,!1,n=>{Cg||(Cg=new TextEncoder),e(Cg.encode(n))})}const tS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<tS.length;t++)nc[tS.charCodeAt(t)]=t;const SK=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=nc[t.charCodeAt(r)],o=nc[t.charCodeAt(r+1)],l=nc[t.charCodeAt(r+2)],c=nc[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},EK=typeof ArrayBuffer=="function",Jw=(t,e)=>{if(typeof t!="string")return{type:"message",data:_P(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:kK(t.substring(1),e)}:oh[n]?t.length>1?{type:oh[n],data:t.substring(1)}:{type:oh[n]}:$v},kK=(t,e)=>{if(EK){const n=SK(t);return _P(n,e)}else return{base64:!0,data:t}},_P=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},NP="",TK=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{Xw(i,!1,l=>{r[o]=l,++s===n&&e(r.join(NP))})})},jK=(t,e)=>{const n=t.split(NP),r=[];for(let s=0;s<n.length;s++){const i=Jw(n[s],e);if(r.push(i),i.type==="error")break}return r};function RK(){return new TransformStream({transform(t,e){CK(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let Sg;function Ed(t){return t.reduce((e,n)=>e+n.length,0)}function kd(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function IK(t,e){Sg||(Sg=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ed(n)<1)break;const c=kd(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ed(n)<2)break;const c=kd(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ed(n)<8)break;const c=kd(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue($v);break}s=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ed(n)<s)break;const c=kd(n,s);l.enqueue(Jw(i?c:Sg.decode(c),e)),r=0}if(s===0||s>t){l.enqueue($v);break}}}})}const CP=4;function ct(t){if(t)return PK(t)}function PK(t){for(var e in ct.prototype)t[e]=ct.prototype[e];return t}ct.prototype.on=ct.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ct.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ct.prototype.off=ct.prototype.removeListener=ct.prototype.removeAllListeners=ct.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ct.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};ct.prototype.emitReserved=ct.prototype.emit;ct.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ct.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Lm=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),An=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),AK="arraybuffer";function SP(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const MK=An.setTimeout,DK=An.clearTimeout;function Fm(t,e){e.useNativeTimers?(t.setTimeoutFn=MK.bind(An),t.clearTimeoutFn=DK.bind(An)):(t.setTimeoutFn=An.setTimeout.bind(An),t.clearTimeoutFn=An.clearTimeout.bind(An))}const OK=1.33;function LK(t){return typeof t=="string"?FK(t):Math.ceil((t.byteLength||t.size)*OK)}function FK(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function EP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function $K(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function VK(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class UK extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Zw extends ct{constructor(e){super(),this.writable=!1,Fm(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new UK(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Jw(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=$K(e);return n.length?"?"+n:""}}class BK extends Zw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};jK(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,TK(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=EP()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let kP=!1;try{kP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const zK=kP;function WK(){}class HK extends BK{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Fr extends ct{constructor(e,n,r){super(),this.createRequest=e,Fm(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=SP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Fr.requestsCount++,Fr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=WK,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Fr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Fr.requestsCount=0;Fr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nS);else if(typeof addEventListener=="function"){const t="onpagehide"in An?"pagehide":"unload";addEventListener(t,nS,!1)}}function nS(){for(let t in Fr.requests)Fr.requests.hasOwnProperty(t)&&Fr.requests[t].abort()}const GK=function(){const t=TP({xdomain:!1});return t&&t.responseType!==null}();class qK extends HK{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=GK&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Fr(TP,this.uri(),e)}}function TP(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||zK))return new XMLHttpRequest}catch{}if(!e)try{return new An[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const jP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class KK extends Zw{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=jP?{}:SP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;Xw(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Lm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=EP()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Eg=An.WebSocket||An.MozWebSocket;class YK extends KK{createSocket(e,n,r){return jP?new Eg(e,n,r):n?new Eg(e,n):new Eg(e)}doWrite(e,n){this.ws.send(n)}}class QK extends Zw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=IK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=RK();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Lm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const XK={websocket:YK,webtransport:QK,polling:qK},JK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vv(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=JK.exec(t||""),i={},o=14;for(;o--;)i[ZK[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=eY(i,i.path),i.queryKey=tY(i,i.query),i}function eY(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function tY(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Uv=typeof addEventListener=="function"&&typeof removeEventListener=="function",ah=[];Uv&&addEventListener("offline",()=>{ah.forEach(t=>t())},!1);class mi extends ct{constructor(e,n){if(super(),this.binaryType=AK,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Vv(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Vv(n.host).host);Fm(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=VK(this.opts.query)),Uv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ah.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=CP,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&mi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",mi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=LK(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Lm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(mi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Uv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ah.indexOf(this._offlineEventListener);r!==-1&&ah.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}mi.protocol=CP;class nY extends mi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;mi.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;mi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function u(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let rY=class extends nY{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>XK[s]).filter(s=>!!s)),super(e,r)}};function sY(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Vv(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const iY=typeof ArrayBuffer=="function",oY=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,RP=Object.prototype.toString,aY=typeof Blob=="function"||typeof Blob<"u"&&RP.call(Blob)==="[object BlobConstructor]",lY=typeof File=="function"||typeof File<"u"&&RP.call(File)==="[object FileConstructor]";function eb(t){return iY&&(t instanceof ArrayBuffer||oY(t))||aY&&t instanceof Blob||lY&&t instanceof File}function lh(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(lh(t[n]))return!0;return!1}if(eb(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return lh(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&lh(t[n]))return!0;return!1}function cY(t){const e=[],n=t.data,r=t;return r.data=Bv(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Bv(t,e){if(!t)return t;if(eb(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Bv(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Bv(t[r],e));return n}return t}function uY(t,e){return t.data=zv(t.data,e),delete t.attachments,t}function zv(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=zv(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=zv(t[n],e));return t}const IP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],dY=5;var pe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pe||(pe={}));class hY{constructor(e){this.replacer=e}encode(e){return(e.type===pe.EVENT||e.type===pe.ACK)&&lh(e)?this.encodeAsBinary({type:e.type===pe.EVENT?pe.BINARY_EVENT:pe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===pe.BINARY_EVENT||e.type===pe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=cY(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}class tb extends ct{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===pe.BINARY_EVENT;r||n.type===pe.BINARY_ACK?(n.type=r?pe.EVENT:pe.ACK,this.reconstructor=new fY(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(eb(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(pe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===pe.BINARY_EVENT||r.type===pe.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(tb.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case pe.CONNECT:return Ef(n);case pe.DISCONNECT:return n===void 0;case pe.CONNECT_ERROR:return typeof n=="string"||Ef(n);case pe.EVENT:case pe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&IP.indexOf(n[0])===-1);case pe.ACK:case pe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class fY{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=uY(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function mY(t){return typeof t=="string"}const pY=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function gY(t){return t===void 0||pY(t)}function Ef(t){return Object.prototype.toString.call(t)==="[object Object]"}function vY(t,e){switch(t){case pe.CONNECT:return e===void 0||Ef(e);case pe.DISCONNECT:return e===void 0;case pe.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&IP.indexOf(e[0])===-1);case pe.ACK:return Array.isArray(e);case pe.CONNECT_ERROR:return typeof e=="string"||Ef(e);default:return!1}}function xY(t){return mY(t.nsp)&&gY(t.id)&&vY(t.type,t.data)}const yY=Object.freeze(Object.defineProperty({__proto__:null,Decoder:tb,Encoder:hY,get PacketType(){return pe},isPacketValid:xY,protocol:dY},Symbol.toStringTag,{value:"Module"}));function Zn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const wY=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class PP extends ct{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Zn(e,"open",this.onopen.bind(this)),Zn(e,"packet",this.onpacket.bind(this)),Zn(e,"error",this.onerror.bind(this)),Zn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(wY.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:pe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),o.id=d}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,l)=>o?s(o):r(l);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>(this._queue[0],s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pe.EVENT:case pe.BINARY_EVENT:this.onevent(e);break;case pe.ACK:case pe.BINARY_ACK:this.onack(e);break;case pe.DISCONNECT:this.ondisconnect();break;case pe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:pe.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function kl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}kl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};kl.prototype.reset=function(){this.attempts=0};kl.prototype.setMin=function(t){this.ms=t};kl.prototype.setMax=function(t){this.max=t};kl.prototype.setJitter=function(t){this.jitter=t};class Wv extends ct{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Fm(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new kl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||yY;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new rY(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Zn(n,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=Zn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Zn(e,"ping",this.onping.bind(this)),Zn(e,"data",this.ondata.bind(this)),Zn(e,"error",this.onerror.bind(this)),Zn(e,"close",this.onclose.bind(this)),Zn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Lm(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new PP(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ql={};function ch(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=sY(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Ql[s]&&i in Ql[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new Wv(r,e):(Ql[s]||(Ql[s]=new Wv(r,e)),c=Ql[s]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(ch,{Manager:Wv,Socket:PP,io:ch,connect:ch});const bY="https://king-s-cup-party-production.up.railway.app";class _Y{constructor(){Yu(this,"socket",null);Yu(this,"listeners",new Map);Yu(this,"currentRoom",null)}connect(){var e;return(e=this.socket)!=null&&e.connected?this.socket:(this.socket=ch(bY,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3}),this.socket.on("connect",()=>{var n,r;console.log("Socket.IO connected:",(n=this.socket)==null?void 0:n.id),this.currentRoom&&((r=this.socket)==null||r.emit("join-room",{roomCode:this.currentRoom,playerId:""}))}),this.socket.on("disconnect",n=>{console.log("Socket.IO disconnected:",n)}),["room-changed","player-joined","player-left","player-changed","room-deleted","game-action"].forEach(n=>{var r;(r=this.socket)==null||r.on(n,s=>{const i=this.listeners.get(n);i==null||i.forEach(o=>o(s))})}),this.socket)}disconnect(){var e,n;this.currentRoom&&((e=this.socket)==null||e.emit("leave-room",{roomCode:this.currentRoom,playerId:""})),(n=this.socket)==null||n.disconnect(),this.socket=null,this.currentRoom=null}joinRoom(e,n=""){var r,s;this.connect(),this.currentRoom&&this.currentRoom!==e&&((r=this.socket)==null||r.emit("leave-room",{roomCode:this.currentRoom,playerId:n})),this.currentRoom=e,(s=this.socket)==null||s.emit("join-room",{roomCode:e,playerId:n})}leaveRoom(e,n=""){var r;(r=this.socket)==null||r.emit("leave-room",{roomCode:e,playerId:n}),this.currentRoom===e&&(this.currentRoom=null)}emitRoomUpdate(e,n){var r;(r=this.socket)==null||r.emit("room-update",{roomCode:e,update:n})}emitPlayerUpdate(e,n,r){var s;(s=this.socket)==null||s.emit("player-update",{roomCode:e,playerId:n,update:r})}emitGameAction(e,n,r){var s;(s=this.socket)==null||s.emit("game-action",{roomCode:e,action:n,payload:r})}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{var r;(r=this.listeners.get(e))==null||r.delete(n)}}off(e,n){var r;n?(r=this.listeners.get(e))==null||r.delete(n):this.listeners.delete(e)}isConnected(){var e;return((e=this.socket)==null?void 0:e.connected)??!1}getSocket(){return this.socket}}const Tt=new _Y,fo={A:{value:"A",title:" 1 ",description:" 1 ",emoji:""},2:{value:"2",title:" 2 ",description:" 2 ",emoji:""},3:{value:"3",title:" 3 ",description:"3 ",emoji:""},4:{value:"4",title:" 4 ",description:"4  ",emoji:""},5:{value:"5",title:" (Buddy)",description:" 1   ",emoji:""},6:{value:"6",title:"",description:" ( , )  /",emoji:""},7:{value:"7",title:" 7",description:"  7  7  ",emoji:""},8:{value:"8",title:"",description:" ",emoji:""},9:{value:"9",title:"",description:"  1 ",emoji:""},10:{value:"10",title:"",description:"  1 ",emoji:""},J:{value:"J",title:"",description:" ",emoji:""},Q:{value:"Q",title:"",description:" ",emoji:""},K:{value:"K",title:"King !",description:" 1-3 ,  4 () !",emoji:""}},NY=["hearts","diamonds","clubs","spades"],AP=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],Hv={hearts:"",diamonds:"",clubs:"",spades:""},Gv={hearts:"text-destructive",diamonds:"text-destructive",clubs:"text-paper-foreground",spades:"text-paper-foreground"};function Td(){const t=[];for(const e of NY)for(const n of AP)t.push({value:n,suit:e,id:`${n}-${e}`});return t}function jd(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function rS(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const MP="https://king-s-cup-party-production.up.railway.app",CY=3*60*60*1e3,DP=!1,kf=CY;async function OP(){try{const t=Math.floor(kf/6e4);console.log(` Running room cleanup (max age: ${t} minutes)...`);const n=await(await fetch(`${MP}/api/cleanup-rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testMode:DP,maxAgeMs:kf})})).json();return!n||n.ok===!1?(console.error(" cleanup-rooms returned error:",n),n):(n.deletedCount>0?console.log(` Cleaned up ${n.deletedCount} old rooms:`,n.deletedCodes):console.log(" No old rooms to clean up"),n)}catch(t){return console.error(" Error during room cleanup:",t),{ok:!1,error:t.message}}}async function Uu(){await OP()}async function SY(){try{const t=await fetch(`${MP}/api/rooms`);if(!t.ok)return console.error(" Failed to get rooms"),[];const e=await t.json(),n=Date.now(),r=(e||[]).map(s=>{const i=new Date(s.created_at).getTime(),o=n-i,l=Math.floor(o/6e4),c=Math.floor(l/60);return{...s,ageMs:o,ageMinutes:l,ageHours:c,willBeDeleted:o>kf}});return console.log(" Room ages:",r),r}catch(t){return console.error(" Error getting rooms:",t),[]}}typeof window<"u"&&(window.debugRoomCleanup={cleanupNow:OP,getRoomsWithAge:SY,testMode:DP,maxAgeMinutes:Math.floor(kf/6e4)});const Ot="https://king-s-cup-party-production.up.railway.app",sS=11;function kg(t){const e=Array.from({length:sS},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*sS)+1:e[Math.floor(Math.random()*e.length)]}function EY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=Nt();m.useEffect(()=>{const g=async()=>{if(s&&t){await fetch(`${Ot}/api/players/${s}`,{method:"DELETE"});const v=await(await fetch(`${Ot}/api/rooms/${t.id}/players`)).json();(!v||v.length===0)&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"DELETE"})}};return window.addEventListener("beforeunload",g),()=>window.removeEventListener("beforeunload",g)},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.code))return;Tt.joinRoom(t.code,s||"");const g=Tt.on("room-changed",b=>{e(N=>N?{...N,deck:b.deck?typeof b.deck=="string"?JSON.parse(b.deck):b.deck:N.deck,current_card:b.current_card!==void 0?typeof b.current_card=="string"?JSON.parse(b.current_card):b.current_card:N.current_card,cards_remaining:b.cards_remaining??N.cards_remaining,game_started:b.game_started??N.game_started,is_active:b.is_active??N.is_active}:null)}),y=Tt.on("player-joined",b=>{r(N=>N.some(S=>S.id===b.id)?N:[...N,b])}),v=Tt.on("player-left",b=>{r(N=>N.filter(S=>S.id!==b.playerId))}),_=Tt.on("player-changed",b=>{r(N=>N.map(S=>S.id===b.playerId?{...S,...b}:S))}),C=Tt.on("room-deleted",()=>{e(null),r([]),i(null)});return()=>{g(),y(),v(),_(),C(),Tt.leaveRoom(t.code,s||"")}},[t==null?void 0:t.code,s]);const u=m.useCallback(async g=>{l(!0);try{await Uu();const y=rS(),v=jd(Td()),_=crypto.randomUUID();if(!(await fetch(`${Ot}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_,code:y,host_name:g,deck:v,cards_remaining:52})})).ok)throw new Error("Failed to create room");const b=crypto.randomUUID();if(!(await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b,room_id:_,name:g,is_host:!0,avatar:kg([])})})).ok)throw new Error("Failed to create player");const S={id:_,code:y,host_name:g,is_active:!0,deck:v,current_card:null,cards_remaining:52,game_started:!1},E={id:b,room_id:_,name:g,is_host:!0,is_active:!0,avatar:1};return e(S),r([E]),i(b),c({title:"! ",description:`: ${y}`}),{...S,playerId:b}}catch(y){return c({title:"",description:y.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(g,y,v)=>{l(!0);try{const _=await fetch(`${Ot}/api/rooms/${g.toUpperCase()}`);if(!_.ok)throw new Error(" ");const C=await _.json(),N=await(await fetch(`${Ot}/api/rooms/${C.id}/players`)).json();let S=v?(N||[]).find(T=>T.id===v):null;S||(S=(N||[]).find(T=>T.name===y));let E;if(S)E=S;else{const T=(N||[]).map(I=>I.avatar).filter(Boolean),R=crypto.randomUUID();await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:R,room_id:C.id,name:y,is_host:!1,avatar:kg(T)})}),E={id:R,room_id:C.id,name:y,is_host:!1,is_active:!0,avatar:kg(T)}}e({...C,deck:typeof C.deck=="string"?JSON.parse(C.deck):C.deck||[],current_card:typeof C.current_card=="string"?JSON.parse(C.current_card):C.current_card});const k=new Map;for(const T of N||[])k.set(T.id,T);return k.set(E.id,E),r(Array.from(k.values())),i(E.id),c({title:"! ",description:` ${y}`}),{room:C,playerId:E.id}}catch(_){return c({title:"",description:_.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async()=>{if(!t)return;const g=jd(Td());await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({game_started:!0,deck:g,cards_remaining:52,current_card:null})})},[t]),f=m.useCallback(async()=>{if(!t||t.cards_remaining===0)return;const g=[...t.deck||[]],y=g.pop();y&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deck:g,current_card:y,cards_remaining:g.length})})},[t]),p=m.useCallback(async()=>{if(!t)return;const g=jd(Td());await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deck:g,cards_remaining:52,current_card:null})}),c({title:"! ",description:""})},[t,c]),w=m.useCallback(async()=>{if(!s||!t)return;await fetch(`${Ot}/api/players/${s}`,{method:"DELETE"});const y=await(await fetch(`${Ot}/api/rooms/${t.id}/players`)).json();(!y||y.length===0)&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"DELETE"}),e(null),r([]),i(null)},[s,t]),x=m.useCallback(async g=>{l(!0);try{const y=rS(),v=jd(Td()),_=crypto.randomUUID();await fetch(`${Ot}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_,code:y,host_name:g,deck:v,cards_remaining:52,game_started:!0})});const C=crypto.randomUUID();await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:C,room_id:_,name:g,is_host:!0,avatar:1})});const b={id:_,code:y,host_name:g,is_active:!0,deck:v,current_card:null,cards_remaining:52,game_started:!0};return e(b),r([{id:C,room_id:_,name:g,is_host:!0,is_active:!0,avatar:1}]),i(C),c({title:" Quick Start!",description:` ${y} `}),b}catch(y){return c({title:"",description:y.message,variant:"destructive"}),null}finally{l(!1)}},[c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,reshuffleDeck:p,leaveRoom:w,quickStart:x}}const Wt="https://king-s-cup-party-production.up.railway.app",Tn=t=>t.replace(/_/g,"-");function kY(){const t=new Map;return{from:e=>({select:(n="*")=>({eq:(r,s)=>({eq:(i,o)=>({single:async()=>{try{const l=e==="rooms"&&r==="code"?`${Wt}/api/rooms/${s}`:`${Wt}/api/${Tn(e)}`,c=await fetch(l);return c.ok?{data:await c.json(),error:null}:{data:null,error:new Error("Not found")}}catch(l){return{data:null,error:l}}},async then(l){const c=await this.single();l(c)}}),single:async()=>{try{const i=e==="rooms"&&r==="code"?`${Wt}/api/rooms/${s}`:`${Wt}/api/${Tn(e)}`,o=await fetch(i);return o.ok?{data:await o.json(),error:null}:{data:null,error:new Error("Not found")}}catch(i){return{data:null,error:i}}},async then(i){try{const l=await(await fetch(`${Wt}/api/${e==="rooms"&&r==="room_id"?`rooms/${s}/players`:Tn(e)}`)).json();i({data:Array.isArray(l)?l:[l],error:null})}catch(o){i({data:[],error:o})}}}),order:()=>({async then(r){try{const i=await(await fetch(`${Wt}/api/${Tn(e)}`)).json();r({data:Array.isArray(i)?i:[],error:null})}catch(s){r({data:[],error:s})}}}),async then(r){try{const i=await(await fetch(`${Wt}/api/${Tn(e)}`)).json();r({data:Array.isArray(i)?i:[],error:null})}catch(s){r({data:[],error:s})}}}),insert:n=>({select:()=>({single:async()=>{try{const r=`${Wt}/api/${Tn(e)}`,s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok){const o=await s.text();return{data:null,error:new Error(o||"Insert failed")}}return{data:await s.json(),error:null}}catch(r){return{data:null,error:r}}},async then(r){try{const s=`${Wt}/api/${Tn(e)}`;if(Array.isArray(n)){const o=[];for(const l of n){const c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});c.ok&&o.push(await c.json())}r({data:o,error:null})}else{const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){const c=await o.text();r({data:null,error:new Error(c||"Insert failed")});return}const l=await o.json();r({data:[l],error:null})}}catch(s){r({data:null,error:s})}}}),async then(r){try{const s=`${Wt}/api/${Tn(e)}`;if(Array.isArray(n)){const o=[];for(const l of n){const c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});c.ok&&o.push(await c.json())}r({data:o,error:null})}else{const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){const c=await o.text();r({data:null,error:new Error(c||"Insert failed")});return}const l=await o.json();r({data:l,error:null})}}catch(s){r({data:null,error:s})}}}),update:n=>({eq:(r,s)=>({eq:(i,o)=>({async then(l){try{const c=`${Wt}/api/${Tn(e)}/${s}`,u=await fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!u.ok){const d=await u.text();l({error:new Error(d||"Update failed")});return}l({error:null})}catch(c){l({error:c})}}}),async then(i){try{const o=`${Wt}/api/${Tn(e)}/${s}`,l=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){const c=await l.text();i({error:new Error(c||"Update failed"),data:null});return}i({error:null,data:null})}catch(o){i({error:o})}}})}),delete:()=>({eq:(n,r)=>({async then(s){try{const i=`${Wt}/api/${Tn(e)}/${r}`,o=await fetch(i,{method:"DELETE"});if(!o.ok){const l=await o.text();s({error:new Error(l||"Delete failed")});return}s({error:null})}catch(i){s({error:i})}}}),in:(n,r)=>({async then(s){try{for(const i of r){const o=`${Wt}/api/${Tn(e)}/${i}`;await fetch(o,{method:"DELETE"})}s({error:null})}catch(i){s({error:i})}}})})}),channel:e=>{const n=[];let r=null;const s=e.match(/room-([a-zA-Z0-9-]+)/);s&&(r=s[1]);const i={on:(o,l,c)=>(n.push({event:o,callback:c}),i),subscribe:o=>(r&&(Tt.joinRoom(r),Tt.on("room-changed",l=>{n.forEach(({callback:c})=>c({eventType:"UPDATE",new:l}))}),Tt.on("player-joined",l=>{n.forEach(({callback:c})=>c({eventType:"INSERT",new:l}))}),Tt.on("player-left",l=>{n.forEach(({callback:c})=>c({eventType:"DELETE",old:{id:l.playerId}}))}),Tt.on("player-changed",l=>{n.forEach(({callback:c})=>c({eventType:"UPDATE",new:l}))})),o&&setTimeout(()=>o("SUBSCRIBED"),100),i)};return t.set(e,{unsubscribe:()=>{r&&Tt.leaveRoom(r)}}),i},removeChannel:e=>{},functions:{invoke:async(e,n)=>{try{return{data:await(await fetch(`${Wt}/api/${e.replace("-","/")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.body)})).json(),error:null}}catch(r){return{data:null,error:r}}}},realtime:{connect:()=>(Tt.connect(),Promise.resolve())}}}const U=kY();function TY(t){return t.value==="A"?1:["10","J","Q","K"].includes(t.value)?0:parseInt(t.value)}function Us(t){return t.reduce((n,r)=>n+TY(r),0)%10}function mo(t){if(t.length!==2)return{isPok:!1,pokValue:null};const e=Us(t);return e===9?{isPok:!0,pokValue:9}:e===8?{isPok:!0,pokValue:8}:{isPok:!1,pokValue:null}}function uu(t){if(t.length===2){const e=mo(t);if(e.pokValue===9)return{type:"pok9",name:" 9",multiplier:2};if(e.pokValue===8)return{type:"pok8",name:" 8",multiplier:2};const n=t[0].suit===t[1].suit;if(t[0].value===t[1].value)return{type:"pair",name:"",multiplier:2};if(n)return{type:"deng",name:"",multiplier:2}}if(t.length===3){if(t[0].value===t[1].value&&t[1].value===t[2].value)return{type:"tong",name:"",multiplier:5};if(t.every(i=>["J","Q","K"].includes(i.value)))return{type:"samLeung",name:"",multiplier:3};const n=t.map(i=>i.value==="A"?1:i.value==="J"?11:i.value==="Q"?12:i.value==="K"?13:parseInt(i.value)).sort((i,o)=>i-o);if(n[1]===n[0]+1&&n[2]===n[1]+1)return{type:"straight",name:"",multiplier:3};if(t.every(i=>i.suit===t[0].suit))return{type:"flush",name:"",multiplier:3};if(t[0].value===t[1].value||t[1].value===t[2].value||t[0].value===t[2].value)return{type:"deng",name:"",multiplier:3}}return{type:"normal",name:"",multiplier:1}}function jY(t,e){const n=mo(t),r=mo(e),s=Us(t),i=Us(e),o=uu(t),l=uu(e);return n.isPok&&!r.isPok?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:!n.isPok&&r.isPok?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:n.isPok&&r.isPok?n.pokValue>r.pokValue?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:n.pokValue<r.pokValue?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}:s>i?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:s<i?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}}function Rd(){const t=["hearts","diamonds","clubs","spades"],e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],n=[];for(const r of t)for(const s of e)n.push({suit:r,value:s});return rc(n)}function rc(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function LP(t){switch(t){case"hearts":return"";case"diamonds":return"";case"clubs":return"";case"spades":return""}}function FP(t){return t==="hearts"||t==="diamonds"?"text-red-500":"text-black"}function iS(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const oS=11;function aS(t){const e=Array.from({length:oS},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*oS)+1:e[Math.floor(Math.random()*e.length)]}function RY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=Nt();m.useEffect(()=>{const b=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:N}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!N||N.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[s,t]),m.useEffect(()=>{if(t!=null&&t.id)return U.channel(`pokdeng-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},b=>{if(b.eventType==="UPDATE"){const N=b.new;e(S=>S?{...S,deck:N.deck||[],game_started:N.game_started,game_phase:N.game_phase||"waiting",current_player_index:N.current_player_index||0,is_active:N.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},b=>{if(b.eventType==="INSERT"){const N=b.new;let S=[];try{typeof N.cards=="string"?S=JSON.parse(N.cards):Array.isArray(N.cards)&&(S=N.cards)}catch(E){console.error("Error parsing cards:",E)}r(E=>E.some(k=>k.id===N.id)?E:(setTimeout(()=>{c({title:" ",description:`${N.name} `,duration:3e3})},0),[...E,{...N,cards:S}]))}else if(b.eventType==="DELETE"){const N=b.old;r(S=>{const E=S.find(k=>k.id===N.id);return E&&setTimeout(()=>{c({title:"",description:`${E.name} `,duration:3e3})},0),S.filter(k=>k.id!==N.id)})}else if(b.eventType==="UPDATE"){const N=b.new;let S=[];try{typeof N.cards=="string"?S=JSON.parse(N.cards):Array.isArray(N.cards)&&(S=N.cards)}catch(E){console.error("Error parsing cards:",E)}r(E=>E.map(k=>k.id===N.id?{...N,cards:S}:k))}}).subscribe(),()=>{}},[t==null?void 0:t.id,c]);const u=m.useCallback(async b=>{l(!0);try{await Uu();const N=iS(),S=rc(Rd()),E=aS([]),{data:k,error:T}=await U.from("rooms").insert({code:N,host_name:b,deck:S,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting"}).select().single();if(T)throw T;const{data:R,error:I}=await U.from("players").insert({room_id:k.id,name:b,is_host:!0,is_dealer:!0,avatar:E,player_order:0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:k.current_player_index||0}),r([{...R,cards:[]}]),i(R.id),c({title:"! ",description:`: ${N}`}),{...k,playerId:R.id}}catch(N){return c({title:"",description:N.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(b,N,S)=>{l(!0);try{const{data:E,error:k}=await U.from("rooms").select().eq("code",b.toUpperCase()).eq("is_active",!0).eq("game_type","pokdeng").single();if(k||!E)throw new Error(" ");const{data:T}=await U.from("players").select().eq("room_id",E.id).eq("is_active",!0);let R=S?(T||[]).find(V=>V.id===S):null;if(!R){const V=(T||[]).filter($=>$.name===N);if(V.length>0&&(R=V[0],console.log("Found player with same name, reusing:",R.id),V.length>1)){const $=V.slice(1).map(H=>H.id);await U.from("players").delete().in("id",$)}}let I;if(R)I=R,console.log("Session recovery: found existing player",I.id);else{if(E.game_started)throw new Error(" ");if(((T==null?void 0:T.length)||0)>=8)throw new Error(" ( 8 )");const V=(T||[]).map(D=>D.avatar).filter(Boolean),$=aS(V),{data:H,error:A}=await U.from("players").insert({room_id:E.id,name:N,is_host:!1,avatar:$,is_dealer:!1,player_order:(T==null?void 0:T.length)||0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(A)throw A;I=H}e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,deck:E.deck,game_started:E.game_started,game_phase:E.game_phase||"waiting",current_player_index:E.current_player_index||0});const L=V=>V.map($=>{let H=[];try{typeof $.cards=="string"?H=JSON.parse($.cards):Array.isArray($.cards)&&(H=$.cards)}catch(A){console.error("Error parsing cards for player:",$.name,A)}return{...$,cards:H}}),P=new Map;for(const V of T||[])P.set(V.id,V);return P.has(I.id)||P.set(I.id,I),r(L(Array.from(P.values()))),i(I.id),c({title:"! ",description:` ${N}`}),{room:E,playerId:I.id}}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async()=>{if(!t||n.length<2)return;const N=[...rc(Rd())];await U.from("rooms").update({game_started:!0,deck:N,game_phase:"dealing",current_player_index:0}).eq("id",t.id);for(let S=0;S<n.length;S++){const E=N.pop();await U.from("players").update({cards:[E],points:Us([E])}).eq("id",n[S].id),await new Promise(k=>setTimeout(k,500))}for(let S=0;S<n.length;S++){const E=n[S].cards.length>0?[...n[S].cards,N.pop()]:[N.pop(),N.pop()],k=Us(E);await U.from("players").update({cards:E,points:k,has_drawn:!1,result:null,multiplier:1}).eq("id",n[S].id),await new Promise(T=>setTimeout(T,500))}await U.from("rooms").update({deck:N,game_phase:"drawing"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),f=m.useCallback(async()=>{if(!t||!s)return;const b=n.find(I=>I.id===s);if(!b||b.has_drawn||b.cards.length>=3)return;const N=[...t.deck];if(N.length===0)return;const S=N.pop(),E=[...b.cards,S],k=Us(E);await U.from("rooms").update({deck:N}).eq("id",t.id),await U.from("players").update({cards:E,points:k,has_drawn:!0}).eq("id",s);const T=n.filter(I=>!I.is_dealer),R=T.findIndex(I=>I.id===s);R<T.length-1?await U.from("rooms").update({current_player_index:R+1}).eq("id",t.id):await U.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),p=m.useCallback(async()=>{if(!t||!s)return;const b=n.find(E=>E.id===s);if(!b||b.has_drawn)return;await U.from("players").update({has_drawn:!0}).eq("id",s);const N=n.filter(E=>!E.is_dealer),S=N.findIndex(E=>E.id===s);S<N.length-1?await U.from("rooms").update({current_player_index:S+1}).eq("id",t.id):await U.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),w=m.useCallback(async()=>{if(!t||!s)return;const b=n.find(T=>T.is_dealer);if(!b||b.id!==s)return;const N=[...t.deck];if(N.length===0||b.cards.length>=3)return;const S=N.pop(),E=[...b.cards,S],k=Us(E);await U.from("rooms").update({deck:N}).eq("id",t.id),await U.from("players").update({cards:E,points:k,has_drawn:!0}).eq("id",b.id)},[t,s,n]),x=m.useCallback(async()=>{if(!t||!s)return;const b=n.find(N=>N.is_dealer);!b||b.id!==s||b.has_drawn||await U.from("players").update({has_drawn:!0}).eq("id",b.id)},[t,s,n]),g=m.useCallback(async()=>{if(!t)return;const b=n.find(S=>S.is_dealer);if(!b)return;const N=n.map(S=>{if(S.is_dealer)return{id:S.id,result:null,multiplier:1};const E=jY(S.cards,b.cards);return{id:S.id,result:E.result==="player_win"?"player_win":"dealer_win",multiplier:E.playerMultiplier}});for(const S of N)await U.from("players").update({result:S.result,multiplier:S.multiplier}).eq("id",S.id);await U.from("rooms").update({game_phase:"ended"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),y=m.useCallback(async()=>{if(!t)return;const N=[...rc(Rd())],S=[...n].sort((R,I)=>R.player_order-I.player_order),k=(S.findIndex(R=>R.is_dealer)+1)%S.length,T=n.map(R=>{const I=[N.pop(),N.pop()],L=Us(I),P=R.id===S[k].id;return{id:R.id,cards:I,points:L,has_drawn:!1,result:null,multiplier:1,is_dealer:P}});await U.from("rooms").update({deck:N,game_phase:"drawing",current_player_index:0}).eq("id",t.id);for(const R of T)await U.from("players").update({cards:R.cards,points:R.points,has_drawn:R.has_drawn,result:R.result,multiplier:R.multiplier,is_dealer:R.is_dealer}).eq("id",R.id);c({title:" !",description:""})},[t,n,c]),v=m.useCallback(async()=>{if(!s||!t)return;await U.from("players").delete().eq("id",s);const{data:b}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!b||b.length===0)&&await U.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),_=m.useCallback(async(b,N=!1)=>{l(!0);try{const S=iS(),E=rc(Rd()),{data:k,error:T}=await U.from("rooms").insert({code:S,host_name:b,deck:E,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting",game_started:!1}).select().single();if(T)throw T;if(N)return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([]),i(null),c({title:" LIVE Mode!",description:` ${S}  - `}),k;const{data:R,error:I}=await U.from("players").insert({room_id:k.id,name:b,is_host:!0,is_dealer:!0,player_order:0,cards:[]}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([{...R,cards:[]}]),i(R.id),c({title:" Quick Start!",description:` ${S} `}),k}catch(S){return c({title:"",description:S.message,variant:"destructive"}),null}finally{l(!1)}},[c]),C=m.useCallback(async b=>{if(t)try{await U.from("players").update({is_dealer:!1}).eq("room_id",t.id).eq("is_dealer",!0),await U.from("players").update({is_dealer:!0}).eq("id",b),c({title:" ",duration:2e3})}catch(N){console.error("Error setting dealer:",N),c({title:" ",variant:"destructive",duration:3e3})}},[t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,standCard:p,dealerDraw:w,dealerStand:x,showdown:g,nextRound:y,leaveRoom:v,quickStart:_,setDealer:C}}const Tf=[{id:1,category:"",word_civilian:"",word_undercover:""},{id:2,category:"",word_civilian:"",word_undercover:""},{id:3,category:"",word_civilian:"",word_undercover:""},{id:4,category:"",word_civilian:"",word_undercover:""},{id:5,category:"",word_civilian:"",word_undercover:""},{id:6,category:"",word_civilian:"",word_undercover:""},{id:7,category:"",word_civilian:"",word_undercover:""},{id:8,category:"",word_civilian:"",word_undercover:""},{id:9,category:"",word_civilian:"",word_undercover:""},{id:10,category:"",word_civilian:"",word_undercover:""},{id:11,category:"",word_civilian:"",word_undercover:""},{id:12,category:"",word_civilian:"",word_undercover:""},{id:13,category:"",word_civilian:"",word_undercover:""},{id:14,category:"",word_civilian:"",word_undercover:""},{id:15,category:"",word_civilian:"",word_undercover:""},{id:16,category:"",word_civilian:"",word_undercover:""},{id:17,category:"",word_civilian:"",word_undercover:""},{id:18,category:"",word_civilian:"",word_undercover:""},{id:19,category:"",word_civilian:"",word_undercover:""},{id:20,category:"",word_civilian:"",word_undercover:""},{id:21,category:"",word_civilian:"",word_undercover:""},{id:22,category:"",word_civilian:"",word_undercover:""},{id:23,category:"",word_civilian:"",word_undercover:""},{id:24,category:"",word_civilian:"",word_undercover:""},{id:25,category:"",word_civilian:"",word_undercover:""},{id:26,category:"",word_civilian:"",word_undercover:""},{id:27,category:"",word_civilian:"",word_undercover:""},{id:28,category:"",word_civilian:"",word_undercover:""},{id:29,category:"",word_civilian:"",word_undercover:""},{id:30,category:"",word_civilian:"",word_undercover:""},{id:31,category:"",word_civilian:"",word_undercover:""},{id:32,category:"",word_civilian:"",word_undercover:""},{id:33,category:"",word_civilian:"",word_undercover:""},{id:34,category:"",word_civilian:"",word_undercover:""},{id:35,category:"",word_civilian:"",word_undercover:""},{id:36,category:"",word_civilian:"",word_undercover:""},{id:37,category:"",word_civilian:"",word_undercover:""},{id:38,category:"",word_civilian:"",word_undercover:""},{id:39,category:"18+",word_civilian:"",word_undercover:""},{id:40,category:"18+",word_civilian:"",word_undercover:""},{id:41,category:"18+",word_civilian:"",word_undercover:""},{id:42,category:"18+",word_civilian:"",word_undercover:""}];function IY(t){return t<=4||t<=6?1:(t<=8,2)}function PY(t){let e=Tf;return t&&t!==""&&(e=Tf.filter(n=>n.category===t)),e[Math.floor(Math.random()*e.length)]}function AY(t,e,n=!1){const r=IY(t.length),s=n&&t.length>=5?1:0,i=new Set;for(;i.size<r;)i.add(Math.floor(Math.random()*t.length));const o=new Set;if(s>0)for(;o.size<s;){const l=Math.floor(Math.random()*t.length);i.has(l)||o.add(l)}return t.map((l,c)=>{let u="CIVILIAN",d=e.word_civilian;return i.has(c)?(u="UNDERCOVER",d=e.word_undercover):o.has(c)&&(u="MR_WHITE",d="???"),{id:l.id,name:l.name,avatar:l.avatar,role:u,word:d,is_alive:!0,vote_count:0,has_voted:!1,is_host:l.is_host}})}function MY(t){const e=t.filter(s=>s.is_alive),n=e.filter(s=>s.role==="UNDERCOVER"),r=e.filter(s=>s.role==="CIVILIAN"||s.role==="MR_WHITE");return n.length>=r.length?{isGameOver:!0,winner:"UNDERCOVER",reason:"! "}:n.length===0?{isGameOver:!0,winner:"CIVILIAN",reason:" ! "}:{isGameOver:!1,winner:null,reason:""}}function DY(t){const e=t.filter(s=>s.is_alive);if(e.length===0)return null;const n=Math.max(...e.map(s=>s.vote_count));if(n===0)return null;const r=e.filter(s=>s.vote_count===n);return r[Math.floor(Math.random()*r.length)]}function $P(){const t=new Set(Tf.map(e=>e.category));return["",...Array.from(t)]}let ol=[],OY=1e3;function Id(){return[...Tf,...ol]}function LY(t){const e={...t,id:OY++};return ol.push(e),e}function FY(t){if(t.id>=1e3){const e=ol.findIndex(n=>n.id===t.id);e!==-1&&(ol[e]=t)}}function $Y(t){t>=1e3&&(ol=ol.filter(e=>e.id!==t))}function VY(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const lS=15;function cS(t){const e=Array.from({length:lS},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*lS)+1:e[Math.floor(Math.random()*e.length)]}function UY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=Nt();m.useEffect(()=>{const C=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:b}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!b||b.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[s,t]),m.useEffect(()=>{if(t!=null&&t.id)return U.channel(`undercover-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},C=>{if(C.eventType==="UPDATE"){const b=C.new;e(N=>N?{...N,game_phase:b.game_phase||"WAITING",current_turn_index:b.current_player_index||0,is_active:b.is_active,vocabulary:b.current_card||null,round:b.cards_remaining||1,timer_seconds:b.timer_seconds||30,include_mr_white:b.include_mr_white||!1,selected_category:b.selected_category||""}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},C=>{if(C.eventType==="INSERT"){const b=C.new;r(N=>N.some(S=>S.id===b.id)?N:(setTimeout(()=>{c({title:" ",description:`${b.name} `,duration:3e3})},0),[...N,{id:b.id,name:b.name,avatar:b.avatar,role:b.role||"CIVILIAN",word:b.word||"",is_alive:b.is_alive??!0,vote_count:b.vote_count||0,has_voted:b.has_voted||!1,voted_for:b.voted_for,is_host:b.is_host}]))}else if(C.eventType==="DELETE"){const b=C.old;console.log("DELETE event received for player:",b.id,b.name),r(N=>{const S=N.find(k=>k.id===b.id);S?(console.log("Removing player from list:",S.name),setTimeout(()=>{c({title:"",description:`${S.name} `,duration:3e3})},0)):console.log("Player not found in current list, ID:",b.id);const E=N.filter(k=>k.id!==b.id);return console.log("Players after filter:",E.length,"players"),E})}else if(C.eventType==="UPDATE"){const b=C.new;r(N=>N.map(S=>S.id===b.id?{...S,role:b.role||S.role,word:b.word||S.word,is_alive:b.is_alive??S.is_alive,vote_count:b.vote_count??S.vote_count,has_voted:b.has_voted??S.has_voted,voted_for:b.voted_for}:S))}}).subscribe(),()=>{}},[t==null?void 0:t.id,c]);const u=m.useCallback(async C=>{l(!0);try{await Uu();const b=VY(),N=cS([]),{data:S,error:E}=await U.from("rooms").insert({code:b,host_name:C,game_type:"undercover",game_phase:"WAITING",cards_remaining:1}).select().single();if(E)throw E;const{data:k,error:T}=await U.from("players").insert({room_id:S.id,name:C,is_host:!0,avatar:N,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(T)throw T;return e({id:S.id,code:S.code,host_name:S.host_name,is_active:S.is_active,game_phase:"WAITING",current_turn_index:0,vocabulary:null,round:1,timer_seconds:30,include_mr_white:!1,selected_category:""}),r([{id:k.id,name:k.name,avatar:k.avatar,role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,is_host:!0}]),i(k.id),c({title:"!",description:`: ${b}`}),{...S,playerId:k.id}}catch(b){return c({title:"",description:b.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(C,b,N)=>{l(!0);try{const{data:S,error:E}=await U.from("rooms").select("*").eq("code",C.toUpperCase()).eq("is_active",!0).single();if(E)throw new Error("");const{data:k}=await U.from("players").select("*").eq("room_id",S.id).eq("is_active",!0);let T=N?(k||[]).find(P=>P.id===N):null;if(!T){const P=(k||[]).filter(V=>V.name===b);if(P.length>0&&(T=P[0],console.log("Found player with same name, reusing:",T.id),P.length>1)){const V=P.slice(1).map($=>$.id);console.log("Cleaning up duplicate players:",V),await U.from("players").delete().in("id",V)}}let R;if(T)R=T,console.log("Session recovery: found existing player",R.id,"is_host:",R.is_host);else{if(S.game_phase!=="WAITING")throw new Error(" ");const P=(k||[]).map(A=>A.avatar),V=cS(P),{data:$,error:H}=await U.from("players").insert({room_id:S.id,name:b,is_host:!1,avatar:V,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(H)throw H;R=$}e({id:S.id,code:S.code,host_name:S.host_name,is_active:S.is_active,game_phase:S.game_phase||"WAITING",current_turn_index:S.current_player_index||0,vocabulary:S.current_card||null,round:S.cards_remaining||1,timer_seconds:S.timer_seconds||30,include_mr_white:S.include_mr_white||!1,selected_category:S.selected_category||""});const I=new Map;for(const P of k||[])I.set(P.id,P);I.has(R.id)||I.set(R.id,R);const L=Array.from(I.values()).map(P=>({id:P.id,name:P.name,avatar:P.avatar,role:P.role||"CIVILIAN",word:P.word||"",is_alive:P.is_alive??!0,vote_count:P.vote_count||0,has_voted:P.has_voted||!1,is_host:P.is_host}));return console.log("All players after join:",L.map(P=>({name:P.name,is_host:P.is_host}))),r(L),i(R.id),c({title:"!",description:` ${b}`}),{room:S,playerId:R.id}}catch(S){return c({title:"",description:S.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async(C="",b=!1)=>{if(console.log("startGame called with:",{category:C,includeMrWhite:b,room:t,playersCount:n.length}),!t||n.length<4){c({title:"",description:" 4 ",variant:"destructive"});return}try{const N=PY(C);console.log("Selected vocabulary:",N);const S=AY(n.map(k=>({id:k.id,name:k.name,avatar:k.avatar,is_host:k.is_host})),N,b);console.log("Assigned roles:",S);for(const k of S){const{error:T}=await U.from("players").update({role:k.role,word:k.word,is_alive:!0,vote_count:0,has_voted:!1}).eq("id",k.id);if(T)throw console.error("Error updating player:",T),T}console.log("Players updated successfully");const{error:E}=await U.from("rooms").update({game_phase:"REVEAL_WORD",current_card:N,current_player_index:0,cards_remaining:1,game_started:!0}).eq("id",t.id);if(E)throw console.error("Error updating room:",E),E;console.log("Room updated successfully"),r(S),c({title:" !",description:""})}catch(N){console.error("Error starting game:",N),c({title:"",description:" ",variant:"destructive"})}},[t,n,c]),f=m.useCallback(async()=>{t&&await U.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0}).eq("id",t.id)},[t]),p=m.useCallback(async()=>{if(!t)return;const C=n.filter(N=>N.is_alive),b=(t.current_turn_index+1)%C.length;await U.from("rooms").update({current_player_index:b}).eq("id",t.id)},[t,n]),w=m.useCallback(async()=>{if(t){for(const C of n)await U.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",C.id);await U.from("rooms").update({game_phase:"VOTING"}).eq("id",t.id)}},[t,n]),x=m.useCallback(async()=>{if(!t)return;const{data:C}=await U.from("players").select("*").eq("room_id",t.id);if(!C)return;const b=C.map(S=>({id:S.id,name:S.name,avatar:S.avatar,role:S.role,word:S.word||"",is_alive:S.is_alive,vote_count:S.vote_count||0,has_voted:S.has_voted||!1,voted_for:S.voted_for,is_host:S.is_host})),N=DY(b);N&&(await U.from("players").update({is_alive:!1}).eq("id",N.id),c({title:` ${N.name} !`,description:N.role==="UNDERCOVER"?"!":N.role==="MR_WHITE"?"! ":" "})),await U.from("rooms").update({game_phase:"VOTE_RESULT"}).eq("id",t.id)},[t,c]),g=m.useCallback(async C=>{if(!s||!t)return;const b=n.find(k=>k.id===s);if(!b||b.has_voted||!b.is_alive)return;await U.from("players").update({has_voted:!0,voted_for:C}).eq("id",s);const N=n.find(k=>k.id===C);N&&await U.from("players").update({vote_count:(N.vote_count||0)+1}).eq("id",C),c({title:" ",description:` ${N==null?void 0:N.name}`});const S=n.filter(k=>k.is_alive);S.filter(k=>k.has_voted).length+1>=S.length&&await x()},[s,n,t,c,x]),y=m.useCallback(async()=>{if(!t)return;const{data:C}=await U.from("players").select("*").eq("room_id",t.id);if(!C)return;const b=C.map(S=>({id:S.id,name:S.name,avatar:S.avatar,role:S.role,word:S.word||"",is_alive:S.is_alive,vote_count:S.vote_count||0,has_voted:S.has_voted||!1,voted_for:S.voted_for,is_host:S.is_host})),N=MY(b);if(N.isGameOver)await U.from("rooms").update({game_phase:"FINISHED"}).eq("id",t.id),c({title:N.winner==="CIVILIAN"?" !":"!",description:N.reason});else{await U.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0,cards_remaining:(t.round||1)+1}).eq("id",t.id);for(const S of b)await U.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id)}},[t,c]),v=m.useCallback(async()=>{if(t){for(const C of n)await U.from("players").update({role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,voted_for:null}).eq("id",C.id);await U.from("rooms").update({game_phase:"WAITING",current_player_index:0,current_card:null,cards_remaining:1,game_started:!1}).eq("id",t.id),c({title:" ",description:"!"})}},[t,n,c]),_=m.useCallback(async()=>{if(!s||!t)return;console.log("Leaving room - deleting player:",s);const{error:C}=await U.from("players").delete().eq("id",s);if(C){console.error("Error deleting player:",C),c({title:"",description:"",variant:"destructive"});return}console.log("Player deleted successfully");const{data:b}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!b||b.length===0)&&(console.log("No remaining players, deleting room"),await U.from("rooms").delete().eq("id",t.id)),e(null),r([]),i(null),c({title:" "})},[s,t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,categories:$P(),createRoom:u,joinRoom:d,startGame:h,startDescribePhase:f,nextTurn:p,startVoting:w,votePlayer:g,endVoting:x,checkResultAndContinue:y,restartGame:v,leaveRoom:_}}function BY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Nt();m.useEffect(()=>{const N=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:S}=await U.from("players").select("id").eq("room_id",t.id);(!S||S.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N)}},[s,t]);const h=m.useCallback(async()=>{let N=localStorage.getItem("anonymousUserId");N||(N=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",N));const{data:S,error:E}=await U.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(E){console.error("Error fetching questions:",E);return}const k=(S||[]).filter(T=>T.is_default===!0||T.created_by===N);console.log(` Loaded ${k.length} questions (${(S||[]).filter(T=>T.is_default).length} default + ${k.length-(S||[]).filter(T=>T.is_default).length} custom)`),l(k)},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback((N=[])=>{if(o.length===0)return console.log(" No questions available at all"),null;const S=o.filter(k=>!N.includes(k.id));if(console.log(` Available questions: ${S.length} of ${o.length} total (${N.length} used)`),S.length===0){console.log(" All questions used! Resetting and picking from full set");const k=o[Math.floor(Math.random()*o.length)];return console.log(` Selected question (reset): "${k.question}"`),k}const E=S[Math.floor(Math.random()*S.length)];return console.log(` Selected question: "${E.question}"`),E},[o]),p=m.useCallback(()=>{var k;if(n.length===0)return null;const S=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((k=[...n].sort((T,R)=>T.player_order-R.player_order)[S])==null?void 0:k.id)||null},[n,t==null?void 0:t.current_player_index]),w=m.useCallback(async()=>{if(!t)return;const N=t.game_state,S=(N==null?void 0:N.used_question_ids)||[],E=f(S);if(!E){d({title:"",description:"",variant:"destructive"});return}const k=p();if(!k)return;const T=o.filter(P=>!S.includes(P.id)).length;let R;T===0?(console.log(" Resetting used questions list"),R=[E.id],d({title:" ",description:" !"})):R=[...S,E.id];const I={phase:"ASKING",asker_id:k,victim_id:null,question:E.question,question_id:E.id,is_revealed:!1,used_question_ids:R},{error:L}=await U.from("rooms").update({game_state:I,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);L&&(console.error("Error starting round:",L),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),x=m.useCallback(async N=>{if(!t||!t.game_state){console.error(" Cannot select victim: No room or game state"),d({title:"Error",description:"",variant:"destructive"});return}console.log(" Selecting victim:",N);const S=t.game_state;if(S.phase!=="ASKING"){console.error(" Cannot select victim: Wrong phase",S.phase),d({title:"Error",description:"",variant:"destructive"});return}const E={...S,phase:"REVEALING",victim_id:N};console.log(" Updating game state to REVEALING with victim:",N);const{error:k}=await U.from("rooms").update({game_state:E}).eq("id",t.id);k?(console.error(" Error selecting victim:",k),d({title:"Error",description:`Failed to select victim: ${k.message}`,variant:"destructive"})):console.log(" Victim selected successfully")},[t,d]),g=m.useCallback(async()=>{if(!t||!t.game_state)return;const S={...t.game_state,is_revealed:!0},{error:E}=await U.from("rooms").update({game_state:S}).eq("id",t.id);E&&(console.error("Error revealing question:",E),d({title:"Error",description:"Failed to reveal question"}))},[t,d]),y=m.useCallback(async()=>{await w()},[w]),v=m.useCallback(async N=>{u(!0);try{await Uu();const S=Math.random().toString(36).substring(2,8).toUpperCase(),{data:E,error:k}=await U.from("rooms").insert({code:S,host_name:N,game_type:"paranoia",game_started:!1,game_state:null,current_player_index:0}).select().single();if(k)throw k;const{data:T,error:R}=await U.from("players").insert({room_id:E.id,name:N,is_host:!0,player_order:0}).select().single();if(R)throw R;return e(E),i(T.id),r([T]),{code:E.code,playerId:T.id}}catch(S){return console.error("Error creating room:",S),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),_=m.useCallback(async(N,S,E)=>{u(!0);try{const{data:k,error:T}=await U.from("rooms").select("*").eq("code",N.toUpperCase()).eq("game_type","paranoia").single();if(T)throw T;const{data:R}=await U.from("players").select("*").eq("room_id",k.id);let I=E?(R||[]).find(V=>V.id===E):null;if(!I){const V=(R||[]).filter($=>$.name===S);if(V.length>0&&(I=V[0],console.log("Found player with same name, reusing:",I.id),V.length>1)){const $=V.slice(1).map(H=>H.id);await U.from("players").delete().in("id",$)}}let L;if(I)L=I,console.log("Session recovery: found existing player",L.id);else{const{data:V,error:$}=await U.from("players").insert({room_id:k.id,name:S,is_host:!1,player_order:(R==null?void 0:R.length)||0}).select().single();if($)throw $;L=V}e(k),i(L.id);const P=new Map;for(const V of R||[])P.set(V.id,V);return P.has(L.id)||P.set(L.id,L),r(Array.from(P.values())),{room:k,playerId:L.id}}catch(k){return console.error("Error joining room:",k),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),C=m.useCallback(async()=>{if(!t)return;const{error:N}=await U.from("rooms").update({game_started:!0}).eq("id",t.id);if(N){console.error("Error starting game:",N),d({title:"Error",description:"Failed to start game"});return}await w()},[t,w,d]),b=m.useCallback(async()=>{s&&(await U.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(t)return U.channel(`paranoia-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},N=>{N.eventType==="UPDATE"&&e(N.new)}).subscribe(),U.channel(`paranoia-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:N}=await U.from("players").select("*").eq("room_id",t.id).order("player_order");r(N||[])}).subscribe(),()=>{}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,questions:o,createRoom:v,joinRoom:_,startGame:C,startRound:w,selectVictim:x,revealQuestion:g,skipQuestion:y,leaveRoom:b}}function zY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Nt();m.useEffect(()=>{const b=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:N}=await U.from("players").select("id").eq("room_id",t.id);(!N||N.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",b),()=>{window.removeEventListener("beforeunload",b)}},[s,t]);const h=m.useCallback(async()=>{const{data:b,error:N}=await U.from("five_sec_questions").select("*");if(N){console.error("Error fetching questions:",N);return}l(b||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback(()=>o.length===0?null:o[Math.floor(Math.random()*o.length)],[o]),p=m.useCallback(()=>{var E;if(n.length===0)return null;const N=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((E=[...n].sort((k,T)=>k.player_order-T.player_order)[N])==null?void 0:E.id)||null},[n,t==null?void 0:t.current_player_index]),w=m.useCallback(async()=>{var R;if(!t)return;const b=f();if(!b){d({title:"Error",description:"No questions available"});return}const N=p();if(!N)return;const S=((R=t.game_state)==null?void 0:R.timeLimit)||5,E=new Date(Date.now()+S*1e3).toISOString(),k={phase:"PLAYING",player_id:N,topic:b.topic,end_time:E,votes:{},timeLimit:S},{error:T}=await U.from("rooms").update({game_state:k,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);T&&(console.error("Error starting round:",T),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),x=m.useCallback(async()=>{if(console.log("finishAnswering called",{room:t==null?void 0:t.id,game_state:t==null?void 0:t.game_state}),!t||!t.game_state){console.error("Cannot finish answering: no room or game_state");return}const N={...t.game_state,phase:"JUDGING"};console.log("Updating to JUDGING phase",N);const{error:S,data:E}=await U.from("rooms").update({game_state:N}).eq("id",t.id).select();S?(console.error("Error finishing answering:",S),d({title:"Error",description:"Failed to finish answering"})):console.log("Successfully updated to JUDGING",E)},[t,d]),g=m.useCallback(async b=>{if(!t||!t.game_state||!s)return;const N=t.game_state;if(s===N.player_id)return;const S={...N.votes,[s]:b},E={...N,votes:S},{error:k}=await U.from("rooms").update({game_state:E}).eq("id",t.id);k&&(console.error("Error voting:",k),d({title:"Error",description:"Failed to vote"}))},[t,s,d]),y=m.useCallback(async(b,N=5)=>{u(!0);try{await Uu();const S=Math.random().toString(36).substring(2,8).toUpperCase(),{data:E,error:k}=await U.from("rooms").insert({code:S,host_name:b,game_type:"fivesec",game_started:!1,game_state:{timeLimit:N},current_player_index:0}).select().single();if(k)throw k;const{data:T,error:R}=await U.from("players").insert({room_id:E.id,name:b,is_host:!0,player_order:0,points:0}).select().single();if(R)throw R;return e(E),i(T.id),r([T]),{code:E.code,playerId:T.id}}catch(S){return console.error("Error creating room:",S),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),v=m.useCallback(async(b,N,S)=>{u(!0);try{const{data:E,error:k}=await U.from("rooms").select("*").eq("code",b.toUpperCase()).eq("game_type","fivesec").single();if(k)throw k;const{data:T}=await U.from("players").select("*").eq("room_id",E.id);let R=S?(T||[]).find(P=>P.id===S):null;if(!R){const P=(T||[]).filter(V=>V.name===N);if(P.length>0&&(R=P[0],console.log("Found player with same name, reusing:",R.id),P.length>1)){const V=P.slice(1).map($=>$.id);await U.from("players").delete().in("id",V)}}let I;if(R)I=R,console.log("Session recovery: found existing player",I.id);else{const{data:P,error:V}=await U.from("players").insert({room_id:E.id,name:N,is_host:!1,player_order:(T==null?void 0:T.length)||0,points:0}).select().single();if(V)throw V;I=P}e(E),i(I.id);const L=new Map;for(const P of T||[])L.set(P.id,P);return L.has(I.id)||L.set(I.id,I),r(Array.from(L.values())),{room:E,playerId:I.id}}catch(E){return console.error("Error joining room:",E),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),_=m.useCallback(async()=>{if(!t)return;const{error:b}=await U.from("rooms").update({game_started:!0}).eq("id",t.id);if(b){console.error("Error starting game:",b),d({title:"Error",description:"Failed to start game"});return}await w()},[t,w,d]),C=m.useCallback(async()=>{s&&(await U.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(t)return U.channel(`fivesec-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},b=>{b.eventType==="UPDATE"&&e(b.new)}).subscribe(),U.channel(`fivesec-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:b}=await U.from("players").select("*").eq("room_id",t.id).order("player_order");r(b||[])}).subscribe(),()=>{}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:y,joinRoom:v,startGame:_,startRound:w,finishAnswering:x,vote:g,leaveRoom:C}}const Ct={PLAYER_ID:"kcp_player_id",PLAYER_NAME:"kcp_player_name",ROOM_CODE:"kcp_room_code",GAME_TYPE:"kcp_game_type",AVATAR:"kcp_avatar"};function uS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function WY(){const[t,e]=m.useState({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),[n,r]=m.useState(!0),[s,i]=m.useState(!1);m.useEffect(()=>{(()=>{const d=new URLSearchParams(window.location.search),h=d.get("room"),f=d.get("game"),p=localStorage.getItem(Ct.PLAYER_ID),w=localStorage.getItem(Ct.PLAYER_NAME),x=h||localStorage.getItem(Ct.ROOM_CODE),g=f||localStorage.getItem(Ct.GAME_TYPE),y=localStorage.getItem(Ct.AVATAR),v=y?parseInt(y,10):null;e({playerId:p,playerName:w,roomCode:x,gameType:g,avatar:v});const C=!!(p&&x&&g);i(C),r(!1),C&&console.log("Session found:",{roomCode:x,gameType:g,playerName:w})})()},[]);const o=m.useCallback(u=>{const d={...t,...u};if(d.playerId||(d.playerId=uS()),d.playerId&&localStorage.setItem(Ct.PLAYER_ID,d.playerId),d.playerName&&localStorage.setItem(Ct.PLAYER_NAME,d.playerName),d.roomCode&&localStorage.setItem(Ct.ROOM_CODE,d.roomCode),d.gameType&&localStorage.setItem(Ct.GAME_TYPE,d.gameType),d.avatar!==null&&d.avatar!==void 0&&localStorage.setItem(Ct.AVATAR,d.avatar.toString()),d.roomCode&&d.gameType){const h=new URL(window.location.href);h.searchParams.set("room",d.roomCode),h.searchParams.set("game",d.gameType),window.history.replaceState({},"",h.toString())}e(d),i(!!(d.playerId&&d.roomCode&&d.gameType))},[t]),l=m.useCallback(()=>{localStorage.removeItem(Ct.PLAYER_ID),localStorage.removeItem(Ct.PLAYER_NAME),localStorage.removeItem(Ct.ROOM_CODE),localStorage.removeItem(Ct.GAME_TYPE),localStorage.removeItem(Ct.AVATAR);const u=new URL(window.location.href);u.searchParams.delete("room"),u.searchParams.delete("game"),window.history.replaceState({},"",u.pathname),e({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),i(!1)},[]),c=m.useCallback(()=>{let u=localStorage.getItem(Ct.PLAYER_ID);return u||(u=uS(),localStorage.setItem(Ct.PLAYER_ID,u)),u},[]);return{sessionData:t,isRecovering:n,hasSession:s,saveSession:o,clearSession:l,getOrCreatePlayerId:c}}const HY=im("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/5 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-muted hover:text-foreground active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 active:scale-[0.98]",glass:"bg-card/80 backdrop-blur border border-border text-foreground hover:bg-card active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?MO:"button";return a.jsx(o,{className:F(HY({variant:e,size:n,className:t})),ref:i,...s})});M.displayName="Button";const ge=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:F("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ge.displayName="Input";var Tg="focusScope.autoFocusOnMount",jg="focusScope.autoFocusOnUnmount",dS={bubbles:!1,cancelable:!0},GY="FocusScope",nb=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=ft(s),d=ft(i),h=m.useRef(null),f=ve(e,x=>c(x)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(_){if(p.paused||!l)return;const C=_.target;l.contains(C)?h.current=C:Ps(h.current,{select:!0})},g=function(_){if(p.paused||!l)return;const C=_.relatedTarget;C!==null&&(l.contains(C)||Ps(h.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const b of _)b.removedNodes.length>0&&Ps(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",g);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",g),v.disconnect()}}},[r,l,p.paused]),m.useEffect(()=>{if(l){fS.add(p);const x=document.activeElement;if(!l.contains(x)){const y=new CustomEvent(Tg,dS);l.addEventListener(Tg,u),l.dispatchEvent(y),y.defaultPrevented||(qY(JY(VP(l)),{select:!0}),document.activeElement===x&&Ps(l))}return()=>{l.removeEventListener(Tg,u),setTimeout(()=>{const y=new CustomEvent(jg,dS);l.addEventListener(jg,d),l.dispatchEvent(y),y.defaultPrevented||Ps(x??document.body,{select:!0}),l.removeEventListener(jg,d),fS.remove(p)},0)}}},[l,u,d,p]);const w=m.useCallback(x=>{if(!n&&!r||p.paused)return;const g=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,y=document.activeElement;if(g&&y){const v=x.currentTarget,[_,C]=KY(v);_&&C?!x.shiftKey&&y===C?(x.preventDefault(),n&&Ps(_,{select:!0})):x.shiftKey&&y===_&&(x.preventDefault(),n&&Ps(C,{select:!0})):y===v&&x.preventDefault()}},[n,r,p.paused]);return a.jsx(se.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});nb.displayName=GY;function qY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ps(r,{select:e}),document.activeElement!==n)return}function KY(t){const e=VP(t),n=hS(e,t),r=hS(e.reverse(),t);return[n,r]}function VP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hS(t,e){for(const n of t)if(!YY(n,{upTo:e}))return n}function YY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function QY(t){return t instanceof HTMLInputElement&&"select"in t}function Ps(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&QY(t)&&e&&t.select()}}var fS=XY();function XY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mS(t,e),t.unshift(e)},remove(e){var n;t=mS(t,e),(n=t[0])==null||n.resume()}}}function mS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function JY(t){return t.filter(e=>e.tagName!=="A")}var Rg=0;function UP(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??pS()),document.body.insertAdjacentElement("beforeend",t[1]??pS()),Rg++,()=>{Rg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rg--}},[])}function pS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kr=function(){return kr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kr.apply(this,arguments)};function BP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ZY(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var uh="right-scroll-bar-position",dh="width-before-scroll-bar",eQ="with-scroll-bars-hidden",tQ="--removed-body-scroll-bar-size";function Ig(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function nQ(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var rQ=typeof window<"u"?m.useLayoutEffect:m.useEffect,gS=new WeakMap;function sQ(t,e){var n=nQ(null,function(r){return t.forEach(function(s){return Ig(s,r)})});return rQ(function(){var r=gS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Ig(l,null)}),i.forEach(function(l){s.has(l)||Ig(l,o)})}gS.set(n,t)},[t]),n}function iQ(t){return t}function oQ(t,e){e===void 0&&(e=iQ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function aQ(t){t===void 0&&(t={});var e=oQ(null);return e.options=kr({async:!0,ssr:!1},t),e}var zP=function(t){var e=t.sideCar,n=BP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,kr({},n))};zP.isSideCarExport=!0;function lQ(t,e){return t.useMedium(e),zP}var WP=aQ(),Pg=function(){},$m=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Pg,onWheelCapture:Pg,onTouchMoveCapture:Pg}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,x=t.inert,g=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,_=t.gapMode,C=BP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,N=sQ([n,e]),S=kr(kr({},C),s);return m.createElement(m.Fragment,null,d&&m.createElement(b,{sideCar:WP,removeScrollBar:u,shards:h,noRelative:p,noIsolation:w,inert:x,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:_}),o?m.cloneElement(m.Children.only(l),kr(kr({},S),{ref:N})):m.createElement(v,kr({},S,{className:c,ref:N}),l))});$m.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$m.classNames={fullWidth:dh,zeroRight:uh};var cQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=cQ();return e&&t.setAttribute("nonce",e),t}function dQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function hQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var fQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=uQ())&&(dQ(e,n),hQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},mQ=function(){var t=fQ();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},HP=function(){var t=mQ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},pQ={left:0,top:0,right:0,gap:0},Ag=function(t){return parseInt(t||"",10)||0},gQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ag(n),Ag(r),Ag(s)]},vQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return pQ;var e=gQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},xQ=HP(),Ra="data-scroll-locked",yQ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(eQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ra,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(uh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(dh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(uh," .").concat(uh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dh," .").concat(dh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ra,`] {
    `).concat(tQ,": ").concat(l,`px;
  }
`)},vS=function(){var t=parseInt(document.body.getAttribute(Ra)||"0",10);return isFinite(t)?t:0},wQ=function(){m.useEffect(function(){return document.body.setAttribute(Ra,(vS()+1).toString()),function(){var t=vS()-1;t<=0?document.body.removeAttribute(Ra):document.body.setAttribute(Ra,t.toString())}},[])},bQ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;wQ();var i=m.useMemo(function(){return vQ(s)},[s]);return m.createElement(xQ,{styles:yQ(i,!e,s,n?"":"!important")})},qv=!1;if(typeof window<"u")try{var Pd=Object.defineProperty({},"passive",{get:function(){return qv=!0,!0}});window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{qv=!1}var Wo=qv?{passive:!1}:!1,_Q=function(t){return t.tagName==="TEXTAREA"},GP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_Q(t)&&n[e]==="visible")},NQ=function(t){return GP(t,"overflowY")},CQ=function(t){return GP(t,"overflowX")},xS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=qP(t,r);if(s){var i=KP(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},SQ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},EQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},qP=function(t,e){return t==="v"?NQ(e):CQ(e)},KP=function(t,e){return t==="v"?SQ(e):EQ(e)},kQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},TQ=function(t,e,n,r,s){var i=kQ(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var p=KP(t,l),w=p[0],x=p[1],g=p[2],y=x-g-i*w;(w||y)&&qP(t,l)&&(h+=y,f+=w);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Ad=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yS=function(t){return[t.deltaX,t.deltaY]},wS=function(t){return t&&"current"in t?t.current:t},jQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},RQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},IQ=0,Ho=[];function PQ(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(IQ++)[0],i=m.useState(HP)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=ZY([t.lockRef.current],(t.shards||[]).map(wS),!0).filter(Boolean);return x.forEach(function(g){return g.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(x,g){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var y=Ad(x),v=n.current,_="deltaX"in x?x.deltaX:v[0]-y[0],C="deltaY"in x?x.deltaY:v[1]-y[1],b,N=x.target,S=Math.abs(_)>Math.abs(C)?"h":"v";if("touches"in x&&S==="h"&&N.type==="range")return!1;var E=xS(S,N);if(!E)return!0;if(E?b=S:(b=S==="v"?"h":"v",E=xS(S,N)),!E)return!1;if(!r.current&&"changedTouches"in x&&(_||C)&&(r.current=b),!b)return!0;var k=r.current||b;return TQ(k,g,x,k==="h"?_:C,!0)},[]),c=m.useCallback(function(x){var g=x;if(!(!Ho.length||Ho[Ho.length-1]!==i)){var y="deltaY"in g?yS(g):Ad(g),v=e.current.filter(function(b){return b.name===g.type&&(b.target===g.target||g.target===b.shadowParent)&&jQ(b.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(wS).filter(Boolean).filter(function(b){return b.contains(g.target)}),C=_.length>0?l(g,_[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),u=m.useCallback(function(x,g,y,v){var _={name:x,delta:g,target:y,should:v,shadowParent:AQ(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(C){return C!==_})},1)},[]),d=m.useCallback(function(x){n.current=Ad(x),r.current=void 0},[]),h=m.useCallback(function(x){u(x.type,yS(x),x.target,l(x,t.lockRef.current))},[]),f=m.useCallback(function(x){u(x.type,Ad(x),x.target,l(x,t.lockRef.current))},[]);m.useEffect(function(){return Ho.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Wo),document.addEventListener("touchmove",c,Wo),document.addEventListener("touchstart",d,Wo),function(){Ho=Ho.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Wo),document.removeEventListener("touchmove",c,Wo),document.removeEventListener("touchstart",d,Wo)}},[]);var p=t.removeScrollBar,w=t.inert;return m.createElement(m.Fragment,null,w?m.createElement(i,{styles:RQ(s)}):null,p?m.createElement(bQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function AQ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const MQ=lQ(WP,PQ);var rb=m.forwardRef(function(t,e){return m.createElement($m,kr({},t,{ref:e,sideCar:MQ}))});rb.classNames=$m.classNames;var DQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Go=new WeakMap,Md=new WeakMap,Dd={},Mg=0,YP=function(t){return t&&(t.host||YP(t.parentNode))},OQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},LQ=function(t,e,n,r){var s=OQ(e,Array.isArray(t)?t:[t]);Dd[n]||(Dd[n]=new WeakMap);var i=Dd[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var p=f.getAttribute(r),w=p!==null&&p!=="false",x=(Go.get(f)||0)+1,g=(i.get(f)||0)+1;Go.set(f,x),i.set(f,g),o.push(f),x===1&&w&&Md.set(f,!0),g===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(e),l.clear(),Mg++,function(){o.forEach(function(h){var f=Go.get(h)-1,p=i.get(h)-1;Go.set(h,f),i.set(h,p),f||(Md.has(h)||h.removeAttribute(r),Md.delete(h)),p||h.removeAttribute(n)}),Mg--,Mg||(Go=new WeakMap,Go=new WeakMap,Md=new WeakMap,Dd={})}},QP=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=DQ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),LQ(r,s,n,"aria-hidden")):function(){return null}},Vm="Dialog",[XP,nee]=fn(Vm),[FQ,fr]=XP(Vm),JP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u,d]=ur({prop:r,defaultProp:s??!1,onChange:i,caller:Vm});return a.jsx(FQ,{scope:e,triggerRef:l,contentRef:c,contentId:Pr(),titleId:Pr(),descriptionId:Pr(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};JP.displayName=Vm;var ZP="DialogTrigger",eA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(ZP,n),i=ve(e,s.triggerRef);return a.jsx(se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ob(s.open),...r,ref:i,onClick:ne(t.onClick,s.onOpenToggle)})});eA.displayName=ZP;var sb="DialogPortal",[$Q,tA]=XP(sb,{forceMount:void 0}),nA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=fr(sb,e);return a.jsx($Q,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(kn,{present:n||i.open,children:a.jsx(nm,{asChild:!0,container:s,children:o})}))})};nA.displayName=sb;var jf="DialogOverlay",rA=m.forwardRef((t,e)=>{const n=tA(jf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=fr(jf,t.__scopeDialog);return i.modal?a.jsx(kn,{present:r||i.open,children:a.jsx(UQ,{...s,ref:e})}):null});rA.displayName=jf;var VQ=Ga("DialogOverlay.RemoveScroll"),UQ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(jf,n);return a.jsx(rb,{as:VQ,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(se.div,{"data-state":ob(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Io="DialogContent",sA=m.forwardRef((t,e)=>{const n=tA(Io,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=fr(Io,t.__scopeDialog);return a.jsx(kn,{present:r||i.open,children:i.modal?a.jsx(BQ,{...s,ref:e}):a.jsx(zQ,{...s,ref:e})})});sA.displayName=Io;var BQ=m.forwardRef((t,e)=>{const n=fr(Io,t.__scopeDialog),r=m.useRef(null),s=ve(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return QP(i)},[]),a.jsx(iA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ne(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ne(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ne(t.onFocusOutside,i=>i.preventDefault())})}),zQ=m.forwardRef((t,e)=>{const n=fr(Io,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(iA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),iA=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=fr(Io,n),c=m.useRef(null),u=ve(e,c);return UP(),a.jsxs(a.Fragment,{children:[a.jsx(nb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(yu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ob(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(WQ,{titleId:l.titleId}),a.jsx(GQ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ib="DialogTitle",oA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(ib,n);return a.jsx(se.h2,{id:s.titleId,...r,ref:e})});oA.displayName=ib;var aA="DialogDescription",lA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(aA,n);return a.jsx(se.p,{id:s.descriptionId,...r,ref:e})});lA.displayName=aA;var cA="DialogClose",uA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(cA,n);return a.jsx(se.button,{type:"button",...r,ref:e,onClick:ne(t.onClick,()=>s.onOpenChange(!1))})});uA.displayName=cA;function ob(t){return t?"open":"closed"}var dA="DialogTitleWarning",[ree,hA]=PO(dA,{contentName:Io,titleName:ib,docsSlug:"dialog"}),WQ=({titleId:t})=>{const e=hA(dA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},HQ="DialogDescriptionWarning",GQ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hA(HQ).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},qQ=JP,KQ=eA,YQ=nA,fA=rA,mA=sA,pA=oA,gA=lA,QQ=uA;const Wr=qQ,Ri=KQ,XQ=YQ,vA=m.forwardRef(({className:t,...e},n)=>a.jsx(fA,{ref:n,className:F("fixed inset-0 z-[100] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));vA.displayName=fA.displayName;const mr=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(XQ,{children:[a.jsx(vA,{}),a.jsxs(mA,{ref:r,className:F("fixed left-[50%] top-[50%] z-[110] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(QQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(rr,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mr.displayName=mA.displayName;const pr=({className:t,...e})=>a.jsx("div",{className:F("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});pr.displayName="DialogHeader";const gr=m.forwardRef(({className:t,...e},n)=>a.jsx(pA,{ref:n,className:F("text-lg font-semibold leading-none tracking-tight",t),...e}));gr.displayName=pA.displayName;const Hr=m.forwardRef(({className:t,...e},n)=>a.jsx(gA,{ref:n,className:F("text-sm text-muted-foreground",t),...e}));Hr.displayName=gA.displayName;var JQ=m.createContext(void 0);function Tl(t){const e=m.useContext(JQ);return t||e||"ltr"}function Kv(t,[e,n]){return Math.min(n,Math.max(e,t))}function ZQ(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var ab="ScrollArea",[xA,see]=fn(ab),[eX,Bn]=xA(ab),yA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=m.useState(null),[u,d]=m.useState(null),[h,f]=m.useState(null),[p,w]=m.useState(null),[x,g]=m.useState(null),[y,v]=m.useState(0),[_,C]=m.useState(0),[b,N]=m.useState(!1),[S,E]=m.useState(!1),k=ve(e,R=>c(R)),T=Tl(s);return a.jsx(eX,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:b,onScrollbarXEnabledChange:N,scrollbarY:x,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:v,onCornerHeightChange:C,children:a.jsx(se.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});yA.displayName=ab;var wA="ScrollAreaViewport",bA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Bn(wA,n),l=m.useRef(null),c=ve(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(se.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});bA.displayName=wA;var Gr="ScrollAreaScrollbar",lb=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(Gr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(tX,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(nX,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(_A,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx(cb,{...r,ref:e}):null});lb.displayName=Gr;var tX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(Gr,t.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(kn,{present:n||i,children:a.jsx(_A,{"data-state":i?"visible":"hidden",...r,ref:e})})}),nX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(Gr,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Bm(()=>c("SCROLL_END"),100),[l,c]=ZQ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),a.jsx(kn,{present:n||l!=="hidden",children:a.jsx(cb,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ne(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ne(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),_A=m.forwardRef((t,e)=>{const n=Bn(Gr,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=m.useState(!1),l=t.orientation==="horizontal",c=Bm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return al(n.viewport,c),al(n.content,c),a.jsx(kn,{present:r||i,children:a.jsx(cb,{"data-state":i?"visible":"hidden",...s,ref:e})})}),cb=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Bn(Gr,t.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=kA(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return lX(f,o.current,l,p)}return n==="horizontal"?a.jsx(rX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=bS(f,l,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?a.jsx(sX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=bS(f,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),rX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Bn(Gr,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=ve(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(CA,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Um(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),jA(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:If(o.paddingLeft),paddingEnd:If(o.paddingRight)}})}})}),sX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Bn(Gr,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=ve(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(CA,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Um(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),jA(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:If(o.paddingTop),paddingEnd:If(o.paddingBottom)}})}})}),[iX,NA]=xA(Gr),CA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,p=Bn(Gr,n),[w,x]=m.useState(null),g=ve(e,k=>x(k)),y=m.useRef(null),v=m.useRef(""),_=p.viewport,C=r.content-r.viewport,b=ft(d),N=ft(c),S=Bm(h,10);function E(k){if(y.current){const T=k.clientX-y.current.left,R=k.clientY-y.current.top;u({x:T,y:R})}}return m.useEffect(()=>{const k=T=>{const R=T.target;(w==null?void 0:w.contains(R))&&b(T,C)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[_,w,C,b]),m.useEffect(N,[r,N]),al(w,S),al(p.content,S),a.jsx(iX,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:ft(i),onThumbPointerUp:ft(o),onThumbPositionChange:N,onThumbPointerDown:ft(l),children:a.jsx(se.div,{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:ne(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=w.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(k))}),onPointerMove:ne(t.onPointerMove,E),onPointerUp:ne(t.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Rf="ScrollAreaThumb",SA=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=NA(Rf,t.__scopeScrollArea);return a.jsx(kn,{present:n||s.hasThumb,children:a.jsx(oX,{ref:e,...r})})}),oX=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Bn(Rf,n),o=NA(Rf,n),{onThumbPositionChange:l}=o,c=ve(e,h=>o.onThumbChange(h)),u=m.useRef(void 0),d=Bm(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const p=cX(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),a.jsx(se.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ne(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),w=h.clientX-p.left,x=h.clientY-p.top;o.onThumbPointerDown({x:w,y:x})}),onPointerUp:ne(t.onPointerUp,o.onThumbPointerUp)})});SA.displayName=Rf;var ub="ScrollAreaCorner",EA=m.forwardRef((t,e)=>{const n=Bn(ub,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(aX,{...t,ref:e}):null});EA.displayName=ub;var aX=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Bn(ub,n),[i,o]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return al(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),al(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(se.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function If(t){return t?parseInt(t,10):0}function kA(t,e){const n=t/e;return isNaN(n)?0:n}function Um(t){const e=kA(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function lX(t,e,n,r="ltr"){const s=Um(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return TA([c,u],h)(t)}function bS(t,e,n="ltr"){const r=Um(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Kv(t,c);return TA([0,o],[0,l])(u)}function TA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function jA(t,e){return t>0&&t<e}var cX=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Bm(t,e){const n=ft(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function al(t,e){const n=ft(e);vt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var RA=yA,uX=bA,dX=EA;const Ii=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(RA,{ref:r,className:F("relative overflow-hidden",t),...n,children:[a.jsx(uX,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(IA,{}),a.jsx(dX,{})]}));Ii.displayName=RA.displayName;const IA=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(lb,{ref:r,orientation:e,className:F("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(SA,{className:"relative flex-1 rounded-full bg-border"})}));IA.displayName=lb.displayName;const hX="https://king-s-cup-party-production.up.railway.app";async function pn(t,e){try{const n=await fetch(`${hX}${t}`,{headers:{"Content-Type":"application/json",...e==null?void 0:e.headers},...e});return n.ok?await n.json():(console.error(`API Error: ${n.status} ${n.statusText}`),null)}catch(n){return console.error("API call failed:",n),null}}async function Yv(){const t=await pn("/api/games?field=cover_url");if(!t)return Jv();const e={};return t.forEach(n=>{n.cover_url&&(e[n.id]=n.cover_url)}),e}async function Qv(){const t=await pn("/api/games?field=image_url");if(!t)return Zv();const e={};return t.forEach(n=>{n.image_url&&(e[n.id]=n.image_url)}),e}async function Xv(){const t=await pn("/api/games");if(!t)return LA();const e={};return t.forEach(n=>{e[n.id]={title:n.title,emoji:n.emoji,gradient:n.gradient}}),e}async function fX(t,e){console.log(` Saving cover for ${t}`);const n=Jv();if(n[t]=e,_S(n),await pn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({cover_url:e})})){console.log(` Saved cover for ${t} to MySQL`);const s=Jv();return delete s[t],Object.keys(s).length>0?_S(s):localStorage.removeItem(Wm),!0}return console.log(` MySQL failed, using localStorage for ${t}`),!0}async function mX(t,e){console.log(` Saving icon for ${t}`);const n=Zv();if(n[t]=e,NS(n),await pn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({image_url:e})})){console.log(` Saved icon for ${t} to MySQL`);const s=Zv();return delete s[t],Object.keys(s).length>0?NS(s):localStorage.removeItem(Hm),!0}return console.log(` MySQL failed, using localStorage for ${t}`),!0}async function PA(t,e){if(await pn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({title:e.title,emoji:e.emoji,gradient:e.gradient})}))return console.log(` Saved profile for ${t}`),!0;const r=LA();return r[t]=e,_X(r),!0}async function pX(t){return!!await pn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({cover_url:null})})}async function gX(t){return!!await pn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({image_url:null})})}async function vX(){const t=await pn("/api/games/clear-covers",{method:"POST"});return localStorage.removeItem(Wm),!!t}async function xX(){const t=await pn("/api/games/clear-icons",{method:"POST"});return localStorage.removeItem(Hm),!!t}async function zm(){const t=await pn("/api/floating-names");return t?t.map(e=>e.name):DA()}async function yX(t){if(!await pn("/api/floating-names",{method:"POST",body:JSON.stringify({name:t})})){const n=DA();return n.push(t),OA(n),!1}return!0}async function wX(t){return!!await pn(`/api/floating-names/${encodeURIComponent(t)}`,{method:"DELETE"})}async function bX(){const t=await pn("/api/floating-names",{method:"DELETE"});return OA([]),!!t}const AA="admin_floating_names",Wm="admin_game_covers",Hm="admin_game_icons",MA="admin_game_profiles";function DA(){try{const t=localStorage.getItem(AA);return t?JSON.parse(t):[]}catch{return[]}}function OA(t){localStorage.setItem(AA,JSON.stringify(t))}function Jv(){try{const t=localStorage.getItem(Wm);return t?JSON.parse(t):{}}catch{return{}}}function _S(t){try{localStorage.setItem(Wm,JSON.stringify(t))}catch(e){console.error("Failed to save covers to localStorage:",e)}}function Zv(){try{const t=localStorage.getItem(Hm);return t?JSON.parse(t):{}}catch{return{}}}function NS(t){try{localStorage.setItem(Hm,JSON.stringify(t))}catch(e){console.error("Failed to save icons to localStorage:",e)}}function LA(){try{const t=localStorage.getItem(MA);return t?JSON.parse(t):{}}catch{return{}}}function _X(t){try{localStorage.setItem(MA,JSON.stringify(t))}catch(e){console.error("Failed to save profiles to localStorage:",e)}}async function NX(t,e){return PA(t,e)}function CX({games:t,onClose:e,onCoversUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),u=m.useRef({}),{toast:d}=Nt();m.useEffect(()=>{(async()=>{const y=await Yv();s(y)})()},[]);const h=g=>new Promise((y,v)=>{const _=new FileReader;_.onload=C=>{var N;const b=new Image;b.onload=()=>{const S=document.createElement("canvas"),E=S.getContext("2d");if(!E){v(new Error("Could not get canvas context"));return}let k=b.width,T=b.height;const R=800,I=1200;if(k>R||T>I){const P=Math.min(R/k,I/T);k=k*P,T=T*P}S.width=k,S.height=T,E.drawImage(b,0,0,k,T);const L=S.toDataURL("image/jpeg",.85);y(L)},b.onerror=()=>v(new Error("Failed to load image")),b.src=(N=C.target)==null?void 0:N.result},_.onerror=()=>v(_.error),_.readAsDataURL(g)}),f=async(g,y)=>{var _;if(console.log(` Uploading ${y.name} for ${g}`,{type:y.type,size:y.size,sizeInMB:(y.size/1024/1024).toFixed(2)+" MB"}),!y.type.startsWith("image/")){d({title:"",description:` ${y.name} `,variant:"destructive"});return}const v=10*1024*1024;if(y.size>v){const C=(y.size/1024/1024).toFixed(2);d({title:"",description:` ${C} MB ( 10 MB)`,variant:"destructive"});return}c(g),o(!0);try{console.log(` Converting ${y.name} to base64...`);const C=await h(y);if(console.log(` Base64 size: ${(C.length/1024).toFixed(2)} KB`),console.log(" Saving to storage..."),await fX(g,C)){console.log(" Saved successfully!");const N={...r,[g]:C};s(N),n(),d({title:"! ",description:` ${(_=t.find(S=>S.id===g))==null?void 0:_.name} `})}else console.error(" Save failed"),d({title:"",description:" ",variant:"destructive"})}catch(C){console.error(" Upload error:",C),d({title:"",description:C instanceof Error?C.message:"",variant:"destructive"})}finally{o(!1),c(null)}},p=async g=>{o(!0);const y=await pX(g);if(o(!1),y){const v={...r};delete v[g],s(v),n(),d({title:"",description:""})}else d({title:"",description:"",variant:"destructive"})},w=async()=>{o(!0);const g=await vX();o(!1),g?(s({}),n(),d({title:"",description:""})):d({title:"",description:"",variant:"destructive"})},x=g=>{var y;(y=u.current[g])==null||y.click()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-black w-full max-w-2xl rounded-2xl border border-indigo-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-indigo-600/30 px-6 py-4 border-b border-indigo-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center",children:a.jsx(Lh,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-indigo-300 text-sm",children:""})]})]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(rr,{className:"w-5 h-5"})})]})}),a.jsx(Ii,{className:"h-[60vh]",children:a.jsxs("div",{className:"p-6 space-y-4",children:[t.map(g=>a.jsx("div",{className:"bg-black/30 rounded-xl border border-indigo-500/20 p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-24 h-32 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center bg-gradient-to-br ${g.gradient}`,style:r[g.id]?{backgroundImage:`url(${r[g.id]})`,backgroundSize:"cover",backgroundPosition:"center"}:void 0,children:!r[g.id]&&a.jsx("span",{className:"text-5xl",children:g.emoji})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:g.name}),r[g.id]&&a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>p(g.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[a.jsx(No,{className:"w-4 h-4 mr-1"}),""]})]}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:y=>u.current[g.id]=y,onChange:y=>{var _;const v=(_=y.target.files)==null?void 0:_[0];v&&(f(g.id,v),y.target.value="")}}),a.jsx(M,{variant:"secondary",size:"sm",onClick:()=>x(g.id),disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full",children:l===g.id?a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ET,{className:"w-4 h-4 mr-2"}),r[g.id]?"":""]})}),r[g.id]&&a.jsx("p",{className:"text-xs text-green-400",children:" "})]})]})},g.id)),a.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-indigo-300 text-sm",children:[" ",a.jsx("strong",{children:":"}),"  (JPG, PNG, GIF, WEBP)  10MB"]})})]})}),a.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-indigo-500/30",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs(M,{variant:"outline",onClick:w,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[a.jsx(co,{className:"w-4 h-4 mr-2"}),""]}),a.jsx(M,{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700",children:""})]})})]})})}function SX({games:t,onClose:e,onProfilesUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),{toast:u}=Nt();m.useEffect(()=>{(async()=>{o(!0);const x=await Xv();s(x),o(!1)})()},[]);const d=w=>{const x=r[w.id];return{title:(x==null?void 0:x.title)??w.name,emoji:(x==null?void 0:x.emoji)??w.emoji,gradient:(x==null?void 0:x.gradient)??w.gradient}},h=(w,x,g)=>{s(y=>{const v=y[w.id]??{title:w.name,emoji:w.emoji,gradient:w.gradient};return{...y,[w.id]:{...v,[x]:g}}})},f=async w=>{const x=d(w);c(w.id),o(!0);const g=await PA(w.id,{title:x.title,emoji:x.emoji,gradient:x.gradient});o(!1),c(null),g?(n(),u({title:"",description:` ${w.name}`})):u({title:"",description:"",variant:"destructive"})},p=async w=>{c(w.id),o(!0);const x=await NX(w.id,{title:w.name,emoji:w.emoji,gradient:w.gradient});o(!1),c(null),x?(s(g=>{const y={...g};return delete y[w.id],y}),n(),u({title:"",description:` ${w.name}`})):u({title:"",description:"",variant:"destructive"})};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-amber-900 to-black w-full max-w-3xl rounded-2xl border border-amber-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-amber-600/30 px-6 py-4 border-b border-amber-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:a.jsx(is,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-amber-200 text-sm",children:"  "})]})]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(rr,{className:"w-5 h-5"})})]})}),a.jsx(Ii,{className:"h-[65vh]",children:a.jsxs("div",{className:"p-6 space-y-4",children:[t.map(w=>{const x=d(w);return a.jsx("div",{className:"bg-black/30 rounded-xl border border-amber-500/20 p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-24 h-24 rounded-xl flex-shrink-0 flex items-center justify-center text-4xl bg-gradient-to-br ${x.gradient}`,children:a.jsx("span",{children:x.emoji})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:x.title}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(M,{variant:"outline",size:"sm",onClick:()=>p(w),disabled:i,className:"border-red-500/40 text-red-300 hover:bg-red-500/20",children:[a.jsx(co,{className:"w-4 h-4 mr-1"})," "]}),a.jsx(M,{size:"sm",onClick:()=>f(w),disabled:i,className:"bg-amber-600 hover:bg-amber-700 text-white",children:l===w.id?a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(uy,{className:"w-4 h-4 mr-2"})," "]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:""}),a.jsx(ge,{value:x.title,onChange:g=>h(w,"title",g.target.value),className:"bg-white/10 border-amber-500/30 text-white"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:""}),a.jsx(ge,{value:x.emoji||"",onChange:g=>h(w,"emoji",g.target.value),className:"bg-white/10 border-amber-500/30 text-white",maxLength:3})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:"Gradient class"}),a.jsx(ge,{value:x.gradient||"",onChange:g=>h(w,"gradient",g.target.value),className:"bg-white/10 border-amber-500/30 text-white",placeholder:"from-indigo-500 to-purple-600"})]})]})]})]})},w.id)}),a.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4 text-amber-100 text-sm",children:"  Tailwind gradient classes  from-amber-500 to-orange-600"})]})}),a.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-amber-500/30 flex justify-end",children:a.jsx(M,{onClick:e,className:"bg-amber-600 hover:bg-amber-700",children:""})})]})})}function EX({games:t,onClose:e,onIconsUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),u=m.useRef({}),{toast:d}=Nt();m.useEffect(()=>{(async()=>{const y=await Qv();s(y)})()},[]);const h=g=>{var y;return(y=u.current[g])==null?void 0:y.click()},f=g=>new Promise((y,v)=>{const _=new FileReader;_.onload=()=>y(_.result),_.onerror=()=>v(_.error),_.readAsDataURL(g)}),p=async(g,y)=>{if(!y.type.startsWith("image/")){d({title:"",description:"",variant:"destructive"});return}if(y.size>10*1024*1024){d({title:"",description:" 10MB",variant:"destructive"});return}c(g),o(!0);try{const v=await f(y);await mX(g,v)?(s(C=>({...C,[g]:v})),n(),d({title:"",description:` ${g}`})):d({title:"",variant:"destructive"})}catch(v){console.error(v),d({title:"",variant:"destructive"})}finally{c(null),o(!1)}},w=async g=>{o(!0);const y=await gX(g);o(!1),y?(s(v=>{const _={...v};return delete _[g],_}),n(),d({title:"",description:""})):d({title:"",variant:"destructive"})},x=async()=>{o(!0);const g=await xX();o(!1),g&&(s({}),n(),d({title:""}))};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-amber-900 to-black w-full max-w-2xl rounded-2xl border border-amber-500/30 shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"bg-amber-600/30 px-6 py-4 border-b border-amber-500/30 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:a.jsx(Lh,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-amber-200 text-sm",children:" emoji"})]})]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(rr,{className:"w-5 h-5"})})]}),a.jsx(Ii,{className:"h-[60vh]",children:a.jsx("div",{className:"p-6 space-y-4",children:t.map(g=>a.jsxs("div",{className:"bg-black/30 rounded-xl border border-amber-500/20 p-4 flex gap-4 items-center",children:[a.jsx("div",{className:"w-20 h-20 rounded-xl flex-shrink-0 border border-amber-500/30 overflow-hidden",style:{backgroundImage:r[g.id]?`url(${r[g.id]})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:!r[g.id]&&a.jsx("div",{className:`w-full h-full bg-gradient-to-br ${g.gradient} flex items-center justify-center text-4xl`,children:g.emoji})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:g.name}),a.jsxs("p",{className:"text-xs text-amber-200",children:["ID: ",g.id]})]}),r[g.id]&&a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>w(g.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[a.jsx(No,{className:"w-4 h-4 mr-1"})," "]})]}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:y=>u.current[g.id]=y,onChange:y=>{var _;const v=(_=y.target.files)==null?void 0:_[0];v&&(p(g.id,v),y.target.value="")}}),a.jsx(M,{size:"sm",onClick:()=>h(g.id),disabled:i,className:"bg-amber-600 hover:bg-amber-700 text-white",children:l===g.id?a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2 animate-spin"})," ","..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ET,{className:"w-4 h-4 mr-2"}),r[g.id]?"":""]})}),r[g.id]&&a.jsx("p",{className:"text-xs text-green-400",children:" "})]})]},g.id))})}),a.jsxs("div",{className:"bg-black/30 px-6 py-4 border-t border-amber-500/30 flex justify-between",children:[a.jsxs(M,{variant:"outline",onClick:x,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[a.jsx(No,{className:"w-4 h-4 mr-2"})," "]}),a.jsx(M,{onClick:e,className:"bg-amber-600 hover:bg-amber-700 text-white",children:""})]})]})})}const kX=[{id:"doraemon",emoji:"",name:"King's Cup",gradient:"from-red-500 to-orange-500"},{id:"pokdeng",emoji:"",name:"Pok Deng",gradient:"from-emerald-500 to-green-600"},{id:"undercover",emoji:"",name:"Undercover",gradient:"from-purple-600 to-indigo-600"},{id:"paranoia",emoji:"",name:"Paranoia",gradient:"from-pink-500 to-rose-600"},{id:"5-sec",emoji:"",name:"5 Second Rule",gradient:"from-yellow-400 to-orange-500"},{id:"texas-holdem",emoji:"",name:"Texas Hold'em",gradient:"from-blue-600 to-cyan-600"}];function FA({onClose:t,games:e,onCoversUpdate:n,onProfilesUpdate:r,onIconsUpdate:s}){const i=e&&e.length>0?e:kX,[o,l]=m.useState([]),[c,u]=m.useState(""),[d,h]=m.useState(!0),[f,p]=m.useState(!1),[w,x]=m.useState(!1),[g,y]=m.useState(!1),[v,_]=m.useState("names");m.useEffect(()=>{C()},[]);const C=async()=>{h(!0);const E=await zm();l(E),h(!1)},b=async()=>{if(!c.trim())return;const E=c.trim();u(""),l(k=>[...k,E]),await yX(E)},N=async E=>{const k=o[E];l(T=>T.filter((R,I)=>I!==E)),await wX(k)},S=async()=>{l([]),await bX()};return f&&i.length>0?a.jsx(CX,{games:i,onClose:()=>p(!1),onCoversUpdate:()=>{p(!1),n==null||n()}}):w&&i.length>0?a.jsx(SX,{games:i,onClose:()=>x(!1),onProfilesUpdate:()=>{x(!1),r==null||r()}}):g&&i.length>0?a.jsx(EX,{games:i,onClose:()=>y(!1),onIconsUpdate:()=>{y(!1),s==null||s()}}):a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-black w-full max-w-md rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-purple-600/30 px-6 py-4 border-b border-purple-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center",children:a.jsx(dn,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" Admin Panel"}),a.jsx("p",{className:"text-purple-300 text-sm",children:" BONNE"})]})]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(rr,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"bg-black/20 px-6 py-3 border-b border-purple-500/20 flex gap-2",children:[a.jsxs(M,{variant:v==="names"?"default":"ghost",size:"sm",onClick:()=>_("names"),className:v==="names"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(dn,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{variant:v==="covers"?"default":"ghost",size:"sm",onClick:()=>_("covers"),className:v==="covers"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(Lh,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{variant:v==="profiles"?"default":"ghost",size:"sm",onClick:()=>_("profiles"),className:v==="profiles"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(is,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{variant:v==="icons"?"default":"ghost",size:"sm",onClick:()=>_("icons"),className:v==="icons"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(zp,{className:"w-4 h-4 mr-2"}),""]})]}),v==="names"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm",children:" Lobby"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{placeholder:"...",value:c,onChange:E=>u(E.target.value),onKeyDown:E=>E.key==="Enter"&&b(),className:"flex-1 bg-white/10 border-purple-500/30 text-white placeholder:text-white/40",maxLength:20}),a.jsx(M,{onClick:b,disabled:!c.trim(),className:"bg-purple-500 hover:bg-purple-600 text-white",children:a.jsx(_u,{className:"w-4 h-4"})})]}),a.jsx(Ii,{className:"h-48 rounded-lg bg-black/30 border border-purple-500/20",children:a.jsx("div",{className:"p-3 space-y-2",children:d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(gt,{className:"w-6 h-6 text-purple-400 animate-spin"})}):o.length===0?a.jsx("p",{className:"text-center text-white/40 text-sm py-8",children:""}):o.map((E,k)=>a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:[a.jsx("span",{className:"text-white font-medium",children:E}),a.jsx(M,{variant:"ghost",size:"icon",onClick:()=>N(k),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(No,{className:"w-4 h-4"})})]},k))})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(M,{variant:"outline",onClick:S,disabled:o.length===0,className:"flex-1 border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300",children:[a.jsx(No,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{onClick:t,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white",children:[a.jsx(qa,{className:"w-4 h-4 mr-2"}),""]})]}),a.jsx("div",{className:"text-center pt-2 border-t border-purple-500/20",children:a.jsxs("p",{className:"text-purple-300 text-sm",children:[":"," ",a.jsx("span",{className:"font-bold text-white",children:o.length})," "]})})]}),v==="covers"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:" () "})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs(M,{onClick:()=>y(!0),disabled:i.length===0,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(zp,{className:"w-5 h-5 mr-2"}),"Upload Icon ()"]}),a.jsxs(M,{onClick:()=>p(!0),disabled:i.length===0,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Lh,{className:"w-5 h-5 mr-2"}),"Upload Cover ()"]})]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"})," Upload Icon    Upload Cover   10MB"]})}),a.jsx(M,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]}),v==="profiles"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:"  "})}),a.jsxs(M,{onClick:()=>x(!0),disabled:i.length===0,className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(is,{className:"w-5 h-5 mr-2"}),""]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"}),"    Tailwind  from-amber-500 to-orange-600"]})}),a.jsx(M,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]}),v==="icons"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:" ( emoji)"})}),a.jsxs(M,{onClick:()=>y(!0),disabled:i.length===0,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(zp,{className:"w-5 h-5 mr-2"}),""]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"})," ",""]})}),a.jsx(M,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]})]})})}const St=["#ff6b6b","#4ecdc4","#ffe66d","#a8e6cf","#ff8b94","#c7ceea","#b5ead7","#ffd3b6","#dcedc1","#a0d2eb","#d4a5a5","#ffaaa5","#ffc6ff","#9bf6ff","#caffbf","#fdffb6","#bdb2ff","#ffc6ff","#a0c4ff","#ffadad"];function db({names:t}){const e=m.useRef(null),n=m.useRef([]),r=m.useRef();m.useEffect(()=>{if(t.length===0)return;const i=new Set;n.current=t.map((o,l)=>{let c=St[l%St.length],u=0;for(;i.has(c)&&u<St.length;)c=St[(l+u)%St.length],u++;return i.add(c),{x:Math.random()*(window.innerWidth-100),y:Math.random()*(window.innerHeight-30),vx:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),vy:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),color:c,element:null}})},[t]);const s=m.useCallback(()=>{n.current.forEach(i=>{if(!i.element)return;i.x+=i.vx,i.y+=i.vy;const o=i.element.getBoundingClientRect();if(i.x<=0||i.x+o.width>=window.innerWidth){i.vx*=-1,i.x=Math.max(0,Math.min(i.x,window.innerWidth-o.width));const l=St[Math.floor(Math.random()*St.length)];i.color=l,i.element.style.color=l,i.element.style.textShadow=`0 0 10px ${l}, 0 0 20px ${l}, 0 0 30px ${l}`}if(i.y<=0||i.y+o.height>=window.innerHeight){i.vy*=-1,i.y=Math.max(0,Math.min(i.y,window.innerHeight-o.height));const l=St[Math.floor(Math.random()*St.length)];i.color=l,i.element.style.color=l,i.element.style.textShadow=`0 0 10px ${l}, 0 0 20px ${l}, 0 0 30px ${l}`}i.element.style.transform=`translate(${i.x}px, ${i.y}px)`}),r.current=requestAnimationFrame(s)},[]);return m.useEffect(()=>{if(t.length!==0)return r.current=requestAnimationFrame(s),()=>{r.current&&cancelAnimationFrame(r.current)}},[t,s]),t.length===0?null:a.jsx("div",{ref:e,className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map((i,o)=>{var l,c,u,d;return a.jsxs("div",{ref:h=>{n.current[o]&&(n.current[o].element=h)},className:"fixed text-sm font-bold pointer-events-none whitespace-nowrap",style:{color:((l=n.current[o])==null?void 0:l.color)||St[o%St.length],filter:"brightness(1.2) saturate(1.3)",textShadow:`0 0 8px ${((c=n.current[o])==null?void 0:c.color)||St[o%St.length]}, 0 0 15px ${((u=n.current[o])==null?void 0:u.color)||St[o%St.length]}, 0 0 25px ${((d=n.current[o])==null?void 0:d.color)||St[o%St.length]}`,left:0,top:0,willChange:"transform"},children:[o===0&&" ",i]},o)})})}const TX={th:{back:"",loading:"...",error:"",close:"",save:"",cancel:"",edit:"",delete:"",add:"",search:"",confirm:"",selectGame:"",selectGamePrompt:"",kingsCup:"",kingsCupDesc:"King's Cup - ",kingsCupSubtitle:"",pokDeng:"",pokDengDesc:"Pok Deng - ",undercover:"Undercover",undercoverDesc:" - ",partyMotto:" ",liveMode:"LIVE",liveModeDesc:"Host  ",enterNameToStart:"",enterCodeAndName:"",roomCodePlaceholder:" (6 )",quickStartDesc:"!",themeChange:"",themeSelectTheme:"",createRoom:"",joinRoom:"",roomCode:"",yourName:"",enterName:"...",enterCode:" 6 ...",createNewRoom:"",joinRoomBtn:"",quickStart:" ",creating:"...",joining:"...",room:"",waitingForPlayers:"",players:"",host:"Host",leaveRoom:"",startGame:"",minPlayers:"",people:"",undercoverTitle:"Undercover",undercoverSubtitle:" - !",category:"",allCategories:"",includeMrWhite:" (Mr. White)",revealWord:"",holdToReveal:" (!)",yourWord:":",holdToView:"",role:"",startDescribe:"",describePhase:"",describeRound:"",turn:"",nextPlayer:"",nextPerson:"",startVoting:"",voting:"!",vote:"",waitingForOthers:"...",selectSpy:"",selectSuspect:"",voteResult:"",votes:"",continue:"",gameOver:"",finalResult:"",restartGame:"",civilian:"",spy:"",gameStarted:" !",eliminated:"!",waitingPlayers:"",playersInRoom:"",needMinPlayers:" 4 ",seeYourWord:"",tapToReveal:" (!)",yourWordIs:"",holdToSee:"",alivePlayers:"",manageWords:"",vocabularyManager:"",addWord:"",editWord:"",editVocabulary:"",addVocabulary:"",addNewWord:"",categoryName:"",categoryPlaceholder:" , ",civilianWord:"",civilianPlaceholder:"",undercoverWord:"",undercoverPlaceholder:"",searchWords:"...",searchVocabulary:"...",noWords:"",noWordsFound:"",noVocabularyFound:"",noVocabularyYet:" ",addWordToStart:"",cannotEditDefault:"",cannotDeleteDefault:"",words:"",invalidName:"",nameTooShort:" ( 2 )",nameTooLong:" ( 20 )",nameContainsBadWords:"",roomNotFound:"",gameAlreadyStarted:" ",pokDengTitle:" ",pokDengSubtitle:"!",bet:"",draw:"",stand:"",showdown:"",nextRound:"",dealer:"",setDealer:"",points:"",multiplier:"",winner:"",roomCreated:"! ",roomJoined:"! ",playerJoined:" ",playerLeft:" ",leftRoom:" ",voted:" ",youVotedFor:""},en:{back:"Back",loading:"Loading...",error:"Error",close:"Close",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",confirm:"Confirm",selectGame:"Select Game",selectGamePrompt:"Choose a game to play",kingsCup:"King's Cup",kingsCupDesc:"King's Cup - Drinking Game",kingsCupSubtitle:"Drink till you drop!",pokDeng:"Pok Deng",pokDengDesc:"Pok Deng - Card Game",undercover:"Undercover",undercoverDesc:"Find the Spy - Detective Game",partyMotto:"Drink for fun, Party til' dawn",liveMode:"LIVE",liveModeDesc:"Host shares screen, players use phones",enterNameToStart:"Enter your name to start",enterCodeAndName:"Enter room code and your name",roomCodePlaceholder:"Room Code (6 digits)",quickStartDesc:"Enter your name and start playing!",themeChange:"Change Theme",themeSelectTheme:"Select Theme",createRoom:"Create Room",joinRoom:"Join Room",roomCode:"Room Code",yourName:"Your Name",enterName:"Enter name...",enterCode:"Enter 6-digit code...",createNewRoom:"Create New Room",joinRoomBtn:" Join Room",quickStart:" Quick Start",creating:"Creating...",joining:"Joining...",room:"Room",waitingForPlayers:"Waiting for players",players:"Players",host:"Host",leaveRoom:"Leave Room",startGame:"Start Game",minPlayers:"Need at least",people:"players",undercoverTitle:"Undercover",undercoverSubtitle:"Find the impostor among you!",category:"Category",allCategories:"All",includeMrWhite:"Include Mr. White",revealWord:"Reveal Your Word",holdToReveal:"Hold to reveal (Don't let others see!)",yourWord:"Your word is:",holdToView:"Hold to view word",role:"Role",startDescribe:"Start Describing",describePhase:"Round",describeRound:"Describe Round",turn:"Turn",nextPlayer:"Next",nextPerson:"Next Person",startVoting:"Start Voting",voting:"Vote!",vote:"Vote",waitingForOthers:"Waiting for others...",selectSpy:"Select who you think is the spy",selectSuspect:"Select who you think is the spy",voteResult:"Vote Result",votes:"votes",continue:"Continue",gameOver:"Game Over",finalResult:"Final Result",restartGame:"Restart Game",civilian:"Civilian",spy:"Undercover",gameStarted:" Game Started!",eliminated:"has been eliminated!",waitingPlayers:"Waiting for players",playersInRoom:"Players in Room",needMinPlayers:"Need at least 4 players",seeYourWord:"See Your Word",tapToReveal:"Hold to reveal (Don't let others see!)",yourWordIs:"Your word is",holdToSee:"Hold to see word",alivePlayers:"Alive Players",manageWords:"Manage Words",vocabularyManager:"Vocabulary Manager",addWord:"Add Word",editWord:"Edit Vocabulary",editVocabulary:"Edit Vocabulary",addVocabulary:"Add New Vocabulary",addNewWord:"Add New Vocabulary",categoryName:"Category",categoryPlaceholder:"e.g. Food, Places",civilianWord:"Civilian Word",civilianPlaceholder:"Word for civilians",undercoverWord:"Undercover Word",undercoverPlaceholder:"Word for undercover",searchWords:"Search words...",searchVocabulary:"Search vocabulary...",noWords:"No vocabularies yet",noWordsFound:"No matching vocabularies found",noVocabularyFound:"No matching vocabularies found",noVocabularyYet:"No vocabularies yet. Click Add Word to get started",addWordToStart:"Click Add Word to get started",cannotEditDefault:"Cannot edit default words",cannotDeleteDefault:"Cannot delete default words",words:"words",invalidName:"Invalid name",nameTooShort:"Name too short (minimum 2 characters)",nameTooLong:"Name too long (maximum 20 characters)",nameContainsBadWords:"Please use an appropriate name",roomNotFound:"Room not found",gameAlreadyStarted:"Game already started, cannot join",pokDengTitle:" Pok Deng",pokDengSubtitle:"Thai card game!",bet:"Bet",draw:"Draw",stand:"Stand",showdown:"Showdown",nextRound:"Next Round",dealer:"Dealer",setDealer:"Set as Dealer",points:"Points",multiplier:"x",winner:"Winner",roomCreated:"Room created successfully! ",roomJoined:"Joined room successfully! ",playerJoined:" New player joined",playerLeft:" Player left",leftRoom:" Left room",voted:" Voted",youVotedFor:"You voted for"}};let Pf="th";function jX(t){Pf=t,typeof window<"u"&&localStorage.setItem("language",t)}function Af(){if(typeof window<"u"){const t=localStorage.getItem("language");(t==="th"||t==="en")&&(Pf=t)}return Pf}function z(t){return TX[Pf][t]}typeof window<"u"&&Af();const RX=["","","","","","","","","","","","","","fuck","shit","bitch","ass","damn","hell","dick","pussy","cock","cunt","bastard","nazi","hitler","xxx","porn","sex"];function Mf(t){const e=t.trim();if(e.length<2)return{isValid:!1,error:"nameTooShort"};if(e.length>20)return{isValid:!1,error:"nameTooLong"};const n=e.toLowerCase();for(const s of RX)if(n.includes(s.toLowerCase()))return{isValid:!1,error:"nameContainsBadWords"};return/[a-zA-Z0-9-]/.test(e)?{isValid:!0}:{isValid:!1,error:"invalidName"}}function IX({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const{displayName:i}=zr(),[o,l]=m.useState("menu"),[c,u]=m.useState(""),[d,h]=m.useState(""),[f,p]=m.useState(""),[w,x]=m.useState(!1),[g,y]=m.useState(!1),[v,_]=m.useState([]),C=m.useRef(""),{toast:b}=Nt();m.useEffect(()=>{i&&!c&&u(i)},[i]),m.useEffect(()=>{(async()=>{const T=await zm();_(T)})()},[g]),m.useEffect(()=>{const k=T=>{if(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)return;const R=T.key.toLowerCase(),I=C.current+R;"adminhee444".startsWith(I)?(C.current=I,I==="adminhee444"&&n&&(C.current="",x(!0))):C.current="adminhee444".startsWith(R)?R:""};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[n]);const N=async()=>{if(!c.trim())return;const k=Mf(c);if(!k.isValid){b({title:z("error"),description:k.error||z("invalidName"),variant:"destructive"});return}await t(c.trim())},S=async()=>{if(!c.trim()||!d.trim())return;if(d.trim()==="777777"&&c.trim().toUpperCase()==="BONNE"){y(!0);return}const k=Mf(c);if(!k.isValid){b({title:z("error"),description:k.error||z("invalidName"),variant:"destructive"});return}await e(d.trim(),c.trim())},E=async()=>{!f.trim()||!n||(await n(f.trim()),x(!1),p(""))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx(db,{names:v}),g&&a.jsx(FA,{onClose:()=>y(!1)}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&a.jsx("div",{className:"absolute top-4 left-4 z-20",children:a.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(wa,{className:"w-5 h-5 rotate-180"})})}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:["",z("kingsCup")]}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:z("kingsCupSubtitle")})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[o==="menu"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>l("create"),children:[a.jsx(_u,{className:"w-5 h-5"}),z("createNewRoom")]}),a.jsx("p",{className:"text-white/50 text-xs text-center"})]}),a.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>l("join"),children:[a.jsx(dn,{className:"w-5 h-5"}),z("joinRoom")]}),n&&a.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[a.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>x(!0),disabled:r,children:[a.jsx(Uh,{className:"w-5 h-5"})," ",z("liveMode")]}),a.jsx("p",{className:"text-white/50 text-xs text-center",children:z("liveModeDesc")})]})]}),o==="create"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:z("createNewRoom")}),a.jsx("p",{className:"text-white/60 text-sm",children:z("enterNameToStart")})]}),a.jsx(ge,{placeholder:z("yourName"),value:c,onChange:k=>u(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:z("back")}),a.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:N,disabled:!c.trim()||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[z("createRoom"),a.jsx(wa,{className:"w-4 h-4"})]})})]})]}),o==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:z("joinRoom")}),a.jsx("p",{className:"text-white/60 text-sm",children:z("enterCodeAndName")})]}),a.jsx(ge,{placeholder:z("roomCodePlaceholder"),value:d,onChange:k=>h(k.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),a.jsx(ge,{placeholder:z("yourName"),value:c,onChange:k=>u(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:z("back")}),a.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:S,disabled:!c.trim()||d.length!==6||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[z("joinRoom"),a.jsx(wa,{className:"w-4 h-4"})]})})]})]})]}),a.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:z("partyMotto")}),a.jsx(Wr,{open:w,onOpenChange:x,children:a.jsxs(mr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-center text-white",children:z("quickStart")}),a.jsx(Hr,{className:"text-center text-white/60",children:z("quickStartDesc")})]}),a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx(ge,{placeholder:"",value:f,onChange:k=>p(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:k=>{k.key==="Enter"&&f.trim()&&E()}}),a.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:E,disabled:!f.trim()||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Uh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function Gm({className:t}){return a.jsxs("div",{className:F("absolute inset-0 overflow-hidden",t),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),a.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("defs",{children:a.jsx("pattern",{id:"diamond-pattern",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:"M10 0L20 10L10 20L0 10Z",fill:"white",opacity:"0.5"})})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#diamond-pattern)"})]}),a.jsx("div",{className:"absolute inset-2 sm:inset-3 rounded-lg border-2 border-white/20"}),a.jsx("div",{className:"absolute inset-3 sm:inset-4 rounded-md border border-white/10"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 rounded-full border-2 border-white/30 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 sm:w-18 sm:h-18 rounded-full border border-white/20 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-bold text-lg sm:text-2xl leading-none",children:""}),a.jsx("div",{className:"text-white/60 text-[8px] sm:text-xs mt-0.5",children:"K's Cup"})]})})}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"absolute w-20 sm:w-28 h-0.5 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),a.jsx("div",{className:"absolute w-0.5 h-20 sm:h-28 bg-gradient-to-b from-transparent via-white/20 to-transparent"})]})]})})]})}function PX({value:t,suit:e}){const n=Hv[e],r=Gv[e];return(()=>{switch(t){case"A":return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("span",{className:F("text-7xl sm:text-8xl",r),children:n})});case"2":return a.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"3":return a.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"4":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]})]});case"5":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:F("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:F("text-3xl sm:text-4xl",r),children:n})})]});case"6":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]})]});case"7":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-1/3 flex items-center justify-center",children:a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n})})]});case"8":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-3 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-[30%] flex items-center justify-center",children:a.jsx("span",{className:F("text-2xl sm:text-3xl",r),children:n})}),a.jsx("div",{className:"absolute inset-x-0 bottom-[30%] flex items-center justify-center",children:a.jsx("span",{className:F("text-2xl sm:text-3xl rotate-180",r),children:n})})]});case"9":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n})})]});case"10":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-[25%] flex items-center justify-center",children:a.jsx("span",{className:F("text-xl sm:text-2xl",r),children:n})}),a.jsx("div",{className:"absolute inset-x-0 bottom-[25%] flex items-center justify-center",children:a.jsx("span",{className:F("text-xl sm:text-2xl rotate-180",r),children:n})})]});case"J":case"Q":case"K":return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:F("text-6xl sm:text-7xl font-bold",r),children:t}),a.jsx("div",{className:F("text-4xl sm:text-5xl mt-1",r),children:n})]})});default:return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("span",{className:F("text-6xl sm:text-7xl",r),children:n})})}})()}function CS({card:t,isFlipped:e=!0,size:n="lg",showRule:r=!1}){const s={sm:"w-16 h-24",md:"w-24 h-36",lg:"w-32 h-48 sm:w-44 sm:h-64 md:w-52 md:h-72",large:"w-56 h-80 sm:w-72 sm:h-[26rem] md:w-80 md:h-[30rem]"},i={sm:"text-sm",md:"text-lg",lg:"text-xl sm:text-2xl md:text-3xl",large:"text-3xl sm:text-4xl md:text-5xl"},o={sm:"text-sm",md:"text-lg",lg:"text-lg sm:text-xl md:text-2xl",large:"text-2xl sm:text-3xl md:text-4xl"};if(!t)return a.jsx("div",{className:F(s[n],"rounded-xl bg-muted border-2 border-dashed border-border flex items-center justify-center"),children:a.jsx("span",{className:"text-muted-foreground text-3xl",children:"?"})});const l=fo[t.value];return a.jsxs("div",{className:"card-flip",children:[a.jsxs("div",{className:F("card-inner relative",s[n],e&&"flipped"),children:[a.jsx("div",{className:F("card-face rounded-xl overflow-hidden shadow-xl",s[n]),children:a.jsx(Gm,{})}),a.jsxs("div",{className:F("card-face card-back rounded-xl bg-paper border border-paper-border shadow-xl overflow-hidden",s[n]),children:[a.jsxs("div",{className:F("absolute top-2 left-2 sm:top-3 sm:left-3 flex flex-col items-center",Gv[t.suit]),children:[a.jsx("span",{className:F("font-bold leading-none",i[n]),children:t.value}),a.jsx("span",{className:F("leading-none",o[n]),children:Hv[t.suit]})]}),a.jsx("div",{className:"absolute inset-0 px-8 py-10 sm:px-10 sm:py-12",children:a.jsx(PX,{value:t.value,suit:t.suit})}),a.jsxs("div",{className:F("absolute bottom-2 right-2 sm:bottom-3 sm:right-3 flex flex-col items-center rotate-180",Gv[t.suit]),children:[a.jsx("span",{className:F("font-bold leading-none",i[n]),children:t.value}),a.jsx("span",{className:F("leading-none",o[n]),children:Hv[t.suit]})]})]})]}),r&&e&&l&&a.jsx("div",{className:"mt-6 text-center max-w-xs mx-auto",children:a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-5 border border-white/10",children:[a.jsx("div",{className:"text-4xl mb-3",children:l.emoji}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.title}),a.jsx("p",{className:"text-white/70",children:l.description})]})})]})}function ex(){return a.jsxs("div",{className:"flex flex-col items-center justify-center py-4 select-none",children:[a.jsx(W.div,{animate:{scale:[1,1.15,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"mb-3",children:a.jsx("span",{className:"text-5xl sm:text-6xl block",children:""})}),a.jsx(W.p,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-sm sm:text-base font-medium",children:"..."})]})}function $A({players:t,currentPlayerId:e}){return a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[a.jsxs("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:[a.jsx(D0,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"}),a.jsxs("span",{className:"text-white",children:[" (",t.length,")"]})]}),a.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto sm:flex-wrap sm:overflow-visible pb-2 sm:pb-0 -mx-1 px-1 scrollbar-hide",children:t.map(n=>a.jsxs("div",{className:F("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0 min-w-[70px] sm:min-w-[90px]",n.id===e?"bg-white text-black ring-2 ring-amber-400":"bg-white/10 text-white hover:bg-white/20"),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`/king-s-cup-party/${n.avatar||1}.jpg`,alt:n.name,className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full object-cover border-2 sm:border-3 border-white/40 shadow-lg"}),n.is_host&&a.jsx(_o,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"})]}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("span",{className:"truncate max-w-[60px] sm:max-w-[80px]",children:n.name}),n.id===e&&a.jsx("span",{className:"text-[10px] sm:text-xs opacity-60",children:"()"})]})]},n.id))})]})}function AX({cardsRemaining:t,onDraw:e,disabled:n,showCount:r=!0}){const s=m.useMemo(()=>Array.from({length:8}).map(()=>({rotation:(Math.random()-.5)*6,offsetX:(Math.random()-.5)*4,offsetY:(Math.random()-.5)*2})),[]),i=Math.min(Math.ceil(t/7),8);return t===0?a.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64 rounded-xl border-2 border-dashed border-white/20 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:a.jsx("span",{className:"text-white/50 text-sm sm:text-lg",children:""})}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64",children:Array.from({length:i}).map((o,l)=>{const c=l===i-1,u=s[l];return a.jsx("div",{className:F("absolute w-full h-full rounded-xl transition-all duration-200 overflow-hidden","shadow-lg",c&&!n&&"hover:scale-[1.03] hover:-translate-y-2 cursor-pointer hover:shadow-xl"),style:{bottom:`${l*2}px`,transform:`rotate(${u.rotation}deg) translateX(${u.offsetX}px)`,zIndex:l},onClick:c&&!n?e:void 0,children:a.jsx(Gm,{})},l)})}),r&&a.jsxs("div",{className:"absolute -top-8 sm:-top-10 left-1/2 -translate-x-1/2 px-3 sm:px-4 py-1 sm:py-1.5 rounded-full bg-black/60 backdrop-blur-sm text-xs sm:text-sm font-medium border border-white/10 z-20",children:[a.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:t}),a.jsx("span",{className:"text-white/60 ml-1",children:""})]})]})}const VA=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:F("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));VA.displayName="Textarea";const Dg="custom_rules_";function UA(t){const[e,n]=m.useState(fo);return m.useEffect(()=>{const i=localStorage.getItem(Dg+t);if(i)try{n(JSON.parse(i))}catch{n(fo)}},[t]),{customRules:e,saveRules:i=>{n(i),localStorage.setItem(Dg+t,JSON.stringify(i))},resetRules:()=>{n(fo),localStorage.removeItem(Dg+t)}}}function MX({roomCode:t,isHost:e,onRulesChange:n}){const{toast:r}=Nt(),[s,i]=m.useState(!1),[o,l]=m.useState(fo),{customRules:c,saveRules:u,resetRules:d}=UA(t);m.useEffect(()=>{l(c),n==null||n(c)},[c,n]);const h=()=>{u(o),n==null||n(o),i(!1),r({title:" !",description:""})},f=()=>{d(),l(fo),n==null||n(fo),r({title:" ",description:""})},p=(w,x,g)=>{l(y=>({...y,[w]:{...y[w],[x]:g}}))};return e?a.jsxs(Wr,{open:s,onOpenChange:i,children:[a.jsx(Ri,{asChild:!0,children:a.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(Nu,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"max-w-lg max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-xl font-bold flex items-center gap-2",children:" "}),a.jsx(Hr,{className:"sr-only",children:""})]}),a.jsx(Ii,{className:"h-[60vh] pr-4",children:a.jsx("div",{className:"space-y-4",children:AP.map(w=>{var x,g,y;return a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("span",{className:"text-2xl w-10 h-10 flex items-center justify-center bg-white/10 rounded-lg font-bold",children:w}),a.jsx(ge,{value:((x=o[w])==null?void 0:x.emoji)||"",onChange:v=>p(w,"emoji",v.target.value),className:"w-16 text-center text-xl bg-black/30 border-white/20",placeholder:""}),a.jsx(ge,{value:((g=o[w])==null?void 0:g.title)||"",onChange:v=>p(w,"title",v.target.value),className:"flex-1 bg-black/30 border-white/20",placeholder:""})]}),a.jsx(VA,{value:((y=o[w])==null?void 0:y.description)||"",onChange:v=>p(w,"description",v.target.value),className:"bg-black/30 border-white/20 resize-none",placeholder:"...",rows:2})]},w)})})}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[a.jsxs(M,{variant:"outline",onClick:f,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[a.jsx(co,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{onClick:h,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[a.jsx(uy,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}const DX=im("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function du({className:t,variant:e,...n}){return a.jsx("div",{className:F(DX({variant:e}),t),...n})}async function OX(t,e=3){try{const n=[],r=` Undercover  "${t}"
    
:
-  
-  Undercover 
- 
- 

:
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""

 ${e}  "${t}":`;await new Promise(i=>setTimeout(i,1500));const s=t.toLowerCase();return s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}),n.slice(0,e)}catch(n){throw console.error("Error generating vocabulary:",n),new Error(" ")}}async function BA(t,e=4,n="medium"){try{await new Promise(c=>setTimeout(c,1e3));const r=[" 1 ",""," 1  "," 1 "," 1 "],s=[":  '' "," 1-21  7  7 ","  "," "," '':  ","  ","  "],i=["Master Rule:   ",":  ''  3 ",":    1 ",":   2 ","  ",`:  ${e}  `,":   "];let o;switch(n){case"easy":o=r;break;case"hard":o=i;break;default:o=s}const l=o[Math.floor(Math.random()*o.length)];return{card:t,rule:l,difficulty:n}}catch(r){throw console.error("Error generating rule:",r),new Error(" ")}}async function LX(t=5,e=4){const n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],r=["easy","medium","hard"],s=[];for(let i=0;i<t;i++){const o=n[Math.floor(Math.random()*n.length)],l=r[Math.floor(Math.random()*r.length)];s.push(BA(o,e,l))}return Promise.all(s)}function FX({playerCount:t,onApplyRule:e}){const[n,r]=m.useState(!1),[s,i]=m.useState(!1),[o,l]=m.useState([]),[c,u]=m.useState(null),{toast:d}=Nt(),h=async()=>{i(!0);try{const g=await LX(5,t);l(g),d({title:" !",description:`AI  ${g.length} `})}catch(g){d({title:"",description:g instanceof Error?g.message:"",variant:"destructive"})}finally{i(!1)}},f=async g=>{i(!0);try{const y=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],v=y[Math.floor(Math.random()*y.length)],_=await BA(v,t,g);l([_,...o]),d({title:" !",description:` ${_.card}`})}catch(y){d({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{i(!1)}},p=(g,y)=>{navigator.clipboard.writeText(`${g.card}: ${g.rule}`),u(y),setTimeout(()=>u(null),2e3),d({title:"!",description:""})},w=g=>{switch(g){case"easy":return"bg-green-500/20 text-green-400 border-green-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"hard":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},x=g=>{switch(g){case"easy":return"";case"medium":return"";case"hard":return"";default:return g}};return a.jsxs(Wr,{open:n,onOpenChange:r,children:[a.jsx(Ri,{asChild:!0,children:a.jsxs(M,{variant:"outline",size:"sm",className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30 text-purple-300 hover:from-purple-500/30 hover:to-pink-500/30",children:[a.jsx(is,{className:"w-4 h-4 mr-2"}),"AI "]})}),a.jsxs(mr,{className:"sm:max-w-2xl bg-gray-900 text-white border-white/20 max-h-[90vh] flex flex-col",children:[a.jsxs(pr,{children:[a.jsxs(gr,{className:"flex items-center gap-2 text-xl",children:[a.jsx(is,{className:"w-6 h-6 text-purple-400"}),"AI Rule Generator"]}),a.jsxs(Hr,{className:"text-white/60",children:[" AI   ",t," "]})]}),a.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(M,{onClick:()=>h(),disabled:s,className:"flex-1 bg-purple-500 hover:bg-purple-600",children:s?a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(is,{className:"w-4 h-4 mr-2"})," 5 "]})}),o.length>0&&a.jsx(M,{onClick:()=>l([]),variant:"outline",className:"border-white/20 text-white/70 hover:bg-white/10",children:""})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx(M,{onClick:()=>f("easy"),disabled:s,variant:"outline",className:"border-green-500/30 text-green-400 hover:bg-green-500/10",size:"sm",children:"+ "}),a.jsx(M,{onClick:()=>f("medium"),disabled:s,variant:"outline",className:"border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10",size:"sm",children:"+ "}),a.jsx(M,{onClick:()=>f("hard"),disabled:s,variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",size:"sm",children:"+ "})]}),o.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-white/80",children:[" (",o.length,"):"]}),o.map((g,y)=>a.jsx("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs(du,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[" ",g.card]}),a.jsx(du,{variant:"outline",className:w(g.difficulty),children:x(g.difficulty)})]}),a.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:g.rule})]}),a.jsx(M,{onClick:()=>p(g,y),size:"sm",variant:"ghost",className:"text-white/60 hover:text-white hover:bg-white/10",children:c===y?a.jsx(ai,{className:"w-4 h-4 text-green-400"}):a.jsx(bo,{className:"w-4 h-4"})})]})},y))]}):a.jsxs("div",{className:"text-center py-12 text-white/40",children:[a.jsx(is,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{className:"text-sm",children:" AI "})]})]}),a.jsx("div",{className:"border-t border-white/10 pt-4 mt-4",children:a.jsx("p",{className:"text-xs text-white/40 text-center",children:"  "})})]})]})}const zA=()=>{const{userId:t}=zr(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState(!0);return m.useEffect(()=>{if(!t){n([]),s([]),o([]),c(!1);return}const g=He(Ge,`users/${t}/friends`),y=He(Ge,`users/${t}/friendRequests`),v=He(Ge,`users/${t}/gameInvites`),_=new Map,C=qo(g,E=>{const k=E.val();if(k){const T=Object.entries(k).map(([I,L])=>({id:I,displayName:L.displayName,addedAt:L.addedAt}));T.forEach(I=>{if(!_.has(I.id)){const L=He(Ge,`users/${I.id}`),P=qo(L,V=>{if(V.exists()){const $=V.val().displayName;n(H=>H.map(A=>A.id===I.id?{...A,displayName:$}:A))}});_.set(I.id,P)}});const R=new Set(T.map(I=>I.id));_.forEach((I,L)=>{R.has(L)||(I(),_.delete(L))}),n(T)}else _.forEach(T=>T()),_.clear(),n([]);c(!1)}),b=qo(y,E=>{const k=E.val();if(k){const T=Object.entries(k).map(([R,I])=>({id:R,fromId:I.fromId,fromName:I.fromName,sentAt:I.sentAt}));s(T)}else s([])}),N=new Map,S=qo(v,E=>{const k=E.val();if(k){const R=Object.entries(k).map(([L,P])=>({id:L,fromId:P.fromId,fromName:P.fromName,roomCode:P.roomCode,gameType:P.gameType,gameName:P.gameName,sentAt:P.sentAt})).filter(L=>Date.now()-L.sentAt<10*60*1e3);R.forEach(L=>{if(!N.has(L.fromId)){const P=He(Ge,`users/${L.fromId}`),V=qo(P,$=>{if($.exists()){const H=$.val().displayName;o(A=>A.map(D=>D.fromId===L.fromId?{...D,fromName:H}:D))}});N.set(L.fromId,V)}});const I=new Set(R.map(L=>L.fromId));N.forEach((L,P)=>{I.has(P)||(L(),N.delete(P))}),o(R)}else N.forEach(T=>T()),N.clear(),o([])});return()=>{C(),b(),S(),_.forEach(E=>E()),_.clear(),N.forEach(E=>E()),N.clear()}},[t]),{friends:e,friendRequests:r,gameInvites:i,loading:l,searchUserById:async g=>{if(!g||g===t)return null;const y=He(Ge,`users/${g}`),v=await Ki(y);if(v.exists()){const _=v.val();return{id:_.id,displayName:_.displayName}}return null},sendFriendRequest:async g=>{if(!t)return!1;const y=He(Ge,`users/${t}`),v=await Ki(y);if(!v.exists())return!1;const _=v.val(),C=He(Ge,`users/${t}/friends/${g}`);if((await Ki(C)).exists())return!1;const N=He(Ge,`users/${g}/friendRequests/${t}`);return await la(N,{fromId:t,fromName:_.displayName,sentAt:Date.now()}),!0},acceptFriendRequest:async(g,y,v)=>{if(!t)return!1;const _=He(Ge,`users/${t}`),C=await Ki(_);if(!C.exists())return!1;const b=C.val(),N=He(Ge,`users/${t}/friends/${y}`),S=He(Ge,`users/${y}/friends/${t}`);await la(N,{displayName:v,addedAt:Date.now()}),await la(S,{displayName:b.displayName,addedAt:Date.now()});const E=He(Ge,`users/${t}/friendRequests/${g}`);return await Kl(E),!0},declineFriendRequest:async g=>{if(!t)return!1;const y=He(Ge,`users/${t}/friendRequests/${g}`);return await Kl(y),!0},removeFriend:async g=>{if(!t)return!1;const y=He(Ge,`users/${t}/friends/${g}`),v=He(Ge,`users/${g}/friends/${t}`);return await Kl(y),await Kl(v),!0},sendGameInvite:async(g,y,v,_)=>{if(!t)return!1;const C=He(Ge,`users/${t}`),b=await Ki(C);if(!b.exists())return!1;const N=b.val(),S=He(Ge,`users/${g}/gameInvites/${Date.now()}`);return await la(S,{fromId:t,fromName:N.displayName,roomCode:y,gameType:v,gameName:_,sentAt:Date.now()}),!0},dismissGameInvite:async g=>{if(!t)return!1;const y=He(Ge,`users/${t}/gameInvites/${g}`);return await Kl(y),!0}}},$X=({onClose:t,currentRoomCode:e,currentGameType:n,currentGameName:r,onJoinRoom:s})=>{const{userId:i,displayName:o,logout:l,updateDisplayName:c}=zr(),{friends:u,friendRequests:d,gameInvites:h,loading:f,searchUserById:p,sendFriendRequest:w,acceptFriendRequest:x,declineFriendRequest:g,removeFriend:y,sendGameInvite:v,dismissGameInvite:_}=zA(),[C,b]=m.useState(""),[N,S]=m.useState(null),[E,k]=m.useState(!1),[T,R]=m.useState("friends"),[I,L]=m.useState(null),[P,V]=m.useState(!1),[$,H]=m.useState(o||""),[A,D]=m.useState(!1),j=async()=>{if($.trim().length<2){ot.error(" 2 ");return}if($.trim().length>20){ot.error(" 20 ");return}D(!0);const K=await c($.trim());D(!1),K?(ot.success("!"),V(!1)):ot.error("")},q=async()=>{if(!C.trim())return;k(!0);const K=await p(C.trim());S(K),k(!1),K||ot.error("")},Q=async()=>{if(!N)return;await w(N.id)?(ot.success("!"),S(null),b("")):ot.error("")},ie=async(K,me,Ue)=>{await x(K,me,Ue)&&ot.success(` ${Ue} !`)},le=async K=>{await g(K),ot.info("")},Re=async(K,me)=>{await y(K)&&ot.info(` ${me} `)},Oe=async(K,me)=>{if(!e||!n||!r){ot.error("");return}L(K);const Ue=await v(K,e,n,r);L(null),Ue?ot.success(` ${me} !`):ot.error("")},Z=async K=>{await _(K.id),s?(s(K.roomCode,K.gameType),t(),ot.success(` ${K.roomCode}...`)):(navigator.clipboard.writeText(K.roomCode),ot.success(` ${K.roomCode} !`))},Ne=async K=>{await _(K),ot.info("")},je=()=>{i&&(navigator.clipboard.writeText(i),ot.success(" ID !"))},_e=async()=>{await l(),t(),ot.info("")};return d.length+h.length,iy.createPortal(a.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:9999},onClick:t,children:a.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-zinc-900 rounded-2xl w-full max-w-md max-h-[85vh] overflow-hidden border border-zinc-700",style:{zIndex:1e4},onClick:K=>K.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center font-bold text-lg",children:(o==null?void 0:o.charAt(0).toUpperCase())||"?"}),a.jsxs("div",{children:[P?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{value:$,onChange:K=>H(K.target.value),className:"h-8 w-32 bg-white/20 border-white/30 text-white placeholder:text-white/50",placeholder:"...",maxLength:20}),a.jsx(M,{size:"icon",variant:"ghost",onClick:j,disabled:A,className:"h-8 w-8 text-white hover:bg-white/20",children:A?a.jsx(gt,{className:"animate-spin",size:16}):a.jsx(ai,{size:16})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{V(!1),H(o||"")},className:"h-8 w-8 text-white hover:bg-white/20",children:a.jsx(rr,{size:16})})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"font-bold text-lg",children:o}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{H(o||""),V(!0)},className:"h-6 w-6 text-white/70 hover:text-white hover:bg-white/20",children:a.jsx(Fh,{size:14})})]}),a.jsxs("p",{className:"text-xs text-white/70",children:["ID: ",i==null?void 0:i.slice(0,8),"..."]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{size:"icon",variant:"ghost",onClick:je,className:"text-white hover:bg-white/20",children:a.jsx(bo,{size:18})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:_e,className:"text-white hover:bg-white/20",children:a.jsx(qa,{size:18})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:t,className:"text-white hover:bg-white/20",children:a.jsx(rr,{size:18})})]})]})}),a.jsxs("div",{className:"flex border-b border-zinc-700",children:[a.jsxs("button",{onClick:()=>R("friends"),className:`flex-1 py-3 text-sm font-medium transition-colors ${T==="friends"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(dn,{size:16,className:"inline mr-1"}),""]}),a.jsxs("button",{onClick:()=>R("requests"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${T==="requests"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(EL,{size:16,className:"inline mr-1"}),"",d.length>0&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-red-500 rounded-full text-xs",children:d.length})]}),a.jsxs("button",{onClick:()=>R("invites"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${T==="invites"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(Oh,{size:16,className:"inline mr-1"}),"",h.length>0&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-green-500 rounded-full text-xs",children:h.length})]}),a.jsx("button",{onClick:()=>R("search"),className:`flex-1 py-3 text-sm font-medium transition-colors ${T==="search"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:a.jsx(M0,{size:16,className:"inline"})})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:f?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(gt,{className:"animate-spin",size:24})}):a.jsxs(a.Fragment,{children:[T==="friends"&&a.jsxs("div",{className:"space-y-2",children:[e&&a.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-lg border border-green-500/30",children:[a.jsxs("p",{className:"text-sm text-green-400 flex items-center gap-2",children:[a.jsx(Oh,{size:16}),":"," ",a.jsx("span",{className:"font-bold",children:e})]}),a.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:""})]}),u.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):u.map(K=>a.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold",children:K.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:K.displayName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",K.id.slice(0,8),"..."]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[e&&a.jsx(M,{size:"icon",onClick:()=>Oe(K.id,K.displayName),disabled:I===K.id,className:"bg-green-600 hover:bg-green-700",children:I===K.id?a.jsx(gt,{className:"animate-spin",size:18}):a.jsx(ST,{size:18})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>Re(K.id,K.displayName),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(DL,{size:18})})]})]},K.id))]}),T==="requests"&&a.jsx("div",{className:"space-y-2",children:d.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):d.map(K=>a.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold",children:K.fromName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:K.fromName}),a.jsx("p",{className:"text-xs text-zinc-500",children:""})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(M,{size:"icon",onClick:()=>ie(K.id,K.fromId,K.fromName),className:"bg-green-600 hover:bg-green-700",children:a.jsx(ai,{size:18})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>le(K.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(rr,{size:18})})]})]},K.id))}),T==="invites"&&a.jsx("div",{className:"space-y-2",children:h.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):h.map(K=>a.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 bg-zinc-800 rounded-lg border border-green-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center font-bold",children:K.fromName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:K.fromName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",K.gameName]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("div",{className:"flex-1 bg-zinc-900 px-3 py-2 rounded text-sm",children:[a.jsx("span",{className:"text-zinc-400",children:": "}),a.jsx("span",{className:"text-green-400 font-mono font-bold",children:K.roomCode})]}),a.jsxs(M,{size:"sm",onClick:()=>Z(K),className:"bg-green-600 hover:bg-green-700",children:[a.jsx(ai,{size:16,className:"mr-1"}),""]}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>Ne(K.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(rr,{size:18})})]}),a.jsxs("p",{className:"text-xs text-zinc-600 mt-2",children:[""," ",Math.max(0,Math.ceil((10*60*1e3-(Date.now()-K.sentAt))/6e4))," ",""]})]},K.id))}),T==="search"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{value:C,onChange:K=>b(K.target.value),placeholder:" ID ...",className:"bg-zinc-800 border-zinc-700"}),a.jsx(M,{onClick:q,disabled:E,children:E?a.jsx(gt,{className:"animate-spin",size:18}):a.jsx(M0,{size:18})})]}),N&&a.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-zinc-800 rounded-lg border border-cyan-500/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold text-lg",children:N.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:N.displayName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",N.id.slice(0,8),"..."]})]})]}),a.jsxs(M,{onClick:Q,className:"bg-cyan-600 hover:bg-cyan-700",children:[a.jsx(Vh,{size:18,className:"mr-2"}),""]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-zinc-800/50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-zinc-400 text-center",children:" ID :"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[a.jsx("code",{className:"bg-zinc-900 px-3 py-2 rounded text-cyan-400 text-sm break-all",children:i}),a.jsx(M,{size:"icon",variant:"ghost",onClick:je,children:a.jsx(bo,{size:16})})]})]})]})]})})]})}),document.body)},jr=({currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})=>{const{user:s,loading:i,login:o}=zr(),{gameInvites:l,friendRequests:c}=zA(),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=async()=>{f(!0);try{await o(),ot.success("!")}catch{ot.error("")}finally{f(!1)}},w=((l==null?void 0:l.length)||0)+((c==null?void 0:c.length)||0);return i?a.jsx(M,{variant:"ghost",size:"sm",disabled:!0,className:"text-white",children:a.jsx(gt,{className:"animate-spin",size:18})}):a.jsxs(a.Fragment,{children:[s?a.jsxs(M,{onClick:()=>d(!0),size:"sm",className:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 relative text-white",children:[a.jsx(dn,{size:16,className:"mr-1"}),"",w>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center animate-pulse",children:w})]}):a.jsxs(M,{onClick:p,disabled:h,size:"sm",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white","data-login-button":"true",children:[h?a.jsx(gt,{className:"animate-spin mr-1",size:16}):a.jsx(PL,{size:16,className:"mr-1"}),""]}),a.jsx(sl,{children:u&&a.jsx($X,{onClose:()=>d(!1),currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})})]})};function WA({active:t,duration:e=3e3,onComplete:n}){const[r,s]=m.useState([]);return m.useEffect(()=>{if(!t){s([]);return}const i=["#FFD700","#FF69B4","#00CED1","#FF6347","#9370DB","#32CD32","#FF1493","#00BFFF"],o=[],l=50;for(let h=0;h<l;h++)o.push({id:h,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,scale:Math.random()*.5+.5,color:i[Math.floor(Math.random()*i.length)],velocityX:(Math.random()-.5)*8,velocityY:Math.random()*3+2,rotationSpeed:(Math.random()-.5)*10});s(o);const c=Date.now();let u;const d=()=>{if(Date.now()-c>e){s([]),n==null||n();return}s(f=>f.map(p=>({...p,x:p.x+p.velocityX,y:p.y+p.velocityY,rotation:p.rotation+p.rotationSpeed,velocityY:p.velocityY+.2}))),u=requestAnimationFrame(d)};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}},[t,e,n]),!t||r.length===0?null:a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:r.map(i=>a.jsx("div",{className:"absolute w-3 h-3 rounded-sm",style:{left:i.x,top:i.y,backgroundColor:i.color,transform:`rotate(${i.rotation}deg) scale(${i.scale})`,transition:"none"}},i.id))})}function VX({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onDrawCard:i,onReshuffle:o,onLeave:l}){var N,S,E,k,T,R;const{toast:c}=Nt(),[u,d]=m.useState(!1),[h,f]=m.useState(0),[p,w]=m.useState(0),x=m.useRef(null),{customRules:g}=UA(t.code),y=g,v=async()=>{const I=t.code;let L=!1;try{navigator.clipboard&&navigator.clipboard.writeText&&(await navigator.clipboard.writeText(I),L=!0)}catch{}if(!L)try{const P=document.createElement("textarea");P.value=I,P.style.position="fixed",P.style.left="-9999px",P.style.top="0",document.body.appendChild(P),P.focus(),P.select();const V=document.execCommand("copy");document.body.removeChild(P),L=V}catch{}c({title:L?" !":" ",description:I,duration:5e3})},_=()=>{if(t.cards_remaining===0)return;const I=Date.now();if(I-p<500&&h>0){const P=h+1;if(f(P),w(I),P>=3&&r){f(0),o(),c({title:" !",description:""});return}}else f(1),w(I),C()},C=()=>{t.cards_remaining!==0&&(d(!1),setTimeout(()=>{i(),setTimeout(()=>{d(!0),setTimeout(()=>{var I;(I=x.current)==null||I.scrollIntoView({behavior:"smooth",block:"center"})},300)},300)},200))},b=t.cards_remaining===0&&t.current_card!==null;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[a.jsx(WA,{active:b&&t.cards_remaining===0,duration:6e3}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/50"}),a.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx(M,{variant:"ghost",size:"icon",onClick:l,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(qa,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:" "}),a.jsxs("button",{onClick:v,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[a.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),a.jsx(bo,{className:"w-3 h-3"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jr,{currentRoomCode:t.code,currentGameType:"kingscup",currentGameName:z("kingsCup")}),r&&a.jsx(MX,{roomCode:t.code,isHost:r}),a.jsx(FX,{playerCount:e.length}),r&&t.game_started&&!b&&a.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{o(),c({title:" !",description:""})},className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx($h,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r&&!t.game_started&&a.jsxs(M,{variant:"default",onClick:s,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[a.jsx(bu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"sm:hidden",children:""})]})]})]}),a.jsx("div",{className:"mb-2 sm:mb-4",children:a.jsx($A,{players:e,currentPlayerId:n??void 0})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 sm:py-6 md:py-8 relative z-10",children:t.game_started?b?a.jsx("div",{className:"text-center px-2",children:a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-white/10",children:[a.jsx("div",{className:"text-5xl sm:text-6xl mb-3 sm:mb-4",children:""}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"!"}),a.jsx("p",{className:"text-white/60 mb-4 sm:mb-6 text-base sm:text-lg",children:" !"}),r&&a.jsxs(M,{variant:"default",size:"lg",onClick:o,className:"bg-white text-black hover:bg-white/90",children:[a.jsx($h,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})]})}):a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center w-full px-2 sm:px-4",children:r?a.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[t.current_card?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(CS,{card:t.current_card,isFlipped:!0,showRule:!1,size:"large"}),a.jsx("div",{className:"mt-6 sm:mt-8 bg-black/60 backdrop-blur-md rounded-2xl px-6 py-4 sm:px-8 sm:py-6 border border-white/10 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-4 sm:gap-5",children:[a.jsx("span",{className:"text-4xl sm:text-5xl md:text-6xl",children:((N=y[t.current_card.value])==null?void 0:N.emoji)||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-amber-400 font-bold text-lg sm:text-xl md:text-2xl",children:(S=y[t.current_card.value])==null?void 0:S.title}),a.jsx("p",{className:"text-white/80 text-sm sm:text-base md:text-lg",children:(E=y[t.current_card.value])==null?void 0:E.description})]})]})})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-48 h-72 sm:w-56 sm:h-80 md:w-64 md:h-96 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20",children:a.jsx(ex,{})}),a.jsx("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:a.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center",children:["",a.jsx("br",{}),""]})})]}),a.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-full px-6 py-2 border border-white/10",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-white",children:t.cards_remaining}),a.jsx("span",{className:"text-white/60 ml-2",children:""})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-8 md:gap-12",children:[t.current_card?a.jsx(CS,{card:t.current_card,isFlipped:u,showRule:!1}):a.jsx("div",{className:"w-32 h-48 sm:w-44 sm:h-64 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-xl border-2 border-dashed border-white/20",children:a.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center px-2",children:["",a.jsx("br",{}),""]})}),a.jsx(AX,{cardsRemaining:t.cards_remaining,onDraw:_,disabled:t.cards_remaining===0,showCount:!0})]}),t.current_card&&u&&a.jsx("div",{ref:x,className:"mt-4 sm:mt-6 bg-black/60 backdrop-blur-md rounded-xl px-5 py-3 sm:px-6 sm:py-4 border border-white/10 max-w-sm",children:a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("span",{className:"text-3xl sm:text-4xl",children:((k=y[t.current_card.value])==null?void 0:k.emoji)||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-amber-400 font-bold text-sm sm:text-base",children:(T=y[t.current_card.value])==null?void 0:T.title}),a.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:(R=y[t.current_card.value])==null?void 0:R.description})]})]})})]})}):a.jsxs("div",{className:"text-center px-2",children:[a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[a.jsx(ex,{}),a.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?'  ""':" Host "})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[a.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),a.jsx("button",{onClick:v,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})})]})}function UX({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const{displayName:i}=zr(),[o,l]=m.useState("menu"),[c,u]=m.useState(""),[d,h]=m.useState(""),[f,p]=m.useState(""),[w,x]=m.useState(!1),[g,y]=m.useState([]),v=m.useRef("");m.useEffect(()=>{i&&!c&&u(i)},[i]),m.useEffect(()=>{(async()=>{const S=await zm();y(S)})()},[]),m.useEffect(()=>{const N=S=>{if(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement)return;const E=S.key.toLowerCase(),k=v.current+E;"adminhee444".startsWith(k)?(v.current=k,k==="adminhee444"&&n&&(v.current="",x(!0))):v.current="adminhee444".startsWith(E)?E:""};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[n]);const _=async()=>{c.trim()&&await t(c.trim())},C=async()=>{!c.trim()||!d.trim()||await e(d.trim(),c.trim())},b=async()=>{!f.trim()||!n||(await n(f.trim()),x(!1),p(""))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx(db,{names:g}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&a.jsx("div",{className:"absolute top-4 left-4 z-20",children:a.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(wa,{className:"w-5 h-5 rotate-180"})})}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:""}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:" Online"})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[o==="menu"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>l("create"),children:[a.jsx(_u,{className:"w-5 h-5"}),""]}),a.jsx("p",{className:"text-white/50 text-xs text-center"})]}),a.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>l("join"),children:[a.jsx(dn,{className:"w-5 h-5"}),""]}),n&&a.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[a.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>x(!0),disabled:r,children:[a.jsx(Uh,{className:"w-5 h-5"})," LIVE"]}),a.jsx("p",{className:"text-white/50 text-xs text-center",children:" "})]})]}),o==="create"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),a.jsx(ge,{placeholder:"",value:c,onChange:N=>u(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:""}),a.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:_,disabled:!c.trim()||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:["",a.jsx(wa,{className:"w-4 h-4"})]})})]})]}),o==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),a.jsx(ge,{placeholder:" (6 )",value:d,onChange:N=>h(N.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),a.jsx(ge,{placeholder:"",value:c,onChange:N=>u(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:""}),a.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:C,disabled:!c.trim()||d.length!==6||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:["",a.jsx(wa,{className:"w-4 h-4"})]})})]})]})]}),a.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:" 2-8 "}),a.jsx(Wr,{open:w,onOpenChange:x,children:a.jsxs(mr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-center text-white",children:" LIVE Mode"}),a.jsx(Hr,{className:"text-center text-white/60",children:""})]}),a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx(ge,{placeholder:"",value:f,onChange:N=>p(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&f.trim()&&b()}}),a.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:b,disabled:!f.trim()||r,children:r?a.jsx(gt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Uh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function BX({card:t,faceDown:e=!1}){return e?a.jsx("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md shadow-md overflow-hidden relative",children:a.jsx(Gm,{})}):a.jsxs(W.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.3},className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md bg-white border border-gray-200 shadow-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-xs sm:text-sm font-bold ${FP(t.suit)}`,children:t.value}),a.jsx("span",{className:"text-sm sm:text-base",children:LP(t.suit)})]})}function zX({players:t,currentPlayerId:e,showCards:n=!1,currentTurnPlayerId:r,gamePhase:s}){return a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:a.jsxs("span",{className:"text-white",children:["  (",t.length,")"]})}),a.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:t.map(i=>{const o=i.id===r,l=i.cards&&i.cards.length===2?mo(i.cards):{isPok:!1,pokValue:null},c=i.cards&&i.cards.length>0?uu(i.cards):null;return a.jsxs("div",{className:F("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0",i.is_dealer?"bg-amber-500/20 border-2 border-amber-500":o?"bg-green-500/20 border-2 border-green-500 animate-pulse":i.id===e?"bg-white/20 ring-2 ring-white/50":"bg-white/10 text-white"),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`/king-s-cup-party/${i.avatar||1}.jpg`,alt:i.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-white/40 shadow-lg"}),i.is_host&&a.jsx(_o,{className:"w-4 h-4 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"}),i.is_dealer&&a.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 text-[10px] bg-amber-500 text-black px-1.5 rounded-full font-bold",children:""})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-white truncate max-w-[70px] sm:max-w-[80px] block",children:i.name}),s==="drawing"&&i.has_drawn&&a.jsx("span",{className:"text-[10px] text-green-400",children:" "}),o&&a.jsx("span",{className:"text-[10px] text-green-300",children:" "})]}),i.cards&&i.cards.length>0&&a.jsx("div",{className:"flex gap-1 mt-1",children:i.cards.map((u,d)=>a.jsx(BX,{card:u,faceDown:!n},d))}),n&&i.cards&&i.cards.length>0&&a.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[a.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-400",children:i.points}),l.isPok&&l.pokValue!==null&&a.jsxs("span",{className:"text-[9px] sm:text-[10px] bg-green-500 text-white px-1.5 py-0.5 rounded-full animate-bounce",children:[" ",l.pokValue,"!"]}),c&&c.type!=="normal"&&!l.isPok&&a.jsx("span",{className:"text-[9px] sm:text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full",children:c.name})]}),i.result&&n&&a.jsx("span",{className:`text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full ${i.result==="player_win"?"bg-green-500 text-white":i.is_dealer?"bg-amber-500 text-black":"bg-red-500 text-white"}`,children:i.is_dealer?"":i.result==="player_win"?` ${i.multiplier&&i.multiplier>1?` x${i.multiplier}`:""}`:""})]},i.id)})})]})}var WX="Label",HA=m.forwardRef((t,e)=>a.jsx(se.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));HA.displayName=WX;var GA=HA;const HX=im("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ft=m.forwardRef(({className:t,...e},n)=>a.jsx(GA,{ref:n,className:F(HX(),t),...e}));Ft.displayName=GA.displayName;const SS={pok9Multiplier:2,pok8Multiplier:2,tongMultiplier:5,samLeungMultiplier:3,straightMultiplier:3,flushMultiplier:3,dengMultiplier:2,pairMultiplier:2};function GX({roomCode:t,isHost:e}){const{toast:n}=Nt(),[r,s]=m.useState(!1),[i,o]=m.useState(SS);m.useEffect(()=>{const d=localStorage.getItem(`pokdeng_rules_${t}`);d&&o(JSON.parse(d))},[t]);const l=()=>{localStorage.setItem(`pokdeng_rules_${t}`,JSON.stringify(i)),s(!1),n({title:" !",description:""})},c=()=>{o(SS),localStorage.removeItem(`pokdeng_rules_${t}`),n({title:" ",description:""})},u=(d,h)=>{o(f=>({...f,[d]:Math.max(1,Math.min(10,h))}))};return e?a.jsxs(Wr,{open:r,onOpenChange:s,children:[a.jsx(Ri,{asChild:!0,children:a.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:a.jsx(Nu,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"max-w-md max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-xl font-bold flex items-center gap-2",children:" "}),a.jsx(Hr,{className:"sr-only",children:""})]}),a.jsx(Ii,{className:"h-[60vh] pr-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," 9"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.pok9Multiplier,onChange:d=>u("pok9Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2  9 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," 8"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.pok8Multiplier,onChange:d=>u("pok8Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2  8 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Three of a Kind)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.tongMultiplier,onChange:d=>u("tongMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 7-7-7)"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.samLeungMultiplier,onChange:d=>u("samLeungMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:"J-Q-K ( 3 )"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Straight)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.straightMultiplier,onChange:d=>u("straightMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 5-6-7)"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Flush)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.flushMultiplier,onChange:d=>u("flushMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Same Suit)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.dengMultiplier,onChange:d=>u("dengMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Pair)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ge,{type:"number",min:1,max:10,value:i.pairMultiplier,onChange:d=>u("pairMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]})]})}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[a.jsxs(M,{variant:"outline",onClick:c,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[a.jsx(co,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(M,{onClick:l,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[a.jsx(uy,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}function qX({card:t,faceDown:e=!1}){return e?a.jsx("div",{className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl shadow-xl overflow-hidden relative",children:a.jsx(Gm,{})}):a.jsxs(W.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.4},className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl bg-white border-2 border-gray-200 shadow-xl flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-2xl sm:text-3xl font-bold ${FP(t.suit)}`,children:t.value}),a.jsx("span",{className:"text-3xl sm:text-4xl",children:LP(t.suit)})]})}function KX({room:t,players:e,currentPlayerId:n,isHost:r,isLiveMode:s=!1,onStartGame:i,onDrawCard:o,onStandCard:l,onDealerDraw:c,onDealerStand:u,onShowdown:d,onNextRound:h,onLeave:f,onSetDealer:p}){var A,D;const{toast:w}=Nt(),[x,g]=m.useState(!1),[y,v]=m.useState(!1),_=()=>{const j=t.code;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(j).then(()=>{w({title:" !",description:`: ${j}`,duration:3e3})}).catch(()=>{C(j)}):C(j)},C=j=>{const q=document.createElement("textarea");q.value=j,q.style.position="fixed",q.style.top="0",q.style.left="0",q.style.width="2em",q.style.height="2em",q.style.padding="0",q.style.border="none",q.style.outline="none",q.style.boxShadow="none",q.style.background="transparent",document.body.appendChild(q),q.focus(),q.select();try{document.execCommand("copy"),w({title:" !",description:`: ${j}`,duration:3e3})}catch{w({title:" ",description:`${j} ()`,duration:5e3})}document.body.removeChild(q)},b=e.find(j=>j.id===n),N=e.find(j=>j.is_dealer),S=e.filter(j=>!j.is_dealer).sort((j,q)=>j.player_order-q.player_order),E=t.game_phase==="drawing"?S[t.current_player_index]:null,k=(E==null?void 0:E.id)===n,T=t.game_phase==="showdown"&&N&&!N.has_drawn,R=b==null?void 0:b.is_dealer,I=e.every(j=>j.has_drawn),L=e.filter(j=>j.has_drawn).length,P=e.length,V=t.game_phase==="showdown"||t.game_phase==="ended",$=r&&s,H=m.useRef(!1);return m.useEffect(()=>{if(t.game_phase==="showdown"&&I&&!H.current){H.current=!0;const j=setTimeout(()=>{d()},1e3);return()=>clearTimeout(j)}(t.game_phase==="drawing"||t.game_phase==="waiting")&&(H.current=!1)},[t.game_phase,I,d]),a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/50"}),a.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx(M,{variant:"ghost",size:"icon",onClick:f,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(qa,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:[" "," ",$&&a.jsx("span",{className:"text-amber-400",children:" LIVE"})]}),a.jsxs("button",{onClick:_,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[a.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),a.jsx(bo,{className:"w-3 h-3"}),a.jsxs("div",{className:"flex items-center gap-1 ml-1 bg-green-500/20 border border-green-500/50 rounded-full px-1.5 py-0.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-[10px] text-green-300 font-medium",children:"LIVE"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jr,{currentRoomCode:t.code,currentGameType:"pokdeng",currentGameName:z("pokDeng")}),(r||s&&!n)&&p&&a.jsxs(Wr,{open:y,onOpenChange:v,children:[a.jsx(Ri,{asChild:!0,children:a.jsx(M,{variant:"ghost",size:"icon",className:"text-amber-400 hover:text-amber-300 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:a.jsx(_o,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"bg-black/95 border-amber-500/50 text-white max-w-md",children:[a.jsx(pr,{children:a.jsx(gr,{className:"text-amber-400 text-xl",children:" "})}),a.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:e.map(j=>a.jsx(M,{onClick:()=>{p(j.id),v(!1),w({title:" ",description:`${j.name} `})},variant:j.is_dealer?"default":"outline",className:`h-auto py-3 ${j.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black border-amber-400":"border-white/30 text-white hover:bg-white/10"}`,children:a.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-sm font-medium truncate max-w-full",children:j.name}),j.is_dealer&&a.jsx("span",{className:"text-xl",children:""})]})},j.id))})]})]}),(r||s&&!n)&&a.jsx(GX,{roomCode:t.code,isHost:!0}),(r||s&&!n)&&t.game_started&&a.jsx(M,{variant:"ghost",size:"icon",onClick:h,className:"text-green-400 hover:text-green-300 hover:bg-green-400/10 w-8 h-8 sm:w-10 sm:h-10",title:" / ",children:a.jsx(co,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(r||s&&!n)&&!t.game_started&&a.jsxs(M,{variant:"default",onClick:i,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[a.jsx(bu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"sm:hidden",children:""})]})]})]}),a.jsx("div",{className:"mb-2 sm:mb-4",children:$?a.jsx(zX,{players:e.map(j=>({id:j.id,name:j.name,is_host:j.is_host,avatar:j.avatar,cards:j.cards,points:j.points,is_dealer:j.is_dealer,has_drawn:j.has_drawn,result:j.result??void 0,multiplier:j.multiplier})),currentPlayerId:n??void 0,showCards:V||t.game_started,currentTurnPlayerId:E==null?void 0:E.id,gamePhase:t.game_phase??void 0}):a.jsx($A,{players:e.map(j=>({id:j.id,name:j.name,is_host:j.is_host,avatar:j.avatar})),currentPlayerId:n??void 0})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-4 md:py-6 relative z-10 overflow-y-auto",children:t.game_started?$?a.jsxs("div",{className:"flex flex-col items-center justify-start w-full h-full overflow-y-auto",children:[a.jsx("div",{className:"text-center mb-4 sm:mb-6",children:a.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-6 sm:px-8 py-2 sm:py-3 rounded-full text-lg sm:text-xl md:text-2xl font-medium",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&` : ${(E==null?void 0:E.name)||"..."}`,t.game_phase==="showdown"&&(T?" ":" !"),t.game_phase==="ended"&&" "]})}),a.jsxs("div",{className:"text-white text-sm mb-4 bg-black/50 p-3 rounded",children:[a.jsxs("div",{children:[": ",e.length," "]}),a.jsxs("div",{children:[": ",(N==null?void 0:N.name)||""]}),a.jsxs("div",{children:[": ",L,"/",P]}),e.map(j=>{var q;return a.jsxs("div",{className:"text-xs",children:[j.name,": cards=",((q=j.cards)==null?void 0:q.length)||0," "]},j.id)})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-6xl px-4",children:e.length===0?a.jsx("div",{className:"col-span-full text-white text-center text-xl bg-red-500/20 p-8 rounded",children:"  - players.length = 0"}):e.map(j=>{var q;return a.jsxs("div",{className:`p-6 rounded-2xl border-2 ${j.is_dealer?"bg-amber-500/20 border-amber-500":"bg-white/5 border-white/20"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-white font-bold text-lg",children:[j.is_dealer?" ":"",j.name]}),j.is_dealer&&a.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]}),a.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[j.points||0," "]})]})]}),a.jsx("div",{className:"flex gap-2 justify-center mb-4 min-h-[100px]",children:j.cards&&j.cards.length>0?j.cards.map((Q,ie)=>a.jsxs("div",{className:"w-16 h-24 rounded-lg bg-white border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-xl font-bold ${Q.suit==="hearts"||Q.suit==="diamonds"?"text-red-500":"text-black"}`,children:Q.value}),a.jsxs("span",{className:"text-2xl",children:[Q.suit==="hearts"&&"",Q.suit==="diamonds"&&"",Q.suit==="clubs"&&"",Q.suit==="spades"&&""]})]},ie)):a.jsxs("div",{className:"text-white bg-red-500/30 p-4 rounded text-sm",children:[" player.cards = ",JSON.stringify(j.cards),a.jsx("br",{}),"length = ",((q=j.cards)==null?void 0:q.length)||0]})}),a.jsx("div",{className:"text-center",children:j.result&&t.game_phase==="ended"?a.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${j.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[j.result==="player_win"?" !":" ",j.multiplier&&j.multiplier>1&&` x${j.multiplier}`]}):j.has_drawn?a.jsx("span",{className:"text-sm text-green-300",children:" "}):a.jsx("span",{className:"text-sm text-yellow-300 animate-pulse",children:" ..."})})]},j.id)})}),a.jsxs("div",{className:"flex flex-col items-center gap-3 py-4 sm:py-6 mt-4",children:[(r||s&&!n)&&p&&t.game_phase!=="ended"&&a.jsxs(M,{onClick:()=>v(!0),variant:"outline",size:"sm",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 hover:text-amber-300",children:[a.jsx(_o,{className:"w-4 h-4 mr-2"}),""]}),t.game_phase==="showdown"&&a.jsx("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-xl px-6 py-4 mb-2",children:a.jsxs("p",{className:"text-blue-300 text-center text-sm",children:[" : ",L,"/",P," ",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-blue-200/60",children:e.map(j=>`${j.name}: ${j.has_drawn?"":""}`).join(" | ")})]})}),T&&a.jsx("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl px-6 py-4",children:a.jsxs("p",{className:"text-amber-400 font-medium text-center text-lg",children:[" ",a.jsx("br",{}),a.jsx("span",{className:"text-sm text-amber-300/70",children:""})]})}),t.game_phase==="showdown"&&a.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[a.jsxs(M,{onClick:d,disabled:!I,size:"lg",className:`font-bold text-lg px-8 py-6 ${I?"bg-purple-500 hover:bg-purple-600 text-white animate-pulse":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(A0,{className:"w-6 h-6 mr-2"}),I?"":` (${L}/${P})`]}),!I&&L>=P-1&&a.jsx(M,{onClick:d,variant:"outline",size:"sm",className:"text-xs text-orange-400 border-orange-500/50 hover:bg-orange-500/20",children:""})]}),t.game_phase==="ended"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-6 mb-6",children:[a.jsx("h2",{className:"text-center text-2xl sm:text-3xl font-bold text-amber-400 mb-6",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-white",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-white/20",children:[a.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""})]})}),a.jsx("tbody",{children:e.sort((j,q)=>j.result==="player_win"&&q.result!=="player_win"?-1:j.result!=="player_win"&&q.result==="player_win"?1:(q.points||0)-(j.points||0)).map((j,q)=>a.jsxs("tr",{className:`border-b border-white/10 transition-all hover:bg-white/5 ${j.result==="player_win"?"bg-green-500/10":"bg-red-500/5"}`,children:[a.jsx("td",{className:"py-4 px-4 text-center",children:a.jsx("span",{className:`text-2xl font-bold ${q===0&&j.result==="player_win"?"text-amber-400":"text-white/60"}`,children:q===0&&j.result==="player_win"?"":q+1})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/30"}),a.jsx("div",{children:a.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2",children:[j.name,j.is_dealer&&a.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]})})]})}),a.jsxs("td",{className:"py-4 px-4 text-center",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-amber-400",children:j.points||0}),a.jsx("span",{className:"text-white/50 text-sm ml-1",children:""})]}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("div",{className:"flex gap-1 justify-center",children:j.cards&&j.cards.length>0?j.cards.map((Q,ie)=>a.jsxs("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded bg-white border border-gray-200 flex flex-col items-center justify-center text-xs",children:[a.jsx("span",{className:`font-bold ${Q.suit==="hearts"||Q.suit==="diamonds"?"text-red-500":"text-black"}`,children:Q.value}),a.jsxs("span",{className:"text-sm",children:[Q.suit==="hearts"&&"",Q.suit==="diamonds"&&"",Q.suit==="clubs"&&"",Q.suit==="spades"&&""]})]},ie)):a.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),a.jsx("td",{className:"py-4 px-4 text-center",children:j.result==="player_win"?a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-green-400 font-bold text-sm sm:text-base",children:"!"}),j.multiplier&&j.multiplier>1&&a.jsxs("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-0.5 rounded",children:["x",j.multiplier]})]}):a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-red-400 font-bold text-sm sm:text-base",children:""})]})})]},j.id))})]})}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-white/20 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-green-400 font-bold text-lg",children:e.filter(j=>j.result==="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-red-400 font-bold text-lg",children:e.filter(j=>j.result!=="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-amber-400 font-bold text-lg",children:Math.max(...e.map(j=>j.points||0))})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-white font-bold text-lg",children:e.length})]})]})]}),a.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold text-lg px-8",children:[a.jsx(co,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="drawing"&&a.jsx("div",{className:"mt-4 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:a.jsxs("p",{className:"text-white/50 text-sm sm:text-base text-center",children:["  LIVE ",a.jsx("br",{}),""]})})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-4 py-1 rounded-full text-sm",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&(k?" !":R?" ...":` : ${(E==null?void 0:E.name)||"..."}`),t.game_phase==="showdown"&&(T&&R?" !":T?" ":" "),t.game_phase==="ended"&&" "]})}),b&&a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-4 sm:p-6 border border-white/10 mb-4 w-full max-w-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[b.avatar&&a.jsx("img",{src:`/king-s-cup-party/${b.avatar}.jpg`,alt:b.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-white font-bold text-lg",children:b.is_dealer?"  ()":" "})]}),b.cards.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-amber-400",children:b.points}),b.cards.length===2&&mo(b.cards).isPok&&a.jsxs("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-bounce",children:[" ",mo(b.cards).pokValue,"!"]}),b.cards.length>0&&((A=uu(b.cards))==null?void 0:A.type)!=="normal"&&!mo(b.cards).isPok&&a.jsx("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:(D=uu(b.cards))==null?void 0:D.name})]})]}),a.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[b.cards.map((j,q)=>a.jsx(qX,{card:j},q)),b.cards.length===0&&a.jsx("div",{className:"w-20 h-28 rounded-xl border-2 border-dashed border-white/30 flex items-center justify-center",children:a.jsx("span",{className:"text-white/30",children:"-"})})]}),b.result&&V&&!b.is_dealer&&a.jsx("div",{className:"text-center",children:a.jsxs("span",{className:`text-lg font-bold px-4 py-2 rounded-full ${b.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[b.result==="player_win"?" !":" ",b.multiplier>1&&` x${b.multiplier}`]})})]}),!R&&k&&!(b!=null&&b.has_drawn)&&b.cards.length<3&&t.game_phase==="drawing"&&a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs(M,{onClick:o,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white text-lg px-8 py-6",children:[a.jsx(X_,{className:"w-5 h-5 mr-2"}),""]}),a.jsxs(M,{onClick:l,variant:"outline",size:"lg",className:"border-white/30 text-white hover:bg-white/10 text-lg px-8 py-6",children:[a.jsx(J_,{className:"w-5 h-5 mr-2"}),""]})]}),R&&T&&!(b!=null&&b.has_drawn)&&a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("p",{className:"text-amber-400 font-medium text-center mb-2",children:" "}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[b.cards.length<3&&a.jsxs(M,{onClick:c,size:"lg",className:"bg-amber-500 hover:bg-amber-600 text-black text-lg px-8 py-6 font-bold",children:[a.jsx(X_,{className:"w-5 h-5 mr-2"}),""]}),a.jsxs(M,{onClick:u,variant:"outline",size:"lg",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 text-lg px-8 py-6",children:[a.jsx(J_,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="ended"&&a.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-4 sm:p-6 mb-4 overflow-y-auto max-h-[60vh]",children:[a.jsx("h2",{className:"text-center text-xl sm:text-2xl font-bold text-amber-400 mb-4",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-white text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-white/20",children:[a.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:"#"}),a.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""})]})}),a.jsx("tbody",{children:e.sort((j,q)=>j.result==="player_win"&&q.result!=="player_win"?-1:j.result!=="player_win"&&q.result==="player_win"?1:(q.points||0)-(j.points||0)).map((j,q)=>a.jsxs("tr",{className:`border-b border-white/10 ${j.result==="player_win"?"bg-green-500/10":"bg-red-500/5"} ${j.id===n?"ring-2 ring-amber-500":""}`,children:[a.jsx("td",{className:"py-3 px-2 text-center",children:a.jsx("span",{className:`text-lg font-bold ${q===0&&j.result==="player_win"?"text-amber-400":"text-white/60"}`,children:q===0&&j.result==="player_win"?"":q+1})}),a.jsx("td",{className:"py-3 px-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"font-bold text-sm",children:[j.name,j.id===n&&a.jsx("span",{className:"text-amber-400 ml-1",children:"()"})]}),j.is_dealer&&a.jsx("span",{className:"text-[10px] bg-amber-500 text-black px-1 rounded w-fit",children:""})]})]})}),a.jsx("td",{className:"py-3 px-2 text-center",children:a.jsx("span",{className:"text-xl font-bold text-amber-400",children:j.points||0})}),a.jsx("td",{className:"py-3 px-2",children:a.jsx("div",{className:"flex gap-1 justify-center",children:j.cards&&j.cards.length>0?j.cards.map((Q,ie)=>a.jsxs("div",{className:"w-6 h-9 rounded bg-white border border-gray-200 flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-[10px] font-bold ${Q.suit==="hearts"||Q.suit==="diamonds"?"text-red-500":"text-black"}`,children:Q.value}),a.jsxs("span",{className:"text-xs",children:[Q.suit==="hearts"&&"",Q.suit==="diamonds"&&"",Q.suit==="clubs"&&"",Q.suit==="spades"&&""]})]},ie)):a.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),a.jsx("td",{className:"py-3 px-2 text-center",children:j.result==="player_win"?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{className:"text-green-400 font-bold text-xs",children:""}),j.multiplier&&j.multiplier>1&&a.jsxs("span",{className:"text-[10px] text-green-300 bg-green-500/20 px-1 rounded",children:["x",j.multiplier]})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{className:"text-red-400 font-bold text-xs",children:""})]})})]},j.id))})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 grid grid-cols-4 gap-2",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-green-400 font-bold text-sm",children:e.filter(j=>j.result==="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-red-400 font-bold text-sm",children:e.filter(j=>j.result!=="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-amber-400 font-bold text-sm",children:Math.max(...e.map(j=>j.points||0))})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-white font-bold text-sm",children:e.length})]})]})]}),(r||s&&!n)&&!s&&a.jsxs("div",{className:"flex justify-center gap-3 py-4",children:[t.game_phase==="showdown"&&I&&a.jsxs(M,{onClick:d,size:"lg",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-6 animate-pulse",children:[a.jsx(A0,{className:"w-5 h-5 mr-2"}),""]}),t.game_phase==="ended"&&a.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-6",children:[a.jsx(co,{className:"w-5 h-5 mr-2"}),""]})]}),!k&&!T&&t.game_phase==="drawing"&&(b==null?void 0:b.has_drawn)&&a.jsx("div",{className:"text-center text-white/50",children:a.jsx("p",{children:"  ..."})}),!k&&!T&&t.game_phase==="drawing"&&!(b!=null&&b.has_drawn)&&!R&&a.jsx("div",{className:"text-center text-white/50",children:a.jsx("p",{children:"..."})})]}):a.jsxs("div",{className:"text-center px-2 w-full max-w-2xl",children:[a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[a.jsx(ex,{}),a.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?s?"  LIVE -  ":'  ""':" Host "})]}),(r||s&&!n)&&p&&e.length>=1&&a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white text-sm sm:text-base mb-3 font-medium",children:" "}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:e.map(j=>a.jsxs(M,{onClick:()=>p(j.id),variant:j.is_dealer?"default":"outline",className:`${j.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black":"border-white/30 text-white hover:bg-white/10"}`,children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-6 h-6 rounded-full object-cover mr-2"}),a.jsx("span",{className:"truncate",children:j.name}),j.is_dealer&&a.jsx("span",{className:"ml-1",children:""})]},j.id))})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[a.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),a.jsx("button",{onClick:_,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})}),a.jsxs("div",{className:"relative z-10 mt-auto",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>g(!x),className:"w-full text-white/50 hover:text-white/80",children:x?" ":" "}),x&&a.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-xl p-3 mt-2 border border-white/10",children:a.jsxs("ul",{className:"text-white/60 text-xs space-y-1",children:[a.jsx("li",{children:"  8/9 =  ( 2 )"}),a.jsx("li",{children:"  =  5 "}),a.jsx("li",{children:" // =  3 "}),a.jsx("li",{children:"  (/) =  2 "}),a.jsx("li",{children:"  = "})]})})]})]})}const Bs=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:F("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Bs.displayName="Card";const YX=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:F("flex flex-col space-y-1.5 p-6",t),...e}));YX.displayName="CardHeader";const QX=m.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:F("text-2xl font-semibold leading-none tracking-tight",t),...e}));QX.displayName="CardTitle";const XX=m.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:F("text-sm text-muted-foreground",t),...e}));XX.displayName="CardDescription";const zs=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:F("p-6 pt-0",t),...e}));zs.displayName="CardContent";const JX=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:F("flex items-center p-6 pt-0",t),...e}));JX.displayName="CardFooter";var Og="rovingFocusGroup.onEntryFocus",ZX={bubbles:!1,cancelable:!0},Bu="RovingFocusGroup",[tx,qA,eJ]=tm(Bu),[tJ,qm]=fn(Bu,[eJ]),[nJ,rJ]=tJ(Bu),KA=m.forwardRef((t,e)=>a.jsx(tx.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(tx.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(sJ,{...t,ref:e})})}));KA.displayName=Bu;var sJ=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=m.useRef(null),p=ve(e,f),w=Tl(i),[x,g]=ur({prop:o,defaultProp:l??null,onChange:c,caller:Bu}),[y,v]=m.useState(!1),_=ft(u),C=qA(n),b=m.useRef(!1),[N,S]=m.useState(0);return m.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(Og,_),()=>E.removeEventListener(Og,_)},[_]),a.jsx(nJ,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:x,onItemFocus:m.useCallback(E=>g(E),[g]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>S(E=>E-1),[]),children:a.jsx(se.div,{tabIndex:y||N===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ne(t.onMouseDown,()=>{b.current=!0}),onFocus:ne(t.onFocus,E=>{const k=!b.current;if(E.target===E.currentTarget&&k&&!y){const T=new CustomEvent(Og,ZX);if(E.currentTarget.dispatchEvent(T),!T.defaultPrevented){const R=C().filter($=>$.focusable),I=R.find($=>$.active),L=R.find($=>$.id===x),V=[I,L,...R].filter(Boolean).map($=>$.ref.current);XA(V,d)}}b.current=!1}),onBlur:ne(t.onBlur,()=>v(!1))})})}),YA="RovingFocusGroupItem",QA=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=Pr(),u=i||c,d=rJ(YA,n),h=d.currentTabStopId===u,f=qA(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:x}=d;return m.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),a.jsx(tx.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(se.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ne(t.onMouseDown,g=>{r?d.onItemFocus(u):g.preventDefault()}),onFocus:ne(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ne(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=aJ(g,d.orientation,d.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=f().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const C=_.indexOf(g.currentTarget);_=d.loop?lJ(_,C+1):_.slice(C+1)}setTimeout(()=>XA(_))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});QA.displayName=YA;var iJ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oJ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function aJ(t,e,n){const r=oJ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iJ[r]}function XA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function lJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var JA=KA,ZA=QA,Km="Tabs",[cJ,iee]=fn(Km,[qm]),eM=qm(),[uJ,hb]=cJ(Km),tM=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Tl(l),[h,f]=ur({prop:r,onChange:s,defaultProp:i??"",caller:Km});return a.jsx(uJ,{scope:n,baseId:Pr(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(se.div,{dir:d,"data-orientation":o,...u,ref:e})})});tM.displayName=Km;var nM="TabsList",rM=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=hb(nM,n),o=eM(n);return a.jsx(JA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(se.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});rM.displayName=nM;var sM="TabsTrigger",iM=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=hb(sM,n),l=eM(n),c=lM(o.baseId,r),u=cM(o.baseId,r),d=r===o.value;return a.jsx(ZA,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ne(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ne(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ne(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});iM.displayName=sM;var oM="TabsContent",aM=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=hb(oM,n),c=lM(l.baseId,r),u=cM(l.baseId,r),d=r===l.value,h=m.useRef(d);return m.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(kn,{present:s||d,children:({present:f})=>a.jsx(se.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});aM.displayName=oM;function lM(t,e){return`${t}-trigger-${e}`}function cM(t,e){return`${t}-content-${e}`}var dJ=tM,uM=rM,dM=iM,hM=aM;const hJ=dJ,fM=m.forwardRef(({className:t,...e},n)=>a.jsx(uM,{ref:n,className:F("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));fM.displayName=uM.displayName;const nx=m.forwardRef(({className:t,...e},n)=>a.jsx(dM,{ref:n,className:F("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));nx.displayName=dM.displayName;const rx=m.forwardRef(({className:t,...e},n)=>a.jsx(hM,{ref:n,className:F("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));rx.displayName=hM.displayName;var Ym="Collapsible",[fJ,mM]=fn(Ym),[mJ,fb]=fJ(Ym),pM=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=t,[c,u]=ur({prop:r,defaultProp:s??!1,onChange:o,caller:Ym});return a.jsx(mJ,{scope:n,disabled:i,contentId:Pr(),open:c,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),children:a.jsx(se.div,{"data-state":pb(c),"data-disabled":i?"":void 0,...l,ref:e})})});pM.displayName=Ym;var gM="CollapsibleTrigger",vM=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=fb(gM,n);return a.jsx(se.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":pb(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ne(t.onClick,s.onOpenToggle)})});vM.displayName=gM;var mb="CollapsibleContent",xM=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=fb(mb,t.__scopeCollapsible);return a.jsx(kn,{present:n||s.open,children:({present:i})=>a.jsx(pJ,{...r,ref:e,present:i})})});xM.displayName=mb;var pJ=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=fb(mb,n),[l,c]=m.useState(r),u=m.useRef(null),d=ve(e,u),h=m.useRef(0),f=h.current,p=m.useRef(0),w=p.current,x=o.open||l,g=m.useRef(x),y=m.useRef(void 0);return m.useEffect(()=>{const v=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(v)},[]),vt(()=>{const v=u.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const _=v.getBoundingClientRect();h.current=_.height,p.current=_.width,g.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),c(r)}},[o.open,r]),a.jsx(se.div,{"data-state":pb(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:x&&s})});function pb(t){return t?"open":"closed"}var gJ=pM,vJ=vM,xJ=xM,vr="Accordion",yJ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[gb,wJ,bJ]=tm(vr),[Qm,oee]=fn(vr,[bJ,mM]),vb=mM(),yM=G.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return a.jsx(gb.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(SJ,{...i,ref:e}):a.jsx(CJ,{...s,ref:e})})});yM.displayName=vr;var[wM,_J]=Qm(vr),[bM,NJ]=Qm(vr,{collapsible:!1}),CJ=G.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[l,c]=ur({prop:n,defaultProp:r??"",onChange:s,caller:vr});return a.jsx(wM,{scope:t.__scopeAccordion,value:G.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:G.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(bM,{scope:t.__scopeAccordion,collapsible:i,children:a.jsx(_M,{...o,ref:e})})})}),SJ=G.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o,l]=ur({prop:n,defaultProp:r??[],onChange:s,caller:vr}),c=G.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=G.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return a.jsx(wM,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(bM,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(_M,{...i,ref:e})})})}),[EJ,Xm]=Qm(vr),_M=G.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,l=G.useRef(null),c=ve(l,e),u=wJ(n),h=Tl(s)==="ltr",f=ne(t.onKeyDown,p=>{var E;if(!yJ.includes(p.key))return;const w=p.target,x=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),g=x.findIndex(k=>k.ref.current===w),y=x.length;if(g===-1)return;p.preventDefault();let v=g;const _=0,C=y-1,b=()=>{v=g+1,v>C&&(v=_)},N=()=>{v=g-1,v<_&&(v=C)};switch(p.key){case"Home":v=_;break;case"End":v=C;break;case"ArrowRight":i==="horizontal"&&(h?b():N());break;case"ArrowDown":i==="vertical"&&b();break;case"ArrowLeft":i==="horizontal"&&(h?N():b());break;case"ArrowUp":i==="vertical"&&N();break}const S=v%y;(E=x[S].ref.current)==null||E.focus()});return a.jsx(EJ,{scope:n,disabled:r,direction:s,orientation:i,children:a.jsx(gb.Slot,{scope:n,children:a.jsx(se.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:f})})})}),Df="AccordionItem",[kJ,xb]=Qm(Df),NM=G.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=Xm(Df,n),o=_J(Df,n),l=vb(n),c=Pr(),u=r&&o.value.includes(r)||!1,d=i.disabled||t.disabled;return a.jsx(kJ,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(gJ,{"data-orientation":i.orientation,"data-state":jM(u),...l,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});NM.displayName=Df;var CM="AccordionHeader",SM=G.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Xm(vr,n),i=xb(CM,n);return a.jsx(se.h3,{"data-orientation":s.orientation,"data-state":jM(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});SM.displayName=CM;var sx="AccordionTrigger",EM=G.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Xm(vr,n),i=xb(sx,n),o=NJ(sx,n),l=vb(n);return a.jsx(gb.ItemSlot,{scope:n,children:a.jsx(vJ,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...r,ref:e})})});EM.displayName=sx;var kM="AccordionContent",TM=G.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Xm(vr,n),i=xb(kM,n),o=vb(n);return a.jsx(xJ,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});TM.displayName=kM;function jM(t){return t?"open":"closed"}var TJ=yM,jJ=NM,RJ=SM,RM=EM,IM=TM;const IJ=TJ,PM=m.forwardRef(({className:t,...e},n)=>a.jsx(jJ,{ref:n,className:F("border-b",t),...e}));PM.displayName="AccordionItem";const AM=m.forwardRef(({className:t,children:e,...n},r)=>a.jsx(RJ,{className:"flex",children:a.jsxs(RM,{ref:r,className:F("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(cy,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AM.displayName=RM.displayName;const MM=m.forwardRef(({className:t,children:e,...n},r)=>a.jsx(IM,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:F("pb-4 pt-0",t),children:e})}));MM.displayName=IM.displayName;function PJ({vocabularies:t,categories:e,onAdd:n,onUpdate:r,onDelete:s}){const[i,o]=m.useState(!1),[l,c]=m.useState(null),[u,d]=m.useState(""),[h,f]=m.useState(!1),{toast:p}=Nt(),[w,x]=m.useState(""),[g,y]=m.useState(""),[v,_]=m.useState(""),C=m.useMemo(()=>{const k=t.filter(R=>{if(!u)return!0;const I=u.toLowerCase();return R.category.toLowerCase().includes(I)||R.word_civilian.toLowerCase().includes(I)||R.word_undercover.toLowerCase().includes(I)}),T={};return k.forEach(R=>{T[R.category]||(T[R.category]=[]),T[R.category].push(R)}),Object.entries(T).sort(([R],[I])=>R.localeCompare(I))},[t,u]),b=()=>{c(null),x(""),y(""),_(""),o(!0)},N=k=>{c(k),x(k.category),y(k.word_civilian),_(k.word_undercover),o(!0)},S=()=>{!w||!g||!v||(l?r({...l,category:w,word_civilian:g,word_undercover:v}):n({category:w,word_civilian:g,word_undercover:v}),o(!1))},E=async()=>{if(!w.trim()){p({title:"",description:" AI ",variant:"destructive"});return}f(!0);try{const k=await OX(w,3);k.forEach(T=>{n(T)}),p({title:" !",description:` ${k.length}  "${w}"`}),o(!1),x(""),y(""),_("")}catch(k){p({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{f(!1)}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Q_,{className:"w-5 h-5 text-purple-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:z("vocabularyManager")}),a.jsxs(du,{variant:"secondary",className:"bg-purple-500/20",children:[t.length," ",z("words")]})]}),a.jsxs(Wr,{open:i,onOpenChange:o,children:[a.jsx(Ri,{asChild:!0,children:a.jsxs(M,{onClick:b,size:"sm",className:"bg-purple-500 hover:bg-purple-600",children:[a.jsx(_u,{className:"w-4 h-4 mr-1"}),z("addWord")]})}),a.jsxs(mr,{className:"bg-gray-900 text-white border-white/20",children:[a.jsxs(pr,{children:[a.jsx(gr,{children:z(l?"editVocabulary":"addVocabulary")}),a.jsx(Hr,{className:"sr-only",children:l?"":""})]}),a.jsxs("div",{className:"space-y-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"category",children:z("category")}),a.jsx(ge,{id:"category",value:w,onChange:k=>x(k.target.value),placeholder:z("categoryPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"civilian",children:z("civilianWord")}),a.jsx(ge,{id:"civilian",value:g,onChange:k=>y(k.target.value),placeholder:z("civilianPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"undercover",children:z("undercoverWord")}),a.jsx(ge,{id:"undercover",value:v,onChange:k=>_(k.target.value),placeholder:z("undercoverPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),!l&&a.jsx(M,{onClick:E,disabled:!w.trim()||h,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",variant:"default",children:h?a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2 animate-spin"})," AI..."]}):a.jsxs(a.Fragment,{children:[a.jsx(is,{className:"w-4 h-4 mr-2"}),"  AI (3 )"]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-gray-900 px-2 text-white/40",children:l?"":""})})]}),a.jsx(M,{onClick:S,disabled:!w||!g||!v,className:"w-full bg-purple-500 hover:bg-purple-600",children:z(l?"save":"add")})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(M0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),a.jsx(ge,{type:"text",placeholder:z("searchVocabulary"),value:u,onChange:k=>d(k.target.value),className:"bg-black/30 border-white/20 text-white pl-10"})]}),a.jsx(IJ,{type:"multiple",className:"space-y-2",children:C.map(([k,T])=>a.jsxs(PM,{value:k,className:"bg-black/40 border-white/10 rounded-lg overflow-hidden",children:[a.jsx(AM,{className:"px-4 hover:bg-white/5 hover:no-underline",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-semibold text-white",children:k}),a.jsx(du,{variant:"secondary",className:"bg-purple-500/20",children:T.length})]})}),a.jsx(MM,{className:"px-4 pb-4",children:a.jsx("div",{className:"space-y-2 mt-2",children:T.map(R=>a.jsx(Bs,{className:"bg-black/40 border-white/10",children:a.jsx(zs,{className:"p-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white/60 text-xs block mb-1",children:z("civilian")}),a.jsx("span",{className:"text-green-400 font-medium",children:R.word_civilian})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-white/60 text-xs block mb-1",children:z("undercover")}),a.jsx("span",{className:"text-red-400 font-medium",children:R.word_undercover})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(M,{size:"sm",variant:"ghost",onClick:()=>N(R),disabled:R.id<1e3,className:"h-8 w-8 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:R.id<1e3?z("cannotEditDefault"):z("edit"),children:a.jsx(Fh,{className:"w-4 h-4"})}),a.jsx(M,{size:"sm",variant:"ghost",onClick:()=>s(R.id),disabled:R.id<1e3,className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:R.id<1e3?z("cannotDeleteDefault"):z("delete"),children:a.jsx(No,{className:"w-4 h-4"})})]})]})})},R.id))})})]},k))}),C.length===0&&a.jsxs("div",{className:"text-center py-12 text-white/40",children:[a.jsx(Q_,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:z(u?"noVocabularyFound":"noVocabularyYet")})]})]})}function AJ({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=zr(),[i,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(Id()),[p,w]=m.useState(!1),{toast:x}=Nt();m.useEffect(()=>{s&&(i||o(s),l||c(s))},[s]);const g=b=>{LY(b),f(Id())},y=b=>{FY(b),f(Id())},v=b=>{$Y(b),f(Id())},_=()=>{const b=Mf(i);if(!b.isValid){x({title:z("error"),description:b.error||z("invalidName"),variant:"destructive"});return}t(i.trim())},C=()=>{const b=Mf(l);if(!b.isValid){x({title:z("error"),description:b.error||z("invalidName"),variant:"destructive"});return}u.trim()&&e(u.trim().toUpperCase(),l.trim())};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),a.jsxs(M,{variant:"ghost",onClick:n,className:"absolute top-4 left-4 text-white/70 hover:text-white z-20",children:[a.jsx(hl,{className:"w-5 h-5 mr-2"}),z("back")]}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:z("undercoverTitle")}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:z("undercoverSubtitle")})]}),a.jsxs(Wr,{open:p,onOpenChange:w,children:[a.jsx(Ri,{asChild:!0,children:a.jsxs(M,{variant:"outline",className:"absolute top-4 right-4 text-white/70 hover:text-white z-20 border-white/20",children:[a.jsx(Nu,{className:"w-5 h-5 mr-2"}),z("manageWords")]})}),a.jsxs(mr,{className:"bg-gray-900 text-white border-white/20 max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(pr,{children:[a.jsx(gr,{children:z("vocabularyManager")}),a.jsx(Hr,{className:"sr-only",children:" Undercover"})]}),a.jsx(PJ,{vocabularies:h,categories:$P(),onAdd:g,onUpdate:y,onDelete:v})]})]}),a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10 w-full max-w-md relative z-10",children:a.jsx(zs,{className:"p-4 sm:p-6",children:a.jsxs(hJ,{defaultValue:"create",className:"w-full",children:[a.jsxs(fM,{className:"grid w-full grid-cols-2 bg-black/40",children:[a.jsxs(nx,{value:"create",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[a.jsx(dn,{className:"w-4 h-4 mr-2"}),z("createRoom")]}),a.jsxs(nx,{value:"join",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[a.jsx(Vh,{className:"w-4 h-4 mr-2"}),z("joinRoom")]})]}),a.jsxs(rx,{value:"create",className:"mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:z("yourName")}),a.jsx(ge,{type:"text",placeholder:z("enterName"),value:i,onChange:b=>o(b.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),a.jsx(M,{onClick:_,disabled:!i.trim()||r,className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:z(r?"creating":"createNewRoom")})]}),a.jsxs(rx,{value:"join",className:"mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:z("roomCode")}),a.jsx(ge,{type:"text",placeholder:z("enterCode"),value:u,onChange:b=>d(b.target.value.toUpperCase()),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40 font-mono text-center text-xl tracking-widest",maxLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:z("yourName")}),a.jsx(ge,{type:"text",placeholder:z("enterName"),value:l,onChange:b=>c(b.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),a.jsx(M,{onClick:C,disabled:!l.trim()||u.length!==6||r,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:z(r?"joining":"joinRoomBtn")})]})]})})})]})}function yb(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var MJ=[" ","Enter","ArrowUp","ArrowDown"],DJ=[" ","Enter"],Po="Select",[Jm,Zm,OJ]=tm(Po),[jl,aee]=fn(Po,[OJ,cm]),ep=cm(),[LJ,Pi]=jl(Po),[FJ,$J]=jl(Po),DM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:w}=t,x=ep(e),[g,y]=m.useState(null),[v,_]=m.useState(null),[C,b]=m.useState(!1),N=Tl(u),[S,E]=ur({prop:r,defaultProp:s??!1,onChange:i,caller:Po}),[k,T]=ur({prop:o,defaultProp:l,onChange:c,caller:Po}),R=m.useRef(null),I=g?w||!!g.closest("form"):!0,[L,P]=m.useState(new Set),V=Array.from(L).map($=>$.props.value).join(";");return a.jsx(vF,{...x,children:a.jsxs(LJ,{required:p,scope:e,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:C,onValueNodeHasChildrenChange:b,contentId:Pr(),value:k,onValueChange:T,open:S,onOpenChange:E,dir:N,triggerPointerDownPosRef:R,disabled:f,children:[a.jsx(Jm.Provider,{scope:e,children:a.jsx(FJ,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback($=>{P(H=>new Set(H).add($))},[]),onNativeOptionRemove:m.useCallback($=>{P(H=>{const A=new Set(H);return A.delete($),A})},[]),children:n})}),I?a.jsxs(i5,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:$=>T($.target.value),disabled:f,form:w,children:[k===void 0?a.jsx("option",{value:""}):null,Array.from(L)]},V):null]})})};DM.displayName=Po;var OM="SelectTrigger",LM=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=ep(n),o=Pi(OM,n),l=o.disabled||r,c=ve(e,o.onTriggerChange),u=Zm(n),d=m.useRef("touch"),[h,f,p]=a5(x=>{const g=u().filter(_=>!_.disabled),y=g.find(_=>_.value===o.value),v=l5(g,x,y);v!==void 0&&o.onValueChange(v.value)}),w=x=>{l||(o.onOpenChange(!0),p()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(sj,{asChild:!0,...i,children:a.jsx(se.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":o5(o.value)?"":void 0,...s,ref:c,onClick:ne(s.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&w(x)}),onPointerDown:ne(s.onPointerDown,x=>{d.current=x.pointerType;const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(w(x),x.preventDefault())}),onKeyDown:ne(s.onKeyDown,x=>{const g=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(g&&x.key===" ")&&MJ.includes(x.key)&&(w(),x.preventDefault())})})})});LM.displayName=OM;var FM="SelectValue",$M=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Pi(FM,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=ve(e,c.onValueNodeChange);return vt(()=>{u(d)},[u,d]),a.jsx(se.span,{...l,ref:h,style:{pointerEvents:"none"},children:o5(c.value)?a.jsx(a.Fragment,{children:o}):i})});$M.displayName=FM;var VJ="SelectIcon",VM=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(se.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});VM.displayName=VJ;var UJ="SelectPortal",UM=t=>a.jsx(nm,{asChild:!0,...t});UM.displayName=UJ;var Ao="SelectContent",BM=m.forwardRef((t,e)=>{const n=Pi(Ao,t.__scopeSelect),[r,s]=m.useState();if(vt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Oo.createPortal(a.jsx(zM,{scope:t.__scopeSelect,children:a.jsx(Jm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(WM,{...t,ref:e})});BM.displayName=Ao;var qn=10,[zM,Ai]=jl(Ao),BJ="SelectContentImpl",zJ=Ga("SelectContent.RemoveScroll"),WM=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:w,hideWhenDetached:x,avoidCollisions:g,...y}=t,v=Pi(Ao,n),[_,C]=m.useState(null),[b,N]=m.useState(null),S=ve(e,Z=>C(Z)),[E,k]=m.useState(null),[T,R]=m.useState(null),I=Zm(n),[L,P]=m.useState(!1),V=m.useRef(!1);m.useEffect(()=>{if(_)return QP(_)},[_]),UP();const $=m.useCallback(Z=>{const[Ne,...je]=I().map(me=>me.ref.current),[_e]=je.slice(-1),K=document.activeElement;for(const me of Z)if(me===K||(me==null||me.scrollIntoView({block:"nearest"}),me===Ne&&b&&(b.scrollTop=0),me===_e&&b&&(b.scrollTop=b.scrollHeight),me==null||me.focus(),document.activeElement!==K))return},[I,b]),H=m.useCallback(()=>$([E,_]),[$,E,_]);m.useEffect(()=>{L&&H()},[L,H]);const{onOpenChange:A,triggerPointerDownPosRef:D}=v;m.useEffect(()=>{if(_){let Z={x:0,y:0};const Ne=_e=>{var K,me;Z={x:Math.abs(Math.round(_e.pageX)-(((K=D.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((me=D.current)==null?void 0:me.y)??0))}},je=_e=>{Z.x<=10&&Z.y<=10?_e.preventDefault():_.contains(_e.target)||A(!1),document.removeEventListener("pointermove",Ne),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",je,{capture:!0})}}},[_,A,D]),m.useEffect(()=>{const Z=()=>A(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[A]);const[j,q]=a5(Z=>{const Ne=I().filter(K=>!K.disabled),je=Ne.find(K=>K.ref.current===document.activeElement),_e=l5(Ne,Z,je);_e&&setTimeout(()=>_e.ref.current.focus())}),Q=m.useCallback((Z,Ne,je)=>{const _e=!V.current&&!je;(v.value!==void 0&&v.value===Ne||_e)&&(k(Z),_e&&(V.current=!0))},[v.value]),ie=m.useCallback(()=>_==null?void 0:_.focus(),[_]),le=m.useCallback((Z,Ne,je)=>{const _e=!V.current&&!je;(v.value!==void 0&&v.value===Ne||_e)&&R(Z)},[v.value]),Re=r==="popper"?ix:HM,Oe=Re===ix?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:w,hideWhenDetached:x,avoidCollisions:g}:{};return a.jsx(zM,{scope:n,content:_,viewport:b,onViewportChange:N,itemRefCallback:Q,selectedItem:E,onItemLeave:ie,itemTextRefCallback:le,focusSelectedItem:H,selectedItemText:T,position:r,isPositioned:L,searchRef:j,children:a.jsx(rb,{as:zJ,allowPinchZoom:!0,children:a.jsx(nb,{asChild:!0,trapped:v.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:ne(s,Z=>{var Ne;(Ne=v.trigger)==null||Ne.focus({preventScroll:!0}),Z.preventDefault()}),children:a.jsx(yu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(Re,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Z=>Z.preventDefault(),...y,...Oe,onPlaced:()=>P(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ne(y.onKeyDown,Z=>{const Ne=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!Ne&&Z.key.length===1&&q(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let _e=I().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const K=Z.target,me=_e.indexOf(K);_e=_e.slice(me+1)}setTimeout(()=>$(_e)),Z.preventDefault()}})})})})})})});WM.displayName=BJ;var WJ="SelectItemAlignedPosition",HM=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Pi(Ao,n),o=Ai(Ao,n),[l,c]=m.useState(null),[u,d]=m.useState(null),h=ve(e,S=>d(S)),f=Zm(n),p=m.useRef(!1),w=m.useRef(!0),{viewport:x,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=o,_=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&x&&g&&y){const S=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(i.dir!=="rtl"){const K=T.left-E.left,me=k.left-K,Ue=S.left-me,xt=S.width+Ue,qr=Math.max(xt,E.width),xr=window.innerWidth-qn,Kr=Kv(me,[qn,Math.max(qn,xr-qr)]);l.style.minWidth=xt+"px",l.style.left=Kr+"px"}else{const K=E.right-T.right,me=window.innerWidth-k.right-K,Ue=window.innerWidth-S.right-me,xt=S.width+Ue,qr=Math.max(xt,E.width),xr=window.innerWidth-qn,Kr=Kv(me,[qn,Math.max(qn,xr-qr)]);l.style.minWidth=xt+"px",l.style.right=Kr+"px"}const R=f(),I=window.innerHeight-qn*2,L=x.scrollHeight,P=window.getComputedStyle(u),V=parseInt(P.borderTopWidth,10),$=parseInt(P.paddingTop,10),H=parseInt(P.borderBottomWidth,10),A=parseInt(P.paddingBottom,10),D=V+$+L+A+H,j=Math.min(g.offsetHeight*5,D),q=window.getComputedStyle(x),Q=parseInt(q.paddingTop,10),ie=parseInt(q.paddingBottom,10),le=S.top+S.height/2-qn,Re=I-le,Oe=g.offsetHeight/2,Z=g.offsetTop+Oe,Ne=V+$+Z,je=D-Ne;if(Ne<=le){const K=R.length>0&&g===R[R.length-1].ref.current;l.style.bottom="0px";const me=u.clientHeight-x.offsetTop-x.offsetHeight,Ue=Math.max(Re,Oe+(K?ie:0)+me+H),xt=Ne+Ue;l.style.height=xt+"px"}else{const K=R.length>0&&g===R[0].ref.current;l.style.top="0px";const Ue=Math.max(le,V+x.offsetTop+(K?Q:0)+Oe)+je;l.style.height=Ue+"px",x.scrollTop=Ne-le+x.offsetTop}l.style.margin=`${qn}px 0`,l.style.minHeight=j+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,u,x,g,y,i.dir,r]);vt(()=>_(),[_]);const[C,b]=m.useState();vt(()=>{u&&b(window.getComputedStyle(u).zIndex)},[u]);const N=m.useCallback(S=>{S&&w.current===!0&&(_(),v==null||v(),w.current=!1)},[_,v]);return a.jsx(GJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:a.jsx(se.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});HM.displayName=WJ;var HJ="SelectPopperPosition",ix=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qn,...i}=t,o=ep(n);return a.jsx(ij,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ix.displayName=HJ;var[GJ,wb]=jl(Ao,{}),ox="SelectViewport",GM=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ai(ox,n),o=wb(ox,n),l=ve(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Jm.Slot,{scope:n,children:a.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ne(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const w=window.innerHeight-qn*2,x=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),y=Math.max(x,g);if(y<w){const v=y+p,_=Math.min(w,v),C=v-_;h.style.height=_+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});GM.displayName=ox;var qM="SelectGroup",[qJ,KJ]=jl(qM),YJ=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Pr();return a.jsx(qJ,{scope:n,id:s,children:a.jsx(se.div,{role:"group","aria-labelledby":s,...r,ref:e})})});YJ.displayName=qM;var KM="SelectLabel",YM=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=KJ(KM,n);return a.jsx(se.div,{id:s.id,...r,ref:e})});YM.displayName=KM;var Of="SelectItem",[QJ,QM]=jl(Of),XM=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Pi(Of,n),c=Ai(Of,n),u=l.value===r,[d,h]=m.useState(i??""),[f,p]=m.useState(!1),w=ve(e,v=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,v,r,s)}),x=Pr(),g=m.useRef("touch"),y=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(QJ,{scope:n,value:r,disabled:s,textId:x,isSelected:u,onItemTextChange:m.useCallback(v=>{h(_=>_||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Jm.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:a.jsx(se.div,{role:"option","aria-labelledby":x,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:ne(o.onFocus,()=>p(!0)),onBlur:ne(o.onBlur,()=>p(!1)),onClick:ne(o.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:ne(o.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:ne(o.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:ne(o.onPointerMove,v=>{var _;g.current=v.pointerType,s?(_=c.onItemLeave)==null||_.call(c):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ne(o.onPointerLeave,v=>{var _;v.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ne(o.onKeyDown,v=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(DJ.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});XM.displayName=Of;var sc="SelectItemText",JM=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Pi(sc,n),l=Ai(sc,n),c=QM(sc,n),u=$J(sc,n),[d,h]=m.useState(null),f=ve(e,y=>h(y),c.onItemTextChange,y=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,w=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:g}=u;return vt(()=>(x(w),()=>g(w)),[x,g,w]),a.jsxs(a.Fragment,{children:[a.jsx(se.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Oo.createPortal(i.children,o.valueNode):null]})});JM.displayName=sc;var ZM="SelectItemIndicator",e5=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return QM(ZM,n).isSelected?a.jsx(se.span,{"aria-hidden":!0,...r,ref:e}):null});e5.displayName=ZM;var ax="SelectScrollUpButton",t5=m.forwardRef((t,e)=>{const n=Ai(ax,t.__scopeSelect),r=wb(ax,t.__scopeSelect),[s,i]=m.useState(!1),o=ve(e,r.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(r5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});t5.displayName=ax;var lx="SelectScrollDownButton",n5=m.forwardRef((t,e)=>{const n=Ai(lx,t.__scopeSelect),r=wb(lx,t.__scopeSelect),[s,i]=m.useState(!1),o=ve(e,r.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(r5,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});n5.displayName=lx;var r5=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ai("SelectScrollButton",n),o=m.useRef(null),l=Zm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),vt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(se.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ne(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ne(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ne(s.onPointerLeave,()=>{c()})})}),XJ="SelectSeparator",s5=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(se.div,{"aria-hidden":!0,...r,ref:e})});s5.displayName=XJ;var cx="SelectArrow",JJ=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ep(n),i=Pi(cx,n),o=Ai(cx,n);return i.open&&o.position==="popper"?a.jsx(oj,{...s,...r,ref:e}):null});JJ.displayName=cx;var ZJ="SelectBubbleInput",i5=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=ve(r,s),o=yb(e);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(se.select,{...n,style:{...nT,...n.style},ref:i,defaultValue:e})});i5.displayName=ZJ;function o5(t){return t===""||t===void 0}function a5(t){const e=ft(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function l5(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=eZ(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function eZ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var tZ=DM,c5=LM,nZ=$M,rZ=VM,sZ=UM,u5=BM,iZ=GM,d5=YM,h5=XM,oZ=JM,aZ=e5,f5=t5,m5=n5,p5=s5;const lZ=tZ,cZ=nZ,g5=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(c5,{ref:r,className:F("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(rZ,{asChild:!0,children:a.jsx(cy,{className:"h-4 w-4 opacity-50"})})]}));g5.displayName=c5.displayName;const v5=m.forwardRef(({className:t,...e},n)=>a.jsx(f5,{ref:n,className:F("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(kL,{className:"h-4 w-4"})}));v5.displayName=f5.displayName;const x5=m.forwardRef(({className:t,...e},n)=>a.jsx(m5,{ref:n,className:F("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(cy,{className:"h-4 w-4"})}));x5.displayName=m5.displayName;const y5=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(sZ,{children:a.jsxs(u5,{ref:s,className:F("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(v5,{}),a.jsx(iZ,{className:F("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(x5,{})]})}));y5.displayName=u5.displayName;const uZ=m.forwardRef(({className:t,...e},n)=>a.jsx(d5,{ref:n,className:F("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));uZ.displayName=d5.displayName;const w5=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(h5,{ref:r,className:F("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(aZ,{children:a.jsx(ai,{className:"h-4 w-4"})})}),a.jsx(oZ,{children:e})]}));w5.displayName=h5.displayName;const dZ=m.forwardRef(({className:t,...e},n)=>a.jsx(p5,{ref:n,className:F("-mx-1 my-1 h-px bg-muted",t),...e}));dZ.displayName=p5.displayName;var tp="Switch",[hZ,lee]=fn(tp),[fZ,mZ]=hZ(tp),b5=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,p]=m.useState(null),w=ve(e,_=>p(_)),x=m.useRef(!1),g=f?d||!!f.closest("form"):!0,[y,v]=ur({prop:s,defaultProp:i??!1,onChange:u,caller:tp});return a.jsxs(fZ,{scope:n,checked:y,disabled:l,children:[a.jsx(se.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":S5(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:w,onClick:ne(t.onClick,_=>{v(C=>!C),g&&(x.current=_.isPropagationStopped(),x.current||_.stopPropagation())})}),g&&a.jsx(C5,{control:f,bubbles:!x.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});b5.displayName=tp;var _5="SwitchThumb",N5=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=mZ(_5,n);return a.jsx(se.span,{"data-state":S5(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});N5.displayName=_5;var pZ="SwitchBubbleInput",C5=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),l=ve(o,i),c=yb(n),u=yy(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const w=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(w)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});C5.displayName=pZ;function S5(t){return t?"checked":"unchecked"}var E5=b5,gZ=N5;const k5=m.forwardRef(({className:t,...e},n)=>a.jsx(E5,{className:F("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:a.jsx(gZ,{className:F("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));k5.displayName=E5.displayName;function vZ({room:t,players:e,currentPlayerId:n,isHost:r,categories:s,onStartGame:i,onRestartGame:o,onLeave:l}){const[c,u]=m.useState(""),[d,h]=m.useState(!1),[f,p]=m.useState(!1),w=e.find(v=>v.id===n),x=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[z("room"),": ",t.code]}),a.jsxs("p",{className:"text-white/60",children:[z("waitingPlayers")," (",e.length,"/10 ",z("people"),")"]})]}),a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(zs,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[z("playersInRoom"),":"]}),a.jsx("div",{className:"space-y-2",children:e.map(v=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-white/5",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"flex-1",children:v.name}),v.is_host&&a.jsxs(du,{variant:"secondary",className:"bg-purple-500/20",children:[" ",z("host")]})]},v.id))})]})}),r&&a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(zs,{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"category",className:"text-white/80",children:z("category")}),a.jsxs(lZ,{value:c,onValueChange:u,children:[a.jsx(g5,{id:"category",className:"bg-black/30 border-white/20 text-white",children:a.jsx(cZ,{})}),a.jsx(y5,{children:s.map(v=>a.jsx(w5,{value:v,children:v},v))})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ft,{htmlFor:"mr-white",className:"text-white/80",children:z("includeMrWhite")}),a.jsx(k5,{id:"mr-white",checked:d,onCheckedChange:v=>{console.log("Mr. White toggled:",v),h(v)}})]}),a.jsx(M,{onClick:()=>{console.log("Starting game with:",{selectedCategory:c,includeMrWhite:d}),i(c,d)},disabled:e.length<4,className:"w-full bg-purple-500 hover:bg-purple-600",children:e.length<4?z("needMinPlayers"):z("startGame")})]})})]}),g=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:z("seeYourWord")}),a.jsx("p",{className:"text-white/60",children:z("tapToReveal")})]}),a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsx(zs,{className:"p-8",children:a.jsx("div",{className:"relative h-48 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 cursor-pointer select-none",onMouseDown:()=>p(!0),onMouseUp:()=>p(!1),onMouseLeave:()=>p(!1),onTouchStart:()=>p(!0),onTouchEnd:()=>p(!1),children:f?a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-sm text-white/80 mb-2",children:[z("yourWordIs"),":"]}),a.jsx("p",{className:"text-4xl font-bold",children:w==null?void 0:w.word}),a.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[z("role"),": ",w==null?void 0:w.role]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx(A0,{className:"w-12 h-12 mb-2 mx-auto"}),a.jsx("p",{children:z("holdToSee")})]})})})}),a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(zs,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[z("playersInRoom"),":"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(v=>a.jsxs("div",{className:"p-3 rounded bg-white/5 flex items-center gap-2",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-sm",children:v.name})]},v.id))})]})}),r&&a.jsxs(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:[" ",z("restartGame")]})]}),y=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-center",children:a.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[" ",z("gameOver"),"!"]})}),a.jsx(Bs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(zs,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[z("finalResult"),":"]}),a.jsx("div",{className:"space-y-2",children:e.map(v=>a.jsx("div",{className:`p-3 rounded ${v.is_alive?"bg-green-900/20":"bg-red-900/20"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-semibold",children:[v.name," ",v.is_alive?"":""]}),a.jsxs("div",{className:"text-sm text-white/60",children:[v.role," - ",v.word]})]})]})},v.id))})]})}),r&&a.jsx(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:z("restartGame")})]});return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 sm:p-6 relative",children:[a.jsx(WA,{active:t.game_phase==="FINISHED",duration:5e3}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),a.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center z-20",children:[a.jsxs(M,{variant:"ghost",onClick:l,className:"text-white/70 hover:text-white",children:[a.jsx(hl,{className:"w-5 h-5 mr-2"}),z("leaveRoom")]}),a.jsx(jr,{currentRoomCode:t.code,currentGameType:"undercover",currentGameName:z("undercoverTitle")})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10",children:a.jsxs("div",{className:"w-full max-w-2xl",children:[t.game_phase==="WAITING"&&x(),(t.game_phase==="REVEAL_WORD"||t.game_phase==="DESCRIBE"||t.game_phase==="VOTING"||t.game_phase==="VOTE_RESULT")&&g(),t.game_phase==="FINISHED"&&y()]})})]})}const po=[{id:"default",name:"",nameEn:"Classic",colors:{primary:"#8b5cf6",secondary:"#ec4899",accent:"#f59e0b",background:"rgba(0, 0, 0, 0.6)",cardBg:"rgba(0, 0, 0, 0.4)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.6)"},gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"neon",name:"",nameEn:"Neon",colors:{primary:"#00ff88",secondary:"#00d9ff",accent:"#ff00ff",background:"rgba(10, 10, 30, 0.8)",cardBg:"rgba(20, 20, 40, 0.6)",text:"#00ff88",textSecondary:"rgba(0, 255, 136, 0.6)"},gradient:"linear-gradient(135deg, #00ff88 0%, #00d9ff 50%, #ff00ff 100%)"},{id:"sunset",name:"",nameEn:"Sunset",colors:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#ff8c42",background:"rgba(20, 10, 30, 0.7)",cardBg:"rgba(40, 20, 40, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #ff6b6b 0%, #ff8c42 50%, #ffd93d 100%)"},{id:"ocean",name:"",nameEn:"Ocean",colors:{primary:"#0066ff",secondary:"#00ccff",accent:"#00ffcc",background:"rgba(0, 20, 40, 0.8)",cardBg:"rgba(0, 40, 80, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #0066ff 0%, #00ccff 50%, #00ffcc 100%)"},{id:"forest",name:"",nameEn:"Forest",colors:{primary:"#2d6a4f",secondary:"#52b788",accent:"#95d5b2",background:"rgba(20, 30, 20, 0.8)",cardBg:"rgba(30, 50, 30, 0.6)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #2d6a4f 0%, #52b788 50%, #95d5b2 100%)"},{id:"royal",name:"",nameEn:"Royal",colors:{primary:"#6d28d9",secondary:"#a855f7",accent:"#fbbf24",background:"rgba(20, 10, 40, 0.8)",cardBg:"rgba(40, 20, 60, 0.6)",text:"#fbbf24",textSecondary:"rgba(251, 191, 36, 0.7)"},gradient:"linear-gradient(135deg, #6d28d9 0%, #a855f7 50%, #fbbf24 100%)"},{id:"dark",name:"",nameEn:"Dark",colors:{primary:"#374151",secondary:"#6b7280",accent:"#9ca3af",background:"rgba(0, 0, 0, 0.9)",cardBg:"rgba(20, 20, 20, 0.8)",text:"#f3f4f6",textSecondary:"rgba(243, 244, 246, 0.6)"},gradient:"linear-gradient(135deg, #1f2937 0%, #374151 100%)"},{id:"candy",name:"",nameEn:"Candy",colors:{primary:"#ff69b4",secondary:"#ffd700",accent:"#00bfff",background:"rgba(255, 192, 203, 0.2)",cardBg:"rgba(255, 255, 255, 0.3)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.8)"},gradient:"linear-gradient(135deg, #ff69b4 0%, #ffd700 50%, #00bfff 100%)"}],bb="party-games-theme",T5="party-games-weather-mode";function Lf(){return typeof window>"u"?!1:localStorage.getItem(T5)==="true"}function xZ(t){typeof window>"u"||(localStorage.setItem(T5,t.toString()),t&&Ff())}function yZ(t,e){return e?t===0?"sunset":t>=1&&t<=3?"neon":t>=45&&t<=48?"forest":t>=51&&t<=67?"ocean":t>=71&&t<=77?"candy":t>=80&&t<=82?"ocean":t>=85&&t<=86?"candy":t>=95&&t<=99?"royal":"neon":"dark"}async function Ff(){if(!(typeof window>"u"||!Lf()))try{console.log(" Starting weather detection...");let t,e;const n=window.isSecureContext;n||console.log(" Not a secure context (HTTPS), using IP-based geolocation...");try{if(n&&navigator.geolocation){const d=await new Promise((h,f)=>{navigator.geolocation.getCurrentPosition(h,p=>{console.log(` GPS failed: ${p.message}, falling back to IP location`),f(p)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5})});t=d.coords.latitude,e=d.coords.longitude,console.log(` GPS Location: ${t.toFixed(2)}, ${e.toFixed(2)}`)}else throw new Error("GPS not available")}catch{console.log(" Fetching location from IP address...");try{const h=await fetch("https://ipapi.co/json/");if(!h.ok)throw new Error("IP geolocation failed");const f=await h.json();t=f.latitude,e=f.longitude,console.log(` IP Location: ${t.toFixed(2)}, ${e.toFixed(2)} (${f.city}, ${f.country_name})`)}catch{console.log(" IP geolocation failed, using Bangkok as default"),t=13.7563,e=100.5018,console.log(" Default Location: Bangkok, Thailand")}}const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&current=weather_code,is_day&timezone=auto`);if(!r.ok){const d=await r.text();throw new Error(`Weather API failed: ${r.status} - ${d}`)}const s=await r.json(),i=s.current.weather_code,o=s.current.is_day===1,l=yZ(i,o);Ec(l);const u={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Foggy",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"}[i]||`Weather code ${i}`;return console.log(` Weather: ${u} (code ${i}), Time: ${o?"Day ":"Night "}, Theme: ${l}`),window.dispatchEvent(new CustomEvent("weatherupdated",{detail:{weather:u,description:u,isDay:o,theme:l}})),{success:!0,weather:u,theme:l}}catch(t){console.error(" Failed to get weather:",t),window.dispatchEvent(new CustomEvent("weathererror",{detail:{error:t instanceof Error?t.message:String(t)}}));const e=localStorage.getItem(bb);return Ec(e||"default"),{success:!1,error:t}}}function ll(){if(typeof window>"u")return po[0];const t=localStorage.getItem(bb);return po.find(e=>e.id===t)||po[0]}function Ec(t){if(typeof window>"u")return;const e=po.find(r=>r.id===t);if(!e){console.error(` Theme not found: ${t}`);return}console.log(` Applying theme: ${e.name} (${e.id})`),localStorage.setItem(bb,t);const n=document.documentElement;n.style.setProperty("--color-primary",e.colors.primary),n.style.setProperty("--color-secondary",e.colors.secondary),n.style.setProperty("--color-accent",e.colors.accent),n.style.setProperty("--color-background",e.colors.background),n.style.setProperty("--color-card-bg",e.colors.cardBg),n.style.setProperty("--color-text",e.colors.text),n.style.setProperty("--color-text-secondary",e.colors.textSecondary),n.style.setProperty("--gradient",e.gradient),console.log(` Dispatching themechange event for ${e.name}`),window.dispatchEvent(new CustomEvent("themechange",{detail:e})),console.log(` Theme ${e.name} applied successfully`)}function wZ(){if(!(typeof window>"u"))if(Lf()){Ff();const t=setInterval(()=>{Lf()?(console.log(" Auto-refreshing weather..."),Ff()):clearInterval(t)},10*60*1e3)}else{const t=ll();Ec(t.id)}}function zu(){const[t,e]=m.useState(ll());return m.useEffect(()=>{const n=s=>{console.log(` ThemedBackground: Received theme change to ${s.detail.name}`),e(s.detail)},r=()=>{console.log(" ThemedBackground: Weather updated, refreshing theme");const s=ll();console.log(` ThemedBackground: Applying theme ${s.name}`),e(s)};return window.addEventListener("themechange",n),window.addEventListener("weatherupdated",r),()=>{window.removeEventListener("themechange",n),window.removeEventListener("weatherupdated",r)}},[]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 transition-all duration-1000 ease-out",style:{background:t.gradient}}),t.backgroundImage&&a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 transition-opacity duration-1000",style:{backgroundImage:t.backgroundImage}}),a.jsx("div",{className:"absolute inset-0 bg-black/30 transition-colors duration-1000"}),a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute w-96 h-96 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.primary,top:"10%",left:"10%",animationDelay:"0s",animationDuration:"8s"}}),a.jsx("div",{className:"absolute w-80 h-80 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.secondary,top:"60%",right:"10%",animationDelay:"2s",animationDuration:"10s"}}),a.jsx("div",{className:"absolute w-64 h-64 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.accent,bottom:"20%",left:"50%",animationDelay:"4s",animationDuration:"12s"}})]})]})}function bZ(){const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),[o,l]=m.useState(""),[c,u]=m.useState(""),{toast:d}=Nt();m.useEffect(()=>{n&&h()},[n]);const h=async()=>{let g=localStorage.getItem("anonymousUserId");g||(g=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",g));const{data:y,error:v}=await U.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(console.log("Paranoia questions loaded:",y,"Error:",v),v){console.error("Error loading questions:",v);return}const _=(y||[]).map(b=>({id:b.id,question:b.question,is_default:b.is_default??!1,created_by:b.created_by,created_at:b.created_at})),C=_.filter(b=>b.is_default===!0||!b.created_by||b.created_by===g);console.log(`User ${g}: Showing ${C.length} of ${_.length} questions`),e(C)},f=async()=>{if(!o.trim()){d({title:" ",variant:"destructive"});return}let g=localStorage.getItem("anonymousUserId");g||(g=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",g)),console.log("Adding question:",{question:o.trim(),userId:g});const{data:y,error:v}=await U.from("paranoia_questions").insert({question:o.trim(),is_default:!1,created_by:g}).select();if(console.log("Insert result:",{data:y,error:v}),v){console.error("Error adding question:",v),d({title:" ",description:v.message,variant:"destructive"});return}d({title:" !"}),l(""),h()},p=async()=>{if(!s||!o.trim())return;if(s.is_default){d({title:" ",variant:"destructive"});return}const{error:g}=await U.from("paranoia_questions").update({question:o.trim()}).eq("id",s.id);if(g){console.error("Error updating question:",g),d({title:" ",variant:"destructive"});return}d({title:" !"}),i(null),l(""),h()},w=async g=>{if(g.is_default){d({title:" ",variant:"destructive"});return}const{error:y}=await U.from("paranoia_questions").delete().eq("id",g.id);if(y){console.error("Error deleting question:",y),d({title:" ",variant:"destructive"});return}d({title:" !"}),h()},x=t.filter(g=>g.question.toLowerCase().includes(c.toLowerCase()));return a.jsxs(Wr,{open:n,onOpenChange:r,children:[a.jsx(Ri,{asChild:!0,children:a.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Fh,{className:"w-4 h-4"}),""]})}),a.jsxs(mr,{className:"sm:max-w-[600px] max-h-[90vh] z-[100]",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-2xl",children:" Paranoia"}),a.jsx(Hr,{className:"sr-only",children:"   Paranoia "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ft,{htmlFor:"question",children:s?"":""}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{id:"question",value:o,onChange:g=>l(g.target.value),placeholder:" ?",onKeyDown:g=>{g.key==="Enter"&&(s?p():f())}}),s?a.jsxs(a.Fragment,{children:[a.jsx(M,{onClick:p,children:""}),a.jsx(M,{variant:"outline",onClick:()=>{i(null),l("")},children:""})]}):a.jsx(M,{onClick:f,children:a.jsx(_u,{className:"w-4 h-4"})})]})]}),a.jsx(ge,{placeholder:"...",value:c,onChange:g=>u(g.target.value)}),a.jsx(Ii,{className:"h-[500px] w-full pr-4",children:a.jsx("div",{className:"space-y-2 pb-4",children:x.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:c?"":" "}):x.map(g=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm",children:g.question}),g.is_default&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"()"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{if(g.is_default){d({title:" ",variant:"destructive"});return}i(g),l(g.question)},disabled:g.is_default,children:a.jsx(Fh,{className:"w-4 h-4"})}),a.jsx(M,{size:"icon",variant:"ghost",onClick:()=>w(g),disabled:g.is_default,children:a.jsx(No,{className:"w-4 h-4"})})]})]},g.id))})}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",x.length," "]})]})]})]})}function _Z({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=zr(),[i,o]=m.useState("select"),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(null),[p,w]=m.useState(!1);m.useEffect(()=>{s&&!l&&c(s)},[s]);const x=async()=>{if(!l.trim())return;const v=await t(l.trim());v&&f(v)},g=async()=>{!l.trim()||!u.trim()||await e(u.trim(),l.trim())},y=()=>{h&&(navigator.clipboard.writeText(h),w(!0),setTimeout(()=>w(!1),2e3))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[a.jsx(zu,{}),a.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[a.jsx(hl,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Paranoia"}),a.jsx("p",{className:"text-white/70",children:" / "})]}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(bZ,{})}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[i==="select"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(M,{onClick:()=>o("create"),className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[a.jsx(dn,{className:"w-5 h-5 mr-2"}),""]}),a.jsx(M,{onClick:()=>o("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),i==="create"&&!h&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:l,onChange:v=>c(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsx(M,{onClick:x,disabled:r||!l.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),a.jsx(M,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]}),i==="create"&&h&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-white/80",children:":"}),a.jsx("div",{onClick:y,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:a.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:h})}),a.jsx(M,{onClick:y,variant:"outline",className:"border-white/30 text-white",children:p?a.jsxs(a.Fragment,{children:[a.jsx(ai,{className:"w-4 h-4 mr-2"})," !"]}):a.jsxs(a.Fragment,{children:[a.jsx(bo,{className:"w-4 h-4 mr-2"})," "]})}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),i==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:l,onChange:v=>c(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:u,onChange:v=>d(v.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),a.jsx(M,{onClick:g,disabled:r||!l.trim()||!u.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),a.jsx(M,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function NZ({gameState:t,myId:e,players:n,onSelectVictim:r,onRevealQuestion:s,onSkipQuestion:i,onNextRound:o}){const l=e===t.asker_id,c=e===t.victim_id,u=d=>{var h;return((h=n.find(f=>f.id===d))==null?void 0:h.name)||"Unknown"};return t.phase==="ASKING"&&l?a.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-red-900 to-red-800 p-6 text-white text-center rounded-2xl shadow-2xl border border-red-700",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:"! ()"}),a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-black/40 p-4 rounded-xl mb-6 border border-red-500/50",children:a.jsxs("p",{className:"text-lg italic",children:['"',t.question,'"']})}),a.jsx("p",{className:"text-sm opacity-80 mb-4",children:":"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.filter(d=>d.id!==e).map((d,h)=>a.jsx(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*h},children:a.jsx(M,{onClick:()=>r(d.id),className:"w-full bg-red-700 hover:bg-red-600 text-white py-4",children:d.name})},d.id))})]}):t.phase==="ASKING"?a.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10",children:[a.jsx(W.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"text-6xl mb-6",children:""}),a.jsxs("p",{className:"text-xl text-white",children:[a.jsx("span",{className:"font-bold text-yellow-400",children:u(t.asker_id)})," ","..."]}),a.jsx("p",{className:"text-sm text-white/60 mt-2",children:"..."})]}):t.phase==="REVEALING"?a.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-br from-slate-800 to-slate-900 text-white rounded-2xl border border-slate-700",children:[a.jsxs("h2",{className:"text-lg mb-2",children:[a.jsx("span",{className:"text-red-400 font-bold",children:u(t.asker_id)})," ","..."]}),a.jsxs(W.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5,delay:.3},className:"text-4xl font-bold text-yellow-400 my-4",children:[" ",u(t.victim_id)]}),a.jsx(sl,{mode:"wait",children:t.is_revealed?a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white text-black p-6 rounded-xl",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"..."}),a.jsxs(W.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl font-bold",children:['"',t.question,'"']}),a.jsx(M,{onClick:o,className:"mt-6 bg-blue-600 hover:bg-blue-500",children:" "})]},"revealed"):a.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-6 space-y-4",children:c?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-lg",children:["?"," ",a.jsx("span",{className:"text-2xl",children:""})]}),a.jsx(M,{onClick:s,className:"w-full bg-pink-600 hover:bg-pink-500 py-6 text-xl font-bold",children:" "}),a.jsx(M,{onClick:i,variant:"ghost",className:"w-full text-white/60 hover:text-white",children:" "})]}):a.jsxs("p",{className:"text-white/70",children:[""," ",a.jsx("span",{className:"text-yellow-400",children:u(t.victim_id)})," ","..."]})},"unrevealed")})]}):a.jsx("div",{className:"text-white text-center",children:"Loading..."})}function CZ({room:t,players:e,currentPlayerId:n,isHost:r,totalQuestions:s,onStartGame:i,onStartRound:o,onSelectVictim:l,onRevealQuestion:c,onSkipQuestion:u,onLeave:d}){var w;const h=t.game_state,f=((w=h==null?void 0:h.used_question_ids)==null?void 0:w.length)||0,p=s-f;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[a.jsx(zu,{}),a.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[a.jsxs(M,{variant:"ghost",size:"sm",onClick:d,className:"text-white hover:bg-white/10",children:[a.jsx(hl,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs("div",{className:"text-white text-center",children:[a.jsx("p",{className:"text-sm opacity-70",children:""}),a.jsx("p",{className:"font-mono font-bold",children:t.code}),t.game_started&&s>0&&a.jsxs("div",{className:"mt-1 text-xs opacity-80 flex items-center gap-1 justify-center",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[p>0?p:s," /"," ",s," "]}),p===0&&a.jsx("span",{className:"text-yellow-300",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jr,{currentRoomCode:t.code,currentGameType:"paranoia",currentGameName:"Paranoia"}),a.jsxs("div",{className:"flex items-center gap-1 text-white",children:[a.jsx(dn,{className:"w-4 h-4"}),a.jsx("span",{children:e.length})]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?h?a.jsx("div",{className:"w-full max-w-sm",children:a.jsx(NZ,{gameState:h,myId:n||"",players:e,onSelectVictim:l,onRevealQuestion:c,onSkipQuestion:u,onNextRound:o})}):a.jsxs("div",{className:"text-white text-center",children:[a.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),a.jsx("p",{children:"..."})]}):a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-20",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Paranoia"}),a.jsx("p",{className:"text-white/70",children:"..."})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),a.jsx("div",{className:"space-y-2",children:e.map((x,g)=>a.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},className:"flex items-center gap-2 text-white",children:[a.jsx("span",{className:"text-lg",children:x.is_host?"":""}),a.jsx("span",{children:x.name}),x.id===n&&a.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},x.id))})]}),r&&e.length>=3&&a.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},children:a.jsxs(M,{onClick:i,className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg relative z-30",children:[a.jsx(bu,{className:"w-5 h-5 mr-2"}),""]})}),r&&e.length<3&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" 3 "}),!r&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}var _b="Radio",[SZ,j5]=fn(_b),[EZ,kZ]=SZ(_b),R5=m.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=t,[h,f]=m.useState(null),p=ve(e,g=>f(g)),w=m.useRef(!1),x=h?u||!!h.closest("form"):!0;return a.jsxs(EZ,{scope:n,checked:s,disabled:o,children:[a.jsx(se.button,{type:"button",role:"radio","aria-checked":s,"data-state":M5(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:p,onClick:ne(t.onClick,g=>{s||c==null||c(),x&&(w.current=g.isPropagationStopped(),w.current||g.stopPropagation())})}),x&&a.jsx(A5,{control:h,bubbles:!w.current,name:r,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});R5.displayName=_b;var I5="RadioIndicator",P5=m.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=kZ(I5,n);return a.jsx(kn,{present:r||i.checked,children:a.jsx(se.span,{"data-state":M5(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});P5.displayName=I5;var TZ="RadioBubbleInput",A5=m.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),l=ve(o,i),c=yb(n),u=yy(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const w=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(w)}},[c,n,r]),a.jsx(se.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});A5.displayName=TZ;function M5(t){return t?"checked":"unchecked"}var jZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],np="RadioGroup",[RZ,cee]=fn(np,[qm,j5]),D5=qm(),O5=j5(),[IZ,PZ]=RZ(np),L5=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,p=D5(n),w=Tl(u),[x,g]=ur({prop:i,defaultProp:s??null,onChange:h,caller:np});return a.jsx(IZ,{scope:n,name:r,required:o,disabled:l,value:x,onValueChange:g,children:a.jsx(JA,{asChild:!0,...p,orientation:c,dir:w,loop:d,children:a.jsx(se.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:w,...f,ref:e})})})});L5.displayName=np;var F5="RadioGroupItem",$5=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=PZ(F5,n),o=i.disabled||r,l=D5(n),c=O5(n),u=m.useRef(null),d=ve(e,u),h=i.value===s.value,f=m.useRef(!1);return m.useEffect(()=>{const p=x=>{jZ.includes(x.key)&&(f.current=!0)},w=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",w)}},[]),a.jsx(ZA,{asChild:!0,...l,focusable:!o,active:h,children:a.jsx(R5,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:d,onCheck:()=>i.onValueChange(s.value),onKeyDown:ne(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ne(s.onFocus,()=>{var p;f.current&&((p=u.current)==null||p.click())})})})});$5.displayName=F5;var AZ="RadioGroupIndicator",V5=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=O5(n);return a.jsx(P5,{...s,...r,ref:e})});V5.displayName=AZ;var U5=L5,B5=$5,MZ=V5;const z5=m.forwardRef(({className:t,...e},n)=>a.jsx(U5,{className:F("grid gap-2",t),...e,ref:n}));z5.displayName=U5.displayName;const W5=m.forwardRef(({className:t,...e},n)=>a.jsx(B5,{ref:n,className:F("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(MZ,{className:"flex items-center justify-center",children:a.jsx(TL,{className:"h-2.5 w-2.5 fill-current text-current"})})}));W5.displayName=B5.displayName;function DZ({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=zr(),[i,o]=m.useState("select"),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(null),[p,w]=m.useState(!1),[x,g]=m.useState(5);m.useEffect(()=>{s&&!l&&c(s)},[s]);const y=async()=>{if(!l.trim())return;const C=await t(l.trim(),x);C&&f(C)},v=async()=>{!l.trim()||!u.trim()||await e(u.trim(),l.trim())},_=()=>{h&&(navigator.clipboard.writeText(h),w(!0),setTimeout(()=>w(!1),2e3))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[a.jsx(zu,{}),a.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[a.jsx(hl,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"5 Second Rule"}),a.jsx("p",{className:"text-white/70",children:" 3 ...  5 !"})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[i==="select"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(M,{onClick:()=>o("create"),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[a.jsx(dn,{className:"w-5 h-5 mr-2"}),""]}),a.jsx(M,{onClick:()=>o("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),i==="create"&&!h&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:l,onChange:C=>c(C.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-white/80 text-sm mb-3 block flex items-center gap-2",children:[a.jsx(jL,{className:"w-4 h-4"}),""]}),a.jsx(z5,{value:x.toString(),onValueChange:C=>g(Number(C)),children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5,10,15,20].map(C=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(W5,{value:C.toString(),id:`time-${C}`,className:"border-white/40"}),a.jsxs(Ft,{htmlFor:`time-${C}`,className:"text-white cursor-pointer",children:[C," "]})]},C))})})]}),a.jsx(M,{onClick:y,disabled:r||!l.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),a.jsx(M,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]}),i==="create"&&h&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-white/80",children:":"}),a.jsx("div",{onClick:_,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:a.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:h})}),a.jsx(M,{onClick:_,variant:"outline",className:"border-white/30 text-white",children:p?a.jsxs(a.Fragment,{children:[a.jsx(ai,{className:"w-4 h-4 mr-2"})," !"]}):a.jsxs(a.Fragment,{children:[a.jsx(bo,{className:"w-4 h-4 mr-2"})," "]})}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),i==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:l,onChange:C=>c(C.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(ge,{value:u,onChange:C=>d(C.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),a.jsx(M,{onClick:v,disabled:r||!l.trim()||!u.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),a.jsx(M,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function OZ({gameState:t,myId:e,players:n,onFinishAnswering:r,onVote:s,onNextRound:i}){const o=t.timeLimit||5,[l,c]=m.useState(o),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=n.find(b=>b.id===t.player_id),w=e===t.player_id,x=Object.keys(t.votes||{}).includes(e),g=Object.values(t.votes||{}).length,y=Object.values(t.votes||{}).filter(Boolean).length,v=g-y,_=n.filter(b=>b.id!==t.player_id).length;m.useEffect(()=>{if(t.phase!=="PLAYING")return;const b=setInterval(()=>{const N=Date.now(),E=(new Date(t.end_time).getTime()-N)/1e3;E<=0?(c(0),d(!0),clearInterval(b)):c(E)},100);return()=>clearInterval(b)},[t.end_time,t.phase]),m.useEffect(()=>{t.phase==="PLAYING"&&(d(!1),c(t.timeLimit||5),f(!1))},[t.player_id,t.phase,t.timeLimit]),m.useEffect(()=>{console.log("FiveSecGame state:",{phase:t.phase,player_id:t.player_id,isMe:w,hasVoted:x,voteCount:g,totalVoters:_})},[t.phase,t.player_id,w,x,g,_]);const C=()=>w?l<=1?"from-red-600 to-red-800":l<=2?"from-orange-500 to-red-600":l<=3?"from-yellow-500 to-orange-500":"from-orange-500 to-yellow-600":l<=1?"from-red-600 to-pink-800":l<=2?"from-purple-500 to-red-600":l<=3?"from-indigo-500 to-purple-500":"from-blue-500 to-indigo-700";return t.phase==="PLAYING"?a.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-6 text-center rounded-2xl text-white bg-gradient-to-br ${C()} transition-colors duration-300 shadow-2xl`,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("span",{className:"text-sm opacity-80",children:":"}),a.jsx("h2",{className:"text-2xl font-bold",children:p==null?void 0:p.name})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white text-black p-6 rounded-xl shadow-lg my-6",children:[a.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:" 3 ..."}),a.jsx("h1",{className:"text-xl md:text-2xl font-extrabold",children:t.topic})]}),a.jsx(W.div,{animate:{scale:l<=2?[1,1.05,1]:1},transition:{repeat:l<=2?1/0:0,duration:.5},className:"relative w-32 h-32 mx-auto flex items-center justify-center border-4 border-white rounded-full bg-black/30",children:a.jsx("span",{className:"text-5xl font-mono font-bold",children:l>0?l.toFixed(1):""})}),w&&a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:a.jsx(M,{onClick:r,className:"mt-6 w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 text-xl shadow-lg",children:l>0?" !":" "})}),!w&&a.jsxs("p",{className:"mt-4 text-sm opacity-80",children:[" ",p==null?void 0:p.name," ",l>0?"":"","..."]})]}):t.phase==="JUDGING"?a.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 text-center rounded-2xl bg-gradient-to-br from-purple-800 to-indigo-900 text-white shadow-2xl",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"!"}),a.jsxs("p",{className:"text-lg mb-4",children:[a.jsx("span",{className:"text-yellow-400 font-bold",children:p==null?void 0:p.name})," ",""]}),a.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-6",children:[a.jsx("p",{className:"text-sm opacity-80",children:":"}),a.jsx("p",{className:"text-lg font-bold",children:t.topic})]}),a.jsx(sl,{mode:"wait",children:!w&&!x&&a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsx(M,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-500 py-6 text-xl font-bold",children:" "}),a.jsx(M,{onClick:()=>s(!1),className:"bg-red-600 hover:bg-red-500 py-6 text-xl font-bold",children:" "})]})}),x&&!w&&a.jsx("p",{className:"text-green-400 mb-4",children:" "}),w&&a.jsx("p",{className:"text-yellow-400 mb-4",children:"..."}),a.jsxs("div",{className:"bg-black/30 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm opacity-80 mb-2",children:[": ",g,"/",_]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs("span",{className:"text-green-400 text-lg",children:[" ",y]}),a.jsxs("span",{className:"text-red-400 text-lg",children:[" ",v]})]})]}),g>=_&&a.jsxs(W.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[a.jsx("div",{className:"text-2xl font-bold mb-4",children:y>v?a.jsx("span",{className:"text-green-400",children:" !"}):a.jsx("span",{className:"text-red-400",children:" !"})}),a.jsx(M,{onClick:i,className:"bg-blue-600 hover:bg-blue-500 px-8",children:" "})]})]}):a.jsx("div",{className:"text-white text-center",children:"Loading..."})}function LZ({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onFinishAnswering:o,onVote:l,onLeave:c}){const u=t.game_state;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[a.jsx(zu,{}),a.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[a.jsxs(M,{variant:"ghost",size:"sm",onClick:c,className:"text-white hover:bg-white/10",children:[a.jsx(hl,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs("div",{className:"text-white text-center",children:[a.jsx("p",{className:"text-sm opacity-70",children:""}),a.jsx("p",{className:"font-mono font-bold",children:t.code})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jr,{currentRoomCode:t.code,currentGameType:"5-sec",currentGameName:"5 Second Rule"}),a.jsxs("div",{className:"flex items-center gap-1 text-white",children:[a.jsx(dn,{className:"w-4 h-4"}),a.jsx("span",{children:e.length})]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?u?a.jsx("div",{className:"w-full max-w-sm",children:a.jsx(OZ,{gameState:u,myId:n||"",players:e,onFinishAnswering:o,onVote:l,onNextRound:i})}):a.jsxs("div",{className:"text-white text-center",children:[a.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),a.jsx("p",{children:"..."})]}):a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"5 Second Rule"}),a.jsx("p",{className:"text-white/70",children:"..."}),(u==null?void 0:u.timeLimit)&&a.jsxs("p",{className:"text-yellow-400 text-sm mt-2",children:[" : ",u.timeLimit," "]})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),a.jsx("div",{className:"space-y-2",children:e.map((d,h)=>a.jsxs(W.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:"flex items-center gap-2 text-white",children:[a.jsx("span",{className:"text-lg",children:d.is_host?"":""}),a.jsx("span",{children:d.name}),d.id===n&&a.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},d.id))})]}),r&&e.length>=2&&a.jsxs(M,{onClick:s,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[a.jsx(bu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<2&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" 2 "}),!r&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}function ES(){const[t,e]=m.useState(Af());m.useEffect(()=>{e(Af())},[]);const n=()=>{const r=t==="th"?"en":"th";jX(r),e(r),window.location.reload()};return a.jsxs(M,{variant:"outline",size:"sm",onClick:n,className:"bg-black/40 backdrop-blur-md border-white/20 text-white hover:bg-black/60",children:[a.jsx(IL,{className:"w-4 h-4 mr-2"}),t==="th"?"TH":"EN"]})}function kS(){const[t,e]=m.useState(ll()),[n,r]=m.useState(!1),[s,i]=m.useState(Lf()),[o,l]=m.useState(""),[c,u]=m.useState(!1),d=Af();m.useEffect(()=>{const p=g=>{e(g.detail)},w=g=>{const{weather:y,description:v,isDay:_,theme:C}=g.detail;l(`${y} (${v}) - ${_?"Day":"Night"}  ${C}`),u(!1)},x=g=>{l(`Error: ${g.detail.error}`),u(!1)};return window.addEventListener("themechange",p),window.addEventListener("weatherupdated",w),window.addEventListener("weathererror",x),()=>{window.removeEventListener("themechange",p),window.removeEventListener("weatherupdated",w),window.removeEventListener("weathererror",x)}},[]);const h=p=>{Ec(p),e(po.find(w=>w.id===p)||po[0])},f=async()=>{const p=!s;i(p),xZ(p),p?(u(!0),l("..."),await Ff(),e(ll())):(l(""),u(!1))};return a.jsxs(Wr,{open:n,onOpenChange:r,children:[a.jsx(Ri,{asChild:!0,children:a.jsx(M,{variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-110",title:z("themeChange"),children:a.jsx(AL,{className:"h-5 w-5"})})}),a.jsxs(mr,{className:"sm:max-w-[600px] bg-black/90 backdrop-blur-xl border-white/20",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-2xl font-bold text-white",children:z("themeSelectTheme")}),a.jsx(Hr,{className:"sr-only",children:""})]}),a.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-400/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(RL,{className:"h-6 w-6 text-cyan-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:d==="th"?"":"Weather Mode"}),a.jsx("p",{className:"text-xs text-white/60",children:d==="th"?"":"Auto-change theme based on real weather"}),o&&a.jsxs("p",{className:"text-xs text-cyan-300 mt-1 font-mono",children:[c?" ":o.includes("Error")?" ":" ",o]})]})]}),a.jsx("button",{onClick:f,disabled:c,className:`
                relative w-14 h-7 rounded-full transition-all duration-300
                ${s?"bg-cyan-500":"bg-gray-600"}
                ${c?"opacity-50 cursor-not-allowed":""}
              `,children:a.jsx("div",{className:`
                  absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform duration-300
                  ${s?"translate-x-7":"translate-x-0"}
                `})})]})}),a.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:po.map(p=>a.jsx("button",{onClick:()=>{h(p.id),r(!1)},className:`
                relative p-4 rounded-lg border-2 transition-all duration-300 hover:scale-105
                ${t.id===p.id?"border-white shadow-xl scale-105":"border-white/20 hover:border-white/40"}
              `,style:{background:p.gradient},children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.primary}}),a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.secondary}}),a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.accent}})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"font-bold text-white text-lg",children:d==="th"?p.name:p.nameEn})}),t.id===p.id&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:a.jsx("span",{className:"text-black text-sm",children:""})})})]})},p.id))})]})]})}function FZ({onNavigate:t,currentSection:e="home"}){const{userId:n,displayName:r,logout:s,updateDisplayName:i}=zr(),[o,l]=m.useState(!1),[c,u]=m.useState("home"),[d,h]=m.useState(!1),[f,p]=m.useState(""),[w,x]=m.useState(""),g=[{id:"games",icon:Oh,label:"Games"},{id:"friends",icon:dn,label:"Friends"},{id:"profile",icon:D0,label:"Profile"},{id:"settings",icon:Nu,label:"Settings"}],y=b=>{u(b),t==null||t(b),b==="profile"&&l(!0)},v=()=>{p(r||""),x(""),h(!0)},_=()=>{h(!1),p(""),x("")},C=async()=>{const b=f.trim();if(b.length<2){x(" 2 ");return}if(b.length>20){x(" 20 ");return}await i(b)?(h(!1),p(""),x("")):x("")};return a.jsxs(a.Fragment,{children:[a.jsxs(W.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},className:"hidden md:flex fixed left-0 top-0 h-screen w-20 bg-black/40 backdrop-blur-xl border-r border-white/10 flex-col items-center py-6 z-40",children:[a.jsx(W.div,{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-8 shadow-lg shadow-cyan-500/50 cursor-pointer",whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},onClick:()=>{u("home"),t==null||t("home")},title:"Home",children:a.jsx(_o,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"flex-1 flex flex-col gap-4",children:g.map(b=>{const N=b.icon,S=c===b.id;return a.jsxs(W.button,{onClick:()=>y(b.id),className:`relative w-12 h-12 rounded-xl flex items-center justify-center transition-all ${S?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg shadow-cyan-500/50":"bg-white/5 hover:bg-white/10"}`,whileHover:{scale:1.1},whileTap:{scale:.95},title:b.label,children:[a.jsx(N,{className:`w-5 h-5 ${S?"text-white":"text-white/60"}`}),S&&a.jsx(W.div,{layoutId:"activeIndicator",className:"absolute -right-1 w-1 h-8 bg-cyan-400 rounded-full"})]},b.id)})}),a.jsx("div",{className:"flex flex-col gap-4 mt-auto",children:n?a.jsxs(a.Fragment,{children:[a.jsx(W.button,{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-white shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.95},title:r||"User",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),a.jsx(W.button,{onClick:s,className:"w-12 h-12 rounded-xl bg-white/5 hover:bg-red-500/20 flex items-center justify-center transition-all",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Logout",children:a.jsx(qa,{className:"w-5 h-5 text-red-400"})})]}):a.jsx("div",{className:"w-12",children:a.jsx(jr,{})})})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center p-4 z-50",onClick:()=>l(!1),children:a.jsxs(W.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:b=>b.stopPropagation(),className:"bg-gradient-to-br from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-xl rounded-3xl max-w-md w-full border border-white/20 shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-600 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black/20"}),a.jsx(W.div,{className:"absolute inset-0",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:10,repeat:1/0,repeatType:"reverse"},style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%)",backgroundSize:"200% 200%"}})]}),a.jsxs("div",{className:"px-6 pb-6 -mt-16",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsxs(W.div,{whileHover:{scale:1.05},className:"relative",children:[a.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 flex items-center justify-center font-bold text-white text-4xl shadow-xl ring-4 ring-slate-900/50",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),n&&a.jsx("div",{className:"absolute bottom-1 right-1 w-7 h-7 bg-green-500 rounded-full border-4 border-slate-900"})]})}),a.jsx("div",{className:"text-center mb-6",children:d?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:f,onChange:b=>p(b.target.value),onKeyDown:b=>{b.key==="Enter"&&C(),b.key==="Escape"&&_()},className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-xl text-white text-center text-lg font-semibold focus:outline-none focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/50",placeholder:"",autoFocus:!0,maxLength:20}),a.jsxs("div",{className:"text-xs text-zinc-400 mt-1",children:[f.length,"/20 "]})]}),w&&a.jsx(W.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-red-400",children:w}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:C,className:"flex-1 py-2 px-4 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 rounded-xl text-white font-medium flex items-center justify-center gap-2",children:[a.jsx(ai,{className:"w-4 h-4"}),""]}),a.jsxs(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,className:"flex-1 py-2 px-4 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-white font-medium flex items-center justify-center gap-2",children:[a.jsx(rr,{className:"w-4 h-4"}),""]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:r||"Guest"}),n&&a.jsx(W.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:v,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"",children:a.jsx(ML,{className:"w-4 h-4 text-cyan-400"})})]}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/10 rounded-full",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-400":"bg-zinc-400"}`}),a.jsx("p",{className:"text-sm text-zinc-300",children:n?"":""})]})]})}),n&&a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 rounded-xl p-3 border border-cyan-500/20",children:[a.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:"0"}),a.jsx("div",{className:"text-xs text-zinc-400",children:""})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-xl p-3 border border-purple-500/20",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"0"}),a.jsx("div",{className:"text-xs text-zinc-400",children:""})]}),a.jsxs("div",{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 rounded-xl p-3 border border-orange-500/20",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-400",children:"0"}),a.jsx("div",{className:"text-xs text-zinc-400",children:""})]})]}),a.jsxs("div",{className:"space-y-2",children:[n&&a.jsxs(W.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"w-full py-3 px-4 bg-gradient-to-r from-red-500/20 to-pink-500/20 hover:from-red-500/30 hover:to-pink-500/30 border border-red-500/30 rounded-xl text-white font-medium transition-all flex items-center justify-center gap-2",children:[a.jsx(qa,{className:"w-4 h-4"}),""]}),a.jsx(W.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!1),className:"w-full py-3 px-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-white font-medium transition-all",children:""})]})]})]})}),a.jsx(W.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},className:"md:hidden fixed bottom-0 left-0 right-0 bg-black/60 backdrop-blur-xl border-t border-white/10 z-40 pb-safe",children:a.jsxs("div",{className:"flex justify-around items-center px-4 py-3",children:[a.jsxs(W.button,{onClick:()=>{u("home"),t==null||t("home")},className:`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all ${c==="home"?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:[a.jsx(_o,{className:`w-5 h-5 ${c==="home"?"text-white":"text-zinc-400"}`}),a.jsx("span",{className:`text-xs ${c==="home"?"text-white":"text-zinc-400"}`,children:"Home"})]}),g.filter(b=>b.id!=="profile").map(b=>{const N=b.icon,S=c===b.id;return a.jsxs(W.button,{onClick:()=>y(b.id),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all ${S?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:[a.jsx(N,{className:`w-5 h-5 ${S?"text-white":"text-zinc-400"}`}),a.jsx("span",{className:`text-xs ${S?"text-white":"text-zinc-400"}`,children:b.label})]},b.id)}),a.jsx(W.button,{onClick:()=>{if(n)l(!0),u("profile");else{const b=document.querySelector("[data-login-button]");b&&b.click()}},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-xl transition-all ${c==="profile"&&n?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-[10px] font-bold",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),a.jsx("span",{className:"text-xs text-zinc-400",children:(r==null?void 0:r.substring(0,6))||"Profile"})]}):a.jsxs(a.Fragment,{children:[a.jsx(D0,{className:"w-5 h-5 text-zinc-400"}),a.jsx("span",{className:"text-xs text-zinc-400",children:""})]})})]})})]})}function $Z({title:t,description:e,coverUrl:n,iconUrl:r,emoji:s,gradient:i="from-cyan-500 to-blue-600",onStartPlaying:o}){const[l,c]=m.useState(ll());return m.useEffect(()=>{const u=d=>{c(d.detail)};return window.addEventListener("themechange",u),()=>{window.removeEventListener("themechange",u)}},[]),a.jsxs("div",{className:"relative h-screen w-full overflow-hidden flex items-center justify-center",children:[a.jsx(W.div,{className:"absolute inset-0 bg-cover bg-center",style:n?{backgroundImage:`url(${n})`,filter:"brightness(0.6)"}:void 0,initial:{scale:1.1},animate:{scale:1},transition:{duration:20,repeat:1/0,repeatType:"reverse"}}),!n&&a.jsx("div",{className:"absolute inset-0 opacity-70",style:{background:l.gradient}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/50 to-black"}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center px-4 md:px-8 text-center mb-4 md:mb-0 w-full",children:[a.jsxs(W.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},className:"flex flex-col md:flex-row items-center gap-3 md:gap-4 mb-4 md:mb-8",children:[a.jsx("div",{className:"w-20 h-20 md:w-16 md:h-16 rounded-2xl flex items-center justify-center text-3xl md:text-4xl shadow-lg shadow-black/30",style:{background:l.gradient},children:r?a.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover rounded-2xl"}):s||a.jsx(_o,{className:"w-10 h-10 md:w-10 md:h-10 text-white"})}),a.jsx("h1",{className:"text-4xl md:text-7xl font-bold drop-shadow-[0_0_30px_rgba(255,255,255,0.5)] text-center",style:{color:l.colors.text},children:t})]}),a.jsxs(W.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4},className:"text-center mb-6 md:mb-12 w-full flex flex-col items-center",children:[a.jsx("h2",{className:"text-2xl md:text-4xl font-bold mb-2 md:mb-4 text-center w-full",style:{background:l.gradient,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"ULTIMATE PARTY EXPERIENCE"}),a.jsx("p",{className:"text-base md:text-xl max-w-2xl text-center mx-auto",style:{color:l.colors.textSecondary},children:e})]}),a.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"flex gap-8 flex-wrap justify-center",children:[].map((u,d)=>a.jsxs(W.div,{className:"flex items-center gap-3 px-6 py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.15)"},children:[a.jsx("span",{className:"text-2xl",children:u.icon}),a.jsx("span",{className:"text-white font-medium",children:u.text})]},d))}),a.jsxs(W.button,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.8},className:"mt-12 px-12 py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center gap-3",style:{background:l.gradient,color:l.colors.text,boxShadow:`0 10px 40px ${l.colors.primary}50`},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var u;o?o():(u=document.getElementById("games-section"))==null||u.scrollIntoView({behavior:"smooth"})},children:[a.jsx(is,{className:"w-6 h-6"}),"Start Playing"]})]})]})}const VZ=()=>{var Rb,Ib,Pb;const{user:t,displayName:e}=zr(),[n,r]=m.useState("select"),[s,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(!0),[d,h]=m.useState("home"),[f,p]=m.useState("friends"),[w,x]=m.useState(!1),[g,y]=m.useState(!1),{sessionData:v,hasSession:_,saveSession:C,clearSession:b}=WY(),[N,S]=m.useState(!1),[E,k]=m.useState({}),[T,R]=m.useState({}),[I,L]=m.useState({}),[P,V]=m.useState(!1),$=!!t&&e==="bonne",H=$,{room:A,players:D,currentPlayerId:j,isLoading:q,createRoom:Q,joinRoom:ie,startGame:le,drawCard:Re,reshuffleDeck:Oe,leaveRoom:Z,quickStart:Ne}=EY(),{room:je,players:_e,currentPlayerId:K,isLoading:me,createRoom:Ue,joinRoom:xt,startGame:qr,drawCard:xr,standCard:Kr,dealerDraw:Mi,dealerStand:Ss,showdown:Wu,nextRound:Di,leaveRoom:Rl,quickStart:Yr,setDealer:rp}=RY(),{room:$o,players:Bt,currentPlayerId:Qr,isLoading:sp,categories:ip,createRoom:Oi,joinRoom:Vo,startGame:Hu,startDescribePhase:Gu,nextTurn:Li,startVoting:op,votePlayer:Fi,checkResultAndContinue:Nb,restartGame:ap,leaveRoom:Il}=UY(),{room:$i,players:qu,currentPlayerId:Uo,isLoading:yr,questions:lp,createRoom:ue,joinRoom:Ce,startGame:Le,startRound:gn,selectVictim:vn,revealQuestion:wr,skipQuestion:Xr,leaveRoom:tn}=BY(),{room:xn,players:Cb,currentPlayerId:Sb,isLoading:H5,createRoom:Eb,joinRoom:Ku,startGame:G5,startRound:q5,finishAnswering:K5,vote:Y5,leaveRoom:kb}=zY(),cp=D.find(J=>J.id===j),Q5=(cp==null?void 0:cp.is_host)??!1,up=_e.find(J=>J.id===K),X5=(up==null?void 0:up.is_host)??!1,[zt,dp]=m.useState(0),De=A?{code:A.code,type:"kingscup",name:z("kingsCup")}:je?{code:je.code,type:"pokdeng",name:z("pokDeng")}:$o?{code:$o.code,type:"undercover",name:z("undercoverTitle")}:$i?{code:$i.code,type:"paranoia",name:"Paranoia"}:xn?{code:xn.code,type:"5-sec",name:"5 Second Rule"}:null,st=(()=>{const B=[{id:"kingscup",emoji:"",name:z("kingsCup"),desc:z("kingsCupDesc"),gradient:"from-red-500 to-orange-500",bgColor:"#ef4444"},{id:"pokdeng",emoji:"",name:z("pokDeng"),desc:z("pokDengDesc"),gradient:"from-emerald-500 to-green-600",bgColor:"#10b981"},{id:"undercover",emoji:"",name:z("undercoverTitle"),desc:z("undercoverDesc"),gradient:"from-purple-600 to-indigo-600",bgColor:"#9333ea"},{id:"paranoia",emoji:"",name:"Paranoia",desc:" - ",gradient:"from-pink-500 to-rose-600",bgColor:"#ec4899"},{id:"5-sec",emoji:"",name:"5 Second Rule",desc:" 5  - ",gradient:"from-yellow-400 to-orange-500",bgColor:"#f59e0b"},{id:"texas-holdem",emoji:"",name:"Texas Hold'em",desc:" - ",gradient:"from-blue-600 to-cyan-600",bgColor:"#2563eb",externalLink:"https://pongporn1.github.io/texas-hold-em-power/#/auth"}].map(re=>{const Pe=I[re.id],Ui=T[re.id];return{...re,emoji:(Pe==null?void 0:Pe.emoji)??re.emoji,name:(Pe==null?void 0:Pe.title)||re.name,gradient:(Pe==null?void 0:Pe.gradient)||re.gradient,iconUrl:Ui}}),te=new Set;return B.filter(re=>te.has(re.id)?(console.warn(` Duplicate game ID detected: ${re.id}`),!1):(te.add(re.id),!0))})(),Tb=m.useCallback(()=>{dp(J=>(J+1)%st.length)},[st.length]),jb=m.useCallback(()=>{dp(J=>(J-1+st.length)%st.length)},[st.length]);m.useEffect(()=>{_?(async()=>{if(!v.roomCode||!v.gameType||!v.playerName){u(!1);return}console.log("Attempting session recovery:",v);try{const B=v.gameType,te=v.roomCode,Ee=e||v.playerName,re=v.playerId;(B==="kingscup"||B==="pokdeng"||B==="undercover"||B==="paranoia"||B==="5-sec")&&r(B),await new Promise(Ui=>setTimeout(Ui,100));let Pe=!1;switch(B){case"kingscup":Pe=await ie(te,Ee,re);break;case"pokdeng":Pe=await xt(te,Ee,re);break;case"undercover":Pe=await Vo(te,Ee,re);break;case"paranoia":Pe=await Ce(te,Ee,re);break;case"5-sec":Pe=await Ku(te,Ee,re);break}Pe?console.log("Session recovery successful!"):(console.log("Session recovery failed, clearing session"),b(),r("select"))}catch(B){console.error("Session recovery error:",B),b(),r("select")}finally{u(!1)}})():u(!1)},[_,v,e,b,ie,xt,Vo,Ce,Ku]);const Pl=m.useCallback(async(J,B)=>{let te;switch(B){case"kingscup":te=await Q(J);break;case"pokdeng":te=await Ue(J);break;case"undercover":te=await Oi(J);break;case"paranoia":te=await ue(J);break;case"5-sec":te=await Eb(J);break}if(te){const Ee=typeof te=="string"?te:te.code||te.code,re=typeof te=="object"&&te!==null&&"playerId"in te?te.playerId:void 0;C({playerName:J,roomCode:Ee,gameType:B,playerId:re})}return te},[Q,Ue,Oi,ue,Eb,C]),Vi=m.useCallback(async(J,B,te)=>{let Ee=null;switch(te){case"kingscup":Ee=await ie(J,B);break;case"pokdeng":Ee=await xt(J,B);break;case"undercover":Ee=await Vo(J,B);break;case"paranoia":Ee=await Ce(J,B);break;case"5-sec":Ee=await Ku(J,B);break}if(Ee){const re=typeof Ee=="object"&&Ee!==null&&"playerId"in Ee?Ee.playerId:void 0;C({playerName:B,roomCode:J.toUpperCase(),gameType:te,playerId:re})}return!!Ee},[ie,xt,Vo,Ce,Ku,C]),hp=m.useCallback(async(J,B)=>{const te=e||localStorage.getItem("playerName")||`Player_${Math.random().toString(36).slice(2,6)}`,re={kingscup:"kingscup",doraemon:"kingscup",pokdeng:"pokdeng",undercover:"undercover",paranoia:"paranoia","5-sec":"5-sec"}[B]||"kingscup";r(re),await Vi(J,te,re)||r("select")},[Vi,e]),Al=m.useCallback(J=>{switch(b(),J){case"kingscup":Z();break;case"pokdeng":Rl();break;case"undercover":Il();break;case"paranoia":tn();break;case"5-sec":kb();break}r("select")},[b,Z,Rl,Il,tn,kb]);if(m.useEffect(()=>{const J=async()=>{const re=await zm();i(re)},B=async()=>{const re=await Yv();k(re)},te=async()=>{const re=await Qv();R(re)},Ee=async()=>{const re=await Xv();L(re)};J(),B(),te(),Ee()},[n,N]),m.useEffect(()=>{const J=t!=null&&t.uid?localStorage.getItem("admin_unlock_code"):null;if(J&&(t!=null&&t.uid)&&J==="1"+t.uid){V(!0);return}$&&(t!=null&&t.uid)&&(localStorage.setItem("admin_unlock_code","1"+t.uid),V(!0))},[t==null?void 0:t.uid,e,$]),m.useEffect(()=>{if(n!=="select")return;const J=B=>{if(B.key==="ArrowRight"&&Tb(),B.key==="ArrowLeft"&&jb(),B.key==="Enter"){const te=st[zt];r(te.id)}};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[n,zt,Tb,jb,st]),c)return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-zinc-900 flex flex-col items-center justify-center gap-4",children:[a.jsx(gt,{className:"w-12 h-12 animate-spin text-cyan-400"}),a.jsx("p",{className:"text-white text-xl font-medium",children:"..."}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Recovering session..."})]});if(n==="select")return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] relative overflow-hidden bg-zinc-900 text-white flex",children:[a.jsx(sl,{children:w&&a.jsxs(W.div,{className:"fixed inset-0 z-[100] pointer-events-none overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[a.jsx(W.div,{className:"absolute inset-0",initial:{background:"radial-gradient(ellipse at 50% 0%, rgba(0,150,200,0.3) 0%, rgba(0,50,80,0.95) 40%, rgba(0,20,40,1) 100%)"},animate:{background:g?"radial-gradient(ellipse at 50% -50%, rgba(100,200,255,0.4) 0%, rgba(0,80,120,0.6) 30%, transparent 60%)":"radial-gradient(ellipse at 50% -20%, rgba(0,180,220,0.4) 0%, rgba(0,40,80,0.98) 50%, rgba(0,10,30,1) 100%)"},transition:{duration:1.8,ease:"easeInOut"}}),a.jsx(W.div,{className:"absolute inset-0 opacity-30",style:{backgroundImage:`
                    radial-gradient(ellipse 80% 50% at 20% 30%, rgba(0,200,255,0.3) 0%, transparent 50%),
                    radial-gradient(ellipse 60% 40% at 70% 20%, rgba(0,180,220,0.25) 0%, transparent 50%),
                    radial-gradient(ellipse 100% 60% at 50% 10%, rgba(100,220,255,0.2) 0%, transparent 60%)
                  `},animate:{opacity:g?[.3,.6,.8]:[0,.3,.2],scale:g?[1,1.1,1]:[1.2,1,.9]},transition:{duration:2,ease:"easeOut"}}),[...Array(40)].map((J,B)=>a.jsx(W.div,{className:"absolute rounded-full",style:{width:Math.random()*4+1,height:Math.random()*4+1,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,background:`rgba(${150+Math.random()*100}, ${200+Math.random()*55}, 255, ${.3+Math.random()*.4})`,boxShadow:`0 0 ${Math.random()*6+2}px rgba(100, 200, 255, 0.5)`},animate:{y:g?[0,-50,-100]:[0,Math.random()*100-50],x:[0,Math.random()*40-20,Math.random()*60-30],opacity:g?[.6,.8,0]:[0,.6,.4,.7,.3]},transition:{duration:2+Math.random()*3,delay:Math.random()*1,ease:"easeInOut",repeat:g?0:1/0,repeatType:"reverse"}},`particle-${B}`)),[...Array(12)].map((J,B)=>{const te=20+Math.random()*40,Ee=Math.random()>.5,re=10+Math.random()*70;return a.jsx(W.div,{className:"absolute",style:{left:Ee?"-10%":"110%",top:`${re}%`,width:te,height:te*.5,filter:"blur(1px)"},initial:{x:0,opacity:0},animate:{x:Ee?window.innerWidth*1.3:-window.innerWidth*1.3,y:[0,Math.random()*30-15,Math.random()*20-10,0],opacity:[0,.4,.5,.3,0]},transition:{duration:4+Math.random()*3,delay:Math.random()*2,ease:"linear"},children:a.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",style:{transform:Ee?"scaleX(1)":"scaleX(-1)"},children:[a.jsx("path",{d:"M10,25 Q30,10 50,25 Q70,10 85,25 L95,15 L95,35 L85,25 Q70,40 50,25 Q30,40 10,25 Z",fill:"rgba(0,30,50,0.6)"}),a.jsx("circle",{cx:"20",cy:"23",r:"3",fill:"rgba(100,200,255,0.3)"})]})},`fish-${B}`)}),[...Array(8)].map((J,B)=>{const te=20+Math.random()*50,Ee=Math.random()*3;return a.jsx(W.div,{className:"absolute",style:{left:"-15%",top:`${te}%`},initial:{x:0},animate:{x:window.innerWidth*1.4,y:[0,20,-10,15,0]},transition:{duration:6+Math.random()*2,delay:Ee,ease:"linear"},children:[...Array(5)].map((re,Pe)=>a.jsx(W.div,{className:"absolute",style:{left:Pe*15,top:Pe%2*12-6,width:12+Math.random()*8,height:8},animate:{y:[0,3,-2,1,0]},transition:{duration:1+Math.random()*.5,repeat:1/0,delay:Pe*.1},children:a.jsx("svg",{viewBox:"0 0 24 12",className:"w-full h-full",children:a.jsx("path",{d:"M2,6 Q8,2 14,6 L22,3 L22,9 L14,6 Q8,10 2,6 Z",fill:"rgba(0,40,60,0.5)"})})},`small-fish-${B}-${Pe}`))},`fish-school-${B}`)}),[...Array(10)].map((J,B)=>{const te=100+Math.random()*150,Ee=5+B*10+Math.random()*5;return a.jsx(W.div,{className:"absolute bottom-0",style:{left:`${Ee}%`,width:20+Math.random()*15,height:te,transformOrigin:"bottom center"},initial:{opacity:0,y:50},animate:{opacity:g?[.5,.3,0]:[0,.5,.6],y:g?100:0},transition:{duration:1.5,delay:.5+B*.1},children:a.jsxs("svg",{viewBox:"0 0 30 200",className:"w-full h-full",children:[a.jsx(W.path,{d:"M15,200 Q5,150 15,100 Q25,50 15,0",fill:"none",stroke:"rgba(0,80,60,0.6)",strokeWidth:"8",strokeLinecap:"round",animate:{d:["M15,200 Q5,150 15,100 Q25,50 15,0","M15,200 Q25,150 15,100 Q5,50 15,0","M15,200 Q5,150 15,100 Q25,50 15,0"]},transition:{duration:3+Math.random()*2,repeat:1/0,ease:"easeInOut"}}),[...Array(4)].map((re,Pe)=>{const Ui=Pe%2===0?7:23,J5=Pe%2===0?12:18;return a.jsx(W.ellipse,{cx:Ui,cy:40+Pe*40,rx:12,ry:6,fill:"rgba(0,100,70,0.5)",animate:{cx:[Ui,J5,Ui]},transition:{duration:2+Math.random(),repeat:1/0,ease:"easeInOut",delay:Pe*.2}},`leaf-${B}-${Pe}`)})]})},`seaweed-${B}`)}),[...Array(3)].map((J,B)=>{const te=40+Math.random()*30;return a.jsx(W.div,{className:"absolute",style:{left:`${20+B*25+Math.random()*10}%`,top:`${30+Math.random()*30}%`,width:te,height:te*1.5,filter:"blur(1px)"},initial:{opacity:0,y:50},animate:{opacity:g?[.4,.2,0]:[0,.3,.4,.3],y:g?-100:[0,-20,0,-15,0]},transition:{duration:g?1:4+Math.random()*2,delay:.8+B*.3,repeat:g?0:1/0,ease:"easeInOut"},children:a.jsxs("svg",{viewBox:"0 0 60 90",className:"w-full h-full",children:[a.jsx("ellipse",{cx:"30",cy:"20",rx:"25",ry:"18",fill:"rgba(100,150,200,0.3)"}),a.jsx("ellipse",{cx:"30",cy:"20",rx:"20",ry:"14",fill:"rgba(150,200,255,0.2)"}),[...Array(5)].map((Ee,re)=>a.jsx(W.path,{d:`M${15+re*8},35 Q${10+re*8},55 ${15+re*8},75 Q${20+re*8},85 ${15+re*8},90`,fill:"none",stroke:"rgba(100,180,220,0.3)",strokeWidth:"2",animate:{d:[`M${15+re*8},35 Q${10+re*8},55 ${15+re*8},75 Q${20+re*8},85 ${15+re*8},90`,`M${15+re*8},35 Q${20+re*8},55 ${15+re*8},75 Q${10+re*8},85 ${15+re*8},90`,`M${15+re*8},35 Q${10+re*8},55 ${15+re*8},75 Q${20+re*8},85 ${15+re*8},90`]},transition:{duration:2,repeat:1/0,delay:re*.1,ease:"easeInOut"}},`tentacle-${B}-${re}`))]})},`jellyfish-${B}`)}),[...Array(15)].map((J,B)=>{const te=Math.random()*30+15;return a.jsx(W.div,{className:"absolute rounded-full",style:{width:te,height:te,left:`${Math.random()*100}%`,bottom:`-${te}px`,background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(150,220,255,0.2) 50%, transparent 70%)",border:"1px solid rgba(255,255,255,0.3)"},animate:{y:-window.innerHeight-100,x:[0,Math.random()*50-25,Math.random()*30-15],scale:[1,1.1,.9,1.05,1]},transition:{duration:2.5+Math.random()*2,delay:Math.random()*1.5,ease:"easeOut"}},`bubble-${B}`)}),[...Array(30)].map((J,B)=>{const te=Math.random()*8+3;return a.jsx(W.div,{className:"absolute rounded-full bg-white/30",style:{width:te,height:te,left:`${Math.random()*100}%`,bottom:`-${te}px`},animate:{y:-window.innerHeight*1.2,opacity:[0,.5,.3,0]},transition:{duration:1.5+Math.random()*2,delay:Math.random()*2,ease:"easeOut"}},`small-bubble-${B}`)}),[...Array(8)].map((J,B)=>a.jsx(W.div,{className:"absolute top-0",style:{width:60+Math.random()*120,height:"150%",left:`${5+B*12}%`,background:"linear-gradient(to bottom, rgba(100,220,255,0.4) 0%, rgba(50,180,220,0.15) 30%, transparent 70%)",transformOrigin:"top center",transform:`rotate(${-20+Math.random()*40}deg)`,filter:"blur(8px)"},initial:{opacity:0,scaleY:0},animate:{opacity:g?[.5,.7,.3]:[0,.3,.5,.2],scaleY:[0,1,1.1,1]},transition:{duration:2.5,delay:.2+B*.15,ease:"easeOut"}},`ray-${B}`)),a.jsx(W.div,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:g?1:.6},transition:{duration:1,delay:.5},children:a.jsx(W.div,{className:"relative",animate:{scale:g?[1,1.5,2]:[.5,1,1.2],opacity:g?[.8,.5,0]:[0,.4,.6]},transition:{duration:2,ease:"easeOut"},children:[...Array(4)].map((J,B)=>a.jsx(W.div,{className:"absolute rounded-full border-2 border-cyan-400/30",style:{width:100+B*80,height:100+B*80,left:-(50+B*40),top:-(50+B*40)},animate:{scale:[1,1.3,1.5],opacity:[.5,.3,0]},transition:{duration:2,delay:B*.3,repeat:1/0,ease:"easeOut"}},`ring-${B}`))})}),a.jsx(W.div,{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(ellipse at center, transparent 30%, rgba(0,10,30,0.8) 100%)"},animate:{opacity:g?[1,.3,0]:[0,.7,1]},transition:{duration:1.5}}),g&&a.jsxs(a.Fragment,{children:[a.jsx(W.div,{className:"absolute top-0 left-0 right-0 h-40",style:{background:"linear-gradient(to bottom, rgba(100,200,255,0.5) 0%, rgba(50,150,200,0.3) 40%, transparent 100%)"},initial:{y:-150,opacity:0},animate:{y:0,opacity:1},transition:{duration:.6,ease:"easeOut"}}),[...Array(20)].map((J,B)=>a.jsx(W.div,{className:"absolute rounded-full bg-cyan-300/60",style:{width:Math.random()*8+3,height:Math.random()*12+5,left:`${30+Math.random()*40}%`,top:0},initial:{y:0,opacity:1},animate:{y:[0,100+Math.random()*150],x:[0,(Math.random()-.5)*100],opacity:[1,.5,0],scale:[1,.5]},transition:{duration:.8+Math.random()*.5,delay:Math.random()*.3,ease:"easeOut"}},`droplet-${B}`))]}),g&&a.jsx(W.div,{className:"absolute inset-0 bg-white",initial:{opacity:.8},animate:{opacity:0},transition:{duration:.4}})]})}),a.jsx(zu,{}),a.jsx(db,{names:s}),a.jsx(FZ,{onNavigate:J=>h(J),currentSection:d}),a.jsx("div",{className:"hidden",children:a.jsx(jr,{currentRoomCode:De==null?void 0:De.code,currentGameType:De==null?void 0:De.type,currentGameName:De==null?void 0:De.name,onJoinRoom:hp})}),a.jsxs("div",{className:"h-screen w-screen overflow-hidden md:pl-20",children:[a.jsxs("div",{className:"fixed top-0 left-0 md:left-20 right-0 z-[70] flex items-center justify-between px-4 md:px-6 py-3 md:py-3 pt-safe bg-black/20 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-red-600 flex items-center justify-center font-bold text-base md:text-lg shadow-lg",children:""}),a.jsx("span",{className:"text-base md:text-xl font-bold",children:"King's Cup Party"})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(jr,{currentRoomCode:De==null?void 0:De.code,currentGameType:De==null?void 0:De.type,currentGameName:De==null?void 0:De.name,onJoinRoom:hp})}),a.jsx(ES,{}),a.jsx(kS,{}),a.jsx("span",{className:"hidden md:block text-zinc-400 text-sm",children:new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})]}),a.jsxs("div",{className:"h-full pt-14 pb-20 md:pb-0 overflow-y-auto",children:[d==="home"&&a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx($Z,{title:st[zt].name,description:st[zt].desc,emoji:st[zt].emoji,iconUrl:st[zt].iconUrl,gradient:st[zt].gradient,onStartPlaying:()=>{x(!0),setTimeout(()=>{y(!0),h("games"),setTimeout(()=>{x(!1),y(!1)},1e3)},2e3)}})}),d==="games"&&a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-cover bg-center bg-gradient-to-br from-slate-900 via-slate-800 to-black",style:E[st[zt].id]?{backgroundImage:`url(${E[st[zt].id]})`}:void 0},`bg-${st[zt].id}`),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/90"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-transparent to-transparent"}),a.jsx("div",{className:"relative z-20 px-2 md:px-8 pt-24 md:pt-28 pb-4 md:pb-8 overflow-visible",children:a.jsx("div",{className:"flex items-center gap-2 md:gap-6 overflow-x-auto overflow-y-visible scrollbar-hide py-2 md:py-8 px-1 md:px-4",children:st.map((J,B)=>{const te=B===zt;return a.jsxs(W.button,{onClick:()=>dp(B),className:"flex-shrink-0 relative",whileHover:{scale:1.05},whileTap:{scale:.95},animate:te?{scale:1.1,y:0}:{scale:.95,y:0},transition:{type:"spring",stiffness:300,damping:25},children:[a.jsx("div",{className:`w-16 h-16 md:w-28 md:h-28 rounded-lg md:rounded-2xl overflow-hidden transition-all duration-300 ${te?"ring-2 md:ring-4 ring-white shadow-[0_0_20px_rgba(255,255,255,0.5)] md:shadow-[0_0_30px_rgba(255,255,255,0.6)] brightness-110":"ring-1 md:ring-2 ring-white/20 opacity-50 hover:opacity-90"}`,children:J.iconUrl?a.jsx("img",{src:J.iconUrl,alt:J.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:`w-full h-full bg-gradient-to-br ${J.gradient} flex items-center justify-center text-3xl md:text-5xl`,children:J.emoji})}),te&&a.jsx(W.div,{layoutId:"gameIndicator",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"absolute -bottom-3 left-0 right-0 h-1.5 bg-gradient-to-r from-transparent via-white to-transparent rounded-full shadow-lg"})]},`game-${J.id}-${B}`)})})}),a.jsxs(W.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},className:"relative z-20 mt-auto px-4 md:px-12 pb-32 md:pb-16 max-w-2xl",children:[a.jsx("h1",{className:"text-3xl md:text-6xl font-black text-white mb-2 md:mb-4 drop-shadow-2xl",children:st[zt].name}),a.jsx("p",{className:"text-sm md:text-xl text-white/90 mb-4 md:mb-8 drop-shadow-lg line-clamp-2 md:line-clamp-none",children:st[zt].desc}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsxs(W.button,{onClick:()=>{const J=st[zt];J.externalLink?window.location.href=J.externalLink:r(J.id)},whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 md:px-12 py-2.5 md:py-4 bg-white/90 hover:bg-white text-black rounded-full font-bold text-sm md:text-lg shadow-2xl flex items-center gap-1.5 md:gap-3",children:[a.jsx(bu,{className:"w-4 h-4 md:w-6 md:h-6 fill-black"}),"Play"]}),a.jsx(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 md:p-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full border border-white/30",children:a.jsx("span",{className:"text-lg md:text-2xl",children:""})})]})]},`info-${st[zt].id}`)]}),d==="friends"&&a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-2 md:p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:""}),a.jsx("p",{className:"text-zinc-400",children:""})]}),a.jsxs("div",{className:"flex gap-2 mb-6 bg-white/5 p-1 rounded-xl backdrop-blur-sm border border-white/10",children:[a.jsx(W.button,{whileTap:{scale:.95},onClick:()=>p("friends"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${f==="friends"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":"text-zinc-400 hover:text-white hover:bg-white/5"}`,children:""}),a.jsx(W.button,{whileTap:{scale:.95},onClick:()=>p("requests"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${f==="requests"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":"text-zinc-400 hover:text-white hover:bg-white/5"}`,children:""}),a.jsx(W.button,{whileTap:{scale:.95},onClick:()=>p("search"),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${f==="search"?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":"text-zinc-400 hover:text-white hover:bg-white/5"}`,children:""})]}),a.jsxs(sl,{mode:"wait",children:[f==="friends"&&a.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-slate-900/50 to-slate-800/50 backdrop-blur-xl rounded-3xl p-8 md:p-12 border border-white/10 text-center",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-full flex items-center justify-center border border-cyan-500/30",children:a.jsx(dn,{className:"w-10 h-10 md:w-12 md:h-12 text-cyan-400"})}),a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2",children:""}),a.jsx("p",{className:"text-zinc-400 mb-6 max-w-md mx-auto text-sm md:text-base",children:"!"}),a.jsxs(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("search"),className:"px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white rounded-xl font-medium shadow-lg shadow-cyan-500/30 transition-all inline-flex items-center gap-2",children:[a.jsx(Vh,{className:"w-5 h-5"}),""]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[a.jsxs(W.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 backdrop-blur-sm rounded-2xl p-6 border border-purple-500/20 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:a.jsx(ST,{className:"w-5 h-5 text-purple-400"})}),a.jsx("h4",{className:"font-semibold text-white",children:""})]}),a.jsx("p",{className:"text-sm text-zinc-400",children:""})]}),a.jsxs(W.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 backdrop-blur-sm rounded-2xl p-6 border border-cyan-500/20 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-cyan-500/20 rounded-xl flex items-center justify-center",children:a.jsx(Oh,{className:"w-5 h-5 text-cyan-400"})}),a.jsx("h4",{className:"font-semibold text-white",children:""})]}),a.jsx("p",{className:"text-sm text-zinc-400",children:""})]})]})]},"friends"),f==="requests"&&a.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"bg-gradient-to-br from-slate-900/50 to-slate-800/50 backdrop-blur-xl rounded-3xl p-8 md:p-12 border border-white/10 text-center",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full flex items-center justify-center border border-purple-500/30",children:a.jsx(dn,{className:"w-10 h-10 md:w-12 md:h-12 text-purple-400"})}),a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2",children:""}),a.jsx("p",{className:"text-zinc-400 text-sm md:text-base",children:""})]},"requests"),f==="search"&&a.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"bg-gradient-to-br from-slate-900/50 to-slate-800/50 backdrop-blur-xl rounded-3xl p-8 md:p-12 border border-white/10",children:a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-full flex items-center justify-center border border-cyan-500/30",children:a.jsx(Vh,{className:"w-10 h-10 md:w-12 md:h-12 text-cyan-400"})}),a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white mb-2",children:""}),a.jsx("p",{className:"text-zinc-400 mb-6 text-sm md:text-base",children:""}),a.jsx(jr,{})]})},"search")]})]})}),d==="settings"&&a.jsx("div",{className:"h-full overflow-y-auto p-4 md:p-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl p-6 border border-white/10",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Appearance"}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:"text-white/80",children:"Theme"}),a.jsx(kS,{})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/80",children:"Language"}),a.jsx(ES,{})]})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl p-6 border border-white/10",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Account"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white/80",children:e||"Guest"}),a.jsx("p",{className:"text-white/40 text-sm",children:t?"Logged in":"Not logged in"})]}),a.jsx(jr,{currentRoomCode:De==null?void 0:De.code,currentGameType:De==null?void 0:De.type,currentGameName:De==null?void 0:De.name,onJoinRoom:hp})]})]})]})]})})]})]}),H&&a.jsx(W.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>{if($){S(!0);return}alert(`  Admin Panel

 'bonne' `)},className:"fixed bottom-24 right-4 md:bottom-6 md:right-6 z-50 p-3 md:p-4 rounded-full bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/30",children:a.jsx(Nu,{className:"w-5 h-5 md:w-6 md:h-6"})}),N&&a.jsx(FA,{onClose:()=>S(!1),games:st,onCoversUpdate:async()=>{const J=await Yv();k(J)},onProfilesUpdate:async()=>{const J=await Xv();L(J)},onIconsUpdate:async()=>{const J=await Qv();R(J)}})]});if(n==="pokdeng")return je?a.jsx(KX,{room:je,players:_e,currentPlayerId:K,isHost:X5,isLiveMode:o,onStartGame:qr,onDrawCard:xr,onStandCard:Kr,onDealerDraw:Mi,onDealerStand:Ss,onShowdown:Wu,onNextRound:Di,onLeave:()=>{l(!1),Al("pokdeng")},onSetDealer:rp}):a.jsx(UX,{onCreateRoom:async J=>await Pl(J,"pokdeng"),onJoinRoom:async(J,B)=>Vi(J,B,"pokdeng"),onQuickStart:async J=>{l(!0);const B=await Yr(J,!0);if(B){const te=typeof B=="string"?B:B.code;C({playerName:J,roomCode:te,gameType:"pokdeng"})}return B},isLoading:me,onBack:()=>r("select")});if(n==="undercover"){if(!$o)return a.jsx(AJ,{onCreateRoom:async B=>Pl(B,"undercover"),onJoinRoom:async(B,te)=>Vi(B,te,"undercover"),onBack:()=>r("select"),isLoading:sp});const J=((Rb=Bt.find(B=>B.id===Qr))==null?void 0:Rb.is_host)||!1;return a.jsx(vZ,{room:$o,players:Bt,currentPlayerId:Qr,isHost:J,categories:ip,onStartGame:Hu,onRestartGame:ap,onLeave:()=>Al("undercover")})}if(n==="paranoia"){if(!$i)return a.jsx(_Z,{onCreateRoom:async B=>Pl(B,"paranoia"),onJoinRoom:async(B,te)=>Vi(B,te,"paranoia"),onBack:()=>r("select"),isLoading:yr});const J=((Ib=qu.find(B=>B.id===Uo))==null?void 0:Ib.is_host)||!1;return a.jsx(CZ,{room:$i,players:qu,currentPlayerId:Uo,isHost:J,totalQuestions:lp.length,onStartGame:Le,onStartRound:gn,onSelectVictim:vn,onRevealQuestion:wr,onSkipQuestion:Xr,onLeave:()=>Al("paranoia")})}if(n==="5-sec"){if(!xn)return a.jsx(DZ,{onCreateRoom:async B=>Pl(B,"5-sec"),onJoinRoom:async(B,te)=>Vi(B,te,"5-sec"),onBack:()=>r("select"),isLoading:H5});const J=((Pb=Cb.find(B=>B.id===Sb))==null?void 0:Pb.is_host)||!1;return a.jsx(LZ,{room:xn,players:Cb,currentPlayerId:Sb,isHost:J,onStartGame:G5,onStartRound:q5,onFinishAnswering:K5,onVote:Y5,onLeave:()=>Al("5-sec")})}return A?a.jsx(VX,{room:A,players:D,currentPlayerId:j,isHost:Q5,onStartGame:le,onDrawCard:Re,onReshuffle:Oe,onLeave:()=>Al("kingscup")}):a.jsx(IX,{onCreateRoom:async J=>Pl(J,"kingscup"),onJoinRoom:async(J,B)=>Vi(J,B,"kingscup"),onQuickStart:async J=>{const B=await Ne(J);if(B){const te=typeof B=="string"?B:B.code;C({playerName:J,roomCode:te,gameType:"kingscup"})}return B},isLoading:q,onBack:()=>r("select")})},UZ=()=>{const t=jj();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};function BZ(){const[t,e]=m.useState("connected"),[n,r]=m.useState(navigator.onLine),[s,i]=m.useState(null),o=m.useRef(0),l=10,c=m.useRef(null),u=m.useCallback(async()=>{if(document.visibilityState==="visible"&&"wakeLock"in navigator&&!c.current)try{c.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock acquired"),c.current.addEventListener("release",()=>{console.log("Wake Lock released"),c.current=null})}catch(f){f.name!=="NotAllowedError"&&console.log("Wake Lock request failed:",f)}},[]),d=m.useCallback(()=>{c.current&&(c.current.release(),c.current=null)},[]),h=m.useCallback(()=>{if(o.current>=l){console.log("Max reconnection attempts reached"),e("disconnected");return}const f=Math.min(1e3*Math.pow(2,o.current),3e4);console.log(`Reconnecting in ${f}ms (attempt ${o.current+1})`),e("reconnecting"),setTimeout(()=>{try{Tt.connect(),Tt.isConnected()?(e("connected"),i(new Date),o.current=0,console.log("Reconnected successfully")):(o.current++,h())}catch(p){console.error("Reconnection failed:",p),o.current++,h()}},f)},[]);return m.useEffect(()=>{const f=()=>{console.log("Network is back online"),r(!0),h()},p=()=>{console.log("Network went offline"),r(!1),e("disconnected")};return window.addEventListener("online",f),window.addEventListener("offline",p),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[h]),m.useEffect(()=>{const f=async()=>{document.visibilityState==="visible"?(console.log("Page became visible, checking connection..."),await u(),(!n||t==="disconnected")&&h()):(console.log("Page became hidden"),d())};return document.addEventListener("visibilitychange",f),u(),()=>{document.removeEventListener("visibilitychange",f),d()}},[n,t,h,u,d]),m.useEffect(()=>{const f=Tt.connect(),p=()=>{console.log("Socket.IO connected"),e("connected"),i(new Date),o.current=0},w=()=>{console.log("Socket.IO disconnected"),e("disconnected")};return f.on("connect",p),f.on("disconnect",w),f.connected&&(e("connected"),i(new Date)),()=>{f.off("connect",p),f.off("disconnect",w)}},[]),m.useEffect(()=>{t==="connected"&&!s&&i(new Date)},[t,s]),{status:t,isOnline:n,reconnect:h,lastConnectedAt:s}}function zZ({showWhenConnected:t=!1}){const{status:e,isOnline:n,reconnect:r}=BZ();if(e==="connected"&&!t)return null;const i=((l,c)=>{if(!c)return{icon:Z_,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};switch(l){case"reconnecting":return{icon:$h,text:"...",bgColor:"bg-yellow-500",textColor:"text-black",showRetry:!1,iconClass:"animate-spin"};case"disconnected":return{icon:Z_,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};case"connected":return{icon:OL,text:"",bgColor:"bg-green-600",textColor:"text-white",showRetry:!1}}})(e,n),o=i.icon;return a.jsx(sl,{children:a.jsx(W.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-50 ${i.bgColor} ${i.textColor} px-4 py-3`,children:a.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[a.jsx(o,{className:`w-5 h-5 ${i.iconClass||""}`}),a.jsx("span",{className:"font-medium",children:i.text}),i.showRetry&&a.jsxs(M,{size:"sm",variant:"secondary",onClick:r,className:"ml-2 px-3 py-1 h-auto text-sm",children:[a.jsx($h,{className:"w-4 h-4 mr-1"}),""]})]})})})}const WZ=new i$,HZ=()=>a.jsx(a$,{client:WZ,children:a.jsx(G9,{children:a.jsxs(DF,{children:[a.jsx(zZ,{}),a.jsx(x3,{}),a.jsx(Q3,{}),a.jsx(G$,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(z$,{children:[a.jsx(G0,{path:"/",element:a.jsx(VZ,{})}),a.jsx(G0,{path:"*",element:a.jsx(UZ,{})})]})})]})})});wZ();Yk(document.getElementById("root")).render(a.jsx(HZ,{}));
