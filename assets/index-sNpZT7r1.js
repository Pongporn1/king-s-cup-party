var BM=Object.defineProperty;var kb=t=>{throw TypeError(t)};var zM=(t,e,n)=>e in t?BM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ku=(t,e,n)=>zM(t,typeof e!="symbol"?e+"":e,n),op=(t,e,n)=>e.has(t)||kb("Cannot "+n);var O=(t,e,n)=>(op(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?kb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ue=(t,e,n,r)=>(op(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),At=(t,e,n)=>(op(t,e,"access private method"),n);var Yu=(t,e,n,r)=>({set _(s){ue(t,e,s,n)},get _(){return O(t,e,r)}});function WM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function TS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jS={exports:{}},Of={},RS={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=Symbol.for("react.element"),HM=Symbol.for("react.portal"),GM=Symbol.for("react.fragment"),qM=Symbol.for("react.strict_mode"),KM=Symbol.for("react.profiler"),YM=Symbol.for("react.provider"),QM=Symbol.for("react.context"),XM=Symbol.for("react.forward_ref"),JM=Symbol.for("react.suspense"),ZM=Symbol.for("react.memo"),eO=Symbol.for("react.lazy"),Tb=Symbol.iterator;function tO(t){return t===null||typeof t!="object"?null:(t=Tb&&t[Tb]||t["@@iterator"],typeof t=="function"?t:null)}var IS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PS=Object.assign,AS={};function sl(t,e,n){this.props=t,this.context=e,this.refs=AS,this.updater=n||IS}sl.prototype.isReactComponent={};sl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DS(){}DS.prototype=sl.prototype;function sx(t,e,n){this.props=t,this.context=e,this.refs=AS,this.updater=n||IS}var ix=sx.prototype=new DS;ix.constructor=sx;PS(ix,sl.prototype);ix.isPureReactComponent=!0;var jb=Array.isArray,MS=Object.prototype.hasOwnProperty,ox={current:null},OS={key:!0,ref:!0,__self:!0,__source:!0};function LS(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)MS.call(e,r)&&!OS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:uu,type:t,key:i,ref:o,props:s,_owner:ox.current}}function nO(t,e){return{$$typeof:uu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ax(t){return typeof t=="object"&&t!==null&&t.$$typeof===uu}function rO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rb=/\/+/g;function ap(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rO(""+t.key):e.toString(36)}function Md(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uu:case HM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ap(o,0):r,jb(s)?(n="",t!=null&&(n=t.replace(Rb,"$&/")+"/"),Md(s,e,n,"",function(u){return u})):s!=null&&(ax(s)&&(s=nO(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",jb(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+ap(i,l);o+=Md(i,e,n,c,s)}else if(c=tO(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+ap(i,l++),o+=Md(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qu(t,e,n){if(t==null)return t;var r=[],s=0;return Md(t,r,"","",function(i){return e.call(n,i,s++)}),r}function sO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},Od={transition:null},iO={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Od,ReactCurrentOwner:ox};function FS(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Qu,forEach:function(t,e,n){Qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qu(t,function(){e++}),e},toArray:function(t){return Qu(t,function(e){return e})||[]},only:function(t){if(!ax(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=sl;we.Fragment=GM;we.Profiler=KM;we.PureComponent=sx;we.StrictMode=qM;we.Suspense=JM;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iO;we.act=FS;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ox.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)MS.call(e,c)&&!OS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:uu,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:QM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YM,_context:t},t.Consumer=t};we.createElement=LS;we.createFactory=function(t){var e=LS.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:XM,render:t}};we.isValidElement=ax;we.lazy=function(t){return{$$typeof:eO,_payload:{_status:-1,_result:t},_init:sO}};we.memo=function(t,e){return{$$typeof:ZM,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Od.transition;Od.transition={};try{t()}finally{Od.transition=e}};we.unstable_act=FS;we.useCallback=function(t,e){return Xt.current.useCallback(t,e)};we.useContext=function(t){return Xt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Xt.current.useEffect(t,e)};we.useId=function(){return Xt.current.useId()};we.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Xt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};we.useRef=function(t){return Xt.current.useRef(t)};we.useState=function(t){return Xt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Xt.current.useTransition()};we.version="18.3.1";RS.exports=we;var m=RS.exports;const H=TS(m),lx=WM({__proto__:null,default:H},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO=m,aO=Symbol.for("react.element"),lO=Symbol.for("react.fragment"),cO=Object.prototype.hasOwnProperty,uO=oO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dO={key:!0,ref:!0,__self:!0,__source:!0};function $S(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cO.call(e,r)&&!dO.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aO,type:t,key:i,ref:o,props:s,_owner:uO.current}}Of.Fragment=lO;Of.jsx=$S;Of.jsxs=$S;jS.exports=Of;var a=jS.exports,VS={exports:{}},Cn={},US={exports:{}},BS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,M){var j=A.length;A.push(M);e:for(;0<j;){var W=j-1>>>1,K=A[W];if(0<s(K,M))A[W]=M,A[j]=K,j=W;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var M=A[0],j=A.pop();if(j!==M){A[0]=j;e:for(var W=0,K=A.length,re=K>>>1;W<re;){var ae=2*(W+1)-1,Te=A[ae],Re=ae+1,Q=A[Re];if(0>s(Te,j))Re<K&&0>s(Q,Te)?(A[W]=Q,A[Re]=j,W=Re):(A[W]=Te,A[ae]=j,W=ae);else if(Re<K&&0>s(Q,j))A[W]=Q,A[Re]=j,W=Re;else break e}}return M}function s(A,M){var j=A.sortIndex-M.sortIndex;return j!==0?j:A.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,w=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=A)r(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(u)}}function N(A){if(g=!1,b(A),!w)if(n(c)!==null)w=!0,$(_);else{var M=n(u);M!==null&&z(N,M.startTime-A)}}function _(A,M){w=!1,g&&(g=!1,x(E),E=-1),p=!0;var j=f;try{for(b(M),h=n(c);h!==null&&(!(h.expirationTime>M)||A&&!R());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var K=W(h.expirationTime<=M);M=t.unstable_now(),typeof K=="function"?h.callback=K:h===n(c)&&r(c),b(M)}else r(c);h=n(c)}if(h!==null)var re=!0;else{var ae=n(u);ae!==null&&z(N,ae.startTime-M),re=!1}return re}finally{h=null,f=j,p=!1}}var C=!1,S=null,E=-1,k=5,T=-1;function R(){return!(t.unstable_now()-T<k)}function I(){if(S!==null){var A=t.unstable_now();T=A;var M=!0;try{M=S(!0,A)}finally{M?F():(C=!1,S=null)}}else C=!1}var F;if(typeof v=="function")F=function(){v(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=I,F=function(){V.postMessage(null)}}else F=function(){y(I,0)};function $(A){S=A,C||(C=!0,F())}function z(A,M){E=y(function(){A(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,$(_))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var j=f;f=M;try{return A()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,M){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=f;f=A;try{return M()}finally{f=j}},t.unstable_scheduleCallback=function(A,M,j){var W=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?W+j:W):j=W,A){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=j+K,A={id:d++,callback:M,priorityLevel:A,startTime:j,expirationTime:K,sortIndex:-1},j>W?(A.sortIndex=j,e(u,A),n(c)===null&&A===n(u)&&(g?(x(E),E=-1):g=!0,z(N,j-W))):(A.sortIndex=K,e(c,A),w||p||(w=!0,$(_))),A},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(A){var M=f;return function(){var j=f;f=M;try{return A.apply(this,arguments)}finally{f=j}}}})(BS);US.exports=BS;var hO=US.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fO=m,_n=hO;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zS=new Set,Cc={};function Po(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(Cc[t]=e,t=0;t<e.length;t++)zS.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,mO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ib={},Pb={};function pO(t){return Rg.call(Pb,t)?!0:Rg.call(Ib,t)?!1:mO.test(t)?Pb[t]=!0:(Ib[t]=!0,!1)}function gO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vO(t,e,n,r){if(e===null||typeof e>"u"||gO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cx=/[\-:]([a-z])/g;function ux(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cx,ux);Rt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cx,ux);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cx,ux);Rt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dx(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vO(e,n,s,r)&&(n=null),r||s===null?pO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cs=fO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),WS=Symbol.for("react.provider"),HS=Symbol.for("react.context"),fx=Symbol.for("react.forward_ref"),Pg=Symbol.for("react.suspense"),Ag=Symbol.for("react.suspense_list"),mx=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),GS=Symbol.for("react.offscreen"),Ab=Symbol.iterator;function Rl(t){return t===null||typeof t!="object"?null:(t=Ab&&t[Ab]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,lp;function ql(t){if(lp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lp=e&&e[1]||""}return`
`+lp+t}var cp=!1;function up(t,e){if(!t||cp)return"";cp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{cp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ql(t):""}function yO(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=up(t.type,!1),t;case 11:return t=up(t.type.render,!1),t;case 1:return t=up(t.type,!0),t;default:return""}}function Dg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case Ho:return"Portal";case Ig:return"Profiler";case hx:return"StrictMode";case Pg:return"Suspense";case Ag:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HS:return(t.displayName||"Context")+".Consumer";case WS:return(t._context.displayName||"Context")+".Provider";case fx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mx:return e=t.displayName||null,e!==null?e:Dg(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return Dg(t(e))}catch{}}return null}function xO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dg(e);case 8:return e===hx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wO(t){var e=qS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=wO(t))}function KS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mg(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Db(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YS(t,e){e=e.checked,e!=null&&dx(t,"checked",e,!1)}function Og(t,e){YS(t,e);var n=pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lg(t,e.type,pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lg(t,e,n){(e!=="number"||dh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function da(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ob(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Kl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pi(n)}}function QS(t,e){var n=pi(e.value),r=pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $g(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,JS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bO=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(t){bO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tc[e]=tc[t]})});function ZS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tc.hasOwnProperty(t)&&tc[t]?(""+e).trim():e+"px"}function eE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _O=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vg(t,e){if(e){if(_O[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Ug(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bg=null;function px(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zg=null,ha=null,fa=null;function Fb(t){if(t=fu(t)){if(typeof zg!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Uf(e),zg(t.stateNode,t.type,e))}}function tE(t){ha?fa?fa.push(t):fa=[t]:ha=t}function nE(){if(ha){var t=ha,e=fa;if(fa=ha=null,Fb(t),e)for(t=0;t<e.length;t++)Fb(e[t])}}function rE(t,e){return t(e)}function sE(){}var dp=!1;function iE(t,e,n){if(dp)return t(e,n);dp=!0;try{return rE(t,e,n)}finally{dp=!1,(ha!==null||fa!==null)&&(sE(),nE())}}function Sc(t,e){var n=t.stateNode;if(n===null)return null;var r=Uf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Wg=!1;if(ds)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){Wg=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Wg=!1}function CO(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var nc=!1,hh=null,fh=!1,Hg=null,NO={onError:function(t){nc=!0,hh=t}};function SO(t,e,n,r,s,i,o,l,c){nc=!1,hh=null,CO.apply(NO,arguments)}function EO(t,e,n,r,s,i,o,l,c){if(SO.apply(this,arguments),nc){if(nc){var u=hh;nc=!1,hh=null}else throw Error(q(198));fh||(fh=!0,Hg=u)}}function Ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $b(t){if(Ao(t)!==t)throw Error(q(188))}function kO(t){var e=t.alternate;if(!e){if(e=Ao(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $b(s),t;if(i===r)return $b(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function aE(t){return t=kO(t),t!==null?lE(t):null}function lE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lE(t);if(e!==null)return e;t=t.sibling}return null}var cE=_n.unstable_scheduleCallback,Vb=_n.unstable_cancelCallback,TO=_n.unstable_shouldYield,jO=_n.unstable_requestPaint,rt=_n.unstable_now,RO=_n.unstable_getCurrentPriorityLevel,gx=_n.unstable_ImmediatePriority,uE=_n.unstable_UserBlockingPriority,mh=_n.unstable_NormalPriority,IO=_n.unstable_LowPriority,dE=_n.unstable_IdlePriority,Lf=null,Ir=null;function PO(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Lf,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:MO,AO=Math.log,DO=Math.LN2;function MO(t){return t>>>=0,t===0?32:31-(AO(t)/DO|0)|0}var ed=64,td=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yl(l):(i&=o,i!==0&&(r=Yl(i)))}else o=n&~s,o!==0?r=Yl(o):i!==0&&(r=Yl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function OO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=OO(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Gg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hE(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function du(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function FO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function vx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var je=0;function fE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mE,yx,pE,gE,vE,qg=!1,nd=[],ei=null,ti=null,ni=null,Ec=new Map,kc=new Map,Os=[],$O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ub(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Ec.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Pl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fu(e),e!==null&&yx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VO(t,e,n,r,s){switch(e){case"focusin":return ei=Pl(ei,t,e,n,r,s),!0;case"dragenter":return ti=Pl(ti,t,e,n,r,s),!0;case"mouseover":return ni=Pl(ni,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ec.set(i,Pl(Ec.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,kc.set(i,Pl(kc.get(i)||null,t,e,n,r,s)),!0}return!1}function yE(t){var e=Gi(t.target);if(e!==null){var n=Ao(e);if(n!==null){if(e=n.tag,e===13){if(e=oE(n),e!==null){t.blockedOn=e,vE(t.priority,function(){pE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ld(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bg=r,n.target.dispatchEvent(r),Bg=null}else return e=fu(n),e!==null&&yx(e),t.blockedOn=n,!1;e.shift()}return!0}function Bb(t,e,n){Ld(t)&&n.delete(e)}function UO(){qg=!1,ei!==null&&Ld(ei)&&(ei=null),ti!==null&&Ld(ti)&&(ti=null),ni!==null&&Ld(ni)&&(ni=null),Ec.forEach(Bb),kc.forEach(Bb)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,qg||(qg=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,UO)))}function Tc(t){function e(s){return Al(s,t)}if(0<nd.length){Al(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ei!==null&&Al(ei,t),ti!==null&&Al(ti,t),ni!==null&&Al(ni,t),Ec.forEach(e),kc.forEach(e),n=0;n<Os.length;n++)r=Os[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Os.length&&(n=Os[0],n.blockedOn===null);)yE(n),n.blockedOn===null&&Os.shift()}var ma=Cs.ReactCurrentBatchConfig,gh=!0;function BO(t,e,n,r){var s=je,i=ma.transition;ma.transition=null;try{je=1,xx(t,e,n,r)}finally{je=s,ma.transition=i}}function zO(t,e,n,r){var s=je,i=ma.transition;ma.transition=null;try{je=4,xx(t,e,n,r)}finally{je=s,ma.transition=i}}function xx(t,e,n,r){if(gh){var s=Kg(t,e,n,r);if(s===null)_p(t,e,r,vh,n),Ub(t,r);else if(VO(s,t,e,n,r))r.stopPropagation();else if(Ub(t,r),e&4&&-1<$O.indexOf(t)){for(;s!==null;){var i=fu(s);if(i!==null&&mE(i),i=Kg(t,e,n,r),i===null&&_p(t,e,r,vh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _p(t,e,r,null,n)}}var vh=null;function Kg(t,e,n,r){if(vh=null,t=px(r),t=Gi(t),t!==null)if(e=Ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vh=t,null}function xE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RO()){case gx:return 1;case uE:return 4;case mh:case IO:return 16;case dE:return 536870912;default:return 16}default:return 16}}var Qs=null,wx=null,Fd=null;function wE(){if(Fd)return Fd;var t,e=wx,n=e.length,r,s="value"in Qs?Qs.value:Qs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Fd=s.slice(t,1<r?1-r:void 0)}function $d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function zb(){return!1}function Nn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:zb,this.isPropagationStopped=zb,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bx=Nn(il),hu=Qe({},il,{view:0,detail:0}),WO=Nn(hu),fp,mp,Dl,Ff=Qe({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_x,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dl&&(Dl&&t.type==="mousemove"?(fp=t.screenX-Dl.screenX,mp=t.screenY-Dl.screenY):mp=fp=0,Dl=t),fp)},movementY:function(t){return"movementY"in t?t.movementY:mp}}),Wb=Nn(Ff),HO=Qe({},Ff,{dataTransfer:0}),GO=Nn(HO),qO=Qe({},hu,{relatedTarget:0}),pp=Nn(qO),KO=Qe({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),YO=Nn(KO),QO=Qe({},il,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XO=Nn(QO),JO=Qe({},il,{data:0}),Hb=Nn(JO),ZO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=t4[t])?!!e[t]:!1}function _x(){return n4}var r4=Qe({},hu,{key:function(t){if(t.key){var e=ZO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?e4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_x,charCode:function(t){return t.type==="keypress"?$d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s4=Nn(r4),i4=Qe({},Ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gb=Nn(i4),o4=Qe({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_x}),a4=Nn(o4),l4=Qe({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),c4=Nn(l4),u4=Qe({},Ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d4=Nn(u4),h4=[9,13,27,32],Cx=ds&&"CompositionEvent"in window,rc=null;ds&&"documentMode"in document&&(rc=document.documentMode);var f4=ds&&"TextEvent"in window&&!rc,bE=ds&&(!Cx||rc&&8<rc&&11>=rc),qb=" ",Kb=!1;function _E(t,e){switch(t){case"keyup":return h4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function m4(t,e){switch(t){case"compositionend":return CE(e);case"keypress":return e.which!==32?null:(Kb=!0,qb);case"textInput":return t=e.data,t===qb&&Kb?null:t;default:return null}}function p4(t,e){if(qo)return t==="compositionend"||!Cx&&_E(t,e)?(t=wE(),Fd=wx=Qs=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bE&&e.locale!=="ko"?null:e.data;default:return null}}var g4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g4[t.type]:e==="textarea"}function NE(t,e,n,r){tE(r),e=yh(e,"onChange"),0<e.length&&(n=new bx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,jc=null;function v4(t){ME(t,0)}function $f(t){var e=Qo(t);if(KS(e))return t}function y4(t,e){if(t==="change")return e}var SE=!1;if(ds){var gp;if(ds){var vp="oninput"in document;if(!vp){var Qb=document.createElement("div");Qb.setAttribute("oninput","return;"),vp=typeof Qb.oninput=="function"}gp=vp}else gp=!1;SE=gp&&(!document.documentMode||9<document.documentMode)}function Xb(){sc&&(sc.detachEvent("onpropertychange",EE),jc=sc=null)}function EE(t){if(t.propertyName==="value"&&$f(jc)){var e=[];NE(e,jc,t,px(t)),iE(v4,e)}}function x4(t,e,n){t==="focusin"?(Xb(),sc=e,jc=n,sc.attachEvent("onpropertychange",EE)):t==="focusout"&&Xb()}function w4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $f(jc)}function b4(t,e){if(t==="click")return $f(e)}function _4(t,e){if(t==="input"||t==="change")return $f(e)}function C4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:C4;function Rc(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rg.call(e,s)||!cr(t[s],e[s]))return!1}return!0}function Jb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zb(t,e){var n=Jb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jb(n)}}function kE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TE(){for(var t=window,e=dh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dh(t.document)}return e}function Nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function N4(t){var e=TE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kE(n.ownerDocument.documentElement,n)){if(r!==null&&Nx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zb(n,i);var o=Zb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var S4=ds&&"documentMode"in document&&11>=document.documentMode,Ko=null,Yg=null,ic=null,Qg=!1;function e_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qg||Ko==null||Ko!==dh(r)||(r=Ko,"selectionStart"in r&&Nx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Rc(ic,r)||(ic=r,r=yh(Yg,"onSelect"),0<r.length&&(e=new bx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},yp={},jE={};ds&&(jE=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Vf(t){if(yp[t])return yp[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jE)return yp[t]=e[n];return t}var RE=Vf("animationend"),IE=Vf("animationiteration"),PE=Vf("animationstart"),AE=Vf("transitionend"),DE=new Map,t_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){DE.set(t,e),Po(e,[t])}for(var xp=0;xp<t_.length;xp++){var wp=t_[xp],E4=wp.toLowerCase(),k4=wp[0].toUpperCase()+wp.slice(1);Ei(E4,"on"+k4)}Ei(RE,"onAnimationEnd");Ei(IE,"onAnimationIteration");Ei(PE,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(AE,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function n_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EO(r,e,void 0,t),t.currentTarget=null}function ME(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;n_(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;n_(s,l,u),i=c}}}if(fh)throw t=Hg,fh=!1,Hg=null,t}function $e(t,e){var n=e[tv];n===void 0&&(n=e[tv]=new Set);var r=t+"__bubble";n.has(r)||(OE(e,t,2,!1),n.add(r))}function bp(t,e,n){var r=0;e&&(r|=4),OE(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Ic(t){if(!t[id]){t[id]=!0,zS.forEach(function(n){n!=="selectionchange"&&(T4.has(n)||bp(n,!1,t),bp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,bp("selectionchange",!1,e))}}function OE(t,e,n,r){switch(xE(e)){case 1:var s=BO;break;case 4:s=zO;break;default:s=xx}n=s.bind(null,e,n,t),s=void 0,!Wg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _p(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Gi(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}iE(function(){var u=i,d=px(n),h=[];e:{var f=DE.get(t);if(f!==void 0){var p=bx,w=t;switch(t){case"keypress":if($d(n)===0)break e;case"keydown":case"keyup":p=s4;break;case"focusin":w="focus",p=pp;break;case"focusout":w="blur",p=pp;break;case"beforeblur":case"afterblur":p=pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=a4;break;case RE:case IE:case PE:p=YO;break;case AE:p=c4;break;case"scroll":p=WO;break;case"wheel":p=d4;break;case"copy":case"cut":case"paste":p=XO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Gb}var g=(e&4)!==0,y=!g&&t==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,b;v!==null;){b=v;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,x!==null&&(N=Sc(v,x),N!=null&&g.push(Pc(v,N,b)))),y)break;v=v.return}0<g.length&&(f=new p(f,w,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Bg&&(w=n.relatedTarget||n.fromElement)&&(Gi(w)||w[hs]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?Gi(w):null,w!==null&&(y=Ao(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(g=Wb,N="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=Gb,N="onPointerLeave",x="onPointerEnter",v="pointer"),y=p==null?f:Qo(p),b=w==null?f:Qo(w),f=new g(N,v+"leave",p,n,d),f.target=y,f.relatedTarget=b,N=null,Gi(d)===u&&(g=new g(x,v+"enter",w,n,d),g.target=b,g.relatedTarget=y,N=g),y=N,p&&w)t:{for(g=p,x=w,v=0,b=g;b;b=$o(b))v++;for(b=0,N=x;N;N=$o(N))b++;for(;0<v-b;)g=$o(g),v--;for(;0<b-v;)x=$o(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=$o(g),x=$o(x)}g=null}else g=null;p!==null&&r_(h,f,p,g,!1),w!==null&&y!==null&&r_(h,y,w,g,!0)}}e:{if(f=u?Qo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=y4;else if(Yb(f))if(SE)_=_4;else{_=w4;var C=x4}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=b4);if(_&&(_=_(t,u))){NE(h,_,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Lg(f,"number",f.value)}switch(C=u?Qo(u):window,t){case"focusin":(Yb(C)||C.contentEditable==="true")&&(Ko=C,Yg=u,ic=null);break;case"focusout":ic=Yg=Ko=null;break;case"mousedown":Qg=!0;break;case"contextmenu":case"mouseup":case"dragend":Qg=!1,e_(h,n,d);break;case"selectionchange":if(S4)break;case"keydown":case"keyup":e_(h,n,d)}var S;if(Cx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qo?_E(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(bE&&n.locale!=="ko"&&(qo||E!=="onCompositionStart"?E==="onCompositionEnd"&&qo&&(S=wE()):(Qs=d,wx="value"in Qs?Qs.value:Qs.textContent,qo=!0)),C=yh(u,E),0<C.length&&(E=new Hb(E,t,null,n,d),h.push({event:E,listeners:C}),S?E.data=S:(S=CE(n),S!==null&&(E.data=S)))),(S=f4?m4(t,n):p4(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(d=new Hb("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}ME(h,e)})}function Pc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sc(t,n),i!=null&&r.unshift(Pc(t,i,s)),i=Sc(t,e),i!=null&&r.push(Pc(t,i,s))),t=t.return}return r}function $o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Sc(n,i),c!=null&&o.unshift(Pc(n,c,l))):s||(c=Sc(n,i),c!=null&&o.push(Pc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var j4=/\r\n?/g,R4=/\u0000|\uFFFD/g;function s_(t){return(typeof t=="string"?t:""+t).replace(j4,`
`).replace(R4,"")}function od(t,e,n){if(e=s_(e),s_(t)!==e&&n)throw Error(q(425))}function xh(){}var Xg=null,Jg=null;function Zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,I4=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,P4=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(t){return i_.resolve(null).then(t).catch(A4)}:ev;function A4(t){setTimeout(function(){throw t})}function Cp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Tc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Tc(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Er="__reactFiber$"+ol,Ac="__reactProps$"+ol,hs="__reactContainer$"+ol,tv="__reactEvents$"+ol,D4="__reactListeners$"+ol,M4="__reactHandles$"+ol;function Gi(t){var e=t[Er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hs]||n[Er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o_(t);t!==null;){if(n=t[Er])return n;t=o_(t)}return e}t=n,n=t.parentNode}return null}function fu(t){return t=t[Er]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Uf(t){return t[Ac]||null}var nv=[],Xo=-1;function ki(t){return{current:t}}function Ve(t){0>Xo||(t.current=nv[Xo],nv[Xo]=null,Xo--)}function Le(t,e){Xo++,nv[Xo]=t.current,t.current=e}var gi={},Ut=ki(gi),on=ki(!1),mo=gi;function La(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function an(t){return t=t.childContextTypes,t!=null}function wh(){Ve(on),Ve(Ut)}function a_(t,e,n){if(Ut.current!==gi)throw Error(q(168));Le(Ut,e),Le(on,n)}function LE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,xO(t)||"Unknown",s));return Qe({},n,r)}function bh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,mo=Ut.current,Le(Ut,t),Le(on,on.current),!0}function l_(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=LE(t,e,mo),r.__reactInternalMemoizedMergedChildContext=t,Ve(on),Ve(Ut),Le(Ut,t)):Ve(on),Le(on,n)}var ns=null,Bf=!1,Np=!1;function FE(t){ns===null?ns=[t]:ns.push(t)}function O4(t){Bf=!0,FE(t)}function Ti(){if(!Np&&ns!==null){Np=!0;var t=0,e=je;try{var n=ns;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ns=null,Bf=!1}catch(s){throw ns!==null&&(ns=ns.slice(t+1)),cE(gx,Ti),s}finally{je=e,Np=!1}}return null}var Jo=[],Zo=0,_h=null,Ch=0,Rn=[],In=0,po=null,ss=1,is="";function Vi(t,e){Jo[Zo++]=Ch,Jo[Zo++]=_h,_h=t,Ch=e}function $E(t,e,n){Rn[In++]=ss,Rn[In++]=is,Rn[In++]=po,po=t;var r=ss;t=is;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ss=1<<32-or(e)+s|n<<s|r,is=i+t}else ss=1<<i|n<<s|r,is=t}function Sx(t){t.return!==null&&(Vi(t,1),$E(t,1,0))}function Ex(t){for(;t===_h;)_h=Jo[--Zo],Jo[Zo]=null,Ch=Jo[--Zo],Jo[Zo]=null;for(;t===po;)po=Rn[--In],Rn[In]=null,is=Rn[--In],Rn[In]=null,ss=Rn[--In],Rn[In]=null}var wn=null,xn=null,We=!1,tr=null;function VE(t,e){var n=An(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,xn=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=po!==null?{id:ss,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=An(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,xn=null,!0):!1;default:return!1}}function rv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sv(t){if(We){var e=xn;if(e){var n=e;if(!c_(t,e)){if(rv(t))throw Error(q(418));e=ri(n.nextSibling);var r=wn;e&&c_(t,e)?VE(r,n):(t.flags=t.flags&-4097|2,We=!1,wn=t)}}else{if(rv(t))throw Error(q(418));t.flags=t.flags&-4097|2,We=!1,wn=t}}}function u_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function ad(t){if(t!==wn)return!1;if(!We)return u_(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zg(t.type,t.memoizedProps)),e&&(e=xn)){if(rv(t))throw UE(),Error(q(418));for(;e;)VE(t,e),e=ri(e.nextSibling)}if(u_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=wn?ri(t.stateNode.nextSibling):null;return!0}function UE(){for(var t=xn;t;)t=ri(t.nextSibling)}function Fa(){xn=wn=null,We=!1}function kx(t){tr===null?tr=[t]:tr.push(t)}var L4=Cs.ReactCurrentBatchConfig;function Ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function ld(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d_(t){var e=t._init;return e(t._payload)}function BE(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=ai(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,N){return v===null||v.tag!==6?(v=Ip(b,x.mode,N),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,N){var _=b.type;return _===Go?d(x,v,b.props.children,N,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ds&&d_(_)===v.type)?(N=s(v,b.props),N.ref=Ml(x,v,b),N.return=x,N):(N=Gd(b.type,b.key,b.props,null,x.mode,N),N.ref=Ml(x,v,b),N.return=x,N)}function u(x,v,b,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Pp(b,x.mode,N),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function d(x,v,b,N,_){return v===null||v.tag!==7?(v=io(b,x.mode,N,_),v.return=x,v):(v=s(v,b),v.return=x,v)}function h(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ip(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:return b=Gd(v.type,v.key,v.props,null,x.mode,b),b.ref=Ml(x,null,v),b.return=x,b;case Ho:return v=Pp(v,x.mode,b),v.return=x,v;case Ds:var N=v._init;return h(x,N(v._payload),b)}if(Kl(v)||Rl(v))return v=io(v,x.mode,b,null),v.return=x,v;ld(x,v)}return null}function f(x,v,b,N){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(x,v,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xu:return b.key===_?c(x,v,b,N):null;case Ho:return b.key===_?u(x,v,b,N):null;case Ds:return _=b._init,f(x,v,_(b._payload),N)}if(Kl(b)||Rl(b))return _!==null?null:d(x,v,b,N,null);ld(x,b)}return null}function p(x,v,b,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(b)||null,l(v,x,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xu:return x=x.get(N.key===null?b:N.key)||null,c(v,x,N,_);case Ho:return x=x.get(N.key===null?b:N.key)||null,u(v,x,N,_);case Ds:var C=N._init;return p(x,v,b,C(N._payload),_)}if(Kl(N)||Rl(N))return x=x.get(b)||null,d(v,x,N,_,null);ld(v,N)}return null}function w(x,v,b,N){for(var _=null,C=null,S=v,E=v=0,k=null;S!==null&&E<b.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var T=f(x,S,b[E],N);if(T===null){S===null&&(S=k);break}t&&S&&T.alternate===null&&e(x,S),v=i(T,v,E),C===null?_=T:C.sibling=T,C=T,S=k}if(E===b.length)return n(x,S),We&&Vi(x,E),_;if(S===null){for(;E<b.length;E++)S=h(x,b[E],N),S!==null&&(v=i(S,v,E),C===null?_=S:C.sibling=S,C=S);return We&&Vi(x,E),_}for(S=r(x,S);E<b.length;E++)k=p(S,x,E,b[E],N),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),v=i(k,v,E),C===null?_=k:C.sibling=k,C=k);return t&&S.forEach(function(R){return e(x,R)}),We&&Vi(x,E),_}function g(x,v,b,N){var _=Rl(b);if(typeof _!="function")throw Error(q(150));if(b=_.call(b),b==null)throw Error(q(151));for(var C=_=null,S=v,E=v=0,k=null,T=b.next();S!==null&&!T.done;E++,T=b.next()){S.index>E?(k=S,S=null):k=S.sibling;var R=f(x,S,T.value,N);if(R===null){S===null&&(S=k);break}t&&S&&R.alternate===null&&e(x,S),v=i(R,v,E),C===null?_=R:C.sibling=R,C=R,S=k}if(T.done)return n(x,S),We&&Vi(x,E),_;if(S===null){for(;!T.done;E++,T=b.next())T=h(x,T.value,N),T!==null&&(v=i(T,v,E),C===null?_=T:C.sibling=T,C=T);return We&&Vi(x,E),_}for(S=r(x,S);!T.done;E++,T=b.next())T=p(S,x,E,T.value,N),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?E:T.key),v=i(T,v,E),C===null?_=T:C.sibling=T,C=T);return t&&S.forEach(function(I){return e(x,I)}),We&&Vi(x,E),_}function y(x,v,b,N){if(typeof b=="object"&&b!==null&&b.type===Go&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Xu:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===Go){if(C.tag===7){n(x,C.sibling),v=s(C,b.props.children),v.return=x,x=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ds&&d_(_)===C.type){n(x,C.sibling),v=s(C,b.props),v.ref=Ml(x,C,b),v.return=x,x=v;break e}n(x,C);break}else e(x,C);C=C.sibling}b.type===Go?(v=io(b.props.children,x.mode,N,b.key),v.return=x,x=v):(N=Gd(b.type,b.key,b.props,null,x.mode,N),N.ref=Ml(x,v,b),N.return=x,x=N)}return o(x);case Ho:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Pp(b,x.mode,N),v.return=x,x=v}return o(x);case Ds:return C=b._init,y(x,v,C(b._payload),N)}if(Kl(b))return w(x,v,b,N);if(Rl(b))return g(x,v,b,N);ld(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Ip(b,x.mode,N),v.return=x,x=v),o(x)):n(x,v)}return y}var $a=BE(!0),zE=BE(!1),Nh=ki(null),Sh=null,ea=null,Tx=null;function jx(){Tx=ea=Sh=null}function Rx(t){var e=Nh.current;Ve(Nh),t._currentValue=e}function iv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pa(t,e){Sh=t,Tx=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Tx!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(Sh===null)throw Error(q(308));ea=t,Sh.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var qi=null;function Ix(t){qi===null?qi=[t]:qi.push(t)}function WE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ix(e)):(n.next=s.next,s.next=n),e.interleaved=n,fs(t,r)}function fs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ms=!1;function Px(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fs(t,n)}return s=r.interleaved,s===null?(e.next=e,Ix(r)):(e.next=s.next,s.next=e),r.interleaved=e,fs(t,n)}function Vd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vx(t,n)}}function h_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Eh(t,e,n,r){var s=t.updateQueue;Ms=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,g=l;switch(f=e,p=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=Qe({},h,f);break e;case 2:Ms=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vo|=o,t.lanes=o,t.memoizedState=h}}function f_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var mu={},Pr=ki(mu),Dc=ki(mu),Mc=ki(mu);function Ki(t){if(t===mu)throw Error(q(174));return t}function Ax(t,e){switch(Le(Mc,e),Le(Dc,t),Le(Pr,mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$g(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$g(e,t)}Ve(Pr),Le(Pr,e)}function Va(){Ve(Pr),Ve(Dc),Ve(Mc)}function GE(t){Ki(Mc.current);var e=Ki(Pr.current),n=$g(e,t.type);e!==n&&(Le(Dc,t),Le(Pr,n))}function Dx(t){Dc.current===t&&(Ve(Pr),Ve(Dc))}var qe=ki(0);function kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sp=[];function Mx(){for(var t=0;t<Sp.length;t++)Sp[t]._workInProgressVersionPrimary=null;Sp.length=0}var Ud=Cs.ReactCurrentDispatcher,Ep=Cs.ReactCurrentBatchConfig,go=0,Ye=null,ct=null,yt=null,Th=!1,oc=!1,Oc=0,F4=0;function Dt(){throw Error(q(321))}function Ox(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function Lx(t,e,n,r,s,i){if(go=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ud.current=t===null||t.memoizedState===null?B4:z4,t=n(r,s),oc){i=0;do{if(oc=!1,Oc=0,25<=i)throw Error(q(301));i+=1,yt=ct=null,e.updateQueue=null,Ud.current=W4,t=n(r,s)}while(oc)}if(Ud.current=jh,e=ct!==null&&ct.next!==null,go=0,yt=ct=Ye=null,Th=!1,e)throw Error(q(300));return t}function Fx(){var t=Oc!==0;return Oc=0,t}function _r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ye.memoizedState=yt=t:yt=yt.next=t,yt}function $n(){if(ct===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=yt===null?Ye.memoizedState:yt.next;if(e!==null)yt=e,ct=t;else{if(t===null)throw Error(q(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},yt===null?Ye.memoizedState=yt=t:yt=yt.next=t}return yt}function Lc(t,e){return typeof e=="function"?e(t):e}function kp(t){var e=$n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((go&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Ye.lanes|=d,vo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,cr(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,vo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tp(t){var e=$n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cr(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qE(){}function KE(t,e){var n=Ye,r=$n(),s=e(),i=!cr(r.memoizedState,s);if(i&&(r.memoizedState=s,nn=!0),r=r.queue,$x(XE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Fc(9,QE.bind(null,n,r,s,e),void 0,null),wt===null)throw Error(q(349));go&30||YE(n,e,s)}return s}function YE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QE(t,e,n,r){e.value=n,e.getSnapshot=r,JE(e)&&ZE(t)}function XE(t,e,n){return n(function(){JE(e)&&ZE(t)})}function JE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function ZE(t){var e=fs(t,1);e!==null&&ar(e,t,1,-1)}function m_(t){var e=_r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:t},e.queue=t,t=t.dispatch=U4.bind(null,Ye,t),[e.memoizedState,t]}function Fc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ek(){return $n().memoizedState}function Bd(t,e,n,r){var s=_r();Ye.flags|=t,s.memoizedState=Fc(1|e,n,void 0,r===void 0?null:r)}function zf(t,e,n,r){var s=$n();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&Ox(r,o.deps)){s.memoizedState=Fc(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Fc(1|e,n,i,r)}function p_(t,e){return Bd(8390656,8,t,e)}function $x(t,e){return zf(2048,8,t,e)}function tk(t,e){return zf(4,2,t,e)}function nk(t,e){return zf(4,4,t,e)}function rk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sk(t,e,n){return n=n!=null?n.concat([t]):null,zf(4,4,rk.bind(null,e,t),n)}function Vx(){}function ik(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ox(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ok(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ox(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ak(t,e,n){return go&21?(cr(n,e)||(n=hE(),Ye.lanes|=n,vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function $4(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Ep.transition;Ep.transition={};try{t(!1),e()}finally{je=n,Ep.transition=r}}function lk(){return $n().memoizedState}function V4(t,e,n){var r=oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ck(t))uk(e,n);else if(n=WE(t,e,n,r),n!==null){var s=Kt();ar(n,t,r,s),dk(n,e,r)}}function U4(t,e,n){var r=oi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ck(t))uk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,cr(l,o)){var c=e.interleaved;c===null?(s.next=s,Ix(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=WE(t,e,s,r),n!==null&&(s=Kt(),ar(n,t,r,s),dk(n,e,r))}}function ck(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function uk(t,e){oc=Th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vx(t,n)}}var jh={readContext:Fn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},B4={readContext:Fn,useCallback:function(t,e){return _r().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:p_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4194308,4,rk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bd(4,2,t,e)},useMemo:function(t,e){var n=_r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=V4.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=_r();return t={current:t},e.memoizedState=t},useState:m_,useDebugValue:Vx,useDeferredValue:function(t){return _r().memoizedState=t},useTransition:function(){var t=m_(!1),e=t[0];return t=$4.bind(null,t[1]),_r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=_r();if(We){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),wt===null)throw Error(q(349));go&30||YE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,p_(XE.bind(null,r,i,t),[t]),r.flags|=2048,Fc(9,QE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_r(),e=wt.identifierPrefix;if(We){var n=is,r=ss;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=F4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z4={readContext:Fn,useCallback:ik,useContext:Fn,useEffect:$x,useImperativeHandle:sk,useInsertionEffect:tk,useLayoutEffect:nk,useMemo:ok,useReducer:kp,useRef:ek,useState:function(){return kp(Lc)},useDebugValue:Vx,useDeferredValue:function(t){var e=$n();return ak(e,ct.memoizedState,t)},useTransition:function(){var t=kp(Lc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:KE,useId:lk,unstable_isNewReconciler:!1},W4={readContext:Fn,useCallback:ik,useContext:Fn,useEffect:$x,useImperativeHandle:sk,useInsertionEffect:tk,useLayoutEffect:nk,useMemo:ok,useReducer:Tp,useRef:ek,useState:function(){return Tp(Lc)},useDebugValue:Vx,useDeferredValue:function(t){var e=$n();return ct===null?e.memoizedState=t:ak(e,ct.memoizedState,t)},useTransition:function(){var t=Tp(Lc)[0],e=$n().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:KE,useId:lk,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ov(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wf={isMounted:function(t){return(t=t._reactInternals)?Ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=oi(t),i=cs(r,s);i.payload=e,n!=null&&(i.callback=n),e=si(t,i,s),e!==null&&(ar(e,t,s,r),Vd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=oi(t),i=cs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=si(t,i,s),e!==null&&(ar(e,t,s,r),Vd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=oi(t),s=cs(n,r);s.tag=2,e!=null&&(s.callback=e),e=si(t,s,r),e!==null&&(ar(e,t,r,n),Vd(e,t,r))}};function g_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Rc(n,r)||!Rc(s,i):!0}function hk(t,e,n){var r=!1,s=gi,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=an(e)?mo:Ut.current,r=e.contextTypes,i=(r=r!=null)?La(t,s):gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function v_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wf.enqueueReplaceState(e,e.state,null)}function av(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Px(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=an(e)?mo:Ut.current,s.context=La(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ov(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wf.enqueueReplaceState(s,s.state,null),Eh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",r=e;do n+=yO(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H4=typeof WeakMap=="function"?WeakMap:Map;function fk(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ih||(Ih=!0,yv=r),lv(t,e)},n}function mk(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lv(t,e),typeof r!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function y_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iL.bind(null,t,e,n),e.then(t,t))}function x_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var G4=Cs.ReactCurrentOwner,nn=!1;function Wt(t,e,n,r){e.child=t===null?zE(e,null,n,r):$a(e,t.child,n,r)}function b_(t,e,n,r,s){n=n.render;var i=e.ref;return pa(e,s),r=Lx(t,e,n,r,i,s),n=Fx(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(We&&n&&Sx(e),e.flags|=1,Wt(t,e,r,s),e.child)}function __(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Kx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pk(t,e,i,r,s)):(t=Gd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Rc,n(o,r)&&t.ref===e.ref)return ms(t,e,s)}return e.flags|=1,t=ai(i,r),t.ref=e.ref,t.return=e,e.child=t}function pk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Rc(i,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,ms(t,e,s)}return cv(t,e,n,r,s)}function gk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(na,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(na,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(na,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(na,vn),vn|=r;return Wt(t,e,s,n),e.child}function vk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cv(t,e,n,r,s){var i=an(n)?mo:Ut.current;return i=La(e,i),pa(e,s),n=Lx(t,e,n,r,i,s),r=Fx(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ms(t,e,s)):(We&&r&&Sx(e),e.flags|=1,Wt(t,e,n,s),e.child)}function C_(t,e,n,r,s){if(an(n)){var i=!0;bh(e)}else i=!1;if(pa(e,s),e.stateNode===null)zd(t,e),hk(e,n,r),av(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=an(n)?mo:Ut.current,u=La(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&v_(e,o,r,u),Ms=!1;var f=e.memoizedState;o.state=f,Eh(e,r,o,s),c=e.memoizedState,l!==r||f!==c||on.current||Ms?(typeof d=="function"&&(ov(e,n,d,r),c=e.memoizedState),(l=Ms||g_(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Yn(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=an(n)?mo:Ut.current,c=La(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&v_(e,o,r,c),Ms=!1,f=e.memoizedState,o.state=f,Eh(e,r,o,s);var w=e.memoizedState;l!==h||f!==w||on.current||Ms?(typeof p=="function"&&(ov(e,n,p,r),w=e.memoizedState),(u=Ms||g_(e,n,u,r,f,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return uv(t,e,n,r,i,s)}function uv(t,e,n,r,s,i){vk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&l_(e,n,!1),ms(t,e,i);r=e.stateNode,G4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$a(e,t.child,null,i),e.child=$a(e,null,l,i)):Wt(t,e,l,i),e.memoizedState=r.state,s&&l_(e,n,!0),e.child}function yk(t){var e=t.stateNode;e.pendingContext?a_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a_(t,e.context,!1),Ax(t,e.containerInfo)}function N_(t,e,n,r,s){return Fa(),kx(s),e.flags|=256,Wt(t,e,n,r),e.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function hv(t){return{baseLanes:t,cachePool:null,transitions:null}}function xk(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(qe,s&1),t===null)return sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qf(o,r,0,null),t=io(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hv(n),e.memoizedState=dv,t):Ux(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return q4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ai(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ai(l,i):(i=io(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dv,r}return i=t.child,t=i.sibling,r=ai(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ux(t,e){return e=qf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,n,r){return r!==null&&kx(r),$a(e,t.child,null,n),t=Ux(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jp(Error(q(422))),cd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qf({mode:"visible",children:r.children},s,0,null),i=io(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&$a(e,t.child,null,o),e.child.memoizedState=hv(o),e.memoizedState=dv,i);if(!(e.mode&1))return cd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(q(419)),r=jp(i,r,void 0),cd(t,e,o,r)}if(l=(o&t.childLanes)!==0,nn||l){if(r=wt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fs(t,s),ar(r,t,s,-1))}return qx(),r=jp(Error(q(421))),cd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oL.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xn=ri(s.nextSibling),wn=e,We=!0,tr=null,t!==null&&(Rn[In++]=ss,Rn[In++]=is,Rn[In++]=po,ss=t.id,is=t.overflow,po=e),e=Ux(e,r.children),e.flags|=4096,e)}function S_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iv(t.return,e,n)}function Rp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S_(t,n,e);else if(t.tag===19)S_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rp(e,!0,n,null,i);break;case"together":Rp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K4(t,e,n){switch(e.tag){case 3:yk(e),Fa();break;case 5:GE(e);break;case 1:an(e.type)&&bh(e);break;case 4:Ax(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le(Nh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?xk(t,e,n):(Le(qe,qe.current&1),t=ms(t,e,n),t!==null?t.sibling:null);Le(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,gk(t,e,n)}return ms(t,e,n)}var bk,fv,_k,Ck;bk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fv=function(){};_k=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ki(Pr.current);var i=null;switch(n){case"input":s=Mg(t,s),r=Mg(t,r),i=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),i=[];break;case"textarea":s=Fg(t,s),r=Fg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xh)}Vg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ck=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ol(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y4(t,e,n){var r=e.pendingProps;switch(Ex(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return an(e.type)&&wh(),Mt(e),null;case 3:return r=e.stateNode,Va(),Ve(on),Ve(Ut),Mx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(bv(tr),tr=null))),fv(t,e),Mt(e),null;case 5:Dx(e);var s=Ki(Mc.current);if(n=e.type,t!==null&&e.stateNode!=null)_k(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Mt(e),null}if(t=Ki(Pr.current),ad(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Er]=e,r[Ac]=i,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(s=0;s<Ql.length;s++)$e(Ql[s],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Db(r,i),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$e("invalid",r);break;case"textarea":Ob(r,i),$e("invalid",r)}Vg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&od(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&od(r.textContent,l,t),s=["children",""+l]):Cc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Ju(r),Mb(r,i,!0);break;case"textarea":Ju(r),Lb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Er]=e,t[Ac]=r,bk(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ug(n,r),n){case"dialog":$e("cancel",t),$e("close",t),s=r;break;case"iframe":case"object":case"embed":$e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ql.length;s++)$e(Ql[s],t);s=r;break;case"source":$e("error",t),s=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),s=r;break;case"details":$e("toggle",t),s=r;break;case"input":Db(t,r),s=Mg(t,r),$e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Ob(t,r),s=Fg(t,r),$e("invalid",t);break;default:s=r}Vg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?eE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nc(t,c):typeof c=="number"&&Nc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$e("scroll",t):c!=null&&dx(t,i,c,o))}switch(n){case"input":Ju(t),Mb(t,r,!1);break;case"textarea":Ju(t),Lb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?da(t,!!r.multiple,i,!1):r.defaultValue!=null&&da(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)Ck(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Ki(Mc.current),Ki(Pr.current),ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[Er]=e,(i=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ve(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&xn!==null&&e.mode&1&&!(e.flags&128))UE(),Fa(),e.flags|=98560,i=!1;else if(i=ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Er]=e}else Fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else tr!==null&&(bv(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ft===0&&(ft=3):qx())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Va(),fv(t,e),t===null&&Ic(e.stateNode.containerInfo),Mt(e),null;case 10:return Rx(e.type._context),Mt(e),null;case 17:return an(e.type)&&wh(),Mt(e),null;case 19:if(Ve(qe),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ol(i,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kh(t),o!==null){for(e.flags|=128,Ol(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>Ba&&(e.flags|=128,r=!0,Ol(i,!1),e.lanes=4194304)}else{if(!r)if(t=kh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ol(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Mt(e),null}else 2*rt()-i.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,r=!0,Ol(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=qe.current,Le(qe,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Gx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function Q4(t,e){switch(Ex(e),e.tag){case 1:return an(e.type)&&wh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),Ve(on),Ve(Ut),Mx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dx(e),null;case 13:if(Ve(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(qe),null;case 4:return Va(),null;case 10:return Rx(e.type._context),null;case 22:case 23:return Gx(),null;case 24:return null;default:return null}}var ud=!1,$t=!1,X4=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function mv(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var E_=!1;function J4(t,e){if(Xg=gh,t=TE(),Nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jg={focusedElem:t,selectionRange:n},gh=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,y=w.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:Yn(e.type,g),y);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(N){Ze(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return w=E_,E_=!1,w}function ac(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mv(e,n,i)}s=s.next}while(s!==r)}}function Hf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nk(t){var e=t.alternate;e!==null&&(t.alternate=null,Nk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[Ac],delete e[tv],delete e[D4],delete e[M4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sk(t){return t.tag===5||t.tag===3||t.tag===4}function k_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xh));else if(r!==4&&(t=t.child,t!==null))for(gv(t,e,n),t=t.sibling;t!==null;)gv(t,e,n),t=t.sibling}function vv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vv(t,e,n),t=t.sibling;t!==null;)vv(t,e,n),t=t.sibling}var St=null,Zn=!1;function ks(t,e,n){for(n=n.child;n!==null;)Ek(t,e,n),n=n.sibling}function Ek(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Lf,n)}catch{}switch(n.tag){case 5:$t||ta(n,e);case 6:var r=St,s=Zn;St=null,ks(t,e,n),St=r,Zn=s,St!==null&&(Zn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Zn?(t=St,n=n.stateNode,t.nodeType===8?Cp(t.parentNode,n):t.nodeType===1&&Cp(t,n),Tc(t)):Cp(St,n.stateNode));break;case 4:r=St,s=Zn,St=n.stateNode.containerInfo,Zn=!0,ks(t,e,n),St=r,Zn=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mv(n,e,o),s=s.next}while(s!==r)}ks(t,e,n);break;case 1:if(!$t&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ze(n,e,l)}ks(t,e,n);break;case 21:ks(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,ks(t,e,n),$t=r):ks(t,e,n);break;default:ks(t,e,n)}}function T_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X4),e.forEach(function(r){var s=aL.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:St=l.stateNode,Zn=!1;break e;case 3:St=l.stateNode.containerInfo,Zn=!0;break e;case 4:St=l.stateNode.containerInfo,Zn=!0;break e}l=l.return}if(St===null)throw Error(q(160));Ek(i,o,s),St=null,Zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ze(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kk(e,t),e=e.sibling}function kk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),br(t),r&4){try{ac(3,t,t.return),Hf(3,t)}catch(g){Ze(t,t.return,g)}try{ac(5,t,t.return)}catch(g){Ze(t,t.return,g)}}break;case 1:Wn(e,t),br(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(Wn(e,t),br(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var s=t.stateNode;try{Nc(s,"")}catch(g){Ze(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&YS(s,i),Ug(l,o);var u=Ug(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?eE(s,h):d==="dangerouslySetInnerHTML"?JS(s,h):d==="children"?Nc(s,h):dx(s,d,h,u)}switch(l){case"input":Og(s,i);break;case"textarea":QS(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?da(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?da(s,!!i.multiple,i.defaultValue,!0):da(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ac]=i}catch(g){Ze(t,t.return,g)}}break;case 6:if(Wn(e,t),br(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ze(t,t.return,g)}}break;case 3:if(Wn(e,t),br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tc(e.containerInfo)}catch(g){Ze(t,t.return,g)}break;case 4:Wn(e,t),br(t);break;case 13:Wn(e,t),br(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Wx=rt())),r&4&&T_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||d,Wn(e,t),$t=u):Wn(e,t),br(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Z=t,d=t.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,p=f.child,f.tag){case 0:case 11:case 14:case 15:ac(4,f,f.return);break;case 1:ta(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(g){Ze(r,n,g)}}break;case 5:ta(f,f.return);break;case 22:if(f.memoizedState!==null){R_(h);continue}}p!==null?(p.return=f,Z=p):R_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ZS("display",o))}catch(g){Ze(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ze(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),br(t),r&4&&T_(t);break;case 21:break;default:Wn(e,t),br(t)}}function br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sk(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nc(s,""),r.flags&=-33);var i=k_(t);vv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=k_(t);gv(t,l,o);break;default:throw Error(q(161))}}catch(c){Ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z4(t,e,n){Z=t,Tk(t)}function Tk(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ud;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||$t;l=ud;var u=$t;if(ud=o,($t=c)&&!u)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?I_(s):c!==null?(c.return=o,Z=c):I_(s);for(;i!==null;)Z=i,Tk(i),i=i.sibling;Z=s,ud=l,$t=u}j_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):j_(t)}}function j_(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Hf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&f_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}f_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Tc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}$t||e.flags&512&&pv(e)}catch(f){Ze(e,e.return,f)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function R_(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function I_(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hf(4,e)}catch(c){Ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ze(e,s,c)}}var i=e.return;try{pv(e)}catch(c){Ze(e,i,c)}break;case 5:var o=e.return;try{pv(e)}catch(c){Ze(e,o,c)}}}catch(c){Ze(e,e.return,c)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var eL=Math.ceil,Rh=Cs.ReactCurrentDispatcher,Bx=Cs.ReactCurrentOwner,On=Cs.ReactCurrentBatchConfig,Ce=0,wt=null,ot=null,jt=0,vn=0,na=ki(0),ft=0,$c=null,vo=0,Gf=0,zx=0,lc=null,tn=null,Wx=0,Ba=1/0,ts=null,Ih=!1,yv=null,ii=null,dd=!1,Xs=null,Ph=0,cc=0,xv=null,Wd=-1,Hd=0;function Kt(){return Ce&6?rt():Wd!==-1?Wd:Wd=rt()}function oi(t){return t.mode&1?Ce&2&&jt!==0?jt&-jt:L4.transition!==null?(Hd===0&&(Hd=hE()),Hd):(t=je,t!==0||(t=window.event,t=t===void 0?16:xE(t.type)),t):1}function ar(t,e,n,r){if(50<cc)throw cc=0,xv=null,Error(q(185));du(t,n,r),(!(Ce&2)||t!==wt)&&(t===wt&&(!(Ce&2)&&(Gf|=n),ft===4&&Ls(t,jt)),ln(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Ba=rt()+500,Bf&&Ti()))}function ln(t,e){var n=t.callbackNode;LO(t,e);var r=ph(t,t===wt?jt:0);if(r===0)n!==null&&Vb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vb(n),e===1)t.tag===0?O4(P_.bind(null,t)):FE(P_.bind(null,t)),P4(function(){!(Ce&6)&&Ti()}),n=null;else{switch(fE(r)){case 1:n=gx;break;case 4:n=uE;break;case 16:n=mh;break;case 536870912:n=dE;break;default:n=mh}n=Ok(n,jk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jk(t,e){if(Wd=-1,Hd=0,Ce&6)throw Error(q(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var r=ph(t,t===wt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ah(t,r);else{e=r;var s=Ce;Ce|=2;var i=Ik();(wt!==t||jt!==e)&&(ts=null,Ba=rt()+500,so(t,e));do try{rL();break}catch(l){Rk(t,l)}while(!0);jx(),Rh.current=i,Ce=s,ot!==null?e=0:(wt=null,jt=0,e=ft)}if(e!==0){if(e===2&&(s=Gg(t),s!==0&&(r=s,e=wv(t,s))),e===1)throw n=$c,so(t,0),Ls(t,r),ln(t,rt()),n;if(e===6)Ls(t,r);else{if(s=t.current.alternate,!(r&30)&&!tL(s)&&(e=Ah(t,r),e===2&&(i=Gg(t),i!==0&&(r=i,e=wv(t,i))),e===1))throw n=$c,so(t,0),Ls(t,r),ln(t,rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Ui(t,tn,ts);break;case 3:if(Ls(t,r),(r&130023424)===r&&(e=Wx+500-rt(),10<e)){if(ph(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ev(Ui.bind(null,t,tn,ts),e);break}Ui(t,tn,ts);break;case 4:if(Ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eL(r/1960))-r,10<r){t.timeoutHandle=ev(Ui.bind(null,t,tn,ts),r);break}Ui(t,tn,ts);break;case 5:Ui(t,tn,ts);break;default:throw Error(q(329))}}}return ln(t,rt()),t.callbackNode===n?jk.bind(null,t):null}function wv(t,e){var n=lc;return t.current.memoizedState.isDehydrated&&(so(t,e).flags|=256),t=Ah(t,e),t!==2&&(e=tn,tn=n,e!==null&&bv(e)),t}function bv(t){tn===null?tn=t:tn.push.apply(tn,t)}function tL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ls(t,e){for(e&=~zx,e&=~Gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function P_(t){if(Ce&6)throw Error(q(327));ga();var e=ph(t,0);if(!(e&1))return ln(t,rt()),null;var n=Ah(t,e);if(t.tag!==0&&n===2){var r=Gg(t);r!==0&&(e=r,n=wv(t,r))}if(n===1)throw n=$c,so(t,0),Ls(t,e),ln(t,rt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ui(t,tn,ts),ln(t,rt()),null}function Hx(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Ba=rt()+500,Bf&&Ti())}}function yo(t){Xs!==null&&Xs.tag===0&&!(Ce&6)&&ga();var e=Ce;Ce|=1;var n=On.transition,r=je;try{if(On.transition=null,je=1,t)return t()}finally{je=r,On.transition=n,Ce=e,!(Ce&6)&&Ti()}}function Gx(){vn=na.current,Ve(na)}function so(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I4(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Ex(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wh();break;case 3:Va(),Ve(on),Ve(Ut),Mx();break;case 5:Dx(r);break;case 4:Va();break;case 13:Ve(qe);break;case 19:Ve(qe);break;case 10:Rx(r.type._context);break;case 22:case 23:Gx()}n=n.return}if(wt=t,ot=t=ai(t.current,null),jt=vn=e,ft=0,$c=null,zx=Gf=vo=0,tn=lc=null,qi!==null){for(e=0;e<qi.length;e++)if(n=qi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qi=null}return t}function Rk(t,e){do{var n=ot;try{if(jx(),Ud.current=jh,Th){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Th=!1}if(go=0,yt=ct=Ye=null,oc=!1,Oc=0,Bx.current=null,n===null||n.return===null){ft=1,$c=e,ot=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=jt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=x_(o);if(p!==null){p.flags&=-257,w_(p,o,l,i,e),p.mode&1&&y_(i,u,e),e=p,c=u;var w=e.updateQueue;if(w===null){var g=new Set;g.add(c),e.updateQueue=g}else w.add(c);break e}else{if(!(e&1)){y_(i,u,e),qx();break e}c=Error(q(426))}}else if(We&&l.mode&1){var y=x_(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),w_(y,o,l,i,e),kx(Ua(c,l));break e}}i=c=Ua(c,l),ft!==4&&(ft=2),lc===null?lc=[i]:lc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=fk(i,c,e);h_(i,x);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ii===null||!ii.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=mk(i,l,e);h_(i,N);break e}}i=i.return}while(i!==null)}Ak(n)}catch(_){e=_,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Ik(){var t=Rh.current;return Rh.current=jh,t===null?jh:t}function qx(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(vo&268435455)&&!(Gf&268435455)||Ls(wt,jt)}function Ah(t,e){var n=Ce;Ce|=2;var r=Ik();(wt!==t||jt!==e)&&(ts=null,so(t,e));do try{nL();break}catch(s){Rk(t,s)}while(!0);if(jx(),Ce=n,Rh.current=r,ot!==null)throw Error(q(261));return wt=null,jt=0,ft}function nL(){for(;ot!==null;)Pk(ot)}function rL(){for(;ot!==null&&!TO();)Pk(ot)}function Pk(t){var e=Mk(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?Ak(t):ot=e,Bx.current=null}function Ak(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q4(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ot=null;return}}else if(n=Y4(n,e,vn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ft===0&&(ft=5)}function Ui(t,e,n){var r=je,s=On.transition;try{On.transition=null,je=1,sL(t,e,n,r)}finally{On.transition=s,je=r}return null}function sL(t,e,n,r){do ga();while(Xs!==null);if(Ce&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(FO(t,i),t===wt&&(ot=wt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dd||(dd=!0,Ok(mh,function(){return ga(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var o=je;je=1;var l=Ce;Ce|=4,Bx.current=null,J4(t,n),kk(n,t),N4(Jg),gh=!!Xg,Jg=Xg=null,t.current=n,Z4(n),jO(),Ce=l,je=o,On.transition=i}else t.current=n;if(dd&&(dd=!1,Xs=t,Ph=s),i=t.pendingLanes,i===0&&(ii=null),PO(n.stateNode),ln(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ih)throw Ih=!1,t=yv,yv=null,t;return Ph&1&&t.tag!==0&&ga(),i=t.pendingLanes,i&1?t===xv?cc++:(cc=0,xv=t):cc=0,Ti(),null}function ga(){if(Xs!==null){var t=fE(Ph),e=On.transition,n=je;try{if(On.transition=null,je=16>t?16:t,Xs===null)var r=!1;else{if(t=Xs,Xs=null,Ph=0,Ce&6)throw Error(q(331));var s=Ce;for(Ce|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:ac(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,p=d.return;if(Nk(d),d===u){Z=null;break}if(f!==null){f.return=p,Z=f;break}Z=p}}}var w=i.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Z=x;break e}Z=i.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Z=b;else e:for(o=v;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hf(9,l)}}catch(_){Ze(l,l.return,_)}if(l===o){Z=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Z=N;break e}Z=l.return}}if(Ce=s,Ti(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Lf,t)}catch{}r=!0}return r}finally{je=n,On.transition=e}}return!1}function A_(t,e,n){e=Ua(n,e),e=fk(t,e,1),t=si(t,e,1),e=Kt(),t!==null&&(du(t,1,e),ln(t,e))}function Ze(t,e,n){if(t.tag===3)A_(t,t,n);else for(;e!==null;){if(e.tag===3){A_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ii===null||!ii.has(r))){t=Ua(n,t),t=mk(e,t,1),e=si(e,t,1),t=Kt(),e!==null&&(du(e,1,t),ln(e,t));break}}e=e.return}}function iL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(jt&n)===n&&(ft===4||ft===3&&(jt&130023424)===jt&&500>rt()-Wx?so(t,0):zx|=n),ln(t,e)}function Dk(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=Kt();t=fs(t,e),t!==null&&(du(t,e,n),ln(t,n))}function oL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Dk(t,n)}function aL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Dk(t,n)}var Mk;Mk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,K4(t,e,n);nn=!!(t.flags&131072)}else nn=!1,We&&e.flags&1048576&&$E(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zd(t,e),t=e.pendingProps;var s=La(e,Ut.current);pa(e,n),s=Lx(null,e,r,t,s,n);var i=Fx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(i=!0,bh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Px(e),s.updater=Wf,e.stateNode=s,s._reactInternals=e,av(e,r,t,n),e=uv(null,e,r,!0,i,n)):(e.tag=0,We&&i&&Sx(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(zd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cL(r),t=Yn(r,t),s){case 0:e=cv(null,e,r,t,n);break e;case 1:e=C_(null,e,r,t,n);break e;case 11:e=b_(null,e,r,t,n);break e;case 14:e=__(null,e,r,Yn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),cv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),C_(t,e,r,s,n);case 3:e:{if(yk(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,HE(t,e),Eh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ua(Error(q(423)),e),e=N_(t,e,r,n,s);break e}else if(r!==s){s=Ua(Error(q(424)),e),e=N_(t,e,r,n,s);break e}else for(xn=ri(e.stateNode.containerInfo.firstChild),wn=e,We=!0,tr=null,n=zE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fa(),r===s){e=ms(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return GE(e),t===null&&sv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zg(r,s)?o=null:i!==null&&Zg(r,i)&&(e.flags|=32),vk(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&sv(e),null;case 13:return xk(t,e,n);case 4:return Ax(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$a(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),b_(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le(Nh,r._currentValue),r._currentValue=o,i!==null)if(cr(i.value,o)){if(i.children===s.children&&!on.current){e=ms(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=cs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),iv(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),iv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,pa(e,n),s=Fn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=Yn(r,e.pendingProps),s=Yn(r.type,s),__(t,e,r,s,n);case 15:return pk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),zd(t,e),e.tag=1,an(r)?(t=!0,bh(e)):t=!1,pa(e,n),hk(e,r,s),av(e,r,s,n),uv(null,e,r,!0,t,n);case 19:return wk(t,e,n);case 22:return gk(t,e,n)}throw Error(q(156,e.tag))};function Ok(t,e){return cE(t,e)}function lL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,e,n,r){return new lL(t,e,n,r)}function Kx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cL(t){if(typeof t=="function")return Kx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fx)return 11;if(t===mx)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=An(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Kx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Go:return io(n.children,s,i,e);case hx:o=8,s|=8;break;case Ig:return t=An(12,n,e,s|2),t.elementType=Ig,t.lanes=i,t;case Pg:return t=An(13,n,e,s),t.elementType=Pg,t.lanes=i,t;case Ag:return t=An(19,n,e,s),t.elementType=Ag,t.lanes=i,t;case GS:return qf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case WS:o=10;break e;case HS:o=9;break e;case fx:o=11;break e;case mx:o=14;break e;case Ds:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=An(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function io(t,e,n,r){return t=An(7,t,r,e),t.lanes=n,t}function qf(t,e,n,r){return t=An(22,t,r,e),t.elementType=GS,t.lanes=n,t.stateNode={isHidden:!1},t}function Ip(t,e,n){return t=An(6,t,null,e),t.lanes=n,t}function Pp(t,e,n){return e=An(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uL(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hp(0),this.expirationTimes=hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yx(t,e,n,r,s,i,o,l,c){return t=new uL(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=An(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Px(i),t}function dL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lk(t){if(!t)return gi;t=t._reactInternals;e:{if(Ao(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(an(n))return LE(t,n,e)}return e}function Fk(t,e,n,r,s,i,o,l,c){return t=Yx(n,r,!0,t,s,i,o,l,c),t.context=Lk(null),n=t.current,r=Kt(),s=oi(n),i=cs(r,s),i.callback=e??null,si(n,i,s),t.current.lanes=s,du(t,s,r),ln(t,r),t}function Kf(t,e,n,r){var s=e.current,i=Kt(),o=oi(s);return n=Lk(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(s,e,o),t!==null&&(ar(t,s,o,i),Vd(t,s,o)),o}function Dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qx(t,e){D_(t,e),(t=t.alternate)&&D_(t,e)}function hL(){return null}var $k=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xx(t){this._internalRoot=t}Yf.prototype.render=Xx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Kf(t,e,null,null)};Yf.prototype.unmount=Xx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yo(function(){Kf(null,t,null,null)}),e[hs]=null}};function Yf(t){this._internalRoot=t}Yf.prototype.unstable_scheduleHydration=function(t){if(t){var e=gE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Os.length&&e!==0&&e<Os[n].priority;n++);Os.splice(n,0,t),n===0&&yE(t)}};function Jx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M_(){}function fL(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Dh(o);i.call(u)}}var o=Fk(e,r,t,0,null,!1,!1,"",M_);return t._reactRootContainer=o,t[hs]=o.current,Ic(t.nodeType===8?t.parentNode:t),yo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Dh(c);l.call(u)}}var c=Yx(t,0,!1,null,null,!1,!1,"",M_);return t._reactRootContainer=c,t[hs]=c.current,Ic(t.nodeType===8?t.parentNode:t),yo(function(){Kf(e,c,n,r)}),c}function Xf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Dh(o);l.call(c)}}Kf(e,o,t,s)}else o=fL(n,e,t,s,r);return Dh(o)}mE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yl(e.pendingLanes);n!==0&&(vx(e,n|1),ln(e,rt()),!(Ce&6)&&(Ba=rt()+500,Ti()))}break;case 13:yo(function(){var r=fs(t,1);if(r!==null){var s=Kt();ar(r,t,1,s)}}),Qx(t,1)}};yx=function(t){if(t.tag===13){var e=fs(t,134217728);if(e!==null){var n=Kt();ar(e,t,134217728,n)}Qx(t,134217728)}};pE=function(t){if(t.tag===13){var e=oi(t),n=fs(t,e);if(n!==null){var r=Kt();ar(n,t,e,r)}Qx(t,e)}};gE=function(){return je};vE=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};zg=function(t,e,n){switch(e){case"input":if(Og(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Uf(r);if(!s)throw Error(q(90));KS(r),Og(r,s)}}}break;case"textarea":QS(t,n);break;case"select":e=n.value,e!=null&&da(t,!!n.multiple,e,!1)}};rE=Hx;sE=yo;var mL={usingClientEntryPoint:!1,Events:[fu,Qo,Uf,tE,nE,Hx]},Ll={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pL={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||hL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Lf=hd.inject(pL),Ir=hd}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mL;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jx(e))throw Error(q(200));return dL(t,e,null,n)};Cn.createRoot=function(t,e){if(!Jx(t))throw Error(q(299));var n=!1,r="",s=$k;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yx(t,1,!1,null,null,n,!1,r,s),t[hs]=e.current,Ic(t.nodeType===8?t.parentNode:t),new Xx(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=aE(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return yo(t)};Cn.hydrate=function(t,e,n){if(!Qf(e))throw Error(q(200));return Xf(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Jx(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$k;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Fk(e,null,t,1,n??null,s,!1,i,o),t[hs]=e.current,Ic(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Yf(e)};Cn.render=function(t,e,n){if(!Qf(e))throw Error(q(200));return Xf(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!Qf(t))throw Error(q(40));return t._reactRootContainer?(yo(function(){Xf(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};Cn.unstable_batchedUpdates=Hx;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qf(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Xf(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Vk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vk)}catch(t){console.error(t)}}Vk(),VS.exports=Cn;var Do=VS.exports;const Zx=TS(Do);var Uk,O_=Do;Uk=O_.createRoot,O_.hydrateRoot;const gL=1,vL=1e6;let Ap=0;function yL(){return Ap=(Ap+1)%Number.MAX_SAFE_INTEGER,Ap.toString()}const Dp=new Map,L_=t=>{if(Dp.has(t))return;const e=setTimeout(()=>{Dp.delete(t),uc({type:"REMOVE_TOAST",toastId:t})},vL);Dp.set(t,e)},xL=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,gL)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?L_(n):t.toasts.forEach(r=>{L_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},qd=[];let Kd={toasts:[]};function uc(t){Kd=xL(Kd,t),qd.forEach(e=>{e(Kd)})}function wL({...t}){const e=yL(),n=s=>uc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uc({type:"DISMISS_TOAST",toastId:e});return uc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function bt(){const[t,e]=m.useState(Kd);return m.useEffect(()=>(qd.push(e),()=>{const n=qd.indexOf(e);n>-1&&qd.splice(n,1)}),[t]),{...t,toast:wL,dismiss:n=>uc({type:"DISMISS_TOAST",toastId:n})}}function ee(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function F_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Bk(...t){return e=>{let n=!1;const r=t.map(s=>{const i=F_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():F_(t[s],null)}}}}function ge(...t){return m.useCallback(Bk(...t),t)}function bL(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function un(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=h=>{var x;const{scope:f,children:p,...w}=h,g=((x=f==null?void 0:f[t])==null?void 0:x[c])||l,y=m.useMemo(()=>w,Object.values(w));return a.jsx(g.Provider,{value:y,children:p})};u.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,w=m.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,_L(s,...e)]}function _L(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function za(t){const e=NL(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(EL);if(c){const u=c.props.children,d=l.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var CL=za("Slot");function NL(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=TL(s),l=kL(i,s.props);return s.type!==m.Fragment&&(l.ref=r?Bk(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zk=Symbol("radix.slottable");function SL(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=zk,e}function EL(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zk}function kL(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function TL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Jf(t){const e=t+"CollectionProvider",[n,r]=un(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:x}=g,v=H.useRef(null),b=H.useRef(new Map).current;return a.jsx(s,{scope:y,itemMap:b,collectionRef:v,children:x})};o.displayName=e;const l=t+"CollectionSlot",c=za(l),u=H.forwardRef((g,y)=>{const{scope:x,children:v}=g,b=i(l,x),N=ge(y,b.collectionRef);return a.jsx(c,{ref:N,children:v})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=za(d),p=H.forwardRef((g,y)=>{const{scope:x,children:v,...b}=g,N=H.useRef(null),_=ge(y,N),C=i(d,x);return H.useEffect(()=>(C.itemMap.set(N,{ref:N,...b}),()=>void C.itemMap.delete(N))),a.jsx(f,{[h]:"",ref:_,children:v})});p.displayName=d;function w(g){const y=i(t+"CollectionConsumer",g);return H.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((C,S)=>b.indexOf(C.ref.current)-b.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},w,r]}var jL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ne=jL.reduce((t,e)=>{const n=za(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Wk(t,e){t&&Do.flushSync(()=>t.dispatchEvent(e))}function dt(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function RL(t,e=globalThis==null?void 0:globalThis.document){const n=dt(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var IL="DismissableLayer",_v="dismissableLayer.update",PL="dismissableLayer.pointerDownOutside",AL="dismissableLayer.focusOutside",$_,Hk=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(Hk),[d,h]=m.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),w=ge(e,S=>h(S)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(y),v=d?g.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,N=v>=x,_=ML(S=>{const E=S.target,k=[...u.branches].some(T=>T.contains(E));!N||k||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},f),C=OL(S=>{const E=S.target;[...u.branches].some(T=>T.contains(E))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},f);return RL(S=>{v===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},f),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),V_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$_)}},[d,f,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),V_())},[d,u]),m.useEffect(()=>{const S=()=>p({});return document.addEventListener(_v,S),()=>document.removeEventListener(_v,S)},[]),a.jsx(ne.div,{...c,ref:w,style:{pointerEvents:b?N?"auto":"none":void 0,...t.style},onFocusCapture:ee(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ee(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ee(t.onPointerDownCapture,_.onPointerDownCapture)})});pu.displayName=IL;var DL="DismissableLayerBranch",Gk=m.forwardRef((t,e)=>{const n=m.useContext(Hk),r=m.useRef(null),s=ge(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ne.div,{...t,ref:s})});Gk.displayName=DL;function ML(t,e=globalThis==null?void 0:globalThis.document){const n=dt(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){qk(PL,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function OL(t,e=globalThis==null?void 0:globalThis.document){const n=dt(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&qk(AL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function V_(){const t=new CustomEvent(_v);document.dispatchEvent(t)}function qk(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Wk(s,i):s.dispatchEvent(i)}var LL=pu,FL=Gk,pt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},$L="Portal",Zf=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);pt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Zx.createPortal(a.jsx(ne.div,{...r,ref:e}),o):null});Zf.displayName=$L;function VL(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Sn=t=>{const{present:e,children:n}=t,r=UL(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=ge(r.ref,BL(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Sn.displayName="Presence";function UL(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=VL(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=fd(r.current);i.current=l==="mounted"?u:"none"},[l]),pt(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,p=fd(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),pt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=fd(r.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=fd(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function fd(t){return(t==null?void 0:t.animationName)||"none"}function BL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zL=lx[" useInsertionEffect ".trim().toString()]||pt;function ur({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=WL({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=m.useRef(t!==void 0);m.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=m.useCallback(d=>{var h;if(l){const f=HL(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,t,i,o]);return[c,u]}function WL({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return zL(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function HL(t){return typeof t=="function"}var Kk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GL="VisuallyHidden",em=m.forwardRef((t,e)=>a.jsx(ne.span,{...t,ref:e,style:{...Kk,...t.style}}));em.displayName=GL;var qL=em,e0="ToastProvider",[t0,KL,YL]=Jf("Toast"),[Yk,$Z]=un("Toast",[YL]),[QL,tm]=Yk(e0),Qk=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${e0}\`. Expected non-empty \`string\`.`),a.jsx(t0.Provider,{scope:e,children:a.jsx(QL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Qk.displayName=e0;var Xk="ToastViewport",XL=["F8"],Cv="toast.viewportPause",Nv="toast.viewportResume",Jk=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=XL,label:s="Notifications ({hotkey})",...i}=t,o=tm(Xk,n),l=KL(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=ge(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;m.useEffect(()=>{const y=x=>{var b;r.length!==0&&r.every(N=>x[N]||x.code===N)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),m.useEffect(()=>{const y=c.current,x=h.current;if(w&&y&&x){const v=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Cv);x.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Nv);x.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!y.contains(C.relatedTarget)&&b()},_=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",v),y.addEventListener("focusout",N),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",_),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",N),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[w,o.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:y})=>{const v=l().map(b=>{const N=b.ref.current,_=[N,...u5(N)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const y=h.current;if(y){const x=v=>{var _,C,S;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const E=document.activeElement,k=v.shiftKey;if(v.target===y&&k){(_=u.current)==null||_.focus();return}const I=g({tabbingDirection:k?"backwards":"forwards"}),F=I.findIndex(P=>P===E);Mp(I.slice(F+1))?v.preventDefault():k?(C=u.current)==null||C.focus():(S=d.current)==null||S.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,g]),a.jsxs(FL,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(Sv,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});Mp(y)}}),a.jsx(t0.Slot,{scope:n,children:a.jsx(ne.ol,{tabIndex:-1,...i,ref:f})}),w&&a.jsx(Sv,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});Mp(y)}})]})});Jk.displayName=Xk;var Zk="ToastFocusProxy",Sv=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=tm(Zk,n);return a.jsx(em,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Sv.displayName=Zk;var gu="Toast",JL="toast.swipeStart",ZL="toast.swipeMove",e5="toast.swipeCancel",t5="toast.swipeEnd",eT=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=ur({prop:r,defaultProp:s??!0,onChange:i,caller:gu});return a.jsx(Sn,{present:n||l,children:a.jsx(s5,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:dt(t.onPause),onResume:dt(t.onResume),onSwipeStart:ee(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ee(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ee(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ee(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});eT.displayName=gu;var[n5,r5]=Yk(gu,{onClose(){}}),s5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...w}=t,g=tm(gu,n),[y,x]=m.useState(null),v=ge(e,P=>x(P)),b=m.useRef(null),N=m.useRef(null),_=s||g.duration,C=m.useRef(0),S=m.useRef(_),E=m.useRef(0),{onToastAdd:k,onToastRemove:T}=g,R=dt(()=>{var V;(y==null?void 0:y.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),o()}),I=m.useCallback(P=>{!P||P===1/0||(window.clearTimeout(E.current),C.current=new Date().getTime(),E.current=window.setTimeout(R,P))},[R]);m.useEffect(()=>{const P=g.viewport;if(P){const V=()=>{I(S.current),u==null||u()},$=()=>{const z=new Date().getTime()-C.current;S.current=S.current-z,window.clearTimeout(E.current),c==null||c()};return P.addEventListener(Cv,$),P.addEventListener(Nv,V),()=>{P.removeEventListener(Cv,$),P.removeEventListener(Nv,V)}}},[g.viewport,_,c,u,I]),m.useEffect(()=>{i&&!g.isClosePausedRef.current&&I(_)},[i,_,g.isClosePausedRef,I]),m.useEffect(()=>(k(),()=>T()),[k,T]);const F=m.useMemo(()=>y?aT(y):null,[y]);return g.viewport?a.jsxs(a.Fragment,{children:[F&&a.jsx(i5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),a.jsx(n5,{scope:n,onClose:R,children:Do.createPortal(a.jsx(t0.ItemSlot,{scope:n,children:a.jsx(LL,{asChild:!0,onEscapeKeyDown:ee(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ee(t.onKeyDown,P=>{P.key==="Escape"&&(l==null||l(P.nativeEvent),P.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:ee(t.onPointerDown,P=>{P.button===0&&(b.current={x:P.clientX,y:P.clientY})}),onPointerMove:ee(t.onPointerMove,P=>{if(!b.current)return;const V=P.clientX-b.current.x,$=P.clientY-b.current.y,z=!!N.current,A=["left","right"].includes(g.swipeDirection),M=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,j=A?M(0,V):0,W=A?0:M(0,$),K=P.pointerType==="touch"?10:2,re={x:j,y:W},ae={originalEvent:P,delta:re};z?(N.current=re,md(ZL,h,ae,{discrete:!1})):U_(re,g.swipeDirection,K)?(N.current=re,md(JL,d,ae,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(V)>K||Math.abs($)>K)&&(b.current=null)}),onPointerUp:ee(t.onPointerUp,P=>{const V=N.current,$=P.target;if($.hasPointerCapture(P.pointerId)&&$.releasePointerCapture(P.pointerId),N.current=null,b.current=null,V){const z=P.currentTarget,A={originalEvent:P,delta:V};U_(V,g.swipeDirection,g.swipeThreshold)?md(t5,p,A,{discrete:!0}):md(e5,f,A,{discrete:!0}),z.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),i5=t=>{const{__scopeToast:e,children:n,...r}=t,s=tm(gu,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return l5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Zf,{asChild:!0,children:a.jsx(em,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},o5="ToastTitle",tT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ne.div,{...r,ref:e})});tT.displayName=o5;var a5="ToastDescription",nT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ne.div,{...r,ref:e})});nT.displayName=a5;var rT="ToastAction",sT=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(oT,{altText:n,asChild:!0,children:a.jsx(n0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rT}\`. Expected non-empty \`string\`.`),null)});sT.displayName=rT;var iT="ToastClose",n0=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=r5(iT,n);return a.jsx(oT,{asChild:!0,children:a.jsx(ne.button,{type:"button",...r,ref:e,onClick:ee(t.onClick,s.onClose)})})});n0.displayName=iT;var oT=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function aT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),c5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...aT(r))}}),e}function md(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Wk(s,i):s.dispatchEvent(i)}var U_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function l5(t=()=>{}){const e=dt(t);pt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function c5(t){return t.nodeType===t.ELEMENT_NODE}function u5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Mp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var d5=Qk,lT=Jk,cT=eT,uT=tT,dT=nT,hT=sT,fT=n0;function mT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=mT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=mT(t))&&(r&&(r+=" "),r+=e);return r}const B_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,z_=pT,nm=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return z_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=B_(d)||B_(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(w=>{let[g,y]=w;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,f]:u},[]);return z_(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...f5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gT("lucide",s),...l},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(m5,{ref:i,iconNode:e,className:gT(`lucide-${h5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=de("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=de("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=de("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=de("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=de("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=de("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=de("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=de("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=de("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=de("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=de("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=de("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=de("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=de("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=de("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=de("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=de("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),i0="-",E5=t=>{const e=T5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(i0);return l[0]===""&&l.length!==1&&l.shift(),xT(l,e)||k5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},xT=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?xT(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(i0);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},K_=/^\[(.+)\]$/,k5=t=>{if(K_.test(t)){const e=K_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},T5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return R5(Object.entries(t.classGroups),n).forEach(([i,o])=>{Rv(o,r,i,e)}),r},Rv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Y_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(j5(s)){Rv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Rv(o,Y_(e,i),n,r)})})},Y_=(t,e)=>{let n=t;return e.split(i0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},j5=t=>t.isThemeGetter,R5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,I5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},wT="!",P5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===s&&(r||l.slice(y,y+i)===e)){c.push(l.slice(d,y)),d=y+i;continue}if(x==="/"){h=y;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?l:l.substring(d),p=f.startsWith(wT),w=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},A5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},D5=t=>({cache:I5(t.cacheSize),parseClassName:P5(t),...E5(t)}),M5=/\s+/,O5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(M5);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let w=!!p,g=r(w?f.substring(0,p):f);if(!g){if(!w){l=u+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=u+(l.length>0?" "+l:l);continue}w=!1}const y=A5(d).join(":"),x=h?y+wT:y,v=x+g;if(i.includes(v))continue;i.push(v);const b=s(g,w);for(let N=0;N<b.length;++N){const _=b[N];i.push(x+_)}l=u+(l.length>0?" "+l:l)}return l};function L5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=bT(e))&&(r&&(r+=" "),r+=n);return r}const bT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=bT(t[r]))&&(n&&(n+=" "),n+=e);return n};function F5(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=D5(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=O5(c,n);return s(c,d),d}return function(){return i(L5.apply(null,arguments))}}const Fe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_T=/^\[(?:([a-z-]+):)?(.+)\]$/i,$5=/^\d+\/\d+$/,V5=new Set(["px","full","screen"]),U5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,B5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,z5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,W5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jr=t=>ya(t)||V5.has(t)||$5.test(t),Ts=t=>ll(t,"length",Z5),ya=t=>!!t&&!Number.isNaN(Number(t)),Lp=t=>ll(t,"number",ya),Fl=t=>!!t&&Number.isInteger(Number(t)),G5=t=>t.endsWith("%")&&ya(t.slice(0,-1)),he=t=>_T.test(t),js=t=>U5.test(t),q5=new Set(["length","size","percentage"]),K5=t=>ll(t,q5,CT),Y5=t=>ll(t,"position",CT),Q5=new Set(["image","url"]),X5=t=>ll(t,Q5,t3),J5=t=>ll(t,"",e3),$l=()=>!0,ll=(t,e,n)=>{const r=_T.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Z5=t=>B5.test(t)&&!z5.test(t),CT=()=>!1,e3=t=>W5.test(t),t3=t=>H5.test(t),n3=()=>{const t=Fe("colors"),e=Fe("spacing"),n=Fe("blur"),r=Fe("brightness"),s=Fe("borderColor"),i=Fe("borderRadius"),o=Fe("borderSpacing"),l=Fe("borderWidth"),c=Fe("contrast"),u=Fe("grayscale"),d=Fe("hueRotate"),h=Fe("invert"),f=Fe("gap"),p=Fe("gradientColorStops"),w=Fe("gradientColorStopPositions"),g=Fe("inset"),y=Fe("margin"),x=Fe("opacity"),v=Fe("padding"),b=Fe("saturate"),N=Fe("scale"),_=Fe("sepia"),C=Fe("skew"),S=Fe("space"),E=Fe("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",he,e],I=()=>[he,e],F=()=>["",Jr,Ts],P=()=>["auto",ya,he],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",he],j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ya,he];return{cacheSize:500,separator:":",theme:{colors:[$l],spacing:[Jr,Ts],blur:["none","",js,he],brightness:W(),borderColor:[t],borderRadius:["none","","full",js,he],borderSpacing:I(),borderWidth:F(),contrast:W(),grayscale:M(),hueRotate:W(),invert:M(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[G5,Ts],inset:R(),margin:R(),opacity:W(),padding:I(),saturate:W(),scale:W(),sepia:M(),skew:W(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",he]}],container:["container"],columns:[{columns:[js]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),he]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fl,he]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",he]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Fl,he]}],"grid-cols":[{"grid-cols":[$l]}],"col-start-end":[{col:["auto",{span:["full",Fl,he]},he]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[$l]}],"row-start-end":[{row:["auto",{span:[Fl,he]},he]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",he]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",he]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",he,e]}],"min-w":[{"min-w":[he,e,"min","max","fit"]}],"max-w":[{"max-w":[he,e,"none","full","min","max","fit","prose",{screen:[js]},js]}],h:[{h:[he,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[he,e,"auto","min","max","fit"]}],"font-size":[{text:["base",js,Ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lp]}],"font-family":[{font:[$l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",he]}],"line-clamp":[{"line-clamp":["none",ya,Lp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jr,he]}],"list-image":[{"list-image":["none",he]}],"list-style-type":[{list:["none","disc","decimal",he]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jr,Ts]}],"underline-offset":[{"underline-offset":["auto",Jr,he]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),Y5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",K5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},X5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Jr,he]}],"outline-w":[{outline:[Jr,Ts]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Jr,Ts]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",js,J5]}],"shadow-color":[{shadow:[$l]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",js,he]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",he]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",he]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",he]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Fl,he]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",he]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jr,Ts,Lp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},r3=F5(n3);function L(...t){return r3(pT(t))}const s3=d5,NT=m.forwardRef(({className:t,...e},n)=>a.jsx(lT,{ref:n,className:L("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));NT.displayName=lT.displayName;const i3=nm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ST=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(cT,{ref:r,className:L(i3({variant:e}),t),...n}));ST.displayName=cT.displayName;const o3=m.forwardRef(({className:t,...e},n)=>a.jsx(hT,{ref:n,className:L("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));o3.displayName=hT.displayName;const ET=m.forwardRef(({className:t,...e},n)=>a.jsx(fT,{ref:n,className:L("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(jr,{className:"h-4 w-4"})}));ET.displayName=fT.displayName;const kT=m.forwardRef(({className:t,...e},n)=>a.jsx(uT,{ref:n,className:L("text-sm font-semibold",t),...e}));kT.displayName=uT.displayName;const TT=m.forwardRef(({className:t,...e},n)=>a.jsx(dT,{ref:n,className:L("text-sm opacity-90",t),...e}));TT.displayName=dT.displayName;function a3(){const{toasts:t}=bt();return a.jsxs(s3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(ST,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(kT,{children:n}),r&&a.jsx(TT,{children:r})]}),s,a.jsx(ET,{})]},e)}),a.jsx(NT,{})]})}var Q_=["light","dark"],l3="(prefers-color-scheme: dark)",c3=m.createContext(void 0),u3={setTheme:t=>{},themes:[]},d3=()=>{var t;return(t=m.useContext(c3))!=null?t:u3};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Q_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(w,g=!1,y=!0)=>{let x=o?o[w]:w,v=g?w+"|| ''":`'${x}'`,b="";return s&&y&&!g&&Q_.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),n==="class"?g||x?b+=`c.add(${v})`:b+="null":x&&(b+=`d[s](n,${v})`),b},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${l3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var h3=t=>{switch(t){case"success":return p3;case"info":return v3;case"warning":return g3;case"error":return y3;default:return null}},f3=Array(12).fill(0),m3=({visible:t,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},H.createElement("div",{className:"sonner-spinner"},f3.map((n,r)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),p3=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g3=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),v3=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),y3=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),x3=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),w3=()=>{let[t,e]=H.useState(document.hidden);return H.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Iv=1,b3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Iv++,i=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],H.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(C3(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Iv++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},en=new b3,_3=(t,e)=>{let n=(e==null?void 0:e.id)||Iv++;return en.addToast({title:t,...e,id:n}),n},C3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",N3=_3,S3=()=>en.toasts,E3=()=>en.getActiveToasts(),st=Object.assign(N3,{success:en.success,info:en.info,warning:en.warning,error:en.error,custom:en.custom,message:en.message,promise:en.promise,dismiss:en.dismiss,loading:en.loading},{getHistory:S3,getToasts:E3});function k3(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}k3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function pd(t){return t.label!==void 0}var T3=3,j3="32px",R3="16px",X_=4e3,I3=356,P3=14,A3=20,D3=200;function Hn(...t){return t.filter(Boolean).join(" ")}function M3(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var O3=t=>{var e,n,r,s,i,o,l,c,u,d,h;let{invert:f,toast:p,unstyled:w,interacting:g,setHeights:y,visibleToasts:x,heights:v,index:b,toasts:N,expanded:_,removeToast:C,defaultRichColors:S,closeButton:E,style:k,cancelButtonStyle:T,actionButtonStyle:R,className:I="",descriptionClassName:F="",duration:P,position:V,gap:$,loadingIcon:z,expandByDefault:A,classNames:M,icons:j,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:K}=t,[re,ae]=H.useState(null),[Te,Re]=H.useState(null),[Q,_e]=H.useState(!1),[Ae,be]=H.useState(!1),[G,fe]=H.useState(!1),[Ue,Pt]=H.useState(!1),[Kr,yr]=H.useState(!1),[En,Ss]=H.useState(0),[Yr,Uu]=H.useState(0),Mi=H.useRef(p.duration||P||X_),Sl=H.useRef(null),zn=H.useRef(null),tp=b===0,vb=b+1<=x,fn=p.type,Oi=p.dismissible!==!1,yb=p.className||"",xb=p.descriptionClassName||"",Lo=H.useMemo(()=>v.findIndex(ie=>ie.toastId===p.id)||0,[v,p.id]),Bu=H.useMemo(()=>{var ie;return(ie=p.closeButton)!=null?ie:E},[p.closeButton,E]),Li=H.useMemo(()=>p.duration||P||X_,[p.duration,P]),Fo=H.useRef(0),Qr=H.useRef(0),zu=H.useRef(0),Es=H.useRef(null),[Wu,El]=V.split("-"),Hu=H.useMemo(()=>v.reduce((ie,Ee,De)=>De>=Lo?ie:ie+Ee.height,0),[v,Lo]),Gu=w3(),np=p.invert||f,kl=fn==="loading";Qr.current=H.useMemo(()=>Lo*$+Hu,[Lo,Hu]),H.useEffect(()=>{Mi.current=Li},[Li]),H.useEffect(()=>{_e(!0)},[]),H.useEffect(()=>{let ie=zn.current;if(ie){let Ee=ie.getBoundingClientRect().height;return Uu(Ee),y(De=>[{toastId:p.id,height:Ee,position:p.position},...De]),()=>y(De=>De.filter(mn=>mn.toastId!==p.id))}},[y,p.id]),H.useLayoutEffect(()=>{if(!Q)return;let ie=zn.current,Ee=ie.style.height;ie.style.height="auto";let De=ie.getBoundingClientRect().height;ie.style.height=Ee,Uu(De),y(mn=>mn.find(Zt=>Zt.toastId===p.id)?mn.map(Zt=>Zt.toastId===p.id?{...Zt,height:De}:Zt):[{toastId:p.id,height:De,position:p.position},...mn])},[Q,p.title,p.description,y,p.id]);let xr=H.useCallback(()=>{be(!0),Ss(Qr.current),y(ie=>ie.filter(Ee=>Ee.toastId!==p.id)),setTimeout(()=>{C(p)},D3)},[p,C,y,Qr]);H.useEffect(()=>{if(p.promise&&fn==="loading"||p.duration===1/0||p.type==="loading")return;let ie;return _||g||K&&Gu?(()=>{if(zu.current<Fo.current){let Ee=new Date().getTime()-Fo.current;Mi.current=Mi.current-Ee}zu.current=new Date().getTime()})():Mi.current!==1/0&&(Fo.current=new Date().getTime(),ie=setTimeout(()=>{var Ee;(Ee=p.onAutoClose)==null||Ee.call(p,p),xr()},Mi.current)),()=>clearTimeout(ie)},[_,g,p,fn,K,Gu,xr]),H.useEffect(()=>{p.delete&&xr()},[xr,p.delete]);function qu(){var ie,Ee,De;return j!=null&&j.loading?H.createElement("div",{className:Hn(M==null?void 0:M.loader,(ie=p==null?void 0:p.classNames)==null?void 0:ie.loader,"sonner-loader"),"data-visible":fn==="loading"},j.loading):z?H.createElement("div",{className:Hn(M==null?void 0:M.loader,(Ee=p==null?void 0:p.classNames)==null?void 0:Ee.loader,"sonner-loader"),"data-visible":fn==="loading"},z):H.createElement(m3,{className:Hn(M==null?void 0:M.loader,(De=p==null?void 0:p.classNames)==null?void 0:De.loader),visible:fn==="loading"})}return H.createElement("li",{tabIndex:0,ref:zn,className:Hn(I,yb,M==null?void 0:M.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[fn],(n=p==null?void 0:p.classNames)==null?void 0:n[fn]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:S,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":Q,"data-promise":!!p.promise,"data-swiped":Kr,"data-removed":Ae,"data-visible":vb,"data-y-position":Wu,"data-x-position":El,"data-index":b,"data-front":tp,"data-swiping":G,"data-dismissible":Oi,"data-type":fn,"data-invert":np,"data-swipe-out":Ue,"data-swipe-direction":Te,"data-expanded":!!(_||A&&Q),style:{"--index":b,"--toasts-before":b,"--z-index":N.length-b,"--offset":`${Ae?En:Qr.current}px`,"--initial-height":A?"auto":`${Yr}px`,...k,...p.style},onDragEnd:()=>{fe(!1),ae(null),Es.current=null},onPointerDown:ie=>{kl||!Oi||(Sl.current=new Date,Ss(Qr.current),ie.target.setPointerCapture(ie.pointerId),ie.target.tagName!=="BUTTON"&&(fe(!0),Es.current={x:ie.clientX,y:ie.clientY}))},onPointerUp:()=>{var ie,Ee,De,mn;if(Ue||!Oi)return;Es.current=null;let Zt=Number(((ie=zn.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),kn=Number(((Ee=zn.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xr=new Date().getTime()-((De=Sl.current)==null?void 0:De.getTime()),pn=re==="x"?Zt:kn,wr=Math.abs(pn)/Xr;if(Math.abs(pn)>=A3||wr>.11){Ss(Qr.current),(mn=p.onDismiss)==null||mn.call(p,p),Re(re==="x"?Zt>0?"right":"left":kn>0?"down":"up"),xr(),Pt(!0),yr(!1);return}fe(!1),ae(null)},onPointerMove:ie=>{var Ee,De,mn,Zt;if(!Es.current||!Oi||((Ee=window.getSelection())==null?void 0:Ee.toString().length)>0)return;let kn=ie.clientY-Es.current.y,Xr=ie.clientX-Es.current.x,pn=(De=t.swipeDirections)!=null?De:M3(V);!re&&(Math.abs(Xr)>1||Math.abs(kn)>1)&&ae(Math.abs(Xr)>Math.abs(kn)?"x":"y");let wr={x:0,y:0};re==="y"?(pn.includes("top")||pn.includes("bottom"))&&(pn.includes("top")&&kn<0||pn.includes("bottom")&&kn>0)&&(wr.y=kn):re==="x"&&(pn.includes("left")||pn.includes("right"))&&(pn.includes("left")&&Xr<0||pn.includes("right")&&Xr>0)&&(wr.x=Xr),(Math.abs(wr.x)>0||Math.abs(wr.y)>0)&&yr(!0),(mn=zn.current)==null||mn.style.setProperty("--swipe-amount-x",`${wr.x}px`),(Zt=zn.current)==null||Zt.style.setProperty("--swipe-amount-y",`${wr.y}px`)}},Bu&&!p.jsx?H.createElement("button",{"aria-label":W,"data-disabled":kl,"data-close-button":!0,onClick:kl||!Oi?()=>{}:()=>{var ie;xr(),(ie=p.onDismiss)==null||ie.call(p,p)},className:Hn(M==null?void 0:M.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=j==null?void 0:j.close)!=null?i:x3):null,p.jsx||m.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:H.createElement(H.Fragment,null,fn||p.icon||p.promise?H.createElement("div",{"data-icon":"",className:Hn(M==null?void 0:M.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||qu():null,p.type!=="loading"?p.icon||(j==null?void 0:j[fn])||h3(fn):null):null,H.createElement("div",{"data-content":"",className:Hn(M==null?void 0:M.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},H.createElement("div",{"data-title":"",className:Hn(M==null?void 0:M.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?H.createElement("div",{"data-description":"",className:Hn(F,xb,M==null?void 0:M.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),m.isValidElement(p.cancel)?p.cancel:p.cancel&&pd(p.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:ie=>{var Ee,De;pd(p.cancel)&&Oi&&((De=(Ee=p.cancel).onClick)==null||De.call(Ee,ie),xr())},className:Hn(M==null?void 0:M.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,m.isValidElement(p.action)?p.action:p.action&&pd(p.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:ie=>{var Ee,De;pd(p.action)&&((De=(Ee=p.action).onClick)==null||De.call(Ee,ie),!ie.defaultPrevented&&xr())},className:Hn(M==null?void 0:M.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function J_(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function L3(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?R3:j3;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var F3=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:w=T3,toastOptions:g,dir:y=J_(),gap:x=P3,loadingIcon:v,icons:b,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:_}=t,[C,S]=H.useState([]),E=H.useMemo(()=>Array.from(new Set([r].concat(C.filter(K=>K.position).map(K=>K.position)))),[C,r]),[k,T]=H.useState([]),[R,I]=H.useState(!1),[F,P]=H.useState(!1),[V,$]=H.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=H.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=H.useRef(null),j=H.useRef(!1),W=H.useCallback(K=>{S(re=>{var ae;return(ae=re.find(Te=>Te.id===K.id))!=null&&ae.delete||en.dismiss(K.id),re.filter(({id:Te})=>Te!==K.id)})},[]);return H.useEffect(()=>en.subscribe(K=>{if(K.dismiss){S(re=>re.map(ae=>ae.id===K.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{Zx.flushSync(()=>{S(re=>{let ae=re.findIndex(Te=>Te.id===K.id);return ae!==-1?[...re.slice(0,ae),{...re[ae],...K},...re.slice(ae+1)]:[K,...re]})})})}),[]),H.useEffect(()=>{if(d!=="system"){$(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:re})=>{$(re?"dark":"light")})}catch{K.addListener(({matches:ae})=>{try{$(ae?"dark":"light")}catch(Te){console.error(Te)}})}},[d]),H.useEffect(()=>{C.length<=1&&I(!1)},[C]),H.useEffect(()=>{let K=re=>{var ae,Te;s.every(Re=>re[Re]||re.code===Re)&&(I(!0),(ae=z.current)==null||ae.focus()),re.code==="Escape"&&(document.activeElement===z.current||(Te=z.current)!=null&&Te.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[s]),H.useEffect(()=>{if(z.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,j.current=!1)}},[z.current]),H.createElement("section",{ref:e,"aria-label":`${N} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((K,re)=>{var ae;let[Te,Re]=K.split("-");return C.length?H.createElement("ol",{key:K,dir:y==="auto"?J_():y,tabIndex:-1,ref:z,className:l,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":Te,"data-lifted":R&&C.length>1&&!i,"data-x-position":Re,style:{"--front-toast-height":`${((ae=k[0])==null?void 0:ae.height)||0}px`,"--width":`${I3}px`,"--gap":`${x}px`,...p,...L3(c,u)},onBlur:Q=>{j.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(j.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||j.current||(j.current=!0,M.current=Q.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{F||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},C.filter(Q=>!Q.position&&re===0||Q.position===K).map((Q,_e)=>{var Ae,be;return H.createElement(O3,{key:Q.id,icons:b,index:_e,toast:Q,defaultRichColors:h,duration:(Ae=g==null?void 0:g.duration)!=null?Ae:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:w,closeButton:(be=g==null?void 0:g.closeButton)!=null?be:o,interacting:F,position:K,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:W,toasts:C.filter(G=>G.position==Q.position),heights:k.filter(G=>G.position==Q.position),setHeights:T,expandByDefault:i,gap:x,loadingIcon:v,expanded:R,pauseWhenPageIsHidden:_,swipeDirections:t.swipeDirections})})):null}))});const $3=({...t})=>{const{theme:e="system"}=d3();return a.jsx(F3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var V3=lx[" useId ".trim().toString()]||(()=>{}),U3=0;function Ar(t){const[e,n]=m.useState(V3());return pt(()=>{t||n(r=>r??String(U3++))},[t]),t||(e?`radix-${e}`:"")}const B3=["top","right","bottom","left"],vi=Math.min,yn=Math.max,$h=Math.round,gd=Math.floor,Dr=t=>({x:t,y:t}),z3={left:"right",right:"left",bottom:"top",top:"bottom"},W3={start:"end",end:"start"};function Pv(t,e,n){return yn(t,vi(e,n))}function ps(t,e){return typeof t=="function"?t(e):t}function gs(t){return t.split("-")[0]}function cl(t){return t.split("-")[1]}function o0(t){return t==="x"?"y":"x"}function a0(t){return t==="y"?"height":"width"}const H3=new Set(["top","bottom"]);function Rr(t){return H3.has(gs(t))?"y":"x"}function l0(t){return o0(Rr(t))}function G3(t,e,n){n===void 0&&(n=!1);const r=cl(t),s=l0(t),i=a0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Vh(o)),[o,Vh(o)]}function q3(t){const e=Vh(t);return[Av(t),e,Av(e)]}function Av(t){return t.replace(/start|end/g,e=>W3[e])}const Z_=["left","right"],e1=["right","left"],K3=["top","bottom"],Y3=["bottom","top"];function Q3(t,e,n){switch(t){case"top":case"bottom":return n?e?e1:Z_:e?Z_:e1;case"left":case"right":return e?K3:Y3;default:return[]}}function X3(t,e,n,r){const s=cl(t);let i=Q3(gs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Av)))),i}function Vh(t){return t.replace(/left|right|bottom|top/g,e=>z3[e])}function J3(t){return{top:0,right:0,bottom:0,left:0,...t}}function jT(t){return typeof t!="number"?J3(t):{top:t,right:t,bottom:t,left:t}}function Uh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function t1(t,e,n){let{reference:r,floating:s}=t;const i=Rr(e),o=l0(e),l=a0(o),c=gs(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(cl(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const Z3=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=t1(u,r,c),f=r,p={},w=0;for(let g=0;g<l.length;g++){const{name:y,fn:x}=l[g],{x:v,y:b,data:N,reset:_}=await x({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,h=b??h,p={...p,[y]:{...p[y],...N}},_&&w<=50&&(w++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:d,y:h}=t1(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Vc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ps(e,t),w=jT(p),y=l[f?h==="floating"?"reference":"floating":h],x=Uh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Uh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-_.top+w.top)/N.y,bottom:(_.bottom-x.bottom+w.bottom)/N.y,left:(x.left-_.left+w.left)/N.x,right:(_.right-x.right+w.right)/N.x}}const eF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ps(t,e)||{};if(u==null)return{};const h=jT(d),f={x:n,y:r},p=l0(s),w=a0(p),g=await o.getDimensions(u),y=p==="y",x=y?"top":"left",v=y?"bottom":"right",b=y?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[p]-f[p]-i.floating[w],_=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=C?C[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=l.floating[b]||i.floating[w]);const E=N/2-_/2,k=S/2-g[w]/2-1,T=vi(h[x],k),R=vi(h[v],k),I=T,F=S-g[w]-R,P=S/2-g[w]/2+E,V=Pv(I,P,F),$=!c.arrow&&cl(s)!=null&&P!==V&&i.reference[w]/2-(P<I?T:R)-g[w]/2<0,z=$?P<I?P-I:P-F:0;return{[p]:f[p]+z,data:{[p]:V,centerOffset:P-V-z,...$&&{alignmentOffset:z}},reset:$}}}),tF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...y}=ps(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=gs(s),v=Rr(l),b=gs(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=f||(b||!g?[Vh(l)]:q3(l)),C=w!=="none";!f&&C&&_.push(...X3(l,g,w,N));const S=[l,..._],E=await Vc(e,y),k=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(E[x]),h){const P=G3(s,o,N);k.push(E[P[0]],E[P[1]])}if(T=[...T,{placement:s,overflows:k}],!k.every(P=>P<=0)){var R,I;const P=(((R=i.flip)==null?void 0:R.index)||0)+1,V=S[P];if(V&&(!(h==="alignment"?v!==Rr(V):!1)||T.every(A=>A.overflows[0]>0&&Rr(A.placement)===v)))return{data:{index:P,overflows:T},reset:{placement:V}};let $=(I=T.filter(z=>z.overflows[0]<=0).sort((z,A)=>z.overflows[1]-A.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(p){case"bestFit":{var F;const z=(F=T.filter(A=>{if(C){const M=Rr(A.placement);return M===v||M==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(M=>M>0).reduce((M,j)=>M+j,0)]).sort((A,M)=>A[1]-M[1])[0])==null?void 0:F[0];z&&($=z);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function n1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function r1(t){return B3.some(e=>t[e]>=0)}const nF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ps(t,e);switch(r){case"referenceHidden":{const i=await Vc(e,{...s,elementContext:"reference"}),o=n1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:r1(o)}}}case"escaped":{const i=await Vc(e,{...s,altBoundary:!0}),o=n1(i,n.floating);return{data:{escapedOffsets:o,escaped:r1(o)}}}default:return{}}}}},RT=new Set(["left","top"]);async function rF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=gs(n),l=cl(n),c=Rr(n)==="y",u=RT.has(o)?-1:1,d=i&&c?-1:1,h=ps(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const sF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await rF(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},iF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x,y:v}=y;return{x,y:v}}},...c}=ps(t,e),u={x:n,y:r},d=await Vc(e,c),h=Rr(gs(s)),f=o0(h);let p=u[f],w=u[h];if(i){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=p+d[y],b=p-d[x];p=Pv(v,p,b)}if(o){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=w+d[y],b=w-d[x];w=Pv(v,w,b)}const g=l.fn({...e,[f]:p,[h]:w});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},oF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ps(t,e),d={x:n,y:r},h=Rr(s),f=o0(h);let p=d[f],w=d[h];const g=ps(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=f==="y"?"height":"width",N=i.reference[f]-i.floating[b]+y.mainAxis,_=i.reference[f]+i.reference[b]-y.mainAxis;p<N?p=N:p>_&&(p=_)}if(u){var x,v;const b=f==="y"?"width":"height",N=RT.has(gs(s)),_=i.reference[h]-i.floating[b]+(N&&((x=o.offset)==null?void 0:x[h])||0)+(N?0:y.crossAxis),C=i.reference[h]+i.reference[b]+(N?0:((v=o.offset)==null?void 0:v[h])||0)-(N?y.crossAxis:0);w<_?w=_:w>C&&(w=C)}return{[f]:p,[h]:w}}}},aF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ps(t,e),d=await Vc(e,u),h=gs(s),f=cl(s),p=Rr(s)==="y",{width:w,height:g}=i.floating;let y,x;h==="top"||h==="bottom"?(y=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,y=f==="end"?"top":"bottom");const v=g-d.top-d.bottom,b=w-d.left-d.right,N=vi(g-d[y],v),_=vi(w-d[x],b),C=!e.middlewareData.shift;let S=N,E=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=v),C&&!f){const T=yn(d.left,0),R=yn(d.right,0),I=yn(d.top,0),F=yn(d.bottom,0);p?E=w-2*(T!==0||R!==0?T+R:yn(d.left,d.right)):S=g-2*(I!==0||F!==0?I+F:yn(d.top,d.bottom))}await c({...e,availableWidth:E,availableHeight:S});const k=await o.getDimensions(l.floating);return w!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function rm(){return typeof window<"u"}function ul(t){return IT(t)?(t.nodeName||"").toLowerCase():"#document"}function bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Br(t){var e;return(e=(IT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IT(t){return rm()?t instanceof Node||t instanceof bn(t).Node:!1}function dr(t){return rm()?t instanceof Element||t instanceof bn(t).Element:!1}function Vr(t){return rm()?t instanceof HTMLElement||t instanceof bn(t).HTMLElement:!1}function s1(t){return!rm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bn(t).ShadowRoot}const lF=new Set(["inline","contents"]);function bu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!lF.has(s)}const cF=new Set(["table","td","th"]);function uF(t){return cF.has(ul(t))}const dF=[":popover-open",":modal"];function sm(t){return dF.some(e=>{try{return t.matches(e)}catch{return!1}})}const hF=["transform","translate","scale","rotate","perspective"],fF=["transform","translate","scale","rotate","perspective","filter"],mF=["paint","layout","strict","content"];function c0(t){const e=u0(),n=dr(t)?hr(t):t;return hF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||fF.some(r=>(n.willChange||"").includes(r))||mF.some(r=>(n.contain||"").includes(r))}function pF(t){let e=yi(t);for(;Vr(e)&&!Wa(e);){if(c0(e))return e;if(sm(e))return null;e=yi(e)}return null}function u0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gF=new Set(["html","body","#document"]);function Wa(t){return gF.has(ul(t))}function hr(t){return bn(t).getComputedStyle(t)}function im(t){return dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yi(t){if(ul(t)==="html")return t;const e=t.assignedSlot||t.parentNode||s1(t)&&t.host||Br(t);return s1(e)?e.host:e}function PT(t){const e=yi(t);return Wa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&bu(e)?e:PT(e)}function Uc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=PT(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=bn(s);if(i){const l=Dv(o);return e.concat(o,o.visualViewport||[],bu(s)?s:[],l&&n?Uc(l):[])}return e.concat(s,Uc(s,[],n))}function Dv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AT(t){const e=hr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=$h(n)!==i||$h(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function d0(t){return dr(t)?t:t.contextElement}function xa(t){const e=d0(t);if(!Vr(e))return Dr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=AT(e);let o=(i?$h(n.width):n.width)/r,l=(i?$h(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const vF=Dr(0);function DT(t){const e=bn(t);return!u0()||!e.visualViewport?vF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bn(t)?!1:e}function _o(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=d0(t);let o=Dr(1);e&&(r?dr(r)&&(o=xa(r)):o=xa(t));const l=yF(i,n,r)?DT(i):Dr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=bn(i),p=r&&dr(r)?bn(r):r;let w=f,g=Dv(w);for(;g&&r&&p!==w;){const y=xa(g),x=g.getBoundingClientRect(),v=hr(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,N=x.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=b,u+=N,w=bn(g),g=Dv(w)}}return Uh({width:d,height:h,x:c,y:u})}function h0(t,e){const n=im(t).scrollLeft;return e?e.left+n:_o(Br(t)).left+n}function MT(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:h0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function xF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Br(r),l=e?sm(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Dr(1);const d=Dr(0),h=Vr(r);if((h||!h&&!i)&&((ul(r)!=="body"||bu(o))&&(c=im(r)),Vr(r))){const p=_o(r);u=xa(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?MT(o,c,!0):Dr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function wF(t){return Array.from(t.getClientRects())}function bF(t){const e=Br(t),n=im(t),r=t.ownerDocument.body,s=yn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=yn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+h0(t);const l=-n.scrollTop;return hr(r).direction==="rtl"&&(o+=yn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function _F(t,e){const n=bn(t),r=Br(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=u0();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const CF=new Set(["absolute","fixed"]);function NF(t,e){const n=_o(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vr(t)?xa(t):Dr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function i1(t,e,n){let r;if(e==="viewport")r=_F(t,n);else if(e==="document")r=bF(Br(t));else if(dr(e))r=NF(e,n);else{const s=DT(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Uh(r)}function OT(t,e){const n=yi(t);return n===e||!dr(n)||Wa(n)?!1:hr(n).position==="fixed"||OT(n,e)}function SF(t,e){const n=e.get(t);if(n)return n;let r=Uc(t,[],!1).filter(l=>dr(l)&&ul(l)!=="body"),s=null;const i=hr(t).position==="fixed";let o=i?yi(t):t;for(;dr(o)&&!Wa(o);){const l=hr(o),c=c0(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&CF.has(s.position)||bu(o)&&!c&&OT(t,o))?r=r.filter(d=>d!==o):s=l,o=yi(o)}return e.set(t,r),r}function EF(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?sm(e)?[]:SF(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=i1(e,d,s);return u.top=yn(h.top,u.top),u.right=vi(h.right,u.right),u.bottom=vi(h.bottom,u.bottom),u.left=yn(h.left,u.left),u},i1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function kF(t){const{width:e,height:n}=AT(t);return{width:e,height:n}}function TF(t,e,n){const r=Vr(e),s=Br(e),i=n==="fixed",o=_o(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Dr(0);function u(){c.x=h0(s)}if(r||!r&&!i)if((ul(e)!=="body"||bu(s))&&(l=im(e)),r){const p=_o(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?MT(s,l):Dr(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Fp(t){return hr(t).position==="static"}function o1(t,e){if(!Vr(t)||hr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Br(t)===n&&(n=n.ownerDocument.body),n}function LT(t,e){const n=bn(t);if(sm(t))return n;if(!Vr(t)){let s=yi(t);for(;s&&!Wa(s);){if(dr(s)&&!Fp(s))return s;s=yi(s)}return n}let r=o1(t,e);for(;r&&uF(r)&&Fp(r);)r=o1(r,e);return r&&Wa(r)&&Fp(r)&&!c0(r)?n:r||pF(t)||n}const jF=async function(t){const e=this.getOffsetParent||LT,n=this.getDimensions,r=await n(t.floating);return{reference:TF(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function RF(t){return hr(t).direction==="rtl"}const IF={convertOffsetParentRelativeRectToViewportRelativeRect:xF,getDocumentElement:Br,getClippingRect:EF,getOffsetParent:LT,getElementRects:jF,getClientRects:wF,getDimensions:kF,getScale:xa,isElement:dr,isRTL:RF};function FT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PF(t,e){let n=null,r;const s=Br(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||e(),!f||!p)return;const w=gd(h),g=gd(s.clientWidth-(d+f)),y=gd(s.clientHeight-(h+p)),x=gd(d),b={rootMargin:-w+"px "+-g+"px "+-y+"px "+-x+"px",threshold:yn(0,vi(1,c))||1};let N=!0;function _(C){const S=C[0].intersectionRatio;if(S!==c){if(!N)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!FT(u,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(t)}return o(!0),i}function AF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=d0(t),d=s||i?[...u?Uc(u):[],...Uc(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&l?PF(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let w,g=c?_o(t):null;c&&y();function y(){const x=_o(t);g&&!FT(g,x)&&n(),g=x,w=requestAnimationFrame(y)}return n(),()=>{var x;d.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(w)}}const DF=sF,MF=iF,OF=tF,LF=aF,FF=nF,a1=eF,$F=oF,VF=(t,e,n)=>{const r=new Map,s={platform:IF,...n},i={...s.platform,_c:r};return Z3(t,e,{...s,platform:i})};var UF=typeof document<"u",BF=function(){},Yd=UF?m.useLayoutEffect:BF;function Bh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Bh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Bh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $T(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function l1(t,e){const n=$T(t);return Math.round(e*n)/n}function $p(t){const e=m.useRef(t);return Yd(()=>{e.current=t}),e}function zF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(r);Bh(f,r)||p(r);const[w,g]=m.useState(null),[y,x]=m.useState(null),v=m.useCallback(A=>{A!==C.current&&(C.current=A,g(A))},[]),b=m.useCallback(A=>{A!==S.current&&(S.current=A,x(A))},[]),N=i||w,_=o||y,C=m.useRef(null),S=m.useRef(null),E=m.useRef(d),k=c!=null,T=$p(c),R=$p(s),I=$p(u),F=m.useCallback(()=>{if(!C.current||!S.current)return;const A={placement:e,strategy:n,middleware:f};R.current&&(A.platform=R.current),VF(C.current,S.current,A).then(M=>{const j={...M,isPositioned:I.current!==!1};P.current&&!Bh(E.current,j)&&(E.current=j,Do.flushSync(()=>{h(j)}))})},[f,e,n,R,I]);Yd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[u]);const P=m.useRef(!1);Yd(()=>(P.current=!0,()=>{P.current=!1}),[]),Yd(()=>{if(N&&(C.current=N),_&&(S.current=_),N&&_){if(T.current)return T.current(N,_,F);F()}},[N,_,F,T,k]);const V=m.useMemo(()=>({reference:C,floating:S,setReference:v,setFloating:b}),[v,b]),$=m.useMemo(()=>({reference:N,floating:_}),[N,_]),z=m.useMemo(()=>{const A={position:n,left:0,top:0};if(!$.floating)return A;const M=l1($.floating,d.x),j=l1($.floating,d.y);return l?{...A,transform:"translate("+M+"px, "+j+"px)",...$T($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:j}},[n,l,$.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:F,refs:V,elements:$,floatingStyles:z}),[d,F,V,$,z])}const WF=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?a1({element:r.current,padding:s}).fn(n):{}:r?a1({element:r,padding:s}).fn(n):{}}}},HF=(t,e)=>({...DF(t),options:[t,e]}),GF=(t,e)=>({...MF(t),options:[t,e]}),qF=(t,e)=>({...$F(t),options:[t,e]}),KF=(t,e)=>({...OF(t),options:[t,e]}),YF=(t,e)=>({...LF(t),options:[t,e]}),QF=(t,e)=>({...FF(t),options:[t,e]}),XF=(t,e)=>({...WF(t),options:[t,e]});var JF="Arrow",VT=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ne.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});VT.displayName=JF;var ZF=VT;function f0(t){const[e,n]=m.useState(void 0);return pt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var m0="Popper",[UT,om]=un(m0),[e6,BT]=UT(m0),zT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(e6,{scope:e,anchor:r,onAnchorChange:s,children:n})};zT.displayName=m0;var WT="PopperAnchor",HT=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=BT(WT,n),o=m.useRef(null),l=ge(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ne.div,{...s,ref:l})});HT.displayName=WT;var p0="PopperContent",[t6,n6]=UT(p0),GT=m.forwardRef((t,e)=>{var Q,_e,Ae,be,G,fe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:w,...g}=t,y=BT(p0,n),[x,v]=m.useState(null),b=ge(e,Ue=>v(Ue)),[N,_]=m.useState(null),C=f0(N),S=(C==null?void 0:C.width)??0,E=(C==null?void 0:C.height)??0,k=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],I=R.length>0,F={padding:T,boundary:R.filter(s6),altBoundary:I},{refs:P,floatingStyles:V,placement:$,isPositioned:z,middlewareData:A}=zF({strategy:"fixed",placement:k,whileElementsMounted:(...Ue)=>AF(...Ue,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[HF({mainAxis:s+E,alignmentAxis:o}),c&&GF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?qF():void 0,...F}),c&&KF({...F}),YF({...F,apply:({elements:Ue,rects:Pt,availableWidth:Kr,availableHeight:yr})=>{const{width:En,height:Ss}=Pt.reference,Yr=Ue.floating.style;Yr.setProperty("--radix-popper-available-width",`${Kr}px`),Yr.setProperty("--radix-popper-available-height",`${yr}px`),Yr.setProperty("--radix-popper-anchor-width",`${En}px`),Yr.setProperty("--radix-popper-anchor-height",`${Ss}px`)}}),N&&XF({element:N,padding:l}),i6({arrowWidth:S,arrowHeight:E}),f&&QF({strategy:"referenceHidden",...F})]}),[M,j]=YT($),W=dt(w);pt(()=>{z&&(W==null||W())},[z,W]);const K=(Q=A.arrow)==null?void 0:Q.x,re=(_e=A.arrow)==null?void 0:_e.y,ae=((Ae=A.arrow)==null?void 0:Ae.centerOffset)!==0,[Te,Re]=m.useState();return pt(()=>{x&&Re(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:z?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(be=A.transformOrigin)==null?void 0:be.x,(G=A.transformOrigin)==null?void 0:G.y].join(" "),...((fe=A.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(t6,{scope:n,placedSide:M,onArrowChange:_,arrowX:K,arrowY:re,shouldHideArrow:ae,children:a.jsx(ne.div,{"data-side":M,"data-align":j,...g,ref:b,style:{...g.style,animation:z?void 0:"none"}})})})});GT.displayName=p0;var qT="PopperArrow",r6={top:"bottom",right:"left",bottom:"top",left:"right"},KT=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=n6(qT,r),o=r6[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(ZF,{...s,ref:n,style:{...s.style,display:"block"}})})});KT.displayName=qT;function s6(t){return t!==null}var i6=t=>({name:"transformOrigin",options:t,fn(e){var y,x,v;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=YT(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let w="",g="";return u==="bottom"?(w=o?h:`${f}px`,g=`${-c}px`):u==="top"?(w=o?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,g=o?h:`${p}px`):u==="left"&&(w=`${r.floating.width+c}px`,g=o?h:`${p}px`),{data:{x:w,y:g}}}});function YT(t){const[e,n="center"]=t.split("-");return[e,n]}var o6=zT,QT=HT,XT=GT,JT=KT,[am,VZ]=un("Tooltip",[om]),g0=om(),ZT="TooltipProvider",a6=700,c1="tooltip.open",[l6,ej]=am(ZT),tj=t=>{const{__scopeTooltip:e,delayDuration:n=a6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(l6,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};tj.displayName=ZT;var nj="Tooltip",[UZ,lm]=am(nj),Mv="TooltipTrigger",c6=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=lm(Mv,n),i=ej(Mv,n),o=g0(n),l=m.useRef(null),c=ge(e,l,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(QT,{asChild:!0,...o,children:a.jsx(ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ee(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ee(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ee(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ee(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ee(t.onBlur,s.onClose),onClick:ee(t.onClick,s.onClose)})})});c6.displayName=Mv;var u6="TooltipPortal",[BZ,d6]=am(u6,{forceMount:void 0}),Ha="TooltipContent",rj=m.forwardRef((t,e)=>{const n=d6(Ha,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=lm(Ha,t.__scopeTooltip);return a.jsx(Sn,{present:r||o.open,children:o.disableHoverableContent?a.jsx(sj,{side:s,...i,ref:e}):a.jsx(h6,{side:s,...i,ref:e})})}),h6=m.forwardRef((t,e)=>{const n=lm(Ha,t.__scopeTooltip),r=ej(Ha,t.__scopeTooltip),s=m.useRef(null),i=ge(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=m.useCallback(()=>{l(null),h(!1)},[h]),p=m.useCallback((w,g)=>{const y=w.currentTarget,x={x:w.clientX,y:w.clientY},v=v6(x,y.getBoundingClientRect()),b=y6(x,v),N=x6(g.getBoundingClientRect()),_=b6([...b,...N]);l(_),h(!0)},[h]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&d){const w=y=>p(y,d),g=y=>p(y,c);return c.addEventListener("pointerleave",w),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",w),d.removeEventListener("pointerleave",g)}}},[c,d,p,f]),m.useEffect(()=>{if(o){const w=g=>{const y=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),b=!w6(x,o);v?f():b&&(f(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,d,o,u,f]),a.jsx(sj,{...t,ref:i})}),[f6,m6]=am(nj,{isInside:!1}),p6=SL("TooltipContent"),sj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=lm(Ha,n),u=g0(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(c1,d),()=>document.removeEventListener(c1,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(XT,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(p6,{children:r}),a.jsx(f6,{scope:n,isInside:!0,children:a.jsx(qL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});rj.displayName=Ha;var ij="TooltipArrow",g6=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=g0(n);return m6(ij,n).isInside?null:a.jsx(JT,{...s,...r,ref:e})});g6.displayName=ij;function v6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function y6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function x6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function w6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function b6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_6(e)}function _6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var C6=tj,oj=rj;const N6=C6,S6=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(oj,{ref:r,sideOffset:e,className:L("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));S6.displayName=oj.displayName;var cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},um=typeof window>"u"||"Deno"in globalThis;function Qn(){}function E6(t,e){return typeof t=="function"?t(e):t}function k6(t){return typeof t=="number"&&t>=0&&t!==1/0}function T6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ov(t,e){return typeof t=="function"?t(e):t}function j6(t,e){return typeof t=="function"?t(e):t}function u1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==v0(o,e.options))return!1}else if(!zc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function d1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Bc(e.options.mutationKey)!==Bc(i))return!1}else if(!zc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function v0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Bc)(t)}function Bc(t){return JSON.stringify(t,(e,n)=>Lv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function zc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>zc(t[n],e[n])):!1}function aj(t,e){if(t===e)return t;const n=h1(t)&&h1(e);if(n||Lv(t)&&Lv(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=aj(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function h1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Lv(t){if(!f1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!f1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function f1(t){return Object.prototype.toString.call(t)==="[object Object]"}function R6(t){return new Promise(e=>{setTimeout(e,t)})}function I6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?aj(t,e):e}function P6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function A6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var y0=Symbol();function lj(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===y0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ji,Hs,Ta,wS,D6=(wS=class extends cm{constructor(){super();Ne(this,Ji);Ne(this,Hs);Ne(this,Ta);ue(this,Ta,e=>{if(!um&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,Hs)||this.setEventListener(O(this,Ta))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Hs))==null||e.call(this),ue(this,Hs,void 0))}setEventListener(e){var n;ue(this,Ta,e),(n=O(this,Hs))==null||n.call(this),ue(this,Hs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,Ji)!==e&&(ue(this,Ji,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,Ji)=="boolean"?O(this,Ji):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ji=new WeakMap,Hs=new WeakMap,Ta=new WeakMap,wS),cj=new D6,ja,Gs,Ra,bS,M6=(bS=class extends cm{constructor(){super();Ne(this,ja,!0);Ne(this,Gs);Ne(this,Ra);ue(this,Ra,e=>{if(!um&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,Gs)||this.setEventListener(O(this,Ra))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Gs))==null||e.call(this),ue(this,Gs,void 0))}setEventListener(e){var n;ue(this,Ra,e),(n=O(this,Gs))==null||n.call(this),ue(this,Gs,e(this.setOnline.bind(this)))}setOnline(e){O(this,ja)!==e&&(ue(this,ja,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,ja)}},ja=new WeakMap,Gs=new WeakMap,Ra=new WeakMap,bS),zh=new M6;function O6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function L6(t){return Math.min(1e3*2**t,3e4)}function uj(t){return(t??"online")==="online"?zh.isOnline():!0}var dj=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Vp(t){return t instanceof dj}function hj(t){let e=!1,n=0,r=!1,s;const i=O6(),o=g=>{var y;r||(f(new dj(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>cj.isFocused()&&(t.networkMode==="always"||zh.isOnline())&&t.canRun(),d=()=>uj(t.networkMode)&&t.canRun(),h=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},f=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},p=()=>new Promise(g=>{var y;s=x=>{(r||u())&&g(x)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),w=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var C;if(r)return;const v=t.retry??(um?0:3),b=t.retryDelay??L6,N=typeof b=="function"?b(n,x):b,_=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(e||!_){f(x);return}n++,(C=t.onFail)==null||C.call(t,n,x),R6(N).then(()=>u()?void 0:p()).then(()=>{e?f(x):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?w():p().then(w),i)}}var F6=t=>setTimeout(t,0);function $6(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=F6;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ht=$6(),Zi,_S,fj=(_S=class{constructor(){Ne(this,Zi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),k6(this.gcTime)&&ue(this,Zi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(um?1/0:5*60*1e3))}clearGcTimeout(){O(this,Zi)&&(clearTimeout(O(this,Zi)),ue(this,Zi,void 0))}},Zi=new WeakMap,_S),Ia,eo,jn,to,Lt,lu,no,Xn,es,CS,V6=(CS=class extends fj{constructor(e){super();Ne(this,Xn);Ne(this,Ia);Ne(this,eo);Ne(this,jn);Ne(this,to);Ne(this,Lt);Ne(this,lu);Ne(this,no);ue(this,no,!1),ue(this,lu,e.defaultOptions),this.setOptions(e.options),this.observers=[],ue(this,to,e.client),ue(this,jn,O(this,to).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ue(this,Ia,B6(this.options)),this.state=e.state??O(this,Ia),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=O(this,Lt))==null?void 0:e.promise}setOptions(e){this.options={...O(this,lu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,jn).remove(this)}setData(e,n){const r=I6(this.state.data,e,this.options);return At(this,Xn,es).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){At(this,Xn,es).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=O(this,Lt))==null?void 0:r.promise;return(s=O(this,Lt))==null||s.cancel(e),n?n.then(Qn).catch(Qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,Ia))}isActive(){return this.observers.some(e=>j6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===y0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ov(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!T6(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,Lt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=O(this,Lt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),O(this,jn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(O(this,Lt)&&(O(this,no)?O(this,Lt).cancel({revert:!0}):O(this,Lt).cancelRetry()),this.scheduleGc()),O(this,jn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||At(this,Xn,es).call(this,{type:"invalidate"})}fetch(e,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(O(this,Lt))return O(this,Lt).continueRetry(),O(this,Lt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ue(this,no,!0),r.signal)})},i=()=>{const f=lj(this.options,n),w=(()=>{const g={client:O(this,to),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ue(this,no,!1),this.options.persister?this.options.persister(f,w,this):f(w)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:O(this,to),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),ue(this,eo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&At(this,Xn,es).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,w,g,y;Vp(f)&&f.silent||At(this,Xn,es).call(this,{type:"error",error:f}),Vp(f)||((w=(p=O(this,jn).config).onError)==null||w.call(p,f,this),(y=(g=O(this,jn).config).onSettled)==null||y.call(g,this.state.data,f,this)),this.scheduleGc()};return ue(this,Lt,hj({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,w,g,y;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){c(x);return}(w=(p=O(this,jn).config).onSuccess)==null||w.call(p,f,this),(y=(g=O(this,jn).config).onSettled)==null||y.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{At(this,Xn,es).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{At(this,Xn,es).call(this,{type:"pause"})},onContinue:()=>{At(this,Xn,es).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Lt).start()}},Ia=new WeakMap,eo=new WeakMap,jn=new WeakMap,to=new WeakMap,Lt=new WeakMap,lu=new WeakMap,no=new WeakMap,Xn=new WeakSet,es=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...U6(r.data,this.options),fetchMeta:e.meta??null};case"success":return ue(this,eo,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Vp(s)&&s.revert&&O(this,eo)?{...O(this,eo),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ht.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),O(this,jn).notify({query:this,type:"updated",action:e})})},CS);function U6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uj(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function B6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Cr,NS,z6=(NS=class extends cm{constructor(e={}){super();Ne(this,Cr);this.config=e,ue(this,Cr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??v0(s,n);let o=this.get(i);return o||(o=new V6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){O(this,Cr).has(e.queryHash)||(O(this,Cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,Cr).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,Cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,Cr).get(e)}getAll(){return[...O(this,Cr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>u1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>u1(e,r)):n}notify(e){Ht.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cr=new WeakMap,NS),Nr,zt,ro,Sr,Is,SS,W6=(SS=class extends fj{constructor(e){super();Ne(this,Sr);Ne(this,Nr);Ne(this,zt);Ne(this,ro);this.mutationId=e.mutationId,ue(this,zt,e.mutationCache),ue(this,Nr,[]),this.state=e.state||H6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){O(this,Nr).includes(e)||(O(this,Nr).push(e),this.clearGcTimeout(),O(this,zt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ue(this,Nr,O(this,Nr).filter(n=>n!==e)),this.scheduleGc(),O(this,zt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){O(this,Nr).length||(this.state.status==="pending"?this.scheduleGc():O(this,zt).remove(this))}continue(){var e;return((e=O(this,ro))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,u,d,h,f,p,w,g,y,x,v,b,N,_,C,S,E;const n=()=>{At(this,Sr,Is).call(this,{type:"continue"})};ue(this,ro,hj({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{At(this,Sr,Is).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{At(this,Sr,Is).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,zt).canRun(this)}));const r=this.state.status==="pending",s=!O(this,ro).canStart();try{if(r)n();else{At(this,Sr,Is).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=O(this,zt).config).onMutate)==null?void 0:o.call(i,e,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));T!==this.state.context&&At(this,Sr,Is).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const k=await O(this,ro).start();return await((d=(u=O(this,zt).config).onSuccess)==null?void 0:d.call(u,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((w=(p=O(this,zt).config).onSettled)==null?void 0:w.call(p,k,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,k,null,e,this.state.context)),At(this,Sr,Is).call(this,{type:"success",data:k}),k}catch(k){try{throw await((v=(x=O(this,zt).config).onError)==null?void 0:v.call(x,k,e,this.state.context,this)),await((N=(b=this.options).onError)==null?void 0:N.call(b,k,e,this.state.context)),await((C=(_=O(this,zt).config).onSettled)==null?void 0:C.call(_,void 0,k,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,k,e,this.state.context)),k}finally{At(this,Sr,Is).call(this,{type:"error",error:k})}}finally{O(this,zt).runNext(this)}}},Nr=new WeakMap,zt=new WeakMap,ro=new WeakMap,Sr=new WeakSet,Is=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ht.batch(()=>{O(this,Nr).forEach(r=>{r.onMutationUpdate(e)}),O(this,zt).notify({mutation:this,type:"updated",action:e})})},SS);function H6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rs,Jn,cu,ES,G6=(ES=class extends cm{constructor(e={}){super();Ne(this,rs);Ne(this,Jn);Ne(this,cu);this.config=e,ue(this,rs,new Set),ue(this,Jn,new Map),ue(this,cu,0)}build(e,n,r){const s=new W6({mutationCache:this,mutationId:++Yu(this,cu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){O(this,rs).add(e);const n=vd(e);if(typeof n=="string"){const r=O(this,Jn).get(n);r?r.push(e):O(this,Jn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(O(this,rs).delete(e)){const n=vd(e);if(typeof n=="string"){const r=O(this,Jn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&O(this,Jn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=vd(e);if(typeof n=="string"){const r=O(this,Jn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=vd(e);if(typeof n=="string"){const s=(r=O(this,Jn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ht.batch(()=>{O(this,rs).forEach(e=>{this.notify({type:"removed",mutation:e})}),O(this,rs).clear(),O(this,Jn).clear()})}getAll(){return Array.from(O(this,rs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>d1(n,r))}findAll(e={}){return this.getAll().filter(n=>d1(e,n))}notify(e){Ht.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ht.batch(()=>Promise.all(e.map(n=>n.continue().catch(Qn))))}},rs=new WeakMap,Jn=new WeakMap,cu=new WeakMap,ES);function vd(t){var e;return(e=t.options.scope)==null?void 0:e.id}function m1(t){return{onFetch:(e,n)=>{var d,h,f,p,w;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},x=lj(e.options,e.fetchOptions),v=async(b,N,_)=>{if(g)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:N,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),E=await x(S),{maxPages:k}=e.options,T=_?A6:P6;return{pages:T(b.pages,E,k),pageParams:T(b.pageParams,N,k)}};if(s&&i.length){const b=s==="backward",N=b?q6:p1,_={pages:i,pageParams:o},C=N(r,_);l=await v(_,C,b)}else{const b=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:p1(r,l);if(c>0&&N==null)break;l=await v(l,N),c++}while(c<b)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function p1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function q6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Xe,qs,Ks,Pa,Aa,Ys,Da,Ma,kS,K6=(kS=class{constructor(t={}){Ne(this,Xe);Ne(this,qs);Ne(this,Ks);Ne(this,Pa);Ne(this,Aa);Ne(this,Ys);Ne(this,Da);Ne(this,Ma);ue(this,Xe,t.queryCache||new z6),ue(this,qs,t.mutationCache||new G6),ue(this,Ks,t.defaultOptions||{}),ue(this,Pa,new Map),ue(this,Aa,new Map),ue(this,Ys,0)}mount(){Yu(this,Ys)._++,O(this,Ys)===1&&(ue(this,Da,cj.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Xe).onFocus())})),ue(this,Ma,zh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Xe).onOnline())})))}unmount(){var t,e;Yu(this,Ys)._--,O(this,Ys)===0&&((t=O(this,Da))==null||t.call(this),ue(this,Da,void 0),(e=O(this,Ma))==null||e.call(this),ue(this,Ma,void 0))}isFetching(t){return O(this,Xe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,qs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Xe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=O(this,Xe).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ov(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return O(this,Xe).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,Xe).get(r.queryHash),i=s==null?void 0:s.state.data,o=E6(e,i);if(o!==void 0)return O(this,Xe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ht.batch(()=>O(this,Xe).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Xe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,Xe);Ht.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,Xe);return Ht.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ht.batch(()=>O(this,Xe).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Qn).catch(Qn)}invalidateQueries(t,e={}){return Ht.batch(()=>(O(this,Xe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ht.batch(()=>O(this,Xe).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Qn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Qn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,Xe).build(this,e);return n.isStaleByTime(Ov(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qn).catch(Qn)}fetchInfiniteQuery(t){return t.behavior=m1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qn).catch(Qn)}ensureInfiniteQueryData(t){return t.behavior=m1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zh.isOnline()?O(this,qs).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,Xe)}getMutationCache(){return O(this,qs)}getDefaultOptions(){return O(this,Ks)}setDefaultOptions(t){ue(this,Ks,t)}setQueryDefaults(t,e){O(this,Pa).set(Bc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Pa).values()],n={};return e.forEach(r=>{zc(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){O(this,Aa).set(Bc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Aa).values()],n={};return e.forEach(r=>{zc(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Ks).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=v0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===y0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Ks).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,Xe).clear(),O(this,qs).clear()}},Xe=new WeakMap,qs=new WeakMap,Ks=new WeakMap,Pa=new WeakMap,Aa=new WeakMap,Ys=new WeakMap,Da=new WeakMap,Ma=new WeakMap,kS),Y6=m.createContext(void 0),Q6=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(Y6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wh.apply(this,arguments)}var Js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Js||(Js={}));const g1="popstate";function X6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:c=""}=_u(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Fv("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:mj(i))}function r(s,i){x0(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Z6(e,n,r,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J6(){return Math.random().toString(36).substr(2,8)}function v1(t,e){return{usr:t.state,key:t.key,idx:e}}function Fv(t,e,n,r){return n===void 0&&(n=null),Wh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_u(e):e,{state:n,key:e&&e.key||r||J6()})}function mj(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _u(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Z6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Js.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Wh({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Js.Pop;let y=d(),x=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:x})}function f(y,x){l=Js.Push;let v=Fv(g.location,y,x);n&&n(v,y),u=d()+1;let b=v1(v,u),N=g.createHref(v);try{o.pushState(b,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function p(y,x){l=Js.Replace;let v=Fv(g.location,y,x);n&&n(v,y),u=d();let b=v1(v,u),N=g.createHref(v);o.replaceState(b,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function w(y){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:mj(y);return v=v.replace(/ $/,"%20"),cn(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return l},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(g1,h),c=y,()=>{s.removeEventListener(g1,h),c=null}},createHref(y){return e(s,y)},createURL:w,encodeLocation(y){let x=w(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var y1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y1||(y1={}));function e$(t,e,n){return n===void 0&&(n="/"),t$(t,e,n,!1)}function t$(t,e,n,r){let s=typeof e=="string"?_u(e):e,i=vj(s.pathname||"/",n);if(i==null)return null;let o=pj(t);n$(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=f$(i);l=d$(o[c],u,r)}return l}function pj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(cn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=wa([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(cn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pj(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:c$(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of gj(i.path))s(i,o,c)}),e}function gj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=gj(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function n$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:u$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r$=/^:[\w-]+$/,s$=3,i$=2,o$=1,a$=10,l$=-2,x1=t=>t==="*";function c$(t,e){let n=t.split("/"),r=n.length;return n.some(x1)&&(r+=l$),e&&(r+=i$),n.filter(s=>!x1(s)).reduce((s,i)=>s+(r$.test(i)?s$:i===""?o$:a$),r)}function u$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function d$(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=w1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=w1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:wa([i,h.pathname]),pathnameBase:m$(wa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=wa([i,h.pathnameBase]))}return o}function w1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h$(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const w=l[h];return p&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function h$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),x0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function f$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const wa=t=>t.join("/").replace(/\/\/+/g,"/"),m$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function p$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yj=["post","put","patch","delete"];new Set(yj);const g$=["get",...yj];new Set(g$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(this,arguments)}const v$=m.createContext(null),y$=m.createContext(null),xj=m.createContext(null),dm=m.createContext(null),hm=m.createContext({outlet:null,matches:[],isDataRoute:!1}),wj=m.createContext(null);function w0(){return m.useContext(dm)!=null}function bj(){return w0()||cn(!1),m.useContext(dm).location}function x$(t,e){return w$(t,e)}function w$(t,e,n,r){w0()||cn(!1);let{navigator:s}=m.useContext(xj),{matches:i}=m.useContext(hm),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=bj(),d;if(e){var h;let y=typeof e=="string"?_u(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||cn(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let w=e$(t,{pathname:p}),g=S$(w&&w.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:wa([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:wa([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?m.createElement(dm.Provider,{value:{location:Hh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Js.Pop}},g):g}function b$(){let t=j$(),e=p$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const _$=m.createElement(b$,null);class C$ extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(hm.Provider,{value:this.props.routeContext},m.createElement(wj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N$(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(v$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(hm.Provider,{value:e},r)}function S$(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||cn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,g=null,y=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||_$,c&&(u<0&&f===0?(w=!0,y=null):u===f&&(w=!0,y=h.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,f+1)),v=()=>{let b;return p?b=g:w?b=y:h.route.Component?b=m.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,m.createElement(N$,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(C$,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var $v=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($v||{});function E$(t){let e=m.useContext(y$);return e||cn(!1),e}function k$(t){let e=m.useContext(hm);return e||cn(!1),e}function T$(t){let e=k$(),n=e.matches[e.matches.length-1];return n.route.id||cn(!1),n.route.id}function j$(){var t;let e=m.useContext(wj),n=E$($v.UseRouteError),r=T$($v.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function R$(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vv(t){cn(!1)}function I$(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Js.Pop,navigator:i,static:o=!1,future:l}=t;w0()&&cn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:Hh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=_u(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=r,g=m.useMemo(()=>{let y=vj(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:w},navigationType:s}},[c,d,h,f,p,w,s]);return g==null?null:m.createElement(xj.Provider,{value:u},m.createElement(dm.Provider,{children:n,value:g}))}function P$(t){let{children:e,location:n}=t;return x$(Uv(e),n)}new Promise(()=>{});function Uv(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,Uv(r.props.children,i));return}r.type!==Vv&&cn(!1),!r.props.index||!r.props.children||cn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const A$="6";try{window.__reactRouterVersion=A$}catch{}const D$="startTransition",b1=lx[D$];function M$(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=X6({window:s,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&b1?b1(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>R$(r),[r]),m.createElement(I$,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var _1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(_1||(_1={}));var C1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(C1||(C1={}));const O$=()=>{};var N1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y=function(t,e){if(!t)throw dl(e)},dl=function(t){return new Error("Firebase Database ("+_j.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},L$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},b0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):L$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new F$;const f=i<<2|l>>4;if(r.push(f),u!==64){const p=l<<4&240|u>>2;if(r.push(p),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class F$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nj=function(t){const e=Cj(t);return b0.encodeByteArray(e,!0)},Gh=function(t){return Nj(t).replace(/\./g,"")},qh=function(t){try{return b0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $$(t){return Sj(void 0,t)}function Sj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!V$(n)||(t[n]=Sj(t[n],e[n]));return t}function V$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=()=>U$().__FIREBASE_DEFAULTS__,z$=()=>{if(typeof process>"u"||typeof N1>"u")return;const t=N1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qh(t[1]);return e&&JSON.parse(e)},_0=()=>{try{return O$()||B$()||z$()||W$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ej=t=>{var e,n;return(n=(e=_0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},H$=t=>{const e=Ej(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kj=()=>{var t;return(t=_0())==null?void 0:t.config},Tj=t=>{var e;return(e=_0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gh(JSON.stringify(n)),Gh(JSON.stringify(o)),""].join(".")}const dc={};function q$(){const t={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?t.emulator.push(e):t.prod.push(e);return t}function K$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S1=!1;function Rj(t,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||dc[t]===e||dc[t]||S1)return;dc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=q$().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{S1=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=K$(r),p=n("text"),w=document.getElementById(p)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;l(b),d(y,g);const N=u();c(v,x),b.append(v,w,y,N),document.body.appendChild(b)}i?(w.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function Y$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ij(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X$(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Pj(){return _j.NODE_ADMIN===!0}function J$(){try{return typeof indexedDB=="object"}catch{return!1}}function Z$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="FirebaseError";class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eV,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tV(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ji(s,l,r)}}function tV(t,e){return t.replace(nV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){return JSON.parse(t)}function ht(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Wc(qh(i[0])||""),n=Wc(qh(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},rV=function(t){const e=Aj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sV=function(t){const e=Aj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ga(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Bv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kh(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Co(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(E1(i)&&E1(o)){if(!Co(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function E1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):h<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function oV(t,e){const n=new aV(t,e);return n.subscribe.bind(n)}class aV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Up),s.error===void 0&&(s.error=Up),s.complete===void 0&&(s.complete=Up);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}function fm(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Y(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mm=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Cu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hV(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dV(t){return t===Bi?void 0:t}function hV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const mV={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},pV=Ie.INFO,gV={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},vV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class N0{constructor(e){this.name=e,this._logLevel=pV,this._logHandler=vV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const yV=(t,e)=>e.some(n=>t instanceof n);let k1,T1;function xV(){return k1||(k1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wV(){return T1||(T1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dj=new WeakMap,zv=new WeakMap,Mj=new WeakMap,Bp=new WeakMap,S0=new WeakMap;function bV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(li(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Dj.set(n,t)}).catch(()=>{}),S0.set(e,t),e}function _V(t){if(zv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});zv.set(t,e)}let Wv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CV(t){Wv=t(Wv)}function NV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zp(this),e,...n);return Mj.set(r,e.sort?e.sort():[e]),li(r)}:wV().includes(t)?function(...e){return t.apply(zp(this),e),li(Dj.get(this))}:function(...e){return li(t.apply(zp(this),e))}}function SV(t){return typeof t=="function"?NV(t):(t instanceof IDBTransaction&&_V(t),yV(t,xV())?new Proxy(t,Wv):t)}function li(t){if(t instanceof IDBRequest)return bV(t);if(Bp.has(t))return Bp.get(t);const e=SV(t);return e!==t&&(Bp.set(t,e),S0.set(e,t)),e}const zp=t=>S0.get(t);function EV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=li(o);return r&&o.addEventListener("upgradeneeded",c=>{r(li(o.result),c.oldVersion,c.newVersion,li(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const kV=["get","getKey","getAll","getAllKeys","count"],TV=["put","add","delete","clear"],Wp=new Map;function j1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wp.get(e))return Wp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=TV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||kV.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Wp.set(e,i),i}CV(t=>({...t,get:(e,n,r)=>j1(e,n)||t.get(e,n,r),has:(e,n)=>!!j1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hv="@firebase/app",R1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new N0("@firebase/app"),IV="@firebase/app-compat",PV="@firebase/analytics-compat",AV="@firebase/analytics",DV="@firebase/app-check-compat",MV="@firebase/app-check",OV="@firebase/auth",LV="@firebase/auth-compat",FV="@firebase/database",$V="@firebase/data-connect",VV="@firebase/database-compat",UV="@firebase/functions",BV="@firebase/functions-compat",zV="@firebase/installations",WV="@firebase/installations-compat",HV="@firebase/messaging",GV="@firebase/messaging-compat",qV="@firebase/performance",KV="@firebase/performance-compat",YV="@firebase/remote-config",QV="@firebase/remote-config-compat",XV="@firebase/storage",JV="@firebase/storage-compat",ZV="@firebase/firestore",e8="@firebase/ai",t8="@firebase/firestore-compat",n8="firebase",r8="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="[DEFAULT]",s8={[Hv]:"fire-core",[IV]:"fire-core-compat",[AV]:"fire-analytics",[PV]:"fire-analytics-compat",[MV]:"fire-app-check",[DV]:"fire-app-check-compat",[OV]:"fire-auth",[LV]:"fire-auth-compat",[FV]:"fire-rtdb",[$V]:"fire-data-connect",[VV]:"fire-rtdb-compat",[UV]:"fire-fn",[BV]:"fire-fn-compat",[zV]:"fire-iid",[WV]:"fire-iid-compat",[HV]:"fire-fcm",[GV]:"fire-fcm-compat",[qV]:"fire-perf",[KV]:"fire-perf-compat",[YV]:"fire-rc",[QV]:"fire-rc-compat",[XV]:"fire-gcs",[JV]:"fire-gcs-compat",[ZV]:"fire-fst",[t8]:"fire-fst-compat",[e8]:"fire-vertex","fire-js":"fire-js",[n8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Map,i8=new Map,qv=new Map;function I1(t,e){try{t.container.addComponent(e)}catch(n){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(qv.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;qv.set(e,t);for(const n of Yh.values())I1(n,t);for(const n of i8.values())I1(n,t);return!0}function E0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new Nu("app","Firebase",o8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=r8;function Oj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ci.create("bad-app-name",{appName:String(s)});if(n||(n=kj()),!n)throw ci.create("no-options");const i=Yh.get(s);if(i){if(Co(n,i.options)&&Co(r,i.config))return i;throw ci.create("duplicate-app",{appName:s})}const o=new fV(s);for(const c of qv.values())o.addComponent(c);const l=new a8(n,r,o);return Yh.set(s,l),l}function Lj(t=Gv){const e=Yh.get(t);if(!e&&t===Gv&&kj())return Oj();if(!e)throw ci.create("no-app",{appName:t});return e}function ui(t,e,n){let r=s8[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(o.join(" "));return}qa(new No(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8="firebase-heartbeat-database",c8=1,Hc="firebase-heartbeat-store";let Hp=null;function Fj(){return Hp||(Hp=EV(l8,c8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),Hp}async function u8(t){try{const n=(await Fj()).transaction(Hc),r=await n.objectStore(Hc).get($j(t));return await n.done,r}catch(e){if(e instanceof ji)vs.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(n.message)}}}async function P1(t,e){try{const r=(await Fj()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,$j(t)),await r.done}catch(n){if(n instanceof ji)vs.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vs.warn(r.message)}}}function $j(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=1024,h8=30;class f8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=A1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>h8){const o=g8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A1(),{heartbeatsToSend:r,unsentEntries:s}=m8(this._heartbeatsCache.heartbeats),i=Gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return vs.warn(n),""}}}function A1(){return new Date().toISOString().substring(0,10)}function m8(t,e=d8){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),D1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),D1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J$()?Z$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return P1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function D1(t){return Gh(JSON.stringify({version:2,heartbeats:t})).length}function g8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){qa(new No("platform-logger",e=>new jV(e),"PRIVATE")),qa(new No("heartbeat",e=>new f8(e),"PRIVATE")),ui(Hv,R1,t),ui(Hv,R1,"esm2020"),ui("fire-js","")}v8("");function Vj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y8=Vj,Uj=new Nu("auth","Firebase",Vj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new N0("@firebase/auth");function x8(t,...e){Qh.logLevel<=Ie.WARN&&Qh.warn(`Auth (${ml}): ${t}`,...e)}function Qd(t,...e){Qh.logLevel<=Ie.ERROR&&Qh.error(`Auth (${ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t,...e){throw k0(t,...e)}function Mr(t,...e){return k0(t,...e)}function Bj(t,e,n){const r={...y8(),[e]:n};return new Nu("auth","Firebase",r).create(e,{appName:t.name})}function di(t){return Bj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Uj.create(t,...e)}function ce(t,e,...n){if(!t)throw k0(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function xs(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function w8(){return M1()==="http:"||M1()==="https:"}function M1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w8()||Q$()||"connection"in navigator)?navigator.onLine:!0}function _8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.shortDelay=e,this.longDelay=n,xs(n>e,"Short delay should be less than long delay!"),this.isMobile=C0()||Ij()}get(){return b8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){xs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S8=new Su(3e4,6e4);function pm(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function pl(t,e,n,r,s={}){return Wj(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=fl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return Y$()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&hl(t.emulatorConfig.host)&&(u.credentials="include"),zj.fetch()(await Gj(t,t.config.apiHost,n,l),u)})}async function Wj(t,e,n){t._canInitEmulator=!1;const r={...C8,...e};try{const s=new E8(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw yd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw yd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw yd(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bj(t,d,u);ys(t,d)}}catch(s){if(s instanceof ji)throw s;ys(t,"network-request-failed",{message:String(s)})}}async function Hj(t,e,n,r,s={}){const i=await pl(t,e,n,r,s);return"mfaPendingCredential"in i&&ys(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gj(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?T0(t.config,s):`${t.config.apiScheme}://${s}`;return N8.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class E8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mr(this.auth,"network-request-failed")),S8.get())})}}function yd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(t,e){return pl(t,"POST","/v1/accounts:delete",e)}async function Xh(t,e){return pl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T8(t,e=!1){const n=dn(t),r=await n.getIdToken(e),s=j0(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hc(Gp(s.auth_time)),issuedAtTime:hc(Gp(s.iat)),expirationTime:hc(Gp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gp(t){return Number(t)*1e3}function j0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=qh(n);return s?JSON.parse(s):(Qd("Failed to decode base64 JWT payload"),null)}catch(s){return Qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function O1(t){const e=j0(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ji&&j8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function j8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Gc(t,Xh(e,{idToken:n}));ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?qj(s.providerUserInfo):[],o=P8(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function I8(t){const e=dn(t);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A8(t,e){const n=await Wj(t,{},async()=>{const r=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Gj(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&hl(t.emulatorConfig.host)&&(c.credentials="include"),zj.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D8(t,e){return pl(t,"POST","/v2/accounts:revokeToken",pm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=O1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await A8(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ba;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ba,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new R8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T8(this,e)}reload(){return I8(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Jh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await Gc(this,k8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:g}=n;ce(h&&g,e,"internal-error");const y=ba.fromJSON(this.name,g);ce(typeof h=="string",e,"internal-error"),Rs(r,e.name),Rs(s,e.name),ce(typeof f=="boolean",e,"internal-error"),ce(typeof p=="boolean",e,"internal-error"),Rs(i,e.name),Rs(o,e.name),Rs(l,e.name),Rs(c,e.name),Rs(u,e.name),Rs(d,e.name);const x=new sr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:y,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(x.providerData=w.map(v=>({...v}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ba;s.updateFromServerResponse(n);const i=new sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Jh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?qj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ba;l.updateFromIdToken(r);const c=new sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Yv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new Map;function as(t){xs(t instanceof Function,"Expected a class definition");let e=L1.get(t);return e?(xs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Kj.type="NONE";const F1=Kj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e,n){return`firebase:${t}:${e}:${n}`}class _a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Xd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xh(this.auth,{idToken:e}).catch(()=>{});return n?sr._fromGetAccountInfoResponse(this.auth,n,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _a(as(F1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||as(F1);const o=Xd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await Xh(e,{idToken:d}).catch(()=>{});if(!f)break;h=await sr._fromGetAccountInfoResponse(e,f,d)}else h=sr._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new _a(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new _a(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eR(e))return"Blackberry";if(tR(e))return"Webos";if(Qj(e))return"Safari";if((e.includes("chrome/")||Xj(e))&&!e.includes("edge/"))return"Chrome";if(Zj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yj(t=Qt()){return/firefox\//i.test(t)}function Qj(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xj(t=Qt()){return/crios\//i.test(t)}function Jj(t=Qt()){return/iemobile/i.test(t)}function Zj(t=Qt()){return/android/i.test(t)}function eR(t=Qt()){return/blackberry/i.test(t)}function tR(t=Qt()){return/webos/i.test(t)}function R0(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function M8(t=Qt()){var e;return R0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function O8(){return X$()&&document.documentMode===10}function nR(t=Qt()){return R0(t)||Zj(t)||tR(t)||eR(t)||/windows phone/i.test(t)||Jj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e=[]){let n;switch(t){case"Browser":n=$1(Qt());break;case"Worker":n=`${$1(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ml}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t,e={}){return pl(t,"GET","/v2/passwordPolicy",pm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=6;class V8{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$8,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V1(this),this.idTokenSubscription=new V1(this),this.beforeStateQueue=new L8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=as(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xh(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(di(this));const n=e?dn(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F8(this),n=new V8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&as(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[as(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&x8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gm(t){return dn(t)}class V1{constructor(e){this.auth=e,this.observer=null,this.addObserver=oV(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B8(t){I0=t}function z8(t){return I0.loadJS(t)}function W8(){return I0.gapiScript}function H8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G8(t,e){const n=E0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Co(i,e??{}))return s;ys(s,"already-initialized")}return n.initialize({options:e})}function q8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K8(t,e,n){const r=gm(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=sR(e),{host:o,port:l}=Y8(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(Co(u,r.config.emulator)&&Co(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,hl(o)?(jj(`${i}//${o}${c}`),Rj("Auth",!0)):Q8()}function sR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y8(t){const e=sR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:U1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:U1(o)}}}function U1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ca(t,e){return Hj(t,"POST","/v1/accounts:signInWithIdp",pm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="http://localhost";class So extends iR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ys("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new So(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ca(e,n)}buildRequest(){const e={requestUri:X8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends oR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Eu{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return So._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $s.credential(n,r)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Eu{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Eu{constructor(){super("twitter.com")}static credential(e,n){return So._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(t,e){return Hj(t,"POST","/v1/accounts:signUp",pm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sr._fromIdTokenResponse(e,r,s),o=B1(r);return new xi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=B1(r);return new xi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function B1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(t){var s;if(nr(t.app))return Promise.reject(di(t));const e=gm(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new xi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await J8(e,{returnSecureToken:!0}),r=await xi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends ji{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zh(e,n,r,s)}}function aR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(t,i,e,r):i})}async function eU(t,e,n=!1){const r=await Gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(t,e,n=!1){const{auth:r}=t;if(nr(r.app))return Promise.reject(di(r));const s="reauthenticate";try{const i=await Gc(t,aR(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=j0(i.idToken);ce(o,r,"internal-error");const{sub:l}=o;return ce(t.uid===l,r,"user-mismatch"),xi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ys(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e,n=!1){if(nr(t.app))return Promise.reject(di(t));const r="signIn",s=await aR(t,r,e),i=await xi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function rU(t,e,n,r){return dn(t).onIdTokenChanged(e,n,r)}function sU(t,e,n){return dn(t).beforeAuthStateChanged(e,n)}function iU(t,e,n,r){return dn(t).onAuthStateChanged(e,n,r)}function oU(t){return dn(t).signOut()}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=1e3,lU=10;class cR extends lR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);O8()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},aU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cR.type="LOCAL";const cU=cR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends lR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uR.type="SESSION";const dR=uR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await uU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=P0("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function hU(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function fU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function pU(){return hR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="firebaseLocalStorageDb",gU=1,tf="firebaseLocalStorage",mR="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ym(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function vU(){const t=indexedDB.deleteDatabase(fR);return new ku(t).toPromise()}function Qv(){const t=indexedDB.open(fR,gU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tf,{keyPath:mR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tf)?e(r):(r.close(),await vU(),e(await Qv()))})})}async function z1(t,e,n){const r=ym(t,!0).put({[mR]:e,value:n});return new ku(r).toPromise()}async function yU(t,e){const n=ym(t,!1).get(e),r=await new ku(n).toPromise();return r===void 0?null:r.value}function W1(t,e){const n=ym(t,!0).delete(e);return new ku(n).toPromise()}const xU=800,wU=3;class pR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vm._getInstance(pU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await fU(),!this.activeServiceWorker)return;this.sender=new dU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qv();return await z1(e,ef,"1"),await W1(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>z1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ym(s,!1).getAll();return new ku(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pR.type="LOCAL";const bU=pR;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t,e){return e?as(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends iR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CU(t){return nU(t.auth,new A0(t),t.bypassAuthState)}function NU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),tU(n,new A0(t),t.bypassAuthState)}async function SU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),eU(n,new A0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CU;case"linkViaPopup":case"linkViaRedirect":return SU;case"reauthViaPopup":case"reauthViaRedirect":return NU;default:ys(this.auth,"internal-error")}}resolve(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=new Su(2e3,1e4);class ra extends gR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){xs(this.filter.length===1,"Popup operations only handle one event");const e=P0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EU.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="pendingRedirect",Jd=new Map;class TU extends gR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const r=await jU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jU(t,e){const n=PU(e),r=IU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function RU(t,e){Jd.set(t._key(),e)}function IU(t){return as(t._redirectPersistence)}function PU(t){return Xd(kU,t.config.apiKey,t.name)}async function AU(t,e,n=!1){if(nr(t.app))return Promise.reject(di(t));const r=gm(t),s=_U(r,e),o=await new TU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=10*60*1e3;class MU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vR(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DU&&this.cachedEventUids.clear(),this.cachedEventUids.has(H1(e))}saveEventToCache(e){this.cachedEventUids.add(H1(e)),this.lastProcessedEventTime=Date.now()}}function H1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e={}){return pl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$U=/^https?/;async function VU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LU(t);for(const n of e)try{if(UU(n))return}catch{}ys(t,"unauthorized-domain")}function UU(t){const e=Kv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$U.test(n))return!1;if(FU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=new Su(3e4,6e4);function G1(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zU(t){return new Promise((e,n)=>{var s,i,o;function r(){G1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{G1(),n(Mr(t,"network-request-failed"))},timeout:BU.get()})}if((i=(s=Or().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Or().gapi)!=null&&o.load)r();else{const l=H8("iframefcb");return Or()[l]=()=>{gapi.load?r():n(Mr(t,"network-request-failed"))},z8(`${W8()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function WU(t){return Zd=Zd||zU(t),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new Su(5e3,15e3),GU="__/auth/iframe",qU="emulator/auth/iframe",KU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QU(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?T0(e,qU):`https://${t.config.authDomain}/${GU}`,r={apiKey:e.apiKey,appName:t.name,v:ml},s=YU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fl(r).slice(1)}`}async function XU(t){const e=await WU(t),n=Or().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:QU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Mr(t,"network-request-failed"),l=Or().setTimeout(()=>{i(o)},HU.get());function c(){Or().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZU=500,eB=600,tB="_blank",nB="http://localhost";class q1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rB(t,e,n,r=ZU,s=eB){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...JU,width:r.toString(),height:s.toString(),top:i,left:o},u=Qt().toLowerCase();n&&(l=Xj(u)?tB:n),Yj(u)&&(e=e||nB,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(M8(u)&&l!=="_self")return sB(e||"",l),new q1(null);const h=window.open(e||"",l,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new q1(h)}function sB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="__/auth/handler",oB="emulator/auth/handler",aB=encodeURIComponent("fac");async function K1(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ml,eventId:s};if(e instanceof oR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Bv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Eu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${aB}=${encodeURIComponent(c)}`:"";return`${lB(t)}?${fl(l).slice(1)}${u}`}function lB({config:t}){return t.emulator?T0(t,oB):`https://${t.authDomain}/${iB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="webStorageSupport";class cB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dR,this._completeRedirectFn=AU,this._overrideRedirectResult=RU}async _openPopup(e,n,r,s){var o;xs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await K1(e,n,r,Kv(),s);return rB(e,i,P0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await K1(e,n,r,Kv(),s);return hU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(xs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XU(e),r=new MU(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qp,{type:qp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[qp];i!==void 0&&n(!!i),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nR()||Qj()||R0()}}const uB=cB;var Y1="@firebase/auth",Q1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fB(t){qa(new No("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rR(t)},u=new U8(r,s,i,c);return q8(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qa(new No("auth-internal",e=>{const n=gm(e.getProvider("auth").getImmediate());return(r=>new dB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Y1,Q1,hB(t)),ui(Y1,Q1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=5*60,pB=Tj("authIdTokenMaxAge")||mB;let X1=null;const gB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pB)return;const s=n==null?void 0:n.token;X1!==s&&(X1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vB(t=Lj()){const e=E0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=G8(t,{popupRedirectResolver:uB,persistence:[bU,cU,dR]}),r=Tj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=gB(i.toString());sU(n,o,()=>o(n.currentUser)),rU(n,l=>o(l))}}const s=Ej("auth");return s&&K8(n,`http://${s}`),n}function yB(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}B8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Mr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fB("Browser");var J1={};const Z1="@firebase/database",eC="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yR="";function xB(t){yR=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ht(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wB(e)}}catch{}return new bB},Yi=xR("localStorage"),_B=xR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new N0("@firebase/database"),CB=function(){let t=1;return function(){return t++}}(),wR=function(t){const e=cV(t),n=new iV;n.update(e);const r=n.digest();return b0.encodeByteArray(r)},Tu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Tu.apply(null,r):typeof r=="object"?e+=ht(r):e+=r,e+=" "}return e};let fc=null,tC=!0;const NB=function(t,e){Y(!e,"Can't turn on custom loggers persistently."),Na.logLevel=Ie.VERBOSE,fc=Na.log.bind(Na)},Tt=function(...t){if(tC===!0&&(tC=!1,fc===null&&_B.get("logging_enabled")===!0&&NB()),fc){const e=Tu.apply(null,t);fc(e)}},ju=function(t){return function(...e){Tt(t,...e)}},Xv=function(...t){const e="FIREBASE INTERNAL ERROR: "+Tu(...t);Na.error(e)},ws=function(...t){const e=`FIREBASE FATAL ERROR: ${Tu(...t)}`;throw Na.error(e),new Error(e)},Yt=function(...t){const e="FIREBASE WARNING: "+Tu(...t);Na.warn(e)},SB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},D0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},EB=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ka="[MIN_NAME]",Eo="[MAX_NAME]",Mo=function(t,e){if(t===e)return 0;if(t===Ka||e===Eo)return-1;if(e===Ka||t===Eo)return 1;{const n=nC(t),r=nC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},kB=function(t,e){return t===e?0:t<e?-1:1},Vl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ht(e))},M0=function(t){if(typeof t!="object"||t===null)return ht(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ht(e[r]),n+=":",n+=M0(t[e[r]]);return n+="}",n},bR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function It(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _R=function(t){Y(!D0(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},TB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},jB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function RB(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const IB=new RegExp("^-?(0*)\\d{1,10}$"),PB=-2147483648,AB=2147483647,nC=function(t){if(IB.test(t)){const e=Number(t);if(e>=PB&&e<=AB)return e}return null},gl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Yt("Exception was thrown by user callback.",n),e},Math.floor(0))}},DB=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},mc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,nr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Yt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yt(e)}}class eh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}eh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="5",CR="v",NR="s",SR="r",ER="f",kR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TR="ls",jR="p",Jv="ac",RR="websocket",IR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,s,i=!1,o="",l=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function LB(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function AR(t,e,n){Y(typeof e=="string","typeof type must == string"),Y(typeof n=="object","typeof params must == object");let r;if(e===RR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===IR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LB(t)&&(n.ns=t.namespace);const s=[];return It(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.counters_={}}incrementCounter(e,n=1){zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $$(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp={},Yp={};function L0(t){const e=t.toString();return Kp[e]||(Kp[e]=new FB),Kp[e]}function $B(t,e){const n=t.toString();return Yp[n]||(Yp[n]=e()),Yp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&gl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="start",UB="close",BB="pLPCommand",zB="pRTLPCB",DR="id",MR="pw",OR="ser",WB="cb",HB="seg",GB="ts",qB="d",KB="dframe",LR=1870,FR=30,YB=LR-FR,QB=25e3,XB=3e4;class sa{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ju(e),this.stats_=L0(n),this.urlFn=c=>(this.appCheckToken&&(c[Jv]=this.appCheckToken),AR(n,IR,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new VB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(XB)),EB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new F0((...i)=>{const[o,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rC)this.id=l,this.password=c;else if(o===UB)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[rC]="t",r[OR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[WB]=this.scriptTagHolder.uniqueCallbackIdentifier),r[CR]=O0,this.transportSessionId&&(r[NR]=this.transportSessionId),this.lastSessionId&&(r[TR]=this.lastSessionId),this.applicationId&&(r[jR]=this.applicationId),this.appCheckToken&&(r[Jv]=this.appCheckToken),typeof location<"u"&&location.hostname&&kR.test(location.hostname)&&(r[SR]=ER);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sa.forceAllow_=!0}static forceDisallow(){sa.forceDisallow_=!0}static isAvailable(){return sa.forceAllow_?!0:!sa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TB()&&!jB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Nj(n),s=bR(r,YB);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[KB]="t",r[DR]=e,r[MR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ht(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class F0{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CB(),window[BB+this.uniqueCallbackIdentifier]=e,window[zB+this.uniqueCallbackIdentifier]=n,this.myIFrame=F0.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Tt("frame writing exception"),l.stack&&Tt(l.stack),Tt(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[DR]=this.myID,e[MR]=this.myPW,e[OR]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+FR+r.length<=LR;){const o=this.pendingSegs.shift();r=r+"&"+HB+s+"="+o.seg+"&"+GB+s+"="+o.ts+"&"+qB+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(QB)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=16384,ZB=45e3;let nf=null;typeof MozWebSocket<"u"?nf=MozWebSocket:typeof WebSocket<"u"&&(nf=WebSocket);class rr{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ju(this.connId),this.stats_=L0(n),this.connURL=rr.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[CR]=O0,typeof location<"u"&&location.hostname&&kR.test(location.hostname)&&(o[SR]=ER),n&&(o[NR]=n),r&&(o[TR]=r),s&&(o[Jv]=s),i&&(o[jR]=i),AR(e,RR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yi.set("previous_websocket_failure",!0);try{let r;Pj(),this.mySock=new nf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){rr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&nf!==null&&!rr.forceDisallow_}static previouslyFailed(){return Yi.isInMemoryStorage||Yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Wc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Y(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=bR(n,JB);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZB))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rr.responsesRequiredToBeHealthy=2;rr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{static get ALL_TRANSPORTS(){return[sa,rr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=rr&&rr.isAvailable();let r=n&&!rr.previouslyFailed();if(e.webSocketOnly&&(n||Yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rr];else{const s=this.transports_=[];for(const i of qc.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);qc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=6e4,tz=5e3,nz=10*1024,rz=100*1024,Qp="t",sC="d",sz="s",iC="r",iz="e",oC="o",aC="a",lC="n",cC="p",oz="h";class az{constructor(e,n,r,s,i,o,l,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ju("c:"+this.id+":"),this.transportManager_=new qc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=mc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qp in e){const n=e[Qp];n===aC?this.upgradeIfSecondaryHealthy_():n===iC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===oC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Vl("t",e),r=Vl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Vl("t",e),r=Vl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Vl(Qp,e);if(sC in e){const r=e[sC];if(n===oz){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===lC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sz?this.onConnectionShutdown_(r):n===iC?this.onReset_(r):n===iz?Xv("Server Error: "+r):n===oC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),O0!==r&&Yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),mc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ez))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.allowedEvents_=e,this.listeners_={},Y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends VR{static getInstance(){return new rf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!C0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=32,dC=768;class Pe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Se(){return new Pe("")}function ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wi(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Pe(t.pieces_,e)}function $0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function lz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Kc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function UR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Pe(e,0)}function et(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Pe(n,0)}function xe(t){return t.pieceNum_>=t.pieces_.length}function Gt(t,e){const n=ve(t),r=ve(e);if(n===null)return e;if(n===r)return Gt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cz(t,e){const n=Kc(t,0),r=Kc(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Mo(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function V0(t,e){if(wi(t)!==wi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Dn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(wi(t)>wi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class uz{constructor(e,n){this.errorPrefix_=n,this.parts_=Kc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=mm(this.parts_[r]);BR(this)}}function dz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=mm(e),BR(t)}function hz(t){const e=t.parts_.pop();t.byteLength_-=mm(e),t.parts_.length>0&&(t.byteLength_-=1)}function BR(t){if(t.byteLength_>dC)throw new Error(t.errorPrefix_+"has a key path longer than "+dC+" bytes ("+t.byteLength_+").");if(t.parts_.length>uC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uC+") or object contains a cycle "+zi(t))}function zi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0 extends VR{static getInstance(){return new U0}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Y(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=1e3,fz=60*5*1e3,hC=30*1e3,mz=1.3,pz=3e4,gz="server_kill",fC=3;class us extends $R{constructor(e,n,r,s,i,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=us.nextPersistentConnectionId_++,this.log_=ju("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ul,this.maxReconnectDelay_=fz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Pj())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");U0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&rf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ht(i)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Cu,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;us.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&zr(e,"w")){const r=Ga(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sV(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=rV(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Y(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ht(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xv("Unrecognized action received from server: "+ht(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ul,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ul,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pz&&(this.reconnectDelay_=Ul),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*mz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+us.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,r())},u=function(h){Y(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Tt("getToken() completed but was canceled"):(Tt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new az(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{Yt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(gz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Yt(h),c())}}}interrupt(e){Tt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Bv(this.interruptReasons_)&&(this.reconnectDelay_=Ul,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>M0(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Pe(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Tt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fC&&(this.reconnectDelay_=hC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Tt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yR.replace(/\./g,"-")]=1,C0()?e["framework.cordova"]=1:Ij()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=rf.getInstance().currentlyOnline();return Bv(this.interruptReasons_)&&e}}us.nextPersistentConnectionId_=0;us.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ye(Ka,e),s=new ye(Ka,n);return this.compare(r,s)!==0}minPost(){return ye.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd;class zR extends xm{static get __EMPTY_NODE(){return xd}static set __EMPTY_NODE(e){xd=e}compare(e,n){return Mo(e.name,n.name)}isDefinedOn(e){throw dl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ye.MIN}maxPost(){return new ye(Eo,xd)}makePost(e,n){return Y(typeof e=="string","KeyIndex indexValue must always be a string."),new ye(e,xd)}toString(){return".key"}}const Sa=new zR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??rn.EMPTY_NODE,this.right=i??rn.EMPTY_NODE}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return rn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return rn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}xt.RED=!0;xt.BLACK=!1;class vz{copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class rn{constructor(e,n=rn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new rn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))}remove(e){return new rn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new wd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new wd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new wd(this.root_,null,this.comparator_,!0,e)}}rn.EMPTY_NODE=new vz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t,e){return Mo(t.name,e.name)}function B0(t,e){return Mo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zv;function xz(t){Zv=t}const WR=function(t){return typeof t=="number"?"number:"+_R(t):"string:"+t},HR=function(t){if(t.isLeafNode()){const e=t.val();Y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zr(e,".sv"),"Priority must be a string or number.")}else Y(t===Zv||t.isEmpty(),"priority of unexpected type.");Y(t===Zv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mC;class vt{static set __childrenNodeConstructor(e){mC=e}static get __childrenNodeConstructor(){return mC}constructor(e,n=vt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),HR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xe(e)?this:ve(e)===".priority"?this.priorityNode_:vt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:vt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ve(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Y(r!==".priority"||wi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,vt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+WR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_R(this.value_):e+=this.value_,this.lazyHash_=wR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vt.__childrenNodeConstructor?-1:(Y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=vt.VALUE_TYPE_ORDER.indexOf(n),i=vt.VALUE_TYPE_ORDER.indexOf(r);return Y(s>=0,"Unknown leaf type: "+n),Y(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}vt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GR,qR;function wz(t){GR=t}function bz(t){qR=t}class _z extends xm{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(Eo,new vt("[PRIORITY-POST]",qR))}makePost(e,n){const r=GR(e);return new ye(n,new vt("[PRIORITY-POST]",r))}toString(){return".priority"}}const tt=new _z;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=Math.log(2);class Nz{constructor(e){const n=i=>parseInt(Math.log(i)/Cz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sf=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new xt(f,h.node,xt.BLACK,null,null);{const p=parseInt(d/2,10)+c,w=s(c,p),g=s(p+1,u);return h=t[p],f=n?n(h):h,new xt(f,h.node,xt.BLACK,w,g)}},i=function(c){let u=null,d=null,h=t.length;const f=function(w,g){const y=h-w,x=h;h-=w;const v=s(y+1,x),b=t[y],N=n?n(b):b;p(new xt(N,b.node,g,null,v))},p=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(w+1));g?f(y,xt.BLACK):(f(y,xt.BLACK),f(y,xt.RED))}return d},o=new Nz(t.length),l=i(o);return new rn(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xp;const Vo={};class ls{static get Default(){return Y(Vo&&tt,"ChildrenNode.ts has not been loaded"),Xp=Xp||new ls({".priority":Vo},{".priority":tt}),Xp}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ga(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof rn?n:null}hasIndex(e){return zr(this.indexSet_,e.toString())}addIndex(e,n){Y(e!==Sa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ye.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=sf(r,e.getCompare()):l=Vo;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=l,new ls(d,u)}addToIndexes(e,n){const r=Kh(this.indexes_,(s,i)=>{const o=Ga(this.indexSet_,i);if(Y(o,"Missing index implementation for "+i),s===Vo)if(o.isDefinedOn(e.node)){const l=[],c=n.getIterator(ye.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),sf(l,o.getCompare())}else return Vo;else{const l=n.get(e.name);let c=s;return l&&(c=c.remove(new ye(e.name,l))),c.insert(e,e.node)}});return new ls(r,this.indexSet_)}removeFromIndexes(e,n){const r=Kh(this.indexes_,s=>{if(s===Vo)return s;{const i=n.get(e.name);return i?s.remove(new ye(e.name,i)):s}});return new ls(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl;class se{static get EMPTY_NODE(){return Bl||(Bl=new se(new rn(B0),null,ls.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&HR(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bl}updatePriority(e){return this.children_.isEmpty()?this:new se(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Bl:n}}getChild(e){const n=ve(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Y(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ye(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Bl:this.priorityNode_;return new se(s,o,i)}}updateChild(e,n){const r=ve(e);if(r===null)return n;{Y(ve(e)!==".priority"||wi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(tt,(o,l)=>{n[o]=l.val(e),r++,i&&se.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+WR(this.getPriority().val())+":"),this.forEachChild(tt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":wR(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ye(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ye(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ye.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ye.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ru?-1:0}withIndex(e){if(e===Sa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new se(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Sa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(tt),s=n.getIterator(tt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Sa?null:this.indexMap_.get(e.toString())}}se.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Sz extends se{constructor(){super(new rn(B0),se.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return se.EMPTY_NODE}isEmpty(){return!1}}const Ru=new Sz;Object.defineProperties(ye,{MIN:{value:new ye(Ka,se.EMPTY_NODE)},MAX:{value:new ye(Eo,Ru)}});zR.__EMPTY_NODE=se.EMPTY_NODE;vt.__childrenNodeConstructor=se;xz(Ru);bz(Ru);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez=!0;function ut(t,e=null){if(t===null)return se.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new vt(n,ut(e))}if(!(t instanceof Array)&&Ez){const n=[];let r=!1;if(It(t,(o,l)=>{if(o.substring(0,1)!=="."){const c=ut(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ye(o,c)))}}),n.length===0)return se.EMPTY_NODE;const i=sf(n,yz,o=>o.name,B0);if(r){const o=sf(n,tt.getCompare());return new se(i,ut(e),new ls({".priority":o},{".priority":tt}))}else return new se(i,ut(e),ls.Default)}else{let n=se.EMPTY_NODE;return It(t,(r,s)=>{if(zr(t,r)&&r.substring(0,1)!=="."){const i=ut(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ut(e))}}wz(ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz extends xm{constructor(e){super(),this.indexPath_=e,Y(!xe(e)&&ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Mo(e.name,n.name):i}makePost(e,n){const r=ut(e),s=se.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(n,s)}maxPost(){const e=se.EMPTY_NODE.updateChild(this.indexPath_,Ru);return new ye(Eo,e)}toString(){return Kc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz extends xm{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Mo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(e,n){const r=ut(e);return new ye(n,r)}toString(){return".value"}}const jz=new Tz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){return{type:"value",snapshotNode:t}}function Ya(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Rz(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Yc(n,l)):Y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Ya(n,r)):o.trackChildChange(Qc(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(tt,(s,i)=>{n.hasChild(s)||r.trackChildChange(Yc(s,i))}),n.isLeafNode()||n.forEachChild(tt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Qc(s,i,o))}else r.trackChildChange(Ya(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?se.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.indexedFilter_=new z0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xc.getStartPost_(e),this.endPost_=Xc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ye(n,r))||(r=se.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=se.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(se.EMPTY_NODE);const i=this;return n.forEachChild(tt,(o,l)=>{i.matches(new ye(o,l))||(s=s.updateImmediateChild(o,se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ye(n,r))||(r=se.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=se.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(se.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const l=e;Y(l.numChildren()===this.limit_,"");const c=new ye(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,c);if(d&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(Qc(n,r,h)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Yc(n,h));const g=l.updateImmediateChild(n,se.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Ya(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(Yc(u.name,u.node)),i.trackChildChange(Ya(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,se.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ka}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tt}copy(){const e=new W0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Pz(t){return t.loadsAllData()?new z0(t.getIndex()):t.hasLimit()?new Iz(t):new Xc(t)}function pC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tt?n="$priority":t.index_===jz?n="$value":t.index_===Sa?n="$key":(Y(t.index_ instanceof kz,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ht(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ht(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ht(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ht(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ht(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function gC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of extends $R{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=ju("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=of.getListenId_(e,r),l={};this.listens_[o]=l;const c=pC(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),Ga(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=of.getListenId_(e,n);delete this.listens_[r]}get(e){const n=pC(e._queryParams),r=e._path.toString(),s=new Cu;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fl(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Wc(l.responseText)}catch{Yt("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&Yt("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(){this.rootNode_=se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(){return{value:null,children:new Map}}function YR(t,e,n){if(xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ve(e);t.children.has(r)||t.children.set(r,af());const s=t.children.get(r);e=Oe(e),YR(s,e,n)}}function ey(t,e,n){t.value!==null?n(e,t.value):Dz(t,(r,s)=>{const i=new Pe(e.toString()+"/"+r);ey(s,i,n)})}function Dz(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&It(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=10*1e3,Oz=30*1e3,Lz=5*60*1e3;class Fz{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Mz(e);const r=vC+(Oz-vC)*Math.random();mc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;It(e,(s,i)=>{i>0&&zr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),mc(this.reportStats_.bind(this),Math.floor(Math.random()*2*Lz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ir||(ir={}));function H0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function G0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function q0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ir.ACK_USER_WRITE,this.source=H0()}operationForChild(e){if(xe(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Pe(e));return new lf(Se(),n,this.revert)}}else return Y(ve(this.path)===e,"operationForChild called for unrelated child."),new lf(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.source=e,this.path=n,this.type=ir.LISTEN_COMPLETE}operationForChild(e){return xe(this.path)?new Jc(this.source,Se()):new Jc(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ir.OVERWRITE}operationForChild(e){return xe(this.path)?new ko(this.source,Se(),this.snap.getImmediateChild(e)):new ko(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ir.MERGE}operationForChild(e){if(xe(this.path)){const n=this.children.subtree(new Pe(e));return n.isEmpty()?null:n.value?new ko(this.source,Se(),n.value):new Qa(this.source,Se(),n)}else return Y(ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qa(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Vz(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Rz(o.childName,o.snapshotNode))}),zl(t,s,"child_removed",e,r,n),zl(t,s,"child_added",e,r,n),zl(t,s,"child_moved",i,r,n),zl(t,s,"child_changed",e,r,n),zl(t,s,"value",e,r,n),s}function zl(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,c)=>Bz(t,l,c)),o.forEach(l=>{const c=Uz(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function Uz(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Bz(t,e,n){if(e.childName==null||n.childName==null)throw dl("Should only compare child_ events.");const r=new ye(e.childName,e.snapshotNode),s=new ye(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e){return{eventCache:t,serverCache:e}}function pc(t,e,n,r){return wm(new bi(e,n,r),t.serverCache)}function QR(t,e,n,r){return wm(t.eventCache,new bi(e,n,r))}function cf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function To(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;const zz=()=>(Jp||(Jp=new rn(kB)),Jp);class Me{static fromObject(e){let n=new Me(null);return It(e,(r,s)=>{n=n.set(new Pe(r),s)}),n}constructor(e,n=zz()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Se(),value:this.value};if(xe(e))return null;{const r=ve(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Oe(e),n);return i!=null?{path:et(new Pe(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(xe(e))return this;{const n=ve(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Me(null)}}set(e,n){if(xe(e))return new Me(n,this.children);{const r=ve(e),i=(this.children.get(r)||new Me(null)).set(Oe(e),n),o=this.children.insert(r,i);return new Me(this.value,o)}}remove(e){if(xe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ve(e),r=this.children.get(n);if(r){const s=r.remove(Oe(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Me(null):new Me(this.value,i)}else return this}}get(e){if(xe(e))return this.value;{const n=ve(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(xe(e))return n;{const r=ve(e),i=(this.children.get(r)||new Me(null)).setTree(Oe(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Me(this.value,o)}}fold(e){return this.fold_(Se(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(et(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Se(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(xe(e))return null;{const i=ve(e),o=this.children.get(i);return o?o.findOnPath_(Oe(e),et(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Se(),n)}foreachOnPath_(e,n,r){if(xe(e))return this;{this.value&&r(n,this.value);const s=ve(e),i=this.children.get(s);return i?i.foreachOnPath_(Oe(e),et(n,s),r):new Me(null)}}foreach(e){this.foreach_(Se(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(et(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.writeTree_=e}static empty(){return new lr(new Me(null))}}function gc(t,e,n){if(xe(e))return new lr(new Me(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Gt(s,e);return i=i.updateChild(o,n),new lr(t.writeTree_.set(s,i))}else{const s=new Me(n),i=t.writeTree_.setTree(e,s);return new lr(i)}}}function ty(t,e,n){let r=t;return It(n,(s,i)=>{r=gc(r,et(e,s),i)}),r}function yC(t,e){if(xe(e))return lr.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new lr(n)}}function ny(t,e){return Oo(t,e)!=null}function Oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Gt(n.path,e)):null}function xC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tt,(r,s)=>{e.push(new ye(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ye(r,s.value))}),e}function hi(t,e){if(xe(e))return t;{const n=Oo(t,e);return n!=null?new lr(new Me(n)):new lr(t.writeTree_.subtree(e))}}function ry(t){return t.writeTree_.isEmpty()}function Xa(t,e){return XR(Se(),t.writeTree_,e)}function XR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Y(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=XR(et(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(et(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){return tI(e,t)}function Wz(t,e,n,r,s){Y(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=gc(t.visibleWrites,e,n)),t.lastWriteId=r}function Hz(t,e,n,r){Y(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=ty(t.visibleWrites,e,n),t.lastWriteId=r}function Gz(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function qz(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);Y(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&Kz(l,r.path)?s=!1:Dn(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return Yz(t),!0;if(r.snap)t.visibleWrites=yC(t.visibleWrites,r.path);else{const l=r.children;It(l,c=>{t.visibleWrites=yC(t.visibleWrites,et(r.path,c))})}return!0}else return!1}function Kz(t,e){if(t.snap)return Dn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Dn(et(t.path,n),e))return!0;return!1}function Yz(t){t.visibleWrites=JR(t.allWrites,Qz,Se()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Qz(t){return t.visible}function JR(t,e,n){let r=lr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)Dn(n,o)?(l=Gt(n,o),r=gc(r,l,i.snap)):Dn(o,n)&&(l=Gt(o,n),r=gc(r,Se(),i.snap.getChild(l)));else if(i.children){if(Dn(n,o))l=Gt(n,o),r=ty(r,l,i.children);else if(Dn(o,n))if(l=Gt(o,n),xe(l))r=ty(r,Se(),i.children);else{const c=Ga(i.children,ve(l));if(c){const u=c.getChild(Oe(l));r=gc(r,Se(),u)}}}else throw dl("WriteRecord should have .snap or .children")}}return r}function ZR(t,e,n,r,s){if(!r&&!s){const i=Oo(t.visibleWrites,e);if(i!=null)return i;{const o=hi(t.visibleWrites,e);if(ry(o))return n;if(n==null&&!ny(o,Se()))return null;{const l=n||se.EMPTY_NODE;return Xa(o,l)}}}else{const i=hi(t.visibleWrites,e);if(!s&&ry(i))return n;if(!s&&n==null&&!ny(i,Se()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Dn(u.path,e)||Dn(e,u.path))},l=JR(t.allWrites,o,e),c=n||se.EMPTY_NODE;return Xa(l,c)}}}function Xz(t,e,n){let r=se.EMPTY_NODE;const s=Oo(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(tt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=hi(t.visibleWrites,e);return n.forEachChild(tt,(o,l)=>{const c=Xa(hi(i,new Pe(o)),l);r=r.updateImmediateChild(o,c)}),xC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=hi(t.visibleWrites,e);return xC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Jz(t,e,n,r,s){Y(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=et(e,n);if(ny(t.visibleWrites,i))return null;{const o=hi(t.visibleWrites,i);return ry(o)?s.getChild(n):Xa(o,s.getChild(n))}}function Zz(t,e,n,r){const s=et(e,n),i=Oo(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=hi(t.visibleWrites,s);return Xa(o,r.getNode().getImmediateChild(n))}else return null}function eW(t,e){return Oo(t.visibleWrites,e)}function tW(t,e,n,r,s,i,o){let l;const c=hi(t.visibleWrites,e),u=Oo(c,Se());if(u!=null)l=u;else if(n!=null)l=Xa(c,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function nW(){return{visibleWrites:lr.empty(),allWrites:[],lastWriteId:-1}}function uf(t,e,n,r){return ZR(t.writeTree,t.treePath,e,n,r)}function K0(t,e){return Xz(t.writeTree,t.treePath,e)}function wC(t,e,n,r){return Jz(t.writeTree,t.treePath,e,n,r)}function df(t,e){return eW(t.writeTree,et(t.treePath,e))}function rW(t,e,n,r,s,i){return tW(t.writeTree,t.treePath,e,n,r,s,i)}function Y0(t,e,n){return Zz(t.writeTree,t.treePath,e,n)}function eI(t,e){return tI(et(t.treePath,e),t.writeTree)}function tI(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Qc(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Yc(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Ya(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Qc(r,e.snapshotNode,s.oldSnap));else throw dl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const nI=new iW;class Q0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new bi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Y0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:To(this.viewCache_),i=rW(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t){return{filter:t}}function aW(t,e){Y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function lW(t,e,n,r,s){const i=new sW;let o,l;if(n.type===ir.OVERWRITE){const u=n;u.source.fromUser?o=sy(t,e,u.path,u.snap,r,s,i):(Y(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!xe(u.path),o=hf(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===ir.MERGE){const u=n;u.source.fromUser?o=uW(t,e,u.path,u.children,r,s,i):(Y(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=iy(t,e,u.path,u.children,r,s,l,i))}else if(n.type===ir.ACK_USER_WRITE){const u=n;u.revert?o=fW(t,e,u.path,r,s,i):o=dW(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===ir.LISTEN_COMPLETE)o=hW(t,e,n.path,r,i);else throw dl("Unknown operation type: "+n.type);const c=i.getChanges();return cW(e,o,c),{viewCache:o,changes:c}}function cW(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=cf(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(KR(cf(e)))}}function rI(t,e,n,r,s,i){const o=e.eventCache;if(df(r,n)!=null)return e;{let l,c;if(xe(n))if(Y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=To(e),d=u instanceof se?u:se.EMPTY_NODE,h=K0(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=uf(r,To(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ve(n);if(u===".priority"){Y(wi(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=wC(r,n,d,c);h!=null?l=t.filter.updatePriority(d,h):l=o.getNode()}else{const d=Oe(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=wC(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Y0(r,u,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),u,h,d,s,i):l=o.getNode()}}return pc(e,l,o.isFullyInitialized()||xe(n),t.filter.filtersNodes())}}function hf(t,e,n,r,s,i,o,l){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(xe(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),p,null)}else{const p=ve(n);if(!c.isCompleteForPath(n)&&wi(n)>1)return e;const w=Oe(n),y=c.getNode().getImmediateChild(p).updateChild(w,r);p===".priority"?u=d.updatePriority(c.getNode(),y):u=d.updateChild(c.getNode(),p,y,w,nI,null)}const h=QR(e,u,c.isFullyInitialized()||xe(n),d.filtersNodes()),f=new Q0(s,h,i);return rI(t,h,n,s,f,l)}function sy(t,e,n,r,s,i,o){const l=e.eventCache;let c,u;const d=new Q0(s,e,i);if(xe(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=pc(e,u,!0,t.filter.filtersNodes());else{const h=ve(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=pc(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=Oe(n),p=l.getNode().getImmediateChild(h);let w;if(xe(f))w=r;else{const g=d.getCompleteChild(h);g!=null?$0(f)===".priority"&&g.getChild(UR(f)).isEmpty()?w=g:w=g.updateChild(f,r):w=se.EMPTY_NODE}if(p.equals(w))c=e;else{const g=t.filter.updateChild(l.getNode(),h,w,f,d,o);c=pc(e,g,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function bC(t,e){return t.eventCache.isCompleteForChild(e)}function uW(t,e,n,r,s,i,o){let l=e;return r.foreach((c,u)=>{const d=et(n,c);bC(e,ve(d))&&(l=sy(t,l,d,u,s,i,o))}),r.foreach((c,u)=>{const d=et(n,c);bC(e,ve(d))||(l=sy(t,l,d,u,s,i,o))}),l}function _C(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function iy(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;xe(n)?u=r:u=new Me(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),w=_C(t,p,f);c=hf(t,c,new Pe(h),w,s,i,o,l)}}),u.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const w=e.serverCache.getNode().getImmediateChild(h),g=_C(t,w,f);c=hf(t,c,new Pe(h),g,s,i,o,l)}}),c}function dW(t,e,n,r,s,i,o){if(df(s,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(xe(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return hf(t,e,n,c.getNode().getChild(n),s,i,l,o);if(xe(n)){let u=new Me(null);return c.getNode().forEachChild(Sa,(d,h)=>{u=u.set(new Pe(d),h)}),iy(t,e,n,u,s,i,l,o)}else return e}else{let u=new Me(null);return r.foreach((d,h)=>{const f=et(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),iy(t,e,n,u,s,i,l,o)}}function hW(t,e,n,r,s){const i=e.serverCache,o=QR(e,i.getNode(),i.isFullyInitialized()||xe(n),i.isFiltered());return rI(t,o,n,r,nI,s)}function fW(t,e,n,r,s,i){let o;if(df(r,n)!=null)return e;{const l=new Q0(r,e,s),c=e.eventCache.getNode();let u;if(xe(n)||ve(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=uf(r,To(e));else{const h=e.serverCache.getNode();Y(h instanceof se,"serverChildren would be complete if leaf node"),d=K0(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=ve(n);let h=Y0(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,Oe(n),l,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,se.EMPTY_NODE,Oe(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=uf(r,To(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||df(r,Se())!=null,pc(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new z0(r.getIndex()),i=Pz(r);this.processor_=oW(i);const o=n.serverCache,l=n.eventCache,c=s.updateFullNode(se.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(se.EMPTY_NODE,l.getNode(),null),d=new bi(c,o.isFullyInitialized(),s.filtersNodes()),h=new bi(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=wm(h,d),this.eventGenerator_=new $z(this.query_)}get query(){return this.query_}}function pW(t){return t.viewCache_.serverCache.getNode()}function gW(t){return cf(t.viewCache_)}function vW(t,e){const n=To(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!xe(e)&&!n.getImmediateChild(ve(e)).isEmpty())?n.getChild(e):null}function CC(t){return t.eventRegistrations_.length===0}function yW(t,e){t.eventRegistrations_.push(e)}function NC(t,e,n){const r=[];if(n){Y(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function SC(t,e,n,r){e.type===ir.MERGE&&e.source.queryId!==null&&(Y(To(t.viewCache_),"We should always have a full cache before handling merges"),Y(cf(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=lW(t.processor_,s,e,n,r);return aW(t.processor_,i.viewCache),Y(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,sI(t,i.changes,i.viewCache.eventCache.getNode(),null)}function xW(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tt,(i,o)=>{r.push(Ya(i,o))}),n.isFullyInitialized()&&r.push(KR(n.getNode())),sI(t,r,n.getNode(),e)}function sI(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Vz(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff;class iI{constructor(){this.views=new Map}}function wW(t){Y(!ff,"__referenceConstructor has already been defined"),ff=t}function bW(){return Y(ff,"Reference.ts has not been loaded"),ff}function _W(t){return t.views.size===0}function X0(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Y(i!=null,"SyncTree gave us an op for an invalid query."),SC(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(SC(o,e,n,r));return i}}function oI(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=uf(n,s?r:null),c=!1;l?c=!0:r instanceof se?(l=K0(n,r),c=!1):(l=se.EMPTY_NODE,c=!1);const u=wm(new bi(l,c,!1),new bi(r,s,!1));return new mW(e,u)}return o}function CW(t,e,n,r,s,i){const o=oI(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),yW(o,n),xW(o,n)}function NW(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=_i(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(NC(u,n,r)),CC(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(NC(c,n,r)),CC(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!_i(t)&&i.push(new(bW())(e._repo,e._path)),{removed:i,events:o}}function aI(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function fi(t,e){let n=null;for(const r of t.views.values())n=n||vW(r,e);return n}function lI(t,e){if(e._queryParams.loadsAllData())return _m(t);{const r=e._queryIdentifier;return t.views.get(r)}}function cI(t,e){return lI(t,e)!=null}function _i(t){return _m(t)!=null}function _m(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;function SW(t){Y(!mf,"__referenceConstructor has already been defined"),mf=t}function EW(){return Y(mf,"Reference.ts has not been loaded"),mf}let kW=1;class EC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=nW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uI(t,e,n,r,s){return Wz(t.pendingWriteTree_,e,n,r,s),s?vl(t,new ko(H0(),e,n)):[]}function TW(t,e,n,r){Hz(t.pendingWriteTree_,e,n,r);const s=Me.fromObject(n);return vl(t,new Qa(H0(),e,s))}function Zs(t,e,n=!1){const r=Gz(t.pendingWriteTree_,e);if(qz(t.pendingWriteTree_,e)){let i=new Me(null);return r.snap!=null?i=i.set(Se(),!0):It(r.children,o=>{i=i.set(new Pe(o),!0)}),vl(t,new lf(r.path,i,n))}else return[]}function Iu(t,e,n){return vl(t,new ko(G0(),e,n))}function jW(t,e,n){const r=Me.fromObject(n);return vl(t,new Qa(G0(),e,r))}function RW(t,e){return vl(t,new Jc(G0(),e))}function IW(t,e,n){const r=Z0(t,n);if(r){const s=ew(r),i=s.path,o=s.queryId,l=Gt(i,e),c=new Jc(q0(o),l);return tw(t,i,c)}else return[]}function pf(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||cI(o,e))){const c=NW(o,e,n,r);_W(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,p)=>_i(p));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=DW(f);for(let w=0;w<p.length;++w){const g=p[w],y=g.query,x=mI(t,g);t.listenProvider_.startListening(vc(y),Zc(t,y),x.hashFn,x.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(vc(e),null):u.forEach(f=>{const p=t.queryToTagMap.get(Cm(f));t.listenProvider_.stopListening(vc(f),p)}))}MW(t,u)}return l}function dI(t,e,n,r){const s=Z0(t,r);if(s!=null){const i=ew(s),o=i.path,l=i.queryId,c=Gt(o,e),u=new ko(q0(l),c,n);return tw(t,o,u)}else return[]}function PW(t,e,n,r){const s=Z0(t,r);if(s){const i=ew(s),o=i.path,l=i.queryId,c=Gt(o,e),u=Me.fromObject(n),d=new Qa(q0(l),c,u);return tw(t,o,d)}else return[]}function oy(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const w=Gt(f,s);i=i||fi(p,w),o=o||_i(p)});let l=t.syncPointTree_.get(s);l?(o=o||_i(l),i=i||fi(l,Se())):(l=new iI,t.syncPointTree_=t.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=se.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,w)=>{const g=fi(w,Se());g&&(i=i.updateImmediateChild(p,g))}));const u=cI(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=Cm(e);Y(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=OW();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const d=bm(t.pendingWriteTree_,s);let h=CW(l,e,n,d,i,c);if(!u&&!o&&!r){const f=lI(l,e);h=h.concat(LW(t,e,f))}return h}function J0(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const c=Gt(o,e),u=fi(l,c);if(u)return u});return ZR(s,e,i,n,!0)}function AW(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Gt(u,n);r=r||fi(d,h)});let s=t.syncPointTree_.get(n);s?r=r||fi(s,Se()):(s=new iI,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new bi(r,!0,!1):null,l=bm(t.pendingWriteTree_,e._path),c=oI(s,e,l,i?o.getNode():se.EMPTY_NODE,i);return gW(c)}function vl(t,e){return hI(e,t.syncPointTree_,null,bm(t.pendingWriteTree_,Se()))}function hI(t,e,n,r){if(xe(t.path))return fI(t,e,n,r);{const s=e.get(Se());n==null&&s!=null&&(n=fi(s,Se()));let i=[];const o=ve(t.path),l=t.operationForChild(o),c=e.children.get(o);if(c&&l){const u=n?n.getImmediateChild(o):null,d=eI(r,o);i=i.concat(hI(l,c,u,d))}return s&&(i=i.concat(X0(s,t,r,n))),i}}function fI(t,e,n,r){const s=e.get(Se());n==null&&s!=null&&(n=fi(s,Se()));let i=[];return e.children.inorderTraversal((o,l)=>{const c=n?n.getImmediateChild(o):null,u=eI(r,o),d=t.operationForChild(o);d&&(i=i.concat(fI(d,l,c,u)))}),s&&(i=i.concat(X0(s,t,r,n))),i}function mI(t,e){const n=e.query,r=Zc(t,n);return{hashFn:()=>(pW(e)||se.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?IW(t,n._path,r):RW(t,n._path);{const i=RB(s,n);return pf(t,n,null,i)}}}}function Zc(t,e){const n=Cm(e);return t.queryToTagMap.get(n)}function Cm(t){return t._path.toString()+"$"+t._queryIdentifier}function Z0(t,e){return t.tagToQueryMap.get(e)}function ew(t){const e=t.indexOf("$");return Y(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pe(t.substr(0,e))}}function tw(t,e,n){const r=t.syncPointTree_.get(e);Y(r,"Missing sync point for query tag that we're tracking");const s=bm(t.pendingWriteTree_,e);return X0(r,n,s,null)}function DW(t){return t.fold((e,n,r)=>{if(n&&_i(n))return[_m(n)];{let s=[];return n&&(s=aI(n)),It(r,(i,o)=>{s=s.concat(o)}),s}})}function vc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(EW())(t._repo,t._path):t}function MW(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Cm(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function OW(){return kW++}function LW(t,e,n){const r=e._path,s=Zc(t,e),i=mI(t,n),o=t.listenProvider_.startListening(vc(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)Y(!_i(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!xe(u)&&d&&_i(d))return[_m(d).query];{let f=[];return d&&(f=f.concat(aI(d).map(p=>p.query))),It(h,(p,w)=>{f=f.concat(w)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(vc(d),Zc(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nw(n)}node(){return this.node_}}class rw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=et(this.path_,e);return new rw(this.syncTree_,n)}node(){return J0(this.syncTree_,this.path_)}}const FW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},kC=function(t,e,n){if(!t||typeof t!="object")return t;if(Y(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return $W(t[".sv"],e,n);if(typeof t[".sv"]=="object")return VW(t[".sv"],e);Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},$W=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Y(!1,"Unexpected server value: "+t)}},VW=function(t,e,n){t.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);const s=e.node();if(Y(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},pI=function(t,e,n,r){return sw(e,new rw(n,t),r)},gI=function(t,e,n){return sw(t,new nw(e),n)};function sw(t,e,n){const r=t.getPriority().val(),s=kC(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=kC(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new vt(l,ut(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new vt(s))),o.forEachChild(tt,(l,c)=>{const u=sw(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function ow(t,e){let n=e instanceof Pe?e:new Pe(e),r=t,s=ve(n);for(;s!==null;){const i=Ga(r.node.children,s)||{children:{},childCount:0};r=new iw(s,r,i),n=Oe(n),s=ve(n)}return r}function yl(t){return t.node.value}function vI(t,e){t.node.value=e,ay(t)}function yI(t){return t.node.childCount>0}function UW(t){return yl(t)===void 0&&!yI(t)}function Nm(t,e){It(t.node.children,(n,r)=>{e(new iw(n,t,r))})}function xI(t,e,n,r){n&&!r&&e(t),Nm(t,s=>{xI(s,e,!0,r)}),n&&r&&e(t)}function BW(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Pu(t){return new Pe(t.parent===null?t.name:Pu(t.parent)+"/"+t.name)}function ay(t){t.parent!==null&&zW(t.parent,t.name,t)}function zW(t,e,n){const r=UW(n),s=zr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,ay(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,ay(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=/[\[\].#$\/\u0000-\u001F\u007F]/,HW=/[\[\].#$\u0000-\u001F\u007F]/,Zp=10*1024*1024,aw=function(t){return typeof t=="string"&&t.length!==0&&!WW.test(t)},wI=function(t){return typeof t=="string"&&t.length!==0&&!HW.test(t)},GW=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wI(t)},qW=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!D0(t)||t&&typeof t=="object"&&zr(t,".sv")},KW=function(t,e,n,r){Sm(fm(t,"value"),e,n)},Sm=function(t,e,n){const r=n instanceof Pe?new uz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+zi(r));if(typeof e=="function")throw new Error(t+"contains a function "+zi(r)+" with contents = "+e.toString());if(D0(e))throw new Error(t+"contains "+e.toString()+" "+zi(r));if(typeof e=="string"&&e.length>Zp/3&&mm(e)>Zp)throw new Error(t+"contains a string greater than "+Zp+" utf8 bytes "+zi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(It(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!aw(o)))throw new Error(t+" contains an invalid key ("+o+") "+zi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);dz(r,o),Sm(t,l,r),hz(r)}),s&&i)throw new Error(t+' contains ".value" child '+zi(r)+" in addition to actual children.")}},YW=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Kc(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!aw(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(cz);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Dn(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},QW=function(t,e,n,r){const s=fm(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];It(e,(o,l)=>{const c=new Pe(o);if(Sm(s,l,et(n,c)),$0(c)===".priority"&&!qW(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),YW(s,i)},bI=function(t,e,n,r){if(!wI(n))throw new Error(fm(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},XW=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bI(t,e,n)},_I=function(t,e){if(ve(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},JW=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!GW(n))throw new Error(fm(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Em(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!V0(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function CI(t,e,n){Em(t,n),NI(t,r=>V0(r,e))}function Un(t,e,n){Em(t,n),NI(t,r=>Dn(r,e)||Dn(e,r))}function NI(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(e9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function e9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();fc&&Tt("event: "+n.toString()),gl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="repo_interrupt",n9=25;class r9{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=af(),this.transactionQueueTree_=new iw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function s9(t,e,n){if(t.stats_=L0(t.repoInfo_),t.forceRestClient_||DB())t.server_=new of(t.repoInfo_,(r,s,i,o)=>{TC(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>jC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ht(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new us(t.repoInfo_,e,(r,s,i,o)=>{TC(t,r,s,i,o)},r=>{jC(t,r)},r=>{o9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=$B(t.repoInfo_,()=>new Fz(t.stats_,t.server_)),t.infoData_=new Az,t.infoSyncTree_=new EC({startListening:(r,s,i,o)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=Iu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),lw(t,"connected",!1),t.serverSyncTree_=new EC({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,c)=>{const u=o(l,c);Un(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function i9(t){const n=t.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function km(t){return FW({timestamp:i9(t)})}function TC(t,e,n,r,s){t.dataUpdateCount++;const i=new Pe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Kh(n,u=>ut(u));o=PW(t.serverSyncTree_,i,c,s)}else{const c=ut(n);o=dI(t.serverSyncTree_,i,c,s)}else if(r){const c=Kh(n,u=>ut(u));o=jW(t.serverSyncTree_,i,c)}else{const c=ut(n);o=Iu(t.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=Ja(t,i)),Un(t.eventQueue_,l,o)}function jC(t,e){lw(t,"connected",e),e===!1&&u9(t)}function o9(t,e){It(e,(n,r)=>{lw(t,n,r)})}function lw(t,e,n){const r=new Pe("/.info/"+e),s=ut(n);t.infoData_.updateSnapshot(r,s);const i=Iu(t.infoSyncTree_,r,s);Un(t.eventQueue_,r,i)}function cw(t){return t.nextWriteId_++}function a9(t,e,n){const r=AW(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ut(s).withIndex(e._queryParams.getIndex());oy(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Iu(t.serverSyncTree_,e._path,i);else{const l=Zc(t.serverSyncTree_,e);o=dI(t.serverSyncTree_,e._path,i,l)}return Un(t.eventQueue_,e._path,o),pf(t.serverSyncTree_,e,n,null,!0),i},s=>(Au(t,"get for query "+ht(e)+" failed: "+s),Promise.reject(new Error(s))))}function l9(t,e,n,r,s){Au(t,"set",{path:e.toString(),value:n,priority:r});const i=km(t),o=ut(n,r),l=J0(t.serverSyncTree_,e),c=gI(o,l,i),u=cw(t),d=uI(t.serverSyncTree_,e,c,u,!0);Em(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const w=f==="ok";w||Yt("set at "+e+" failed: "+f);const g=Zs(t.serverSyncTree_,u,!w);Un(t.eventQueue_,e,g),ly(t,s,f,p)});const h=dw(t,e);Ja(t,h),Un(t.eventQueue_,h,[])}function c9(t,e,n,r){Au(t,"update",{path:e.toString(),value:n});let s=!0;const i=km(t),o={};if(It(n,(l,c)=>{s=!1,o[l]=pI(et(e,l),ut(c),t.serverSyncTree_,i)}),s)Tt("update() called with empty data.  Don't do anything."),ly(t,r,"ok",void 0);else{const l=cw(t),c=TW(t.serverSyncTree_,e,o,l);Em(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,d)=>{const h=u==="ok";h||Yt("update at "+e+" failed: "+u);const f=Zs(t.serverSyncTree_,l,!h),p=f.length>0?Ja(t,e):e;Un(t.eventQueue_,p,f),ly(t,r,u,d)}),It(n,u=>{const d=dw(t,et(e,u));Ja(t,d)}),Un(t.eventQueue_,e,[])}}function u9(t){Au(t,"onDisconnectEvents");const e=km(t),n=af();ey(t.onDisconnect_,Se(),(s,i)=>{const o=pI(s,i,t.serverSyncTree_,e);YR(n,s,o)});let r=[];ey(n,Se(),(s,i)=>{r=r.concat(Iu(t.serverSyncTree_,s,i));const o=dw(t,s);Ja(t,o)}),t.onDisconnect_=af(),Un(t.eventQueue_,Se(),r)}function d9(t,e,n){let r;ve(e._path)===".info"?r=oy(t.infoSyncTree_,e,n):r=oy(t.serverSyncTree_,e,n),CI(t.eventQueue_,e._path,r)}function h9(t,e,n){let r;ve(e._path)===".info"?r=pf(t.infoSyncTree_,e,n):r=pf(t.serverSyncTree_,e,n),CI(t.eventQueue_,e._path,r)}function f9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(t9)}function Au(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tt(n,...e)}function ly(t,e,n,r){e&&gl(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function SI(t,e,n){return J0(t.serverSyncTree_,e,n)||se.EMPTY_NODE}function uw(t,e=t.transactionQueueTree_){if(e||Tm(t,e),yl(e)){const n=kI(t,e);Y(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&m9(t,Pu(e),n)}else yI(e)&&Nm(e,n=>{uw(t,n)})}function m9(t,e,n){const r=n.map(u=>u.currentWriteId),s=SI(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];Y(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Gt(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{Au(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Zs(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Tm(t,ow(t.transactionQueueTree_,e)),uw(t,t.transactionQueueTree_),Un(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)gl(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Yt("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Ja(t,e)}},o)}function Ja(t,e){const n=EI(t,e),r=Pu(n),s=kI(t,n);return p9(t,s,r),r}function p9(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Gt(n,c.path);let d=!1,h;if(Y(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Zs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=n9)d=!0,h="maxretry",s=s.concat(Zs(t.serverSyncTree_,c.currentWriteId,!0));else{const f=SI(t,c.path,o);c.currentInputSnapshot=f;const p=e[l].update(f.val());if(p!==void 0){Sm("transaction failed: Data returned ",p,c.path);let w=ut(p);typeof p=="object"&&p!=null&&zr(p,".priority")||(w=w.updatePriority(f.getPriority()));const y=c.currentWriteId,x=km(t),v=gI(w,f,x);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=v,c.currentWriteId=cw(t),o.splice(o.indexOf(y),1),s=s.concat(uI(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally)),s=s.concat(Zs(t.serverSyncTree_,y,!0))}else d=!0,h="nodata",s=s.concat(Zs(t.serverSyncTree_,c.currentWriteId,!0))}Un(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(h),!1,null))))}Tm(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)gl(r[l]);uw(t,t.transactionQueueTree_)}function EI(t,e){let n,r=t.transactionQueueTree_;for(n=ve(e);n!==null&&yl(r)===void 0;)r=ow(r,n),e=Oe(e),n=ve(e);return r}function kI(t,e){const n=[];return TI(t,e,n),n.sort((r,s)=>r.order-s.order),n}function TI(t,e,n){const r=yl(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Nm(e,s=>{TI(t,s,n)})}function Tm(t,e){const n=yl(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,vI(e,n.length>0?n:void 0)}Nm(e,r=>{Tm(t,r)})}function dw(t,e){const n=Pu(EI(t,e)),r=ow(t.transactionQueueTree_,e);return BW(r,s=>{eg(t,s)}),eg(t,r),xI(r,s=>{eg(t,s)}),n}function eg(t,e){const n=yl(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Y(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Y(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Zs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?vI(e,void 0):n.length=i+1,Un(t.eventQueue_,Pu(e),s);for(let o=0;o<r.length;o++)gl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function v9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yt(`Invalid query segment '${n}' in query '${t}'`)}return e}const RC=function(t,e){const n=y9(t),r=n.namespace;n.domain==="firebase.com"&&ws(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ws("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||SB();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new PR(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Pe(n.pathString)}},y9=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=g9(t.substring(d,h)));const f=v9(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ht(this.snapshot.exportVal())}}class w9{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return xe(this._path)?null:$0(this._path)}get ref(){return new Ns(this._repo,this._path)}get _queryIdentifier(){const e=gC(this._queryParams),n=M0(e);return n==="{}"?"default":n}get _queryObject(){return gC(this._queryParams)}isEqual(e){if(e=dn(e),!(e instanceof hw))return!1;const n=this._repo===e._repo,r=V0(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+lz(this._path)}}class Ns extends hw{constructor(e,n){super(e,n,new W0,!1)}get parent(){const e=UR(this._path);return e===null?null:new Ns(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class eu{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Pe(e),r=cy(this.ref,e);return new eu(this._node.getChild(n),r,tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new eu(s,cy(this.ref,r),tt)))}hasChild(e){const n=new Pe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Be(t,e){return t=dn(t),t._checkNotDeleted("ref"),e!==void 0?cy(t._root,e):t._root}function cy(t,e){return t=dn(t),ve(t._path)===null?XW("child","path",e):bI("child","path",e),new Ns(t._repo,et(t._path,e))}function Wl(t){return _I("remove",t._path),ia(t,null)}function ia(t,e){t=dn(t),_I("set",t._path),KW("set",e,t._path);const n=new Cu;return l9(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function IC(t,e){QW("update",e,t._path);const n=new Cu;return c9(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Hi(t){t=dn(t);const e=new jI(()=>{}),n=new jm(e);return a9(t._repo,t,n).then(r=>new eu(r,new Ns(t._repo,t._path),t._queryParams.getIndex()))}class jm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new x9("value",this,new eu(e.snapshotNode,new Ns(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new w9(this,e,n):null}matches(e){return e instanceof jm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function b9(t,e,n,r,s){const i=new jI(n,void 0),o=new jm(i);return d9(t._repo,t,o),()=>h9(t._repo,t,o)}function Wo(t,e,n,r){return b9(t,"value",e)}wW(Ns);SW(Ns);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="FIREBASE_DATABASE_EMULATOR_HOST",uy={};let C9=!1;function N9(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=hl(i);t.repoInfo_=new PR(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function S9(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||ws("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=RC(i,s),l=o.repoInfo,c;typeof process<"u"&&J1&&(c=J1[_9]),c?(i=`http://${c}?ns=${l.namespace}`,o=RC(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new OB(t.name,t.options,e);JW("Invalid Firebase Database URL",o),xe(o.path)||ws("Database URL must point to the root of a Firebase Database (not including a child path).");const d=k9(l,t,u,new MB(t,n));return new T9(d,t)}function E9(t,e){const n=uy[e];(!n||n[t.key]!==t)&&ws(`Database ${e}(${t.repoInfo_}) has already been deleted.`),f9(t),delete n[t.key]}function k9(t,e,n,r){let s=uy[e.name];s||(s={},uy[e.name]=s);let i=s[t.toURLString()];return i&&ws("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new r9(t,C9,n,r),s[t.toURLString()]=i,i}class T9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(s9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ns(this._repo,Se())),this._rootInternal}_delete(){return this._rootInternal!==null&&(E9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ws("Cannot call "+e+" on a deleted database.")}}function j9(t=Lj(),e){const n=E0(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=H$("database");r&&R9(n,...r)}return n}function R9(t,e,n,r={}){t=dn(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Co(r,i.repoInfo_.emulatorOptions))return;ws("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ws('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new eh(eh.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:G$(r.mockUserToken,t.app.options.projectId);o=new eh(l)}hl(e)&&(jj(e),Rj("Database",!0)),N9(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t){xB(ml),qa(new No("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return S9(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),ui(Z1,eC,t),ui(Z1,eC,"esm2020")}us.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};us.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};I9();var P9="firebase",A9="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(P9,A9,"app");const D9={apiKey:"AIzaSyAYzzwkqZjf5iWN6Pc4wSz6MYJAzAFJ0wA",authDomain:"gmae111.firebaseapp.com",projectId:"gmae111",storageBucket:"gmae111.firebasestorage.app",messagingSenderId:"223415325596",appId:"1:223415325596:web:272fd4d7aff74d33b3ee59",measurementId:"G-4TEGC1REF4",databaseURL:"https://gmae111-default-rtdb.asia-southeast1.firebasedatabase.app"},RI=Oj(D9),tg=vB(RI),ze=j9(RI),II=m.createContext(void 0),Wr=()=>{const t=m.useContext(II);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},M9=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(null),[i,o]=m.useState(!0);m.useEffect(()=>{const h=iU(tg,async f=>{if(n(f),f){const p=Be(ze,`users/${f.uid}`),w=await Hi(p);if(w.exists())s(w.val().displayName);else{const y=`Player_${f.uid.slice(0,6)}`;await ia(p,{id:f.uid,displayName:y,createdAt:Date.now(),friends:{},friendRequests:{}}),s(y)}const g=Be(ze,`users/${f.uid}/displayName`);Wo(g,y=>{y.exists()&&s(y.val())})}else s(null);o(!1)});return()=>h()},[]);const l=async()=>{try{await Z8(tg)}catch(h){throw console.error("Login error:",h),h}},c=async()=>{try{await oU(tg)}catch(h){throw console.error("Logout error:",h),h}},u=async h=>{if(!e)return!1;const f=h.trim();if(f.length<2||f.length>20)return!1;try{const p=Be(ze,`users/${e.uid}`);await IC(p,{displayName:f});const w=Be(ze,`users/${e.uid}/friends`),g=await Hi(w);if(g.exists()){const y=Object.keys(g.val()),x={};y.forEach(v=>{x[`users/${v}/friends/${e.uid}/displayName`]=f}),Object.keys(x).length>0&&await IC(Be(ze),x)}return!0}catch(p){return console.error("Update displayName error:",p),!1}},d={user:e,userId:(e==null?void 0:e.uid)||null,displayName:r,loading:i,login:l,logout:c,updateDisplayName:u};return a.jsx(II.Provider,{value:d,children:t})},fw=m.createContext({});function mw(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const pw=typeof window<"u",PI=pw?m.useLayoutEffect:m.useEffect,Rm=m.createContext(null);function gw(t,e){t.indexOf(e)===-1&&t.push(e)}function vw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bs=(t,e,n)=>n>e?e:n<t?t:n;let gf=()=>{};const _s={},AI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function DI(t){return typeof t=="object"&&t!==null}const MI=t=>/^0[^.\s]+$/u.test(t);function yw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ln=t=>t,O9=(t,e)=>n=>e(t(n)),Du=(...t)=>t.reduce(O9),tu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class xw{constructor(){this.subscriptions=[]}add(e){return gw(this.subscriptions,e),()=>vw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Lr=t=>t*1e3,Mn=t=>t/1e3;function OI(t,e){return e?t*(1e3/e):0}const LI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,L9=1e-7,F9=12;function $9(t,e,n,r,s){let i,o,l=0;do o=e+(n-e)/2,i=LI(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>L9&&++l<F9);return o}function Mu(t,e,n,r){if(t===e&&n===r)return Ln;const s=i=>$9(i,0,1,t,n);return i=>i===0||i===1?i:LI(s(i),e,r)}const FI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$I=t=>e=>1-t(1-e),VI=Mu(.33,1.53,.69,.99),ww=$I(VI),UI=FI(ww),BI=t=>(t*=2)<1?.5*ww(t):.5*(2-Math.pow(2,-10*(t-1))),bw=t=>1-Math.sin(Math.acos(t)),zI=$I(bw),WI=FI(bw),V9=Mu(.42,0,1,1),U9=Mu(0,0,.58,1),HI=Mu(.42,0,.58,1),B9=t=>Array.isArray(t)&&typeof t[0]!="number",GI=t=>Array.isArray(t)&&typeof t[0]=="number",PC={linear:Ln,easeIn:V9,easeInOut:HI,easeOut:U9,circIn:bw,circInOut:WI,circOut:zI,backIn:ww,backInOut:UI,backOut:VI,anticipate:BI},z9=t=>typeof t=="string",AC=t=>{if(GI(t)){gf(t.length===4);const[e,n,r,s]=t;return Mu(e,n,r,s)}else if(z9(t))return gf(PC[t]!==void 0),PC[t];return t},bd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],DC={value:null,addProjectionMetrics:null};function W9(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,p=!1)=>{const g=p&&s?n:r;return f&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&DC.value&&DC.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const H9=40;function qI(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=bd.reduce((b,N)=>(b[N]=W9(i,e?N:void 0),b),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:w}=o,g=()=>{const b=_s.useManualTiming?s.timestamp:performance.now();n=!1,_s.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,H9),1)),s.timestamp=b,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),w.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,s.isProcessing||t(g)};return{schedule:bd.reduce((b,N)=>{const _=o[N];return b[N]=(C,S=!1,E=!1)=>(n||y(),_.schedule(C,S,E)),b},{}),cancel:b=>{for(let N=0;N<bd.length;N++)o[bd[N]].cancel(b)},state:s,steps:o}}const{schedule:He,cancel:Ci,state:Et,steps:ng}=qI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ln,!0);let th;function G9(){th=void 0}const sn={now:()=>(th===void 0&&sn.set(Et.isProcessing||_s.useManualTiming?Et.timestamp:performance.now()),th),set:t=>{th=t,queueMicrotask(G9)}},KI=t=>e=>typeof e=="string"&&e.startsWith(t),YI=KI("--"),q9=KI("var(--"),_w=t=>q9(t)?K9.test(t.split("/*")[0].trim()):!1,K9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nu={...xl,transform:t=>bs(0,1,t)},_d={...xl,default:1},yc=t=>Math.round(t*1e5)/1e5,Cw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Y9(t){return t==null}const Q9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nw=(t,e)=>n=>!!(typeof n=="string"&&Q9.test(n)&&n.startsWith(t)||e&&!Y9(n)&&Object.prototype.hasOwnProperty.call(n,e)),QI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,l]=r.match(Cw);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},X9=t=>bs(0,255,t),rg={...xl,transform:t=>Math.round(X9(t))},Qi={test:Nw("rgb","red"),parse:QI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+rg.transform(t)+", "+rg.transform(e)+", "+rg.transform(n)+", "+yc(nu.transform(r))+")"};function J9(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const dy={test:Nw("#"),parse:J9,transform:Qi.transform},Ou=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ps=Ou("deg"),Fr=Ou("%"),oe=Ou("px"),Z9=Ou("vh"),eH=Ou("vw"),MC={...Fr,parse:t=>Fr.parse(t)/100,transform:t=>Fr.transform(t*100)},oa={test:Nw("hsl","hue"),parse:QI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fr.transform(yc(e))+", "+Fr.transform(yc(n))+", "+yc(nu.transform(r))+")"},it={test:t=>Qi.test(t)||dy.test(t)||oa.test(t),parse:t=>Qi.test(t)?Qi.parse(t):oa.test(t)?oa.parse(t):dy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qi.transform(t):oa.transform(t),getAnimatableNone:t=>{const e=it.parse(t);return e.alpha=0,it.transform(e)}},tH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nH(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cw))==null?void 0:e.length)||0)+(((n=t.match(tH))==null?void 0:n.length)||0)>0}const XI="number",JI="color",rH="var",sH="var(",OC="${}",iH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ru(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(iH,c=>(it.test(c)?(r.color.push(i),s.push(JI),n.push(it.parse(c))):c.startsWith(sH)?(r.var.push(i),s.push(rH),n.push(c)):(r.number.push(i),s.push(XI),n.push(parseFloat(c))),++i,OC)).split(OC);return{values:n,split:l,indexes:r,types:s}}function ZI(t){return ru(t).values}function eP(t){const{split:e,types:n}=ru(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const l=n[o];l===XI?i+=yc(s[o]):l===JI?i+=it.transform(s[o]):i+=s[o]}return i}}const oH=t=>typeof t=="number"?0:it.test(t)?it.getAnimatableNone(t):t;function aH(t){const e=ZI(t);return eP(t)(e.map(oH))}const Ni={test:nH,parse:ZI,createTransformer:eP,getAnimatableNone:aH};function sg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lH({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=sg(c,l,t+1/3),i=sg(c,l,t),o=sg(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function vf(t,e){return n=>n>0?e:t}const Ke=(t,e,n)=>t+(e-t)*n,ig=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},cH=[dy,Qi,oa],uH=t=>cH.find(e=>e.test(t));function LC(t){const e=uH(t);if(!e)return!1;let n=e.parse(t);return e===oa&&(n=lH(n)),n}const FC=(t,e)=>{const n=LC(t),r=LC(e);if(!n||!r)return vf(t,e);const s={...n};return i=>(s.red=ig(n.red,r.red,i),s.green=ig(n.green,r.green,i),s.blue=ig(n.blue,r.blue,i),s.alpha=Ke(n.alpha,r.alpha,i),Qi.transform(s))},hy=new Set(["none","hidden"]);function dH(t,e){return hy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function hH(t,e){return n=>Ke(t,e,n)}function Sw(t){return typeof t=="number"?hH:typeof t=="string"?_w(t)?vf:it.test(t)?FC:pH:Array.isArray(t)?tP:typeof t=="object"?it.test(t)?FC:fH:vf}function tP(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Sw(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function fH(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Sw(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function mH(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],l=t.values[o]??0;n[s]=l,r[i]++}return n}const pH=(t,e)=>{const n=Ni.createTransformer(e),r=ru(t),s=ru(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?hy.has(t)&&!s.values.length||hy.has(e)&&!r.values.length?dH(t,e):Du(tP(mH(r,s),s.values),n):vf(t,e)};function nP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ke(t,e,n):Sw(t)(t,e)}const gH=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>He.update(e,n),stop:()=>Ci(e),now:()=>Et.isProcessing?Et.timestamp:sn.now()}},rP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},yf=2e4;function Ew(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<yf;)e+=n,r=t.next(e);return e>=yf?1/0:e}function vH(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Ew(r),yf);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Mn(s)}}const yH=5;function sP(t,e,n){const r=Math.max(e-yH,0);return OI(n-t(r),e-r)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},og=.001;function xH({duration:t=Je.duration,bounce:e=Je.bounce,velocity:n=Je.velocity,mass:r=Je.mass}){let s,i,o=1-e;o=bs(Je.minDamping,Je.maxDamping,o),t=bs(Je.minDuration,Je.maxDuration,Mn(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,p=fy(u,o),w=Math.exp(-h);return og-f/p*w},i=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,w=Math.exp(-h),g=fy(Math.pow(u,2),o);return(-s(u)+og>0?-1:1)*((f-p)*w)/g}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-og+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=bH(s,i,l);if(t=Lr(t),isNaN(c))return{stiffness:Je.stiffness,damping:Je.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const wH=12;function bH(t,e,n){let r=n;for(let s=1;s<wH;s++)r=r-t(r)/e(r);return r}function fy(t,e){return t*Math.sqrt(1-e*e)}const _H=["duration","bounce"],CH=["stiffness","damping","mass"];function $C(t,e){return e.some(n=>t[n]!==void 0)}function NH(t){let e={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...t};if(!$C(t,CH)&&$C(t,_H))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*bs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Je.mass,stiffness:s,damping:i}}else{const n=xH(t);e={...e,...n,mass:Je.mass},e.isResolvedFromDuration=!0}return e}function xf(t=Je.visualDuration,e=Je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=NH({...n,velocity:-Mn(n.velocity||0)}),w=f||0,g=u/(2*Math.sqrt(c*d)),y=o-i,x=Mn(Math.sqrt(c/d)),v=Math.abs(y)<5;r||(r=v?Je.restSpeed.granular:Je.restSpeed.default),s||(s=v?Je.restDelta.granular:Je.restDelta.default);let b;if(g<1){const _=fy(x,g);b=C=>{const S=Math.exp(-g*x*C);return o-S*((w+g*x*y)/_*Math.sin(_*C)+y*Math.cos(_*C))}}else if(g===1)b=_=>o-Math.exp(-x*_)*(y+(w+x*y)*_);else{const _=x*Math.sqrt(g*g-1);b=C=>{const S=Math.exp(-g*x*C),E=Math.min(_*C,300);return o-S*((w+g*x*y)*Math.sinh(E)+_*y*Math.cosh(E))/_}}const N={calculatedDuration:p&&h||null,next:_=>{const C=b(_);if(p)l.done=_>=h;else{let S=_===0?w:0;g<1&&(S=_===0?Lr(w):sP(b,_,C));const E=Math.abs(S)<=r,k=Math.abs(o-C)<=s;l.done=E&&k}return l.value=l.done?o:C,l},toString:()=>{const _=Math.min(Ew(N),yf),C=rP(S=>N.next(_*S).value,_,30);return _+"ms "+C},toTransition:()=>{}};return N}xf.applyToOptions=t=>{const e=vH(t,100,xf);return t.ease=e.ease,t.duration=Lr(e.duration),t.type="keyframes",t};function my({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=E=>l!==void 0&&E<l||c!==void 0&&E>c,w=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let g=n*e;const y=h+g,x=o===void 0?y:o(y);x!==y&&(g=x-h);const v=E=>-g*Math.exp(-E/r),b=E=>x+v(E),N=E=>{const k=v(E),T=b(E);f.done=Math.abs(k)<=u,f.value=f.done?x:T};let _,C;const S=E=>{p(f.value)&&(_=E,C=xf({keyframes:[f.value,w(f.value)],velocity:sP(b,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:E=>{let k=!1;return!C&&_===void 0&&(k=!0,N(E),S(E)),_!==void 0&&E>=_?C.next(E-_):(!k&&N(E),f)}}}function SH(t,e,n){const r=[],s=n||_s.mix||nP,i=t.length-1;for(let o=0;o<i;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ln:e;l=Du(c,l)}r.push(l)}return r}function EH(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(gf(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=SH(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=tu(t[h],t[h+1],d);return l[h](f)};return n?d=>u(bs(t[0],t[i-1],d)):u}function kH(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=tu(0,e,r);t.push(Ke(n,1,s))}}function TH(t){const e=[0];return kH(e,t.length-1),e}function jH(t,e){return t.map(n=>n*e)}function RH(t,e){return t.map(()=>e||HI).splice(0,t.length-1)}function xc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=B9(r)?r.map(AC):AC(r),i={done:!1,value:e[0]},o=jH(n&&n.length===e.length?n:TH(e),t),l=EH(o,e,{ease:Array.isArray(s)?s:RH(e,s)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const IH=t=>t!==null;function kw(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(IH),l=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const PH={decay:my,inertia:my,tween:xc,keyframes:xc,spring:xf};function iP(t){typeof t.type=="string"&&(t.type=PH[t.type])}class Tw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const AH=t=>t/100;class jw extends Tw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==sn.now()&&this.tick(sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;iP(e);const{type:n=xc,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=n||xc;c!==xc&&typeof l[0]!="number"&&(this.mixKeyframes=Du(AH,nP(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Ew(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:w,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,N=r;if(h){const E=Math.min(this.currentTime,s)/l;let k=Math.floor(E),T=E%1;!T&&E>=1&&(T=1),T===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(T=1-T,p&&(T-=p/l)):f==="mirror"&&(N=o)),b=bs(0,1,T)*l}const _=v?{done:!1,value:d[0]}:N.next(b);i&&(_.value=i(_.value));let{done:C}=_;!v&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return S&&w!==my&&(_.value=kw(d,this.options,y,this.speed)),g&&g(_.value),S&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return Mn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mn(e)}get time(){return Mn(this.currentTime)}set time(e){var n;e=Lr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(sn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mn(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=gH,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function DH(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Xi=t=>t*180/Math.PI,py=t=>{const e=Xi(Math.atan2(t[1],t[0]));return gy(e)},MH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:py,rotateZ:py,skewX:t=>Xi(Math.atan(t[1])),skewY:t=>Xi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},gy=t=>(t=t%360,t<0&&(t+=360),t),VC=py,UC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),BC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),OH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:UC,scaleY:BC,scale:t=>(UC(t)+BC(t))/2,rotateX:t=>gy(Xi(Math.atan2(t[6],t[5]))),rotateY:t=>gy(Xi(Math.atan2(-t[2],t[0]))),rotateZ:VC,rotate:VC,skewX:t=>Xi(Math.atan(t[4])),skewY:t=>Xi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function vy(t){return t.includes("scale")?1:0}function yy(t,e){if(!t||t==="none")return vy(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=OH,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=MH,s=l}if(!s)return vy(e);const i=r[e],o=s[1].split(",").map(FH);return typeof i=="function"?i(o):o[i]}const LH=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return yy(n,e)};function FH(t){return parseFloat(t.trim())}const wl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bl=new Set(wl),zC=t=>t===xl||t===oe,$H=new Set(["x","y","z"]),VH=wl.filter(t=>!$H.has(t));function UH(t){const e=[];return VH.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const lo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>yy(e,"x"),y:(t,{transform:e})=>yy(e,"y")};lo.translateX=lo.x;lo.translateY=lo.y;const co=new Set;let xy=!1,wy=!1,by=!1;function oP(){if(wy){const t=Array.from(co).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=UH(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}wy=!1,xy=!1,co.forEach(t=>t.complete(by)),co.clear()}function aP(){co.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wy=!0)})}function BH(){by=!0,aP(),oP(),by=!1}class Rw{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(co.add(this),xy||(xy=!0,He.read(aP),He.resolveKeyframes(oP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}DH(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),co.delete(this)}cancel(){this.state==="scheduled"&&(co.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zH=t=>t.startsWith("--");function WH(t,e,n){zH(e)?t.style.setProperty(e,n):t.style[e]=n}const HH=yw(()=>window.ScrollTimeline!==void 0),GH={};function qH(t,e){const n=yw(t);return()=>GH[e]??n()}const lP=qH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,WC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xl([0,.65,.55,1]),circOut:Xl([.55,0,1,.45]),backIn:Xl([.31,.01,.66,-.59]),backOut:Xl([.33,1.53,.69,.99])};function cP(t,e){if(t)return typeof t=="function"?lP()?rP(t,e):"ease-out":GI(t)?Xl(t):Array.isArray(t)?t.map(n=>cP(n,e)||WC.easeOut):WC[t]}function KH(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=cP(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function uP(t){return typeof t=="function"&&"applyToOptions"in t}function YH({type:t,...e}){return uP(t)&&lP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class QH extends Tw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,gf(typeof e.type!="string");const u=YH(e);this.animation=KH(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=kw(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):WH(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Mn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mn(e)}get time(){return Mn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Lr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&HH()?(this.animation.timeline=e,Ln):n(this)}}const dP={anticipate:BI,backInOut:UI,circInOut:WI};function XH(t){return t in dP}function JH(t){typeof t.ease=="string"&&XH(t.ease)&&(t.ease=dP[t.ease])}const HC=10;class ZH extends QH{constructor(e){JH(e),iP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new jw({...o,autoplay:!1}),c=Lr(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-HC).value,l.sample(c).value,HC),l.stop()}}const GC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ni.test(t)||t==="0")&&!t.startsWith("url("));function e7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function t7(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=GC(s,e),l=GC(i,e);return!o||!l?!1:e7(t)||(n==="spring"||uP(n))&&r}function _y(t){t.duration=0,t.type="keyframes"}const n7=new Set(["opacity","clipPath","filter","transform"]),r7=yw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function s7(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return r7()&&n&&n7.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const i7=40;class o7 extends Tw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var w;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=sn.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||Rw;this.keyframeResolver=new p(l,(g,y,x)=>this.onKeyframesResolved(g,y,f,!x),c,u,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=sn.now(),t7(e,i,o,l)||((_s.instantAnimations||!c)&&(d==null||d(kw(e,r,n))),e[0]=e[e.length-1],_y(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>i7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&s7(f)?new ZH({...f,element:f.motionValue.owner.current}):new jw(f);p.finished.then(()=>this.notifyFinished()).catch(Ln),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),BH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const a7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function l7(t){const e=a7.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function hP(t,e,n=1){const[r,s]=l7(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return AI(o)?parseFloat(o):o}return _w(s)?hP(s,e,n+1):s}function Iw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const fP=new Set(["width","height","top","left","right","bottom",...wl]),c7={test:t=>t==="auto",parse:t=>t},mP=t=>e=>e.test(t),pP=[xl,oe,Fr,Ps,eH,Z9,c7],qC=t=>pP.find(mP(t));function u7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||MI(t):!0}const d7=new Set(["brightness","contrast","saturate","opacity"]);function h7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cw)||[];if(!r)return t;const s=n.replace(r,"");let i=d7.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const f7=/\b([a-z-]*)\(.*?\)/gu,Cy={...Ni,getAnimatableNone:t=>{const e=t.match(f7);return e?e.map(h7).join(" "):t}},KC={...xl,transform:Math.round},m7={rotate:Ps,rotateX:Ps,rotateY:Ps,rotateZ:Ps,scale:_d,scaleX:_d,scaleY:_d,scaleZ:_d,skew:Ps,skewX:Ps,skewY:Ps,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:nu,originX:MC,originY:MC,originZ:oe},Pw={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe,...m7,zIndex:KC,fillOpacity:nu,strokeOpacity:nu,numOctaves:KC},p7={...Pw,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:Cy,WebkitFilter:Cy},gP=t=>p7[t];function vP(t,e){let n=gP(t);return n!==Cy&&(n=Ni),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const g7=new Set(["auto","none","0"]);function v7(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!g7.has(i)&&ru(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=vP(n,s)}class y7 extends Rw{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),_w(u))){const d=hP(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!fP.has(r)||e.length!==2)return;const[s,i]=e,o=qC(s),l=qC(i);if(o!==l)if(zC(o)&&zC(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else lo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||u7(e[s]))&&r.push(s);r.length&&v7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=lo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=lo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function x7(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const yP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xP(t){return DI(t)&&"offsetHeight"in t}const YC=30,w7=t=>!isNaN(parseFloat(t));class b7{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=sn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=w7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new xw);const r=this.events[e].add(n);return e==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>YC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,YC);return OI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Za(t,e){return new b7(t,e)}const{schedule:Aw,cancel:WZ}=qI(queueMicrotask,!1),qn={x:!1,y:!1};function wP(){return qn.x||qn.y}function _7(t){return t==="x"||t==="y"?qn[t]?null:(qn[t]=!0,()=>{qn[t]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}function bP(t,e){const n=x7(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function QC(t){return!(t.pointerType==="touch"||wP())}function C7(t,e,n={}){const[r,s,i]=bP(t,n),o=l=>{if(!QC(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{QC(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const _P=(t,e)=>e?t===e?!0:_P(t,e.parentElement):!1,Dw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function S7(t){return N7.has(t.tagName)||t.tabIndex!==-1}const nh=new WeakSet;function XC(t){return e=>{e.key==="Enter"&&t(e)}}function ag(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const E7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=XC(()=>{if(nh.has(n))return;ag(n,"down");const s=XC(()=>{ag(n,"up")}),i=()=>ag(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function JC(t){return Dw(t)&&!wP()}function k7(t,e,n={}){const[r,s,i]=bP(t,n),o=l=>{const c=l.currentTarget;if(!JC(l))return;nh.add(c);const u=e(c,l),d=(p,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),nh.has(c)&&nh.delete(c),JC(p)&&typeof u=="function"&&u(p,{success:w})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||_P(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),xP(l)&&(l.addEventListener("focus",u=>E7(u,s)),!S7(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function CP(t){return DI(t)&&"ownerSVGElement"in t}function T7(t){return CP(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),j7=[...pP,it,Ni],R7=t=>j7.find(mP(t)),Mw=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ZC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function I7(...t){return e=>{let n=!1;const r=t.map(s=>{const i=ZC(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():ZC(t[s],null)}}}}function P7(...t){return m.useCallback(I7(...t),t)}class A7 extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=xP(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function D7({children:t,isPresent:e,anchorX:n,root:r}){const s=m.useId(),i=m.useRef(null),o=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=m.useContext(Mw),c=P7(i,t==null?void 0:t.ref);return m.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:p}=o.current;if(e||!i.current||!u||!d)return;const w=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[e]),a.jsx(A7,{isPresent:e,childRef:i,sizeRef:o,children:m.cloneElement(t,{ref:c})})}const M7=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=mw(O7),d=m.useId();let h=!0,f=m.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const w of u.values())if(!w)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),m.useMemo(()=>{u.forEach((p,w)=>u.set(w,!1))},[n]),m.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(D7,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(Rm.Provider,{value:f,children:t})};function O7(){return new Map}function NP(t=!0){const e=m.useContext(Rm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=m.useId();m.useEffect(()=>{if(t)return s(i)},[t]);const o=m.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Cd=t=>t.key||"";function eN(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const Im=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=NP(o),h=m.useMemo(()=>eN(t),[t]),f=o&&!u?[]:h.map(Cd),p=m.useRef(!0),w=m.useRef(h),g=mw(()=>new Map),[y,x]=m.useState(h),[v,b]=m.useState(h);PI(()=>{p.current=!1,w.current=h;for(let C=0;C<v.length;C++){const S=Cd(v[C]);f.includes(S)?g.delete(S):g.get(S)!==!0&&g.set(S,!1)}},[v,f.length,f.join("-")]);const N=[];if(h!==y){let C=[...h];for(let S=0;S<v.length;S++){const E=v[S],k=Cd(E);f.includes(k)||(C.splice(S,0,E),N.push(E))}return i==="wait"&&N.length&&(C=N),b(eN(C)),x(h),null}const{forceRender:_}=m.useContext(fw);return a.jsx(a.Fragment,{children:v.map(C=>{const S=Cd(C),E=o&&!u?!1:h===v||f.includes(S),k=()=>{if(g.has(S))g.set(S,!0);else return;let T=!0;g.forEach(R=>{R||(T=!1)}),T&&(_==null||_(),b(w.current),o&&(d==null||d()),r&&r())};return a.jsx(M7,{isPresent:E,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:k,anchorX:l,children:C},S)})})},SP=m.createContext({strict:!1}),tN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},el={};for(const t in tN)el[t]={isEnabled:e=>tN[t].some(n=>!!e[n])};function L7(t){for(const e in t)el[e]={...el[e],...t[e]}}const F7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||F7.has(t)}let EP=t=>!wf(t);function $7(t){typeof t=="function"&&(EP=e=>e.startsWith("on")?!wf(e):t(e))}try{$7(require("@emotion/is-prop-valid").default)}catch{}function V7(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(EP(s)||n===!0&&wf(s)||!e&&!wf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Pm=m.createContext({});function Am(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function su(t){return typeof t=="string"||Array.isArray(t)}const Ow=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lw=["initial",...Ow];function Dm(t){return Am(t.animate)||Lw.some(e=>su(t[e]))}function kP(t){return!!(Dm(t)||t.variants)}function U7(t,e){if(Dm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||su(n)?n:void 0,animate:su(r)?r:void 0}}return t.inherit!==!1?e:{}}function B7(t){const{initial:e,animate:n}=U7(t,m.useContext(Pm));return m.useMemo(()=>({initial:e,animate:n}),[nN(e),nN(n)])}function nN(t){return Array.isArray(t)?t.join(" "):t}function rN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(oe.test(t))t=parseFloat(t);else return t;const n=rN(t,e.target.x),r=rN(t,e.target.y);return`${n}% ${r}%`}},z7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ni.parse(t);if(s.length>5)return r;const i=Ni.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=Ke(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},Ny={borderRadius:{...Hl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hl,borderTopRightRadius:Hl,borderBottomLeftRadius:Hl,borderBottomRightRadius:Hl,boxShadow:z7};function TP(t,{layout:e,layoutId:n}){return bl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ny[t]||t==="opacity")}const W7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},H7=wl.length;function G7(t,e,n){let r="",s=!0;for(let i=0;i<H7;i++){const o=wl[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=yP(l,Pw[o]);if(!c){s=!1;const d=W7[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Fw(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(bl.has(c)){o=!0;continue}else if(YI(c)){s[c]=u;continue}else{const d=yP(u,Pw[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=G7(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const $w=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function jP(t,e,n){for(const r in e)!Vt(e[r])&&!TP(r,n)&&(t[r]=e[r])}function q7({transformTemplate:t},e){return m.useMemo(()=>{const n=$w();return Fw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function K7(t,e){const n=t.style||{},r={};return jP(r,n,t),Object.assign(r,q7(t,e)),r}function Y7(t,e){const n={},r=K7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Q7={offset:"stroke-dashoffset",array:"stroke-dasharray"},X7={offset:"strokeDashoffset",array:"strokeDasharray"};function J7(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Q7:X7;t[i.offset]=oe.transform(-r);const o=oe.transform(e),l=oe.transform(n);t[i.array]=`${o} ${l}`}function RP(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Fw(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&J7(h,s,i,o,!1)}const IP=()=>({...$w(),attrs:{}}),PP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Z7(t,e,n,r){const s=m.useMemo(()=>{const i=IP();return RP(i,e,PP(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};jP(i,t.style,t),s.style={...i,...s.style}}return s}const eG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vw(t){return typeof t!="string"||t.includes("-")?!1:!!(eG.indexOf(t)>-1||/[A-Z]/u.test(t))}function tG(t,e,n,{latestValues:r},s,i=!1){const l=(Vw(t)?Z7:Y7)(e,r,s,t),c=V7(e,typeof t=="string",i),u=t!==m.Fragment?{...c,...l,ref:n}:{},{children:d}=e,h=m.useMemo(()=>Vt(d)?d.get():d,[d]);return m.createElement(t,{...u,children:h})}function sN(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Uw(t,e,n,r){if(typeof e=="function"){const[s,i]=sN(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=sN(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function rh(t){return Vt(t)?t.get():t}function nG({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:rG(n,r,s,t),renderState:e()}}function rG(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=rh(i[f]);let{initial:o,animate:l}=t;const c=Dm(t),u=kP(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Am(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const w=Uw(t,f[p]);if(w){const{transitionEnd:g,transition:y,...x}=w;for(const v in x){let b=x[v];if(Array.isArray(b)){const N=d?b.length-1:0;b=b[N]}b!==null&&(s[v]=b)}for(const v in g)s[v]=g[v]}}}return s}const AP=t=>(e,n)=>{const r=m.useContext(Pm),s=m.useContext(Rm),i=()=>nG(t,e,r,s);return n?i():mw(i)};function Bw(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Vt(r[o])||e.style&&Vt(e.style[o])||TP(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const sG=AP({scrapeMotionValuesFromProps:Bw,createRenderState:$w});function DP(t,e,n){const r=Bw(t,e,n);for(const s in t)if(Vt(t[s])||Vt(e[s])){const i=wl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const iG=AP({scrapeMotionValuesFromProps:DP,createRenderState:IP}),oG=Symbol.for("motionComponentSymbol");function aa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function aG(t,e,n){return m.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):aa(n)&&(n.current=r))},[e])}const zw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lG="framerAppearId",MP="data-"+zw(lG),OP=m.createContext({});function cG(t,e,n,r,s){var g,y;const{visualElement:i}=m.useContext(Pm),o=m.useContext(SP),l=m.useContext(Rm),c=m.useContext(Mw).reducedMotion,u=m.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=m.useContext(OP);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&uG(u.current,n,s,h);const f=m.useRef(!1);m.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const p=n[MP],w=m.useRef(!!p&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return PI(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),w.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),w.current=!1),d.enteringChildren=void 0)}),d}function uG(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LP(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&aa(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function LP(t){if(t)return t.options.allowProjection!==!1?t.projection:LP(t.parent)}function lg(t,{forwardMotionProps:e=!1}={},n,r){n&&L7(n);const s=Vw(t)?iG:sG;function i(l,c){let u;const d={...m.useContext(Mw),...l,layoutId:dG(l)},{isStatic:h}=d,f=B7(l),p=s(l,h);if(!h&&pw){hG();const w=fG(d);u=w.MeasureLayout,f.visualElement=cG(t,p,d,r,w.ProjectionNode)}return a.jsxs(Pm.Provider,{value:f,children:[u&&f.visualElement?a.jsx(u,{visualElement:f.visualElement,...d}):null,tG(t,l,aG(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=m.forwardRef(i);return o[oG]=t,o}function dG({layoutId:t}){const e=m.useContext(fw).id;return e&&t!==void 0?e+"-"+t:t}function hG(t,e){m.useContext(SP).strict}function fG(t){const{drag:e,layout:n}=el;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function mG(t,e){if(typeof Proxy>"u")return lg;const n=new Map,r=(i,o)=>lg(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,lg(o,void 0,t,e)),n.get(o))})}function FP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function cg(t){return t===void 0||t===1}function Sy({scale:t,scaleX:e,scaleY:n}){return!cg(t)||!cg(e)||!cg(n)}function Wi(t){return Sy(t)||$P(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $P(t){return iN(t.x)||iN(t.y)}function iN(t){return t&&t!=="0%"}function bf(t,e,n){const r=t-n,s=e*r;return n+s}function oN(t,e,n,r,s){return s!==void 0&&(t=bf(t,s,r)),bf(t,n,r)+e}function Ey(t,e=0,n=1,r,s){t.min=oN(t.min,e,n,r,s),t.max=oN(t.max,e,n,r,s)}function VP(t,{x:e,y:n}){Ey(t.x,e.translate,e.scale,e.originPoint),Ey(t.y,n.translate,n.scale,n.originPoint)}const aN=.999999999999,lN=1.0000000000001;function vG(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ca(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VP(t,o)),r&&Wi(i.latestValues)&&ca(t,i.latestValues))}e.x<lN&&e.x>aN&&(e.x=1),e.y<lN&&e.y>aN&&(e.y=1)}function la(t,e){t.min=t.min+e,t.max=t.max+e}function cN(t,e,n,r,s=.5){const i=Ke(t.min,t.max,s);Ey(t,e,n,i,r)}function ca(t,e){cN(t.x,e.x,e.scaleX,e.scale,e.originX),cN(t.y,e.y,e.scaleY,e.scale,e.originY)}function UP(t,e){return FP(gG(t.getBoundingClientRect(),e))}function yG(t,e,n){const r=UP(t,n),{scroll:s}=e;return s&&(la(r.x,s.offset.x),la(r.y,s.offset.y)),r}const uN=()=>({translate:0,scale:1,origin:0,originPoint:0}),ua=()=>({x:uN(),y:uN()}),dN=()=>({min:0,max:0}),lt=()=>({x:dN(),y:dN()}),ky={current:null},BP={current:!1};function xG(){if(BP.current=!0,!!pw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ky.current=t.matches;t.addEventListener("change",e),e()}else ky.current=!1}const wG=new WeakMap;function bG(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Vt(s))t.addValue(r,s);else if(Vt(i))t.addValue(r,Za(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Za(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const hN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _G{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=sn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,He.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Dm(n),this.isVariantNode=kP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Vt(p)&&p.set(c[f])}}mount(e){var n;this.current=e,wG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),BP.current||xG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ky.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ci(this.notifyUpdate),Ci(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=bl.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in el){const n=el[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hN.length;r++){const s=hN[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=bG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Za(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(AI(r)||MI(r))?r=parseFloat(r):!R7(r)&&Ni.test(n)&&(r=vP(e,n)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Uw(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new xw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Aw.render(this.render)}}class zP extends _G{constructor(){super(...arguments),this.KeyframeResolver=y7}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function WP(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function CG(t){return window.getComputedStyle(t)}class NG extends zP{constructor(){super(...arguments),this.type="html",this.renderInstance=WP}readValueFromInstance(e,n){var r;if(bl.has(n))return(r=this.projection)!=null&&r.isProjecting?vy(n):LH(e,n);{const s=CG(e),i=(YI(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return UP(e,n)}build(e,n,r){Fw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Bw(e,n,r)}}const HP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SG(t,e,n,r){WP(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(HP.has(s)?s:zw(s),e.attrs[s])}class EG extends zP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(bl.has(n)){const r=gP(n);return r&&r.default||0}return n=HP.has(n)?n:zw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return DP(e,n,r)}build(e,n,r){RP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){SG(e,n,r,s)}mount(e){this.isSVGTag=PP(e.tagName),super.mount(e)}}const kG=(t,e)=>Vw(t)?new EG(e):new NG(e,{allowProjection:t!==m.Fragment});function Ea(t,e,n){const r=t.getProps();return Uw(r,e,n!==void 0?n:r.custom,t)}const Ty=t=>Array.isArray(t);function TG(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Za(n))}function jG(t){return Ty(t)?t[t.length-1]||0:t}function RG(t,e){const n=Ea(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const l=jG(i[o]);TG(t,o,l)}}function IG(t){return!!(Vt(t)&&t.add)}function jy(t,e){const n=t.getValue("willChange");if(IG(n))return n.add(e);if(!n&&_s.WillChange){const r=new _s.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function GP(t){return t.props[MP]}const PG=t=>t!==null;function AG(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(PG),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const DG={type:"spring",stiffness:500,damping:25,restSpeed:10},MG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OG={type:"keyframes",duration:.8},LG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FG=(t,{keyframes:e})=>e.length>2?OG:bl.has(t)?t.startsWith("scale")?MG(e[1]):DG:LG;function $G({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Ww=(t,e,n,r={},s,i)=>o=>{const l=Iw(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Lr(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};$G(l)||Object.assign(d,FG(t,d)),d.duration&&(d.duration=Lr(d.duration)),d.repeatDelay&&(d.repeatDelay=Lr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(_y(d),d.delay===0&&(h=!0)),(_s.instantAnimations||_s.skipAnimations)&&(h=!0,_y(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const f=AG(d.keyframes,l);if(f!==void 0){He.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new jw(d):new o7(d)};function VG({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function qP(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),f=l[d];if(f===void 0||u&&VG(u,d))continue;const p={delay:n,...Iw(i||{},d)},w=h.get();if(w!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===w&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const x=GP(t);if(x){const v=window.MotionHandoffAnimation(x,d,He);v!==null&&(p.startTime=v,g=!0)}}jy(t,d),h.start(Ww(d,h,f,t.shouldReduceMotion&&fP.has(d)?{type:!1}:p,t,g));const y=h.animation;y&&c.push(y)}return o&&Promise.all(c).then(()=>{He.update(()=>{o&&RG(t,o)})}),c}function KP(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:l-i*r}function Ry(t,e,n={}){var c;const r=Ea(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(qP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return UG(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function UG(t,e,n=0,r=0,s=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Ry(c,e,{...o,delay:n+(typeof r=="function"?0:r)+KP(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function BG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Ry(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Ry(t,e,n);else{const s=typeof e=="function"?Ea(t,e,n.custom):e;r=Promise.all(qP(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function YP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const zG=Lw.length;function QP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?QP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<zG;n++){const r=Lw[n],s=t.props[r];(su(s)||s===!1)&&(e[r]=s)}return e}const WG=[...Ow].reverse(),HG=Ow.length;function GG(t){return e=>Promise.all(e.map(({animation:n,options:r})=>BG(t,n,r)))}function qG(t){let e=GG(t),n=fN(),r=!0;const s=c=>(u,d)=>{var f;const h=Ea(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:w,...g}=h;u={...u,...g,...w}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=QP(t.parent)||{},h=[],f=new Set;let p={},w=1/0;for(let y=0;y<HG;y++){const x=WG[y],v=n[x],b=u[x]!==void 0?u[x]:d[x],N=su(b),_=x===c?v.isActive:null;_===!1&&(w=y);let C=b===d[x]&&b!==u[x]&&N;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),v.protectedKeys={...p},!v.isActive&&_===null||!b&&!v.prevProp||Am(b)||typeof b=="boolean")continue;const S=KG(v.prevProp,b);let E=S||x===c&&v.isActive&&!C&&N||y>w&&N,k=!1;const T=Array.isArray(b)?b:[b];let R=T.reduce(s(x),{});_===!1&&(R={});const{prevResolvedValues:I={}}=v,F={...I,...R},P=z=>{E=!0,f.has(z)&&(k=!0,f.delete(z)),v.needsAnimating[z]=!0;const A=t.getValue(z);A&&(A.liveStyle=!1)};for(const z in F){const A=R[z],M=I[z];if(p.hasOwnProperty(z))continue;let j=!1;Ty(A)&&Ty(M)?j=!YP(A,M):j=A!==M,j?A!=null?P(z):f.add(z):A!==void 0&&f.has(z)?P(z):v.protectedKeys[z]=!0}v.prevProp=b,v.prevResolvedValues=R,v.isActive&&(p={...p,...R}),r&&t.blockInitialAnimation&&(E=!1);const V=C&&S;E&&(!V||k)&&h.push(...T.map(z=>{const A={type:x};if(typeof z=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:M}=t,j=Ea(M,z);if(M.enteringChildren&&j){const{delayChildren:W}=j.transition||{};A.delay=KP(M.enteringChildren,t,W)}}return{animation:z,options:A}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const x=Ea(t,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(y.transition=x.transition)}f.forEach(x=>{const v=t.getBaseTarget(x),b=t.getValue(x);b&&(b.liveStyle=!0),y[x]=v??null}),h.push({animation:y})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=fN()}}}function KG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YP(e,t):!1}function $i(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fN(){return{animate:$i(!0),whileInView:$i(),whileHover:$i(),whileTap:$i(),whileDrag:$i(),whileFocus:$i(),exit:$i()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class YG extends Ri{constructor(e){super(e),e.animationState||(e.animationState=qG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Am(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let QG=0;class XG extends Ri{constructor(){super(...arguments),this.id=QG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const JG={animation:{Feature:YG},exit:{Feature:XG}};function iu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Lu(t){return{point:{x:t.pageX,y:t.pageY}}}const ZG=t=>e=>Dw(e)&&t(e,Lu(e));function wc(t,e,n,r){return iu(t,e,ZG(n),r)}const XP=1e-4,eq=1-XP,tq=1+XP,JP=.01,nq=0-JP,rq=0+JP;function qt(t){return t.max-t.min}function sq(t,e,n){return Math.abs(t-e)<=n}function mN(t,e,n,r=.5){t.origin=r,t.originPoint=Ke(e.min,e.max,t.origin),t.scale=qt(n)/qt(e),t.translate=Ke(n.min,n.max,t.origin)-t.originPoint,(t.scale>=eq&&t.scale<=tq||isNaN(t.scale))&&(t.scale=1),(t.translate>=nq&&t.translate<=rq||isNaN(t.translate))&&(t.translate=0)}function bc(t,e,n,r){mN(t.x,e.x,n.x,r?r.originX:void 0),mN(t.y,e.y,n.y,r?r.originY:void 0)}function pN(t,e,n){t.min=n.min+e.min,t.max=t.min+qt(e)}function iq(t,e,n){pN(t.x,e.x,n.x),pN(t.y,e.y,n.y)}function gN(t,e,n){t.min=e.min-n.min,t.max=t.min+qt(e)}function _f(t,e,n){gN(t.x,e.x,n.x),gN(t.y,e.y,n.y)}function Tn(t){return[t("x"),t("y")]}const ZP=({current:t})=>t?t.ownerDocument.defaultView:null,vN=(t,e)=>Math.abs(t-e);function oq(t,e){const n=vN(t.x,e.x),r=vN(t.y,e.y);return Math.sqrt(n**2+r**2)}class e2{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=dg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,w=oq(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!w)return;const{point:g}=f,{timestamp:y}=Et;this.history.push({...g,timestamp:y});const{onStart:x,onMove:v}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ug(p,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:w,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=dg(f.type==="pointercancel"?this.lastMoveEventInfo:ug(p,this.transformPagePoint),this.history);this.startEvent&&w&&w(f,x),g&&g(f,x)},!Dw(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const l=Lu(e),c=ug(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Et;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,dg(c,this.history)),this.removeListeners=Du(wc(this.contextWindow,"pointermove",this.handlePointerMove),wc(this.contextWindow,"pointerup",this.handlePointerUp),wc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ci(this.updatePoint)}}function ug(t,e){return e?{point:e(t.point)}:t}function yN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function dg({point:t},e){return{point:t,delta:yN(t,t2(e)),offset:yN(t,aq(e)),velocity:lq(e,.1)}}function aq(t){return t[0]}function t2(t){return t[t.length-1]}function lq(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=t2(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Lr(e)));)n--;if(!r)return{x:0,y:0};const i=Mn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cq(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ke(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ke(n,t,r.max):Math.min(t,n)),t}function xN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uq(t,{top:e,left:n,bottom:r,right:s}){return{x:xN(t.x,n,s),y:xN(t.y,e,r)}}function wN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dq(t,e){return{x:wN(t.x,e.x),y:wN(t.y,e.y)}}function hq(t,e){let n=.5;const r=qt(t),s=qt(e);return s>r?n=tu(e.min,e.max-r,t.min):r>s&&(n=tu(t.min,t.max-s,e.min)),bs(0,1,n)}function fq(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Iy=.35;function mq(t=Iy){return t===!1?t=0:t===!0&&(t=Iy),{x:bN(t,"left","right"),y:bN(t,"top","bottom")}}function bN(t,e,n){return{min:_N(t,e),max:_N(t,n)}}function _N(t,e){return typeof t=="number"?t:t[e]||0}const pq=new WeakMap;class gq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lu(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:w,onDragStart:g}=this.getProps();if(p&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_7(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tn(x=>{let v=this.getAxisMotionValue(x).get()||0;if(Fr.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const N=b.layout.layoutBox[x];N&&(v=qt(N)*(parseFloat(v)/100))}}this.originPoint[x]=v}),g&&He.postRender(()=>g(h,f)),jy(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:w,onDirectionLock:g,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(w&&this.currentDirection===null){this.currentDirection=vq(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),y&&y(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Tn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new e2(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:ZP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&He.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Nd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=cq(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&aa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uq(r.layoutBox,e):this.constraints=!1,this.elastic=mq(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Tn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fq(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!aa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=yG(r,s.root,this.visualElement.getTransformPagePoint());let o=dq(s.layout.layoutBox,i);if(n){const l=n(pG(o));this.hasMutatedConstraints=!!l,l&&(o=FP(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Tn(d=>{if(!Nd(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,w={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return jy(this.visualElement,e),r.start(Ww(e,r,0,n,this.visualElement,!1))}stopAnimation(){Tn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Tn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Tn(n=>{const{drag:r}=this.getProps();if(!Nd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(e[n]-Ke(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!aa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Tn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=hq({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Tn(o=>{if(!Nd(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Ke(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;pq.set(this.visualElement,this);const e=this.visualElement.current,n=wc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();aa(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),He.read(r);const o=iu(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Tn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Iy,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Nd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function vq(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class yq extends Ri{constructor(e){super(e),this.removeGroupControls=Ln,this.removeListeners=Ln,this.controls=new gq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const CN=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class xq extends Ri{constructor(){super(...arguments),this.removePointerDownListener=Ln}onPointerDown(e){this.session=new e2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:CN(e),onStart:CN(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&He.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=wc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let hg=!1;class wq extends m.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),hg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,hg=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||He.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Aw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;hg=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function n2(t){const[e,n]=NP(),r=m.useContext(fw);return a.jsx(wq,{...t,layoutGroup:r,switchLayoutGroup:m.useContext(OP),isPresent:e,safeToRemove:n})}function bq(t,e,n){const r=Vt(t)?t:Za(t);return r.start(Ww("",r,e,n)),r.animation}const _q=(t,e)=>t.depth-e.depth;class Cq{constructor(){this.children=[],this.isDirty=!1}add(e){gw(this.children,e),this.isDirty=!0}remove(e){vw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_q),this.isDirty=!1,this.children.forEach(e)}}function Nq(t,e){const n=sn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Ci(r),t(i-e))};return He.setup(r,!0),()=>Ci(r)}const r2=["TopLeft","TopRight","BottomLeft","BottomRight"],Sq=r2.length,NN=t=>typeof t=="string"?parseFloat(t):t,SN=t=>typeof t=="number"||oe.test(t);function Eq(t,e,n,r,s,i){s?(t.opacity=Ke(0,n.opacity??1,kq(r)),t.opacityExit=Ke(e.opacity??1,0,Tq(r))):i&&(t.opacity=Ke(e.opacity??1,n.opacity??1,r));for(let o=0;o<Sq;o++){const l=`border${r2[o]}Radius`;let c=EN(e,l),u=EN(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||SN(c)===SN(u)?(t[l]=Math.max(Ke(NN(c),NN(u),r),0),(Fr.test(u)||Fr.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Ke(e.rotate||0,n.rotate||0,r))}function EN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kq=s2(0,.5,zI),Tq=s2(.5,.95,Ln);function s2(t,e,n){return r=>r<t?0:r>e?1:n(tu(t,e,r))}function kN(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){kN(t.x,e.x),kN(t.y,e.y)}function TN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jN(t,e,n,r,s){return t-=e,t=bf(t,1/n,r),s!==void 0&&(t=bf(t,1/s,r)),t}function jq(t,e=0,n=1,r=.5,s,i=t,o=t){if(Fr.test(e)&&(e=parseFloat(e),e=Ke(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ke(i.min,i.max,r);t===i&&(l-=e),t.min=jN(t.min,e,n,l,s),t.max=jN(t.max,e,n,l,s)}function RN(t,e,[n,r,s],i,o){jq(t,e[n],e[r],e[s],e.scale,i,o)}const Rq=["x","scaleX","originX"],Iq=["y","scaleY","originY"];function IN(t,e,n,r){RN(t.x,e,Rq,n?n.x:void 0,r?r.x:void 0),RN(t.y,e,Iq,n?n.y:void 0,r?r.y:void 0)}function PN(t){return t.translate===0&&t.scale===1}function i2(t){return PN(t.x)&&PN(t.y)}function AN(t,e){return t.min===e.min&&t.max===e.max}function Pq(t,e){return AN(t.x,e.x)&&AN(t.y,e.y)}function DN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function o2(t,e){return DN(t.x,e.x)&&DN(t.y,e.y)}function MN(t){return qt(t.x)/qt(t.y)}function ON(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Aq{constructor(){this.members=[]}add(e){gw(this.members,e),e.scheduleRender()}remove(e){if(vw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Dq(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const fg=["","X","Y","Z"],Mq=1e3;let Oq=0;function mg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function a2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=GP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&a2(r)}function l2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=Oq++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($q),this.nodes.forEach(zq),this.nodes.forEach(Wq),this.nodes.forEach(Vq)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Cq)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xw),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=CP(o)&&!T7(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;He.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=Nq(f,250),sh.hasAnimatedSinceResize&&(sh.hasAnimatedSinceResize=!1,this.nodes.forEach($N)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||Yq,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),x=!this.targetLayout||!o2(this.targetLayout,p),v=!h&&f;if(this.options.layoutRoot||this.resumeFrom||v||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...Iw(w,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,v)}else h||$N(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ci(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&a2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(FN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Bq),this.nodes.forEach(Lq),this.nodes.forEach(Fq)):this.nodes.forEach(FN),this.clearAllSnapshots();const l=sn.now();Et.delta=bs(0,1e3/60,l-Et.timestamp),Et.timestamp=l,Et.isProcessing=!0,ng.update.process(Et),ng.preRender.process(Et),ng.render.process(Et),Et.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Aw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Uq),this.sharedNodes.forEach(Gq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qt(this.snapshot.measuredBox.x)&&!qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!i2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Wi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Qq(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return lt();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Xq))){const{scroll:d}=this.root;d&&(la(l.x,d.offset.x),la(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=lt();if(Gn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Gn(l,o),la(l.x,h.offset.x),la(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=lt();Gn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ca(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wi(d.latestValues)&&ca(c,d.latestValues)}return Wi(this.latestValues)&&ca(c,this.latestValues),c}removeTransform(o){const l=lt();Gn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Wi(u.latestValues))continue;Sy(u.latestValues)&&u.updateSnapshot();const d=lt(),h=u.measurePageBox();Gn(d,h),IN(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Wi(this.latestValues)&&IN(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Et.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Et.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=lt(),this.targetWithTransforms=lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),VP(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sy(this.parent.latestValues)||$P(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),_f(this.relativeTargetOrigin,l,c),Gn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Et.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Gn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;vG(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=lt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(TN(this.prevProjectionDelta.x,this.projectionDelta.x),TN(this.prevProjectionDelta.y,this.projectionDelta.y)),bc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!ON(this.projectionDelta.x,this.prevProjectionDelta.x)||!ON(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ua(),this.projectionDelta=ua(),this.projectionDeltaWithTransform=ua()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ua();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=lt(),p=c?c.source:void 0,w=this.layout?this.layout.source:void 0,g=p!==w,y=this.getStack(),x=!y||y.members.length<=1,v=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(Kq));this.animationProgress=0;let b;this.mixTargetDelta=N=>{const _=N/1e3;VN(h.x,o.x,_),VN(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_f(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qq(this.relativeTarget,this.relativeTargetOrigin,f,_),b&&Pq(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=lt()),Gn(b,this.relativeTarget)),g&&(this.animationValues=d,Eq(d,u,this.latestValues,_,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ci(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{sh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Za(0)),this.currentAnimation=bq(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mq),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&c2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||lt();const h=qt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=qt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Gn(l,c),ca(l,d),bc(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Aq),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&mg("z",o,u,this.animationValues);for(let d=0;d<fg.length;d++)mg(`rotate${fg[d]}`,o,u,this.animationValues),mg(`skew${fg[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=rh(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=rh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Dq(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in Ny){if(d[w]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:x}=Ny[w],v=h==="none"?d[w]:g(d[w],u);if(y){const b=y.length;for(let N=0;N<b;N++)o[y[N]]=v}else x?this.options.visualElement.renderState.vars[w]=v:o[w]=v}this.options.layoutId&&(o.pointerEvents=u===this?rh(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(LN),this.root.sharedNodes.clear()}}}function Lq(t){t.updateLayout()}function Fq(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Tn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=qt(f);f.min=r[h].min,f.max=f.min+p}):c2(i,e.layoutBox,r)&&Tn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=qt(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const l=ua();bc(l,r,e.layoutBox);const c=ua();o?bc(c,t.applyTransform(s,!0),e.measuredBox):bc(c,r,e.layoutBox);const u=!i2(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const w=lt();_f(w,e.layoutBox,f.layoutBox);const g=lt();_f(g,r,p.layoutBox),o2(w,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=w,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $q(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Vq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Uq(t){t.clearSnapshot()}function LN(t){t.clearMeasurements()}function FN(t){t.isLayoutDirty=!1}function Bq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $N(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zq(t){t.resolveTargetDelta()}function Wq(t){t.calcProjection()}function Hq(t){t.resetSkewAndRotation()}function Gq(t){t.removeLeadSnapshot()}function VN(t,e,n){t.translate=Ke(e.translate,0,n),t.scale=Ke(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function UN(t,e,n,r){t.min=Ke(e.min,n.min,r),t.max=Ke(e.max,n.max,r)}function qq(t,e,n,r){UN(t.x,e.x,n.x,r),UN(t.y,e.y,n.y,r)}function Kq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Yq={duration:.45,ease:[.4,0,.1,1]},BN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zN=BN("applewebkit/")&&!BN("chrome/")?Math.round:Ln;function WN(t){t.min=zN(t.min),t.max=zN(t.max)}function Qq(t){WN(t.x),WN(t.y)}function c2(t,e,n){return t==="position"||t==="preserve-aspect"&&!sq(MN(e),MN(n),.2)}function Xq(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Jq=l2({attachResizeListener:(t,e)=>iu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pg={current:void 0},u2=l2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!pg.current){const t=new Jq({});t.mount(window),t.setOptions({layoutScroll:!0}),pg.current=t}return pg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zq={pan:{Feature:xq},drag:{Feature:yq,ProjectionNode:u2,MeasureLayout:n2}};function HN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&He.postRender(()=>i(e,Lu(e)))}class eK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=C7(e,(n,r)=>(HN(this.node,r,"Start"),s=>HN(this.node,s,"End"))))}unmount(){}}class tK extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Du(iu(this.node.current,"focus",()=>this.onFocus()),iu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&He.postRender(()=>i(e,Lu(e)))}class nK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=k7(e,(n,r)=>(GN(this.node,r,"Start"),(s,{success:i})=>GN(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Py=new WeakMap,gg=new WeakMap,rK=t=>{const e=Py.get(t.target);e&&e(t)},sK=t=>{t.forEach(rK)};function iK({root:t,...e}){const n=t||document;gg.has(n)||gg.set(n,{});const r=gg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(sK,{root:t,...e})),r[s]}function oK(t,e,n){const r=iK(e);return Py.set(t,n),r.observe(t),()=>{Py.delete(t),r.unobserve(t)}}const aK={some:0,all:1};class lK extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:aK[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return oK(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(cK(e,n))&&this.startObserver()}unmount(){}}function cK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uK={inView:{Feature:lK},tap:{Feature:nK},focus:{Feature:tK},hover:{Feature:eK}},dK={layout:{ProjectionNode:u2,MeasureLayout:n2}},hK={...JG,...uK,...Zq,...dK},te=mG(hK,kG),Ur=Object.create(null);Ur.open="0";Ur.close="1";Ur.ping="2";Ur.pong="3";Ur.message="4";Ur.upgrade="5";Ur.noop="6";const ih=Object.create(null);Object.keys(Ur).forEach(t=>{ih[Ur[t]]=t});const Ay={type:"error",data:"parser error"},d2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",h2=typeof ArrayBuffer=="function",f2=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Hw=({type:t,data:e},n,r)=>d2&&e instanceof Blob?n?r(e):qN(e,r):h2&&(e instanceof ArrayBuffer||f2(e))?n?r(e):qN(new Blob([e]),r):r(Ur[t]+(e||"")),qN=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function KN(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let vg;function fK(t,e){if(d2&&t.data instanceof Blob)return t.data.arrayBuffer().then(KN).then(e);if(h2&&(t.data instanceof ArrayBuffer||f2(t.data)))return e(KN(t.data));Hw(t,!1,n=>{vg||(vg=new TextEncoder),e(vg.encode(n))})}const YN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<YN.length;t++)Jl[YN.charCodeAt(t)]=t;const mK=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=Jl[t.charCodeAt(r)],o=Jl[t.charCodeAt(r+1)],l=Jl[t.charCodeAt(r+2)],c=Jl[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},pK=typeof ArrayBuffer=="function",Gw=(t,e)=>{if(typeof t!="string")return{type:"message",data:m2(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:gK(t.substring(1),e)}:ih[n]?t.length>1?{type:ih[n],data:t.substring(1)}:{type:ih[n]}:Ay},gK=(t,e)=>{if(pK){const n=mK(t);return m2(n,e)}else return{base64:!0,data:t}},m2=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},p2="",vK=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{Hw(i,!1,l=>{r[o]=l,++s===n&&e(r.join(p2))})})},yK=(t,e)=>{const n=t.split(p2),r=[];for(let s=0;s<n.length;s++){const i=Gw(n[s],e);if(r.push(i),i.type==="error")break}return r};function xK(){return new TransformStream({transform(t,e){fK(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let yg;function Sd(t){return t.reduce((e,n)=>e+n.length,0)}function Ed(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function wK(t,e){yg||(yg=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Sd(n)<1)break;const c=Ed(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Sd(n)<2)break;const c=Ed(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Sd(n)<8)break;const c=Ed(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Ay);break}s=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Sd(n)<s)break;const c=Ed(n,s);l.enqueue(Gw(i?c:yg.decode(c),e)),r=0}if(s===0||s>t){l.enqueue(Ay);break}}}})}const g2=4;function at(t){if(t)return bK(t)}function bK(t){for(var e in at.prototype)t[e]=at.prototype[e];return t}at.prototype.on=at.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};at.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};at.prototype.off=at.prototype.removeListener=at.prototype.removeAllListeners=at.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};at.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};at.prototype.emitReserved=at.prototype.emit;at.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};at.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Mm=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Pn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),_K="arraybuffer";function v2(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const CK=Pn.setTimeout,NK=Pn.clearTimeout;function Om(t,e){e.useNativeTimers?(t.setTimeoutFn=CK.bind(Pn),t.clearTimeoutFn=NK.bind(Pn)):(t.setTimeoutFn=Pn.setTimeout.bind(Pn),t.clearTimeoutFn=Pn.clearTimeout.bind(Pn))}const SK=1.33;function EK(t){return typeof t=="string"?kK(t):Math.ceil((t.byteLength||t.size)*SK)}function kK(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function y2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function TK(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function jK(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class RK extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class qw extends at{constructor(e){super(),this.writable=!1,Om(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new RK(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Gw(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=TK(e);return n.length?"?"+n:""}}class IK extends qw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};yK(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,vK(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=y2()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let x2=!1;try{x2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PK=x2;function AK(){}class DK extends IK{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class $r extends at{constructor(e,n,r){super(),this.createRequest=e,Om(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=v2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=$r.requestsCount++,$r.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=AK,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $r.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$r.requestsCount=0;$r.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",QN);else if(typeof addEventListener=="function"){const t="onpagehide"in Pn?"pagehide":"unload";addEventListener(t,QN,!1)}}function QN(){for(let t in $r.requests)$r.requests.hasOwnProperty(t)&&$r.requests[t].abort()}const MK=function(){const t=w2({xdomain:!1});return t&&t.responseType!==null}();class OK extends DK{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=MK&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $r(w2,this.uri(),e)}}function w2(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||PK))return new XMLHttpRequest}catch{}if(!e)try{return new Pn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const b2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class LK extends qw{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=b2?{}:v2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;Hw(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Mm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=y2()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const xg=Pn.WebSocket||Pn.MozWebSocket;class FK extends LK{createSocket(e,n,r){return b2?new xg(e,n,r):n?new xg(e,n):new xg(e)}doWrite(e,n){this.ws.send(n)}}class $K extends qw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=wK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=xK();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&Mm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const VK={websocket:FK,webtransport:$K,polling:OK},UK=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,BK=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dy(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=UK.exec(t||""),i={},o=14;for(;o--;)i[BK[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=zK(i,i.path),i.queryKey=WK(i,i.query),i}function zK(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function WK(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const My=typeof addEventListener=="function"&&typeof removeEventListener=="function",oh=[];My&&addEventListener("offline",()=>{oh.forEach(t=>t())},!1);class mi extends at{constructor(e,n){if(super(),this.binaryType=_K,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Dy(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Dy(n.host).host);Om(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=jK(this.opts.query)),My&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},oh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=g2,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&mi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",mi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=EK(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Mm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(mi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),My&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=oh.indexOf(this._offlineEventListener);r!==-1&&oh.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}mi.protocol=g2;class HK extends mi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;mi.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;mi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function u(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let GK=class extends HK{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>VK[s]).filter(s=>!!s)),super(e,r)}};function qK(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Dy(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const KK=typeof ArrayBuffer=="function",YK=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,_2=Object.prototype.toString,QK=typeof Blob=="function"||typeof Blob<"u"&&_2.call(Blob)==="[object BlobConstructor]",XK=typeof File=="function"||typeof File<"u"&&_2.call(File)==="[object FileConstructor]";function Kw(t){return KK&&(t instanceof ArrayBuffer||YK(t))||QK&&t instanceof Blob||XK&&t instanceof File}function ah(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(ah(t[n]))return!0;return!1}if(Kw(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ah(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&ah(t[n]))return!0;return!1}function JK(t){const e=[],n=t.data,r=t;return r.data=Oy(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Oy(t,e){if(!t)return t;if(Kw(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Oy(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Oy(t[r],e));return n}return t}function ZK(t,e){return t.data=Ly(t.data,e),delete t.attachments,t}function Ly(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Ly(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Ly(t[n],e));return t}const C2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],eY=5;var me;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(me||(me={}));class tY{constructor(e){this.replacer=e}encode(e){return(e.type===me.EVENT||e.type===me.ACK)&&ah(e)?this.encodeAsBinary({type:e.type===me.EVENT?me.BINARY_EVENT:me.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===me.BINARY_EVENT||e.type===me.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=JK(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}class Yw extends at{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===me.BINARY_EVENT;r||n.type===me.BINARY_ACK?(n.type=r?me.EVENT:me.ACK,this.reconstructor=new nY(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Kw(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(me[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===me.BINARY_EVENT||r.type===me.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Yw.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case me.CONNECT:return Cf(n);case me.DISCONNECT:return n===void 0;case me.CONNECT_ERROR:return typeof n=="string"||Cf(n);case me.EVENT:case me.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&C2.indexOf(n[0])===-1);case me.ACK:case me.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nY{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=ZK(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function rY(t){return typeof t=="string"}const sY=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function iY(t){return t===void 0||sY(t)}function Cf(t){return Object.prototype.toString.call(t)==="[object Object]"}function oY(t,e){switch(t){case me.CONNECT:return e===void 0||Cf(e);case me.DISCONNECT:return e===void 0;case me.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&C2.indexOf(e[0])===-1);case me.ACK:return Array.isArray(e);case me.CONNECT_ERROR:return typeof e=="string"||Cf(e);default:return!1}}function aY(t){return rY(t.nsp)&&iY(t.id)&&oY(t.type,t.data)}const lY=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Yw,Encoder:tY,get PacketType(){return me},isPacketValid:aY,protocol:eY},Symbol.toStringTag,{value:"Module"}));function er(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const cY=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class N2 extends at{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[er(e,"open",this.onopen.bind(this)),er(e,"packet",this.onpacket.bind(this)),er(e,"error",this.onerror.bind(this)),er(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(cY.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:me.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),o.id=d}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,l)=>o?s(o):r(l);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>(this._queue[0],s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case me.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case me.EVENT:case me.BINARY_EVENT:this.onevent(e);break;case me.ACK:case me.BINARY_ACK:this.onack(e);break;case me.DISCONNECT:this.ondisconnect();break;case me.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:me.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function _l(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}_l.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};_l.prototype.reset=function(){this.attempts=0};_l.prototype.setMin=function(t){this.ms=t};_l.prototype.setMax=function(t){this.max=t};_l.prototype.setJitter=function(t){this.jitter=t};class Fy extends at{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Om(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new _l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||lY;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new GK(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=er(n,"open",function(){r.onopen(),e&&e()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=er(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(er(e,"ping",this.onping.bind(this)),er(e,"data",this.ondata.bind(this)),er(e,"error",this.onerror.bind(this)),er(e,"close",this.onclose.bind(this)),er(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Mm(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new N2(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Gl={};function lh(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=qK(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Gl[s]&&i in Gl[s].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return l?c=new Fy(r,e):(Gl[s]||(Gl[s]=new Fy(r,e)),c=Gl[s]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(lh,{Manager:Fy,Socket:N2,io:lh,connect:lh});const uY="https://king-s-cup-party-production.up.railway.app";class dY{constructor(){Ku(this,"socket",null);Ku(this,"listeners",new Map);Ku(this,"currentRoom",null)}connect(){var e;return(e=this.socket)!=null&&e.connected?this.socket:(this.socket=lh(uY,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3}),this.socket.on("connect",()=>{var n,r;console.log("Socket.IO connected:",(n=this.socket)==null?void 0:n.id),this.currentRoom&&((r=this.socket)==null||r.emit("join-room",{roomCode:this.currentRoom,playerId:""}))}),this.socket.on("disconnect",n=>{console.log("Socket.IO disconnected:",n)}),["room-changed","player-joined","player-left","player-changed","room-deleted","game-action"].forEach(n=>{var r;(r=this.socket)==null||r.on(n,s=>{const i=this.listeners.get(n);i==null||i.forEach(o=>o(s))})}),this.socket)}disconnect(){var e,n;this.currentRoom&&((e=this.socket)==null||e.emit("leave-room",{roomCode:this.currentRoom,playerId:""})),(n=this.socket)==null||n.disconnect(),this.socket=null,this.currentRoom=null}joinRoom(e,n=""){var r,s;this.connect(),this.currentRoom&&this.currentRoom!==e&&((r=this.socket)==null||r.emit("leave-room",{roomCode:this.currentRoom,playerId:n})),this.currentRoom=e,(s=this.socket)==null||s.emit("join-room",{roomCode:e,playerId:n})}leaveRoom(e,n=""){var r;(r=this.socket)==null||r.emit("leave-room",{roomCode:e,playerId:n}),this.currentRoom===e&&(this.currentRoom=null)}emitRoomUpdate(e,n){var r;(r=this.socket)==null||r.emit("room-update",{roomCode:e,update:n})}emitPlayerUpdate(e,n,r){var s;(s=this.socket)==null||s.emit("player-update",{roomCode:e,playerId:n,update:r})}emitGameAction(e,n,r){var s;(s=this.socket)==null||s.emit("game-action",{roomCode:e,action:n,payload:r})}on(e,n){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(n),()=>{var r;(r=this.listeners.get(e))==null||r.delete(n)}}off(e,n){var r;n?(r=this.listeners.get(e))==null||r.delete(n):this.listeners.delete(e)}isConnected(){var e;return((e=this.socket)==null?void 0:e.connected)??!1}getSocket(){return this.socket}}const kt=new dY,uo={A:{value:"A",title:" 1 ",description:" 1 ",emoji:""},2:{value:"2",title:" 2 ",description:" 2 ",emoji:""},3:{value:"3",title:" 3 ",description:"3 ",emoji:""},4:{value:"4",title:" 4 ",description:"4  ",emoji:""},5:{value:"5",title:" (Buddy)",description:" 1   ",emoji:""},6:{value:"6",title:"",description:" ( , )  /",emoji:""},7:{value:"7",title:" 7",description:"  7  7  ",emoji:""},8:{value:"8",title:"",description:" ",emoji:""},9:{value:"9",title:"",description:"  1 ",emoji:""},10:{value:"10",title:"",description:"  1 ",emoji:""},J:{value:"J",title:"",description:" ",emoji:""},Q:{value:"Q",title:"",description:" ",emoji:""},K:{value:"K",title:"King !",description:" 1-3 ,  4 () !",emoji:""}},hY=["hearts","diamonds","clubs","spades"],S2=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],$y={hearts:"",diamonds:"",clubs:"",spades:""},Vy={hearts:"text-destructive",diamonds:"text-destructive",clubs:"text-paper-foreground",spades:"text-paper-foreground"};function kd(){const t=[];for(const e of hY)for(const n of S2)t.push({value:n,suit:e,id:`${n}-${e}`});return t}function Td(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function XN(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const E2="https://king-s-cup-party-production.up.railway.app",fY=3*60*60*1e3,k2=!1,Nf=fY;async function T2(){try{const t=Math.floor(Nf/6e4);console.log(` Running room cleanup (max age: ${t} minutes)...`);const n=await(await fetch(`${E2}/api/cleanup-rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testMode:k2,maxAgeMs:Nf})})).json();return!n||n.ok===!1?(console.error(" cleanup-rooms returned error:",n),n):(n.deletedCount>0?console.log(` Cleaned up ${n.deletedCount} old rooms:`,n.deletedCodes):console.log(" No old rooms to clean up"),n)}catch(t){return console.error(" Error during room cleanup:",t),{ok:!1,error:t.message}}}async function Fu(){await T2()}async function mY(){try{const t=await fetch(`${E2}/api/rooms`);if(!t.ok)return console.error(" Failed to get rooms"),[];const e=await t.json(),n=Date.now(),r=(e||[]).map(s=>{const i=new Date(s.created_at).getTime(),o=n-i,l=Math.floor(o/6e4),c=Math.floor(l/60);return{...s,ageMs:o,ageMinutes:l,ageHours:c,willBeDeleted:o>Nf}});return console.log(" Room ages:",r),r}catch(t){return console.error(" Error getting rooms:",t),[]}}typeof window<"u"&&(window.debugRoomCleanup={cleanupNow:T2,getRoomsWithAge:mY,testMode:k2,maxAgeMinutes:Math.floor(Nf/6e4)});const Ot="https://king-s-cup-party-production.up.railway.app",JN=11;function wg(t){const e=Array.from({length:JN},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*JN)+1:e[Math.floor(Math.random()*e.length)]}function pY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=bt();m.useEffect(()=>{const y=async()=>{if(s&&t){await fetch(`${Ot}/api/players/${s}`,{method:"DELETE"});const v=await(await fetch(`${Ot}/api/rooms/${t.id}/players`)).json();(!v||v.length===0)&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"DELETE"})}};return window.addEventListener("beforeunload",y),()=>window.removeEventListener("beforeunload",y)},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.code))return;kt.joinRoom(t.code,s||"");const y=kt.on("room-changed",_=>{e(C=>C?{...C,deck:_.deck?typeof _.deck=="string"?JSON.parse(_.deck):_.deck:C.deck,current_card:_.current_card!==void 0?typeof _.current_card=="string"?JSON.parse(_.current_card):_.current_card:C.current_card,cards_remaining:_.cards_remaining??C.cards_remaining,game_started:_.game_started??C.game_started,is_active:_.is_active??C.is_active}:null)}),x=kt.on("player-joined",_=>{r(C=>C.some(S=>S.id===_.id)?C:[...C,_])}),v=kt.on("player-left",_=>{r(C=>C.filter(S=>S.id!==_.playerId))}),b=kt.on("player-changed",_=>{r(C=>C.map(S=>S.id===_.playerId?{...S,..._}:S))}),N=kt.on("room-deleted",()=>{e(null),r([]),i(null)});return()=>{y(),x(),v(),b(),N(),kt.leaveRoom(t.code,s||"")}},[t==null?void 0:t.code,s]);const u=m.useCallback(async y=>{l(!0);try{await Fu();const x=XN(),v=Td(kd()),b=crypto.randomUUID();if(!(await fetch(`${Ot}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b,code:x,host_name:y,deck:v,cards_remaining:52})})).ok)throw new Error("Failed to create room");const _=crypto.randomUUID();if(!(await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_,room_id:b,name:y,is_host:!0,avatar:wg([])})})).ok)throw new Error("Failed to create player");const S={id:b,code:x,host_name:y,is_active:!0,deck:v,current_card:null,cards_remaining:52,game_started:!1},E={id:_,room_id:b,name:y,is_host:!0,is_active:!0,avatar:1};return e(S),r([E]),i(_),c({title:"! ",description:`: ${x}`}),{...S,playerId:_}}catch(x){return c({title:"",description:x.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(y,x,v)=>{l(!0);try{const b=await fetch(`${Ot}/api/rooms/${y.toUpperCase()}`);if(!b.ok)throw new Error(" ");const N=await b.json(),C=await(await fetch(`${Ot}/api/rooms/${N.id}/players`)).json();let S=v?(C||[]).find(T=>T.id===v):null;S||(S=(C||[]).find(T=>T.name===x));let E;if(S)E=S;else{const T=(C||[]).map(I=>I.avatar).filter(Boolean),R=crypto.randomUUID();await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:R,room_id:N.id,name:x,is_host:!1,avatar:wg(T)})}),E={id:R,room_id:N.id,name:x,is_host:!1,is_active:!0,avatar:wg(T)}}e({...N,deck:typeof N.deck=="string"?JSON.parse(N.deck):N.deck||[],current_card:typeof N.current_card=="string"?JSON.parse(N.current_card):N.current_card});const k=new Map;for(const T of C||[])k.set(T.id,T);return k.set(E.id,E),r(Array.from(k.values())),i(E.id),c({title:"! ",description:` ${x}`}),{room:N,playerId:E.id}}catch(b){return c({title:"",description:b.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async()=>{if(!t)return;const y=Td(kd());await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({game_started:!0,deck:y,cards_remaining:52,current_card:null})})},[t]),f=m.useCallback(async()=>{if(!t||t.cards_remaining===0)return;const y=[...t.deck||[]],x=y.pop();x&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deck:y,current_card:x,cards_remaining:y.length})})},[t]),p=m.useCallback(async()=>{if(!t)return;const y=Td(kd());await fetch(`${Ot}/api/rooms/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({deck:y,cards_remaining:52,current_card:null})}),c({title:"! ",description:""})},[t,c]),w=m.useCallback(async()=>{if(!s||!t)return;await fetch(`${Ot}/api/players/${s}`,{method:"DELETE"});const x=await(await fetch(`${Ot}/api/rooms/${t.id}/players`)).json();(!x||x.length===0)&&await fetch(`${Ot}/api/rooms/${t.id}`,{method:"DELETE"}),e(null),r([]),i(null)},[s,t]),g=m.useCallback(async y=>{l(!0);try{const x=XN(),v=Td(kd()),b=crypto.randomUUID();await fetch(`${Ot}/api/rooms`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b,code:x,host_name:y,deck:v,cards_remaining:52,game_started:!0})});const N=crypto.randomUUID();await fetch(`${Ot}/api/players`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:N,room_id:b,name:y,is_host:!0,avatar:1})});const _={id:b,code:x,host_name:y,is_active:!0,deck:v,current_card:null,cards_remaining:52,game_started:!0};return e(_),r([{id:N,room_id:b,name:y,is_host:!0,is_active:!0,avatar:1}]),i(N),c({title:" Quick Start!",description:` ${x} `}),_}catch(x){return c({title:"",description:x.message,variant:"destructive"}),null}finally{l(!1)}},[c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,reshuffleDeck:p,leaveRoom:w,quickStart:g}}const gn="https://king-s-cup-party-production.up.railway.app",Zr=t=>t.replace(/_/g,"-");function gY(){const t=new Map;return{from:e=>({select:(n="*")=>({eq:(r,s)=>({eq:(i,o)=>({single:async()=>{try{const l=e==="rooms"&&r==="code"?`${gn}/api/rooms/${s}`:`${gn}/api/${Zr(e)}`,c=await fetch(l);return c.ok?{data:await c.json(),error:null}:{data:null,error:new Error("Not found")}}catch(l){return{data:null,error:l}}},async then(l){const c=await this.single();l(c)}}),single:async()=>{try{const i=e==="rooms"&&r==="code"?`${gn}/api/rooms/${s}`:`${gn}/api/${Zr(e)}`,o=await fetch(i);return o.ok?{data:await o.json(),error:null}:{data:null,error:new Error("Not found")}}catch(i){return{data:null,error:i}}},async then(i){try{const l=await(await fetch(`${gn}/api/${e==="rooms"&&r==="room_id"?`rooms/${s}/players`:Zr(e)}`)).json();i({data:Array.isArray(l)?l:[l],error:null})}catch(o){i({data:[],error:o})}}}),order:()=>({async then(r){try{const i=await(await fetch(`${gn}/api/${Zr(e)}`)).json();r({data:Array.isArray(i)?i:[],error:null})}catch(s){r({data:[],error:s})}}}),async then(r){try{const i=await(await fetch(`${gn}/api/${Zr(e)}`)).json();r({data:Array.isArray(i)?i:[],error:null})}catch(s){r({data:[],error:s})}}}),insert:n=>({select:()=>({single:async()=>{try{const r=n.id||crypto.randomUUID();return(await fetch(`${gn}/api/${e==="rooms"?"rooms":"players"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,id:r})})).ok?{data:{...n,id:r},error:null}:{data:null,error:new Error("Insert failed")}}catch(r){return{data:null,error:r}}}})}),update:n=>({eq:(r,s)=>({eq:(i,o)=>({async then(l){try{await fetch(`${gn}/api/${Zr(e)}/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),l({error:null})}catch(c){l({error:c})}}}),async then(i){try{await fetch(`${gn}/api/${Zr(e)}/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i({error:null,data:null})}catch(o){i({error:o})}}})}),delete:()=>({eq:(n,r)=>({async then(s){try{await fetch(`${gn}/api/${Zr(e)}/${r}`,{method:"DELETE"}),s({error:null})}catch(i){s({error:i})}}}),in:(n,r)=>({async then(s){try{for(const i of r)await fetch(`${gn}/api/${Zr(e)}/${i}`,{method:"DELETE"});s({error:null})}catch(i){s({error:i})}}})})}),channel:e=>{const n=[];let r=null;const s=e.match(/room-([a-zA-Z0-9-]+)/);s&&(r=s[1]);const i={on:(o,l,c)=>(n.push({event:o,callback:c}),i),subscribe:o=>(r&&(kt.joinRoom(r),kt.on("room-changed",l=>{n.forEach(({callback:c})=>c({eventType:"UPDATE",new:l}))}),kt.on("player-joined",l=>{n.forEach(({callback:c})=>c({eventType:"INSERT",new:l}))}),kt.on("player-left",l=>{n.forEach(({callback:c})=>c({eventType:"DELETE",old:{id:l.playerId}}))}),kt.on("player-changed",l=>{n.forEach(({callback:c})=>c({eventType:"UPDATE",new:l}))})),o&&setTimeout(()=>o("SUBSCRIBED"),100),i)};return t.set(e,{unsubscribe:()=>{r&&kt.leaveRoom(r)}}),i},removeChannel:e=>{},functions:{invoke:async(e,n)=>{try{return{data:await(await fetch(`${gn}/api/${e.replace("-","/")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.body)})).json(),error:null}}catch(r){return{data:null,error:r}}}},realtime:{connect:()=>(kt.connect(),Promise.resolve())}}}const U=gY();function vY(t){return t.value==="A"?1:["10","J","Q","K"].includes(t.value)?0:parseInt(t.value)}function Bs(t){return t.reduce((n,r)=>n+vY(r),0)%10}function ho(t){if(t.length!==2)return{isPok:!1,pokValue:null};const e=Bs(t);return e===9?{isPok:!0,pokValue:9}:e===8?{isPok:!0,pokValue:8}:{isPok:!1,pokValue:null}}function ou(t){if(t.length===2){const e=ho(t);if(e.pokValue===9)return{type:"pok9",name:" 9",multiplier:2};if(e.pokValue===8)return{type:"pok8",name:" 8",multiplier:2};const n=t[0].suit===t[1].suit;if(t[0].value===t[1].value)return{type:"pair",name:"",multiplier:2};if(n)return{type:"deng",name:"",multiplier:2}}if(t.length===3){if(t[0].value===t[1].value&&t[1].value===t[2].value)return{type:"tong",name:"",multiplier:5};if(t.every(i=>["J","Q","K"].includes(i.value)))return{type:"samLeung",name:"",multiplier:3};const n=t.map(i=>i.value==="A"?1:i.value==="J"?11:i.value==="Q"?12:i.value==="K"?13:parseInt(i.value)).sort((i,o)=>i-o);if(n[1]===n[0]+1&&n[2]===n[1]+1)return{type:"straight",name:"",multiplier:3};if(t.every(i=>i.suit===t[0].suit))return{type:"flush",name:"",multiplier:3};if(t[0].value===t[1].value||t[1].value===t[2].value||t[0].value===t[2].value)return{type:"deng",name:"",multiplier:3}}return{type:"normal",name:"",multiplier:1}}function yY(t,e){const n=ho(t),r=ho(e),s=Bs(t),i=Bs(e),o=ou(t),l=ou(e);return n.isPok&&!r.isPok?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:!n.isPok&&r.isPok?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:n.isPok&&r.isPok?n.pokValue>r.pokValue?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:n.pokValue<r.pokValue?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}:s>i?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:s<i?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:l.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}}function jd(){const t=["hearts","diamonds","clubs","spades"],e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],n=[];for(const r of t)for(const s of e)n.push({suit:r,value:s});return Zl(n)}function Zl(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function j2(t){switch(t){case"hearts":return"";case"diamonds":return"";case"clubs":return"";case"spades":return""}}function R2(t){return t==="hearts"||t==="diamonds"?"text-red-500":"text-black"}function ZN(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const eS=11;function tS(t){const e=Array.from({length:eS},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*eS)+1:e[Math.floor(Math.random()*e.length)]}function xY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=bt();m.useEffect(()=>{const _=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:C}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!C||C.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]),m.useEffect(()=>{if(t!=null&&t.id)return U.channel(`pokdeng-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},_=>{if(_.eventType==="UPDATE"){const C=_.new;e(S=>S?{...S,deck:C.deck||[],game_started:C.game_started,game_phase:C.game_phase||"waiting",current_player_index:C.current_player_index||0,is_active:C.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},_=>{if(_.eventType==="INSERT"){const C=_.new;let S=[];try{typeof C.cards=="string"?S=JSON.parse(C.cards):Array.isArray(C.cards)&&(S=C.cards)}catch(E){console.error("Error parsing cards:",E)}r(E=>E.some(k=>k.id===C.id)?E:(setTimeout(()=>{c({title:" ",description:`${C.name} `,duration:3e3})},0),[...E,{...C,cards:S}]))}else if(_.eventType==="DELETE"){const C=_.old;r(S=>{const E=S.find(k=>k.id===C.id);return E&&setTimeout(()=>{c({title:"",description:`${E.name} `,duration:3e3})},0),S.filter(k=>k.id!==C.id)})}else if(_.eventType==="UPDATE"){const C=_.new;let S=[];try{typeof C.cards=="string"?S=JSON.parse(C.cards):Array.isArray(C.cards)&&(S=C.cards)}catch(E){console.error("Error parsing cards:",E)}r(E=>E.map(k=>k.id===C.id?{...C,cards:S}:k))}}).subscribe(),()=>{}},[t==null?void 0:t.id,c]);const u=m.useCallback(async _=>{l(!0);try{await Fu();const C=ZN(),S=Zl(jd()),E=tS([]),{data:k,error:T}=await U.from("rooms").insert({code:C,host_name:_,deck:S,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting"}).select().single();if(T)throw T;const{data:R,error:I}=await U.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,avatar:E,player_order:0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:k.current_player_index||0}),r([{...R,cards:[]}]),i(R.id),c({title:"! ",description:`: ${C}`}),{...k,playerId:R.id}}catch(C){return c({title:"",description:C.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(_,C,S)=>{l(!0);try{const{data:E,error:k}=await U.from("rooms").select().eq("code",_.toUpperCase()).eq("is_active",!0).eq("game_type","pokdeng").single();if(k||!E)throw new Error(" ");const{data:T}=await U.from("players").select().eq("room_id",E.id).eq("is_active",!0);let R=S?(T||[]).find(V=>V.id===S):null;if(!R){const V=(T||[]).filter($=>$.name===C);if(V.length>0&&(R=V[0],console.log("Found player with same name, reusing:",R.id),V.length>1)){const $=V.slice(1).map(z=>z.id);await U.from("players").delete().in("id",$)}}let I;if(R)I=R,console.log("Session recovery: found existing player",I.id);else{if(E.game_started)throw new Error(" ");if(((T==null?void 0:T.length)||0)>=8)throw new Error(" ( 8 )");const V=(T||[]).map(M=>M.avatar).filter(Boolean),$=tS(V),{data:z,error:A}=await U.from("players").insert({room_id:E.id,name:C,is_host:!1,avatar:$,is_dealer:!1,player_order:(T==null?void 0:T.length)||0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(A)throw A;I=z}e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,deck:E.deck,game_started:E.game_started,game_phase:E.game_phase||"waiting",current_player_index:E.current_player_index||0});const F=V=>V.map($=>{let z=[];try{typeof $.cards=="string"?z=JSON.parse($.cards):Array.isArray($.cards)&&(z=$.cards)}catch(A){console.error("Error parsing cards for player:",$.name,A)}return{...$,cards:z}}),P=new Map;for(const V of T||[])P.set(V.id,V);return P.has(I.id)||P.set(I.id,I),r(F(Array.from(P.values()))),i(I.id),c({title:"! ",description:` ${C}`}),{room:E,playerId:I.id}}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async()=>{if(!t||n.length<2)return;const C=[...Zl(jd())];await U.from("rooms").update({game_started:!0,deck:C,game_phase:"dealing",current_player_index:0}).eq("id",t.id);for(let S=0;S<n.length;S++){const E=C.pop();await U.from("players").update({cards:[E],points:Bs([E])}).eq("id",n[S].id),await new Promise(k=>setTimeout(k,500))}for(let S=0;S<n.length;S++){const E=n[S].cards.length>0?[...n[S].cards,C.pop()]:[C.pop(),C.pop()],k=Bs(E);await U.from("players").update({cards:E,points:k,has_drawn:!1,result:null,multiplier:1}).eq("id",n[S].id),await new Promise(T=>setTimeout(T,500))}await U.from("rooms").update({deck:C,game_phase:"drawing"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),f=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(I=>I.id===s);if(!_||_.has_drawn||_.cards.length>=3)return;const C=[...t.deck];if(C.length===0)return;const S=C.pop(),E=[..._.cards,S],k=Bs(E);await U.from("rooms").update({deck:C}).eq("id",t.id),await U.from("players").update({cards:E,points:k,has_drawn:!0}).eq("id",s);const T=n.filter(I=>!I.is_dealer),R=T.findIndex(I=>I.id===s);R<T.length-1?await U.from("rooms").update({current_player_index:R+1}).eq("id",t.id):await U.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),p=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(E=>E.id===s);if(!_||_.has_drawn)return;await U.from("players").update({has_drawn:!0}).eq("id",s);const C=n.filter(E=>!E.is_dealer),S=C.findIndex(E=>E.id===s);S<C.length-1?await U.from("rooms").update({current_player_index:S+1}).eq("id",t.id):await U.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),w=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(T=>T.is_dealer);if(!_||_.id!==s)return;const C=[...t.deck];if(C.length===0||_.cards.length>=3)return;const S=C.pop(),E=[..._.cards,S],k=Bs(E);await U.from("rooms").update({deck:C}).eq("id",t.id),await U.from("players").update({cards:E,points:k,has_drawn:!0}).eq("id",_.id)},[t,s,n]),g=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(C=>C.is_dealer);!_||_.id!==s||_.has_drawn||await U.from("players").update({has_drawn:!0}).eq("id",_.id)},[t,s,n]),y=m.useCallback(async()=>{if(!t)return;const _=n.find(S=>S.is_dealer);if(!_)return;const C=n.map(S=>{if(S.is_dealer)return{id:S.id,result:null,multiplier:1};const E=yY(S.cards,_.cards);return{id:S.id,result:E.result==="player_win"?"player_win":"dealer_win",multiplier:E.playerMultiplier}});for(const S of C)await U.from("players").update({result:S.result,multiplier:S.multiplier}).eq("id",S.id);await U.from("rooms").update({game_phase:"ended"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),x=m.useCallback(async()=>{if(!t)return;const C=[...Zl(jd())],S=[...n].sort((R,I)=>R.player_order-I.player_order),k=(S.findIndex(R=>R.is_dealer)+1)%S.length,T=n.map(R=>{const I=[C.pop(),C.pop()],F=Bs(I),P=R.id===S[k].id;return{id:R.id,cards:I,points:F,has_drawn:!1,result:null,multiplier:1,is_dealer:P}});await U.from("rooms").update({deck:C,game_phase:"drawing",current_player_index:0}).eq("id",t.id);for(const R of T)await U.from("players").update({cards:R.cards,points:R.points,has_drawn:R.has_drawn,result:R.result,multiplier:R.multiplier,is_dealer:R.is_dealer}).eq("id",R.id);c({title:" !",description:""})},[t,n,c]),v=m.useCallback(async()=>{if(!s||!t)return;await U.from("players").delete().eq("id",s);const{data:_}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await U.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),b=m.useCallback(async(_,C=!1)=>{l(!0);try{const S=ZN(),E=Zl(jd()),{data:k,error:T}=await U.from("rooms").insert({code:S,host_name:_,deck:E,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting",game_started:!1}).select().single();if(T)throw T;if(C)return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([]),i(null),c({title:" LIVE Mode!",description:` ${S}  - `}),k;const{data:R,error:I}=await U.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,player_order:0,cards:[]}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([{...R,cards:[]}]),i(R.id),c({title:" Quick Start!",description:` ${S} `}),k}catch(S){return c({title:"",description:S.message,variant:"destructive"}),null}finally{l(!1)}},[c]),N=m.useCallback(async _=>{if(t)try{await U.from("players").update({is_dealer:!1}).eq("room_id",t.id).eq("is_dealer",!0),await U.from("players").update({is_dealer:!0}).eq("id",_),c({title:" ",duration:2e3})}catch(C){console.error("Error setting dealer:",C),c({title:" ",variant:"destructive",duration:3e3})}},[t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,standCard:p,dealerDraw:w,dealerStand:g,showdown:y,nextRound:x,leaveRoom:v,quickStart:b,setDealer:N}}const Sf=[{id:1,category:"",word_civilian:"",word_undercover:""},{id:2,category:"",word_civilian:"",word_undercover:""},{id:3,category:"",word_civilian:"",word_undercover:""},{id:4,category:"",word_civilian:"",word_undercover:""},{id:5,category:"",word_civilian:"",word_undercover:""},{id:6,category:"",word_civilian:"",word_undercover:""},{id:7,category:"",word_civilian:"",word_undercover:""},{id:8,category:"",word_civilian:"",word_undercover:""},{id:9,category:"",word_civilian:"",word_undercover:""},{id:10,category:"",word_civilian:"",word_undercover:""},{id:11,category:"",word_civilian:"",word_undercover:""},{id:12,category:"",word_civilian:"",word_undercover:""},{id:13,category:"",word_civilian:"",word_undercover:""},{id:14,category:"",word_civilian:"",word_undercover:""},{id:15,category:"",word_civilian:"",word_undercover:""},{id:16,category:"",word_civilian:"",word_undercover:""},{id:17,category:"",word_civilian:"",word_undercover:""},{id:18,category:"",word_civilian:"",word_undercover:""},{id:19,category:"",word_civilian:"",word_undercover:""},{id:20,category:"",word_civilian:"",word_undercover:""},{id:21,category:"",word_civilian:"",word_undercover:""},{id:22,category:"",word_civilian:"",word_undercover:""},{id:23,category:"",word_civilian:"",word_undercover:""},{id:24,category:"",word_civilian:"",word_undercover:""},{id:25,category:"",word_civilian:"",word_undercover:""},{id:26,category:"",word_civilian:"",word_undercover:""},{id:27,category:"",word_civilian:"",word_undercover:""},{id:28,category:"",word_civilian:"",word_undercover:""},{id:29,category:"",word_civilian:"",word_undercover:""},{id:30,category:"",word_civilian:"",word_undercover:""},{id:31,category:"",word_civilian:"",word_undercover:""},{id:32,category:"",word_civilian:"",word_undercover:""},{id:33,category:"",word_civilian:"",word_undercover:""},{id:34,category:"",word_civilian:"",word_undercover:""},{id:35,category:"",word_civilian:"",word_undercover:""},{id:36,category:"",word_civilian:"",word_undercover:""},{id:37,category:"",word_civilian:"",word_undercover:""},{id:38,category:"",word_civilian:"",word_undercover:""},{id:39,category:"18+",word_civilian:"",word_undercover:""},{id:40,category:"18+",word_civilian:"",word_undercover:""},{id:41,category:"18+",word_civilian:"",word_undercover:""},{id:42,category:"18+",word_civilian:"",word_undercover:""}];function wY(t){return t<=4||t<=6?1:(t<=8,2)}function bY(t){let e=Sf;return t&&t!==""&&(e=Sf.filter(n=>n.category===t)),e[Math.floor(Math.random()*e.length)]}function _Y(t,e,n=!1){const r=wY(t.length),s=n&&t.length>=5?1:0,i=new Set;for(;i.size<r;)i.add(Math.floor(Math.random()*t.length));const o=new Set;if(s>0)for(;o.size<s;){const l=Math.floor(Math.random()*t.length);i.has(l)||o.add(l)}return t.map((l,c)=>{let u="CIVILIAN",d=e.word_civilian;return i.has(c)?(u="UNDERCOVER",d=e.word_undercover):o.has(c)&&(u="MR_WHITE",d="???"),{id:l.id,name:l.name,avatar:l.avatar,role:u,word:d,is_alive:!0,vote_count:0,has_voted:!1,is_host:l.is_host}})}function CY(t){const e=t.filter(s=>s.is_alive),n=e.filter(s=>s.role==="UNDERCOVER"),r=e.filter(s=>s.role==="CIVILIAN"||s.role==="MR_WHITE");return n.length>=r.length?{isGameOver:!0,winner:"UNDERCOVER",reason:"! "}:n.length===0?{isGameOver:!0,winner:"CIVILIAN",reason:" ! "}:{isGameOver:!1,winner:null,reason:""}}function NY(t){const e=t.filter(s=>s.is_alive);if(e.length===0)return null;const n=Math.max(...e.map(s=>s.vote_count));if(n===0)return null;const r=e.filter(s=>s.vote_count===n);return r[Math.floor(Math.random()*r.length)]}function I2(){const t=new Set(Sf.map(e=>e.category));return["",...Array.from(t)]}let tl=[],SY=1e3;function Rd(){return[...Sf,...tl]}function EY(t){const e={...t,id:SY++};return tl.push(e),e}function kY(t){if(t.id>=1e3){const e=tl.findIndex(n=>n.id===t.id);e!==-1&&(tl[e]=t)}}function TY(t){t>=1e3&&(tl=tl.filter(e=>e.id!==t))}function jY(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const nS=15;function rS(t){const e=Array.from({length:nS},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*nS)+1:e[Math.floor(Math.random()*e.length)]}function RY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState(!1),{toast:c}=bt();m.useEffect(()=>{const N=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:_}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N)}},[s,t]),m.useEffect(()=>{if(t!=null&&t.id)return U.channel(`undercover-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},N=>{if(N.eventType==="UPDATE"){const _=N.new;e(C=>C?{...C,game_phase:_.game_phase||"WAITING",current_turn_index:_.current_player_index||0,is_active:_.is_active,vocabulary:_.current_card||null,round:_.cards_remaining||1,timer_seconds:_.timer_seconds||30,include_mr_white:_.include_mr_white||!1,selected_category:_.selected_category||""}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},N=>{if(N.eventType==="INSERT"){const _=N.new;r(C=>C.some(S=>S.id===_.id)?C:(setTimeout(()=>{c({title:" ",description:`${_.name} `,duration:3e3})},0),[...C,{id:_.id,name:_.name,avatar:_.avatar,role:_.role||"CIVILIAN",word:_.word||"",is_alive:_.is_alive??!0,vote_count:_.vote_count||0,has_voted:_.has_voted||!1,voted_for:_.voted_for,is_host:_.is_host}]))}else if(N.eventType==="DELETE"){const _=N.old;console.log("DELETE event received for player:",_.id,_.name),r(C=>{const S=C.find(k=>k.id===_.id);S?(console.log("Removing player from list:",S.name),setTimeout(()=>{c({title:"",description:`${S.name} `,duration:3e3})},0)):console.log("Player not found in current list, ID:",_.id);const E=C.filter(k=>k.id!==_.id);return console.log("Players after filter:",E.length,"players"),E})}else if(N.eventType==="UPDATE"){const _=N.new;r(C=>C.map(S=>S.id===_.id?{...S,role:_.role||S.role,word:_.word||S.word,is_alive:_.is_alive??S.is_alive,vote_count:_.vote_count??S.vote_count,has_voted:_.has_voted??S.has_voted,voted_for:_.voted_for}:S))}}).subscribe(),()=>{}},[t==null?void 0:t.id,c]);const u=m.useCallback(async N=>{l(!0);try{await Fu();const _=jY(),C=rS([]),{data:S,error:E}=await U.from("rooms").insert({code:_,host_name:N,game_type:"undercover",game_phase:"WAITING",cards_remaining:1}).select().single();if(E)throw E;const{data:k,error:T}=await U.from("players").insert({room_id:S.id,name:N,is_host:!0,avatar:C,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(T)throw T;return e({id:S.id,code:S.code,host_name:S.host_name,is_active:S.is_active,game_phase:"WAITING",current_turn_index:0,vocabulary:null,round:1,timer_seconds:30,include_mr_white:!1,selected_category:""}),r([{id:k.id,name:k.name,avatar:k.avatar,role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,is_host:!0}]),i(k.id),c({title:"!",description:`: ${_}`}),{...S,playerId:k.id}}catch(_){return c({title:"",description:_.message,variant:"destructive"}),null}finally{l(!1)}},[c]),d=m.useCallback(async(N,_,C)=>{l(!0);try{const{data:S,error:E}=await U.from("rooms").select("*").eq("code",N.toUpperCase()).eq("is_active",!0).single();if(E)throw new Error("");const{data:k}=await U.from("players").select("*").eq("room_id",S.id).eq("is_active",!0);let T=C?(k||[]).find(P=>P.id===C):null;if(!T){const P=(k||[]).filter(V=>V.name===_);if(P.length>0&&(T=P[0],console.log("Found player with same name, reusing:",T.id),P.length>1)){const V=P.slice(1).map($=>$.id);console.log("Cleaning up duplicate players:",V),await U.from("players").delete().in("id",V)}}let R;if(T)R=T,console.log("Session recovery: found existing player",R.id,"is_host:",R.is_host);else{if(S.game_phase!=="WAITING")throw new Error(" ");const P=(k||[]).map(A=>A.avatar),V=rS(P),{data:$,error:z}=await U.from("players").insert({room_id:S.id,name:_,is_host:!1,avatar:V,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(z)throw z;R=$}e({id:S.id,code:S.code,host_name:S.host_name,is_active:S.is_active,game_phase:S.game_phase||"WAITING",current_turn_index:S.current_player_index||0,vocabulary:S.current_card||null,round:S.cards_remaining||1,timer_seconds:S.timer_seconds||30,include_mr_white:S.include_mr_white||!1,selected_category:S.selected_category||""});const I=new Map;for(const P of k||[])I.set(P.id,P);I.has(R.id)||I.set(R.id,R);const F=Array.from(I.values()).map(P=>({id:P.id,name:P.name,avatar:P.avatar,role:P.role||"CIVILIAN",word:P.word||"",is_alive:P.is_alive??!0,vote_count:P.vote_count||0,has_voted:P.has_voted||!1,is_host:P.is_host}));return console.log("All players after join:",F.map(P=>({name:P.name,is_host:P.is_host}))),r(F),i(R.id),c({title:"!",description:` ${_}`}),{room:S,playerId:R.id}}catch(S){return c({title:"",description:S.message,variant:"destructive"}),null}finally{l(!1)}},[c]),h=m.useCallback(async(N="",_=!1)=>{if(console.log("startGame called with:",{category:N,includeMrWhite:_,room:t,playersCount:n.length}),!t||n.length<4){c({title:"",description:" 4 ",variant:"destructive"});return}try{const C=bY(N);console.log("Selected vocabulary:",C);const S=_Y(n.map(k=>({id:k.id,name:k.name,avatar:k.avatar,is_host:k.is_host})),C,_);console.log("Assigned roles:",S);for(const k of S){const{error:T}=await U.from("players").update({role:k.role,word:k.word,is_alive:!0,vote_count:0,has_voted:!1}).eq("id",k.id);if(T)throw console.error("Error updating player:",T),T}console.log("Players updated successfully");const{error:E}=await U.from("rooms").update({game_phase:"REVEAL_WORD",current_card:C,current_player_index:0,cards_remaining:1,game_started:!0}).eq("id",t.id);if(E)throw console.error("Error updating room:",E),E;console.log("Room updated successfully"),r(S),c({title:" !",description:""})}catch(C){console.error("Error starting game:",C),c({title:"",description:" ",variant:"destructive"})}},[t,n,c]),f=m.useCallback(async()=>{t&&await U.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0}).eq("id",t.id)},[t]),p=m.useCallback(async()=>{if(!t)return;const N=n.filter(C=>C.is_alive),_=(t.current_turn_index+1)%N.length;await U.from("rooms").update({current_player_index:_}).eq("id",t.id)},[t,n]),w=m.useCallback(async()=>{if(t){for(const N of n)await U.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",N.id);await U.from("rooms").update({game_phase:"VOTING"}).eq("id",t.id)}},[t,n]),g=m.useCallback(async()=>{if(!t)return;const{data:N}=await U.from("players").select("*").eq("room_id",t.id);if(!N)return;const _=N.map(S=>({id:S.id,name:S.name,avatar:S.avatar,role:S.role,word:S.word||"",is_alive:S.is_alive,vote_count:S.vote_count||0,has_voted:S.has_voted||!1,voted_for:S.voted_for,is_host:S.is_host})),C=NY(_);C&&(await U.from("players").update({is_alive:!1}).eq("id",C.id),c({title:` ${C.name} !`,description:C.role==="UNDERCOVER"?"!":C.role==="MR_WHITE"?"! ":" "})),await U.from("rooms").update({game_phase:"VOTE_RESULT"}).eq("id",t.id)},[t,c]),y=m.useCallback(async N=>{if(!s||!t)return;const _=n.find(k=>k.id===s);if(!_||_.has_voted||!_.is_alive)return;await U.from("players").update({has_voted:!0,voted_for:N}).eq("id",s);const C=n.find(k=>k.id===N);C&&await U.from("players").update({vote_count:(C.vote_count||0)+1}).eq("id",N),c({title:" ",description:` ${C==null?void 0:C.name}`});const S=n.filter(k=>k.is_alive);S.filter(k=>k.has_voted).length+1>=S.length&&await g()},[s,n,t,c,g]),x=m.useCallback(async()=>{if(!t)return;const{data:N}=await U.from("players").select("*").eq("room_id",t.id);if(!N)return;const _=N.map(S=>({id:S.id,name:S.name,avatar:S.avatar,role:S.role,word:S.word||"",is_alive:S.is_alive,vote_count:S.vote_count||0,has_voted:S.has_voted||!1,voted_for:S.voted_for,is_host:S.is_host})),C=CY(_);if(C.isGameOver)await U.from("rooms").update({game_phase:"FINISHED"}).eq("id",t.id),c({title:C.winner==="CIVILIAN"?" !":"!",description:C.reason});else{await U.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0,cards_remaining:(t.round||1)+1}).eq("id",t.id);for(const S of _)await U.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id)}},[t,c]),v=m.useCallback(async()=>{if(t){for(const N of n)await U.from("players").update({role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,voted_for:null}).eq("id",N.id);await U.from("rooms").update({game_phase:"WAITING",current_player_index:0,current_card:null,cards_remaining:1,game_started:!1}).eq("id",t.id),c({title:" ",description:"!"})}},[t,n,c]),b=m.useCallback(async()=>{if(!s||!t)return;console.log("Leaving room - deleting player:",s);const{error:N}=await U.from("players").delete().eq("id",s);if(N){console.error("Error deleting player:",N),c({title:"",description:"",variant:"destructive"});return}console.log("Player deleted successfully");const{data:_}=await U.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&(console.log("No remaining players, deleting room"),await U.from("rooms").delete().eq("id",t.id)),e(null),r([]),i(null),c({title:" "})},[s,t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,categories:I2(),createRoom:u,joinRoom:d,startGame:h,startDescribePhase:f,nextTurn:p,startVoting:w,votePlayer:y,endVoting:g,checkResultAndContinue:x,restartGame:v,leaveRoom:b}}function IY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=bt();m.useEffect(()=>{const C=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:S}=await U.from("players").select("id").eq("room_id",t.id);(!S||S.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[s,t]);const h=m.useCallback(async()=>{let C=localStorage.getItem("anonymousUserId");C||(C=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",C));const{data:S,error:E}=await U.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(E){console.error("Error fetching questions:",E);return}const k=(S||[]).filter(T=>T.is_default===!0||T.created_by===C);console.log(` Loaded ${k.length} questions (${(S||[]).filter(T=>T.is_default).length} default + ${k.length-(S||[]).filter(T=>T.is_default).length} custom)`),l(k)},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback((C=[])=>{if(o.length===0)return console.log(" No questions available at all"),null;const S=o.filter(k=>!C.includes(k.id));if(console.log(` Available questions: ${S.length} of ${o.length} total (${C.length} used)`),S.length===0){console.log(" All questions used! Resetting and picking from full set");const k=o[Math.floor(Math.random()*o.length)];return console.log(` Selected question (reset): "${k.question}"`),k}const E=S[Math.floor(Math.random()*S.length)];return console.log(` Selected question: "${E.question}"`),E},[o]),p=m.useCallback(()=>{var k;if(n.length===0)return null;const S=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((k=[...n].sort((T,R)=>T.player_order-R.player_order)[S])==null?void 0:k.id)||null},[n,t==null?void 0:t.current_player_index]),w=m.useCallback(async()=>{if(!t)return;const C=t.game_state,S=(C==null?void 0:C.used_question_ids)||[],E=f(S);if(!E){d({title:"",description:"",variant:"destructive"});return}const k=p();if(!k)return;const T=o.filter(P=>!S.includes(P.id)).length;let R;T===0?(console.log(" Resetting used questions list"),R=[E.id],d({title:" ",description:" !"})):R=[...S,E.id];const I={phase:"ASKING",asker_id:k,victim_id:null,question:E.question,question_id:E.id,is_revealed:!1,used_question_ids:R},{error:F}=await U.from("rooms").update({game_state:I,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);F&&(console.error("Error starting round:",F),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),g=m.useCallback(async C=>{if(!t||!t.game_state){console.error(" Cannot select victim: No room or game state"),d({title:"Error",description:"",variant:"destructive"});return}console.log(" Selecting victim:",C);const S=t.game_state;if(S.phase!=="ASKING"){console.error(" Cannot select victim: Wrong phase",S.phase),d({title:"Error",description:"",variant:"destructive"});return}const E={...S,phase:"REVEALING",victim_id:C};console.log(" Updating game state to REVEALING with victim:",C);const{error:k}=await U.from("rooms").update({game_state:E}).eq("id",t.id);k?(console.error(" Error selecting victim:",k),d({title:"Error",description:`Failed to select victim: ${k.message}`,variant:"destructive"})):console.log(" Victim selected successfully")},[t,d]),y=m.useCallback(async()=>{if(!t||!t.game_state)return;const S={...t.game_state,is_revealed:!0},{error:E}=await U.from("rooms").update({game_state:S}).eq("id",t.id);E&&(console.error("Error revealing question:",E),d({title:"Error",description:"Failed to reveal question"}))},[t,d]),x=m.useCallback(async()=>{await w()},[w]),v=m.useCallback(async C=>{u(!0);try{await Fu();const S=Math.random().toString(36).substring(2,8).toUpperCase(),{data:E,error:k}=await U.from("rooms").insert({code:S,host_name:C,game_type:"paranoia",game_started:!1,game_state:null,current_player_index:0}).select().single();if(k)throw k;const{data:T,error:R}=await U.from("players").insert({room_id:E.id,name:C,is_host:!0,player_order:0}).select().single();if(R)throw R;return e(E),i(T.id),r([T]),{code:E.code,playerId:T.id}}catch(S){return console.error("Error creating room:",S),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),b=m.useCallback(async(C,S,E)=>{u(!0);try{const{data:k,error:T}=await U.from("rooms").select("*").eq("code",C.toUpperCase()).eq("game_type","paranoia").single();if(T)throw T;const{data:R}=await U.from("players").select("*").eq("room_id",k.id);let I=E?(R||[]).find(V=>V.id===E):null;if(!I){const V=(R||[]).filter($=>$.name===S);if(V.length>0&&(I=V[0],console.log("Found player with same name, reusing:",I.id),V.length>1)){const $=V.slice(1).map(z=>z.id);await U.from("players").delete().in("id",$)}}let F;if(I)F=I,console.log("Session recovery: found existing player",F.id);else{const{data:V,error:$}=await U.from("players").insert({room_id:k.id,name:S,is_host:!1,player_order:(R==null?void 0:R.length)||0}).select().single();if($)throw $;F=V}e(k),i(F.id);const P=new Map;for(const V of R||[])P.set(V.id,V);return P.has(F.id)||P.set(F.id,F),r(Array.from(P.values())),{room:k,playerId:F.id}}catch(k){return console.error("Error joining room:",k),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),N=m.useCallback(async()=>{if(!t)return;const{error:C}=await U.from("rooms").update({game_started:!0}).eq("id",t.id);if(C){console.error("Error starting game:",C),d({title:"Error",description:"Failed to start game"});return}await w()},[t,w,d]),_=m.useCallback(async()=>{s&&(await U.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(t)return U.channel(`paranoia-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},C=>{C.eventType==="UPDATE"&&e(C.new)}).subscribe(),U.channel(`paranoia-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:C}=await U.from("players").select("*").eq("room_id",t.id).order("player_order");r(C||[])}).subscribe(),()=>{}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,questions:o,createRoom:v,joinRoom:b,startGame:N,startRound:w,selectVictim:g,revealQuestion:y,skipQuestion:x,leaveRoom:_}}function PY(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=bt();m.useEffect(()=>{const _=async()=>{if(s&&t){await U.from("players").delete().eq("id",s);const{data:C}=await U.from("players").select("id").eq("room_id",t.id);(!C||C.length===0)&&await U.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]);const h=m.useCallback(async()=>{const{data:_,error:C}=await U.from("five_sec_questions").select("*");if(C){console.error("Error fetching questions:",C);return}l(_||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback(()=>o.length===0?null:o[Math.floor(Math.random()*o.length)],[o]),p=m.useCallback(()=>{var E;if(n.length===0)return null;const C=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((E=[...n].sort((k,T)=>k.player_order-T.player_order)[C])==null?void 0:E.id)||null},[n,t==null?void 0:t.current_player_index]),w=m.useCallback(async()=>{var R;if(!t)return;const _=f();if(!_){d({title:"Error",description:"No questions available"});return}const C=p();if(!C)return;const S=((R=t.game_state)==null?void 0:R.timeLimit)||5,E=new Date(Date.now()+S*1e3).toISOString(),k={phase:"PLAYING",player_id:C,topic:_.topic,end_time:E,votes:{},timeLimit:S},{error:T}=await U.from("rooms").update({game_state:k,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);T&&(console.error("Error starting round:",T),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),g=m.useCallback(async()=>{if(console.log("finishAnswering called",{room:t==null?void 0:t.id,game_state:t==null?void 0:t.game_state}),!t||!t.game_state){console.error("Cannot finish answering: no room or game_state");return}const C={...t.game_state,phase:"JUDGING"};console.log("Updating to JUDGING phase",C);const{error:S,data:E}=await U.from("rooms").update({game_state:C}).eq("id",t.id).select();S?(console.error("Error finishing answering:",S),d({title:"Error",description:"Failed to finish answering"})):console.log("Successfully updated to JUDGING",E)},[t,d]),y=m.useCallback(async _=>{if(!t||!t.game_state||!s)return;const C=t.game_state;if(s===C.player_id)return;const S={...C.votes,[s]:_},E={...C,votes:S},{error:k}=await U.from("rooms").update({game_state:E}).eq("id",t.id);k&&(console.error("Error voting:",k),d({title:"Error",description:"Failed to vote"}))},[t,s,d]),x=m.useCallback(async(_,C=5)=>{u(!0);try{await Fu();const S=Math.random().toString(36).substring(2,8).toUpperCase(),{data:E,error:k}=await U.from("rooms").insert({code:S,host_name:_,game_type:"fivesec",game_started:!1,game_state:{timeLimit:C},current_player_index:0}).select().single();if(k)throw k;const{data:T,error:R}=await U.from("players").insert({room_id:E.id,name:_,is_host:!0,player_order:0,points:0}).select().single();if(R)throw R;return e(E),i(T.id),r([T]),{code:E.code,playerId:T.id}}catch(S){return console.error("Error creating room:",S),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),v=m.useCallback(async(_,C,S)=>{u(!0);try{const{data:E,error:k}=await U.from("rooms").select("*").eq("code",_.toUpperCase()).eq("game_type","fivesec").single();if(k)throw k;const{data:T}=await U.from("players").select("*").eq("room_id",E.id);let R=S?(T||[]).find(P=>P.id===S):null;if(!R){const P=(T||[]).filter(V=>V.name===C);if(P.length>0&&(R=P[0],console.log("Found player with same name, reusing:",R.id),P.length>1)){const V=P.slice(1).map($=>$.id);await U.from("players").delete().in("id",V)}}let I;if(R)I=R,console.log("Session recovery: found existing player",I.id);else{const{data:P,error:V}=await U.from("players").insert({room_id:E.id,name:C,is_host:!1,player_order:(T==null?void 0:T.length)||0,points:0}).select().single();if(V)throw V;I=P}e(E),i(I.id);const F=new Map;for(const P of T||[])F.set(P.id,P);return F.has(I.id)||F.set(I.id,I),r(Array.from(F.values())),{room:E,playerId:I.id}}catch(E){return console.error("Error joining room:",E),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),b=m.useCallback(async()=>{if(!t)return;const{error:_}=await U.from("rooms").update({game_started:!0}).eq("id",t.id);if(_){console.error("Error starting game:",_),d({title:"Error",description:"Failed to start game"});return}await w()},[t,w,d]),N=m.useCallback(async()=>{s&&(await U.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(t)return U.channel(`fivesec-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},_=>{_.eventType==="UPDATE"&&e(_.new)}).subscribe(),U.channel(`fivesec-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:_}=await U.from("players").select("*").eq("room_id",t.id).order("player_order");r(_||[])}).subscribe(),()=>{}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:x,joinRoom:v,startGame:b,startRound:w,finishAnswering:g,vote:y,leaveRoom:N}}const Ct={PLAYER_ID:"kcp_player_id",PLAYER_NAME:"kcp_player_name",ROOM_CODE:"kcp_room_code",GAME_TYPE:"kcp_game_type",AVATAR:"kcp_avatar"};function sS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function AY(){const[t,e]=m.useState({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),[n,r]=m.useState(!0),[s,i]=m.useState(!1);m.useEffect(()=>{(()=>{const d=new URLSearchParams(window.location.search),h=d.get("room"),f=d.get("game"),p=localStorage.getItem(Ct.PLAYER_ID),w=localStorage.getItem(Ct.PLAYER_NAME),g=h||localStorage.getItem(Ct.ROOM_CODE),y=f||localStorage.getItem(Ct.GAME_TYPE),x=localStorage.getItem(Ct.AVATAR),v=x?parseInt(x,10):null;e({playerId:p,playerName:w,roomCode:g,gameType:y,avatar:v});const N=!!(p&&g&&y);i(N),r(!1),N&&console.log("Session found:",{roomCode:g,gameType:y,playerName:w})})()},[]);const o=m.useCallback(u=>{const d={...t,...u};if(d.playerId||(d.playerId=sS()),d.playerId&&localStorage.setItem(Ct.PLAYER_ID,d.playerId),d.playerName&&localStorage.setItem(Ct.PLAYER_NAME,d.playerName),d.roomCode&&localStorage.setItem(Ct.ROOM_CODE,d.roomCode),d.gameType&&localStorage.setItem(Ct.GAME_TYPE,d.gameType),d.avatar!==null&&d.avatar!==void 0&&localStorage.setItem(Ct.AVATAR,d.avatar.toString()),d.roomCode&&d.gameType){const h=new URL(window.location.href);h.searchParams.set("room",d.roomCode),h.searchParams.set("game",d.gameType),window.history.replaceState({},"",h.toString())}e(d),i(!!(d.playerId&&d.roomCode&&d.gameType))},[t]),l=m.useCallback(()=>{localStorage.removeItem(Ct.PLAYER_ID),localStorage.removeItem(Ct.PLAYER_NAME),localStorage.removeItem(Ct.ROOM_CODE),localStorage.removeItem(Ct.GAME_TYPE),localStorage.removeItem(Ct.AVATAR);const u=new URL(window.location.href);u.searchParams.delete("room"),u.searchParams.delete("game"),window.history.replaceState({},"",u.pathname),e({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),i(!1)},[]),c=m.useCallback(()=>{let u=localStorage.getItem(Ct.PLAYER_ID);return u||(u=sS(),localStorage.setItem(Ct.PLAYER_ID,u)),u},[]);return{sessionData:t,isRecovering:n,hasSession:s,saveSession:o,clearSession:l,getOrCreatePlayerId:c}}const DY=nm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/5 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-muted hover:text-foreground active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 active:scale-[0.98]",glass:"bg-card/80 backdrop-blur border border-border text-foreground hover:bg-card active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?CL:"button";return a.jsx(o,{className:L(DY({variant:e,size:n,className:t})),ref:i,...s})});D.displayName="Button";const pe=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:L("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));pe.displayName="Input";var bg="focusScope.autoFocusOnMount",_g="focusScope.autoFocusOnUnmount",iS={bubbles:!1,cancelable:!0},MY="FocusScope",Qw=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=dt(s),d=dt(i),h=m.useRef(null),f=ge(e,g=>c(g)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const N=b.target;l.contains(N)?h.current=N:As(h.current,{select:!0})},y=function(b){if(p.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||As(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const _ of b)_.removedNodes.length>0&&As(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[r,l,p.paused]),m.useEffect(()=>{if(l){aS.add(p);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(bg,iS);l.addEventListener(bg,u),l.dispatchEvent(x),x.defaultPrevented||(OY(UY(P2(l)),{select:!0}),document.activeElement===g&&As(l))}return()=>{l.removeEventListener(bg,u),setTimeout(()=>{const x=new CustomEvent(_g,iS);l.addEventListener(_g,d),l.dispatchEvent(x),x.defaultPrevented||As(g??document.body,{select:!0}),l.removeEventListener(_g,d),aS.remove(p)},0)}}},[l,u,d,p]);const w=m.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(y&&x){const v=g.currentTarget,[b,N]=LY(v);b&&N?!g.shiftKey&&x===N?(g.preventDefault(),n&&As(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&As(N,{select:!0})):x===v&&g.preventDefault()}},[n,r,p.paused]);return a.jsx(ne.div,{tabIndex:-1,...o,ref:f,onKeyDown:w})});Qw.displayName=MY;function OY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(As(r,{select:e}),document.activeElement!==n)return}function LY(t){const e=P2(t),n=oS(e,t),r=oS(e.reverse(),t);return[n,r]}function P2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function oS(t,e){for(const n of t)if(!FY(n,{upTo:e}))return n}function FY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $Y(t){return t instanceof HTMLInputElement&&"select"in t}function As(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$Y(t)&&e&&t.select()}}var aS=VY();function VY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=lS(t,e),t.unshift(e)},remove(e){var n;t=lS(t,e),(n=t[0])==null||n.resume()}}}function lS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function UY(t){return t.filter(e=>e.tagName!=="A")}var Cg=0;function A2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cS()),document.body.insertAdjacentElement("beforeend",t[1]??cS()),Cg++,()=>{Cg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cg--}},[])}function cS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kr=function(){return kr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kr.apply(this,arguments)};function D2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function BY(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var ch="right-scroll-bar-position",uh="width-before-scroll-bar",zY="with-scroll-bars-hidden",WY="--removed-body-scroll-bar-size";function Ng(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function HY(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var GY=typeof window<"u"?m.useLayoutEffect:m.useEffect,uS=new WeakMap;function qY(t,e){var n=HY(null,function(r){return t.forEach(function(s){return Ng(s,r)})});return GY(function(){var r=uS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Ng(l,null)}),i.forEach(function(l){s.has(l)||Ng(l,o)})}uS.set(n,t)},[t]),n}function KY(t){return t}function YY(t,e){e===void 0&&(e=KY);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function QY(t){t===void 0&&(t={});var e=YY(null);return e.options=kr({async:!0,ssr:!1},t),e}var M2=function(t){var e=t.sideCar,n=D2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,kr({},n))};M2.isSideCarExport=!0;function XY(t,e){return t.useMedium(e),M2}var O2=QY(),Sg=function(){},Lm=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Sg,onWheelCapture:Sg,onTouchMoveCapture:Sg}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,w=t.noIsolation,g=t.inert,y=t.allowPinchZoom,x=t.as,v=x===void 0?"div":x,b=t.gapMode,N=D2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=qY([n,e]),S=kr(kr({},N),s);return m.createElement(m.Fragment,null,d&&m.createElement(_,{sideCar:O2,removeScrollBar:u,shards:h,noRelative:p,noIsolation:w,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?m.cloneElement(m.Children.only(l),kr(kr({},S),{ref:C})):m.createElement(v,kr({},S,{className:c,ref:C}),l))});Lm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lm.classNames={fullWidth:uh,zeroRight:ch};var JY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JY();return e&&t.setAttribute("nonce",e),t}function eQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ZY())&&(eQ(e,n),tQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},rQ=function(){var t=nQ();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},L2=function(){var t=rQ(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},sQ={left:0,top:0,right:0,gap:0},Eg=function(t){return parseInt(t||"",10)||0},iQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Eg(n),Eg(r),Eg(s)]},oQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return sQ;var e=iQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},aQ=L2(),ka="data-scroll-locked",lQ=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(zY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ka,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ch,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(uh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ch," .").concat(ch,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(uh," .").concat(uh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ka,`] {
    `).concat(WY,": ").concat(l,`px;
  }
`)},dS=function(){var t=parseInt(document.body.getAttribute(ka)||"0",10);return isFinite(t)?t:0},cQ=function(){m.useEffect(function(){return document.body.setAttribute(ka,(dS()+1).toString()),function(){var t=dS()-1;t<=0?document.body.removeAttribute(ka):document.body.setAttribute(ka,t.toString())}},[])},uQ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;cQ();var i=m.useMemo(function(){return oQ(s)},[s]);return m.createElement(aQ,{styles:lQ(i,!e,s,n?"":"!important")})},Uy=!1;if(typeof window<"u")try{var Id=Object.defineProperty({},"passive",{get:function(){return Uy=!0,!0}});window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{Uy=!1}var Uo=Uy?{passive:!1}:!1,dQ=function(t){return t.tagName==="TEXTAREA"},F2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dQ(t)&&n[e]==="visible")},hQ=function(t){return F2(t,"overflowY")},fQ=function(t){return F2(t,"overflowX")},hS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$2(t,r);if(s){var i=V2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},mQ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},pQ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$2=function(t,e){return t==="v"?hQ(e):fQ(e)},V2=function(t,e){return t==="v"?mQ(e):pQ(e)},gQ=function(t,e){return t==="h"&&e==="rtl"?-1:1},vQ=function(t,e,n,r,s){var i=gQ(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var p=V2(t,l),w=p[0],g=p[1],y=p[2],x=g-y-i*w;(w||x)&&$2(t,l)&&(h+=x,f+=w);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Pd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},fS=function(t){return[t.deltaX,t.deltaY]},mS=function(t){return t&&"current"in t?t.current:t},yQ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xQ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wQ=0,Bo=[];function bQ(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(wQ++)[0],i=m.useState(L2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=BY([t.lockRef.current],(t.shards||[]).map(mS),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=Pd(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-x[0],N="deltaY"in g?g.deltaY:v[1]-x[1],_,C=g.target,S=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in g&&S==="h"&&C.type==="range")return!1;var E=hS(S,C);if(!E)return!0;if(E?_=S:(_=S==="v"?"h":"v",E=hS(S,C)),!E)return!1;if(!r.current&&"changedTouches"in g&&(b||N)&&(r.current=_),!_)return!0;var k=r.current||_;return vQ(k,y,g,k==="h"?b:N,!0)},[]),c=m.useCallback(function(g){var y=g;if(!(!Bo.length||Bo[Bo.length-1]!==i)){var x="deltaY"in y?fS(y):Pd(y),v=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&yQ(_.delta,x)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(mS).filter(Boolean).filter(function(_){return _.contains(y.target)}),N=b.length>0?l(y,b[0]):!o.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),u=m.useCallback(function(g,y,x,v){var b={name:g,delta:y,target:x,should:v,shadowParent:_Q(x)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(N){return N!==b})},1)},[]),d=m.useCallback(function(g){n.current=Pd(g),r.current=void 0},[]),h=m.useCallback(function(g){u(g.type,fS(g),g.target,l(g,t.lockRef.current))},[]),f=m.useCallback(function(g){u(g.type,Pd(g),g.target,l(g,t.lockRef.current))},[]);m.useEffect(function(){return Bo.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Uo),document.addEventListener("touchmove",c,Uo),document.addEventListener("touchstart",d,Uo),function(){Bo=Bo.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Uo),document.removeEventListener("touchmove",c,Uo),document.removeEventListener("touchstart",d,Uo)}},[]);var p=t.removeScrollBar,w=t.inert;return m.createElement(m.Fragment,null,w?m.createElement(i,{styles:xQ(s)}):null,p?m.createElement(uQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function _Q(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const CQ=XY(O2,bQ);var Xw=m.forwardRef(function(t,e){return m.createElement(Lm,kr({},t,{ref:e,sideCar:CQ}))});Xw.classNames=Lm.classNames;var NQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},zo=new WeakMap,Ad=new WeakMap,Dd={},kg=0,U2=function(t){return t&&(t.host||U2(t.parentNode))},SQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=U2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},EQ=function(t,e,n,r){var s=SQ(e,Array.isArray(t)?t:[t]);Dd[n]||(Dd[n]=new WeakMap);var i=Dd[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var p=f.getAttribute(r),w=p!==null&&p!=="false",g=(zo.get(f)||0)+1,y=(i.get(f)||0)+1;zo.set(f,g),i.set(f,y),o.push(f),g===1&&w&&Ad.set(f,!0),y===1&&f.setAttribute(n,"true"),w||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(e),l.clear(),kg++,function(){o.forEach(function(h){var f=zo.get(h)-1,p=i.get(h)-1;zo.set(h,f),i.set(h,p),f||(Ad.has(h)||h.removeAttribute(r),Ad.delete(h)),p||h.removeAttribute(n)}),kg--,kg||(zo=new WeakMap,zo=new WeakMap,Ad=new WeakMap,Dd={})}},B2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=NQ(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),EQ(r,s,n,"aria-hidden")):function(){return null}},Fm="Dialog",[z2,qZ]=un(Fm),[kQ,fr]=z2(Fm),W2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u,d]=ur({prop:r,defaultProp:s??!1,onChange:i,caller:Fm});return a.jsx(kQ,{scope:e,triggerRef:l,contentRef:c,contentId:Ar(),titleId:Ar(),descriptionId:Ar(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};W2.displayName=Fm;var H2="DialogTrigger",G2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(H2,n),i=ge(e,s.triggerRef);return a.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eb(s.open),...r,ref:i,onClick:ee(t.onClick,s.onOpenToggle)})});G2.displayName=H2;var Jw="DialogPortal",[TQ,q2]=z2(Jw,{forceMount:void 0}),K2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=fr(Jw,e);return a.jsx(TQ,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(Sn,{present:n||i.open,children:a.jsx(Zf,{asChild:!0,container:s,children:o})}))})};K2.displayName=Jw;var Ef="DialogOverlay",Y2=m.forwardRef((t,e)=>{const n=q2(Ef,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=fr(Ef,t.__scopeDialog);return i.modal?a.jsx(Sn,{present:r||i.open,children:a.jsx(RQ,{...s,ref:e})}):null});Y2.displayName=Ef;var jQ=za("DialogOverlay.RemoveScroll"),RQ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(Ef,n);return a.jsx(Xw,{as:jQ,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ne.div,{"data-state":eb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),jo="DialogContent",Q2=m.forwardRef((t,e)=>{const n=q2(jo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=fr(jo,t.__scopeDialog);return a.jsx(Sn,{present:r||i.open,children:i.modal?a.jsx(IQ,{...s,ref:e}):a.jsx(PQ,{...s,ref:e})})});Q2.displayName=jo;var IQ=m.forwardRef((t,e)=>{const n=fr(jo,t.__scopeDialog),r=m.useRef(null),s=ge(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return B2(i)},[]),a.jsx(X2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ee(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ee(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ee(t.onFocusOutside,i=>i.preventDefault())})}),PQ=m.forwardRef((t,e)=>{const n=fr(jo,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(X2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),X2=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=fr(jo,n),c=m.useRef(null),u=ge(e,c);return A2(),a.jsxs(a.Fragment,{children:[a.jsx(Qw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(pu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":eb(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(AQ,{titleId:l.titleId}),a.jsx(MQ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Zw="DialogTitle",J2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(Zw,n);return a.jsx(ne.h2,{id:s.titleId,...r,ref:e})});J2.displayName=Zw;var Z2="DialogDescription",eA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(Z2,n);return a.jsx(ne.p,{id:s.descriptionId,...r,ref:e})});eA.displayName=Z2;var tA="DialogClose",nA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=fr(tA,n);return a.jsx(ne.button,{type:"button",...r,ref:e,onClick:ee(t.onClick,()=>s.onOpenChange(!1))})});nA.displayName=tA;function eb(t){return t?"open":"closed"}var rA="DialogTitleWarning",[KZ,sA]=bL(rA,{contentName:jo,titleName:Zw,docsSlug:"dialog"}),AQ=({titleId:t})=>{const e=sA(rA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},DQ="DialogDescriptionWarning",MQ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sA(DQ).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},OQ=W2,LQ=G2,FQ=K2,iA=Y2,oA=Q2,aA=J2,lA=eA,$Q=nA;const Hr=OQ,Ii=LQ,VQ=FQ,cA=m.forwardRef(({className:t,...e},n)=>a.jsx(iA,{ref:n,className:L("fixed inset-0 z-[100] bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));cA.displayName=iA.displayName;const mr=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(VQ,{children:[a.jsx(cA,{}),a.jsxs(oA,{ref:r,className:L("fixed left-[50%] top-[50%] z-[110] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs($Q,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(jr,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mr.displayName=oA.displayName;const pr=({className:t,...e})=>a.jsx("div",{className:L("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});pr.displayName="DialogHeader";const gr=m.forwardRef(({className:t,...e},n)=>a.jsx(aA,{ref:n,className:L("text-lg font-semibold leading-none tracking-tight",t),...e}));gr.displayName=aA.displayName;const Gr=m.forwardRef(({className:t,...e},n)=>a.jsx(lA,{ref:n,className:L("text-sm text-muted-foreground",t),...e}));Gr.displayName=lA.displayName;var UQ=m.createContext(void 0);function Cl(t){const e=m.useContext(UQ);return t||e||"ltr"}function By(t,[e,n]){return Math.min(n,Math.max(e,t))}function BQ(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var tb="ScrollArea",[uA,YZ]=un(tb),[zQ,Bn]=uA(tb),dA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=m.useState(null),[u,d]=m.useState(null),[h,f]=m.useState(null),[p,w]=m.useState(null),[g,y]=m.useState(null),[x,v]=m.useState(0),[b,N]=m.useState(0),[_,C]=m.useState(!1),[S,E]=m.useState(!1),k=ge(e,R=>c(R)),T=Cl(s);return a.jsx(zQ,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:v,onCornerHeightChange:N,children:a.jsx(ne.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});dA.displayName=tb;var hA="ScrollAreaViewport",fA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Bn(hA,n),l=m.useRef(null),c=ge(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(ne.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});fA.displayName=hA;var qr="ScrollAreaScrollbar",nb=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(qr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(WQ,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(HQ,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(mA,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx(rb,{...r,ref:e}):null});nb.displayName=qr;var WQ=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(qr,t.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Sn,{present:n||i,children:a.jsx(mA,{"data-state":i?"visible":"hidden",...r,ref:e})})}),HQ=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Bn(qr,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Vm(()=>c("SCROLL_END"),100),[l,c]=BQ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),a.jsx(Sn,{present:n||l!=="hidden",children:a.jsx(rb,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ee(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ee(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),mA=m.forwardRef((t,e)=>{const n=Bn(qr,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=m.useState(!1),l=t.orientation==="horizontal",c=Vm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return nl(n.viewport,c),nl(n.content,c),a.jsx(Sn,{present:r||i,children:a.jsx(rb,{"data-state":i?"visible":"hidden",...s,ref:e})})}),rb=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Bn(qr,t.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=xA(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return XQ(f,o.current,l,p)}return n==="horizontal"?a.jsx(GQ,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=pS(f,l,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?a.jsx(qQ,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=pS(f,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),GQ=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Bn(qr,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=ge(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(gA,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$m(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),bA(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Tf(o.paddingLeft),paddingEnd:Tf(o.paddingRight)}})}})}),qQ=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Bn(qr,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=ge(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(gA,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$m(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),bA(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Tf(o.paddingTop),paddingEnd:Tf(o.paddingBottom)}})}})}),[KQ,pA]=uA(qr),gA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,p=Bn(qr,n),[w,g]=m.useState(null),y=ge(e,k=>g(k)),x=m.useRef(null),v=m.useRef(""),b=p.viewport,N=r.content-r.viewport,_=dt(d),C=dt(c),S=Vm(h,10);function E(k){if(x.current){const T=k.clientX-x.current.left,R=k.clientY-x.current.top;u({x:T,y:R})}}return m.useEffect(()=>{const k=T=>{const R=T.target;(w==null?void 0:w.contains(R))&&_(T,N)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[b,w,N,_]),m.useEffect(C,[r,C]),nl(w,S),nl(p.content,S),a.jsx(KQ,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:dt(i),onThumbPointerUp:dt(o),onThumbPositionChange:C,onThumbPointerDown:dt(l),children:a.jsx(ne.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:ee(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=w.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(k))}),onPointerMove:ee(t.onPointerMove,E),onPointerUp:ee(t.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),kf="ScrollAreaThumb",vA=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pA(kf,t.__scopeScrollArea);return a.jsx(Sn,{present:n||s.hasThumb,children:a.jsx(YQ,{ref:e,...r})})}),YQ=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Bn(kf,n),o=pA(kf,n),{onThumbPositionChange:l}=o,c=ge(e,h=>o.onThumbChange(h)),u=m.useRef(void 0),d=Vm(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const p=JQ(h,l);u.current=p,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),a.jsx(ne.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ee(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),w=h.clientX-p.left,g=h.clientY-p.top;o.onThumbPointerDown({x:w,y:g})}),onPointerUp:ee(t.onPointerUp,o.onThumbPointerUp)})});vA.displayName=kf;var sb="ScrollAreaCorner",yA=m.forwardRef((t,e)=>{const n=Bn(sb,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(QQ,{...t,ref:e}):null});yA.displayName=sb;var QQ=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Bn(sb,n),[i,o]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return nl(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),nl(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(ne.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Tf(t){return t?parseInt(t,10):0}function xA(t,e){const n=t/e;return isNaN(n)?0:n}function $m(t){const e=xA(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function XQ(t,e,n,r="ltr"){const s=$m(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return wA([c,u],h)(t)}function pS(t,e,n="ltr"){const r=$m(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=By(t,c);return wA([0,o],[0,l])(u)}function wA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function bA(t,e){return t>0&&t<e}var JQ=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Vm(t,e){const n=dt(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function nl(t,e){const n=dt(e);pt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var _A=dA,ZQ=fA,eX=yA;const Pi=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(_A,{ref:r,className:L("relative overflow-hidden",t),...n,children:[a.jsx(ZQ,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(CA,{}),a.jsx(eX,{})]}));Pi.displayName=_A.displayName;const CA=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(nb,{ref:r,orientation:e,className:L("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(vA,{className:"relative flex-1 rounded-full bg-border"})}));CA.displayName=nb.displayName;const tX="https://king-s-cup-party-production.up.railway.app";async function hn(t,e){try{const n=await fetch(`${tX}${t}`,{headers:{"Content-Type":"application/json",...e==null?void 0:e.headers},...e});return n.ok?await n.json():(console.error(`API Error: ${n.status} ${n.statusText}`),null)}catch(n){return console.error("API call failed:",n),null}}async function zy(){const t=await hn("/api/games?field=cover_url");if(!t)return Gy();const e={};return t.forEach(n=>{n.cover_url&&(e[n.id]=n.cover_url)}),e}async function Wy(){const t=await hn("/api/games?field=image_url");if(!t)return qy();const e={};return t.forEach(n=>{n.image_url&&(e[n.id]=n.image_url)}),e}async function Hy(){const t=await hn("/api/games");if(!t)return jA();const e={};return t.forEach(n=>{e[n.id]={title:n.title,emoji:n.emoji,gradient:n.gradient}}),e}async function nX(t,e){console.log(` Saving cover for ${t}`);const n=Gy();if(n[t]=e,gS(n),await hn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({cover_url:e})})){console.log(` Saved cover for ${t} to MySQL`);const s=Gy();return delete s[t],Object.keys(s).length>0?gS(s):localStorage.removeItem(Bm),!0}return console.log(` MySQL failed, using localStorage for ${t}`),!0}async function rX(t,e){console.log(` Saving icon for ${t}`);const n=qy();if(n[t]=e,vS(n),await hn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({image_url:e})})){console.log(` Saved icon for ${t} to MySQL`);const s=qy();return delete s[t],Object.keys(s).length>0?vS(s):localStorage.removeItem(zm),!0}return console.log(` MySQL failed, using localStorage for ${t}`),!0}async function NA(t,e){if(await hn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({title:e.title,emoji:e.emoji,gradient:e.gradient})}))return console.log(` Saved profile for ${t}`),!0;const r=jA();return r[t]=e,dX(r),!0}async function sX(t){return!!await hn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({cover_url:null})})}async function iX(t){return!!await hn(`/api/games/${t}`,{method:"PUT",body:JSON.stringify({image_url:null})})}async function oX(){const t=await hn("/api/games/clear-covers",{method:"POST"});return localStorage.removeItem(Bm),!!t}async function aX(){const t=await hn("/api/games/clear-icons",{method:"POST"});return localStorage.removeItem(zm),!!t}async function Um(){const t=await hn("/api/floating-names");return t?t.map(e=>e.name):kA()}async function lX(t){if(!await hn("/api/floating-names",{method:"POST",body:JSON.stringify({name:t})})){const n=kA();return n.push(t),TA(n),!1}return!0}async function cX(t){return!!await hn(`/api/floating-names/${encodeURIComponent(t)}`,{method:"DELETE"})}async function uX(){const t=await hn("/api/floating-names",{method:"DELETE"});return TA([]),!!t}const SA="admin_floating_names",Bm="admin_game_covers",zm="admin_game_icons",EA="admin_game_profiles";function kA(){try{const t=localStorage.getItem(SA);return t?JSON.parse(t):[]}catch{return[]}}function TA(t){localStorage.setItem(SA,JSON.stringify(t))}function Gy(){try{const t=localStorage.getItem(Bm);return t?JSON.parse(t):{}}catch{return{}}}function gS(t){try{localStorage.setItem(Bm,JSON.stringify(t))}catch(e){console.error("Failed to save covers to localStorage:",e)}}function qy(){try{const t=localStorage.getItem(zm);return t?JSON.parse(t):{}}catch{return{}}}function vS(t){try{localStorage.setItem(zm,JSON.stringify(t))}catch(e){console.error("Failed to save icons to localStorage:",e)}}function jA(){try{const t=localStorage.getItem(EA);return t?JSON.parse(t):{}}catch{return{}}}function dX(t){try{localStorage.setItem(EA,JSON.stringify(t))}catch(e){console.error("Failed to save profiles to localStorage:",e)}}async function hX(t,e){return NA(t,e)}function fX({games:t,onClose:e,onCoversUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),u=m.useRef({}),{toast:d}=bt();m.useEffect(()=>{(async()=>{const x=await zy();s(x)})()},[]);const h=y=>new Promise((x,v)=>{const b=new FileReader;b.onload=N=>{var C;const _=new Image;_.onload=()=>{const S=document.createElement("canvas"),E=S.getContext("2d");if(!E){v(new Error("Could not get canvas context"));return}let k=_.width,T=_.height;const R=800,I=1200;if(k>R||T>I){const P=Math.min(R/k,I/T);k=k*P,T=T*P}S.width=k,S.height=T,E.drawImage(_,0,0,k,T);const F=S.toDataURL("image/jpeg",.85);x(F)},_.onerror=()=>v(new Error("Failed to load image")),_.src=(C=N.target)==null?void 0:C.result},b.onerror=()=>v(b.error),b.readAsDataURL(y)}),f=async(y,x)=>{var b;if(console.log(` Uploading ${x.name} for ${y}`,{type:x.type,size:x.size,sizeInMB:(x.size/1024/1024).toFixed(2)+" MB"}),!x.type.startsWith("image/")){d({title:"",description:` ${x.name} `,variant:"destructive"});return}const v=10*1024*1024;if(x.size>v){const N=(x.size/1024/1024).toFixed(2);d({title:"",description:` ${N} MB ( 10 MB)`,variant:"destructive"});return}c(y),o(!0);try{console.log(` Converting ${x.name} to base64...`);const N=await h(x);if(console.log(` Base64 size: ${(N.length/1024).toFixed(2)} KB`),console.log(" Saving to storage..."),await nX(y,N)){console.log(" Saved successfully!");const C={...r,[y]:N};s(C),n(),d({title:"! ",description:` ${(b=t.find(S=>S.id===y))==null?void 0:b.name} `})}else console.error(" Save failed"),d({title:"",description:" ",variant:"destructive"})}catch(N){console.error(" Upload error:",N),d({title:"",description:N instanceof Error?N.message:"",variant:"destructive"})}finally{o(!1),c(null)}},p=async y=>{o(!0);const x=await sX(y);if(o(!1),x){const v={...r};delete v[y],s(v),n(),d({title:"",description:""})}else d({title:"",description:"",variant:"destructive"})},w=async()=>{o(!0);const y=await oX();o(!1),y?(s({}),n(),d({title:"",description:""})):d({title:"",description:"",variant:"destructive"})},g=y=>{var x;(x=u.current[y])==null||x.click()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-black w-full max-w-2xl rounded-2xl border border-indigo-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-indigo-600/30 px-6 py-4 border-b border-indigo-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center",children:a.jsx(Mh,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-indigo-300 text-sm",children:""})]})]}),a.jsx(D,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(jr,{className:"w-5 h-5"})})]})}),a.jsx(Pi,{className:"h-[60vh]",children:a.jsxs("div",{className:"p-6 space-y-4",children:[t.map(y=>a.jsx("div",{className:"bg-black/30 rounded-xl border border-indigo-500/20 p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-24 h-32 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center bg-gradient-to-br ${y.gradient}`,style:r[y.id]?{backgroundImage:`url(${r[y.id]})`,backgroundSize:"cover",backgroundPosition:"center"}:void 0,children:!r[y.id]&&a.jsx("span",{className:"text-5xl",children:y.emoji})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:y.name}),r[y.id]&&a.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>p(y.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[a.jsx(bo,{className:"w-4 h-4 mr-1"}),""]})]}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:x=>u.current[y.id]=x,onChange:x=>{var b;const v=(b=x.target.files)==null?void 0:b[0];v&&(f(y.id,v),x.target.value="")}}),a.jsx(D,{variant:"secondary",size:"sm",onClick:()=>g(y.id),disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full",children:l===y.id?a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vT,{className:"w-4 h-4 mr-2"}),r[y.id]?"":""]})}),r[y.id]&&a.jsx("p",{className:"text-xs text-green-400",children:" "})]})]})},y.id)),a.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-indigo-300 text-sm",children:[" ",a.jsx("strong",{children:":"}),"  (JPG, PNG, GIF, WEBP)  10MB"]})})]})}),a.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-indigo-500/30",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsxs(D,{variant:"outline",onClick:w,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[a.jsx(ao,{className:"w-4 h-4 mr-2"}),""]}),a.jsx(D,{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700",children:""})]})})]})})}function mX({games:t,onClose:e,onProfilesUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),{toast:u}=bt();m.useEffect(()=>{(async()=>{o(!0);const g=await Hy();s(g),o(!1)})()},[]);const d=w=>{const g=r[w.id];return{title:(g==null?void 0:g.title)??w.name,emoji:(g==null?void 0:g.emoji)??w.emoji,gradient:(g==null?void 0:g.gradient)??w.gradient}},h=(w,g,y)=>{s(x=>{const v=x[w.id]??{title:w.name,emoji:w.emoji,gradient:w.gradient};return{...x,[w.id]:{...v,[g]:y}}})},f=async w=>{const g=d(w);c(w.id),o(!0);const y=await NA(w.id,{title:g.title,emoji:g.emoji,gradient:g.gradient});o(!1),c(null),y?(n(),u({title:"",description:` ${w.name}`})):u({title:"",description:"",variant:"destructive"})},p=async w=>{c(w.id),o(!0);const g=await hX(w.id,{title:w.name,emoji:w.emoji,gradient:w.gradient});o(!1),c(null),g?(s(y=>{const x={...y};return delete x[w.id],x}),n(),u({title:"",description:` ${w.name}`})):u({title:"",description:"",variant:"destructive"})};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-amber-900 to-black w-full max-w-3xl rounded-2xl border border-amber-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-amber-600/30 px-6 py-4 border-b border-amber-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:a.jsx(Tr,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-amber-200 text-sm",children:"  "})]})]}),a.jsx(D,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(jr,{className:"w-5 h-5"})})]})}),a.jsx(Pi,{className:"h-[65vh]",children:a.jsxs("div",{className:"p-6 space-y-4",children:[t.map(w=>{const g=d(w);return a.jsx("div",{className:"bg-black/30 rounded-xl border border-amber-500/20 p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-24 h-24 rounded-xl flex-shrink-0 flex items-center justify-center text-4xl bg-gradient-to-br ${g.gradient}`,children:a.jsx("span",{children:g.emoji})}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:g.title}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(D,{variant:"outline",size:"sm",onClick:()=>p(w),disabled:i,className:"border-red-500/40 text-red-300 hover:bg-red-500/20",children:[a.jsx(ao,{className:"w-4 h-4 mr-1"})," "]}),a.jsx(D,{size:"sm",onClick:()=>f(w),disabled:i,className:"bg-amber-600 hover:bg-amber-700 text-white",children:l===w.id?a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(s0,{className:"w-4 h-4 mr-2"})," "]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:""}),a.jsx(pe,{value:g.title,onChange:y=>h(w,"title",y.target.value),className:"bg-white/10 border-amber-500/30 text-white"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:""}),a.jsx(pe,{value:g.emoji||"",onChange:y=>h(w,"emoji",y.target.value),className:"bg-white/10 border-amber-500/30 text-white",maxLength:3})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm text-white/70",children:"Gradient class"}),a.jsx(pe,{value:g.gradient||"",onChange:y=>h(w,"gradient",y.target.value),className:"bg-white/10 border-amber-500/30 text-white",placeholder:"from-indigo-500 to-purple-600"})]})]})]})]})},w.id)}),a.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-4 text-amber-100 text-sm",children:"  Tailwind gradient classes  from-amber-500 to-orange-600"})]})}),a.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-amber-500/30 flex justify-end",children:a.jsx(D,{onClick:e,className:"bg-amber-600 hover:bg-amber-700",children:""})})]})})}function pX({games:t,onClose:e,onIconsUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[l,c]=m.useState(null),u=m.useRef({}),{toast:d}=bt();m.useEffect(()=>{(async()=>{const x=await Wy();s(x)})()},[]);const h=y=>{var x;return(x=u.current[y])==null?void 0:x.click()},f=y=>new Promise((x,v)=>{const b=new FileReader;b.onload=()=>x(b.result),b.onerror=()=>v(b.error),b.readAsDataURL(y)}),p=async(y,x)=>{if(!x.type.startsWith("image/")){d({title:"",description:"",variant:"destructive"});return}if(x.size>10*1024*1024){d({title:"",description:" 10MB",variant:"destructive"});return}c(y),o(!0);try{const v=await f(x);await rX(y,v)?(s(N=>({...N,[y]:v})),n(),d({title:"",description:` ${y}`})):d({title:"",variant:"destructive"})}catch(v){console.error(v),d({title:"",variant:"destructive"})}finally{c(null),o(!1)}},w=async y=>{o(!0);const x=await iX(y);o(!1),x?(s(v=>{const b={...v};return delete b[y],b}),n(),d({title:"",description:""})):d({title:"",variant:"destructive"})},g=async()=>{o(!0);const y=await aX();o(!1),y&&(s({}),n(),d({title:""}))};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-amber-900 to-black w-full max-w-2xl rounded-2xl border border-amber-500/30 shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"bg-amber-600/30 px-6 py-4 border-b border-amber-500/30 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center",children:a.jsx(Mh,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),a.jsx("p",{className:"text-amber-200 text-sm",children:" emoji"})]})]}),a.jsx(D,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(jr,{className:"w-5 h-5"})})]}),a.jsx(Pi,{className:"h-[60vh]",children:a.jsx("div",{className:"p-6 space-y-4",children:t.map(y=>a.jsxs("div",{className:"bg-black/30 rounded-xl border border-amber-500/20 p-4 flex gap-4 items-center",children:[a.jsx("div",{className:"w-20 h-20 rounded-xl flex-shrink-0 border border-amber-500/30 overflow-hidden",style:{backgroundImage:r[y.id]?`url(${r[y.id]})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:!r[y.id]&&a.jsx("div",{className:`w-full h-full bg-gradient-to-br ${y.gradient} flex items-center justify-center text-4xl`,children:y.emoji})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:y.name}),a.jsxs("p",{className:"text-xs text-amber-200",children:["ID: ",y.id]})]}),r[y.id]&&a.jsxs(D,{variant:"ghost",size:"sm",onClick:()=>w(y.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[a.jsx(bo,{className:"w-4 h-4 mr-1"})," "]})]}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:x=>u.current[y.id]=x,onChange:x=>{var b;const v=(b=x.target.files)==null?void 0:b[0];v&&(p(y.id,v),x.target.value="")}}),a.jsx(D,{size:"sm",onClick:()=>h(y.id),disabled:i,className:"bg-amber-600 hover:bg-amber-700 text-white",children:l===y.id?a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"})," ","..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vT,{className:"w-4 h-4 mr-2"}),r[y.id]?"":""]})}),r[y.id]&&a.jsx("p",{className:"text-xs text-green-400",children:" "})]})]},y.id))})}),a.jsxs("div",{className:"bg-black/30 px-6 py-4 border-t border-amber-500/30 flex justify-between",children:[a.jsxs(D,{variant:"outline",onClick:g,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[a.jsx(bo,{className:"w-4 h-4 mr-2"})," "]}),a.jsx(D,{onClick:e,className:"bg-amber-600 hover:bg-amber-700 text-white",children:""})]})]})})}const gX=[{id:"doraemon",emoji:"",name:"King's Cup",gradient:"from-red-500 to-orange-500"},{id:"pokdeng",emoji:"",name:"Pok Deng",gradient:"from-emerald-500 to-green-600"},{id:"undercover",emoji:"",name:"Undercover",gradient:"from-purple-600 to-indigo-600"},{id:"paranoia",emoji:"",name:"Paranoia",gradient:"from-pink-500 to-rose-600"},{id:"5-sec",emoji:"",name:"5 Second Rule",gradient:"from-yellow-400 to-orange-500"},{id:"texas-holdem",emoji:"",name:"Texas Hold'em",gradient:"from-blue-600 to-cyan-600"}];function RA({onClose:t,games:e,onCoversUpdate:n,onProfilesUpdate:r,onIconsUpdate:s}){const i=e&&e.length>0?e:gX,[o,l]=m.useState([]),[c,u]=m.useState(""),[d,h]=m.useState(!0),[f,p]=m.useState(!1),[w,g]=m.useState(!1),[y,x]=m.useState(!1),[v,b]=m.useState("names");m.useEffect(()=>{N()},[]);const N=async()=>{h(!0);const E=await Um();l(E),h(!1)},_=async()=>{if(!c.trim())return;const E=c.trim();u(""),l(k=>[...k,E]),await lX(E)},C=async E=>{const k=o[E];l(T=>T.filter((R,I)=>I!==E)),await cX(k)},S=async()=>{l([]),await uX()};return f&&i.length>0?a.jsx(fX,{games:i,onClose:()=>p(!1),onCoversUpdate:()=>{p(!1),n==null||n()}}):w&&i.length>0?a.jsx(mX,{games:i,onClose:()=>g(!1),onProfilesUpdate:()=>{g(!1),r==null||r()}}):y&&i.length>0?a.jsx(pX,{games:i,onClose:()=>x(!1),onIconsUpdate:()=>{x(!1),s==null||s()}}):a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-black w-full max-w-md rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"bg-purple-600/30 px-6 py-4 border-b border-purple-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center",children:a.jsx(Vn,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:" Admin Panel"}),a.jsx("p",{className:"text-purple-300 text-sm",children:" BONNE"})]})]}),a.jsx(D,{variant:"ghost",size:"icon",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(jr,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"bg-black/20 px-6 py-3 border-b border-purple-500/20 flex gap-2",children:[a.jsxs(D,{variant:v==="names"?"default":"ghost",size:"sm",onClick:()=>b("names"),className:v==="names"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{variant:v==="covers"?"default":"ghost",size:"sm",onClick:()=>b("covers"),className:v==="covers"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(Mh,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{variant:v==="profiles"?"default":"ghost",size:"sm",onClick:()=>b("profiles"),className:v==="profiles"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(Tr,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{variant:v==="icons"?"default":"ghost",size:"sm",onClick:()=>b("icons"),className:v==="icons"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[a.jsx(Op,{className:"w-4 h-4 mr-2"}),""]})]}),v==="names"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm",children:" Lobby"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{placeholder:"...",value:c,onChange:E=>u(E.target.value),onKeyDown:E=>E.key==="Enter"&&_(),className:"flex-1 bg-white/10 border-purple-500/30 text-white placeholder:text-white/40",maxLength:20}),a.jsx(D,{onClick:_,disabled:!c.trim(),className:"bg-purple-500 hover:bg-purple-600 text-white",children:a.jsx(xu,{className:"w-4 h-4"})})]}),a.jsx(Pi,{className:"h-48 rounded-lg bg-black/30 border border-purple-500/20",children:a.jsx("div",{className:"p-3 space-y-2",children:d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(mt,{className:"w-6 h-6 text-purple-400 animate-spin"})}):o.length===0?a.jsx("p",{className:"text-center text-white/40 text-sm py-8",children:""}):o.map((E,k)=>a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:[a.jsx("span",{className:"text-white font-medium",children:E}),a.jsx(D,{variant:"ghost",size:"icon",onClick:()=>C(k),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(bo,{className:"w-4 h-4"})})]},k))})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(D,{variant:"outline",onClick:S,disabled:o.length===0,className:"flex-1 border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300",children:[a.jsx(bo,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{onClick:t,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white",children:[a.jsx(vu,{className:"w-4 h-4 mr-2"}),""]})]}),a.jsx("div",{className:"text-center pt-2 border-t border-purple-500/20",children:a.jsxs("p",{className:"text-purple-300 text-sm",children:[":"," ",a.jsx("span",{className:"font-bold text-white",children:o.length})," "]})})]}),v==="covers"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:" () "})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs(D,{onClick:()=>x(!0),disabled:i.length===0,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Op,{className:"w-5 h-5 mr-2"}),"Upload Icon ()"]}),a.jsxs(D,{onClick:()=>p(!0),disabled:i.length===0,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Mh,{className:"w-5 h-5 mr-2"}),"Upload Cover ()"]})]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"})," Upload Icon    Upload Cover   10MB"]})}),a.jsx(D,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]}),v==="profiles"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:"  "})}),a.jsxs(D,{onClick:()=>g(!0),disabled:i.length===0,className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Tr,{className:"w-5 h-5 mr-2"}),""]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"}),"    Tailwind  from-amber-500 to-orange-600"]})}),a.jsx(D,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]}),v==="icons"&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white/60 text-sm mb-4",children:" ( emoji)"})}),a.jsxs(D,{onClick:()=>x(!0),disabled:i.length===0,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Op,{className:"w-5 h-5 mr-2"}),""]}),i.length===0&&a.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:a.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),a.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:a.jsxs("p",{className:"text-white/60 text-sm",children:[" ",a.jsx("strong",{children:":"})," ",""]})}),a.jsx(D,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]})]})})}const Nt=["#ff6b6b","#4ecdc4","#ffe66d","#a8e6cf","#ff8b94","#c7ceea","#b5ead7","#ffd3b6","#dcedc1","#a0d2eb","#d4a5a5","#ffaaa5","#ffc6ff","#9bf6ff","#caffbf","#fdffb6","#bdb2ff","#ffc6ff","#a0c4ff","#ffadad"];function ib({names:t}){const e=m.useRef(null),n=m.useRef([]),r=m.useRef();m.useEffect(()=>{if(t.length===0)return;const i=new Set;n.current=t.map((o,l)=>{let c=Nt[l%Nt.length],u=0;for(;i.has(c)&&u<Nt.length;)c=Nt[(l+u)%Nt.length],u++;return i.add(c),{x:Math.random()*(window.innerWidth-100),y:Math.random()*(window.innerHeight-30),vx:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),vy:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),color:c,element:null}})},[t]);const s=m.useCallback(()=>{n.current.forEach(i=>{if(!i.element)return;i.x+=i.vx,i.y+=i.vy;const o=i.element.getBoundingClientRect();if(i.x<=0||i.x+o.width>=window.innerWidth){i.vx*=-1,i.x=Math.max(0,Math.min(i.x,window.innerWidth-o.width));const l=Nt[Math.floor(Math.random()*Nt.length)];i.color=l,i.element.style.color=l,i.element.style.textShadow=`0 0 10px ${l}, 0 0 20px ${l}, 0 0 30px ${l}`}if(i.y<=0||i.y+o.height>=window.innerHeight){i.vy*=-1,i.y=Math.max(0,Math.min(i.y,window.innerHeight-o.height));const l=Nt[Math.floor(Math.random()*Nt.length)];i.color=l,i.element.style.color=l,i.element.style.textShadow=`0 0 10px ${l}, 0 0 20px ${l}, 0 0 30px ${l}`}i.element.style.transform=`translate(${i.x}px, ${i.y}px)`}),r.current=requestAnimationFrame(s)},[]);return m.useEffect(()=>{if(t.length!==0)return r.current=requestAnimationFrame(s),()=>{r.current&&cancelAnimationFrame(r.current)}},[t,s]),t.length===0?null:a.jsx("div",{ref:e,className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map((i,o)=>{var l,c,u,d;return a.jsxs("div",{ref:h=>{n.current[o]&&(n.current[o].element=h)},className:"fixed text-sm font-bold pointer-events-none whitespace-nowrap",style:{color:((l=n.current[o])==null?void 0:l.color)||Nt[o%Nt.length],filter:"brightness(1.2) saturate(1.3)",textShadow:`0 0 8px ${((c=n.current[o])==null?void 0:c.color)||Nt[o%Nt.length]}, 0 0 15px ${((u=n.current[o])==null?void 0:u.color)||Nt[o%Nt.length]}, 0 0 25px ${((d=n.current[o])==null?void 0:d.color)||Nt[o%Nt.length]}`,left:0,top:0,willChange:"transform"},children:[o===0&&" ",i]},o)})})}const vX={th:{back:"",loading:"...",error:"",close:"",save:"",cancel:"",edit:"",delete:"",add:"",search:"",confirm:"",selectGame:"",selectGamePrompt:"",kingsCup:"",kingsCupDesc:"King's Cup - ",kingsCupSubtitle:"",pokDeng:"",pokDengDesc:"Pok Deng - ",undercover:"Undercover",undercoverDesc:" - ",partyMotto:" ",liveMode:"LIVE",liveModeDesc:"Host  ",enterNameToStart:"",enterCodeAndName:"",roomCodePlaceholder:" (6 )",quickStartDesc:"!",themeChange:"",themeSelectTheme:"",createRoom:"",joinRoom:"",roomCode:"",yourName:"",enterName:"...",enterCode:" 6 ...",createNewRoom:"",joinRoomBtn:"",quickStart:" ",creating:"...",joining:"...",room:"",waitingForPlayers:"",players:"",host:"Host",leaveRoom:"",startGame:"",minPlayers:"",people:"",undercoverTitle:"Undercover",undercoverSubtitle:" - !",category:"",allCategories:"",includeMrWhite:" (Mr. White)",revealWord:"",holdToReveal:" (!)",yourWord:":",holdToView:"",role:"",startDescribe:"",describePhase:"",describeRound:"",turn:"",nextPlayer:"",nextPerson:"",startVoting:"",voting:"!",vote:"",waitingForOthers:"...",selectSpy:"",selectSuspect:"",voteResult:"",votes:"",continue:"",gameOver:"",finalResult:"",restartGame:"",civilian:"",spy:"",gameStarted:" !",eliminated:"!",waitingPlayers:"",playersInRoom:"",needMinPlayers:" 4 ",seeYourWord:"",tapToReveal:" (!)",yourWordIs:"",holdToSee:"",alivePlayers:"",manageWords:"",vocabularyManager:"",addWord:"",editWord:"",editVocabulary:"",addVocabulary:"",addNewWord:"",categoryName:"",categoryPlaceholder:" , ",civilianWord:"",civilianPlaceholder:"",undercoverWord:"",undercoverPlaceholder:"",searchWords:"...",searchVocabulary:"...",noWords:"",noWordsFound:"",noVocabularyFound:"",noVocabularyYet:" ",addWordToStart:"",cannotEditDefault:"",cannotDeleteDefault:"",words:"",invalidName:"",nameTooShort:" ( 2 )",nameTooLong:" ( 20 )",nameContainsBadWords:"",roomNotFound:"",gameAlreadyStarted:" ",pokDengTitle:" ",pokDengSubtitle:"!",bet:"",draw:"",stand:"",showdown:"",nextRound:"",dealer:"",setDealer:"",points:"",multiplier:"",winner:"",roomCreated:"! ",roomJoined:"! ",playerJoined:" ",playerLeft:" ",leftRoom:" ",voted:" ",youVotedFor:""},en:{back:"Back",loading:"Loading...",error:"Error",close:"Close",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",confirm:"Confirm",selectGame:"Select Game",selectGamePrompt:"Choose a game to play",kingsCup:"King's Cup",kingsCupDesc:"King's Cup - Drinking Game",kingsCupSubtitle:"Drink till you drop!",pokDeng:"Pok Deng",pokDengDesc:"Pok Deng - Card Game",undercover:"Undercover",undercoverDesc:"Find the Spy - Detective Game",partyMotto:"Drink for fun, Party til' dawn",liveMode:"LIVE",liveModeDesc:"Host shares screen, players use phones",enterNameToStart:"Enter your name to start",enterCodeAndName:"Enter room code and your name",roomCodePlaceholder:"Room Code (6 digits)",quickStartDesc:"Enter your name and start playing!",themeChange:"Change Theme",themeSelectTheme:"Select Theme",createRoom:"Create Room",joinRoom:"Join Room",roomCode:"Room Code",yourName:"Your Name",enterName:"Enter name...",enterCode:"Enter 6-digit code...",createNewRoom:"Create New Room",joinRoomBtn:" Join Room",quickStart:" Quick Start",creating:"Creating...",joining:"Joining...",room:"Room",waitingForPlayers:"Waiting for players",players:"Players",host:"Host",leaveRoom:"Leave Room",startGame:"Start Game",minPlayers:"Need at least",people:"players",undercoverTitle:"Undercover",undercoverSubtitle:"Find the impostor among you!",category:"Category",allCategories:"All",includeMrWhite:"Include Mr. White",revealWord:"Reveal Your Word",holdToReveal:"Hold to reveal (Don't let others see!)",yourWord:"Your word is:",holdToView:"Hold to view word",role:"Role",startDescribe:"Start Describing",describePhase:"Round",describeRound:"Describe Round",turn:"Turn",nextPlayer:"Next",nextPerson:"Next Person",startVoting:"Start Voting",voting:"Vote!",vote:"Vote",waitingForOthers:"Waiting for others...",selectSpy:"Select who you think is the spy",selectSuspect:"Select who you think is the spy",voteResult:"Vote Result",votes:"votes",continue:"Continue",gameOver:"Game Over",finalResult:"Final Result",restartGame:"Restart Game",civilian:"Civilian",spy:"Undercover",gameStarted:" Game Started!",eliminated:"has been eliminated!",waitingPlayers:"Waiting for players",playersInRoom:"Players in Room",needMinPlayers:"Need at least 4 players",seeYourWord:"See Your Word",tapToReveal:"Hold to reveal (Don't let others see!)",yourWordIs:"Your word is",holdToSee:"Hold to see word",alivePlayers:"Alive Players",manageWords:"Manage Words",vocabularyManager:"Vocabulary Manager",addWord:"Add Word",editWord:"Edit Vocabulary",editVocabulary:"Edit Vocabulary",addVocabulary:"Add New Vocabulary",addNewWord:"Add New Vocabulary",categoryName:"Category",categoryPlaceholder:"e.g. Food, Places",civilianWord:"Civilian Word",civilianPlaceholder:"Word for civilians",undercoverWord:"Undercover Word",undercoverPlaceholder:"Word for undercover",searchWords:"Search words...",searchVocabulary:"Search vocabulary...",noWords:"No vocabularies yet",noWordsFound:"No matching vocabularies found",noVocabularyFound:"No matching vocabularies found",noVocabularyYet:"No vocabularies yet. Click Add Word to get started",addWordToStart:"Click Add Word to get started",cannotEditDefault:"Cannot edit default words",cannotDeleteDefault:"Cannot delete default words",words:"words",invalidName:"Invalid name",nameTooShort:"Name too short (minimum 2 characters)",nameTooLong:"Name too long (maximum 20 characters)",nameContainsBadWords:"Please use an appropriate name",roomNotFound:"Room not found",gameAlreadyStarted:"Game already started, cannot join",pokDengTitle:" Pok Deng",pokDengSubtitle:"Thai card game!",bet:"Bet",draw:"Draw",stand:"Stand",showdown:"Showdown",nextRound:"Next Round",dealer:"Dealer",setDealer:"Set as Dealer",points:"Points",multiplier:"x",winner:"Winner",roomCreated:"Room created successfully! ",roomJoined:"Joined room successfully! ",playerJoined:" New player joined",playerLeft:" Player left",leftRoom:" Left room",voted:" Voted",youVotedFor:"You voted for"}};let jf="th";function yX(t){jf=t,typeof window<"u"&&localStorage.setItem("language",t)}function Rf(){if(typeof window<"u"){const t=localStorage.getItem("language");(t==="th"||t==="en")&&(jf=t)}return jf}function B(t){return vX[jf][t]}typeof window<"u"&&Rf();const xX=["","","","","","","","","","","","","","fuck","shit","bitch","ass","damn","hell","dick","pussy","cock","cunt","bastard","nazi","hitler","xxx","porn","sex"];function If(t){const e=t.trim();if(e.length<2)return{isValid:!1,error:"nameTooShort"};if(e.length>20)return{isValid:!1,error:"nameTooLong"};const n=e.toLowerCase();for(const s of xX)if(n.includes(s.toLowerCase()))return{isValid:!1,error:"nameContainsBadWords"};return/[a-zA-Z0-9-]/.test(e)?{isValid:!0}:{isValid:!1,error:"invalidName"}}function wX({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const{displayName:i}=Wr(),[o,l]=m.useState("menu"),[c,u]=m.useState(""),[d,h]=m.useState(""),[f,p]=m.useState(""),[w,g]=m.useState(!1),[y,x]=m.useState(!1),[v,b]=m.useState([]),N=m.useRef(""),{toast:_}=bt();m.useEffect(()=>{i&&!c&&u(i)},[i]),m.useEffect(()=>{(async()=>{const T=await Um();b(T)})()},[y]),m.useEffect(()=>{const k=T=>{if(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)return;const R=T.key.toLowerCase(),I=N.current+R;"adminhee444".startsWith(I)?(N.current=I,I==="adminhee444"&&n&&(N.current="",g(!0))):N.current="adminhee444".startsWith(R)?R:""};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[n]);const C=async()=>{if(!c.trim())return;const k=If(c);if(!k.isValid){_({title:B("error"),description:k.error||B("invalidName"),variant:"destructive"});return}await t(c.trim())},S=async()=>{if(!c.trim()||!d.trim())return;if(d.trim()==="777777"&&c.trim().toUpperCase()==="BONNE"){x(!0);return}const k=If(c);if(!k.isValid){_({title:B("error"),description:k.error||B("invalidName"),variant:"destructive"});return}await e(d.trim(),c.trim())},E=async()=>{!f.trim()||!n||(await n(f.trim()),g(!1),p(""))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx(ib,{names:v}),y&&a.jsx(RA,{onClose:()=>x(!1)}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&a.jsx("div",{className:"absolute top-4 left-4 z-20",children:a.jsx(D,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(va,{className:"w-5 h-5 rotate-180"})})}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:["",B("kingsCup")]}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("kingsCupSubtitle")})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[o==="menu"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(D,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>l("create"),children:[a.jsx(xu,{className:"w-5 h-5"}),B("createNewRoom")]}),a.jsx("p",{className:"text-white/50 text-xs text-center"})]}),a.jsxs(D,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>l("join"),children:[a.jsx(Vn,{className:"w-5 h-5"}),B("joinRoom")]}),n&&a.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[a.jsxs(D,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>g(!0),disabled:r,children:[a.jsx(Fh,{className:"w-5 h-5"})," ",B("liveMode")]}),a.jsx("p",{className:"text-white/50 text-xs text-center",children:B("liveModeDesc")})]})]}),o==="create"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("createNewRoom")}),a.jsx("p",{className:"text-white/60 text-sm",children:B("enterNameToStart")})]}),a.jsx(pe,{placeholder:B("yourName"),value:c,onChange:k=>u(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(D,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:B("back")}),a.jsx(D,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:C,disabled:!c.trim()||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[B("createRoom"),a.jsx(va,{className:"w-4 h-4"})]})})]})]}),o==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("joinRoom")}),a.jsx("p",{className:"text-white/60 text-sm",children:B("enterCodeAndName")})]}),a.jsx(pe,{placeholder:B("roomCodePlaceholder"),value:d,onChange:k=>h(k.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),a.jsx(pe,{placeholder:B("yourName"),value:c,onChange:k=>u(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(D,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:B("back")}),a.jsx(D,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:S,disabled:!c.trim()||d.length!==6||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[B("joinRoom"),a.jsx(va,{className:"w-4 h-4"})]})})]})]})]}),a.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:B("partyMotto")}),a.jsx(Hr,{open:w,onOpenChange:g,children:a.jsxs(mr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-center text-white",children:B("quickStart")}),a.jsx(Gr,{className:"text-center text-white/60",children:B("quickStartDesc")})]}),a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx(pe,{placeholder:"",value:f,onChange:k=>p(k.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:k=>{k.key==="Enter"&&f.trim()&&E()}}),a.jsx(D,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:E,disabled:!f.trim()||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Fh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function Wm({className:t}){return a.jsxs("div",{className:L("absolute inset-0 overflow-hidden",t),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),a.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("defs",{children:a.jsx("pattern",{id:"diamond-pattern",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:"M10 0L20 10L10 20L0 10Z",fill:"white",opacity:"0.5"})})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#diamond-pattern)"})]}),a.jsx("div",{className:"absolute inset-2 sm:inset-3 rounded-lg border-2 border-white/20"}),a.jsx("div",{className:"absolute inset-3 sm:inset-4 rounded-md border border-white/10"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 rounded-full border-2 border-white/30 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 sm:w-18 sm:h-18 rounded-full border border-white/20 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-white font-bold text-lg sm:text-2xl leading-none",children:""}),a.jsx("div",{className:"text-white/60 text-[8px] sm:text-xs mt-0.5",children:"K's Cup"})]})})}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"absolute w-20 sm:w-28 h-0.5 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),a.jsx("div",{className:"absolute w-0.5 h-20 sm:h-28 bg-gradient-to-b from-transparent via-white/20 to-transparent"})]})]})})]})}function bX({value:t,suit:e}){const n=$y[e],r=Vy[e];return(()=>{switch(t){case"A":return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("span",{className:L("text-7xl sm:text-8xl",r),children:n})});case"2":return a.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"3":return a.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"4":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]})]});case"5":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n}),a.jsx("span",{className:L("text-3xl sm:text-4xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:L("text-3xl sm:text-4xl",r),children:n})})]});case"6":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]})]});case"7":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-1/3 flex items-center justify-center",children:a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n})})]});case"8":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-3 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n}),a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-[30%] flex items-center justify-center",children:a.jsx("span",{className:L("text-2xl sm:text-3xl",r),children:n})}),a.jsx("div",{className:"absolute inset-x-0 bottom-[30%] flex items-center justify-center",children:a.jsx("span",{className:L("text-2xl sm:text-3xl rotate-180",r),children:n})})]});case"9":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n})})]});case"10":return a.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsxs("div",{className:"flex flex-col justify-between items-center",children:[a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n}),a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n})]}),a.jsx("div",{className:"absolute inset-x-0 top-[25%] flex items-center justify-center",children:a.jsx("span",{className:L("text-xl sm:text-2xl",r),children:n})}),a.jsx("div",{className:"absolute inset-x-0 bottom-[25%] flex items-center justify-center",children:a.jsx("span",{className:L("text-xl sm:text-2xl rotate-180",r),children:n})})]});case"J":case"Q":case"K":return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:L("text-6xl sm:text-7xl font-bold",r),children:t}),a.jsx("div",{className:L("text-4xl sm:text-5xl mt-1",r),children:n})]})});default:return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("span",{className:L("text-6xl sm:text-7xl",r),children:n})})}})()}function yS({card:t,isFlipped:e=!0,size:n="lg",showRule:r=!1}){const s={sm:"w-16 h-24",md:"w-24 h-36",lg:"w-32 h-48 sm:w-44 sm:h-64 md:w-52 md:h-72",large:"w-56 h-80 sm:w-72 sm:h-[26rem] md:w-80 md:h-[30rem]"},i={sm:"text-sm",md:"text-lg",lg:"text-xl sm:text-2xl md:text-3xl",large:"text-3xl sm:text-4xl md:text-5xl"},o={sm:"text-sm",md:"text-lg",lg:"text-lg sm:text-xl md:text-2xl",large:"text-2xl sm:text-3xl md:text-4xl"};if(!t)return a.jsx("div",{className:L(s[n],"rounded-xl bg-muted border-2 border-dashed border-border flex items-center justify-center"),children:a.jsx("span",{className:"text-muted-foreground text-3xl",children:"?"})});const l=uo[t.value];return a.jsxs("div",{className:"card-flip",children:[a.jsxs("div",{className:L("card-inner relative",s[n],e&&"flipped"),children:[a.jsx("div",{className:L("card-face rounded-xl overflow-hidden shadow-xl",s[n]),children:a.jsx(Wm,{})}),a.jsxs("div",{className:L("card-face card-back rounded-xl bg-paper border border-paper-border shadow-xl overflow-hidden",s[n]),children:[a.jsxs("div",{className:L("absolute top-2 left-2 sm:top-3 sm:left-3 flex flex-col items-center",Vy[t.suit]),children:[a.jsx("span",{className:L("font-bold leading-none",i[n]),children:t.value}),a.jsx("span",{className:L("leading-none",o[n]),children:$y[t.suit]})]}),a.jsx("div",{className:"absolute inset-0 px-8 py-10 sm:px-10 sm:py-12",children:a.jsx(bX,{value:t.value,suit:t.suit})}),a.jsxs("div",{className:L("absolute bottom-2 right-2 sm:bottom-3 sm:right-3 flex flex-col items-center rotate-180",Vy[t.suit]),children:[a.jsx("span",{className:L("font-bold leading-none",i[n]),children:t.value}),a.jsx("span",{className:L("leading-none",o[n]),children:$y[t.suit]})]})]})]}),r&&e&&l&&a.jsx("div",{className:"mt-6 text-center max-w-xs mx-auto",children:a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-5 border border-white/10",children:[a.jsx("div",{className:"text-4xl mb-3",children:l.emoji}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.title}),a.jsx("p",{className:"text-white/70",children:l.description})]})})]})}function Ky(){return a.jsxs("div",{className:"flex flex-col items-center justify-center py-4 select-none",children:[a.jsx(te.div,{animate:{scale:[1,1.15,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"mb-3",children:a.jsx("span",{className:"text-5xl sm:text-6xl block",children:""})}),a.jsx(te.p,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-sm sm:text-base font-medium",children:"..."})]})}function IA({players:t,currentPlayerId:e}){return a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[a.jsxs("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:[a.jsx(jv,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"}),a.jsxs("span",{className:"text-white",children:[" (",t.length,")"]})]}),a.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto sm:flex-wrap sm:overflow-visible pb-2 sm:pb-0 -mx-1 px-1 scrollbar-hide",children:t.map(n=>a.jsxs("div",{className:L("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0 min-w-[70px] sm:min-w-[90px]",n.id===e?"bg-white text-black ring-2 ring-amber-400":"bg-white/10 text-white hover:bg-white/20"),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`/king-s-cup-party/${n.avatar||1}.jpg`,alt:n.name,className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full object-cover border-2 sm:border-3 border-white/40 shadow-lg"}),n.is_host&&a.jsx(wo,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"})]}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("span",{className:"truncate max-w-[60px] sm:max-w-[80px]",children:n.name}),n.id===e&&a.jsx("span",{className:"text-[10px] sm:text-xs opacity-60",children:"()"})]})]},n.id))})]})}function _X({cardsRemaining:t,onDraw:e,disabled:n,showCount:r=!0}){const s=m.useMemo(()=>Array.from({length:8}).map(()=>({rotation:(Math.random()-.5)*6,offsetX:(Math.random()-.5)*4,offsetY:(Math.random()-.5)*2})),[]),i=Math.min(Math.ceil(t/7),8);return t===0?a.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64 rounded-xl border-2 border-dashed border-white/20 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:a.jsx("span",{className:"text-white/50 text-sm sm:text-lg",children:""})}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64",children:Array.from({length:i}).map((o,l)=>{const c=l===i-1,u=s[l];return a.jsx("div",{className:L("absolute w-full h-full rounded-xl transition-all duration-200 overflow-hidden","shadow-lg",c&&!n&&"hover:scale-[1.03] hover:-translate-y-2 cursor-pointer hover:shadow-xl"),style:{bottom:`${l*2}px`,transform:`rotate(${u.rotation}deg) translateX(${u.offsetX}px)`,zIndex:l},onClick:c&&!n?e:void 0,children:a.jsx(Wm,{})},l)})}),r&&a.jsxs("div",{className:"absolute -top-8 sm:-top-10 left-1/2 -translate-x-1/2 px-3 sm:px-4 py-1 sm:py-1.5 rounded-full bg-black/60 backdrop-blur-sm text-xs sm:text-sm font-medium border border-white/10 z-20",children:[a.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:t}),a.jsx("span",{className:"text-white/60 ml-1",children:""})]})]})}const PA=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:L("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));PA.displayName="Textarea";const Tg="custom_rules_";function AA(t){const[e,n]=m.useState(uo);return m.useEffect(()=>{const i=localStorage.getItem(Tg+t);if(i)try{n(JSON.parse(i))}catch{n(uo)}},[t]),{customRules:e,saveRules:i=>{n(i),localStorage.setItem(Tg+t,JSON.stringify(i))},resetRules:()=>{n(uo),localStorage.removeItem(Tg+t)}}}function CX({roomCode:t,isHost:e,onRulesChange:n}){const{toast:r}=bt(),[s,i]=m.useState(!1),[o,l]=m.useState(uo),{customRules:c,saveRules:u,resetRules:d}=AA(t);m.useEffect(()=>{l(c),n==null||n(c)},[c,n]);const h=()=>{u(o),n==null||n(o),i(!1),r({title:" !",description:""})},f=()=>{d(),l(uo),n==null||n(uo),r({title:" ",description:""})},p=(w,g,y)=>{l(x=>({...x,[w]:{...x[w],[g]:y}}))};return e?a.jsxs(Hr,{open:s,onOpenChange:i,children:[a.jsx(Ii,{asChild:!0,children:a.jsx(D,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(wu,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"max-w-lg max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-xl font-bold flex items-center gap-2",children:" "}),a.jsx(Gr,{className:"sr-only",children:""})]}),a.jsx(Pi,{className:"h-[60vh] pr-4",children:a.jsx("div",{className:"space-y-4",children:S2.map(w=>{var g,y,x;return a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("span",{className:"text-2xl w-10 h-10 flex items-center justify-center bg-white/10 rounded-lg font-bold",children:w}),a.jsx(pe,{value:((g=o[w])==null?void 0:g.emoji)||"",onChange:v=>p(w,"emoji",v.target.value),className:"w-16 text-center text-xl bg-black/30 border-white/20",placeholder:""}),a.jsx(pe,{value:((y=o[w])==null?void 0:y.title)||"",onChange:v=>p(w,"title",v.target.value),className:"flex-1 bg-black/30 border-white/20",placeholder:""})]}),a.jsx(PA,{value:((x=o[w])==null?void 0:x.description)||"",onChange:v=>p(w,"description",v.target.value),className:"bg-black/30 border-white/20 resize-none",placeholder:"...",rows:2})]},w)})})}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[a.jsxs(D,{variant:"outline",onClick:f,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[a.jsx(ao,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{onClick:h,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[a.jsx(s0,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}const NX=nm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function au({className:t,variant:e,...n}){return a.jsx("div",{className:L(NX({variant:e}),t),...n})}async function SX(t,e=3){try{const n=[],r=` Undercover  "${t}"
    
:
-  
-  Undercover 
- 
- 

:
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""

 ${e}  "${t}":`;await new Promise(i=>setTimeout(i,1500));const s=t.toLowerCase();return s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}),n.slice(0,e)}catch(n){throw console.error("Error generating vocabulary:",n),new Error(" ")}}async function DA(t,e=4,n="medium"){try{await new Promise(c=>setTimeout(c,1e3));const r=[" 1 ",""," 1  "," 1 "," 1 "],s=[":  '' "," 1-21  7  7 ","  "," "," '':  ","  ","  "],i=["Master Rule:   ",":  ''  3 ",":    1 ",":   2 ","  ",`:  ${e}  `,":   "];let o;switch(n){case"easy":o=r;break;case"hard":o=i;break;default:o=s}const l=o[Math.floor(Math.random()*o.length)];return{card:t,rule:l,difficulty:n}}catch(r){throw console.error("Error generating rule:",r),new Error(" ")}}async function EX(t=5,e=4){const n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],r=["easy","medium","hard"],s=[];for(let i=0;i<t;i++){const o=n[Math.floor(Math.random()*n.length)],l=r[Math.floor(Math.random()*r.length)];s.push(DA(o,e,l))}return Promise.all(s)}async function kX(t=5){try{const e=` Paranoia
    
:
- 
-   
- 
- 

:
- "?"
- "?"
- "?"

 ${t} :`;return await new Promise(s=>setTimeout(s,1200)),[...["?","?","?","?","?","?","?","?","?","?","?","?","?","?","?"]].sort(()=>Math.random()-.5).slice(0,t)}catch(e){return console.error("Error generating Paranoia questions:",e),["?","?","?","?","?"].slice(0,t)}}function TX({playerCount:t,onApplyRule:e}){const[n,r]=m.useState(!1),[s,i]=m.useState(!1),[o,l]=m.useState([]),[c,u]=m.useState(null),{toast:d}=bt(),h=async()=>{i(!0);try{const y=await EX(5,t);l(y),d({title:" !",description:`AI  ${y.length} `})}catch(y){d({title:"",description:y instanceof Error?y.message:"",variant:"destructive"})}finally{i(!1)}},f=async y=>{i(!0);try{const x=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],v=x[Math.floor(Math.random()*x.length)],b=await DA(v,t,y);l([b,...o]),d({title:" !",description:` ${b.card}`})}catch(x){d({title:"",description:x instanceof Error?x.message:"",variant:"destructive"})}finally{i(!1)}},p=(y,x)=>{navigator.clipboard.writeText(`${y.card}: ${y.rule}`),u(x),setTimeout(()=>u(null),2e3),d({title:"!",description:""})},w=y=>{switch(y){case"easy":return"bg-green-500/20 text-green-400 border-green-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"hard":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},g=y=>{switch(y){case"easy":return"";case"medium":return"";case"hard":return"";default:return y}};return a.jsxs(Hr,{open:n,onOpenChange:r,children:[a.jsx(Ii,{asChild:!0,children:a.jsxs(D,{variant:"outline",size:"sm",className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30 text-purple-300 hover:from-purple-500/30 hover:to-pink-500/30",children:[a.jsx(Tr,{className:"w-4 h-4 mr-2"}),"AI "]})}),a.jsxs(mr,{className:"sm:max-w-2xl bg-gray-900 text-white border-white/20 max-h-[90vh] flex flex-col",children:[a.jsxs(pr,{children:[a.jsxs(gr,{className:"flex items-center gap-2 text-xl",children:[a.jsx(Tr,{className:"w-6 h-6 text-purple-400"}),"AI Rule Generator"]}),a.jsxs(Gr,{className:"text-white/60",children:[" AI   ",t," "]})]}),a.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(D,{onClick:()=>h(),disabled:s,className:"flex-1 bg-purple-500 hover:bg-purple-600",children:s?a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tr,{className:"w-4 h-4 mr-2"})," 5 "]})}),o.length>0&&a.jsx(D,{onClick:()=>l([]),variant:"outline",className:"border-white/20 text-white/70 hover:bg-white/10",children:""})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx(D,{onClick:()=>f("easy"),disabled:s,variant:"outline",className:"border-green-500/30 text-green-400 hover:bg-green-500/10",size:"sm",children:"+ "}),a.jsx(D,{onClick:()=>f("medium"),disabled:s,variant:"outline",className:"border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10",size:"sm",children:"+ "}),a.jsx(D,{onClick:()=>f("hard"),disabled:s,variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",size:"sm",children:"+ "})]}),o.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-white/80",children:[" (",o.length,"):"]}),o.map((y,x)=>a.jsx("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs(au,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[" ",y.card]}),a.jsx(au,{variant:"outline",className:w(y.difficulty),children:g(y.difficulty)})]}),a.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:y.rule})]}),a.jsx(D,{onClick:()=>p(y,x),size:"sm",variant:"ghost",className:"text-white/60 hover:text-white hover:bg-white/10",children:c===x?a.jsx(oo,{className:"w-4 h-4 text-green-400"}):a.jsx(xo,{className:"w-4 h-4"})})]})},x))]}):a.jsxs("div",{className:"text-center py-12 text-white/40",children:[a.jsx(Tr,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{className:"text-sm",children:" AI "})]})]}),a.jsx("div",{className:"border-t border-white/10 pt-4 mt-4",children:a.jsx("p",{className:"text-xs text-white/40 text-center",children:"  "})})]})]})}const MA=()=>{const{userId:t}=Wr(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[l,c]=m.useState(!0);return m.useEffect(()=>{if(!t){n([]),s([]),o([]),c(!1);return}const y=Be(ze,`users/${t}/friends`),x=Be(ze,`users/${t}/friendRequests`),v=Be(ze,`users/${t}/gameInvites`),b=new Map,N=Wo(y,E=>{const k=E.val();if(k){const T=Object.entries(k).map(([I,F])=>({id:I,displayName:F.displayName,addedAt:F.addedAt}));T.forEach(I=>{if(!b.has(I.id)){const F=Be(ze,`users/${I.id}`),P=Wo(F,V=>{if(V.exists()){const $=V.val().displayName;n(z=>z.map(A=>A.id===I.id?{...A,displayName:$}:A))}});b.set(I.id,P)}});const R=new Set(T.map(I=>I.id));b.forEach((I,F)=>{R.has(F)||(I(),b.delete(F))}),n(T)}else b.forEach(T=>T()),b.clear(),n([]);c(!1)}),_=Wo(x,E=>{const k=E.val();if(k){const T=Object.entries(k).map(([R,I])=>({id:R,fromId:I.fromId,fromName:I.fromName,sentAt:I.sentAt}));s(T)}else s([])}),C=new Map,S=Wo(v,E=>{const k=E.val();if(k){const R=Object.entries(k).map(([F,P])=>({id:F,fromId:P.fromId,fromName:P.fromName,roomCode:P.roomCode,gameType:P.gameType,gameName:P.gameName,sentAt:P.sentAt})).filter(F=>Date.now()-F.sentAt<10*60*1e3);R.forEach(F=>{if(!C.has(F.fromId)){const P=Be(ze,`users/${F.fromId}`),V=Wo(P,$=>{if($.exists()){const z=$.val().displayName;o(A=>A.map(M=>M.fromId===F.fromId?{...M,fromName:z}:M))}});C.set(F.fromId,V)}});const I=new Set(R.map(F=>F.fromId));C.forEach((F,P)=>{I.has(P)||(F(),C.delete(P))}),o(R)}else C.forEach(T=>T()),C.clear(),o([])});return()=>{N(),_(),S(),b.forEach(E=>E()),b.clear(),C.forEach(E=>E()),C.clear()}},[t]),{friends:e,friendRequests:r,gameInvites:i,loading:l,searchUserById:async y=>{if(!y||y===t)return null;const x=Be(ze,`users/${y}`),v=await Hi(x);if(v.exists()){const b=v.val();return{id:b.id,displayName:b.displayName}}return null},sendFriendRequest:async y=>{if(!t)return!1;const x=Be(ze,`users/${t}`),v=await Hi(x);if(!v.exists())return!1;const b=v.val(),N=Be(ze,`users/${t}/friends/${y}`);if((await Hi(N)).exists())return!1;const C=Be(ze,`users/${y}/friendRequests/${t}`);return await ia(C,{fromId:t,fromName:b.displayName,sentAt:Date.now()}),!0},acceptFriendRequest:async(y,x,v)=>{if(!t)return!1;const b=Be(ze,`users/${t}`),N=await Hi(b);if(!N.exists())return!1;const _=N.val(),C=Be(ze,`users/${t}/friends/${x}`),S=Be(ze,`users/${x}/friends/${t}`);await ia(C,{displayName:v,addedAt:Date.now()}),await ia(S,{displayName:_.displayName,addedAt:Date.now()});const E=Be(ze,`users/${t}/friendRequests/${y}`);return await Wl(E),!0},declineFriendRequest:async y=>{if(!t)return!1;const x=Be(ze,`users/${t}/friendRequests/${y}`);return await Wl(x),!0},removeFriend:async y=>{if(!t)return!1;const x=Be(ze,`users/${t}/friends/${y}`),v=Be(ze,`users/${y}/friends/${t}`);return await Wl(x),await Wl(v),!0},sendGameInvite:async(y,x,v,b)=>{if(!t)return!1;const N=Be(ze,`users/${t}`),_=await Hi(N);if(!_.exists())return!1;const C=_.val(),S=Be(ze,`users/${y}/gameInvites/${Date.now()}`);return await ia(S,{fromId:t,fromName:C.displayName,roomCode:x,gameType:v,gameName:b,sentAt:Date.now()}),!0},dismissGameInvite:async y=>{if(!t)return!1;const x=Be(ze,`users/${t}/gameInvites/${y}`);return await Wl(x),!0}}},OA=({onClose:t,currentRoomCode:e,currentGameType:n,currentGameName:r,onJoinRoom:s})=>{const{userId:i,displayName:o,logout:l,updateDisplayName:c}=Wr(),{friends:u,friendRequests:d,gameInvites:h,loading:f,searchUserById:p,sendFriendRequest:w,acceptFriendRequest:g,declineFriendRequest:y,removeFriend:x,sendGameInvite:v,dismissGameInvite:b}=MA(),[N,_]=m.useState(""),[C,S]=m.useState(null),[E,k]=m.useState(!1),[T,R]=m.useState("friends"),[I,F]=m.useState(null),[P,V]=m.useState(!1),[$,z]=m.useState(o||""),[A,M]=m.useState(!1),j=async()=>{if($.trim().length<2){st.error(" 2 ");return}if($.trim().length>20){st.error(" 20 ");return}M(!0);const G=await c($.trim());M(!1),G?(st.success("!"),V(!1)):st.error("")},W=async()=>{if(!N.trim())return;k(!0);const G=await p(N.trim());S(G),k(!1),G||st.error("")},K=async()=>{if(!C)return;await w(C.id)?(st.success("!"),S(null),_("")):st.error("")},re=async(G,fe,Ue)=>{await g(G,fe,Ue)&&st.success(` ${Ue} !`)},ae=async G=>{await y(G),st.info("")},Te=async(G,fe)=>{await x(G)&&st.info(` ${fe} `)},Re=async(G,fe)=>{if(!e||!n||!r){st.error("");return}F(G);const Ue=await v(G,e,n,r);F(null),Ue?st.success(` ${fe} !`):st.error("")},Q=async G=>{await b(G.id),s?(s(G.roomCode,G.gameType),t(),st.success(` ${G.roomCode}...`)):(navigator.clipboard.writeText(G.roomCode),st.success(` ${G.roomCode} !`))},_e=async G=>{await b(G),st.info("")},Ae=()=>{i&&(navigator.clipboard.writeText(i),st.success(" ID !"))},be=async()=>{await l(),t(),st.info("")};return d.length+h.length,Zx.createPortal(a.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:9999},onClick:t,children:a.jsxs(te.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-zinc-900 rounded-2xl w-full max-w-md max-h-[85vh] overflow-hidden border border-zinc-700",style:{zIndex:1e4},onClick:G=>G.stopPropagation(),children:[a.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center font-bold text-lg",children:(o==null?void 0:o.charAt(0).toUpperCase())||"?"}),a.jsxs("div",{children:[P?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{value:$,onChange:G=>z(G.target.value),className:"h-8 w-32 bg-white/20 border-white/30 text-white placeholder:text-white/50",placeholder:"...",maxLength:20}),a.jsx(D,{size:"icon",variant:"ghost",onClick:j,disabled:A,className:"h-8 w-8 text-white hover:bg-white/20",children:A?a.jsx(mt,{className:"animate-spin",size:16}):a.jsx(oo,{size:16})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{V(!1),z(o||"")},className:"h-8 w-8 text-white hover:bg-white/20",children:a.jsx(jr,{size:16})})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"font-bold text-lg",children:o}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{z(o||""),V(!0)},className:"h-6 w-6 text-white/70 hover:text-white hover:bg-white/20",children:a.jsx(Oh,{size:14})})]}),a.jsxs("p",{className:"text-xs text-white/70",children:["ID: ",i==null?void 0:i.slice(0,8),"..."]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(D,{size:"icon",variant:"ghost",onClick:Ae,className:"text-white hover:bg-white/20",children:a.jsx(xo,{size:18})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:be,className:"text-white hover:bg-white/20",children:a.jsx(vu,{size:18})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:t,className:"text-white hover:bg-white/20",children:a.jsx(jr,{size:18})})]})]})}),a.jsxs("div",{className:"flex border-b border-zinc-700",children:[a.jsxs("button",{onClick:()=>R("friends"),className:`flex-1 py-3 text-sm font-medium transition-colors ${T==="friends"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(Vn,{size:16,className:"inline mr-1"}),""]}),a.jsxs("button",{onClick:()=>R("requests"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${T==="requests"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(p5,{size:16,className:"inline mr-1"}),"",d.length>0&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-red-500 rounded-full text-xs",children:d.length})]}),a.jsxs("button",{onClick:()=>R("invites"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${T==="invites"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[a.jsx(kv,{size:16,className:"inline mr-1"}),"",h.length>0&&a.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-green-500 rounded-full text-xs",children:h.length})]}),a.jsx("button",{onClick:()=>R("search"),className:`flex-1 py-3 text-sm font-medium transition-colors ${T==="search"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:a.jsx(Tv,{size:16,className:"inline"})})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:f?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(mt,{className:"animate-spin",size:24})}):a.jsxs(a.Fragment,{children:[T==="friends"&&a.jsxs("div",{className:"space-y-2",children:[e&&a.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-lg border border-green-500/30",children:[a.jsxs("p",{className:"text-sm text-green-400 flex items-center gap-2",children:[a.jsx(kv,{size:16}),":"," ",a.jsx("span",{className:"font-bold",children:e})]}),a.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:""})]}),u.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):u.map(G=>a.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold",children:G.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:G.displayName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",G.id.slice(0,8),"..."]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[e&&a.jsx(D,{size:"icon",onClick:()=>Re(G.id,G.displayName),disabled:I===G.id,className:"bg-green-600 hover:bg-green-700",children:I===G.id?a.jsx(mt,{className:"animate-spin",size:18}):a.jsx(C5,{size:18})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>Te(G.id,G.displayName),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(N5,{size:18})})]})]},G.id))]}),T==="requests"&&a.jsx("div",{className:"space-y-2",children:d.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):d.map(G=>a.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold",children:G.fromName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:G.fromName}),a.jsx("p",{className:"text-xs text-zinc-500",children:""})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(D,{size:"icon",onClick:()=>re(G.id,G.fromId,G.fromName),className:"bg-green-600 hover:bg-green-700",children:a.jsx(oo,{size:18})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>ae(G.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(jr,{size:18})})]})]},G.id))}),T==="invites"&&a.jsx("div",{className:"space-y-2",children:h.length===0?a.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):h.map(G=>a.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 bg-zinc-800 rounded-lg border border-green-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center font-bold",children:G.fromName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:G.fromName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",G.gameName]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("div",{className:"flex-1 bg-zinc-900 px-3 py-2 rounded text-sm",children:[a.jsx("span",{className:"text-zinc-400",children:": "}),a.jsx("span",{className:"text-green-400 font-mono font-bold",children:G.roomCode})]}),a.jsxs(D,{size:"sm",onClick:()=>Q(G),className:"bg-green-600 hover:bg-green-700",children:[a.jsx(oo,{size:16,className:"mr-1"}),""]}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>_e(G.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:a.jsx(jr,{size:18})})]}),a.jsxs("p",{className:"text-xs text-zinc-600 mt-2",children:[""," ",Math.max(0,Math.ceil((10*60*1e3-(Date.now()-G.sentAt))/6e4))," ",""]})]},G.id))}),T==="search"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{value:N,onChange:G=>_(G.target.value),placeholder:" ID ...",className:"bg-zinc-800 border-zinc-700"}),a.jsx(D,{onClick:W,disabled:E,children:E?a.jsx(mt,{className:"animate-spin",size:18}):a.jsx(Tv,{size:18})})]}),C&&a.jsxs(te.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-zinc-800 rounded-lg border border-cyan-500/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold text-lg",children:C.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-lg",children:C.displayName}),a.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",C.id.slice(0,8),"..."]})]})]}),a.jsxs(D,{onClick:K,className:"bg-cyan-600 hover:bg-cyan-700",children:[a.jsx(yT,{size:18,className:"mr-2"}),""]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-zinc-800/50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-zinc-400 text-center",children:" ID :"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[a.jsx("code",{className:"bg-zinc-900 px-3 py-2 rounded text-cyan-400 text-sm break-all",children:i}),a.jsx(D,{size:"icon",variant:"ghost",onClick:Ae,children:a.jsx(xo,{size:16})})]})]})]})]})})]})}),document.body)},Si=({currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})=>{const{user:s,loading:i,login:o}=Wr(),{gameInvites:l,friendRequests:c}=MA(),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=async()=>{f(!0);try{await o(),st.success("!")}catch{st.error("")}finally{f(!1)}},w=((l==null?void 0:l.length)||0)+((c==null?void 0:c.length)||0);return i?a.jsx(D,{variant:"ghost",size:"sm",disabled:!0,className:"text-white",children:a.jsx(mt,{className:"animate-spin",size:18})}):a.jsxs(a.Fragment,{children:[s?a.jsxs(D,{onClick:()=>d(!0),size:"sm",className:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 relative text-white",children:[a.jsx(Vn,{size:16,className:"mr-1"}),"",w>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center animate-pulse",children:w})]}):a.jsxs(D,{onClick:p,disabled:h,size:"sm",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white","data-login-button":"true",children:[h?a.jsx(mt,{className:"animate-spin mr-1",size:16}):a.jsx(b5,{size:16,className:"mr-1"}),""]}),a.jsx(Im,{children:u&&a.jsx(OA,{onClose:()=>d(!1),currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})})]})};function LA({active:t,duration:e=3e3,onComplete:n}){const[r,s]=m.useState([]);return m.useEffect(()=>{if(!t){s([]);return}const i=["#FFD700","#FF69B4","#00CED1","#FF6347","#9370DB","#32CD32","#FF1493","#00BFFF"],o=[],l=50;for(let h=0;h<l;h++)o.push({id:h,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,scale:Math.random()*.5+.5,color:i[Math.floor(Math.random()*i.length)],velocityX:(Math.random()-.5)*8,velocityY:Math.random()*3+2,rotationSpeed:(Math.random()-.5)*10});s(o);const c=Date.now();let u;const d=()=>{if(Date.now()-c>e){s([]),n==null||n();return}s(f=>f.map(p=>({...p,x:p.x+p.velocityX,y:p.y+p.velocityY,rotation:p.rotation+p.rotationSpeed,velocityY:p.velocityY+.2}))),u=requestAnimationFrame(d)};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}},[t,e,n]),!t||r.length===0?null:a.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:r.map(i=>a.jsx("div",{className:"absolute w-3 h-3 rounded-sm",style:{left:i.x,top:i.y,backgroundColor:i.color,transform:`rotate(${i.rotation}deg) scale(${i.scale})`,transition:"none"}},i.id))})}function jX({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onDrawCard:i,onReshuffle:o,onLeave:l}){var C,S,E,k,T,R;const{toast:c}=bt(),[u,d]=m.useState(!1),[h,f]=m.useState(0),[p,w]=m.useState(0),g=m.useRef(null),{customRules:y}=AA(t.code),x=y,v=async()=>{const I=t.code;let F=!1;try{navigator.clipboard&&navigator.clipboard.writeText&&(await navigator.clipboard.writeText(I),F=!0)}catch{}if(!F)try{const P=document.createElement("textarea");P.value=I,P.style.position="fixed",P.style.left="-9999px",P.style.top="0",document.body.appendChild(P),P.focus(),P.select();const V=document.execCommand("copy");document.body.removeChild(P),F=V}catch{}c({title:F?" !":" ",description:I,duration:5e3})},b=()=>{if(t.cards_remaining===0)return;const I=Date.now();if(I-p<500&&h>0){const P=h+1;if(f(P),w(I),P>=3&&r){f(0),o(),c({title:" !",description:""});return}}else f(1),w(I),N()},N=()=>{t.cards_remaining!==0&&(d(!1),setTimeout(()=>{i(),setTimeout(()=>{d(!0),setTimeout(()=>{var I;(I=g.current)==null||I.scrollIntoView({behavior:"smooth",block:"center"})},300)},300)},200))},_=t.cards_remaining===0&&t.current_card!==null;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[a.jsx(LA,{active:_&&t.cards_remaining===0,duration:6e3}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/50"}),a.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx(D,{variant:"ghost",size:"icon",onClick:l,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(vu,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:" "}),a.jsxs("button",{onClick:v,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[a.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),a.jsx(xo,{className:"w-3 h-3"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Si,{currentRoomCode:t.code,currentGameType:"kingscup",currentGameName:B("kingsCup")}),r&&a.jsx(CX,{roomCode:t.code,isHost:r}),a.jsx(TX,{playerCount:e.length}),r&&t.game_started&&!_&&a.jsx(D,{variant:"ghost",size:"icon",onClick:()=>{o(),c({title:" !",description:""})},className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(Lh,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r&&!t.game_started&&a.jsxs(D,{variant:"default",onClick:s,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[a.jsx(yu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"sm:hidden",children:""})]})]})]}),a.jsx("div",{className:"mb-2 sm:mb-4",children:a.jsx(IA,{players:e,currentPlayerId:n??void 0})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 sm:py-6 md:py-8 relative z-10",children:t.game_started?_?a.jsx("div",{className:"text-center px-2",children:a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-white/10",children:[a.jsx("div",{className:"text-5xl sm:text-6xl mb-3 sm:mb-4",children:""}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"!"}),a.jsx("p",{className:"text-white/60 mb-4 sm:mb-6 text-base sm:text-lg",children:" !"}),r&&a.jsxs(D,{variant:"default",size:"lg",onClick:o,className:"bg-white text-black hover:bg-white/90",children:[a.jsx(Lh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})]})}):a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center w-full px-2 sm:px-4",children:r?a.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[t.current_card?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(yS,{card:t.current_card,isFlipped:!0,showRule:!1,size:"large"}),a.jsx("div",{className:"mt-6 sm:mt-8 bg-black/60 backdrop-blur-md rounded-2xl px-6 py-4 sm:px-8 sm:py-6 border border-white/10 max-w-md",children:a.jsxs("div",{className:"flex items-center gap-4 sm:gap-5",children:[a.jsx("span",{className:"text-4xl sm:text-5xl md:text-6xl",children:((C=x[t.current_card.value])==null?void 0:C.emoji)||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-amber-400 font-bold text-lg sm:text-xl md:text-2xl",children:(S=x[t.current_card.value])==null?void 0:S.title}),a.jsx("p",{className:"text-white/80 text-sm sm:text-base md:text-lg",children:(E=x[t.current_card.value])==null?void 0:E.description})]})]})})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-48 h-72 sm:w-56 sm:h-80 md:w-64 md:h-96 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20",children:a.jsx(Ky,{})}),a.jsx("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:a.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center",children:["",a.jsx("br",{}),""]})})]}),a.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-full px-6 py-2 border border-white/10",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-white",children:t.cards_remaining}),a.jsx("span",{className:"text-white/60 ml-2",children:""})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-8 md:gap-12",children:[t.current_card?a.jsx(yS,{card:t.current_card,isFlipped:u,showRule:!1}):a.jsx("div",{className:"w-32 h-48 sm:w-44 sm:h-64 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-xl border-2 border-dashed border-white/20",children:a.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center px-2",children:["",a.jsx("br",{}),""]})}),a.jsx(_X,{cardsRemaining:t.cards_remaining,onDraw:b,disabled:t.cards_remaining===0,showCount:!0})]}),t.current_card&&u&&a.jsx("div",{ref:g,className:"mt-4 sm:mt-6 bg-black/60 backdrop-blur-md rounded-xl px-5 py-3 sm:px-6 sm:py-4 border border-white/10 max-w-sm",children:a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[a.jsx("span",{className:"text-3xl sm:text-4xl",children:((k=x[t.current_card.value])==null?void 0:k.emoji)||""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-amber-400 font-bold text-sm sm:text-base",children:(T=x[t.current_card.value])==null?void 0:T.title}),a.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:(R=x[t.current_card.value])==null?void 0:R.description})]})]})})]})}):a.jsxs("div",{className:"text-center px-2",children:[a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[a.jsx(Ky,{}),a.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?'  ""':" Host "})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[a.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),a.jsx("button",{onClick:v,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})})]})}function RX({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const{displayName:i}=Wr(),[o,l]=m.useState("menu"),[c,u]=m.useState(""),[d,h]=m.useState(""),[f,p]=m.useState(""),[w,g]=m.useState(!1),[y,x]=m.useState([]),v=m.useRef("");m.useEffect(()=>{i&&!c&&u(i)},[i]),m.useEffect(()=>{(async()=>{const S=await Um();x(S)})()},[]),m.useEffect(()=>{const C=S=>{if(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement)return;const E=S.key.toLowerCase(),k=v.current+E;"adminhee444".startsWith(k)?(v.current=k,k==="adminhee444"&&n&&(v.current="",g(!0))):v.current="adminhee444".startsWith(E)?E:""};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[n]);const b=async()=>{c.trim()&&await t(c.trim())},N=async()=>{!c.trim()||!d.trim()||await e(d.trim(),c.trim())},_=async()=>{!f.trim()||!n||(await n(f.trim()),g(!1),p(""))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx(ib,{names:y}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&a.jsx("div",{className:"absolute top-4 left-4 z-20",children:a.jsx(D,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:a.jsx(va,{className:"w-5 h-5 rotate-180"})})}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:""}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:" Online"})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[o==="menu"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs(D,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>l("create"),children:[a.jsx(xu,{className:"w-5 h-5"}),""]}),a.jsx("p",{className:"text-white/50 text-xs text-center"})]}),a.jsxs(D,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>l("join"),children:[a.jsx(Vn,{className:"w-5 h-5"}),""]}),n&&a.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[a.jsxs(D,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>g(!0),disabled:r,children:[a.jsx(Fh,{className:"w-5 h-5"})," LIVE"]}),a.jsx("p",{className:"text-white/50 text-xs text-center",children:" "})]})]}),o==="create"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),a.jsx(pe,{placeholder:"",value:c,onChange:C=>u(C.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(D,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:""}),a.jsx(D,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:b,disabled:!c.trim()||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:["",a.jsx(va,{className:"w-4 h-4"})]})})]})]}),o==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),a.jsx(pe,{placeholder:" (6 )",value:d,onChange:C=>h(C.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),a.jsx(pe,{placeholder:"",value:c,onChange:C=>u(C.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(D,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>l("menu"),children:""}),a.jsx(D,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:N,disabled:!c.trim()||d.length!==6||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:["",a.jsx(va,{className:"w-4 h-4"})]})})]})]})]}),a.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:" 2-8 "}),a.jsx(Hr,{open:w,onOpenChange:g,children:a.jsxs(mr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-center text-white",children:" LIVE Mode"}),a.jsx(Gr,{className:"text-center text-white/60",children:""})]}),a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx(pe,{placeholder:"",value:f,onChange:C=>p(C.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:C=>{C.key==="Enter"&&f.trim()&&_()}}),a.jsx(D,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:_,disabled:!f.trim()||r,children:r?a.jsx(mt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Fh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function IX({card:t,faceDown:e=!1}){return e?a.jsx("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md shadow-md overflow-hidden relative",children:a.jsx(Wm,{})}):a.jsxs(te.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.3},className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md bg-white border border-gray-200 shadow-md flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-xs sm:text-sm font-bold ${R2(t.suit)}`,children:t.value}),a.jsx("span",{className:"text-sm sm:text-base",children:j2(t.suit)})]})}function PX({players:t,currentPlayerId:e,showCards:n=!1,currentTurnPlayerId:r,gamePhase:s}){return a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[a.jsx("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:a.jsxs("span",{className:"text-white",children:["  (",t.length,")"]})}),a.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:t.map(i=>{const o=i.id===r,l=i.cards&&i.cards.length===2?ho(i.cards):{isPok:!1,pokValue:null},c=i.cards&&i.cards.length>0?ou(i.cards):null;return a.jsxs("div",{className:L("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0",i.is_dealer?"bg-amber-500/20 border-2 border-amber-500":o?"bg-green-500/20 border-2 border-green-500 animate-pulse":i.id===e?"bg-white/20 ring-2 ring-white/50":"bg-white/10 text-white"),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`/king-s-cup-party/${i.avatar||1}.jpg`,alt:i.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-white/40 shadow-lg"}),i.is_host&&a.jsx(wo,{className:"w-4 h-4 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"}),i.is_dealer&&a.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 text-[10px] bg-amber-500 text-black px-1.5 rounded-full font-bold",children:""})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-white truncate max-w-[70px] sm:max-w-[80px] block",children:i.name}),s==="drawing"&&i.has_drawn&&a.jsx("span",{className:"text-[10px] text-green-400",children:" "}),o&&a.jsx("span",{className:"text-[10px] text-green-300",children:" "})]}),i.cards&&i.cards.length>0&&a.jsx("div",{className:"flex gap-1 mt-1",children:i.cards.map((u,d)=>a.jsx(IX,{card:u,faceDown:!n},d))}),n&&i.cards&&i.cards.length>0&&a.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[a.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-400",children:i.points}),l.isPok&&l.pokValue!==null&&a.jsxs("span",{className:"text-[9px] sm:text-[10px] bg-green-500 text-white px-1.5 py-0.5 rounded-full animate-bounce",children:[" ",l.pokValue,"!"]}),c&&c.type!=="normal"&&!l.isPok&&a.jsx("span",{className:"text-[9px] sm:text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full",children:c.name})]}),i.result&&n&&a.jsx("span",{className:`text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full ${i.result==="player_win"?"bg-green-500 text-white":i.is_dealer?"bg-amber-500 text-black":"bg-red-500 text-white"}`,children:i.is_dealer?"":i.result==="player_win"?` ${i.multiplier&&i.multiplier>1?` x${i.multiplier}`:""}`:""})]},i.id)})})]})}var AX="Label",FA=m.forwardRef((t,e)=>a.jsx(ne.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));FA.displayName=AX;var $A=FA;const DX=nm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ft=m.forwardRef(({className:t,...e},n)=>a.jsx($A,{ref:n,className:L(DX(),t),...e}));Ft.displayName=$A.displayName;const xS={pok9Multiplier:2,pok8Multiplier:2,tongMultiplier:5,samLeungMultiplier:3,straightMultiplier:3,flushMultiplier:3,dengMultiplier:2,pairMultiplier:2};function MX({roomCode:t,isHost:e}){const{toast:n}=bt(),[r,s]=m.useState(!1),[i,o]=m.useState(xS);m.useEffect(()=>{const d=localStorage.getItem(`pokdeng_rules_${t}`);d&&o(JSON.parse(d))},[t]);const l=()=>{localStorage.setItem(`pokdeng_rules_${t}`,JSON.stringify(i)),s(!1),n({title:" !",description:""})},c=()=>{o(xS),localStorage.removeItem(`pokdeng_rules_${t}`),n({title:" ",description:""})},u=(d,h)=>{o(f=>({...f,[d]:Math.max(1,Math.min(10,h))}))};return e?a.jsxs(Hr,{open:r,onOpenChange:s,children:[a.jsx(Ii,{asChild:!0,children:a.jsx(D,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:a.jsx(wu,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"max-w-md max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-xl font-bold flex items-center gap-2",children:" "}),a.jsx(Gr,{className:"sr-only",children:""})]}),a.jsx(Pi,{className:"h-[60vh] pr-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," 9"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.pok9Multiplier,onChange:d=>u("pok9Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2  9 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," 8"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.pok8Multiplier,onChange:d=>u("pok8Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2  8 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Three of a Kind)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.tongMultiplier,onChange:d=>u("tongMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 7-7-7)"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),""]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.samLeungMultiplier,onChange:d=>u("samLeungMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:"J-Q-K ( 3 )"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Straight)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.straightMultiplier,onChange:d=>u("straightMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 5-6-7)"})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Flush)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.flushMultiplier,onChange:d=>u("flushMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 3 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Same Suit)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.dengMultiplier,onChange:d=>u("dengMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]}),a.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""})," (Pair)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pe,{type:"number",min:1,max:10,value:i.pairMultiplier,onChange:d=>u("pairMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),a.jsx("span",{className:"text-white/60",children:""})]})]}),a.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]})]})}),a.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[a.jsxs(D,{variant:"outline",onClick:c,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[a.jsx(ao,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(D,{onClick:l,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[a.jsx(s0,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}function OX({card:t,faceDown:e=!1}){return e?a.jsx("div",{className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl shadow-xl overflow-hidden relative",children:a.jsx(Wm,{})}):a.jsxs(te.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.4},className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl bg-white border-2 border-gray-200 shadow-xl flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-2xl sm:text-3xl font-bold ${R2(t.suit)}`,children:t.value}),a.jsx("span",{className:"text-3xl sm:text-4xl",children:j2(t.suit)})]})}function LX({room:t,players:e,currentPlayerId:n,isHost:r,isLiveMode:s=!1,onStartGame:i,onDrawCard:o,onStandCard:l,onDealerDraw:c,onDealerStand:u,onShowdown:d,onNextRound:h,onLeave:f,onSetDealer:p}){var A,M;const{toast:w}=bt(),[g,y]=m.useState(!1),[x,v]=m.useState(!1),b=()=>{const j=t.code;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(j).then(()=>{w({title:" !",description:`: ${j}`,duration:3e3})}).catch(()=>{N(j)}):N(j)},N=j=>{const W=document.createElement("textarea");W.value=j,W.style.position="fixed",W.style.top="0",W.style.left="0",W.style.width="2em",W.style.height="2em",W.style.padding="0",W.style.border="none",W.style.outline="none",W.style.boxShadow="none",W.style.background="transparent",document.body.appendChild(W),W.focus(),W.select();try{document.execCommand("copy"),w({title:" !",description:`: ${j}`,duration:3e3})}catch{w({title:" ",description:`${j} ()`,duration:5e3})}document.body.removeChild(W)},_=e.find(j=>j.id===n),C=e.find(j=>j.is_dealer),S=e.filter(j=>!j.is_dealer).sort((j,W)=>j.player_order-W.player_order),E=t.game_phase==="drawing"?S[t.current_player_index]:null,k=(E==null?void 0:E.id)===n,T=t.game_phase==="showdown"&&C&&!C.has_drawn,R=_==null?void 0:_.is_dealer,I=e.every(j=>j.has_drawn),F=e.filter(j=>j.has_drawn).length,P=e.length,V=t.game_phase==="showdown"||t.game_phase==="ended",$=r&&s,z=m.useRef(!1);return m.useEffect(()=>{if(t.game_phase==="showdown"&&I&&!z.current){z.current=!0;const j=setTimeout(()=>{d()},1e3);return()=>clearTimeout(j)}(t.game_phase==="drawing"||t.game_phase==="waiting")&&(z.current=!1)},[t.game_phase,I,d]),a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-black/50"}),a.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx(D,{variant:"ghost",size:"icon",onClick:f,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:a.jsx(vu,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:[" "," ",$&&a.jsx("span",{className:"text-amber-400",children:" LIVE"})]}),a.jsxs("button",{onClick:b,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[a.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),a.jsx(xo,{className:"w-3 h-3"}),a.jsxs("div",{className:"flex items-center gap-1 ml-1 bg-green-500/20 border border-green-500/50 rounded-full px-1.5 py-0.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-[10px] text-green-300 font-medium",children:"LIVE"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Si,{currentRoomCode:t.code,currentGameType:"pokdeng",currentGameName:B("pokDeng")}),(r||s&&!n)&&p&&a.jsxs(Hr,{open:x,onOpenChange:v,children:[a.jsx(Ii,{asChild:!0,children:a.jsx(D,{variant:"ghost",size:"icon",className:"text-amber-400 hover:text-amber-300 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:a.jsx(wo,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),a.jsxs(mr,{className:"bg-black/95 border-amber-500/50 text-white max-w-md",children:[a.jsx(pr,{children:a.jsx(gr,{className:"text-amber-400 text-xl",children:" "})}),a.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:e.map(j=>a.jsx(D,{onClick:()=>{p(j.id),v(!1),w({title:" ",description:`${j.name} `})},variant:j.is_dealer?"default":"outline",className:`h-auto py-3 ${j.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black border-amber-400":"border-white/30 text-white hover:bg-white/10"}`,children:a.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-sm font-medium truncate max-w-full",children:j.name}),j.is_dealer&&a.jsx("span",{className:"text-xl",children:""})]})},j.id))})]})]}),(r||s&&!n)&&a.jsx(MX,{roomCode:t.code,isHost:!0}),(r||s&&!n)&&t.game_started&&a.jsx(D,{variant:"ghost",size:"icon",onClick:h,className:"text-green-400 hover:text-green-300 hover:bg-green-400/10 w-8 h-8 sm:w-10 sm:h-10",title:" / ",children:a.jsx(ao,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(r||s&&!n)&&!t.game_started&&a.jsxs(D,{variant:"default",onClick:i,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[a.jsx(yu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"sm:hidden",children:""})]})]})]}),a.jsx("div",{className:"mb-2 sm:mb-4",children:$?a.jsx(PX,{players:e.map(j=>({id:j.id,name:j.name,is_host:j.is_host,avatar:j.avatar,cards:j.cards,points:j.points,is_dealer:j.is_dealer,has_drawn:j.has_drawn,result:j.result??void 0,multiplier:j.multiplier})),currentPlayerId:n??void 0,showCards:V||t.game_started,currentTurnPlayerId:E==null?void 0:E.id,gamePhase:t.game_phase??void 0}):a.jsx(IA,{players:e.map(j=>({id:j.id,name:j.name,is_host:j.is_host,avatar:j.avatar})),currentPlayerId:n??void 0})}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-4 md:py-6 relative z-10 overflow-y-auto",children:t.game_started?$?a.jsxs("div",{className:"flex flex-col items-center justify-start w-full h-full overflow-y-auto",children:[a.jsx("div",{className:"text-center mb-4 sm:mb-6",children:a.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-6 sm:px-8 py-2 sm:py-3 rounded-full text-lg sm:text-xl md:text-2xl font-medium",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&` : ${(E==null?void 0:E.name)||"..."}`,t.game_phase==="showdown"&&(T?" ":" !"),t.game_phase==="ended"&&" "]})}),a.jsxs("div",{className:"text-white text-sm mb-4 bg-black/50 p-3 rounded",children:[a.jsxs("div",{children:[": ",e.length," "]}),a.jsxs("div",{children:[": ",(C==null?void 0:C.name)||""]}),a.jsxs("div",{children:[": ",F,"/",P]}),e.map(j=>{var W;return a.jsxs("div",{className:"text-xs",children:[j.name,": cards=",((W=j.cards)==null?void 0:W.length)||0," "]},j.id)})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-6xl px-4",children:e.length===0?a.jsx("div",{className:"col-span-full text-white text-center text-xl bg-red-500/20 p-8 rounded",children:"  - players.length = 0"}):e.map(j=>{var W;return a.jsxs("div",{className:`p-6 rounded-2xl border-2 ${j.is_dealer?"bg-amber-500/20 border-amber-500":"bg-white/5 border-white/20"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-white font-bold text-lg",children:[j.is_dealer?" ":"",j.name]}),j.is_dealer&&a.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]}),a.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[j.points||0," "]})]})]}),a.jsx("div",{className:"flex gap-2 justify-center mb-4 min-h-[100px]",children:j.cards&&j.cards.length>0?j.cards.map((K,re)=>a.jsxs("div",{className:"w-16 h-24 rounded-lg bg-white border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-xl font-bold ${K.suit==="hearts"||K.suit==="diamonds"?"text-red-500":"text-black"}`,children:K.value}),a.jsxs("span",{className:"text-2xl",children:[K.suit==="hearts"&&"",K.suit==="diamonds"&&"",K.suit==="clubs"&&"",K.suit==="spades"&&""]})]},re)):a.jsxs("div",{className:"text-white bg-red-500/30 p-4 rounded text-sm",children:[" player.cards = ",JSON.stringify(j.cards),a.jsx("br",{}),"length = ",((W=j.cards)==null?void 0:W.length)||0]})}),a.jsx("div",{className:"text-center",children:j.result&&t.game_phase==="ended"?a.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${j.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[j.result==="player_win"?" !":" ",j.multiplier&&j.multiplier>1&&` x${j.multiplier}`]}):j.has_drawn?a.jsx("span",{className:"text-sm text-green-300",children:" "}):a.jsx("span",{className:"text-sm text-yellow-300 animate-pulse",children:" ..."})})]},j.id)})}),a.jsxs("div",{className:"flex flex-col items-center gap-3 py-4 sm:py-6 mt-4",children:[(r||s&&!n)&&p&&t.game_phase!=="ended"&&a.jsxs(D,{onClick:()=>v(!0),variant:"outline",size:"sm",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 hover:text-amber-300",children:[a.jsx(wo,{className:"w-4 h-4 mr-2"}),""]}),t.game_phase==="showdown"&&a.jsx("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-xl px-6 py-4 mb-2",children:a.jsxs("p",{className:"text-blue-300 text-center text-sm",children:[" : ",F,"/",P," ",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-blue-200/60",children:e.map(j=>`${j.name}: ${j.has_drawn?"":""}`).join(" | ")})]})}),T&&a.jsx("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl px-6 py-4",children:a.jsxs("p",{className:"text-amber-400 font-medium text-center text-lg",children:[" ",a.jsx("br",{}),a.jsx("span",{className:"text-sm text-amber-300/70",children:""})]})}),t.game_phase==="showdown"&&a.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[a.jsxs(D,{onClick:d,disabled:!I,size:"lg",className:`font-bold text-lg px-8 py-6 ${I?"bg-purple-500 hover:bg-purple-600 text-white animate-pulse":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[a.jsx(Ev,{className:"w-6 h-6 mr-2"}),I?"":` (${F}/${P})`]}),!I&&F>=P-1&&a.jsx(D,{onClick:d,variant:"outline",size:"sm",className:"text-xs text-orange-400 border-orange-500/50 hover:bg-orange-500/20",children:""})]}),t.game_phase==="ended"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-6 mb-6",children:[a.jsx("h2",{className:"text-center text-2xl sm:text-3xl font-bold text-amber-400 mb-6",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-white",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-white/20",children:[a.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),a.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""})]})}),a.jsx("tbody",{children:e.sort((j,W)=>j.result==="player_win"&&W.result!=="player_win"?-1:j.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(j.points||0)).map((j,W)=>a.jsxs("tr",{className:`border-b border-white/10 transition-all hover:bg-white/5 ${j.result==="player_win"?"bg-green-500/10":"bg-red-500/5"}`,children:[a.jsx("td",{className:"py-4 px-4 text-center",children:a.jsx("span",{className:`text-2xl font-bold ${W===0&&j.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&j.result==="player_win"?"":W+1})}),a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/30"}),a.jsx("div",{children:a.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2",children:[j.name,j.is_dealer&&a.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]})})]})}),a.jsxs("td",{className:"py-4 px-4 text-center",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-amber-400",children:j.points||0}),a.jsx("span",{className:"text-white/50 text-sm ml-1",children:""})]}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("div",{className:"flex gap-1 justify-center",children:j.cards&&j.cards.length>0?j.cards.map((K,re)=>a.jsxs("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded bg-white border border-gray-200 flex flex-col items-center justify-center text-xs",children:[a.jsx("span",{className:`font-bold ${K.suit==="hearts"||K.suit==="diamonds"?"text-red-500":"text-black"}`,children:K.value}),a.jsxs("span",{className:"text-sm",children:[K.suit==="hearts"&&"",K.suit==="diamonds"&&"",K.suit==="clubs"&&"",K.suit==="spades"&&""]})]},re)):a.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),a.jsx("td",{className:"py-4 px-4 text-center",children:j.result==="player_win"?a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-green-400 font-bold text-sm sm:text-base",children:"!"}),j.multiplier&&j.multiplier>1&&a.jsxs("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-0.5 rounded",children:["x",j.multiplier]})]}):a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-red-400 font-bold text-sm sm:text-base",children:""})]})})]},j.id))})]})}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-white/20 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-green-400 font-bold text-lg",children:e.filter(j=>j.result==="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-red-400 font-bold text-lg",children:e.filter(j=>j.result!=="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-amber-400 font-bold text-lg",children:Math.max(...e.map(j=>j.points||0))})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-xs",children:""}),a.jsx("div",{className:"text-white font-bold text-lg",children:e.length})]})]})]}),a.jsxs(D,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold text-lg px-8",children:[a.jsx(ao,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="drawing"&&a.jsx("div",{className:"mt-4 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:a.jsxs("p",{className:"text-white/50 text-sm sm:text-base text-center",children:["  LIVE ",a.jsx("br",{}),""]})})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-4 py-1 rounded-full text-sm",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&(k?" !":R?" ...":` : ${(E==null?void 0:E.name)||"..."}`),t.game_phase==="showdown"&&(T&&R?" !":T?" ":" "),t.game_phase==="ended"&&" "]})}),_&&a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-4 sm:p-6 border border-white/10 mb-4 w-full max-w-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[_.avatar&&a.jsx("img",{src:`/king-s-cup-party/${_.avatar}.jpg`,alt:_.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-white font-bold text-lg",children:_.is_dealer?"  ()":" "})]}),_.cards.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl font-bold text-amber-400",children:_.points}),_.cards.length===2&&ho(_.cards).isPok&&a.jsxs("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-bounce",children:[" ",ho(_.cards).pokValue,"!"]}),_.cards.length>0&&((A=ou(_.cards))==null?void 0:A.type)!=="normal"&&!ho(_.cards).isPok&&a.jsx("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:(M=ou(_.cards))==null?void 0:M.name})]})]}),a.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[_.cards.map((j,W)=>a.jsx(OX,{card:j},W)),_.cards.length===0&&a.jsx("div",{className:"w-20 h-28 rounded-xl border-2 border-dashed border-white/30 flex items-center justify-center",children:a.jsx("span",{className:"text-white/30",children:"-"})})]}),_.result&&V&&!_.is_dealer&&a.jsx("div",{className:"text-center",children:a.jsxs("span",{className:`text-lg font-bold px-4 py-2 rounded-full ${_.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[_.result==="player_win"?" !":" ",_.multiplier>1&&` x${_.multiplier}`]})})]}),!R&&k&&!(_!=null&&_.has_drawn)&&_.cards.length<3&&t.game_phase==="drawing"&&a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs(D,{onClick:o,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white text-lg px-8 py-6",children:[a.jsx(H_,{className:"w-5 h-5 mr-2"}),""]}),a.jsxs(D,{onClick:l,variant:"outline",size:"lg",className:"border-white/30 text-white hover:bg-white/10 text-lg px-8 py-6",children:[a.jsx(G_,{className:"w-5 h-5 mr-2"}),""]})]}),R&&T&&!(_!=null&&_.has_drawn)&&a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("p",{className:"text-amber-400 font-medium text-center mb-2",children:" "}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[_.cards.length<3&&a.jsxs(D,{onClick:c,size:"lg",className:"bg-amber-500 hover:bg-amber-600 text-black text-lg px-8 py-6 font-bold",children:[a.jsx(H_,{className:"w-5 h-5 mr-2"}),""]}),a.jsxs(D,{onClick:u,variant:"outline",size:"lg",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 text-lg px-8 py-6",children:[a.jsx(G_,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="ended"&&a.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-4 sm:p-6 mb-4 overflow-y-auto max-h-[60vh]",children:[a.jsx("h2",{className:"text-center text-xl sm:text-2xl font-bold text-amber-400 mb-4",children:" "}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-white text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-white/20",children:[a.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:"#"}),a.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),a.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""})]})}),a.jsx("tbody",{children:e.sort((j,W)=>j.result==="player_win"&&W.result!=="player_win"?-1:j.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(j.points||0)).map((j,W)=>a.jsxs("tr",{className:`border-b border-white/10 ${j.result==="player_win"?"bg-green-500/10":"bg-red-500/5"} ${j.id===n?"ring-2 ring-amber-500":""}`,children:[a.jsx("td",{className:"py-3 px-2 text-center",children:a.jsx("span",{className:`text-lg font-bold ${W===0&&j.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&j.result==="player_win"?"":W+1})}),a.jsx("td",{className:"py-3 px-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"font-bold text-sm",children:[j.name,j.id===n&&a.jsx("span",{className:"text-amber-400 ml-1",children:"()"})]}),j.is_dealer&&a.jsx("span",{className:"text-[10px] bg-amber-500 text-black px-1 rounded w-fit",children:""})]})]})}),a.jsx("td",{className:"py-3 px-2 text-center",children:a.jsx("span",{className:"text-xl font-bold text-amber-400",children:j.points||0})}),a.jsx("td",{className:"py-3 px-2",children:a.jsx("div",{className:"flex gap-1 justify-center",children:j.cards&&j.cards.length>0?j.cards.map((K,re)=>a.jsxs("div",{className:"w-6 h-9 rounded bg-white border border-gray-200 flex flex-col items-center justify-center",children:[a.jsx("span",{className:`text-[10px] font-bold ${K.suit==="hearts"||K.suit==="diamonds"?"text-red-500":"text-black"}`,children:K.value}),a.jsxs("span",{className:"text-xs",children:[K.suit==="hearts"&&"",K.suit==="diamonds"&&"",K.suit==="clubs"&&"",K.suit==="spades"&&""]})]},re)):a.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),a.jsx("td",{className:"py-3 px-2 text-center",children:j.result==="player_win"?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{className:"text-green-400 font-bold text-xs",children:""}),j.multiplier&&j.multiplier>1&&a.jsxs("span",{className:"text-[10px] text-green-300 bg-green-500/20 px-1 rounded",children:["x",j.multiplier]})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("span",{className:"text-red-400 font-bold text-xs",children:""})]})})]},j.id))})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 grid grid-cols-4 gap-2",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-green-400 font-bold text-sm",children:e.filter(j=>j.result==="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-red-400 font-bold text-sm",children:e.filter(j=>j.result!=="player_win").length})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-amber-400 font-bold text-sm",children:Math.max(...e.map(j=>j.points||0))})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:""}),a.jsx("div",{className:"text-white/50 text-[10px]",children:""}),a.jsx("div",{className:"text-white font-bold text-sm",children:e.length})]})]})]}),(r||s&&!n)&&!s&&a.jsxs("div",{className:"flex justify-center gap-3 py-4",children:[t.game_phase==="showdown"&&I&&a.jsxs(D,{onClick:d,size:"lg",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-6 animate-pulse",children:[a.jsx(Ev,{className:"w-5 h-5 mr-2"}),""]}),t.game_phase==="ended"&&a.jsxs(D,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-6",children:[a.jsx(ao,{className:"w-5 h-5 mr-2"}),""]})]}),!k&&!T&&t.game_phase==="drawing"&&(_==null?void 0:_.has_drawn)&&a.jsx("div",{className:"text-center text-white/50",children:a.jsx("p",{children:"  ..."})}),!k&&!T&&t.game_phase==="drawing"&&!(_!=null&&_.has_drawn)&&!R&&a.jsx("div",{className:"text-center text-white/50",children:a.jsx("p",{children:"..."})})]}):a.jsxs("div",{className:"text-center px-2 w-full max-w-2xl",children:[a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[a.jsx(Ky,{}),a.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?s?"  LIVE -  ":'  ""':" Host "})]}),(r||s&&!n)&&p&&e.length>=1&&a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white text-sm sm:text-base mb-3 font-medium",children:" "}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:e.map(j=>a.jsxs(D,{onClick:()=>p(j.id),variant:j.is_dealer?"default":"outline",className:`${j.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black":"border-white/30 text-white hover:bg-white/10"}`,children:[j.avatar&&a.jsx("img",{src:`/king-s-cup-party/${j.avatar}.jpg`,alt:j.name,className:"w-6 h-6 rounded-full object-cover mr-2"}),a.jsx("span",{className:"truncate",children:j.name}),j.is_dealer&&a.jsx("span",{className:"ml-1",children:""})]},j.id))})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[a.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),a.jsx("button",{onClick:b,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})}),a.jsxs("div",{className:"relative z-10 mt-auto",children:[a.jsx(D,{variant:"ghost",size:"sm",onClick:()=>y(!g),className:"w-full text-white/50 hover:text-white/80",children:g?" ":" "}),g&&a.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-xl p-3 mt-2 border border-white/10",children:a.jsxs("ul",{className:"text-white/60 text-xs space-y-1",children:[a.jsx("li",{children:"  8/9 =  ( 2 )"}),a.jsx("li",{children:"  =  5 "}),a.jsx("li",{children:" // =  3 "}),a.jsx("li",{children:"  (/) =  2 "}),a.jsx("li",{children:"  = "})]})})]})]})}const zs=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:L("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));zs.displayName="Card";const FX=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:L("flex flex-col space-y-1.5 p-6",t),...e}));FX.displayName="CardHeader";const $X=m.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:L("text-2xl font-semibold leading-none tracking-tight",t),...e}));$X.displayName="CardTitle";const VX=m.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:L("text-sm text-muted-foreground",t),...e}));VX.displayName="CardDescription";const Ws=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:L("p-6 pt-0",t),...e}));Ws.displayName="CardContent";const UX=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:L("flex items-center p-6 pt-0",t),...e}));UX.displayName="CardFooter";var jg="rovingFocusGroup.onEntryFocus",BX={bubbles:!1,cancelable:!0},$u="RovingFocusGroup",[Yy,VA,zX]=Jf($u),[WX,Hm]=un($u,[zX]),[HX,GX]=WX($u),UA=m.forwardRef((t,e)=>a.jsx(Yy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Yy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(qX,{...t,ref:e})})}));UA.displayName=$u;var qX=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=m.useRef(null),p=ge(e,f),w=Cl(i),[g,y]=ur({prop:o,defaultProp:l??null,onChange:c,caller:$u}),[x,v]=m.useState(!1),b=dt(u),N=VA(n),_=m.useRef(!1),[C,S]=m.useState(0);return m.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(jg,b),()=>E.removeEventListener(jg,b)},[b]),a.jsx(HX,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:g,onItemFocus:m.useCallback(E=>y(E),[y]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>S(E=>E-1),[]),children:a.jsx(ne.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ee(t.onMouseDown,()=>{_.current=!0}),onFocus:ee(t.onFocus,E=>{const k=!_.current;if(E.target===E.currentTarget&&k&&!x){const T=new CustomEvent(jg,BX);if(E.currentTarget.dispatchEvent(T),!T.defaultPrevented){const R=N().filter($=>$.focusable),I=R.find($=>$.active),F=R.find($=>$.id===g),V=[I,F,...R].filter(Boolean).map($=>$.ref.current);WA(V,d)}}_.current=!1}),onBlur:ee(t.onBlur,()=>v(!1))})})}),BA="RovingFocusGroupItem",zA=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=Ar(),u=i||c,d=GX(BA,n),h=d.currentTabStopId===u,f=VA(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:g}=d;return m.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),a.jsx(Yy.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(ne.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ee(t.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:ee(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ee(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=QX(y,d.orientation,d.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(N=>N.focusable).map(N=>N.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const N=b.indexOf(y.currentTarget);b=d.loop?XX(b,N+1):b.slice(N+1)}setTimeout(()=>WA(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});zA.displayName=BA;var KX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function YX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function QX(t,e,n){const r=YX(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return KX[r]}function WA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function XX(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var HA=UA,GA=zA,Gm="Tabs",[JX,QZ]=un(Gm,[Hm]),qA=Hm(),[ZX,ob]=JX(Gm),KA=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Cl(l),[h,f]=ur({prop:r,onChange:s,defaultProp:i??"",caller:Gm});return a.jsx(ZX,{scope:n,baseId:Ar(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(ne.div,{dir:d,"data-orientation":o,...u,ref:e})})});KA.displayName=Gm;var YA="TabsList",QA=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=ob(YA,n),o=qA(n);return a.jsx(HA,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ne.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});QA.displayName=YA;var XA="TabsTrigger",JA=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=ob(XA,n),l=qA(n),c=tD(o.baseId,r),u=nD(o.baseId,r),d=r===o.value;return a.jsx(GA,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(ne.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ee(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ee(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ee(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});JA.displayName=XA;var ZA="TabsContent",eD=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=ob(ZA,n),c=tD(l.baseId,r),u=nD(l.baseId,r),d=r===l.value,h=m.useRef(d);return m.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(Sn,{present:s||d,children:({present:f})=>a.jsx(ne.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});eD.displayName=ZA;function tD(t,e){return`${t}-trigger-${e}`}function nD(t,e){return`${t}-content-${e}`}var eJ=KA,rD=QA,sD=JA,iD=eD;const tJ=eJ,oD=m.forwardRef(({className:t,...e},n)=>a.jsx(rD,{ref:n,className:L("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));oD.displayName=rD.displayName;const Qy=m.forwardRef(({className:t,...e},n)=>a.jsx(sD,{ref:n,className:L("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Qy.displayName=sD.displayName;const Xy=m.forwardRef(({className:t,...e},n)=>a.jsx(iD,{ref:n,className:L("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Xy.displayName=iD.displayName;var qm="Collapsible",[nJ,aD]=un(qm),[rJ,ab]=nJ(qm),lD=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=t,[c,u]=ur({prop:r,defaultProp:s??!1,onChange:o,caller:qm});return a.jsx(rJ,{scope:n,disabled:i,contentId:Ar(),open:c,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),children:a.jsx(ne.div,{"data-state":cb(c),"data-disabled":i?"":void 0,...l,ref:e})})});lD.displayName=qm;var cD="CollapsibleTrigger",uD=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=ab(cD,n);return a.jsx(ne.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":cb(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ee(t.onClick,s.onOpenToggle)})});uD.displayName=cD;var lb="CollapsibleContent",dD=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ab(lb,t.__scopeCollapsible);return a.jsx(Sn,{present:n||s.open,children:({present:i})=>a.jsx(sJ,{...r,ref:e,present:i})})});dD.displayName=lb;var sJ=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=ab(lb,n),[l,c]=m.useState(r),u=m.useRef(null),d=ge(e,u),h=m.useRef(0),f=h.current,p=m.useRef(0),w=p.current,g=o.open||l,y=m.useRef(g),x=m.useRef(void 0);return m.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),pt(()=>{const v=u.current;if(v){x.current=x.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const b=v.getBoundingClientRect();h.current=b.height,p.current=b.width,y.current||(v.style.transitionDuration=x.current.transitionDuration,v.style.animationName=x.current.animationName),c(r)}},[o.open,r]),a.jsx(ne.div,{"data-state":cb(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:g&&s})});function cb(t){return t?"open":"closed"}var iJ=lD,oJ=uD,aJ=dD,vr="Accordion",lJ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ub,cJ,uJ]=Jf(vr),[Km,XZ]=un(vr,[uJ,aD]),db=aD(),hD=H.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return a.jsx(ub.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(mJ,{...i,ref:e}):a.jsx(fJ,{...s,ref:e})})});hD.displayName=vr;var[fD,dJ]=Km(vr),[mD,hJ]=Km(vr,{collapsible:!1}),fJ=H.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[l,c]=ur({prop:n,defaultProp:r??"",onChange:s,caller:vr});return a.jsx(fD,{scope:t.__scopeAccordion,value:H.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:H.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(mD,{scope:t.__scopeAccordion,collapsible:i,children:a.jsx(pD,{...o,ref:e})})})}),mJ=H.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o,l]=ur({prop:n,defaultProp:r??[],onChange:s,caller:vr}),c=H.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=H.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return a.jsx(fD,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(mD,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(pD,{...i,ref:e})})})}),[pJ,Ym]=Km(vr),pD=H.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,l=H.useRef(null),c=ge(l,e),u=cJ(n),h=Cl(s)==="ltr",f=ee(t.onKeyDown,p=>{var E;if(!lJ.includes(p.key))return;const w=p.target,g=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),y=g.findIndex(k=>k.ref.current===w),x=g.length;if(y===-1)return;p.preventDefault();let v=y;const b=0,N=x-1,_=()=>{v=y+1,v>N&&(v=b)},C=()=>{v=y-1,v<b&&(v=N)};switch(p.key){case"Home":v=b;break;case"End":v=N;break;case"ArrowRight":i==="horizontal"&&(h?_():C());break;case"ArrowDown":i==="vertical"&&_();break;case"ArrowLeft":i==="horizontal"&&(h?C():_());break;case"ArrowUp":i==="vertical"&&C();break}const S=v%x;(E=g[S].ref.current)==null||E.focus()});return a.jsx(pJ,{scope:n,disabled:r,direction:s,orientation:i,children:a.jsx(ub.Slot,{scope:n,children:a.jsx(ne.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:f})})})}),Pf="AccordionItem",[gJ,hb]=Km(Pf),gD=H.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=Ym(Pf,n),o=dJ(Pf,n),l=db(n),c=Ar(),u=r&&o.value.includes(r)||!1,d=i.disabled||t.disabled;return a.jsx(gJ,{scope:n,open:u,disabled:d,triggerId:c,children:a.jsx(iJ,{"data-orientation":i.orientation,"data-state":_D(u),...l,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});gD.displayName=Pf;var vD="AccordionHeader",yD=H.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ym(vr,n),i=hb(vD,n);return a.jsx(ne.h3,{"data-orientation":s.orientation,"data-state":_D(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});yD.displayName=vD;var Jy="AccordionTrigger",xD=H.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ym(vr,n),i=hb(Jy,n),o=hJ(Jy,n),l=db(n);return a.jsx(ub.ItemSlot,{scope:n,children:a.jsx(oJ,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...r,ref:e})})});xD.displayName=Jy;var wD="AccordionContent",bD=H.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=Ym(vr,n),i=hb(wD,n),o=db(n);return a.jsx(aJ,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});bD.displayName=wD;function _D(t){return t?"open":"closed"}var vJ=hD,yJ=gD,xJ=yD,CD=xD,ND=bD;const wJ=vJ,SD=m.forwardRef(({className:t,...e},n)=>a.jsx(yJ,{ref:n,className:L("border-b",t),...e}));SD.displayName="AccordionItem";const ED=m.forwardRef(({className:t,children:e,...n},r)=>a.jsx(xJ,{className:"flex",children:a.jsxs(CD,{ref:r,className:L("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(r0,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ED.displayName=CD.displayName;const kD=m.forwardRef(({className:t,children:e,...n},r)=>a.jsx(ND,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:L("pb-4 pt-0",t),children:e})}));kD.displayName=ND.displayName;function bJ({vocabularies:t,categories:e,onAdd:n,onUpdate:r,onDelete:s}){const[i,o]=m.useState(!1),[l,c]=m.useState(null),[u,d]=m.useState(""),[h,f]=m.useState(!1),{toast:p}=bt(),[w,g]=m.useState(""),[y,x]=m.useState(""),[v,b]=m.useState(""),N=m.useMemo(()=>{const k=t.filter(R=>{if(!u)return!0;const I=u.toLowerCase();return R.category.toLowerCase().includes(I)||R.word_civilian.toLowerCase().includes(I)||R.word_undercover.toLowerCase().includes(I)}),T={};return k.forEach(R=>{T[R.category]||(T[R.category]=[]),T[R.category].push(R)}),Object.entries(T).sort(([R],[I])=>R.localeCompare(I))},[t,u]),_=()=>{c(null),g(""),x(""),b(""),o(!0)},C=k=>{c(k),g(k.category),x(k.word_civilian),b(k.word_undercover),o(!0)},S=()=>{!w||!y||!v||(l?r({...l,category:w,word_civilian:y,word_undercover:v}):n({category:w,word_civilian:y,word_undercover:v}),o(!1))},E=async()=>{if(!w.trim()){p({title:"",description:" AI ",variant:"destructive"});return}f(!0);try{const k=await SX(w,3);k.forEach(T=>{n(T)}),p({title:" !",description:` ${k.length}  "${w}"`}),o(!1),g(""),x(""),b("")}catch(k){p({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{f(!1)}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(W_,{className:"w-5 h-5 text-purple-400"}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:B("vocabularyManager")}),a.jsxs(au,{variant:"secondary",className:"bg-purple-500/20",children:[t.length," ",B("words")]})]}),a.jsxs(Hr,{open:i,onOpenChange:o,children:[a.jsx(Ii,{asChild:!0,children:a.jsxs(D,{onClick:_,size:"sm",className:"bg-purple-500 hover:bg-purple-600",children:[a.jsx(xu,{className:"w-4 h-4 mr-1"}),B("addWord")]})}),a.jsxs(mr,{className:"bg-gray-900 text-white border-white/20",children:[a.jsxs(pr,{children:[a.jsx(gr,{children:B(l?"editVocabulary":"addVocabulary")}),a.jsx(Gr,{className:"sr-only",children:l?"":""})]}),a.jsxs("div",{className:"space-y-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"category",children:B("category")}),a.jsx(pe,{id:"category",value:w,onChange:k=>g(k.target.value),placeholder:B("categoryPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"civilian",children:B("civilianWord")}),a.jsx(pe,{id:"civilian",value:y,onChange:k=>x(k.target.value),placeholder:B("civilianPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"undercover",children:B("undercoverWord")}),a.jsx(pe,{id:"undercover",value:v,onChange:k=>b(k.target.value),placeholder:B("undercoverPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),!l&&a.jsx(D,{onClick:E,disabled:!w.trim()||h,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",variant:"default",children:h?a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"})," AI..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tr,{className:"w-4 h-4 mr-2"}),"  AI (3 )"]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t border-white/10"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-gray-900 px-2 text-white/40",children:l?"":""})})]}),a.jsx(D,{onClick:S,disabled:!w||!y||!v,className:"w-full bg-purple-500 hover:bg-purple-600",children:B(l?"save":"add")})]})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Tv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),a.jsx(pe,{type:"text",placeholder:B("searchVocabulary"),value:u,onChange:k=>d(k.target.value),className:"bg-black/30 border-white/20 text-white pl-10"})]}),a.jsx(wJ,{type:"multiple",className:"space-y-2",children:N.map(([k,T])=>a.jsxs(SD,{value:k,className:"bg-black/40 border-white/10 rounded-lg overflow-hidden",children:[a.jsx(ED,{className:"px-4 hover:bg-white/5 hover:no-underline",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"font-semibold text-white",children:k}),a.jsx(au,{variant:"secondary",className:"bg-purple-500/20",children:T.length})]})}),a.jsx(kD,{className:"px-4 pb-4",children:a.jsx("div",{className:"space-y-2 mt-2",children:T.map(R=>a.jsx(zs,{className:"bg-black/40 border-white/10",children:a.jsx(Ws,{className:"p-3",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("civilian")}),a.jsx("span",{className:"text-green-400 font-medium",children:R.word_civilian})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("undercover")}),a.jsx("span",{className:"text-red-400 font-medium",children:R.word_undercover})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(D,{size:"sm",variant:"ghost",onClick:()=>C(R),disabled:R.id<1e3,className:"h-8 w-8 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:R.id<1e3?B("cannotEditDefault"):B("edit"),children:a.jsx(Oh,{className:"w-4 h-4"})}),a.jsx(D,{size:"sm",variant:"ghost",onClick:()=>s(R.id),disabled:R.id<1e3,className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:R.id<1e3?B("cannotDeleteDefault"):B("delete"),children:a.jsx(bo,{className:"w-4 h-4"})})]})]})})},R.id))})})]},k))}),N.length===0&&a.jsxs("div",{className:"text-center py-12 text-white/40",children:[a.jsx(W_,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:B(u?"noVocabularyFound":"noVocabularyYet")})]})]})}function _J({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=Wr(),[i,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(Rd()),[p,w]=m.useState(!1),{toast:g}=bt();m.useEffect(()=>{s&&(i||o(s),l||c(s))},[s]);const y=_=>{EY(_),f(Rd())},x=_=>{kY(_),f(Rd())},v=_=>{TY(_),f(Rd())},b=()=>{const _=If(i);if(!_.isValid){g({title:B("error"),description:_.error||B("invalidName"),variant:"destructive"});return}t(i.trim())},N=()=>{const _=If(l);if(!_.isValid){g({title:B("error"),description:_.error||B("invalidName"),variant:"destructive"});return}u.trim()&&e(u.trim().toUpperCase(),l.trim())};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),a.jsxs(D,{variant:"ghost",onClick:n,className:"absolute top-4 left-4 text-white/70 hover:text-white z-20",children:[a.jsx(al,{className:"w-5 h-5 mr-2"}),B("back")]}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:B("undercoverTitle")}),a.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("undercoverSubtitle")})]}),a.jsxs(Hr,{open:p,onOpenChange:w,children:[a.jsx(Ii,{asChild:!0,children:a.jsxs(D,{variant:"outline",className:"absolute top-4 right-4 text-white/70 hover:text-white z-20 border-white/20",children:[a.jsx(wu,{className:"w-5 h-5 mr-2"}),B("manageWords")]})}),a.jsxs(mr,{className:"bg-gray-900 text-white border-white/20 max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(pr,{children:[a.jsx(gr,{children:B("vocabularyManager")}),a.jsx(Gr,{className:"sr-only",children:" Undercover"})]}),a.jsx(bJ,{vocabularies:h,categories:I2(),onAdd:y,onUpdate:x,onDelete:v})]})]}),a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10 w-full max-w-md relative z-10",children:a.jsx(Ws,{className:"p-4 sm:p-6",children:a.jsxs(tJ,{defaultValue:"create",className:"w-full",children:[a.jsxs(oD,{className:"grid w-full grid-cols-2 bg-black/40",children:[a.jsxs(Qy,{value:"create",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),B("createRoom")]}),a.jsxs(Qy,{value:"join",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[a.jsx(yT,{className:"w-4 h-4 mr-2"}),B("joinRoom")]})]}),a.jsxs(Xy,{value:"create",className:"mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),a.jsx(pe,{type:"text",placeholder:B("enterName"),value:i,onChange:_=>o(_.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),a.jsx(D,{onClick:b,disabled:!i.trim()||r,className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:B(r?"creating":"createNewRoom")})]}),a.jsxs(Xy,{value:"join",className:"mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("roomCode")}),a.jsx(pe,{type:"text",placeholder:B("enterCode"),value:u,onChange:_=>d(_.target.value.toUpperCase()),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40 font-mono text-center text-xl tracking-widest",maxLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),a.jsx(pe,{type:"text",placeholder:B("enterName"),value:l,onChange:_=>c(_.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),a.jsx(D,{onClick:N,disabled:!l.trim()||u.length!==6||r,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:B(r?"joining":"joinRoomBtn")})]})]})})})]})}function fb(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CJ=[" ","Enter","ArrowUp","ArrowDown"],NJ=[" ","Enter"],Ro="Select",[Qm,Xm,SJ]=Jf(Ro),[Nl,JZ]=un(Ro,[SJ,om]),Jm=om(),[EJ,Ai]=Nl(Ro),[kJ,TJ]=Nl(Ro),TD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:w}=t,g=Jm(e),[y,x]=m.useState(null),[v,b]=m.useState(null),[N,_]=m.useState(!1),C=Cl(u),[S,E]=ur({prop:r,defaultProp:s??!1,onChange:i,caller:Ro}),[k,T]=ur({prop:o,defaultProp:l,onChange:c,caller:Ro}),R=m.useRef(null),I=y?w||!!y.closest("form"):!0,[F,P]=m.useState(new Set),V=Array.from(F).map($=>$.props.value).join(";");return a.jsx(o6,{...g,children:a.jsxs(EJ,{required:p,scope:e,trigger:y,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:_,contentId:Ar(),value:k,onValueChange:T,open:S,onOpenChange:E,dir:C,triggerPointerDownPosRef:R,disabled:f,children:[a.jsx(Qm.Provider,{scope:e,children:a.jsx(kJ,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback($=>{P(z=>new Set(z).add($))},[]),onNativeOptionRemove:m.useCallback($=>{P(z=>{const A=new Set(z);return A.delete($),A})},[]),children:n})}),I?a.jsxs(JD,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:$=>T($.target.value),disabled:f,form:w,children:[k===void 0?a.jsx("option",{value:""}):null,Array.from(F)]},V):null]})})};TD.displayName=Ro;var jD="SelectTrigger",RD=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Jm(n),o=Ai(jD,n),l=o.disabled||r,c=ge(e,o.onTriggerChange),u=Xm(n),d=m.useRef("touch"),[h,f,p]=eM(g=>{const y=u().filter(b=>!b.disabled),x=y.find(b=>b.value===o.value),v=tM(y,g,x);v!==void 0&&o.onValueChange(v.value)}),w=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(QT,{asChild:!0,...i,children:a.jsx(ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ZD(o.value)?"":void 0,...s,ref:c,onClick:ee(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&w(g)}),onPointerDown:ee(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(w(g),g.preventDefault())}),onKeyDown:ee(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&CJ.includes(g.key)&&(w(),g.preventDefault())})})})});RD.displayName=jD;var ID="SelectValue",PD=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Ai(ID,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=ge(e,c.onValueNodeChange);return pt(()=>{u(d)},[u,d]),a.jsx(ne.span,{...l,ref:h,style:{pointerEvents:"none"},children:ZD(c.value)?a.jsx(a.Fragment,{children:o}):i})});PD.displayName=ID;var jJ="SelectIcon",AD=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ne.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});AD.displayName=jJ;var RJ="SelectPortal",DD=t=>a.jsx(Zf,{asChild:!0,...t});DD.displayName=RJ;var Io="SelectContent",MD=m.forwardRef((t,e)=>{const n=Ai(Io,t.__scopeSelect),[r,s]=m.useState();if(pt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Do.createPortal(a.jsx(OD,{scope:t.__scopeSelect,children:a.jsx(Qm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(LD,{...t,ref:e})});MD.displayName=Io;var Kn=10,[OD,Di]=Nl(Io),IJ="SelectContentImpl",PJ=za("SelectContent.RemoveScroll"),LD=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:w,hideWhenDetached:g,avoidCollisions:y,...x}=t,v=Ai(Io,n),[b,N]=m.useState(null),[_,C]=m.useState(null),S=ge(e,Q=>N(Q)),[E,k]=m.useState(null),[T,R]=m.useState(null),I=Xm(n),[F,P]=m.useState(!1),V=m.useRef(!1);m.useEffect(()=>{if(b)return B2(b)},[b]),A2();const $=m.useCallback(Q=>{const[_e,...Ae]=I().map(fe=>fe.ref.current),[be]=Ae.slice(-1),G=document.activeElement;for(const fe of Q)if(fe===G||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===_e&&_&&(_.scrollTop=0),fe===be&&_&&(_.scrollTop=_.scrollHeight),fe==null||fe.focus(),document.activeElement!==G))return},[I,_]),z=m.useCallback(()=>$([E,b]),[$,E,b]);m.useEffect(()=>{F&&z()},[F,z]);const{onOpenChange:A,triggerPointerDownPosRef:M}=v;m.useEffect(()=>{if(b){let Q={x:0,y:0};const _e=be=>{var G,fe;Q={x:Math.abs(Math.round(be.pageX)-(((G=M.current)==null?void 0:G.x)??0)),y:Math.abs(Math.round(be.pageY)-(((fe=M.current)==null?void 0:fe.y)??0))}},Ae=be=>{Q.x<=10&&Q.y<=10?be.preventDefault():b.contains(be.target)||A(!1),document.removeEventListener("pointermove",_e),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[b,A,M]),m.useEffect(()=>{const Q=()=>A(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[A]);const[j,W]=eM(Q=>{const _e=I().filter(G=>!G.disabled),Ae=_e.find(G=>G.ref.current===document.activeElement),be=tM(_e,Q,Ae);be&&setTimeout(()=>be.ref.current.focus())}),K=m.useCallback((Q,_e,Ae)=>{const be=!V.current&&!Ae;(v.value!==void 0&&v.value===_e||be)&&(k(Q),be&&(V.current=!0))},[v.value]),re=m.useCallback(()=>b==null?void 0:b.focus(),[b]),ae=m.useCallback((Q,_e,Ae)=>{const be=!V.current&&!Ae;(v.value!==void 0&&v.value===_e||be)&&R(Q)},[v.value]),Te=r==="popper"?Zy:FD,Re=Te===Zy?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:w,hideWhenDetached:g,avoidCollisions:y}:{};return a.jsx(OD,{scope:n,content:b,viewport:_,onViewportChange:C,itemRefCallback:K,selectedItem:E,onItemLeave:re,itemTextRefCallback:ae,focusSelectedItem:z,selectedItemText:T,position:r,isPositioned:F,searchRef:j,children:a.jsx(Xw,{as:PJ,allowPinchZoom:!0,children:a.jsx(Qw,{asChild:!0,trapped:v.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:ee(s,Q=>{var _e;(_e=v.trigger)==null||_e.focus({preventScroll:!0}),Q.preventDefault()}),children:a.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(Te,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Q=>Q.preventDefault(),...x,...Re,onPlaced:()=>P(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ee(x.onKeyDown,Q=>{const _e=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!_e&&Q.key.length===1&&W(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let be=I().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const G=Q.target,fe=be.indexOf(G);be=be.slice(fe+1)}setTimeout(()=>$(be)),Q.preventDefault()}})})})})})})});LD.displayName=IJ;var AJ="SelectItemAlignedPosition",FD=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ai(Io,n),o=Di(Io,n),[l,c]=m.useState(null),[u,d]=m.useState(null),h=ge(e,S=>d(S)),f=Xm(n),p=m.useRef(!1),w=m.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:x,focusSelectedItem:v}=o,b=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&y&&x){const S=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(i.dir!=="rtl"){const G=T.left-E.left,fe=k.left-G,Ue=S.left-fe,Pt=S.width+Ue,Kr=Math.max(Pt,E.width),yr=window.innerWidth-Kn,En=By(fe,[Kn,Math.max(Kn,yr-Kr)]);l.style.minWidth=Pt+"px",l.style.left=En+"px"}else{const G=E.right-T.right,fe=window.innerWidth-k.right-G,Ue=window.innerWidth-S.right-fe,Pt=S.width+Ue,Kr=Math.max(Pt,E.width),yr=window.innerWidth-Kn,En=By(fe,[Kn,Math.max(Kn,yr-Kr)]);l.style.minWidth=Pt+"px",l.style.right=En+"px"}const R=f(),I=window.innerHeight-Kn*2,F=g.scrollHeight,P=window.getComputedStyle(u),V=parseInt(P.borderTopWidth,10),$=parseInt(P.paddingTop,10),z=parseInt(P.borderBottomWidth,10),A=parseInt(P.paddingBottom,10),M=V+$+F+A+z,j=Math.min(y.offsetHeight*5,M),W=window.getComputedStyle(g),K=parseInt(W.paddingTop,10),re=parseInt(W.paddingBottom,10),ae=S.top+S.height/2-Kn,Te=I-ae,Re=y.offsetHeight/2,Q=y.offsetTop+Re,_e=V+$+Q,Ae=M-_e;if(_e<=ae){const G=R.length>0&&y===R[R.length-1].ref.current;l.style.bottom="0px";const fe=u.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(Te,Re+(G?re:0)+fe+z),Pt=_e+Ue;l.style.height=Pt+"px"}else{const G=R.length>0&&y===R[0].ref.current;l.style.top="0px";const Ue=Math.max(ae,V+g.offsetTop+(G?K:0)+Re)+Ae;l.style.height=Ue+"px",g.scrollTop=_e-ae+g.offsetTop}l.style.margin=`${Kn}px 0`,l.style.minHeight=j+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,u,g,y,x,i.dir,r]);pt(()=>b(),[b]);const[N,_]=m.useState();pt(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const C=m.useCallback(S=>{S&&w.current===!0&&(b(),v==null||v(),w.current=!1)},[b,v]);return a.jsx(MJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:a.jsx(ne.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});FD.displayName=AJ;var DJ="SelectPopperPosition",Zy=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Kn,...i}=t,o=Jm(n);return a.jsx(XT,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Zy.displayName=DJ;var[MJ,mb]=Nl(Io,{}),ex="SelectViewport",$D=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Di(ex,n),o=mb(ex,n),l=ge(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Qm.Slot,{scope:n,children:a.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ee(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const w=window.innerHeight-Kn*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),x=Math.max(g,y);if(x<w){const v=x+p,b=Math.min(w,v),N=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});$D.displayName=ex;var VD="SelectGroup",[OJ,LJ]=Nl(VD),FJ=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ar();return a.jsx(OJ,{scope:n,id:s,children:a.jsx(ne.div,{role:"group","aria-labelledby":s,...r,ref:e})})});FJ.displayName=VD;var UD="SelectLabel",BD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=LJ(UD,n);return a.jsx(ne.div,{id:s.id,...r,ref:e})});BD.displayName=UD;var Af="SelectItem",[$J,zD]=Nl(Af),WD=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Ai(Af,n),c=Di(Af,n),u=l.value===r,[d,h]=m.useState(i??""),[f,p]=m.useState(!1),w=ge(e,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=Ar(),y=m.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx($J,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:m.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Qm.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:a.jsx(ne.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:ee(o.onFocus,()=>p(!0)),onBlur:ee(o.onBlur,()=>p(!1)),onClick:ee(o.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:ee(o.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:ee(o.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:ee(o.onPointerMove,v=>{var b;y.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ee(o.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ee(o.onKeyDown,v=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&v.key===" "||(NJ.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});WD.displayName=Af;var ec="SelectItemText",HD=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ai(ec,n),l=Di(ec,n),c=zD(ec,n),u=TJ(ec,n),[d,h]=m.useState(null),f=ge(e,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),p=d==null?void 0:d.textContent,w=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return pt(()=>(g(w),()=>y(w)),[g,y,w]),a.jsxs(a.Fragment,{children:[a.jsx(ne.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Do.createPortal(i.children,o.valueNode):null]})});HD.displayName=ec;var GD="SelectItemIndicator",qD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return zD(GD,n).isSelected?a.jsx(ne.span,{"aria-hidden":!0,...r,ref:e}):null});qD.displayName=GD;var tx="SelectScrollUpButton",KD=m.forwardRef((t,e)=>{const n=Di(tx,t.__scopeSelect),r=mb(tx,t.__scopeSelect),[s,i]=m.useState(!1),o=ge(e,r.onScrollButtonChange);return pt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(QD,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});KD.displayName=tx;var nx="SelectScrollDownButton",YD=m.forwardRef((t,e)=>{const n=Di(nx,t.__scopeSelect),r=mb(nx,t.__scopeSelect),[s,i]=m.useState(!1),o=ge(e,r.onScrollButtonChange);return pt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(QD,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});YD.displayName=nx;var QD=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Di("SelectScrollButton",n),o=m.useRef(null),l=Xm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),pt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(ne.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ee(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ee(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ee(s.onPointerLeave,()=>{c()})})}),VJ="SelectSeparator",XD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ne.div,{"aria-hidden":!0,...r,ref:e})});XD.displayName=VJ;var rx="SelectArrow",UJ=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jm(n),i=Ai(rx,n),o=Di(rx,n);return i.open&&o.position==="popper"?a.jsx(JT,{...s,...r,ref:e}):null});UJ.displayName=rx;var BJ="SelectBubbleInput",JD=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=ge(r,s),o=fb(e);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(ne.select,{...n,style:{...Kk,...n.style},ref:i,defaultValue:e})});JD.displayName=BJ;function ZD(t){return t===""||t===void 0}function eM(t){const e=dt(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function tM(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=zJ(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function zJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var WJ=TD,nM=RD,HJ=PD,GJ=AD,qJ=DD,rM=MD,KJ=$D,sM=BD,iM=WD,YJ=HD,QJ=qD,oM=KD,aM=YD,lM=XD;const XJ=WJ,JJ=HJ,cM=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(nM,{ref:r,className:L("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(GJ,{asChild:!0,children:a.jsx(r0,{className:"h-4 w-4 opacity-50"})})]}));cM.displayName=nM.displayName;const uM=m.forwardRef(({className:t,...e},n)=>a.jsx(oM,{ref:n,className:L("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(g5,{className:"h-4 w-4"})}));uM.displayName=oM.displayName;const dM=m.forwardRef(({className:t,...e},n)=>a.jsx(aM,{ref:n,className:L("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(r0,{className:"h-4 w-4"})}));dM.displayName=aM.displayName;const hM=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(qJ,{children:a.jsxs(rM,{ref:s,className:L("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(uM,{}),a.jsx(KJ,{className:L("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(dM,{})]})}));hM.displayName=rM.displayName;const ZJ=m.forwardRef(({className:t,...e},n)=>a.jsx(sM,{ref:n,className:L("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ZJ.displayName=sM.displayName;const fM=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(iM,{ref:r,className:L("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(QJ,{children:a.jsx(oo,{className:"h-4 w-4"})})}),a.jsx(YJ,{children:e})]}));fM.displayName=iM.displayName;const eZ=m.forwardRef(({className:t,...e},n)=>a.jsx(lM,{ref:n,className:L("-mx-1 my-1 h-px bg-muted",t),...e}));eZ.displayName=lM.displayName;var Zm="Switch",[tZ,ZZ]=un(Zm),[nZ,rZ]=tZ(Zm),mM=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,p]=m.useState(null),w=ge(e,b=>p(b)),g=m.useRef(!1),y=f?d||!!f.closest("form"):!0,[x,v]=ur({prop:s,defaultProp:i??!1,onChange:u,caller:Zm});return a.jsxs(nZ,{scope:n,checked:x,disabled:l,children:[a.jsx(ne.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":yM(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:w,onClick:ee(t.onClick,b=>{v(N=>!N),y&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),y&&a.jsx(vM,{control:f,bubbles:!g.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});mM.displayName=Zm;var pM="SwitchThumb",gM=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rZ(pM,n);return a.jsx(ne.span,{"data-state":yM(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});gM.displayName=pM;var sZ="SwitchBubbleInput",vM=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),l=ge(o,i),c=fb(n),u=f0(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const w=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(w)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vM.displayName=sZ;function yM(t){return t?"checked":"unchecked"}var xM=mM,iZ=gM;const wM=m.forwardRef(({className:t,...e},n)=>a.jsx(xM,{className:L("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:a.jsx(iZ,{className:L("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wM.displayName=xM.displayName;function oZ({room:t,players:e,currentPlayerId:n,isHost:r,categories:s,onStartGame:i,onRestartGame:o,onLeave:l}){const[c,u]=m.useState(""),[d,h]=m.useState(!1),[f,p]=m.useState(!1),w=e.find(v=>v.id===n),g=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[B("room"),": ",t.code]}),a.jsxs("p",{className:"text-white/60",children:[B("waitingPlayers")," (",e.length,"/10 ",B("people"),")"]})]}),a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(Ws,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),a.jsx("div",{className:"space-y-2",children:e.map(v=>a.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-white/5",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"flex-1",children:v.name}),v.is_host&&a.jsxs(au,{variant:"secondary",className:"bg-purple-500/20",children:[" ",B("host")]})]},v.id))})]})}),r&&a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(Ws,{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ft,{htmlFor:"category",className:"text-white/80",children:B("category")}),a.jsxs(XJ,{value:c,onValueChange:u,children:[a.jsx(cM,{id:"category",className:"bg-black/30 border-white/20 text-white",children:a.jsx(JJ,{})}),a.jsx(hM,{children:s.map(v=>a.jsx(fM,{value:v,children:v},v))})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ft,{htmlFor:"mr-white",className:"text-white/80",children:B("includeMrWhite")}),a.jsx(wM,{id:"mr-white",checked:d,onCheckedChange:v=>{console.log("Mr. White toggled:",v),h(v)}})]}),a.jsx(D,{onClick:()=>{console.log("Starting game with:",{selectedCategory:c,includeMrWhite:d}),i(c,d)},disabled:e.length<4,className:"w-full bg-purple-500 hover:bg-purple-600",children:e.length<4?B("needMinPlayers"):B("startGame")})]})})]}),y=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:B("seeYourWord")}),a.jsx("p",{className:"text-white/60",children:B("tapToReveal")})]}),a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsx(Ws,{className:"p-8",children:a.jsx("div",{className:"relative h-48 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 cursor-pointer select-none",onMouseDown:()=>p(!0),onMouseUp:()=>p(!1),onMouseLeave:()=>p(!1),onTouchStart:()=>p(!0),onTouchEnd:()=>p(!1),children:f?a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-sm text-white/80 mb-2",children:[B("yourWordIs"),":"]}),a.jsx("p",{className:"text-4xl font-bold",children:w==null?void 0:w.word}),a.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[B("role"),": ",w==null?void 0:w.role]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx(Ev,{className:"w-12 h-12 mb-2 mx-auto"}),a.jsx("p",{children:B("holdToSee")})]})})})}),a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(Ws,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(v=>a.jsxs("div",{className:"p-3 rounded bg-white/5 flex items-center gap-2",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/40"}),a.jsx("span",{className:"text-sm",children:v.name})]},v.id))})]})}),r&&a.jsxs(D,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:[" ",B("restartGame")]})]}),x=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"text-center",children:a.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[" ",B("gameOver"),"!"]})}),a.jsx(zs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:a.jsxs(Ws,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("finalResult"),":"]}),a.jsx("div",{className:"space-y-2",children:e.map(v=>a.jsx("div",{className:`p-3 rounded ${v.is_alive?"bg-green-900/20":"bg-red-900/20"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:`/king-s-cup-party/${v.avatar||1}.jpg`,alt:v.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-semibold",children:[v.name," ",v.is_alive?"":""]}),a.jsxs("div",{className:"text-sm text-white/60",children:[v.role," - ",v.word]})]})]})},v.id))})]})}),r&&a.jsx(D,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:B("restartGame")})]});return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 sm:p-6 relative",children:[a.jsx(LA,{active:t.game_phase==="FINISHED",duration:5e3}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),a.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center z-20",children:[a.jsxs(D,{variant:"ghost",onClick:l,className:"text-white/70 hover:text-white",children:[a.jsx(al,{className:"w-5 h-5 mr-2"}),B("leaveRoom")]}),a.jsx(Si,{currentRoomCode:t.code,currentGameType:"undercover",currentGameName:B("undercoverTitle")})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10",children:a.jsxs("div",{className:"w-full max-w-2xl",children:[t.game_phase==="WAITING"&&g(),(t.game_phase==="REVEAL_WORD"||t.game_phase==="DESCRIBE"||t.game_phase==="VOTING"||t.game_phase==="VOTE_RESULT")&&y(),t.game_phase==="FINISHED"&&x()]})})]})}const fo=[{id:"default",name:"",nameEn:"Classic",colors:{primary:"#8b5cf6",secondary:"#ec4899",accent:"#f59e0b",background:"rgba(0, 0, 0, 0.6)",cardBg:"rgba(0, 0, 0, 0.4)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.6)"},gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"neon",name:"",nameEn:"Neon",colors:{primary:"#00ff88",secondary:"#00d9ff",accent:"#ff00ff",background:"rgba(10, 10, 30, 0.8)",cardBg:"rgba(20, 20, 40, 0.6)",text:"#00ff88",textSecondary:"rgba(0, 255, 136, 0.6)"},gradient:"linear-gradient(135deg, #00ff88 0%, #00d9ff 50%, #ff00ff 100%)"},{id:"sunset",name:"",nameEn:"Sunset",colors:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#ff8c42",background:"rgba(20, 10, 30, 0.7)",cardBg:"rgba(40, 20, 40, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #ff6b6b 0%, #ff8c42 50%, #ffd93d 100%)"},{id:"ocean",name:"",nameEn:"Ocean",colors:{primary:"#0066ff",secondary:"#00ccff",accent:"#00ffcc",background:"rgba(0, 20, 40, 0.8)",cardBg:"rgba(0, 40, 80, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #0066ff 0%, #00ccff 50%, #00ffcc 100%)"},{id:"forest",name:"",nameEn:"Forest",colors:{primary:"#2d6a4f",secondary:"#52b788",accent:"#95d5b2",background:"rgba(20, 30, 20, 0.8)",cardBg:"rgba(30, 50, 30, 0.6)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #2d6a4f 0%, #52b788 50%, #95d5b2 100%)"},{id:"royal",name:"",nameEn:"Royal",colors:{primary:"#6d28d9",secondary:"#a855f7",accent:"#fbbf24",background:"rgba(20, 10, 40, 0.8)",cardBg:"rgba(40, 20, 60, 0.6)",text:"#fbbf24",textSecondary:"rgba(251, 191, 36, 0.7)"},gradient:"linear-gradient(135deg, #6d28d9 0%, #a855f7 50%, #fbbf24 100%)"},{id:"dark",name:"",nameEn:"Dark",colors:{primary:"#374151",secondary:"#6b7280",accent:"#9ca3af",background:"rgba(0, 0, 0, 0.9)",cardBg:"rgba(20, 20, 20, 0.8)",text:"#f3f4f6",textSecondary:"rgba(243, 244, 246, 0.6)"},gradient:"linear-gradient(135deg, #1f2937 0%, #374151 100%)"},{id:"candy",name:"",nameEn:"Candy",colors:{primary:"#ff69b4",secondary:"#ffd700",accent:"#00bfff",background:"rgba(255, 192, 203, 0.2)",cardBg:"rgba(255, 255, 255, 0.3)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.8)"},gradient:"linear-gradient(135deg, #ff69b4 0%, #ffd700 50%, #00bfff 100%)"}],pb="party-games-theme",bM="party-games-weather-mode";function Df(){return typeof window>"u"?!1:localStorage.getItem(bM)==="true"}function aZ(t){typeof window>"u"||(localStorage.setItem(bM,t.toString()),t&&Mf())}function lZ(t,e){return e?t===0?"sunset":t>=1&&t<=3?"neon":t>=45&&t<=48?"forest":t>=51&&t<=67?"ocean":t>=71&&t<=77?"candy":t>=80&&t<=82?"ocean":t>=85&&t<=86?"candy":t>=95&&t<=99?"royal":"neon":"dark"}async function Mf(){if(!(typeof window>"u"||!Df()))try{console.log(" Starting weather detection...");let t,e;const n=window.isSecureContext;n||console.log(" Not a secure context (HTTPS), using IP-based geolocation...");try{if(n&&navigator.geolocation){const d=await new Promise((h,f)=>{navigator.geolocation.getCurrentPosition(h,p=>{console.log(` GPS failed: ${p.message}, falling back to IP location`),f(p)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:3e5})});t=d.coords.latitude,e=d.coords.longitude,console.log(` GPS Location: ${t.toFixed(2)}, ${e.toFixed(2)}`)}else throw new Error("GPS not available")}catch{console.log(" Fetching location from IP address...");try{const h=await fetch("https://ipapi.co/json/");if(!h.ok)throw new Error("IP geolocation failed");const f=await h.json();t=f.latitude,e=f.longitude,console.log(` IP Location: ${t.toFixed(2)}, ${e.toFixed(2)} (${f.city}, ${f.country_name})`)}catch{console.log(" IP geolocation failed, using Bangkok as default"),t=13.7563,e=100.5018,console.log(" Default Location: Bangkok, Thailand")}}const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&current=weather_code,is_day&timezone=auto`);if(!r.ok){const d=await r.text();throw new Error(`Weather API failed: ${r.status} - ${d}`)}const s=await r.json(),i=s.current.weather_code,o=s.current.is_day===1,l=lZ(i,o);_c(l);const u={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Foggy",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",71:"Slight snow",73:"Moderate snow",75:"Heavy snow",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"}[i]||`Weather code ${i}`;return console.log(` Weather: ${u} (code ${i}), Time: ${o?"Day ":"Night "}, Theme: ${l}`),window.dispatchEvent(new CustomEvent("weatherupdated",{detail:{weather:u,description:u,isDay:o,theme:l}})),{success:!0,weather:u,theme:l}}catch(t){console.error(" Failed to get weather:",t),window.dispatchEvent(new CustomEvent("weathererror",{detail:{error:t instanceof Error?t.message:String(t)}}));const e=localStorage.getItem(pb);return _c(e||"default"),{success:!1,error:t}}}function rl(){if(typeof window>"u")return fo[0];const t=localStorage.getItem(pb);return fo.find(e=>e.id===t)||fo[0]}function _c(t){if(typeof window>"u")return;const e=fo.find(r=>r.id===t);if(!e){console.error(` Theme not found: ${t}`);return}console.log(` Applying theme: ${e.name} (${e.id})`),localStorage.setItem(pb,t);const n=document.documentElement;n.style.setProperty("--color-primary",e.colors.primary),n.style.setProperty("--color-secondary",e.colors.secondary),n.style.setProperty("--color-accent",e.colors.accent),n.style.setProperty("--color-background",e.colors.background),n.style.setProperty("--color-card-bg",e.colors.cardBg),n.style.setProperty("--color-text",e.colors.text),n.style.setProperty("--color-text-secondary",e.colors.textSecondary),n.style.setProperty("--gradient",e.gradient),console.log(` Dispatching themechange event for ${e.name}`),window.dispatchEvent(new CustomEvent("themechange",{detail:e})),console.log(` Theme ${e.name} applied successfully`)}function cZ(){if(!(typeof window>"u"))if(Df()){Mf();const t=setInterval(()=>{Df()?(console.log(" Auto-refreshing weather..."),Mf()):clearInterval(t)},10*60*1e3)}else{const t=rl();_c(t.id)}}function Vu(){const[t,e]=m.useState(rl());return m.useEffect(()=>{const n=s=>{console.log(` ThemedBackground: Received theme change to ${s.detail.name}`),e(s.detail)},r=()=>{console.log(" ThemedBackground: Weather updated, refreshing theme");const s=rl();console.log(` ThemedBackground: Applying theme ${s.name}`),e(s)};return window.addEventListener("themechange",n),window.addEventListener("weatherupdated",r),()=>{window.removeEventListener("themechange",n),window.removeEventListener("weatherupdated",r)}},[]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 transition-all duration-1000 ease-out",style:{background:t.gradient}}),t.backgroundImage&&a.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 transition-opacity duration-1000",style:{backgroundImage:t.backgroundImage}}),a.jsx("div",{className:"absolute inset-0 bg-black/30 transition-colors duration-1000"}),a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute w-96 h-96 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.primary,top:"10%",left:"10%",animationDelay:"0s",animationDuration:"8s"}}),a.jsx("div",{className:"absolute w-80 h-80 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.secondary,top:"60%",right:"10%",animationDelay:"2s",animationDuration:"10s"}}),a.jsx("div",{className:"absolute w-64 h-64 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.accent,bottom:"20%",left:"50%",animationDelay:"4s",animationDuration:"12s"}})]})]})}function uZ(){const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(!1),{toast:f}=bt();m.useEffect(()=>{n&&p()},[n]);const p=async()=>{let b=localStorage.getItem("anonymousUserId");b||(b=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",b));const{data:N,error:_}=await U.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(console.log("Paranoia questions loaded:",N,"Error:",_),_){console.error("Error loading questions:",_);return}const C=(N||[]).map(E=>({id:E.id,question:E.question,is_default:E.is_default??!1,created_by:E.created_by,created_at:E.created_at})),S=C.filter(E=>E.is_default===!0||!E.created_by||E.created_by===b);console.log(`User ${b}: Showing ${S.length} of ${C.length} questions`),e(S)},w=async()=>{if(!o.trim()){f({title:" ",variant:"destructive"});return}let b=localStorage.getItem("anonymousUserId");b||(b=`anon_${Math.random().toString(36).slice(2,11)}`,localStorage.setItem("anonymousUserId",b));const{error:N}=await U.from("paranoia_questions").insert({question:o.trim(),is_default:!1,created_by:b});if(N){console.error("Error adding question:",N),f({title:" ",variant:"destructive"});return}f({title:" !"}),l(""),p()},g=async()=>{if(!s||!o.trim())return;if(s.is_default){f({title:" ",variant:"destructive"});return}const{error:b}=await U.from("paranoia_questions").update({question:o.trim()}).eq("id",s.id);if(b){console.error("Error updating question:",b),f({title:" ",variant:"destructive"});return}f({title:" !"}),i(null),l(""),p()},y=async b=>{if(b.is_default){f({title:" ",variant:"destructive"});return}const{error:N}=await U.from("paranoia_questions").delete().eq("id",b.id);if(N){console.error("Error deleting question:",N),f({title:" ",variant:"destructive"});return}f({title:" !"}),p()},x=async()=>{h(!0);try{const b=await kX(5),{error:N}=await U.from("paranoia_questions").insert(b.map(_=>({question:_,is_default:!1})));if(N)throw N;f({title:"  5  AI !",description:""}),p()}catch(b){console.error("Error generating AI questions:",b),f({title:" ",variant:"destructive"})}finally{h(!1)}},v=t.filter(b=>b.question.toLowerCase().includes(c.toLowerCase()));return a.jsxs(Hr,{open:n,onOpenChange:r,children:[a.jsx(Ii,{asChild:!0,children:a.jsxs(D,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Oh,{className:"w-4 h-4"}),""]})}),a.jsxs(mr,{className:"sm:max-w-[600px] max-h-[90vh] z-[100]",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-2xl",children:" Paranoia"}),a.jsx(Gr,{className:"sr-only",children:"   Paranoia "})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(D,{onClick:x,disabled:d,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[a.jsx(Tr,{className:"w-4 h-4 mr-2"}),d?" AI...":"  AI (5 )"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ft,{htmlFor:"question",children:s?"":""}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(pe,{id:"question",value:o,onChange:b=>l(b.target.value),placeholder:" ?",onKeyDown:b=>{b.key==="Enter"&&(s?g():w())}}),s?a.jsxs(a.Fragment,{children:[a.jsx(D,{onClick:g,children:""}),a.jsx(D,{variant:"outline",onClick:()=>{i(null),l("")},children:""})]}):a.jsx(D,{onClick:w,children:a.jsx(xu,{className:"w-4 h-4"})})]})]}),a.jsx(pe,{placeholder:"...",value:c,onChange:b=>u(b.target.value)}),a.jsx(Pi,{className:"h-[500px] w-full pr-4",children:a.jsx("div",{className:"space-y-2 pb-4",children:v.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:c?"":" "}):v.map(b=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm",children:b.question}),b.is_default&&a.jsx("span",{className:"text-xs text-muted-foreground",children:"()"})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>{if(b.is_default){f({title:" ",variant:"destructive"});return}i(b),l(b.question)},disabled:b.is_default,children:a.jsx(Oh,{className:"w-4 h-4"})}),a.jsx(D,{size:"icon",variant:"ghost",onClick:()=>y(b),disabled:b.is_default,children:a.jsx(bo,{className:"w-4 h-4"})})]})]},b.id))})}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",v.length," "]})]})]})]})}function dZ({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=Wr(),[i,o]=m.useState("select"),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(null),[p,w]=m.useState(!1);m.useEffect(()=>{s&&!l&&c(s)},[s]);const g=async()=>{if(!l.trim())return;const v=await t(l.trim());v&&f(v)},y=async()=>{!l.trim()||!u.trim()||await e(u.trim(),l.trim())},x=()=>{h&&(navigator.clipboard.writeText(h),w(!0),setTimeout(()=>w(!1),2e3))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[a.jsx(Vu,{}),a.jsxs(D,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[a.jsx(al,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Paranoia"}),a.jsx("p",{className:"text-white/70",children:" / "})]}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(uZ,{})}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[i==="select"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(D,{onClick:()=>o("create"),className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[a.jsx(Vn,{className:"w-5 h-5 mr-2"}),""]}),a.jsx(D,{onClick:()=>o("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),i==="create"&&!h&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:l,onChange:v=>c(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsx(D,{onClick:g,disabled:r||!l.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),a.jsx(D,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]}),i==="create"&&h&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-white/80",children:":"}),a.jsx("div",{onClick:x,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:a.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:h})}),a.jsx(D,{onClick:x,variant:"outline",className:"border-white/30 text-white",children:p?a.jsxs(a.Fragment,{children:[a.jsx(oo,{className:"w-4 h-4 mr-2"})," !"]}):a.jsxs(a.Fragment,{children:[a.jsx(xo,{className:"w-4 h-4 mr-2"})," "]})}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),i==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:l,onChange:v=>c(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:u,onChange:v=>d(v.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),a.jsx(D,{onClick:y,disabled:r||!l.trim()||!u.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),a.jsx(D,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function hZ({gameState:t,myId:e,players:n,onSelectVictim:r,onRevealQuestion:s,onSkipQuestion:i,onNextRound:o}){const l=e===t.asker_id,c=e===t.victim_id,u=d=>{var h;return((h=n.find(f=>f.id===d))==null?void 0:h.name)||"Unknown"};return t.phase==="ASKING"&&l?a.jsxs(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-red-900 to-red-800 p-6 text-white text-center rounded-2xl shadow-2xl border border-red-700",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold mb-4",children:"! ()"}),a.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-black/40 p-4 rounded-xl mb-6 border border-red-500/50",children:a.jsxs("p",{className:"text-lg italic",children:['"',t.question,'"']})}),a.jsx("p",{className:"text-sm opacity-80 mb-4",children:":"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.filter(d=>d.id!==e).map((d,h)=>a.jsx(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*h},children:a.jsx(D,{onClick:()=>r(d.id),className:"w-full bg-red-700 hover:bg-red-600 text-white py-4",children:d.name})},d.id))})]}):t.phase==="ASKING"?a.jsxs(te.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10",children:[a.jsx(te.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"text-6xl mb-6",children:""}),a.jsxs("p",{className:"text-xl text-white",children:[a.jsx("span",{className:"font-bold text-yellow-400",children:u(t.asker_id)})," ","..."]}),a.jsx("p",{className:"text-sm text-white/60 mt-2",children:"..."})]}):t.phase==="REVEALING"?a.jsxs(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-br from-slate-800 to-slate-900 text-white rounded-2xl border border-slate-700",children:[a.jsxs("h2",{className:"text-lg mb-2",children:[a.jsx("span",{className:"text-red-400 font-bold",children:u(t.asker_id)})," ","..."]}),a.jsxs(te.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5,delay:.3},className:"text-4xl font-bold text-yellow-400 my-4",children:[" ",u(t.victim_id)]}),a.jsx(Im,{mode:"wait",children:t.is_revealed?a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white text-black p-6 rounded-xl",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"..."}),a.jsxs(te.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl font-bold",children:['"',t.question,'"']}),a.jsx(D,{onClick:o,className:"mt-6 bg-blue-600 hover:bg-blue-500",children:" "})]},"revealed"):a.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-6 space-y-4",children:c?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-lg",children:["?"," ",a.jsx("span",{className:"text-2xl",children:""})]}),a.jsx(D,{onClick:s,className:"w-full bg-pink-600 hover:bg-pink-500 py-6 text-xl font-bold",children:" "}),a.jsx(D,{onClick:i,variant:"ghost",className:"w-full text-white/60 hover:text-white",children:" "})]}):a.jsxs("p",{className:"text-white/70",children:[""," ",a.jsx("span",{className:"text-yellow-400",children:u(t.victim_id)})," ","..."]})},"unrevealed")})]}):a.jsx("div",{className:"text-white text-center",children:"Loading..."})}function fZ({room:t,players:e,currentPlayerId:n,isHost:r,totalQuestions:s,onStartGame:i,onStartRound:o,onSelectVictim:l,onRevealQuestion:c,onSkipQuestion:u,onLeave:d}){var w;const h=t.game_state,f=((w=h==null?void 0:h.used_question_ids)==null?void 0:w.length)||0,p=s-f;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[a.jsx(Vu,{}),a.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[a.jsxs(D,{variant:"ghost",size:"sm",onClick:d,className:"text-white hover:bg-white/10",children:[a.jsx(al,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs("div",{className:"text-white text-center",children:[a.jsx("p",{className:"text-sm opacity-70",children:""}),a.jsx("p",{className:"font-mono font-bold",children:t.code}),t.game_started&&s>0&&a.jsxs("div",{className:"mt-1 text-xs opacity-80 flex items-center gap-1 justify-center",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[p>0?p:s," /"," ",s," "]}),p===0&&a.jsx("span",{className:"text-yellow-300",children:""})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Si,{currentRoomCode:t.code,currentGameType:"paranoia",currentGameName:"Paranoia"}),a.jsxs("div",{className:"flex items-center gap-1 text-white",children:[a.jsx(Vn,{className:"w-4 h-4"}),a.jsx("span",{children:e.length})]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?h?a.jsx("div",{className:"w-full max-w-sm",children:a.jsx(hZ,{gameState:h,myId:n||"",players:e,onSelectVictim:l,onRevealQuestion:c,onSkipQuestion:u,onNextRound:o})}):a.jsxs("div",{className:"text-white text-center",children:[a.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),a.jsx("p",{children:"..."})]}):a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-20",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Paranoia"}),a.jsx("p",{className:"text-white/70",children:"..."})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),a.jsx("div",{className:"space-y-2",children:e.map((g,y)=>a.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.1},className:"flex items-center gap-2 text-white",children:[a.jsx("span",{className:"text-lg",children:g.is_host?"":""}),a.jsx("span",{children:g.name}),g.id===n&&a.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},g.id))})]}),r&&e.length>=3&&a.jsx(te.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},children:a.jsxs(D,{onClick:i,className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg relative z-30",children:[a.jsx(yu,{className:"w-5 h-5 mr-2"}),""]})}),r&&e.length<3&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" 3 "}),!r&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}var gb="Radio",[mZ,_M]=un(gb),[pZ,gZ]=mZ(gb),CM=m.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=t,[h,f]=m.useState(null),p=ge(e,y=>f(y)),w=m.useRef(!1),g=h?u||!!h.closest("form"):!0;return a.jsxs(pZ,{scope:n,checked:s,disabled:o,children:[a.jsx(ne.button,{type:"button",role:"radio","aria-checked":s,"data-state":kM(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:p,onClick:ee(t.onClick,y=>{s||c==null||c(),g&&(w.current=y.isPropagationStopped(),w.current||y.stopPropagation())})}),g&&a.jsx(EM,{control:h,bubbles:!w.current,name:r,value:l,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});CM.displayName=gb;var NM="RadioIndicator",SM=m.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=gZ(NM,n);return a.jsx(Sn,{present:r||i.checked,children:a.jsx(ne.span,{"data-state":kM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});SM.displayName=NM;var vZ="RadioBubbleInput",EM=m.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),l=ge(o,i),c=fb(n),u=f0(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const w=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(w)}},[c,n,r]),a.jsx(ne.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});EM.displayName=vZ;function kM(t){return t?"checked":"unchecked"}var yZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ep="RadioGroup",[xZ,eee]=un(ep,[Hm,_M]),TM=Hm(),jM=_M(),[wZ,bZ]=xZ(ep),RM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,p=TM(n),w=Cl(u),[g,y]=ur({prop:i,defaultProp:s??null,onChange:h,caller:ep});return a.jsx(wZ,{scope:n,name:r,required:o,disabled:l,value:g,onValueChange:y,children:a.jsx(HA,{asChild:!0,...p,orientation:c,dir:w,loop:d,children:a.jsx(ne.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:w,...f,ref:e})})})});RM.displayName=ep;var IM="RadioGroupItem",PM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=bZ(IM,n),o=i.disabled||r,l=TM(n),c=jM(n),u=m.useRef(null),d=ge(e,u),h=i.value===s.value,f=m.useRef(!1);return m.useEffect(()=>{const p=g=>{yZ.includes(g.key)&&(f.current=!0)},w=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",w)}},[]),a.jsx(GA,{asChild:!0,...l,focusable:!o,active:h,children:a.jsx(CM,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:d,onCheck:()=>i.onValueChange(s.value),onKeyDown:ee(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ee(s.onFocus,()=>{var p;f.current&&((p=u.current)==null||p.click())})})})});PM.displayName=IM;var _Z="RadioGroupIndicator",AM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=jM(n);return a.jsx(SM,{...s,...r,ref:e})});AM.displayName=_Z;var DM=RM,MM=PM,CZ=AM;const OM=m.forwardRef(({className:t,...e},n)=>a.jsx(DM,{className:L("grid gap-2",t),...e,ref:n}));OM.displayName=DM.displayName;const LM=m.forwardRef(({className:t,...e},n)=>a.jsx(MM,{ref:n,className:L("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(CZ,{className:"flex items-center justify-center",children:a.jsx(v5,{className:"h-2.5 w-2.5 fill-current text-current"})})}));LM.displayName=MM.displayName;function NZ({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const{displayName:s}=Wr(),[i,o]=m.useState("select"),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(null),[p,w]=m.useState(!1),[g,y]=m.useState(5);m.useEffect(()=>{s&&!l&&c(s)},[s]);const x=async()=>{if(!l.trim())return;const N=await t(l.trim(),g);N&&f(N)},v=async()=>{!l.trim()||!u.trim()||await e(u.trim(),l.trim())},b=()=>{h&&(navigator.clipboard.writeText(h),w(!0),setTimeout(()=>w(!1),2e3))};return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[a.jsx(Vu,{}),a.jsxs(D,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[a.jsx(al,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"5 Second Rule"}),a.jsx("p",{className:"text-white/70",children:" 3 ...  5 !"})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[i==="select"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs(D,{onClick:()=>o("create"),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[a.jsx(Vn,{className:"w-5 h-5 mr-2"}),""]}),a.jsx(D,{onClick:()=>o("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),i==="create"&&!h&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:l,onChange:N=>c(N.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-white/80 text-sm mb-3 block flex items-center gap-2",children:[a.jsx(y5,{className:"w-4 h-4"}),""]}),a.jsx(OM,{value:g.toString(),onValueChange:N=>y(Number(N)),children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5,10,15,20].map(N=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(LM,{value:N.toString(),id:`time-${N}`,className:"border-white/40"}),a.jsxs(Ft,{htmlFor:`time-${N}`,className:"text-white cursor-pointer",children:[N," "]})]},N))})})]}),a.jsx(D,{onClick:x,disabled:r||!l.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),a.jsx(D,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]}),i==="create"&&h&&a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("p",{className:"text-white/80",children:":"}),a.jsx("div",{onClick:b,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:a.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:h})}),a.jsx(D,{onClick:b,variant:"outline",className:"border-white/30 text-white",children:p?a.jsxs(a.Fragment,{children:[a.jsx(oo,{className:"w-4 h-4 mr-2"})," !"]}):a.jsxs(a.Fragment,{children:[a.jsx(xo,{className:"w-4 h-4 mr-2"})," "]})}),a.jsx("p",{className:"text-white/60 text-sm",children:""})]}),i==="join"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:l,onChange:N=>c(N.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),a.jsx(pe,{value:u,onChange:N=>d(N.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),a.jsx(D,{onClick:v,disabled:r||!l.trim()||!u.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),a.jsx(D,{variant:"ghost",onClick:()=>o("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function SZ({gameState:t,myId:e,players:n,onFinishAnswering:r,onVote:s,onNextRound:i}){const o=t.timeLimit||5,[l,c]=m.useState(o),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=n.find(_=>_.id===t.player_id),w=e===t.player_id,g=Object.keys(t.votes||{}).includes(e),y=Object.values(t.votes||{}).length,x=Object.values(t.votes||{}).filter(Boolean).length,v=y-x,b=n.filter(_=>_.id!==t.player_id).length;m.useEffect(()=>{if(t.phase!=="PLAYING")return;const _=setInterval(()=>{const C=Date.now(),E=(new Date(t.end_time).getTime()-C)/1e3;E<=0?(c(0),d(!0),clearInterval(_)):c(E)},100);return()=>clearInterval(_)},[t.end_time,t.phase]),m.useEffect(()=>{t.phase==="PLAYING"&&(d(!1),c(t.timeLimit||5),f(!1))},[t.player_id,t.phase,t.timeLimit]),m.useEffect(()=>{console.log("FiveSecGame state:",{phase:t.phase,player_id:t.player_id,isMe:w,hasVoted:g,voteCount:y,totalVoters:b})},[t.phase,t.player_id,w,g,y,b]);const N=()=>w?l<=1?"from-red-600 to-red-800":l<=2?"from-orange-500 to-red-600":l<=3?"from-yellow-500 to-orange-500":"from-orange-500 to-yellow-600":l<=1?"from-red-600 to-pink-800":l<=2?"from-purple-500 to-red-600":l<=3?"from-indigo-500 to-purple-500":"from-blue-500 to-indigo-700";return t.phase==="PLAYING"?a.jsxs(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-6 text-center rounded-2xl text-white bg-gradient-to-br ${N()} transition-colors duration-300 shadow-2xl`,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("span",{className:"text-sm opacity-80",children:":"}),a.jsx("h2",{className:"text-2xl font-bold",children:p==null?void 0:p.name})]}),a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white text-black p-6 rounded-xl shadow-lg my-6",children:[a.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:" 3 ..."}),a.jsx("h1",{className:"text-xl md:text-2xl font-extrabold",children:t.topic})]}),a.jsx(te.div,{animate:{scale:l<=2?[1,1.05,1]:1},transition:{repeat:l<=2?1/0:0,duration:.5},className:"relative w-32 h-32 mx-auto flex items-center justify-center border-4 border-white rounded-full bg-black/30",children:a.jsx("span",{className:"text-5xl font-mono font-bold",children:l>0?l.toFixed(1):""})}),w&&a.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:a.jsx(D,{onClick:r,className:"mt-6 w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 text-xl shadow-lg",children:l>0?" !":" "})}),!w&&a.jsxs("p",{className:"mt-4 text-sm opacity-80",children:[" ",p==null?void 0:p.name," ",l>0?"":"","..."]})]}):t.phase==="JUDGING"?a.jsxs(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 text-center rounded-2xl bg-gradient-to-br from-purple-800 to-indigo-900 text-white shadow-2xl",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"!"}),a.jsxs("p",{className:"text-lg mb-4",children:[a.jsx("span",{className:"text-yellow-400 font-bold",children:p==null?void 0:p.name})," ",""]}),a.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-6",children:[a.jsx("p",{className:"text-sm opacity-80",children:":"}),a.jsx("p",{className:"text-lg font-bold",children:t.topic})]}),a.jsx(Im,{mode:"wait",children:!w&&!g&&a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsx(D,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-500 py-6 text-xl font-bold",children:" "}),a.jsx(D,{onClick:()=>s(!1),className:"bg-red-600 hover:bg-red-500 py-6 text-xl font-bold",children:" "})]})}),g&&!w&&a.jsx("p",{className:"text-green-400 mb-4",children:" "}),w&&a.jsx("p",{className:"text-yellow-400 mb-4",children:"..."}),a.jsxs("div",{className:"bg-black/30 rounded-xl p-4 mb-6",children:[a.jsxs("p",{className:"text-sm opacity-80 mb-2",children:[": ",y,"/",b]}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs("span",{className:"text-green-400 text-lg",children:[" ",x]}),a.jsxs("span",{className:"text-red-400 text-lg",children:[" ",v]})]})]}),y>=b&&a.jsxs(te.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[a.jsx("div",{className:"text-2xl font-bold mb-4",children:x>v?a.jsx("span",{className:"text-green-400",children:" !"}):a.jsx("span",{className:"text-red-400",children:" !"})}),a.jsx(D,{onClick:i,className:"bg-blue-600 hover:bg-blue-500 px-8",children:" "})]})]}):a.jsx("div",{className:"text-white text-center",children:"Loading..."})}function EZ({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onFinishAnswering:o,onVote:l,onLeave:c}){const u=t.game_state;return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[a.jsx(Vu,{}),a.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[a.jsxs(D,{variant:"ghost",size:"sm",onClick:c,className:"text-white hover:bg-white/10",children:[a.jsx(al,{className:"w-4 h-4 mr-2"}),""]}),a.jsxs("div",{className:"text-white text-center",children:[a.jsx("p",{className:"text-sm opacity-70",children:""}),a.jsx("p",{className:"font-mono font-bold",children:t.code})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Si,{currentRoomCode:t.code,currentGameType:"5-sec",currentGameName:"5 Second Rule"}),a.jsxs("div",{className:"flex items-center gap-1 text-white",children:[a.jsx(Vn,{className:"w-4 h-4"}),a.jsx("span",{children:e.length})]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?u?a.jsx("div",{className:"w-full max-w-sm",children:a.jsx(SZ,{gameState:u,myId:n||"",players:e,onFinishAnswering:o,onVote:l,onNextRound:i})}):a.jsxs("div",{className:"text-white text-center",children:[a.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),a.jsx("p",{children:"..."})]}):a.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"5 Second Rule"}),a.jsx("p",{className:"text-white/70",children:"..."}),(u==null?void 0:u.timeLimit)&&a.jsxs("p",{className:"text-yellow-400 text-sm mt-2",children:[" : ",u.timeLimit," "]})]}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),a.jsx("div",{className:"space-y-2",children:e.map((d,h)=>a.jsxs(te.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:"flex items-center gap-2 text-white",children:[a.jsx("span",{className:"text-lg",children:d.is_host?"":""}),a.jsx("span",{children:d.name}),d.id===n&&a.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},d.id))})]}),r&&e.length>=2&&a.jsxs(D,{onClick:s,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[a.jsx(yu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<2&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" 2 "}),!r&&a.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}function kZ(){const[t,e]=m.useState(Rf());m.useEffect(()=>{e(Rf())},[]);const n=()=>{const r=t==="th"?"en":"th";yX(r),e(r),window.location.reload()};return a.jsxs(D,{variant:"outline",size:"sm",onClick:n,className:"bg-black/40 backdrop-blur-md border-white/20 text-white hover:bg-black/60",children:[a.jsx(w5,{className:"w-4 h-4 mr-2"}),t==="th"?"TH":"EN"]})}function TZ(){const[t,e]=m.useState(rl()),[n,r]=m.useState(!1),[s,i]=m.useState(Df()),[o,l]=m.useState(""),[c,u]=m.useState(!1),d=Rf();m.useEffect(()=>{const p=y=>{e(y.detail)},w=y=>{const{weather:x,description:v,isDay:b,theme:N}=y.detail;l(`${x} (${v}) - ${b?"Day":"Night"}  ${N}`),u(!1)},g=y=>{l(`Error: ${y.detail.error}`),u(!1)};return window.addEventListener("themechange",p),window.addEventListener("weatherupdated",w),window.addEventListener("weathererror",g),()=>{window.removeEventListener("themechange",p),window.removeEventListener("weatherupdated",w),window.removeEventListener("weathererror",g)}},[]);const h=p=>{_c(p),e(fo.find(w=>w.id===p)||fo[0])},f=async()=>{const p=!s;i(p),aZ(p),p?(u(!0),l("..."),await Mf(),e(rl())):(l(""),u(!1))};return a.jsxs(Hr,{open:n,onOpenChange:r,children:[a.jsx(Ii,{asChild:!0,children:a.jsx(D,{variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-110",title:B("themeChange"),children:a.jsx(_5,{className:"h-5 w-5"})})}),a.jsxs(mr,{className:"sm:max-w-[600px] bg-black/90 backdrop-blur-xl border-white/20",children:[a.jsxs(pr,{children:[a.jsx(gr,{className:"text-2xl font-bold text-white",children:B("themeSelectTheme")}),a.jsx(Gr,{className:"sr-only",children:""})]}),a.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-400/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(x5,{className:"h-6 w-6 text-cyan-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:d==="th"?"":"Weather Mode"}),a.jsx("p",{className:"text-xs text-white/60",children:d==="th"?"":"Auto-change theme based on real weather"}),o&&a.jsxs("p",{className:"text-xs text-cyan-300 mt-1 font-mono",children:[c?" ":o.includes("Error")?" ":" ",o]})]})]}),a.jsx("button",{onClick:f,disabled:c,className:`
                relative w-14 h-7 rounded-full transition-all duration-300
                ${s?"bg-cyan-500":"bg-gray-600"}
                ${c?"opacity-50 cursor-not-allowed":""}
              `,children:a.jsx("div",{className:`
                  absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform duration-300
                  ${s?"translate-x-7":"translate-x-0"}
                `})})]})}),a.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:fo.map(p=>a.jsx("button",{onClick:()=>{h(p.id),r(!1)},className:`
                relative p-4 rounded-lg border-2 transition-all duration-300 hover:scale-105
                ${t.id===p.id?"border-white shadow-xl scale-105":"border-white/20 hover:border-white/40"}
              `,style:{background:p.gradient},children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.primary}}),a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.secondary}}),a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:p.colors.accent}})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"font-bold text-white text-lg",children:d==="th"?p.name:p.nameEn})}),t.id===p.id&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:a.jsx("span",{className:"text-black text-sm",children:""})})})]})},p.id))})]})]})}function jZ({onNavigate:t,currentSection:e="home"}){const{userId:n,displayName:r,logout:s}=Wr(),[i,o]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[h,f]=m.useState("home"),p=[{id:"games",icon:kv,label:"Games"},{id:"profile",icon:jv,label:"Profile"},{id:"friends",icon:Vn,label:"Friends"},{id:"settings",icon:wu,label:"Settings"}],w=g=>{if(f(g),g==="friends")o(!0);else if(g==="home")window.scrollTo({top:0,behavior:"smooth"});else if(g==="games"){const y=document.getElementById("games-section");y==null||y.scrollIntoView({behavior:"smooth"})}else g==="profile"?c(!0):g==="settings"?d(!0):t==null||t(g)};return a.jsxs(a.Fragment,{children:[a.jsxs(te.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},className:"hidden md:flex fixed left-0 top-0 h-screen w-20 bg-black/40 backdrop-blur-xl border-r border-white/10 flex-col items-center py-6 z-40",children:[a.jsx(te.div,{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center mb-8 shadow-lg shadow-cyan-500/50 cursor-pointer",whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},onClick:()=>{f("home"),window.scrollTo({top:0,behavior:"smooth"})},title:"Home",children:a.jsx(wo,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"flex-1 flex flex-col gap-4",children:p.map(g=>{const y=g.icon,x=h===g.id;return a.jsxs(te.button,{onClick:()=>w(g.id),className:`relative w-12 h-12 rounded-xl flex items-center justify-center transition-all ${x?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg shadow-cyan-500/50":"bg-white/5 hover:bg-white/10"}`,whileHover:{scale:1.1},whileTap:{scale:.95},title:g.label,children:[a.jsx(y,{className:`w-5 h-5 ${x?"text-white":"text-white/60"}`}),x&&a.jsx(te.div,{layoutId:"activeIndicator",className:"absolute -right-1 w-1 h-8 bg-cyan-400 rounded-full"})]},g.id)})}),a.jsx("div",{className:"flex flex-col gap-4 mt-auto",children:n?a.jsxs(a.Fragment,{children:[a.jsx(te.button,{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-white shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.95},title:r||"User",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),a.jsx(te.button,{onClick:s,className:"w-12 h-12 rounded-xl bg-white/5 hover:bg-red-500/20 flex items-center justify-center transition-all",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Logout",children:a.jsx(vu,{className:"w-5 h-5 text-red-400"})})]}):a.jsx("div",{className:"w-12",children:a.jsx(Si,{})})})]}),i&&a.jsx(OA,{onClose:()=>o(!1)}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>c(!1),children:a.jsxs(te.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:g=>g.stopPropagation(),className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-8 max-w-md w-full border border-white/10",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:""}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold text-white text-3xl",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium text-lg",children:r||"Guest"}),a.jsx("p",{className:"text-zinc-400 text-sm",children:n?"Logged In":"Guest User"})]})]}),a.jsx("button",{onClick:()=>c(!1),className:"w-full py-2 px-4 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-all",children:""})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>d(!1),children:a.jsxs(te.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:g=>g.stopPropagation(),className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-8 max-w-md w-full border border-white/10",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 text-white",children:""}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:""}),a.jsx("span",{className:"text-zinc-400",children:"Auto"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:""}),a.jsx("span",{className:"text-zinc-400",children:""})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:""}),a.jsx("span",{className:"text-zinc-400",children:""})]}),a.jsx("button",{onClick:()=>d(!1),className:"w-full py-2 px-4 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-all",children:""})]})]})}),a.jsx(te.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},className:"md:hidden fixed bottom-0 left-0 right-0 bg-black/60 backdrop-blur-xl border-t border-white/10 z-40 pb-safe",children:a.jsxs("div",{className:"flex justify-around items-center px-4 py-3",children:[a.jsxs(te.button,{onClick:()=>{f("home"),window.scrollTo({top:0,behavior:"smooth"})},className:`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all ${h==="home"?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:[a.jsx(wo,{className:`w-5 h-5 ${h==="home"?"text-white":"text-zinc-400"}`}),a.jsx("span",{className:`text-xs ${h==="home"?"text-white":"text-zinc-400"}`,children:"Home"})]}),p.filter(g=>g.id!=="profile").map(g=>{const y=g.icon,x=h===g.id;return a.jsxs(te.button,{onClick:()=>w(g.id),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all ${x?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:[a.jsx(y,{className:`w-5 h-5 ${x?"text-white":"text-zinc-400"}`}),a.jsx("span",{className:`text-xs ${x?"text-white":"text-zinc-400"}`,children:g.label})]},g.id)}),a.jsx(te.button,{onClick:()=>{if(n)c(!0),f("profile");else{const g=document.querySelector("[data-login-button]");g&&g.click()}},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-xl transition-all ${h==="profile"&&n?"bg-gradient-to-br from-cyan-500 to-blue-600 shadow-lg":"bg-transparent"}`,whileTap:{scale:.95},children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-[10px] font-bold",children:(r==null?void 0:r.charAt(0).toUpperCase())||"?"}),a.jsx("span",{className:"text-xs text-zinc-400",children:(r==null?void 0:r.substring(0,6))||"Profile"})]}):a.jsxs(a.Fragment,{children:[a.jsx(jv,{className:"w-5 h-5 text-zinc-400"}),a.jsx("span",{className:"text-xs text-zinc-400",children:""})]})})]})})]})}function RZ({title:t,description:e,coverUrl:n,iconUrl:r,emoji:s,gradient:i="from-cyan-500 to-blue-600"}){const[o,l]=m.useState(rl());return m.useEffect(()=>{const c=u=>{l(u.detail)};return window.addEventListener("themechange",c),()=>{window.removeEventListener("themechange",c)}},[]),a.jsxs("div",{className:"relative h-screen w-full overflow-hidden",children:[a.jsx(te.div,{className:"absolute inset-0 bg-cover bg-center",style:n?{backgroundImage:`url(${n})`,filter:"brightness(0.6)"}:void 0,initial:{scale:1.1},animate:{scale:1},transition:{duration:20,repeat:1/0,repeatType:"reverse"}}),!n&&a.jsx("div",{className:"absolute inset-0 opacity-70",style:{background:o.gradient}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/50 to-black"}),a.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center px-4 md:px-8",children:[a.jsxs(te.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.2},className:"flex flex-col md:flex-row items-center gap-3 md:gap-4 mb-4 md:mb-8",children:[a.jsx("div",{className:"w-20 h-20 md:w-16 md:h-16 rounded-2xl flex items-center justify-center text-3xl md:text-4xl shadow-lg shadow-black/30",style:{background:o.gradient},children:r?a.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover rounded-2xl"}):s||a.jsx(wo,{className:"w-8 h-8 md:w-10 md:h-10 text-white"})}),a.jsx("h1",{className:"text-4xl md:text-7xl font-bold drop-shadow-[0_0_30px_rgba(255,255,255,0.5)] text-center md:text-left",style:{color:o.colors.text},children:t})]}),a.jsxs(te.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.4},className:"text-center mb-12",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",style:{background:o.gradient,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"ULTIMATE PARTY EXPERIENCE"}),a.jsx("p",{className:"text-xl max-w-2xl",style:{color:o.colors.textSecondary},children:e})]}),a.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"flex gap-8 flex-wrap justify-center",children:[].map((c,u)=>a.jsxs(te.div,{className:"flex items-center gap-3 px-6 py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20",whileHover:{scale:1.05,backgroundColor:"rgba(255,255,255,0.15)"},children:[a.jsx("span",{className:"text-2xl",children:c.icon}),a.jsx("span",{className:"text-white font-medium",children:c.text})]},u))}),a.jsxs(te.button,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.8},className:"mt-12 px-12 py-4 rounded-full font-bold text-lg shadow-lg transition-all flex items-center gap-3",style:{background:o.gradient,color:o.colors.text,boxShadow:`0 10px 40px ${o.colors.primary}50`},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var c;(c=document.getElementById("games-section"))==null||c.scrollIntoView({behavior:"smooth"})},children:[a.jsx(Tr,{className:"w-6 h-6"}),"Start Playing"]}),a.jsx(te.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},children:a.jsx("div",{className:"w-6 h-10 border-2 rounded-full flex justify-center pt-2",style:{borderColor:`${o.colors.text}30`},children:a.jsx(te.div,{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:o.colors.text},animate:{y:[0,12,0]},transition:{duration:1.5,repeat:1/0}})})})]})]})}const IZ=()=>{var Nb,Sb,Eb;const{user:t,displayName:e}=Wr(),[n,r]=m.useState("select"),[s,i]=m.useState([]),[o,l]=m.useState(!1),[c,u]=m.useState(!0),{sessionData:d,hasSession:h,saveSession:f,clearSession:p}=AY(),[w,g]=m.useState(!1),[y,x]=m.useState({}),[v,b]=m.useState({}),[N,_]=m.useState({}),[C,S]=m.useState(!1),E=!!t&&e==="bonne",k=E,{room:T,players:R,currentPlayerId:I,isLoading:F,createRoom:P,joinRoom:V,startGame:$,drawCard:z,reshuffleDeck:A,leaveRoom:M,quickStart:j}=pY(),{room:W,players:K,currentPlayerId:re,isLoading:ae,createRoom:Te,joinRoom:Re,startGame:Q,drawCard:_e,standCard:Ae,dealerDraw:be,dealerStand:G,showdown:fe,nextRound:Ue,leaveRoom:Pt,quickStart:Kr,setDealer:yr}=xY(),{room:En,players:Ss,currentPlayerId:Yr,isLoading:Uu,categories:Mi,createRoom:Sl,joinRoom:zn,startGame:tp,startDescribePhase:vb,nextTurn:fn,startVoting:Oi,votePlayer:yb,checkResultAndContinue:xb,restartGame:Lo,leaveRoom:Bu}=RY(),{room:Li,players:Fo,currentPlayerId:Qr,isLoading:zu,questions:Es,createRoom:Wu,joinRoom:El,startGame:Hu,startRound:Gu,selectVictim:np,revealQuestion:kl,skipQuestion:xr,leaveRoom:qu}=IY(),{room:ie,players:Ee,currentPlayerId:De,isLoading:mn,createRoom:Zt,joinRoom:kn,startGame:Xr,startRound:pn,finishAnswering:wr,vote:FM,leaveRoom:wb}=PY(),rp=R.find(X=>X.id===I),$M=(rp==null?void 0:rp.is_host)??!1,sp=K.find(X=>X.id===re),VM=(sp==null?void 0:sp.is_host)??!1,[Bt,ip]=m.useState(0),gt=T?{code:T.code,type:"kingscup",name:B("kingsCup")}:W?{code:W.code,type:"pokdeng",name:B("pokDeng")}:En?{code:En.code,type:"undercover",name:B("undercoverTitle")}:Li?{code:Li.code,type:"paranoia",name:"Paranoia"}:ie?{code:ie.code,type:"5-sec",name:"5 Second Rule"}:null,nt=(()=>{const J=[{id:"kingscup",emoji:"",name:B("kingsCup"),desc:B("kingsCupDesc"),gradient:"from-red-500 to-orange-500",bgColor:"#ef4444"},{id:"pokdeng",emoji:"",name:B("pokDeng"),desc:B("pokDengDesc"),gradient:"from-emerald-500 to-green-600",bgColor:"#10b981"},{id:"undercover",emoji:"",name:B("undercoverTitle"),desc:B("undercoverDesc"),gradient:"from-purple-600 to-indigo-600",bgColor:"#9333ea"},{id:"paranoia",emoji:"",name:"Paranoia",desc:" - ",gradient:"from-pink-500 to-rose-600",bgColor:"#ec4899"},{id:"5-sec",emoji:"",name:"5 Second Rule",desc:" 5  - ",gradient:"from-yellow-400 to-orange-500",bgColor:"#f59e0b"},{id:"texas-holdem",emoji:"",name:"Texas Hold'em",desc:" - ",gradient:"from-blue-600 to-cyan-600",bgColor:"#2563eb",externalLink:"https://pongporn1.github.io/texas-hold-em-power/#/auth"}].map(ke=>{const _t=N[ke.id],UM=v[ke.id];return{...ke,emoji:(_t==null?void 0:_t.emoji)??ke.emoji,name:(_t==null?void 0:_t.title)||ke.name,gradient:(_t==null?void 0:_t.gradient)||ke.gradient,iconUrl:UM}}),le=new Set;return J.filter(ke=>le.has(ke.id)?(console.warn(` Duplicate game ID detected: ${ke.id}`),!1):(le.add(ke.id),!0))})(),bb=m.useCallback(()=>{ip(X=>(X+1)%nt.length)},[nt.length]),_b=m.useCallback(()=>{ip(X=>(X-1+nt.length)%nt.length)},[nt.length]);m.useEffect(()=>{(async()=>{if(!h||!d.roomCode||!d.gameType||!d.playerName){u(!1);return}console.log("Attempting session recovery:",d);try{const J=d.gameType,le=d.roomCode,Ge=e||d.playerName,ke=d.playerId;(J==="doraemon"||J==="pokdeng"||J==="undercover"||J==="paranoia"||J==="5-sec")&&r(J);let _t=!1;switch(J){case"kingscup":_t=await V(le,Ge,ke);break;case"pokdeng":_t=await Re(le,Ge,ke);break;case"undercover":_t=await zn(le,Ge,ke);break;case"paranoia":_t=await El(le,Ge,ke);break;case"5-sec":_t=await kn(le,Ge,ke);break}_t?console.log("Session recovery successful!"):(console.log("Session recovery failed, clearing session"),p(),r("select"))}catch(J){console.error("Session recovery error:",J),p(),r("select")}finally{u(!1)}})()},[h]);const Tl=m.useCallback(async(X,J)=>{let le;switch(J){case"kingscup":le=await P(X);break;case"pokdeng":le=await Te(X);break;case"undercover":le=await Sl(X);break;case"paranoia":le=await Wu(X);break;case"5-sec":le=await Zt(X);break}if(le){const Ge=typeof le=="string"?le:le.code||le.code,ke=typeof le=="object"&&le!==null&&"playerId"in le?le.playerId:void 0;f({playerName:X,roomCode:Ge,gameType:J,playerId:ke})}return le},[P,Te,Sl,Wu,Zt,f]),Fi=m.useCallback(async(X,J,le)=>{let Ge=null;switch(le){case"kingscup":Ge=await V(X,J);break;case"pokdeng":Ge=await Re(X,J);break;case"undercover":Ge=await zn(X,J);break;case"paranoia":Ge=await El(X,J);break;case"5-sec":Ge=await kn(X,J);break}if(Ge){const ke=typeof Ge=="object"&&Ge!==null&&"playerId"in Ge?Ge.playerId:void 0;f({playerName:J,roomCode:X.toUpperCase(),gameType:le,playerId:ke})}return!!Ge},[V,Re,zn,El,kn,f]),Cb=m.useCallback(async(X,J)=>{const le=e||localStorage.getItem("playerName")||`Player_${Math.random().toString(36).slice(2,6)}`,ke={kingscup:"kingscup",doraemon:"kingscup",pokdeng:"pokdeng",undercover:"undercover",paranoia:"paranoia","5-sec":"5-sec"}[J]||"kingscup";r(ke),await Fi(X,le,ke)||r("select")},[Fi,e]),jl=m.useCallback(X=>{switch(p(),X){case"kingscup":M();break;case"pokdeng":Pt();break;case"undercover":Bu();break;case"paranoia":qu();break;case"5-sec":wb();break}r("select")},[p,M,Pt,Bu,qu,wb]);if(m.useEffect(()=>{const X=async()=>{const ke=await Um();i(ke)},J=async()=>{const ke=await zy();x(ke)},le=async()=>{const ke=await Wy();b(ke)},Ge=async()=>{const ke=await Hy();_(ke)};X(),J(),le(),Ge()},[n,w]),m.useEffect(()=>{const X=t!=null&&t.uid?localStorage.getItem("admin_unlock_code"):null;if(X&&(t!=null&&t.uid)&&X==="1"+t.uid){S(!0);return}E&&(t!=null&&t.uid)&&(localStorage.setItem("admin_unlock_code","1"+t.uid),S(!0))},[t==null?void 0:t.uid,e,E]),m.useEffect(()=>{if(n!=="select")return;const X=J=>{if(J.key==="ArrowRight"&&bb(),J.key==="ArrowLeft"&&_b(),J.key==="Enter"){const le=nt[Bt];r(le.id)}};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[n,Bt,bb,_b,nt]),c)return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-zinc-900 flex flex-col items-center justify-center gap-4",children:[a.jsx(mt,{className:"w-12 h-12 animate-spin text-cyan-400"}),a.jsx("p",{className:"text-white text-xl font-medium",children:"..."}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Recovering session..."})]});if(n==="select")return a.jsxs("div",{className:"min-h-screen min-h-[100dvh] relative overflow-hidden bg-zinc-900 text-white flex",children:[a.jsx(Vu,{}),a.jsx(ib,{names:s}),a.jsx(jZ,{}),a.jsx("div",{className:"hidden",children:a.jsx(Si,{currentRoomCode:gt==null?void 0:gt.code,currentGameType:gt==null?void 0:gt.type,currentGameName:gt==null?void 0:gt.name,onJoinRoom:Cb})}),a.jsxs("div",{className:"flex-1 md:pl-20 pb-20 md:pb-0",children:[a.jsxs("div",{className:"fixed top-0 left-0 md:left-20 right-0 z-[70] flex items-center justify-between px-4 md:px-6 py-3 bg-black/20 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-red-600 flex items-center justify-center font-bold text-base md:text-lg shadow-lg",children:""}),a.jsx("span",{className:"text-base md:text-xl font-bold",children:"King's Cup Party"})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(Si,{currentRoomCode:gt==null?void 0:gt.code,currentGameType:gt==null?void 0:gt.type,currentGameName:gt==null?void 0:gt.name,onJoinRoom:Cb})}),a.jsx(kZ,{}),a.jsx(TZ,{}),a.jsx("span",{className:"hidden md:block text-zinc-400 text-sm",children:new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})]}),a.jsx(RZ,{title:nt[Bt].name,description:nt[Bt].desc,emoji:nt[Bt].emoji,iconUrl:nt[Bt].iconUrl,gradient:nt[Bt].gradient}),a.jsxs("div",{id:"games-section",className:"relative min-h-screen flex flex-col",children:[a.jsx(te.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-cover bg-center bg-gradient-to-br from-slate-900 via-slate-800 to-black",style:y[nt[Bt].id]?{backgroundImage:`url(${y[nt[Bt].id]})`}:void 0},`bg-${nt[Bt].id}`),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/90"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-transparent to-transparent"}),a.jsx("div",{className:"relative z-20 px-2 md:px-8 pt-16 md:pt-28 pb-4 md:pb-8 overflow-visible",children:a.jsx("div",{className:"flex items-center gap-2 md:gap-6 overflow-x-auto overflow-y-visible scrollbar-hide py-2 md:py-8 px-1 md:px-4",children:nt.map((X,J)=>{const le=J===Bt;return a.jsxs(te.button,{onClick:()=>ip(J),className:"flex-shrink-0 relative",whileHover:{scale:1.05},whileTap:{scale:.95},animate:le?{scale:1.1,y:0}:{scale:.95,y:0},transition:{type:"spring",stiffness:300,damping:25},children:[a.jsx("div",{className:`w-16 h-16 md:w-28 md:h-28 rounded-lg md:rounded-2xl overflow-hidden transition-all duration-300 ${le?"ring-2 md:ring-4 ring-white shadow-[0_0_20px_rgba(255,255,255,0.5)] md:shadow-[0_0_30px_rgba(255,255,255,0.6)] brightness-110":"ring-1 md:ring-2 ring-white/20 opacity-50 hover:opacity-90"}`,children:X.iconUrl?a.jsx("img",{src:X.iconUrl,alt:X.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:`w-full h-full bg-gradient-to-br ${X.gradient} flex items-center justify-center text-3xl md:text-5xl`,children:X.emoji})}),le&&a.jsx(te.div,{layoutId:"gameIndicator",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"absolute -bottom-3 left-0 right-0 h-1.5 bg-gradient-to-r from-transparent via-white to-transparent rounded-full shadow-lg"})]},`game-${X.id}-${J}`)})})}),a.jsxs(te.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},className:"relative z-20 mt-auto px-4 md:px-12 pb-24 md:pb-16 max-w-2xl",children:[a.jsx("h1",{className:"text-3xl md:text-6xl font-black text-white mb-2 md:mb-4 drop-shadow-2xl",children:nt[Bt].name}),a.jsx("p",{className:"text-sm md:text-xl text-white/90 mb-4 md:mb-8 drop-shadow-lg line-clamp-2 md:line-clamp-none",children:nt[Bt].desc}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsxs(te.button,{onClick:()=>{const X=nt[Bt];X.externalLink?window.location.href=X.externalLink:r(X.id)},whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 md:px-12 py-2.5 md:py-4 bg-white/90 hover:bg-white text-black rounded-full font-bold text-sm md:text-lg shadow-2xl flex items-center gap-1.5 md:gap-3",children:[a.jsx(yu,{className:"w-4 h-4 md:w-6 md:h-6 fill-black"}),"Play"]}),a.jsx(te.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 md:p-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-full border border-white/30",children:a.jsx("span",{className:"text-lg md:text-2xl",children:""})})]})]},`info-${nt[Bt].id}`)]}),k&&a.jsx(te.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>{if(E){g(!0);return}alert(`  Admin Panel

 'bonne' `)},className:"fixed bottom-24 right-4 md:bottom-6 md:right-6 z-50 p-3 md:p-4 rounded-full bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/30",children:a.jsx(wu,{className:"w-5 h-5 md:w-6 md:h-6"})})]}),w&&a.jsx(RA,{onClose:()=>g(!1),games:nt,onCoversUpdate:async()=>{const X=await zy();x(X)},onProfilesUpdate:async()=>{const X=await Hy();_(X)},onIconsUpdate:async()=>{const X=await Wy();b(X)}})]});if(n==="pokdeng")return W?a.jsx(LX,{room:W,players:K,currentPlayerId:re,isHost:VM,isLiveMode:o,onStartGame:Q,onDrawCard:_e,onStandCard:Ae,onDealerDraw:be,onDealerStand:G,onShowdown:fe,onNextRound:Ue,onLeave:()=>{l(!1),jl("pokdeng")},onSetDealer:yr}):a.jsx(RX,{onCreateRoom:async X=>await Tl(X,"pokdeng"),onJoinRoom:async(X,J)=>Fi(X,J,"pokdeng"),onQuickStart:async X=>{l(!0);const J=await Kr(X,!0);if(J){const le=typeof J=="string"?J:J.code;f({playerName:X,roomCode:le,gameType:"pokdeng"})}return J},isLoading:ae,onBack:()=>r("select")});if(n==="undercover"){if(!En)return a.jsx(_J,{onCreateRoom:async J=>Tl(J,"undercover"),onJoinRoom:async(J,le)=>Fi(J,le,"undercover"),onBack:()=>r("select"),isLoading:Uu});const X=((Nb=Ss.find(J=>J.id===Yr))==null?void 0:Nb.is_host)||!1;return a.jsx(oZ,{room:En,players:Ss,currentPlayerId:Yr,isHost:X,categories:Mi,onStartGame:tp,onRestartGame:Lo,onLeave:()=>jl("undercover")})}if(n==="paranoia"){if(!Li)return a.jsx(dZ,{onCreateRoom:async J=>Tl(J,"paranoia"),onJoinRoom:async(J,le)=>Fi(J,le,"paranoia"),onBack:()=>r("select"),isLoading:zu});const X=((Sb=Fo.find(J=>J.id===Qr))==null?void 0:Sb.is_host)||!1;return a.jsx(fZ,{room:Li,players:Fo,currentPlayerId:Qr,isHost:X,totalQuestions:Es.length,onStartGame:Hu,onStartRound:Gu,onSelectVictim:np,onRevealQuestion:kl,onSkipQuestion:xr,onLeave:()=>jl("paranoia")})}if(n==="5-sec"){if(!ie)return a.jsx(NZ,{onCreateRoom:async J=>Tl(J,"5-sec"),onJoinRoom:async(J,le)=>Fi(J,le,"5-sec"),onBack:()=>r("select"),isLoading:mn});const X=((Eb=Ee.find(J=>J.id===De))==null?void 0:Eb.is_host)||!1;return a.jsx(EZ,{room:ie,players:Ee,currentPlayerId:De,isHost:X,onStartGame:Xr,onStartRound:pn,onFinishAnswering:wr,onVote:FM,onLeave:()=>jl("5-sec")})}return T?a.jsx(jX,{room:T,players:R,currentPlayerId:I,isHost:$M,onStartGame:$,onDrawCard:z,onReshuffle:A,onLeave:()=>jl("kingscup")}):a.jsx(wX,{onCreateRoom:async X=>Tl(X,"kingscup"),onJoinRoom:async(X,J)=>Fi(X,J,"kingscup"),onQuickStart:async X=>{const J=await j(X);if(J){const le=typeof J=="string"?J:J.code;f({playerName:X,roomCode:le,gameType:"kingscup"})}return J},isLoading:F,onBack:()=>r("select")})},PZ=()=>{const t=bj();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};function AZ(){const[t,e]=m.useState("connected"),[n,r]=m.useState(navigator.onLine),[s,i]=m.useState(null),o=m.useRef(0),l=10,c=m.useRef(null),u=m.useCallback(async()=>{if(document.visibilityState==="visible"&&"wakeLock"in navigator&&!c.current)try{c.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock acquired"),c.current.addEventListener("release",()=>{console.log("Wake Lock released"),c.current=null})}catch(f){f.name!=="NotAllowedError"&&console.log("Wake Lock request failed:",f)}},[]),d=m.useCallback(()=>{c.current&&(c.current.release(),c.current=null)},[]),h=m.useCallback(()=>{if(o.current>=l){console.log("Max reconnection attempts reached"),e("disconnected");return}const f=Math.min(1e3*Math.pow(2,o.current),3e4);console.log(`Reconnecting in ${f}ms (attempt ${o.current+1})`),e("reconnecting"),setTimeout(()=>{try{kt.connect(),kt.isConnected()?(e("connected"),i(new Date),o.current=0,console.log("Reconnected successfully")):(o.current++,h())}catch(p){console.error("Reconnection failed:",p),o.current++,h()}},f)},[]);return m.useEffect(()=>{const f=()=>{console.log("Network is back online"),r(!0),h()},p=()=>{console.log("Network went offline"),r(!1),e("disconnected")};return window.addEventListener("online",f),window.addEventListener("offline",p),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[h]),m.useEffect(()=>{const f=async()=>{document.visibilityState==="visible"?(console.log("Page became visible, checking connection..."),await u(),(!n||t==="disconnected")&&h()):(console.log("Page became hidden"),d())};return document.addEventListener("visibilitychange",f),u(),()=>{document.removeEventListener("visibilitychange",f),d()}},[n,t,h,u,d]),m.useEffect(()=>{const f=kt.connect(),p=()=>{console.log("Socket.IO connected"),e("connected"),i(new Date),o.current=0},w=()=>{console.log("Socket.IO disconnected"),e("disconnected")};return f.on("connect",p),f.on("disconnect",w),f.connected&&(e("connected"),i(new Date)),()=>{f.off("connect",p),f.off("disconnect",w)}},[]),m.useEffect(()=>{t==="connected"&&!s&&i(new Date)},[t,s]),{status:t,isOnline:n,reconnect:h,lastConnectedAt:s}}function DZ({showWhenConnected:t=!1}){const{status:e,isOnline:n,reconnect:r}=AZ();if(e==="connected"&&!t)return null;const i=((l,c)=>{if(!c)return{icon:q_,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};switch(l){case"reconnecting":return{icon:Lh,text:"...",bgColor:"bg-yellow-500",textColor:"text-black",showRetry:!1,iconClass:"animate-spin"};case"disconnected":return{icon:q_,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};case"connected":return{icon:S5,text:"",bgColor:"bg-green-600",textColor:"text-white",showRetry:!1}}})(e,n),o=i.icon;return a.jsx(Im,{children:a.jsx(te.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-50 ${i.bgColor} ${i.textColor} px-4 py-3`,children:a.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[a.jsx(o,{className:`w-5 h-5 ${i.iconClass||""}`}),a.jsx("span",{className:"font-medium",children:i.text}),i.showRetry&&a.jsxs(D,{size:"sm",variant:"secondary",onClick:r,className:"ml-2 px-3 py-1 h-auto text-sm",children:[a.jsx(Lh,{className:"w-4 h-4 mr-1"}),""]})]})})})}const MZ=new K6,OZ=()=>a.jsx(Q6,{client:MZ,children:a.jsx(M9,{children:a.jsxs(N6,{children:[a.jsx(DZ,{}),a.jsx(a3,{}),a.jsx($3,{}),a.jsx(M$,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(P$,{children:[a.jsx(Vv,{path:"/",element:a.jsx(IZ,{})}),a.jsx(Vv,{path:"*",element:a.jsx(PZ,{})})]})})]})})});cZ();Uk(document.getElementById("root")).render(a.jsx(OZ,{}));
