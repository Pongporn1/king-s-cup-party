var Ub=t=>{throw TypeError(t)};var Sm=(t,e,n)=>e.has(t)||Ub("Cannot "+n);var F=(t,e,n)=>(Sm(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?Ub("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,r)=>(Sm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ot=(t,e,n)=>(Sm(t,e,"access private method"),n);var hd=(t,e,n,r)=>({set _(s){de(t,e,s,n)},get _(){return F(t,e,r)}});function yM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oN={exports:{}},Jf={},aN={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),xM=Symbol.for("react.portal"),wM=Symbol.for("react.fragment"),bM=Symbol.for("react.strict_mode"),_M=Symbol.for("react.profiler"),SM=Symbol.for("react.provider"),CM=Symbol.for("react.context"),EM=Symbol.for("react.forward_ref"),NM=Symbol.for("react.suspense"),kM=Symbol.for("react.memo"),TM=Symbol.for("react.lazy"),Vb=Symbol.iterator;function RM(t){return t===null||typeof t!="object"?null:(t=Vb&&t[Vb]||t["@@iterator"],typeof t=="function"?t:null)}var lN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cN=Object.assign,uN={};function vl(t,e,n){this.props=t,this.context=e,this.refs=uN,this.updater=n||lN}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dN(){}dN.prototype=vl.prototype;function N0(t,e,n){this.props=t,this.context=e,this.refs=uN,this.updater=n||lN}var k0=N0.prototype=new dN;k0.constructor=N0;cN(k0,vl.prototype);k0.isPureReactComponent=!0;var Bb=Array.isArray,hN=Object.prototype.hasOwnProperty,T0={current:null},fN={key:!0,ref:!0,__self:!0,__source:!0};function pN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hN.call(e,r)&&!fN.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Iu,type:t,key:i,ref:o,props:s,_owner:T0.current}}function jM(t,e){return{$$typeof:Iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function R0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Iu}function IM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zb=/\/+/g;function Cm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IM(""+t.key):e.toString(36)}function eh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Iu:case xM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Cm(o,0):r,Bb(s)?(n="",t!=null&&(n=t.replace(zb,"$&/")+"/"),eh(s,e,n,"",function(u){return u})):s!=null&&(R0(s)&&(s=jM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Bb(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Cm(i,a);o+=eh(i,e,n,c,s)}else if(c=RM(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Cm(i,a++),o+=eh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fd(t,e,n){if(t==null)return t;var r=[],s=0;return eh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function PM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},th={transition:null},AM={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:th,ReactCurrentOwner:T0};function mN(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:fd,forEach:function(t,e,n){fd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fd(t,function(){e++}),e},toArray:function(t){return fd(t,function(e){return e})||[]},only:function(t){if(!R0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=vl;xe.Fragment=wM;xe.Profiler=_M;xe.PureComponent=N0;xe.StrictMode=bM;xe.Suspense=NM;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AM;xe.act=mN;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cN({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=T0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)hN.call(e,c)&&!fN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Iu,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:CM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SM,_context:t},t.Consumer=t};xe.createElement=pN;xe.createFactory=function(t){var e=pN.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:EM,render:t}};xe.isValidElement=R0;xe.lazy=function(t){return{$$typeof:TM,_payload:{_status:-1,_result:t},_init:PM}};xe.memo=function(t,e){return{$$typeof:kM,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=th.transition;th.transition={};try{t()}finally{th.transition=e}};xe.unstable_act=mN;xe.useCallback=function(t,e){return en.current.useCallback(t,e)};xe.useContext=function(t){return en.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return en.current.useDeferredValue(t)};xe.useEffect=function(t,e){return en.current.useEffect(t,e)};xe.useId=function(){return en.current.useId()};xe.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return en.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};xe.useRef=function(t){return en.current.useRef(t)};xe.useState=function(t){return en.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return en.current.useTransition()};xe.version="18.3.1";aN.exports=xe;var m=aN.exports;const z=iN(m),j0=yM({__proto__:null,default:z},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM=m,DM=Symbol.for("react.element"),MM=Symbol.for("react.fragment"),LM=Object.prototype.hasOwnProperty,FM=OM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$M={key:!0,ref:!0,__self:!0,__source:!0};function gN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LM.call(e,r)&&!$M.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:DM,type:t,key:i,ref:o,props:s,_owner:FM.current}}Jf.Fragment=MM;Jf.jsx=gN;Jf.jsxs=gN;oN.exports=Jf;var l=oN.exports,vN={exports:{}},Rn={},yN={exports:{}},xN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,L){var R=A.length;A.push(L);e:for(;0<R;){var W=R-1>>>1,D=A[W];if(0<s(D,L))A[W]=L,A[R]=D,R=W;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],R=A.pop();if(R!==L){A[0]=R;e:for(var W=0,D=A.length,ne=D>>>1;W<ne;){var re=2*(W+1)-1,je=A[re],ze=re+1,Y=A[ze];if(0>s(je,R))ze<D&&0>s(Y,je)?(A[W]=Y,A[ze]=R,W=ze):(A[W]=je,A[re]=R,W=re);else if(ze<D&&0>s(Y,R))A[W]=Y,A[ze]=R,W=ze;else break e}}return L}function s(A,L){var R=A.sortIndex-L.sortIndex;return R!==0?R:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,b=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=A)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function S(A){if(y=!1,x(A),!b)if(n(c)!==null)b=!0,U(_);else{var L=n(u);L!==null&&G(S,L.startTime-A)}}function _(A,L){b=!1,y&&(y=!1,v(N),N=-1),p=!0;var R=f;try{for(x(L),h=n(c);h!==null&&(!(h.expirationTime>L)||A&&!j());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var D=W(h.expirationTime<=L);L=t.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),x(L)}else r(c);h=n(c)}if(h!==null)var ne=!0;else{var re=n(u);re!==null&&G(S,re.startTime-L),ne=!1}return ne}finally{h=null,f=R,p=!1}}var C=!1,E=null,N=-1,k=5,T=-1;function j(){return!(t.unstable_now()-T<k)}function I(){if(E!==null){var A=t.unstable_now();T=A;var L=!0;try{L=E(!0,A)}finally{L?q():(C=!1,E=null)}}else C=!1}var q;if(typeof g=="function")q=function(){g(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=I,q=function(){V.postMessage(null)}}else q=function(){w(I,0)};function U(A){E=A,C||(C=!0,q())}function G(A,L){N=w(function(){A(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,U(_))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var R=f;f=L;try{return A()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var R=f;f=A;try{return L()}finally{f=R}},t.unstable_scheduleCallback=function(A,L,R){var W=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?W+R:W):R=W,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=R+D,A={id:d++,callback:L,priorityLevel:A,startTime:R,expirationTime:D,sortIndex:-1},R>W?(A.sortIndex=R,e(u,A),n(c)===null&&A===n(u)&&(y?(v(N),N=-1):y=!0,G(S,R-W))):(A.sortIndex=D,e(c,A),b||p||(b=!0,U(_))),A},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(A){var L=f;return function(){var R=f;f=L;try{return A.apply(this,arguments)}finally{f=R}}}})(xN);yN.exports=xN;var UM=yN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VM=m,Tn=UM;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wN=new Set,Lc={};function Po(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(Lc[t]=e,t=0;t<e.length;t++)wN.add(e[t])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xg=Object.prototype.hasOwnProperty,BM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wb={},Hb={};function zM(t){return Xg.call(Hb,t)?!0:Xg.call(Wb,t)?!1:BM.test(t)?Hb[t]=!0:(Wb[t]=!0,!1)}function WM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HM(t,e,n,r){if(e===null||typeof e>"u"||WM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var I0=/[\-:]([a-z])/g;function P0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I0,P0);At[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I0,P0);At[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I0,P0);At[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A0(t,e,n,r){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HM(e,n,s,r)&&(n=null),r||s===null?zM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xs=VM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),Zg=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),_N=Symbol.for("react.context"),D0=Symbol.for("react.forward_ref"),ev=Symbol.for("react.suspense"),tv=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),SN=Symbol.for("react.offscreen"),qb=Symbol.iterator;function Wl(t){return t===null||typeof t!="object"?null:(t=qb&&t[qb]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Em;function oc(t){if(Em===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Em=e&&e[1]||""}return`
`+Em+t}var Nm=!1;function km(t,e){if(!t||Nm)return"";Nm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Nm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oc(t):""}function qM(t){switch(t.tag){case 5:return oc(t.type);case 16:return oc("Lazy");case 13:return oc("Suspense");case 19:return oc("SuspenseList");case 0:case 2:case 15:return t=km(t.type,!1),t;case 11:return t=km(t.type.render,!1),t;case 1:return t=km(t.type,!0),t;default:return""}}function nv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case na:return"Fragment";case ta:return"Portal";case Zg:return"Profiler";case O0:return"StrictMode";case ev:return"Suspense";case tv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _N:return(t.displayName||"Context")+".Consumer";case bN:return(t._context.displayName||"Context")+".Provider";case D0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M0:return e=t.displayName||null,e!==null?e:nv(t.type)||"Memo";case Os:e=t._payload,t=t._init;try{return nv(t(e))}catch{}}return null}function GM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nv(e);case 8:return e===O0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KM(t){var e=CN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function md(t){t._valueTracker||(t._valueTracker=KM(t))}function EN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rv(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NN(t,e){e=e.checked,e!=null&&A0(t,"checked",e,!1)}function sv(t,e){NN(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?iv(t,e.type,n):e.hasOwnProperty("defaultValue")&&iv(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function iv(t,e,n){(e!=="number"||Nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ac=Array.isArray;function Ca(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ov(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ac(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function kN(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function av(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gd,RN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gd=gd||document.createElement("div"),gd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YM=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(t){YM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pc[e]=pc[t]})});function jN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pc.hasOwnProperty(t)&&pc[t]?(""+e).trim():e+"px"}function IN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QM=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lv(t,e){if(e){if(QM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function cv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uv=null;function L0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dv=null,Ea=null,Na=null;function Jb(t){if(t=Ou(t)){if(typeof dv!="function")throw Error(H(280));var e=t.stateNode;e&&(e=np(e),dv(t.stateNode,t.type,e))}}function PN(t){Ea?Na?Na.push(t):Na=[t]:Ea=t}function AN(){if(Ea){var t=Ea,e=Na;if(Na=Ea=null,Jb(t),e)for(t=0;t<e.length;t++)Jb(e[t])}}function ON(t,e){return t(e)}function DN(){}var Tm=!1;function MN(t,e,n){if(Tm)return t(e,n);Tm=!0;try{return ON(t,e,n)}finally{Tm=!1,(Ea!==null||Na!==null)&&(DN(),AN())}}function $c(t,e){var n=t.stateNode;if(n===null)return null;var r=np(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var hv=!1;if(as)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){hv=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{hv=!1}function JM(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var mc=!1,kh=null,Th=!1,fv=null,XM={onError:function(t){mc=!0,kh=t}};function ZM(t,e,n,r,s,i,o,a,c){mc=!1,kh=null,JM.apply(XM,arguments)}function eL(t,e,n,r,s,i,o,a,c){if(ZM.apply(this,arguments),mc){if(mc){var u=kh;mc=!1,kh=null}else throw Error(H(198));Th||(Th=!0,fv=u)}}function Ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(t){if(Ao(t)!==t)throw Error(H(188))}function tL(t){var e=t.alternate;if(!e){if(e=Ao(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xb(s),t;if(i===r)return Xb(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function FN(t){return t=tL(t),t!==null?$N(t):null}function $N(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$N(t);if(e!==null)return e;t=t.sibling}return null}var UN=Tn.unstable_scheduleCallback,Zb=Tn.unstable_cancelCallback,nL=Tn.unstable_shouldYield,rL=Tn.unstable_requestPaint,st=Tn.unstable_now,sL=Tn.unstable_getCurrentPriorityLevel,F0=Tn.unstable_ImmediatePriority,VN=Tn.unstable_UserBlockingPriority,Rh=Tn.unstable_NormalPriority,iL=Tn.unstable_LowPriority,BN=Tn.unstable_IdlePriority,Xf=null,Ar=null;function oL(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Xf,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:cL,aL=Math.log,lL=Math.LN2;function cL(t){return t>>>=0,t===0?32:31-(aL(t)/lL|0)|0}var vd=64,yd=4194304;function lc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=lc(a):(i&=o,i!==0&&(r=lc(i)))}else o=n&~s,o!==0?r=lc(o):i!==0&&(r=lc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),s=1<<n,r|=t[n],e&=~s;return r}function uL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=uL(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function pv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zN(){var t=vd;return vd<<=1,!(vd&4194240)&&(vd=64),t}function Rm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function hL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ur(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function WN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HN,U0,qN,GN,KN,mv=!1,xd=[],ti=null,ni=null,ri=null,Uc=new Map,Vc=new Map,Ls=[],fL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e_(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Uc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(e.pointerId)}}function ql(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ou(e),e!==null&&U0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pL(t,e,n,r,s){switch(e){case"focusin":return ti=ql(ti,t,e,n,r,s),!0;case"dragenter":return ni=ql(ni,t,e,n,r,s),!0;case"mouseover":return ri=ql(ri,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Uc.set(i,ql(Uc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vc.set(i,ql(Vc.get(i)||null,t,e,n,r,s)),!0}return!1}function YN(t){var e=Gi(t.target);if(e!==null){var n=Ao(e);if(n!==null){if(e=n.tag,e===13){if(e=LN(n),e!==null){t.blockedOn=e,KN(t.priority,function(){qN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uv=r,n.target.dispatchEvent(r),uv=null}else return e=Ou(n),e!==null&&U0(e),t.blockedOn=n,!1;e.shift()}return!0}function t_(t,e,n){nh(t)&&n.delete(e)}function mL(){mv=!1,ti!==null&&nh(ti)&&(ti=null),ni!==null&&nh(ni)&&(ni=null),ri!==null&&nh(ri)&&(ri=null),Uc.forEach(t_),Vc.forEach(t_)}function Gl(t,e){t.blockedOn===e&&(t.blockedOn=null,mv||(mv=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,mL)))}function Bc(t){function e(s){return Gl(s,t)}if(0<xd.length){Gl(xd[0],t);for(var n=1;n<xd.length;n++){var r=xd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&Gl(ti,t),ni!==null&&Gl(ni,t),ri!==null&&Gl(ri,t),Uc.forEach(e),Vc.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)YN(n),n.blockedOn===null&&Ls.shift()}var ka=xs.ReactCurrentBatchConfig,Ih=!0;function gL(t,e,n,r){var s=Re,i=ka.transition;ka.transition=null;try{Re=1,V0(t,e,n,r)}finally{Re=s,ka.transition=i}}function vL(t,e,n,r){var s=Re,i=ka.transition;ka.transition=null;try{Re=4,V0(t,e,n,r)}finally{Re=s,ka.transition=i}}function V0(t,e,n,r){if(Ih){var s=gv(t,e,n,r);if(s===null)$m(t,e,r,Ph,n),e_(t,r);else if(pL(s,t,e,n,r))r.stopPropagation();else if(e_(t,r),e&4&&-1<fL.indexOf(t)){for(;s!==null;){var i=Ou(s);if(i!==null&&HN(i),i=gv(t,e,n,r),i===null&&$m(t,e,r,Ph,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $m(t,e,r,null,n)}}var Ph=null;function gv(t,e,n,r){if(Ph=null,t=L0(r),t=Gi(t),t!==null)if(e=Ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ph=t,null}function QN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sL()){case F0:return 1;case VN:return 4;case Rh:case iL:return 16;case BN:return 536870912;default:return 16}default:return 16}}var Xs=null,B0=null,rh=null;function JN(){if(rh)return rh;var t,e=B0,n=e.length,r,s="value"in Xs?Xs.value:Xs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return rh=s.slice(t,1<r?1-r:void 0)}function sh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wd(){return!0}function n_(){return!1}function jn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wd:n_,this.isPropagationStopped=n_,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),e}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z0=jn(yl),Au=Je({},yl,{view:0,detail:0}),yL=jn(Au),jm,Im,Kl,Zf=Je({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kl&&(Kl&&t.type==="mousemove"?(jm=t.screenX-Kl.screenX,Im=t.screenY-Kl.screenY):Im=jm=0,Kl=t),jm)},movementY:function(t){return"movementY"in t?t.movementY:Im}}),r_=jn(Zf),xL=Je({},Zf,{dataTransfer:0}),wL=jn(xL),bL=Je({},Au,{relatedTarget:0}),Pm=jn(bL),_L=Je({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),SL=jn(_L),CL=Je({},yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EL=jn(CL),NL=Je({},yl,{data:0}),s_=jn(NL),kL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RL[t])?!!e[t]:!1}function W0(){return jL}var IL=Je({},Au,{key:function(t){if(t.key){var e=kL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(t){return t.type==="keypress"?sh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PL=jn(IL),AL=Je({},Zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i_=jn(AL),OL=Je({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),DL=jn(OL),ML=Je({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),LL=jn(ML),FL=Je({},Zf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$L=jn(FL),UL=[9,13,27,32],H0=as&&"CompositionEvent"in window,gc=null;as&&"documentMode"in document&&(gc=document.documentMode);var VL=as&&"TextEvent"in window&&!gc,XN=as&&(!H0||gc&&8<gc&&11>=gc),o_=" ",a_=!1;function ZN(t,e){switch(t){case"keyup":return UL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ek(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function BL(t,e){switch(t){case"compositionend":return ek(e);case"keypress":return e.which!==32?null:(a_=!0,o_);case"textInput":return t=e.data,t===o_&&a_?null:t;default:return null}}function zL(t,e){if(ra)return t==="compositionend"||!H0&&ZN(t,e)?(t=JN(),rh=B0=Xs=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XN&&e.locale!=="ko"?null:e.data;default:return null}}var WL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WL[t.type]:e==="textarea"}function tk(t,e,n,r){PN(r),e=Ah(e,"onChange"),0<e.length&&(n=new z0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vc=null,zc=null;function HL(t){hk(t,0)}function ep(t){var e=oa(t);if(EN(e))return t}function qL(t,e){if(t==="change")return e}var nk=!1;if(as){var Am;if(as){var Om="oninput"in document;if(!Om){var c_=document.createElement("div");c_.setAttribute("oninput","return;"),Om=typeof c_.oninput=="function"}Am=Om}else Am=!1;nk=Am&&(!document.documentMode||9<document.documentMode)}function u_(){vc&&(vc.detachEvent("onpropertychange",rk),zc=vc=null)}function rk(t){if(t.propertyName==="value"&&ep(zc)){var e=[];tk(e,zc,t,L0(t)),MN(HL,e)}}function GL(t,e,n){t==="focusin"?(u_(),vc=e,zc=n,vc.attachEvent("onpropertychange",rk)):t==="focusout"&&u_()}function KL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ep(zc)}function YL(t,e){if(t==="click")return ep(e)}function QL(t,e){if(t==="input"||t==="change")return ep(e)}function JL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:JL;function Wc(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xg.call(e,s)||!fr(t[s],e[s]))return!1}return!0}function d_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h_(t,e){var n=d_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d_(n)}}function sk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ik(){for(var t=window,e=Nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nh(t.document)}return e}function q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XL(t){var e=ik(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sk(n.ownerDocument.documentElement,n)){if(r!==null&&q0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=h_(n,i);var o=h_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZL=as&&"documentMode"in document&&11>=document.documentMode,sa=null,vv=null,yc=null,yv=!1;function f_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yv||sa==null||sa!==Nh(r)||(r=sa,"selectionStart"in r&&q0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yc&&Wc(yc,r)||(yc=r,r=Ah(vv,"onSelect"),0<r.length&&(e=new z0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sa)))}function bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},Dm={},ok={};as&&(ok=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function tp(t){if(Dm[t])return Dm[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ok)return Dm[t]=e[n];return t}var ak=tp("animationend"),lk=tp("animationiteration"),ck=tp("animationstart"),uk=tp("transitionend"),dk=new Map,p_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){dk.set(t,e),Po(e,[t])}for(var Mm=0;Mm<p_.length;Mm++){var Lm=p_[Mm],e4=Lm.toLowerCase(),t4=Lm[0].toUpperCase()+Lm.slice(1);Ei(e4,"on"+t4)}Ei(ak,"onAnimationEnd");Ei(lk,"onAnimationIteration");Ei(ck,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(uk,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n4=new Set("cancel close invalid load scroll toggle".split(" ").concat(cc));function m_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eL(r,e,void 0,t),t.currentTarget=null}function hk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;m_(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;m_(s,a,u),i=c}}}if(Th)throw t=fv,Th=!1,fv=null,t}function Ue(t,e){var n=e[Sv];n===void 0&&(n=e[Sv]=new Set);var r=t+"__bubble";n.has(r)||(fk(e,t,2,!1),n.add(r))}function Fm(t,e,n){var r=0;e&&(r|=4),fk(n,t,r,e)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Hc(t){if(!t[_d]){t[_d]=!0,wN.forEach(function(n){n!=="selectionchange"&&(n4.has(n)||Fm(n,!1,t),Fm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_d]||(e[_d]=!0,Fm("selectionchange",!1,e))}}function fk(t,e,n,r){switch(QN(e)){case 1:var s=gL;break;case 4:s=vL;break;default:s=V0}n=s.bind(null,e,n,t),s=void 0,!hv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $m(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Gi(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}MN(function(){var u=i,d=L0(n),h=[];e:{var f=dk.get(t);if(f!==void 0){var p=z0,b=t;switch(t){case"keypress":if(sh(n)===0)break e;case"keydown":case"keyup":p=PL;break;case"focusin":b="focus",p=Pm;break;case"focusout":b="blur",p=Pm;break;case"beforeblur":case"afterblur":p=Pm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=wL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=DL;break;case ak:case lk:case ck:p=SL;break;case uk:p=LL;break;case"scroll":p=yL;break;case"wheel":p=$L;break;case"copy":case"cut":case"paste":p=EL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=i_}var y=(e&4)!==0,w=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,x;g!==null;){x=g;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,v!==null&&(S=$c(g,v),S!=null&&y.push(qc(g,S,x)))),w)break;g=g.return}0<y.length&&(f=new p(f,b,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==uv&&(b=n.relatedTarget||n.fromElement)&&(Gi(b)||b[ls]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?Gi(b):null,b!==null&&(w=Ao(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(y=r_,S="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=i_,S="onPointerLeave",v="onPointerEnter",g="pointer"),w=p==null?f:oa(p),x=b==null?f:oa(b),f=new y(S,g+"leave",p,n,d),f.target=w,f.relatedTarget=x,S=null,Gi(d)===u&&(y=new y(v,g+"enter",b,n,d),y.target=x,y.relatedTarget=w,S=y),w=S,p&&b)t:{for(y=p,v=b,g=0,x=y;x;x=Uo(x))g++;for(x=0,S=v;S;S=Uo(S))x++;for(;0<g-x;)y=Uo(y),g--;for(;0<x-g;)v=Uo(v),x--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=Uo(y),v=Uo(v)}y=null}else y=null;p!==null&&g_(h,f,p,y,!1),b!==null&&w!==null&&g_(h,w,b,y,!0)}}e:{if(f=u?oa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=qL;else if(l_(f))if(nk)_=QL;else{_=KL;var C=GL}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=YL);if(_&&(_=_(t,u))){tk(h,_,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&iv(f,"number",f.value)}switch(C=u?oa(u):window,t){case"focusin":(l_(C)||C.contentEditable==="true")&&(sa=C,vv=u,yc=null);break;case"focusout":yc=vv=sa=null;break;case"mousedown":yv=!0;break;case"contextmenu":case"mouseup":case"dragend":yv=!1,f_(h,n,d);break;case"selectionchange":if(ZL)break;case"keydown":case"keyup":f_(h,n,d)}var E;if(H0)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ra?ZN(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(XN&&n.locale!=="ko"&&(ra||N!=="onCompositionStart"?N==="onCompositionEnd"&&ra&&(E=JN()):(Xs=d,B0="value"in Xs?Xs.value:Xs.textContent,ra=!0)),C=Ah(u,N),0<C.length&&(N=new s_(N,t,null,n,d),h.push({event:N,listeners:C}),E?N.data=E:(E=ek(n),E!==null&&(N.data=E)))),(E=VL?BL(t,n):zL(t,n))&&(u=Ah(u,"onBeforeInput"),0<u.length&&(d=new s_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}hk(h,e)})}function qc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ah(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=$c(t,n),i!=null&&r.unshift(qc(t,i,s)),i=$c(t,e),i!=null&&r.push(qc(t,i,s))),t=t.return}return r}function Uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=$c(n,i),c!=null&&o.unshift(qc(n,c,a))):s||(c=$c(n,i),c!=null&&o.push(qc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var r4=/\r\n?/g,s4=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(r4,`
`).replace(s4,"")}function Sd(t,e,n){if(e=v_(e),v_(t)!==e&&n)throw Error(H(425))}function Oh(){}var xv=null,wv=null;function bv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _v=typeof setTimeout=="function"?setTimeout:void 0,i4=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,o4=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(t){return y_.resolve(null).then(t).catch(a4)}:_v;function a4(t){setTimeout(function(){throw t})}function Um(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bc(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xl=Math.random().toString(36).slice(2),jr="__reactFiber$"+xl,Gc="__reactProps$"+xl,ls="__reactContainer$"+xl,Sv="__reactEvents$"+xl,l4="__reactListeners$"+xl,c4="__reactHandles$"+xl;function Gi(t){var e=t[jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ls]||n[jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x_(t);t!==null;){if(n=t[jr])return n;t=x_(t)}return e}t=n,n=t.parentNode}return null}function Ou(t){return t=t[jr]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function np(t){return t[Gc]||null}var Cv=[],aa=-1;function Ni(t){return{current:t}}function Be(t){0>aa||(t.current=Cv[aa],Cv[aa]=null,aa--)}function Le(t,e){aa++,Cv[aa]=t.current,t.current=e}var gi={},Wt=Ni(gi),un=Ni(!1),go=gi;function Xa(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function Dh(){Be(un),Be(Wt)}function w_(t,e,n){if(Wt.current!==gi)throw Error(H(168));Le(Wt,e),Le(un,n)}function pk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,GM(t)||"Unknown",s));return Je({},n,r)}function Mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,go=Wt.current,Le(Wt,t),Le(un,un.current),!0}function b_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=pk(t,e,go),r.__reactInternalMemoizedMergedChildContext=t,Be(un),Be(Wt),Le(Wt,t)):Be(un),Le(un,n)}var Xr=null,rp=!1,Vm=!1;function mk(t){Xr===null?Xr=[t]:Xr.push(t)}function u4(t){rp=!0,mk(t)}function ki(){if(!Vm&&Xr!==null){Vm=!0;var t=0,e=Re;try{var n=Xr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xr=null,rp=!1}catch(s){throw Xr!==null&&(Xr=Xr.slice(t+1)),UN(F0,ki),s}finally{Re=e,Vm=!1}}return null}var la=[],ca=0,Lh=null,Fh=0,On=[],Dn=0,vo=null,es=1,ts="";function $i(t,e){la[ca++]=Fh,la[ca++]=Lh,Lh=t,Fh=e}function gk(t,e,n){On[Dn++]=es,On[Dn++]=ts,On[Dn++]=vo,vo=t;var r=es;t=ts;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,es=1<<32-ur(e)+s|n<<s|r,ts=i+t}else es=1<<i|n<<s|r,ts=t}function G0(t){t.return!==null&&($i(t,1),gk(t,1,0))}function K0(t){for(;t===Lh;)Lh=la[--ca],la[ca]=null,Fh=la[--ca],la[ca]=null;for(;t===vo;)vo=On[--Dn],On[Dn]=null,ts=On[--Dn],On[Dn]=null,es=On[--Dn],On[Dn]=null}var Nn=null,En=null,He=!1,sr=null;function vk(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function __(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,En=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vo!==null?{id:es,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,En=null,!0):!1;default:return!1}}function Ev(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nv(t){if(He){var e=En;if(e){var n=e;if(!__(t,e)){if(Ev(t))throw Error(H(418));e=si(n.nextSibling);var r=Nn;e&&__(t,e)?vk(r,n):(t.flags=t.flags&-4097|2,He=!1,Nn=t)}}else{if(Ev(t))throw Error(H(418));t.flags=t.flags&-4097|2,He=!1,Nn=t}}}function S_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Cd(t){if(t!==Nn)return!1;if(!He)return S_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bv(t.type,t.memoizedProps)),e&&(e=En)){if(Ev(t))throw yk(),Error(H(418));for(;e;)vk(t,e),e=si(e.nextSibling)}if(S_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Nn?si(t.stateNode.nextSibling):null;return!0}function yk(){for(var t=En;t;)t=si(t.nextSibling)}function Za(){En=Nn=null,He=!1}function Y0(t){sr===null?sr=[t]:sr.push(t)}var d4=xs.ReactCurrentBatchConfig;function Yl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Ed(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function C_(t){var e=t._init;return e(t._payload)}function xk(t){function e(v,g){if(t){var x=v.deletions;x===null?(v.deletions=[g],v.flags|=16):x.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=li(v,g),v.index=0,v.sibling=null,v}function i(v,g,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<g?(v.flags|=2,g):x):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,x,S){return g===null||g.tag!==6?(g=Km(x,v.mode,S),g.return=v,g):(g=s(g,x),g.return=v,g)}function c(v,g,x,S){var _=x.type;return _===na?d(v,g,x.props.children,S,x.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Os&&C_(_)===g.type)?(S=s(g,x.props),S.ref=Yl(v,g,x),S.return=v,S):(S=dh(x.type,x.key,x.props,null,v.mode,S),S.ref=Yl(v,g,x),S.return=v,S)}function u(v,g,x,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Ym(x,v.mode,S),g.return=v,g):(g=s(g,x.children||[]),g.return=v,g)}function d(v,g,x,S,_){return g===null||g.tag!==7?(g=lo(x,v.mode,S,_),g.return=v,g):(g=s(g,x),g.return=v,g)}function h(v,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Km(""+g,v.mode,x),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case pd:return x=dh(g.type,g.key,g.props,null,v.mode,x),x.ref=Yl(v,null,g),x.return=v,x;case ta:return g=Ym(g,v.mode,x),g.return=v,g;case Os:var S=g._init;return h(v,S(g._payload),x)}if(ac(g)||Wl(g))return g=lo(g,v.mode,x,null),g.return=v,g;Ed(v,g)}return null}function f(v,g,x,S){var _=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(v,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pd:return x.key===_?c(v,g,x,S):null;case ta:return x.key===_?u(v,g,x,S):null;case Os:return _=x._init,f(v,g,_(x._payload),S)}if(ac(x)||Wl(x))return _!==null?null:d(v,g,x,S,null);Ed(v,x)}return null}function p(v,g,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(x)||null,a(g,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pd:return v=v.get(S.key===null?x:S.key)||null,c(g,v,S,_);case ta:return v=v.get(S.key===null?x:S.key)||null,u(g,v,S,_);case Os:var C=S._init;return p(v,g,x,C(S._payload),_)}if(ac(S)||Wl(S))return v=v.get(x)||null,d(g,v,S,_,null);Ed(g,S)}return null}function b(v,g,x,S){for(var _=null,C=null,E=g,N=g=0,k=null;E!==null&&N<x.length;N++){E.index>N?(k=E,E=null):k=E.sibling;var T=f(v,E,x[N],S);if(T===null){E===null&&(E=k);break}t&&E&&T.alternate===null&&e(v,E),g=i(T,g,N),C===null?_=T:C.sibling=T,C=T,E=k}if(N===x.length)return n(v,E),He&&$i(v,N),_;if(E===null){for(;N<x.length;N++)E=h(v,x[N],S),E!==null&&(g=i(E,g,N),C===null?_=E:C.sibling=E,C=E);return He&&$i(v,N),_}for(E=r(v,E);N<x.length;N++)k=p(E,v,N,x[N],S),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?N:k.key),g=i(k,g,N),C===null?_=k:C.sibling=k,C=k);return t&&E.forEach(function(j){return e(v,j)}),He&&$i(v,N),_}function y(v,g,x,S){var _=Wl(x);if(typeof _!="function")throw Error(H(150));if(x=_.call(x),x==null)throw Error(H(151));for(var C=_=null,E=g,N=g=0,k=null,T=x.next();E!==null&&!T.done;N++,T=x.next()){E.index>N?(k=E,E=null):k=E.sibling;var j=f(v,E,T.value,S);if(j===null){E===null&&(E=k);break}t&&E&&j.alternate===null&&e(v,E),g=i(j,g,N),C===null?_=j:C.sibling=j,C=j,E=k}if(T.done)return n(v,E),He&&$i(v,N),_;if(E===null){for(;!T.done;N++,T=x.next())T=h(v,T.value,S),T!==null&&(g=i(T,g,N),C===null?_=T:C.sibling=T,C=T);return He&&$i(v,N),_}for(E=r(v,E);!T.done;N++,T=x.next())T=p(E,v,N,T.value,S),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?N:T.key),g=i(T,g,N),C===null?_=T:C.sibling=T,C=T);return t&&E.forEach(function(I){return e(v,I)}),He&&$i(v,N),_}function w(v,g,x,S){if(typeof x=="object"&&x!==null&&x.type===na&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case pd:e:{for(var _=x.key,C=g;C!==null;){if(C.key===_){if(_=x.type,_===na){if(C.tag===7){n(v,C.sibling),g=s(C,x.props.children),g.return=v,v=g;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Os&&C_(_)===C.type){n(v,C.sibling),g=s(C,x.props),g.ref=Yl(v,C,x),g.return=v,v=g;break e}n(v,C);break}else e(v,C);C=C.sibling}x.type===na?(g=lo(x.props.children,v.mode,S,x.key),g.return=v,v=g):(S=dh(x.type,x.key,x.props,null,v.mode,S),S.ref=Yl(v,g,x),S.return=v,v=S)}return o(v);case ta:e:{for(C=x.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(v,g.sibling),g=s(g,x.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Ym(x,v.mode,S),g.return=v,v=g}return o(v);case Os:return C=x._init,w(v,g,C(x._payload),S)}if(ac(x))return b(v,g,x,S);if(Wl(x))return y(v,g,x,S);Ed(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,x),g.return=v,v=g):(n(v,g),g=Km(x,v.mode,S),g.return=v,v=g),o(v)):n(v,g)}return w}var el=xk(!0),wk=xk(!1),$h=Ni(null),Uh=null,ua=null,Q0=null;function J0(){Q0=ua=Uh=null}function X0(t){var e=$h.current;Be($h),t._currentValue=e}function kv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ta(t,e){Uh=t,Q0=ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(Q0!==t)if(t={context:t,memoizedValue:e,next:null},ua===null){if(Uh===null)throw Error(H(308));ua=t,Uh.dependencies={lanes:0,firstContext:t}}else ua=ua.next=t;return e}var Ki=null;function Z0(t){Ki===null?Ki=[t]:Ki.push(t)}function bk(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Z0(e)):(n.next=s.next,s.next=n),e.interleaved=n,cs(t,r)}function cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function ex(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _k(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function is(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cs(t,n)}return s=r.interleaved,s===null?(e.next=e,Z0(r)):(e.next=s.next,s.next=e),r.interleaved=e,cs(t,n)}function ih(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$0(t,n)}}function E_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vh(t,e,n,r){var s=t.updateQueue;Ds=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,y=a;switch(f=e,p=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){h=b.call(p,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,f=typeof b=="function"?b.call(p,h,f):b,f==null)break e;h=Je({},h,f);break e;case 2:Ds=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);xo|=o,t.lanes=o,t.memoizedState=h}}function N_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Du={},Or=Ni(Du),Kc=Ni(Du),Yc=Ni(Du);function Yi(t){if(t===Du)throw Error(H(174));return t}function tx(t,e){switch(Le(Yc,e),Le(Kc,t),Le(Or,Du),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:av(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=av(e,t)}Be(Or),Le(Or,e)}function tl(){Be(Or),Be(Kc),Be(Yc)}function Sk(t){Yi(Yc.current);var e=Yi(Or.current),n=av(e,t.type);e!==n&&(Le(Kc,t),Le(Or,n))}function nx(t){Kc.current===t&&(Be(Or),Be(Kc))}var Ke=Ni(0);function Bh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bm=[];function rx(){for(var t=0;t<Bm.length;t++)Bm[t]._workInProgressVersionPrimary=null;Bm.length=0}var oh=xs.ReactCurrentDispatcher,zm=xs.ReactCurrentBatchConfig,yo=0,Qe=null,ft=null,_t=null,zh=!1,xc=!1,Qc=0,h4=0;function Dt(){throw Error(H(321))}function sx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function ix(t,e,n,r,s,i){if(yo=i,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oh.current=t===null||t.memoizedState===null?g4:v4,t=n(r,s),xc){i=0;do{if(xc=!1,Qc=0,25<=i)throw Error(H(301));i+=1,_t=ft=null,e.updateQueue=null,oh.current=y4,t=n(r,s)}while(xc)}if(oh.current=Wh,e=ft!==null&&ft.next!==null,yo=0,_t=ft=Qe=null,zh=!1,e)throw Error(H(300));return t}function ox(){var t=Qc!==0;return Qc=0,t}function Nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Qe.memoizedState=_t=t:_t=_t.next=t,_t}function Vn(){if(ft===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=_t===null?Qe.memoizedState:_t.next;if(e!==null)_t=e,ft=t;else{if(t===null)throw Error(H(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},_t===null?Qe.memoizedState=_t=t:_t=_t.next=t}return _t}function Jc(t,e){return typeof e=="function"?e(t):e}function Wm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((yo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,Qe.lanes|=d,xo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,fr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qe.lanes|=i,xo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fr(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ck(){}function Ek(t,e){var n=Qe,r=Vn(),s=e(),i=!fr(r.memoizedState,s);if(i&&(r.memoizedState=s,an=!0),r=r.queue,ax(Tk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Xc(9,kk.bind(null,n,r,s,e),void 0,null),Et===null)throw Error(H(349));yo&30||Nk(n,e,s)}return s}function Nk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kk(t,e,n,r){e.value=n,e.getSnapshot=r,Rk(e)&&jk(t)}function Tk(t,e,n){return n(function(){Rk(e)&&jk(t)})}function Rk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function jk(t){var e=cs(t,1);e!==null&&dr(e,t,1,-1)}function k_(t){var e=Nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:t},e.queue=t,t=t.dispatch=m4.bind(null,Qe,t),[e.memoizedState,t]}function Xc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ik(){return Vn().memoizedState}function ah(t,e,n,r){var s=Nr();Qe.flags|=t,s.memoizedState=Xc(1|e,n,void 0,r===void 0?null:r)}function sp(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,r!==null&&sx(r,o.deps)){s.memoizedState=Xc(e,n,i,r);return}}Qe.flags|=t,s.memoizedState=Xc(1|e,n,i,r)}function T_(t,e){return ah(8390656,8,t,e)}function ax(t,e){return sp(2048,8,t,e)}function Pk(t,e){return sp(4,2,t,e)}function Ak(t,e){return sp(4,4,t,e)}function Ok(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dk(t,e,n){return n=n!=null?n.concat([t]):null,sp(4,4,Ok.bind(null,e,t),n)}function lx(){}function Mk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fk(t,e,n){return yo&21?(fr(n,e)||(n=zN(),Qe.lanes|=n,xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function f4(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=zm.transition;zm.transition={};try{t(!1),e()}finally{Re=n,zm.transition=r}}function $k(){return Vn().memoizedState}function p4(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uk(t))Vk(e,n);else if(n=bk(t,e,n,r),n!==null){var s=Xt();dr(n,t,r,s),Bk(n,e,r)}}function m4(t,e,n){var r=ai(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uk(t))Vk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,fr(a,o)){var c=e.interleaved;c===null?(s.next=s,Z0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=bk(t,e,s,r),n!==null&&(s=Xt(),dr(n,t,r,s),Bk(n,e,r))}}function Uk(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function Vk(t,e){xc=zh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$0(t,n)}}var Wh={readContext:Un,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},g4={readContext:Un,useCallback:function(t,e){return Nr().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:T_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ah(4194308,4,Ok.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ah(4194308,4,t,e)},useInsertionEffect:function(t,e){return ah(4,2,t,e)},useMemo:function(t,e){var n=Nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=p4.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=Nr();return t={current:t},e.memoizedState=t},useState:k_,useDebugValue:lx,useDeferredValue:function(t){return Nr().memoizedState=t},useTransition:function(){var t=k_(!1),e=t[0];return t=f4.bind(null,t[1]),Nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,s=Nr();if(He){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Et===null)throw Error(H(349));yo&30||Nk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,T_(Tk.bind(null,r,i,t),[t]),r.flags|=2048,Xc(9,kk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nr(),e=Et.identifierPrefix;if(He){var n=ts,r=es;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v4={readContext:Un,useCallback:Mk,useContext:Un,useEffect:ax,useImperativeHandle:Dk,useInsertionEffect:Pk,useLayoutEffect:Ak,useMemo:Lk,useReducer:Wm,useRef:Ik,useState:function(){return Wm(Jc)},useDebugValue:lx,useDeferredValue:function(t){var e=Vn();return Fk(e,ft.memoizedState,t)},useTransition:function(){var t=Wm(Jc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Ck,useSyncExternalStore:Ek,useId:$k,unstable_isNewReconciler:!1},y4={readContext:Un,useCallback:Mk,useContext:Un,useEffect:ax,useImperativeHandle:Dk,useInsertionEffect:Pk,useLayoutEffect:Ak,useMemo:Lk,useReducer:Hm,useRef:Ik,useState:function(){return Hm(Jc)},useDebugValue:lx,useDeferredValue:function(t){var e=Vn();return ft===null?e.memoizedState=t:Fk(e,ft.memoizedState,t)},useTransition:function(){var t=Hm(Jc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Ck,useSyncExternalStore:Ek,useId:$k,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ip={isMounted:function(t){return(t=t._reactInternals)?Ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ai(t),i=is(r,s);i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(dr(e,t,s,r),ih(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ai(t),i=is(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(dr(e,t,s,r),ih(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=ai(t),s=is(n,r);s.tag=2,e!=null&&(s.callback=e),e=ii(t,s,r),e!==null&&(dr(e,t,r,n),ih(e,t,r))}};function R_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Wc(n,r)||!Wc(s,i):!0}function zk(t,e,n){var r=!1,s=gi,i=e.contextType;return typeof i=="object"&&i!==null?i=Un(i):(s=dn(e)?go:Wt.current,r=e.contextTypes,i=(r=r!=null)?Xa(t,s):gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ip,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function j_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ip.enqueueReplaceState(e,e.state,null)}function Rv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ex(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Un(i):(i=dn(e)?go:Wt.current,s.context=Xa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ip.enqueueReplaceState(s,s.state,null),Vh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function nl(t,e){try{var n="",r=e;do n+=qM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var x4=typeof WeakMap=="function"?WeakMap:Map;function Wk(t,e,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qh||(qh=!0,Uv=r),jv(t,e)},n}function Hk(t,e,n){n=is(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jv(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new x4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=A4.bind(null,t,e,n),e.then(t,t))}function P_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=is(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var w4=xs.ReactCurrentOwner,an=!1;function Kt(t,e,n,r){e.child=t===null?wk(e,null,n,r):el(e,t.child,n,r)}function O_(t,e,n,r,s){n=n.render;var i=e.ref;return Ta(e,s),r=ix(t,e,n,r,i,s),n=ox(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(He&&n&&G0(e),e.flags|=1,Kt(t,e,r,s),e.child)}function D_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qk(t,e,i,r,s)):(t=dh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wc,n(o,r)&&t.ref===e.ref)return us(t,e,s)}return e.flags|=1,t=li(i,r),t.ref=e.ref,t.return=e,e.child=t}function qk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Wc(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,us(t,e,s)}return Iv(t,e,n,r,s)}function Gk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ha,bn),bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ha,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(ha,bn),bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(ha,bn),bn|=r;return Kt(t,e,s,n),e.child}function Kk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Iv(t,e,n,r,s){var i=dn(n)?go:Wt.current;return i=Xa(e,i),Ta(e,s),n=ix(t,e,n,r,i,s),r=ox(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(He&&r&&G0(e),e.flags|=1,Kt(t,e,n,s),e.child)}function M_(t,e,n,r,s){if(dn(n)){var i=!0;Mh(e)}else i=!1;if(Ta(e,s),e.stateNode===null)lh(t,e),zk(e,n,r),Rv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=dn(n)?go:Wt.current,u=Xa(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&j_(e,o,r,u),Ds=!1;var f=e.memoizedState;o.state=f,Vh(e,r,o,s),c=e.memoizedState,a!==r||f!==c||un.current||Ds?(typeof d=="function"&&(Tv(e,n,d,r),c=e.memoizedState),(a=Ds||R_(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_k(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=dn(n)?go:Wt.current,c=Xa(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&j_(e,o,r,c),Ds=!1,f=e.memoizedState,o.state=f,Vh(e,r,o,s);var b=e.memoizedState;a!==h||f!==b||un.current||Ds?(typeof p=="function"&&(Tv(e,n,p,r),b=e.memoizedState),(u=Ds||R_(e,n,u,r,f,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Pv(t,e,n,r,i,s)}function Pv(t,e,n,r,s,i){Kk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&b_(e,n,!1),us(t,e,i);r=e.stateNode,w4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=el(e,t.child,null,i),e.child=el(e,null,a,i)):Kt(t,e,a,i),e.memoizedState=r.state,s&&b_(e,n,!0),e.child}function Yk(t){var e=t.stateNode;e.pendingContext?w_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w_(t,e.context,!1),tx(t,e.containerInfo)}function L_(t,e,n,r,s){return Za(),Y0(s),e.flags|=256,Kt(t,e,n,r),e.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function Ov(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qk(t,e,n){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(Ke,s&1),t===null)return Nv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lp(o,r,0,null),t=lo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ov(n),e.memoizedState=Av,t):cx(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return b4(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=li(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=li(a,i):(i=lo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ov(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Av,r}return i=t.child,t=i.sibling,r=li(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cx(t,e){return e=lp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,n,r){return r!==null&&Y0(r),el(e,t.child,null,n),t=cx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function b4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qm(Error(H(422))),Nd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lp({mode:"visible",children:r.children},s,0,null),i=lo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&el(e,t.child,null,o),e.child.memoizedState=Ov(o),e.memoizedState=Av,i);if(!(e.mode&1))return Nd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=qm(i,r,void 0),Nd(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=Et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(t,s),dr(r,t,s,-1))}return mx(),r=qm(Error(H(421))),Nd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=O4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=si(s.nextSibling),Nn=e,He=!0,sr=null,t!==null&&(On[Dn++]=es,On[Dn++]=ts,On[Dn++]=vo,es=t.id,ts=t.overflow,vo=e),e=cx(e,r.children),e.flags|=4096,e)}function F_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kv(t.return,e,n)}function Gm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Jk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F_(t,n,e);else if(t.tag===19)F_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gm(e,!0,n,null,i);break;case"together":Gm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _4(t,e,n){switch(e.tag){case 3:Yk(e),Za();break;case 5:Sk(e);break;case 1:dn(e.type)&&Mh(e);break;case 4:tx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le($h,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Qk(t,e,n):(Le(Ke,Ke.current&1),t=us(t,e,n),t!==null?t.sibling:null);Le(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Gk(t,e,n)}return us(t,e,n)}var Xk,Dv,Zk,eT;Xk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dv=function(){};Zk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Yi(Or.current);var i=null;switch(n){case"input":s=rv(t,s),r=rv(t,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=ov(t,s),r=ov(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oh)}lv(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Lc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Lc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};eT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ql(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S4(t,e,n){var r=e.pendingProps;switch(K0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return dn(e.type)&&Dh(),Mt(e),null;case 3:return r=e.stateNode,tl(),Be(un),Be(Wt),rx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(zv(sr),sr=null))),Dv(t,e),Mt(e),null;case 5:nx(e);var s=Yi(Yc.current);if(n=e.type,t!==null&&e.stateNode!=null)Zk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Mt(e),null}if(t=Yi(Or.current),Cd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jr]=e,r[Gc]=i,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<cc.length;s++)Ue(cc[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Gb(r,i),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",r);break;case"textarea":Yb(r,i),Ue("invalid",r)}lv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Sd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Sd(r.textContent,a,t),s=["children",""+a]):Lc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":md(r),Kb(r,i,!0);break;case"textarea":md(r),Qb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Oh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jr]=e,t[Gc]=r,Xk(t,e,!1,!1),e.stateNode=t;e:{switch(o=cv(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<cc.length;s++)Ue(cc[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":Gb(t,r),s=rv(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Yb(t,r),s=ov(t,r),Ue("invalid",t);break;default:s=r}lv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?IN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&RN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fc(t,c):typeof c=="number"&&Fc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",t):c!=null&&A0(t,i,c,o))}switch(n){case"input":md(t),Kb(t,r,!1);break;case"textarea":md(t),Qb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ca(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ca(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)eT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Yi(Yc.current),Yi(Or.current),Cd(e)){if(r=e.stateNode,n=e.memoizedProps,r[jr]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:Sd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Be(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&En!==null&&e.mode&1&&!(e.flags&128))yk(),Za(),e.flags|=98560,i=!1;else if(i=Cd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[jr]=e}else Za(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else sr!==null&&(zv(sr),sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?vt===0&&(vt=3):mx())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return tl(),Dv(t,e),t===null&&Hc(e.stateNode.containerInfo),Mt(e),null;case 10:return X0(e.type._context),Mt(e),null;case 17:return dn(e.type)&&Dh(),Mt(e),null;case 19:if(Be(Ke),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ql(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bh(t),o!==null){for(e.flags|=128,Ql(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>rl&&(e.flags|=128,r=!0,Ql(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ql(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return Mt(e),null}else 2*st()-i.renderingStartTime>rl&&n!==1073741824&&(e.flags|=128,r=!0,Ql(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=Ke.current,Le(Ke,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return px(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function C4(t,e){switch(K0(e),e.tag){case 1:return dn(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return tl(),Be(un),Be(Wt),rx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nx(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Za()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return tl(),null;case 10:return X0(e.type._context),null;case 22:case 23:return px(),null;case 24:return null;default:return null}}var kd=!1,Ut=!1,E4=typeof WeakSet=="function"?WeakSet:Set,J=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Mv(t,e,n){try{n()}catch(r){tt(t,e,r)}}var $_=!1;function N4(t,e){if(xv=Ih,t=ik(),q0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wv={focusedElem:t,selectionRange:n},Ih=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,w=b.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Jn(e.type,y),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){tt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return b=$_,$_=!1,b}function wc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mv(e,n,i)}s=s.next}while(s!==r)}}function op(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tT(t){var e=t.alternate;e!==null&&(t.alternate=null,tT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jr],delete e[Gc],delete e[Sv],delete e[l4],delete e[c4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nT(t){return t.tag===5||t.tag===3||t.tag===4}function U_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(t=t.child,t!==null))for(Fv(t,e,n),t=t.sibling;t!==null;)Fv(t,e,n),t=t.sibling}function $v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($v(t,e,n),t=t.sibling;t!==null;)$v(t,e,n),t=t.sibling}var jt=null,nr=!1;function ks(t,e,n){for(n=n.child;n!==null;)rT(t,e,n),n=n.sibling}function rT(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Xf,n)}catch{}switch(n.tag){case 5:Ut||da(n,e);case 6:var r=jt,s=nr;jt=null,ks(t,e,n),jt=r,nr=s,jt!==null&&(nr?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(nr?(t=jt,n=n.stateNode,t.nodeType===8?Um(t.parentNode,n):t.nodeType===1&&Um(t,n),Bc(t)):Um(jt,n.stateNode));break;case 4:r=jt,s=nr,jt=n.stateNode.containerInfo,nr=!0,ks(t,e,n),jt=r,nr=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mv(n,e,o),s=s.next}while(s!==r)}ks(t,e,n);break;case 1:if(!Ut&&(da(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tt(n,e,a)}ks(t,e,n);break;case 21:ks(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,ks(t,e,n),Ut=r):ks(t,e,n);break;default:ks(t,e,n)}}function V_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new E4),e.forEach(function(r){var s=D4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,nr=!1;break e;case 3:jt=a.stateNode.containerInfo,nr=!0;break e;case 4:jt=a.stateNode.containerInfo,nr=!0;break e}a=a.return}if(jt===null)throw Error(H(160));rT(i,o,s),jt=null,nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sT(e,t),e=e.sibling}function sT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),Er(t),r&4){try{wc(3,t,t.return),op(3,t)}catch(y){tt(t,t.return,y)}try{wc(5,t,t.return)}catch(y){tt(t,t.return,y)}}break;case 1:Hn(e,t),Er(t),r&512&&n!==null&&da(n,n.return);break;case 5:if(Hn(e,t),Er(t),r&512&&n!==null&&da(n,n.return),t.flags&32){var s=t.stateNode;try{Fc(s,"")}catch(y){tt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&NN(s,i),cv(a,o);var u=cv(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?IN(s,h):d==="dangerouslySetInnerHTML"?RN(s,h):d==="children"?Fc(s,h):A0(s,d,h,u)}switch(a){case"input":sv(s,i);break;case"textarea":kN(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ca(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ca(s,!!i.multiple,i.defaultValue,!0):Ca(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gc]=i}catch(y){tt(t,t.return,y)}}break;case 6:if(Hn(e,t),Er(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){tt(t,t.return,y)}}break;case 3:if(Hn(e,t),Er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bc(e.containerInfo)}catch(y){tt(t,t.return,y)}break;case 4:Hn(e,t),Er(t);break;case 13:Hn(e,t),Er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hx=st())),r&4&&V_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(u=Ut)||d,Hn(e,t),Ut=u):Hn(e,t),Er(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:wc(4,f,f.return);break;case 1:da(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){tt(r,n,y)}}break;case 5:da(f,f.return);break;case 22:if(f.memoizedState!==null){z_(h);continue}}p!==null?(p.return=f,J=p):z_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=jN("display",o))}catch(y){tt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){tt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),Er(t),r&4&&V_(t);break;case 21:break;default:Hn(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nT(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fc(s,""),r.flags&=-33);var i=U_(t);$v(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=U_(t);Fv(t,a,o);break;default:throw Error(H(161))}}catch(c){tt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k4(t,e,n){J=t,iT(t)}function iT(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kd;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ut;a=kd;var u=Ut;if(kd=o,(Ut=c)&&!u)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?W_(s):c!==null?(c.return=o,J=c):W_(s);for(;i!==null;)J=i,iT(i),i=i.sibling;J=s,kd=a,Ut=u}B_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):B_(t)}}function B_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||op(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&N_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Bc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ut||e.flags&512&&Lv(e)}catch(f){tt(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function z_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function W_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{op(4,e)}catch(c){tt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tt(e,s,c)}}var i=e.return;try{Lv(e)}catch(c){tt(e,i,c)}break;case 5:var o=e.return;try{Lv(e)}catch(c){tt(e,o,c)}}}catch(c){tt(e,e.return,c)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var T4=Math.ceil,Hh=xs.ReactCurrentDispatcher,ux=xs.ReactCurrentOwner,Fn=xs.ReactCurrentBatchConfig,Ce=0,Et=null,lt=null,Pt=0,bn=0,ha=Ni(0),vt=0,Zc=null,xo=0,ap=0,dx=0,bc=null,on=null,hx=0,rl=1/0,Qr=null,qh=!1,Uv=null,oi=null,Td=!1,Zs=null,Gh=0,_c=0,Vv=null,ch=-1,uh=0;function Xt(){return Ce&6?st():ch!==-1?ch:ch=st()}function ai(t){return t.mode&1?Ce&2&&Pt!==0?Pt&-Pt:d4.transition!==null?(uh===0&&(uh=zN()),uh):(t=Re,t!==0||(t=window.event,t=t===void 0?16:QN(t.type)),t):1}function dr(t,e,n,r){if(50<_c)throw _c=0,Vv=null,Error(H(185));Pu(t,n,r),(!(Ce&2)||t!==Et)&&(t===Et&&(!(Ce&2)&&(ap|=n),vt===4&&Fs(t,Pt)),hn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(rl=st()+500,rp&&ki()))}function hn(t,e){var n=t.callbackNode;dL(t,e);var r=jh(t,t===Et?Pt:0);if(r===0)n!==null&&Zb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zb(n),e===1)t.tag===0?u4(H_.bind(null,t)):mk(H_.bind(null,t)),o4(function(){!(Ce&6)&&ki()}),n=null;else{switch(WN(r)){case 1:n=F0;break;case 4:n=VN;break;case 16:n=Rh;break;case 536870912:n=BN;break;default:n=Rh}n=fT(n,oT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oT(t,e){if(ch=-1,uh=0,Ce&6)throw Error(H(327));var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var r=jh(t,t===Et?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kh(t,r);else{e=r;var s=Ce;Ce|=2;var i=lT();(Et!==t||Pt!==e)&&(Qr=null,rl=st()+500,ao(t,e));do try{I4();break}catch(a){aT(t,a)}while(!0);J0(),Hh.current=i,Ce=s,lt!==null?e=0:(Et=null,Pt=0,e=vt)}if(e!==0){if(e===2&&(s=pv(t),s!==0&&(r=s,e=Bv(t,s))),e===1)throw n=Zc,ao(t,0),Fs(t,r),hn(t,st()),n;if(e===6)Fs(t,r);else{if(s=t.current.alternate,!(r&30)&&!R4(s)&&(e=Kh(t,r),e===2&&(i=pv(t),i!==0&&(r=i,e=Bv(t,i))),e===1))throw n=Zc,ao(t,0),Fs(t,r),hn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Ui(t,on,Qr);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=hx+500-st(),10<e)){if(jh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_v(Ui.bind(null,t,on,Qr),e);break}Ui(t,on,Qr);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ur(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T4(r/1960))-r,10<r){t.timeoutHandle=_v(Ui.bind(null,t,on,Qr),r);break}Ui(t,on,Qr);break;case 5:Ui(t,on,Qr);break;default:throw Error(H(329))}}}return hn(t,st()),t.callbackNode===n?oT.bind(null,t):null}function Bv(t,e){var n=bc;return t.current.memoizedState.isDehydrated&&(ao(t,e).flags|=256),t=Kh(t,e),t!==2&&(e=on,on=n,e!==null&&zv(e)),t}function zv(t){on===null?on=t:on.push.apply(on,t)}function R4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~dx,e&=~ap,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function H_(t){if(Ce&6)throw Error(H(327));Ra();var e=jh(t,0);if(!(e&1))return hn(t,st()),null;var n=Kh(t,e);if(t.tag!==0&&n===2){var r=pv(t);r!==0&&(e=r,n=Bv(t,r))}if(n===1)throw n=Zc,ao(t,0),Fs(t,e),hn(t,st()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ui(t,on,Qr),hn(t,st()),null}function fx(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(rl=st()+500,rp&&ki())}}function wo(t){Zs!==null&&Zs.tag===0&&!(Ce&6)&&Ra();var e=Ce;Ce|=1;var n=Fn.transition,r=Re;try{if(Fn.transition=null,Re=1,t)return t()}finally{Re=r,Fn.transition=n,Ce=e,!(Ce&6)&&ki()}}function px(){bn=ha.current,Be(ha)}function ao(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,i4(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(K0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dh();break;case 3:tl(),Be(un),Be(Wt),rx();break;case 5:nx(r);break;case 4:tl();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:X0(r.type._context);break;case 22:case 23:px()}n=n.return}if(Et=t,lt=t=li(t.current,null),Pt=bn=e,vt=0,Zc=null,dx=ap=xo=0,on=bc=null,Ki!==null){for(e=0;e<Ki.length;e++)if(n=Ki[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ki=null}return t}function aT(t,e){do{var n=lt;try{if(J0(),oh.current=Wh,zh){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zh=!1}if(yo=0,_t=ft=Qe=null,xc=!1,Qc=0,ux.current=null,n===null||n.return===null){vt=1,Zc=e,lt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Pt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=P_(o);if(p!==null){p.flags&=-257,A_(p,o,a,i,e),p.mode&1&&I_(i,u,e),e=p,c=u;var b=e.updateQueue;if(b===null){var y=new Set;y.add(c),e.updateQueue=y}else b.add(c);break e}else{if(!(e&1)){I_(i,u,e),mx();break e}c=Error(H(426))}}else if(He&&a.mode&1){var w=P_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),A_(w,o,a,i,e),Y0(nl(c,a));break e}}i=c=nl(c,a),vt!==4&&(vt=2),bc===null?bc=[i]:bc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Wk(i,c,e);E_(i,v);break e;case 1:a=c;var g=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(oi===null||!oi.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Hk(i,a,e);E_(i,S);break e}}i=i.return}while(i!==null)}uT(n)}catch(_){e=_,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function lT(){var t=Hh.current;return Hh.current=Wh,t===null?Wh:t}function mx(){(vt===0||vt===3||vt===2)&&(vt=4),Et===null||!(xo&268435455)&&!(ap&268435455)||Fs(Et,Pt)}function Kh(t,e){var n=Ce;Ce|=2;var r=lT();(Et!==t||Pt!==e)&&(Qr=null,ao(t,e));do try{j4();break}catch(s){aT(t,s)}while(!0);if(J0(),Ce=n,Hh.current=r,lt!==null)throw Error(H(261));return Et=null,Pt=0,vt}function j4(){for(;lt!==null;)cT(lt)}function I4(){for(;lt!==null&&!nL();)cT(lt)}function cT(t){var e=hT(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?uT(t):lt=e,ux.current=null}function uT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=C4(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,lt=null;return}}else if(n=S4(n,e,bn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);vt===0&&(vt=5)}function Ui(t,e,n){var r=Re,s=Fn.transition;try{Fn.transition=null,Re=1,P4(t,e,n,r)}finally{Fn.transition=s,Re=r}return null}function P4(t,e,n,r){do Ra();while(Zs!==null);if(Ce&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hL(t,i),t===Et&&(lt=Et=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Td||(Td=!0,fT(Rh,function(){return Ra(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var o=Re;Re=1;var a=Ce;Ce|=4,ux.current=null,N4(t,n),sT(n,t),XL(wv),Ih=!!xv,wv=xv=null,t.current=n,k4(n),rL(),Ce=a,Re=o,Fn.transition=i}else t.current=n;if(Td&&(Td=!1,Zs=t,Gh=s),i=t.pendingLanes,i===0&&(oi=null),oL(n.stateNode),hn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qh)throw qh=!1,t=Uv,Uv=null,t;return Gh&1&&t.tag!==0&&Ra(),i=t.pendingLanes,i&1?t===Vv?_c++:(_c=0,Vv=t):_c=0,ki(),null}function Ra(){if(Zs!==null){var t=WN(Gh),e=Fn.transition,n=Re;try{if(Fn.transition=null,Re=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,Gh=0,Ce&6)throw Error(H(331));var s=Ce;for(Ce|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(J=u;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:wc(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var f=d.sibling,p=d.return;if(tT(d),d===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var b=i.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,J=v;break e}J=i.return}}var g=t.current;for(J=g;J!==null;){o=J;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,J=x;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:op(9,a)}}catch(_){tt(a,a.return,_)}if(a===o){J=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,J=S;break e}J=a.return}}if(Ce=s,ki(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Xf,t)}catch{}r=!0}return r}finally{Re=n,Fn.transition=e}}return!1}function q_(t,e,n){e=nl(n,e),e=Wk(t,e,1),t=ii(t,e,1),e=Xt(),t!==null&&(Pu(t,1,e),hn(t,e))}function tt(t,e,n){if(t.tag===3)q_(t,t,n);else for(;e!==null;){if(e.tag===3){q_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=nl(n,t),t=Hk(e,t,1),e=ii(e,t,1),t=Xt(),e!==null&&(Pu(e,1,t),hn(e,t));break}}e=e.return}}function A4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Pt&n)===n&&(vt===4||vt===3&&(Pt&130023424)===Pt&&500>st()-hx?ao(t,0):dx|=n),hn(t,e)}function dT(t,e){e===0&&(t.mode&1?(e=yd,yd<<=1,!(yd&130023424)&&(yd=4194304)):e=1);var n=Xt();t=cs(t,e),t!==null&&(Pu(t,e,n),hn(t,n))}function O4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dT(t,n)}function D4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),dT(t,n)}var hT;hT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,_4(t,e,n);an=!!(t.flags&131072)}else an=!1,He&&e.flags&1048576&&gk(e,Fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lh(t,e),t=e.pendingProps;var s=Xa(e,Wt.current);Ta(e,n),s=ix(null,e,r,t,s,n);var i=ox();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,Mh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ex(e),s.updater=ip,e.stateNode=s,s._reactInternals=e,Rv(e,r,t,n),e=Pv(null,e,r,!0,i,n)):(e.tag=0,He&&i&&G0(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=L4(r),t=Jn(r,t),s){case 0:e=Iv(null,e,r,t,n);break e;case 1:e=M_(null,e,r,t,n);break e;case 11:e=O_(null,e,r,t,n);break e;case 14:e=D_(null,e,r,Jn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Iv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),M_(t,e,r,s,n);case 3:e:{if(Yk(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_k(t,e),Vh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nl(Error(H(423)),e),e=L_(t,e,r,n,s);break e}else if(r!==s){s=nl(Error(H(424)),e),e=L_(t,e,r,n,s);break e}else for(En=si(e.stateNode.containerInfo.firstChild),Nn=e,He=!0,sr=null,n=wk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Za(),r===s){e=us(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return Sk(e),t===null&&Nv(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bv(r,s)?o=null:i!==null&&bv(r,i)&&(e.flags|=32),Kk(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Nv(e),null;case 13:return Qk(t,e,n);case 4:return tx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=el(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),O_(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le($h,r._currentValue),r._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!un.current){e=us(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=is(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),kv(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ta(e,n),s=Un(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=Jn(r,e.pendingProps),s=Jn(r.type,s),D_(t,e,r,s,n);case 15:return qk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),lh(t,e),e.tag=1,dn(r)?(t=!0,Mh(e)):t=!1,Ta(e,n),zk(e,r,s),Rv(e,r,s,n),Pv(null,e,r,!0,t,n);case 19:return Jk(t,e,n);case 22:return Gk(t,e,n)}throw Error(H(156,e.tag))};function fT(t,e){return UN(t,e)}function M4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new M4(t,e,n,r)}function gx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function L4(t){if(typeof t=="function")return gx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D0)return 11;if(t===M0)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case na:return lo(n.children,s,i,e);case O0:o=8,s|=8;break;case Zg:return t=Mn(12,n,e,s|2),t.elementType=Zg,t.lanes=i,t;case ev:return t=Mn(13,n,e,s),t.elementType=ev,t.lanes=i,t;case tv:return t=Mn(19,n,e,s),t.elementType=tv,t.lanes=i,t;case SN:return lp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bN:o=10;break e;case _N:o=9;break e;case D0:o=11;break e;case M0:o=14;break e;case Os:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function lo(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function lp(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=SN,t.lanes=n,t.stateNode={isHidden:!1},t}function Km(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Ym(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rm(0),this.expirationTimes=Rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vx(t,e,n,r,s,i,o,a,c){return t=new F4(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ex(i),t}function $4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pT(t){if(!t)return gi;t=t._reactInternals;e:{if(Ao(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(dn(n))return pk(t,n,e)}return e}function mT(t,e,n,r,s,i,o,a,c){return t=vx(n,r,!0,t,s,i,o,a,c),t.context=pT(null),n=t.current,r=Xt(),s=ai(n),i=is(r,s),i.callback=e??null,ii(n,i,s),t.current.lanes=s,Pu(t,s,r),hn(t,r),t}function cp(t,e,n,r){var s=e.current,i=Xt(),o=ai(s);return n=pT(n),e.context===null?e.context=n:e.pendingContext=n,e=is(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(s,e,o),t!==null&&(dr(t,s,o,i),ih(t,s,o)),o}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yx(t,e){G_(t,e),(t=t.alternate)&&G_(t,e)}function U4(){return null}var gT=typeof reportError=="function"?reportError:function(t){console.error(t)};function xx(t){this._internalRoot=t}up.prototype.render=xx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));cp(t,e,null,null)};up.prototype.unmount=xx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){cp(null,t,null,null)}),e[ls]=null}};function up(t){this._internalRoot=t}up.prototype.unstable_scheduleHydration=function(t){if(t){var e=GN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&YN(t)}};function wx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K_(){}function V4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Yh(o);i.call(u)}}var o=mT(e,r,t,0,null,!1,!1,"",K_);return t._reactRootContainer=o,t[ls]=o.current,Hc(t.nodeType===8?t.parentNode:t),wo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Yh(c);a.call(u)}}var c=vx(t,0,!1,null,null,!1,!1,"",K_);return t._reactRootContainer=c,t[ls]=c.current,Hc(t.nodeType===8?t.parentNode:t),wo(function(){cp(e,c,n,r)}),c}function hp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Yh(o);a.call(c)}}cp(e,o,t,s)}else o=V4(n,e,t,s,r);return Yh(o)}HN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lc(e.pendingLanes);n!==0&&($0(e,n|1),hn(e,st()),!(Ce&6)&&(rl=st()+500,ki()))}break;case 13:wo(function(){var r=cs(t,1);if(r!==null){var s=Xt();dr(r,t,1,s)}}),yx(t,1)}};U0=function(t){if(t.tag===13){var e=cs(t,134217728);if(e!==null){var n=Xt();dr(e,t,134217728,n)}yx(t,134217728)}};qN=function(t){if(t.tag===13){var e=ai(t),n=cs(t,e);if(n!==null){var r=Xt();dr(n,t,e,r)}yx(t,e)}};GN=function(){return Re};KN=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};dv=function(t,e,n){switch(e){case"input":if(sv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=np(r);if(!s)throw Error(H(90));EN(r),sv(r,s)}}}break;case"textarea":kN(t,n);break;case"select":e=n.value,e!=null&&Ca(t,!!n.multiple,e,!1)}};ON=fx;DN=wo;var B4={usingClientEntryPoint:!1,Events:[Ou,oa,np,PN,AN,fx]},Jl={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z4={bundleType:Jl.bundleType,version:Jl.version,rendererPackageName:Jl.rendererPackageName,rendererConfig:Jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FN(t),t===null?null:t.stateNode},findFiberByHostInstance:Jl.findFiberByHostInstance||U4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Xf=Rd.inject(z4),Ar=Rd}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B4;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wx(e))throw Error(H(200));return $4(t,e,null,n)};Rn.createRoot=function(t,e){if(!wx(t))throw Error(H(299));var n=!1,r="",s=gT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=vx(t,1,!1,null,null,n,!1,r,s),t[ls]=e.current,Hc(t.nodeType===8?t.parentNode:t),new xx(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=FN(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return wo(t)};Rn.hydrate=function(t,e,n){if(!dp(e))throw Error(H(200));return hp(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!wx(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mT(e,null,t,1,n??null,s,!1,i,o),t[ls]=e.current,Hc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new up(e)};Rn.render=function(t,e,n){if(!dp(e))throw Error(H(200));return hp(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!dp(t))throw Error(H(40));return t._reactRootContainer?(wo(function(){hp(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};Rn.unstable_batchedUpdates=fx;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dp(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return hp(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function vT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vT)}catch(t){console.error(t)}}vT(),vN.exports=Rn;var Oo=vN.exports;const yT=iN(Oo);var xT,Y_=Oo;xT=Y_.createRoot,Y_.hydrateRoot;const W4=1,H4=1e6;let Qm=0;function q4(){return Qm=(Qm+1)%Number.MAX_SAFE_INTEGER,Qm.toString()}const Jm=new Map,Q_=t=>{if(Jm.has(t))return;const e=setTimeout(()=>{Jm.delete(t),Sc({type:"REMOVE_TOAST",toastId:t})},H4);Jm.set(t,e)},G4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,W4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Q_(n):t.toasts.forEach(r=>{Q_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},hh=[];let fh={toasts:[]};function Sc(t){fh=G4(fh,t),hh.forEach(e=>{e(fh)})}function K4({...t}){const e=q4(),n=s=>Sc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Sc({type:"DISMISS_TOAST",toastId:e});return Sc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Ht(){const[t,e]=m.useState(fh);return m.useEffect(()=>(hh.push(e),()=>{const n=hh.indexOf(e);n>-1&&hh.splice(n,1)}),[t]),{...t,toast:K4,dismiss:n=>Sc({type:"DISMISS_TOAST",toastId:n})}}function X(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function J_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wT(...t){return e=>{let n=!1;const r=t.map(s=>{const i=J_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():J_(t[s],null)}}}}function me(...t){return m.useCallback(wT(...t),t)}function Y4(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,c=m.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function gn(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),c=n.length;n=[...n,o];const u=h=>{var v;const{scope:f,children:p,...b}=h,y=((v=f==null?void 0:f[t])==null?void 0:v[c])||a,w=m.useMemo(()=>b,Object.values(b));return l.jsx(y.Provider,{value:w,children:p})};u.displayName=i+"Provider";function d(h,f){var y;const p=((y=f==null?void 0:f[t])==null?void 0:y[c])||a,b=m.useContext(p);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,Q4(s,...e)]}function Q4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function sl(t){const e=X4(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),c=a.find(e5);if(c){const u=c.props.children,d=a.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var J4=sl("Slot");function X4(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=n5(s),a=t5(i,s.props);return s.type!==m.Fragment&&(a.ref=r?wT(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bT=Symbol("radix.slottable");function Z4(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=bT,e}function e5(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bT}function t5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function n5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function fp(t){const e=t+"CollectionProvider",[n,r]=gn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:v}=y,g=z.useRef(null),x=z.useRef(new Map).current;return l.jsx(s,{scope:w,itemMap:x,collectionRef:g,children:v})};o.displayName=e;const a=t+"CollectionSlot",c=sl(a),u=z.forwardRef((y,w)=>{const{scope:v,children:g}=y,x=i(a,v),S=me(w,x.collectionRef);return l.jsx(c,{ref:S,children:g})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=sl(d),p=z.forwardRef((y,w)=>{const{scope:v,children:g,...x}=y,S=z.useRef(null),_=me(w,S),C=i(d,v);return z.useEffect(()=>(C.itemMap.set(S,{ref:S,...x}),()=>void C.itemMap.delete(S))),l.jsx(f,{[h]:"",ref:_,children:g})});p.displayName=d;function b(y){const w=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const g=w.collectionRef.current;if(!g)return[];const x=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,E)=>x.indexOf(C.ref.current)-x.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},b,r]}var r5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],te=r5.reduce((t,e)=>{const n=sl(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function _T(t,e){t&&Oo.flushSync(()=>t.dispatchEvent(e))}function pt(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function s5(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var i5="DismissableLayer",Wv="dismissableLayer.update",o5="dismissableLayer.pointerDownOutside",a5="dismissableLayer.focusOutside",X_,ST=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=m.useContext(ST),[d,h]=m.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),b=me(e,E=>h(E)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),g=d?y.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,S=g>=v,_=c5(E=>{const N=E.target,k=[...u.branches].some(T=>T.contains(N));!S||k||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),C=u5(E=>{const N=E.target;[...u.branches].some(T=>T.contains(N))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return s5(E=>{g===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(X_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Z_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=X_)}},[d,f,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Z_())},[d,u]),m.useEffect(()=>{const E=()=>p({});return document.addEventListener(Wv,E),()=>document.removeEventListener(Wv,E)},[]),l.jsx(te.div,{...c,ref:b,style:{pointerEvents:x?S?"auto":"none":void 0,...t.style},onFocusCapture:X(t.onFocusCapture,C.onFocusCapture),onBlurCapture:X(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:X(t.onPointerDownCapture,_.onPointerDownCapture)})});Mu.displayName=i5;var l5="DismissableLayerBranch",CT=m.forwardRef((t,e)=>{const n=m.useContext(ST),r=m.useRef(null),s=me(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(te.div,{...t,ref:s})});CT.displayName=l5;function c5(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){ET(o5,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function u5(t,e=globalThis==null?void 0:globalThis.document){const n=pt(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&ET(a5,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Z_(){const t=new CustomEvent(Wv);document.dispatchEvent(t)}function ET(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?_T(s,i):s.dispatchEvent(i)}var d5=Mu,h5=CT,yt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},f5="Portal",pp=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);yt(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?yT.createPortal(l.jsx(te.div,{...r,ref:e}),o):null});pp.displayName=f5;function p5(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var In=t=>{const{present:e,children:n}=t,r=m5(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=me(r.ref,g5(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};In.displayName="Presence";function m5(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,c]=p5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=jd(r.current);i.current=a==="mounted"?u:"none"},[a]),yt(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,p=jd(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),yt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const y=jd(r.current).includes(p.animationName);if(p.target===e&&y&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(i.current=jd(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function jd(t){return(t==null?void 0:t.animationName)||"none"}function g5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var v5=j0[" useInsertionEffect ".trim().toString()]||yt;function pr({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=y5({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const d=m.useRef(t!==void 0);m.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=m.useCallback(d=>{var h;if(a){const f=x5(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[c,u]}function y5({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return v5(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function x5(t){return typeof t=="function"}var NT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),w5="VisuallyHidden",mp=m.forwardRef((t,e)=>l.jsx(te.span,{...t,ref:e,style:{...NT,...t.style}}));mp.displayName=w5;var b5=mp,bx="ToastProvider",[_x,_5,S5]=fp("Toast"),[kT,Pte]=gn("Toast",[S5]),[C5,gp]=kT(bx),TT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${bx}\`. Expected non-empty \`string\`.`),l.jsx(_x.Provider,{scope:e,children:l.jsx(C5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};TT.displayName=bx;var RT="ToastViewport",E5=["F8"],Hv="toast.viewportPause",qv="toast.viewportResume",jT=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=E5,label:s="Notifications ({hotkey})",...i}=t,o=gp(RT,n),a=_5(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=me(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const w=v=>{var x;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,v=h.current;if(b&&w&&v){const g=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Hv);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(qv);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!w.contains(C.relatedTarget)&&x()},_=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",g),w.addEventListener("focusout",S),w.addEventListener("pointermove",g),w.addEventListener("pointerleave",_),window.addEventListener("blur",g),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",g),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",g),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",g),window.removeEventListener("focus",x)}}},[b,o.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:w})=>{const g=a().map(x=>{const S=x.ref.current,_=[S,...F5(S)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?g.reverse():g).flat()},[a]);return m.useEffect(()=>{const w=h.current;if(w){const v=g=>{var _,C,E;const x=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!x){const N=document.activeElement,k=g.shiftKey;if(g.target===w&&k){(_=u.current)==null||_.focus();return}const I=y({tabbingDirection:k?"backwards":"forwards"}),q=I.findIndex(P=>P===N);Xm(I.slice(q+1))?g.preventDefault():k?(C=u.current)==null||C.focus():(E=d.current)==null||E.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,y]),l.jsxs(h5,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&l.jsx(Gv,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Xm(w)}}),l.jsx(_x.Slot,{scope:n,children:l.jsx(te.ol,{tabIndex:-1,...i,ref:f})}),b&&l.jsx(Gv,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Xm(w)}})]})});jT.displayName=RT;var IT="ToastFocusProxy",Gv=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=gp(IT,n);return l.jsx(mp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Gv.displayName=IT;var Lu="Toast",N5="toast.swipeStart",k5="toast.swipeMove",T5="toast.swipeCancel",R5="toast.swipeEnd",PT=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,c]=pr({prop:r,defaultProp:s??!0,onChange:i,caller:Lu});return l.jsx(In,{present:n||a,children:l.jsx(P5,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:pt(t.onPause),onResume:pt(t.onResume),onSwipeStart:X(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:X(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:X(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:X(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});PT.displayName=Lu;var[j5,I5]=kT(Lu,{onClose(){}}),P5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...b}=t,y=gp(Lu,n),[w,v]=m.useState(null),g=me(e,P=>v(P)),x=m.useRef(null),S=m.useRef(null),_=s||y.duration,C=m.useRef(0),E=m.useRef(_),N=m.useRef(0),{onToastAdd:k,onToastRemove:T}=y,j=pt(()=>{var V;(w==null?void 0:w.contains(document.activeElement))&&((V=y.viewport)==null||V.focus()),o()}),I=m.useCallback(P=>{!P||P===1/0||(window.clearTimeout(N.current),C.current=new Date().getTime(),N.current=window.setTimeout(j,P))},[j]);m.useEffect(()=>{const P=y.viewport;if(P){const V=()=>{I(E.current),u==null||u()},U=()=>{const G=new Date().getTime()-C.current;E.current=E.current-G,window.clearTimeout(N.current),c==null||c()};return P.addEventListener(Hv,U),P.addEventListener(qv,V),()=>{P.removeEventListener(Hv,U),P.removeEventListener(qv,V)}}},[y.viewport,_,c,u,I]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&I(_)},[i,_,y.isClosePausedRef,I]),m.useEffect(()=>(k(),()=>T()),[k,T]);const q=m.useMemo(()=>w?$T(w):null,[w]);return y.viewport?l.jsxs(l.Fragment,{children:[q&&l.jsx(A5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),l.jsx(j5,{scope:n,onClose:j,children:Oo.createPortal(l.jsx(_x.ItemSlot,{scope:n,children:l.jsx(d5,{asChild:!0,onEscapeKeyDown:X(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||j(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(te.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...b,ref:g,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:X(t.onKeyDown,P=>{P.key==="Escape"&&(a==null||a(P.nativeEvent),P.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:X(t.onPointerDown,P=>{P.button===0&&(x.current={x:P.clientX,y:P.clientY})}),onPointerMove:X(t.onPointerMove,P=>{if(!x.current)return;const V=P.clientX-x.current.x,U=P.clientY-x.current.y,G=!!S.current,A=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,R=A?L(0,V):0,W=A?0:L(0,U),D=P.pointerType==="touch"?10:2,ne={x:R,y:W},re={originalEvent:P,delta:ne};G?(S.current=ne,Id(k5,h,re,{discrete:!1})):eS(ne,y.swipeDirection,D)?(S.current=ne,Id(N5,d,re,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(V)>D||Math.abs(U)>D)&&(x.current=null)}),onPointerUp:X(t.onPointerUp,P=>{const V=S.current,U=P.target;if(U.hasPointerCapture(P.pointerId)&&U.releasePointerCapture(P.pointerId),S.current=null,x.current=null,V){const G=P.currentTarget,A={originalEvent:P,delta:V};eS(V,y.swipeDirection,y.swipeThreshold)?Id(R5,p,A,{discrete:!0}):Id(T5,f,A,{discrete:!0}),G.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),A5=t=>{const{__scopeToast:e,children:n,...r}=t,s=gp(Lu,e),[i,o]=m.useState(!1),[a,c]=m.useState(!1);return M5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(pp,{asChild:!0,children:l.jsx(mp,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},O5="ToastTitle",AT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(te.div,{...r,ref:e})});AT.displayName=O5;var D5="ToastDescription",OT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(te.div,{...r,ref:e})});OT.displayName=D5;var DT="ToastAction",MT=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(FT,{altText:n,asChild:!0,children:l.jsx(Sx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${DT}\`. Expected non-empty \`string\`.`),null)});MT.displayName=DT;var LT="ToastClose",Sx=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=I5(LT,n);return l.jsx(FT,{asChild:!0,children:l.jsx(te.button,{type:"button",...r,ref:e,onClick:X(t.onClick,s.onClose)})})});Sx.displayName=LT;var FT=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function $T(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),L5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$T(r))}}),e}function Id(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?_T(s,i):s.dispatchEvent(i)}var eS=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function M5(t=()=>{}){const e=pt(t);yt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function L5(t){return t.nodeType===t.ELEMENT_NODE}function F5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var $5=TT,UT=jT,VT=PT,BT=AT,zT=OT,WT=MT,HT=Sx;function qT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qT(t))&&(r&&(r+=" "),r+=e);return r}const tS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nS=GT,vp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return nS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=tS(d)||tS(h);return s[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(b=>{let[y,w]=b;return Array.isArray(w)?w.includes({...i,...a}[y]):{...i,...a}[y]===w})?[...u,h,f]:u},[]);return nS(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>m.createElement("svg",{ref:c,...V5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:KT("lucide",s),...a},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(B5,{ref:i,iconNode:e,className:KT(`lucide-${U5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=he("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=he("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=he("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=he("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=he("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=he("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=he("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=he("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=he("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Nx="-",r3=t=>{const e=i3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Nx);return a[0]===""&&a.length!==1&&a.shift(),JT(a,e)||s3(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},JT=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?JT(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Nx);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},lS=/^\[(.+)\]$/,s3=t=>{if(lS.test(t)){const e=lS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},i3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return a3(Object.entries(t.classGroups),n).forEach(([i,o])=>{Xv(o,r,i,e)}),r},Xv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:cS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(o3(s)){Xv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Xv(o,cS(e,i),n,r)})})},cS=(t,e)=>{let n=t;return e.split(Nx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},o3=t=>t.isThemeGetter,a3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,l3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},XT="!",c3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let w=0;w<a.length;w++){let v=a[w];if(u===0){if(v===s&&(r||a.slice(w,w+i)===e)){c.push(a.slice(d,w)),d=w+i;continue}if(v==="/"){h=w;continue}}v==="["?u++:v==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(XT),b=p?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},u3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},d3=t=>({cache:l3(t.cacheSize),parseClassName:c3(t),...r3(t)}),h3=/\s+/,f3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(h3);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let b=!!p,y=r(b?f.substring(0,p):f);if(!y){if(!b){a=u+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=u+(a.length>0?" "+a:a);continue}b=!1}const w=u3(d).join(":"),v=h?w+XT:w,g=v+y;if(i.includes(g))continue;i.push(g);const x=s(y,b);for(let S=0;S<x.length;++S){const _=x[S];i.push(v+_)}a=u+(a.length>0?" "+a:a)}return a};function p3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ZT(e))&&(r&&(r+=" "),r+=n);return r}const ZT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ZT(t[r]))&&(n&&(n+=" "),n+=e);return n};function m3(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=d3(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=f3(c,n);return s(c,d),d}return function(){return i(p3.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},eR=/^\[(?:([a-z-]+):)?(.+)\]$/i,g3=/^\d+\/\d+$/,v3=new Set(["px","full","screen"]),y3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,x3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,b3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=t=>Pa(t)||v3.has(t)||g3.test(t),Ts=t=>bl(t,"length",j3),Pa=t=>!!t&&!Number.isNaN(Number(t)),Zm=t=>bl(t,"number",Pa),Xl=t=>!!t&&Number.isInteger(Number(t)),S3=t=>t.endsWith("%")&&Pa(t.slice(0,-1)),fe=t=>eR.test(t),Rs=t=>y3.test(t),C3=new Set(["length","size","percentage"]),E3=t=>bl(t,C3,tR),N3=t=>bl(t,"position",tR),k3=new Set(["image","url"]),T3=t=>bl(t,k3,P3),R3=t=>bl(t,"",I3),Zl=()=>!0,bl=(t,e,n)=>{const r=eR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},j3=t=>x3.test(t)&&!w3.test(t),tR=()=>!1,I3=t=>b3.test(t),P3=t=>_3.test(t),A3=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),c=$e("contrast"),u=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),f=$e("gap"),p=$e("gradientColorStops"),b=$e("gradientColorStopPositions"),y=$e("inset"),w=$e("margin"),v=$e("opacity"),g=$e("padding"),x=$e("saturate"),S=$e("scale"),_=$e("sepia"),C=$e("skew"),E=$e("space"),N=$e("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",fe,e],I=()=>[fe,e],q=()=>["",Kr,Ts],P=()=>["auto",Pa,fe],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",fe],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Pa,fe];return{cacheSize:500,separator:":",theme:{colors:[Zl],spacing:[Kr,Ts],blur:["none","",Rs,fe],brightness:W(),borderColor:[t],borderRadius:["none","","full",Rs,fe],borderSpacing:I(),borderWidth:q(),contrast:W(),grayscale:L(),hueRotate:W(),invert:L(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[S3,Ts],inset:j(),margin:j(),opacity:W(),padding:I(),saturate:W(),scale:W(),sepia:L(),skew:W(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Rs]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),fe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xl,fe]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Xl,fe]}],"grid-cols":[{"grid-cols":[Zl]}],"col-start-end":[{col:["auto",{span:["full",Xl,fe]},fe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Zl]}],"row-start-end":[{row:["auto",{span:[Xl,fe]},fe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[Rs]},Rs]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Rs,Ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zm]}],"font-family":[{font:[Zl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Pa,Zm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,Ts]}],"underline-offset":[{"underline-offset":["auto",Kr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),N3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},T3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Kr,fe]}],"outline-w":[{outline:[Kr,Ts]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Kr,Ts]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Rs,R3]}],"shadow-color":[{shadow:[Zl]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Rs,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Xl,fe]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kr,Ts,Zm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},O3=m3(A3);function $(...t){return O3(GT(t))}const D3=$5,nR=m.forwardRef(({className:t,...e},n)=>l.jsx(UT,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));nR.displayName=UT.displayName;const M3=vp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),rR=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(VT,{ref:r,className:$(M3({variant:e}),t),...n}));rR.displayName=VT.displayName;const L3=m.forwardRef(({className:t,...e},n)=>l.jsx(WT,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));L3.displayName=WT.displayName;const sR=m.forwardRef(({className:t,...e},n)=>l.jsx(HT,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(co,{className:"h-4 w-4"})}));sR.displayName=HT.displayName;const iR=m.forwardRef(({className:t,...e},n)=>l.jsx(BT,{ref:n,className:$("text-sm font-semibold",t),...e}));iR.displayName=BT.displayName;const oR=m.forwardRef(({className:t,...e},n)=>l.jsx(zT,{ref:n,className:$("text-sm opacity-90",t),...e}));oR.displayName=zT.displayName;function F3(){const{toasts:t}=Ht();return l.jsxs(D3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(rR,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(iR,{children:n}),r&&l.jsx(oR,{children:r})]}),s,l.jsx(sR,{})]},e)}),l.jsx(nR,{})]})}var uS=["light","dark"],$3="(prefers-color-scheme: dark)",U3=m.createContext(void 0),V3={setTheme:t=>{},themes:[]},B3=()=>{var t;return(t=m.useContext(U3))!=null?t:V3};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?uS.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,y=!1,w=!0)=>{let v=o?o[b]:b,g=y?b+"|| ''":`'${v}'`,x="";return s&&w&&!y&&uS.includes(b)&&(x+=`d.style.colorScheme = '${b}';`),n==="class"?y||v?x+=`c.add(${g})`:x+="null":v&&(x+=`d[s](n,${g})`),x},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${$3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var z3=t=>{switch(t){case"success":return q3;case"info":return K3;case"warning":return G3;case"error":return Y3;default:return null}},W3=Array(12).fill(0),H3=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},W3.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),q3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),G3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),K3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Y3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Q3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),J3=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Zv=1,X3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Zv++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],z.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(eF(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Zv++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},sn=new X3,Z3=(t,e)=>{let n=(e==null?void 0:e.id)||Zv++;return sn.addToast({title:t,...e,id:n}),n},eF=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",tF=Z3,nF=()=>sn.toasts,rF=()=>sn.getActiveToasts(),Lt=Object.assign(tF,{success:sn.success,info:sn.info,warning:sn.warning,error:sn.error,custom:sn.custom,message:sn.message,promise:sn.promise,dismiss:sn.dismiss,loading:sn.loading},{getHistory:nF,getToasts:rF});function sF(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}sF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Pd(t){return t.label!==void 0}var iF=3,oF="32px",aF="16px",dS=4e3,lF=356,cF=14,uF=20,dF=200;function qn(...t){return t.filter(Boolean).join(" ")}function hF(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var fF=t=>{var e,n,r,s,i,o,a,c,u,d,h;let{invert:f,toast:p,unstyled:b,interacting:y,setHeights:w,visibleToasts:v,heights:g,index:x,toasts:S,expanded:_,removeToast:C,defaultRichColors:E,closeButton:N,style:k,cancelButtonStyle:T,actionButtonStyle:j,className:I="",descriptionClassName:q="",duration:P,position:V,gap:U,loadingIcon:G,expandByDefault:A,classNames:L,icons:R,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:D}=t,[ne,re]=z.useState(null),[je,ze]=z.useState(null),[Y,Ee]=z.useState(!1),[Fe,Se]=z.useState(!1),[we,_e]=z.useState(!1),[it,nn]=z.useState(!1),[Ss,qr]=z.useState(!1),[Cs,Mo]=z.useState(0),[Ai,id]=z.useState(0),Es=z.useRef(p.duration||P||dS),Oi=z.useRef(null),_r=z.useRef(null),od=x===0,mm=x+1<=v,qt=p.type,Sr=p.dismissible!==!1,gm=p.className||"",vm=p.descriptionClassName||"",Lo=z.useMemo(()=>g.findIndex(ce=>ce.toastId===p.id)||0,[g,p.id]),ym=z.useMemo(()=>{var ce;return(ce=p.closeButton)!=null?ce:N},[p.closeButton,N]),ad=z.useMemo(()=>p.duration||P||dS,[p.duration,P]),Fo=z.useRef(0),Wn=z.useRef(0),Ul=z.useRef(0),Gr=z.useRef(null),[xm,ld]=V.split("-"),$o=z.useMemo(()=>g.reduce((ce,Te,Ie)=>Ie>=Lo?ce:ce+Te.height,0),[g,Lo]),cd=J3(),wm=p.invert||f,Vl=qt==="loading";Wn.current=z.useMemo(()=>Lo*U+$o,[Lo,$o]),z.useEffect(()=>{Es.current=ad},[ad]),z.useEffect(()=>{Ee(!0)},[]),z.useEffect(()=>{let ce=_r.current;if(ce){let Te=ce.getBoundingClientRect().height;return id(Te),w(Ie=>[{toastId:p.id,height:Te,position:p.position},...Ie]),()=>w(Ie=>Ie.filter(yn=>yn.toastId!==p.id))}},[w,p.id]),z.useLayoutEffect(()=>{if(!Y)return;let ce=_r.current,Te=ce.style.height;ce.style.height="auto";let Ie=ce.getBoundingClientRect().height;ce.style.height=Te,id(Ie),w(yn=>yn.find(ct=>ct.toastId===p.id)?yn.map(ct=>ct.toastId===p.id?{...ct,height:Ie}:ct):[{toastId:p.id,height:Ie,position:p.position},...yn])},[Y,p.title,p.description,w,p.id]);let Cr=z.useCallback(()=>{Se(!0),Mo(Wn.current),w(ce=>ce.filter(Te=>Te.toastId!==p.id)),setTimeout(()=>{C(p)},dF)},[p,C,w,Wn]);z.useEffect(()=>{if(p.promise&&qt==="loading"||p.duration===1/0||p.type==="loading")return;let ce;return _||y||D&&cd?(()=>{if(Ul.current<Fo.current){let Te=new Date().getTime()-Fo.current;Es.current=Es.current-Te}Ul.current=new Date().getTime()})():Es.current!==1/0&&(Fo.current=new Date().getTime(),ce=setTimeout(()=>{var Te;(Te=p.onAutoClose)==null||Te.call(p,p),Cr()},Es.current)),()=>clearTimeout(ce)},[_,y,p,qt,D,cd,Cr]),z.useEffect(()=>{p.delete&&Cr()},[Cr,p.delete]);function ud(){var ce,Te,Ie;return R!=null&&R.loading?z.createElement("div",{className:qn(L==null?void 0:L.loader,(ce=p==null?void 0:p.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":qt==="loading"},R.loading):G?z.createElement("div",{className:qn(L==null?void 0:L.loader,(Te=p==null?void 0:p.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":qt==="loading"},G):z.createElement(H3,{className:qn(L==null?void 0:L.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader),visible:qt==="loading"})}return z.createElement("li",{tabIndex:0,ref:_r,className:qn(I,gm,L==null?void 0:L.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[qt],(n=p==null?void 0:p.classNames)==null?void 0:n[qt]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||b),"data-mounted":Y,"data-promise":!!p.promise,"data-swiped":Ss,"data-removed":Fe,"data-visible":mm,"data-y-position":xm,"data-x-position":ld,"data-index":x,"data-front":od,"data-swiping":we,"data-dismissible":Sr,"data-type":qt,"data-invert":wm,"data-swipe-out":it,"data-swipe-direction":je,"data-expanded":!!(_||A&&Y),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${Fe?Cs:Wn.current}px`,"--initial-height":A?"auto":`${Ai}px`,...k,...p.style},onDragEnd:()=>{_e(!1),re(null),Gr.current=null},onPointerDown:ce=>{Vl||!Sr||(Oi.current=new Date,Mo(Wn.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(_e(!0),Gr.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,Te,Ie,yn;if(it||!Sr)return;Gr.current=null;let ct=Number(((ce=_r.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),xn=Number(((Te=_r.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ns=new Date().getTime()-((Ie=Oi.current)==null?void 0:Ie.getTime()),rt=ne==="x"?ct:xn,We=Math.abs(rt)/Ns;if(Math.abs(rt)>=uF||We>.11){Mo(Wn.current),(yn=p.onDismiss)==null||yn.call(p,p),ze(ne==="x"?ct>0?"right":"left":xn>0?"down":"up"),Cr(),nn(!0),qr(!1);return}_e(!1),re(null)},onPointerMove:ce=>{var Te,Ie,yn,ct;if(!Gr.current||!Sr||((Te=window.getSelection())==null?void 0:Te.toString().length)>0)return;let xn=ce.clientY-Gr.current.y,Ns=ce.clientX-Gr.current.x,rt=(Ie=t.swipeDirections)!=null?Ie:hF(V);!ne&&(Math.abs(Ns)>1||Math.abs(xn)>1)&&re(Math.abs(Ns)>Math.abs(xn)?"x":"y");let We={x:0,y:0};ne==="y"?(rt.includes("top")||rt.includes("bottom"))&&(rt.includes("top")&&xn<0||rt.includes("bottom")&&xn>0)&&(We.y=xn):ne==="x"&&(rt.includes("left")||rt.includes("right"))&&(rt.includes("left")&&Ns<0||rt.includes("right")&&Ns>0)&&(We.x=Ns),(Math.abs(We.x)>0||Math.abs(We.y)>0)&&qr(!0),(yn=_r.current)==null||yn.style.setProperty("--swipe-amount-x",`${We.x}px`),(ct=_r.current)==null||ct.style.setProperty("--swipe-amount-y",`${We.y}px`)}},ym&&!p.jsx?z.createElement("button",{"aria-label":W,"data-disabled":Vl,"data-close-button":!0,onClick:Vl||!Sr?()=>{}:()=>{var ce;Cr(),(ce=p.onDismiss)==null||ce.call(p,p)},className:qn(L==null?void 0:L.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=R==null?void 0:R.close)!=null?i:Q3):null,p.jsx||m.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:z.createElement(z.Fragment,null,qt||p.icon||p.promise?z.createElement("div",{"data-icon":"",className:qn(L==null?void 0:L.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ud():null,p.type!=="loading"?p.icon||(R==null?void 0:R[qt])||z3(qt):null):null,z.createElement("div",{"data-content":"",className:qn(L==null?void 0:L.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:qn(L==null?void 0:L.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?z.createElement("div",{"data-description":"",className:qn(q,vm,L==null?void 0:L.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),m.isValidElement(p.cancel)?p.cancel:p.cancel&&Pd(p.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:ce=>{var Te,Ie;Pd(p.cancel)&&Sr&&((Ie=(Te=p.cancel).onClick)==null||Ie.call(Te,ce),Cr())},className:qn(L==null?void 0:L.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,m.isValidElement(p.action)?p.action:p.action&&Pd(p.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||j,onClick:ce=>{var Te,Ie;Pd(p.action)&&((Ie=(Te=p.action).onClick)==null||Ie.call(Te,ce),!ce.defaultPrevented&&Cr())},className:qn(L==null?void 0:L.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function hS(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function pF(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?aF:oF;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),n}var mF=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:b=iF,toastOptions:y,dir:w=hS(),gap:v=cF,loadingIcon:g,icons:x,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:_}=t,[C,E]=z.useState([]),N=z.useMemo(()=>Array.from(new Set([r].concat(C.filter(D=>D.position).map(D=>D.position)))),[C,r]),[k,T]=z.useState([]),[j,I]=z.useState(!1),[q,P]=z.useState(!1),[V,U]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=z.useRef(null),R=z.useRef(!1),W=z.useCallback(D=>{E(ne=>{var re;return(re=ne.find(je=>je.id===D.id))!=null&&re.delete||sn.dismiss(D.id),ne.filter(({id:je})=>je!==D.id)})},[]);return z.useEffect(()=>sn.subscribe(D=>{if(D.dismiss){E(ne=>ne.map(re=>re.id===D.id?{...re,delete:!0}:re));return}setTimeout(()=>{yT.flushSync(()=>{E(ne=>{let re=ne.findIndex(je=>je.id===D.id);return re!==-1?[...ne.slice(0,re),{...ne[re],...D},...ne.slice(re+1)]:[D,...ne]})})})}),[]),z.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:ne})=>{U(ne?"dark":"light")})}catch{D.addListener(({matches:re})=>{try{U(re?"dark":"light")}catch(je){console.error(je)}})}},[d]),z.useEffect(()=>{C.length<=1&&I(!1)},[C]),z.useEffect(()=>{let D=ne=>{var re,je;s.every(ze=>ne[ze]||ne.code===ze)&&(I(!0),(re=G.current)==null||re.focus()),ne.code==="Escape"&&(document.activeElement===G.current||(je=G.current)!=null&&je.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[s]),z.useEffect(()=>{if(G.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,R.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${S} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((D,ne)=>{var re;let[je,ze]=D.split("-");return C.length?z.createElement("ol",{key:D,dir:w==="auto"?hS():w,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":je,"data-lifted":j&&C.length>1&&!i,"data-x-position":ze,style:{"--front-toast-height":`${((re=k[0])==null?void 0:re.height)||0}px`,"--width":`${lF}px`,"--gap":`${v}px`,...p,...pF(c,u)},onBlur:Y=>{R.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(R.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||R.current||(R.current=!0,L.current=Y.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{q||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},C.filter(Y=>!Y.position&&ne===0||Y.position===D).map((Y,Ee)=>{var Fe,Se;return z.createElement(fF,{key:Y.id,icons:x,index:Ee,toast:Y,defaultRichColors:h,duration:(Fe=y==null?void 0:y.duration)!=null?Fe:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:b,closeButton:(Se=y==null?void 0:y.closeButton)!=null?Se:o,interacting:q,position:D,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:W,toasts:C.filter(we=>we.position==Y.position),heights:k.filter(we=>we.position==Y.position),setHeights:T,expandByDefault:i,gap:v,loadingIcon:g,expanded:j,pauseWhenPageIsHidden:_,swipeDirections:t.swipeDirections})})):null}))});const gF=({...t})=>{const{theme:e="system"}=B3();return l.jsx(mF,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var vF=j0[" useId ".trim().toString()]||(()=>{}),yF=0;function Dr(t){const[e,n]=m.useState(vF());return yt(()=>{t||n(r=>r??String(yF++))},[t]),t||(e?`radix-${e}`:"")}const xF=["top","right","bottom","left"],vi=Math.min,_n=Math.max,Zh=Math.round,Ad=Math.floor,Mr=t=>({x:t,y:t}),wF={left:"right",right:"left",bottom:"top",top:"bottom"},bF={start:"end",end:"start"};function ey(t,e,n){return _n(t,vi(e,n))}function ds(t,e){return typeof t=="function"?t(e):t}function hs(t){return t.split("-")[0]}function _l(t){return t.split("-")[1]}function kx(t){return t==="x"?"y":"x"}function Tx(t){return t==="y"?"height":"width"}const _F=new Set(["top","bottom"]);function Pr(t){return _F.has(hs(t))?"y":"x"}function Rx(t){return kx(Pr(t))}function SF(t,e,n){n===void 0&&(n=!1);const r=_l(t),s=Rx(t),i=Tx(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ef(o)),[o,ef(o)]}function CF(t){const e=ef(t);return[ty(t),e,ty(e)]}function ty(t){return t.replace(/start|end/g,e=>bF[e])}const fS=["left","right"],pS=["right","left"],EF=["top","bottom"],NF=["bottom","top"];function kF(t,e,n){switch(t){case"top":case"bottom":return n?e?pS:fS:e?fS:pS;case"left":case"right":return e?EF:NF;default:return[]}}function TF(t,e,n,r){const s=_l(t);let i=kF(hs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(ty)))),i}function ef(t){return t.replace(/left|right|bottom|top/g,e=>wF[e])}function RF(t){return{top:0,right:0,bottom:0,left:0,...t}}function aR(t){return typeof t!="number"?RF(t):{top:t,right:t,bottom:t,left:t}}function tf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function mS(t,e,n){let{reference:r,floating:s}=t;const i=Pr(e),o=Rx(e),a=Tx(o),c=hs(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(_l(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const jF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=mS(u,r,c),f=r,p={},b=0;for(let y=0;y<a.length;y++){const{name:w,fn:v}=a[y],{x:g,y:x,data:S,reset:_}=await v({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=g??d,h=x??h,p={...p,[w]:{...p[w],...S}},_&&b<=50&&(b++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:d,y:h}=mS(u,f,c)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function tu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ds(e,t),b=aR(p),w=a[f?h==="floating"?"reference":"floating":h],v=tf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),g=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},_=tf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:x,strategy:c}):g);return{top:(v.top-_.top+b.top)/S.y,bottom:(_.bottom-v.bottom+b.bottom)/S.y,left:(v.left-_.left+b.left)/S.x,right:(_.right-v.right+b.right)/S.x}}const IF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=ds(t,e)||{};if(u==null)return{};const h=aR(d),f={x:n,y:r},p=Rx(s),b=Tx(p),y=await o.getDimensions(u),w=p==="y",v=w?"top":"left",g=w?"bottom":"right",x=w?"clientHeight":"clientWidth",S=i.reference[b]+i.reference[p]-f[p]-i.floating[b],_=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[x]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[x]||i.floating[b]);const N=S/2-_/2,k=E/2-y[b]/2-1,T=vi(h[v],k),j=vi(h[g],k),I=T,q=E-y[b]-j,P=E/2-y[b]/2+N,V=ey(I,P,q),U=!c.arrow&&_l(s)!=null&&P!==V&&i.reference[b]/2-(P<I?T:j)-y[b]/2<0,G=U?P<I?P-I:P-q:0;return{[p]:f[p]+G,data:{[p]:V,centerOffset:P-V-G,...U&&{alignmentOffset:G}},reset:U}}}),PF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...w}=ds(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=hs(s),g=Pr(a),x=hs(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=f||(x||!y?[ef(a)]:CF(a)),C=b!=="none";!f&&C&&_.push(...TF(a,y,b,S));const E=[a,..._],N=await tu(e,w),k=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(N[v]),h){const P=SF(s,o,S);k.push(N[P[0]],N[P[1]])}if(T=[...T,{placement:s,overflows:k}],!k.every(P=>P<=0)){var j,I;const P=(((j=i.flip)==null?void 0:j.index)||0)+1,V=E[P];if(V&&(!(h==="alignment"?g!==Pr(V):!1)||T.every(A=>A.overflows[0]>0&&Pr(A.placement)===g)))return{data:{index:P,overflows:T},reset:{placement:V}};let U=(I=T.filter(G=>G.overflows[0]<=0).sort((G,A)=>G.overflows[1]-A.overflows[1])[0])==null?void 0:I.placement;if(!U)switch(p){case"bestFit":{var q;const G=(q=T.filter(A=>{if(C){const L=Pr(A.placement);return L===g||L==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(L=>L>0).reduce((L,R)=>L+R,0)]).sort((A,L)=>A[1]-L[1])[0])==null?void 0:q[0];G&&(U=G);break}case"initialPlacement":U=a;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function gS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vS(t){return xF.some(e=>t[e]>=0)}const AF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ds(t,e);switch(r){case"referenceHidden":{const i=await tu(e,{...s,elementContext:"reference"}),o=gS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vS(o)}}}case"escaped":{const i=await tu(e,{...s,altBoundary:!0}),o=gS(i,n.floating);return{data:{escapedOffsets:o,escaped:vS(o)}}}default:return{}}}}},lR=new Set(["left","top"]);async function OF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=hs(n),a=_l(n),c=Pr(n)==="y",u=lR.has(o)?-1:1,d=i&&c?-1:1,h=ds(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof b=="number"&&(p=a==="end"?b*-1:b),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const DF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await OF(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},MF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:g}=w;return{x:v,y:g}}},...c}=ds(t,e),u={x:n,y:r},d=await tu(e,c),h=Pr(hs(s)),f=kx(h);let p=u[f],b=u[h];if(i){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",g=p+d[w],x=p-d[v];p=ey(g,p,x)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",g=b+d[w],x=b-d[v];b=ey(g,b,x)}const y=a.fn({...e,[f]:p,[h]:b});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[h]:o}}}}}},LF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=ds(t,e),d={x:n,y:r},h=Pr(s),f=kx(h);let p=d[f],b=d[h];const y=ds(a,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const x=f==="y"?"height":"width",S=i.reference[f]-i.floating[x]+w.mainAxis,_=i.reference[f]+i.reference[x]-w.mainAxis;p<S?p=S:p>_&&(p=_)}if(u){var v,g;const x=f==="y"?"width":"height",S=lR.has(hs(s)),_=i.reference[h]-i.floating[x]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),C=i.reference[h]+i.reference[x]+(S?0:((g=o.offset)==null?void 0:g[h])||0)-(S?w.crossAxis:0);b<_?b=_:b>C&&(b=C)}return{[f]:p,[h]:b}}}},FF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=ds(t,e),d=await tu(e,u),h=hs(s),f=_l(s),p=Pr(s)==="y",{width:b,height:y}=i.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,w=f==="end"?"top":"bottom");const g=y-d.top-d.bottom,x=b-d.left-d.right,S=vi(y-d[w],g),_=vi(b-d[v],x),C=!e.middlewareData.shift;let E=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=g),C&&!f){const T=_n(d.left,0),j=_n(d.right,0),I=_n(d.top,0),q=_n(d.bottom,0);p?N=b-2*(T!==0||j!==0?T+j:_n(d.left,d.right)):E=y-2*(I!==0||q!==0?I+q:_n(d.top,d.bottom))}await c({...e,availableWidth:N,availableHeight:E});const k=await o.getDimensions(a.floating);return b!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function xp(){return typeof window<"u"}function Sl(t){return cR(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zr(t){var e;return(e=(cR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cR(t){return xp()?t instanceof Node||t instanceof kn(t).Node:!1}function mr(t){return xp()?t instanceof Element||t instanceof kn(t).Element:!1}function Vr(t){return xp()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function yS(t){return!xp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}const $F=new Set(["inline","contents"]);function Uu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!$F.has(s)}const UF=new Set(["table","td","th"]);function VF(t){return UF.has(Sl(t))}const BF=[":popover-open",":modal"];function wp(t){return BF.some(e=>{try{return t.matches(e)}catch{return!1}})}const zF=["transform","translate","scale","rotate","perspective"],WF=["transform","translate","scale","rotate","perspective","filter"],HF=["paint","layout","strict","content"];function jx(t){const e=Ix(),n=mr(t)?gr(t):t;return zF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||WF.some(r=>(n.willChange||"").includes(r))||HF.some(r=>(n.contain||"").includes(r))}function qF(t){let e=yi(t);for(;Vr(e)&&!ol(e);){if(jx(e))return e;if(wp(e))return null;e=yi(e)}return null}function Ix(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const GF=new Set(["html","body","#document"]);function ol(t){return GF.has(Sl(t))}function gr(t){return kn(t).getComputedStyle(t)}function bp(t){return mr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yi(t){if(Sl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yS(t)&&t.host||zr(t);return yS(e)?e.host:e}function uR(t){const e=yi(t);return ol(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&Uu(e)?e:uR(e)}function nu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=uR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=kn(s);if(i){const a=ny(o);return e.concat(o,o.visualViewport||[],Uu(s)?s:[],a&&n?nu(a):[])}return e.concat(s,nu(s,[],n))}function ny(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function dR(t){const e=gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Zh(n)!==i||Zh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Px(t){return mr(t)?t:t.contextElement}function Aa(t){const e=Px(t);if(!Vr(e))return Mr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=dR(e);let o=(i?Zh(n.width):n.width)/r,a=(i?Zh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const KF=Mr(0);function hR(t){const e=kn(t);return!Ix()||!e.visualViewport?KF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function YF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function _o(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Px(t);let o=Mr(1);e&&(r?mr(r)&&(o=Aa(r)):o=Aa(t));const a=YF(i,n,r)?hR(i):Mr(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=kn(i),p=r&&mr(r)?kn(r):r;let b=f,y=ny(b);for(;y&&r&&p!==b;){const w=Aa(y),v=y.getBoundingClientRect(),g=gr(y),x=v.left+(y.clientLeft+parseFloat(g.paddingLeft))*w.x,S=v.top+(y.clientTop+parseFloat(g.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=x,u+=S,b=kn(y),y=ny(b)}}return tf({width:d,height:h,x:c,y:u})}function Ax(t,e){const n=bp(t).scrollLeft;return e?e.left+n:_o(zr(t)).left+n}function fR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Ax(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function QF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=zr(r),a=e?wp(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Mr(1);const d=Mr(0),h=Vr(r);if((h||!h&&!i)&&((Sl(r)!=="body"||Uu(o))&&(c=bp(r)),Vr(r))){const p=_o(r);u=Aa(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?fR(o,c,!0):Mr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function JF(t){return Array.from(t.getClientRects())}function XF(t){const e=zr(t),n=bp(t),r=t.ownerDocument.body,s=_n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ax(t);const a=-n.scrollTop;return gr(r).direction==="rtl"&&(o+=_n(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function ZF(t,e){const n=kn(t),r=zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=Ix();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const e$=new Set(["absolute","fixed"]);function t$(t,e){const n=_o(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vr(t)?Aa(t):Mr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function xS(t,e,n){let r;if(e==="viewport")r=ZF(t,n);else if(e==="document")r=XF(zr(t));else if(mr(e))r=t$(e,n);else{const s=hR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return tf(r)}function pR(t,e){const n=yi(t);return n===e||!mr(n)||ol(n)?!1:gr(n).position==="fixed"||pR(n,e)}function n$(t,e){const n=e.get(t);if(n)return n;let r=nu(t,[],!1).filter(a=>mr(a)&&Sl(a)!=="body"),s=null;const i=gr(t).position==="fixed";let o=i?yi(t):t;for(;mr(o)&&!ol(o);){const a=gr(o),c=jx(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&e$.has(s.position)||Uu(o)&&!c&&pR(t,o))?r=r.filter(d=>d!==o):s=a,o=yi(o)}return e.set(t,r),r}function r$(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?wp(e)?[]:n$(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,d)=>{const h=xS(e,d,s);return u.top=_n(h.top,u.top),u.right=vi(h.right,u.right),u.bottom=vi(h.bottom,u.bottom),u.left=_n(h.left,u.left),u},xS(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function s$(t){const{width:e,height:n}=dR(t);return{width:e,height:n}}function i$(t,e,n){const r=Vr(e),s=zr(e),i=n==="fixed",o=_o(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Mr(0);function u(){c.x=Ax(s)}if(r||!r&&!i)if((Sl(e)!=="body"||Uu(s))&&(a=bp(e)),r){const p=_o(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?fR(s,a):Mr(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function eg(t){return gr(t).position==="static"}function wS(t,e){if(!Vr(t)||gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return zr(t)===n&&(n=n.ownerDocument.body),n}function mR(t,e){const n=kn(t);if(wp(t))return n;if(!Vr(t)){let s=yi(t);for(;s&&!ol(s);){if(mr(s)&&!eg(s))return s;s=yi(s)}return n}let r=wS(t,e);for(;r&&VF(r)&&eg(r);)r=wS(r,e);return r&&ol(r)&&eg(r)&&!jx(r)?n:r||qF(t)||n}const o$=async function(t){const e=this.getOffsetParent||mR,n=this.getDimensions,r=await n(t.floating);return{reference:i$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a$(t){return gr(t).direction==="rtl"}const l$={convertOffsetParentRelativeRectToViewportRelativeRect:QF,getDocumentElement:zr,getClippingRect:r$,getOffsetParent:mR,getElementRects:o$,getClientRects:JF,getDimensions:s$,getScale:Aa,isElement:mr,isRTL:a$};function gR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function c$(t,e){let n=null,r;const s=zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const b=Ad(h),y=Ad(s.clientWidth-(d+f)),w=Ad(s.clientHeight-(h+p)),v=Ad(d),x={rootMargin:-b+"px "+-y+"px "+-w+"px "+-v+"px",threshold:_n(0,vi(1,c))||1};let S=!0;function _(C){const E=C[0].intersectionRatio;if(E!==c){if(!S)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!gR(u,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,x)}n.observe(t)}return o(!0),i}function u$(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Px(t),d=s||i?[...u?nu(u):[],...nu(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=u&&a?c$(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let b,y=c?_o(t):null;c&&w();function w(){const v=_o(t);y&&!gR(y,v)&&n(),y=v,b=requestAnimationFrame(w)}return n(),()=>{var v;d.forEach(g=>{s&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const d$=DF,h$=MF,f$=PF,p$=FF,m$=AF,bS=IF,g$=LF,v$=(t,e,n)=>{const r=new Map,s={platform:l$,...n},i={...s.platform,_c:r};return jF(t,e,{...s,platform:i})};var y$=typeof document<"u",x$=function(){},ph=y$?m.useLayoutEffect:x$;function nf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!nf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!nf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function vR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _S(t,e){const n=vR(t);return Math.round(e*n)/n}function tg(t){const e=m.useRef(t);return ph(()=>{e.current=t}),e}function w$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[d,h]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(r);nf(f,r)||p(r);const[b,y]=m.useState(null),[w,v]=m.useState(null),g=m.useCallback(A=>{A!==C.current&&(C.current=A,y(A))},[]),x=m.useCallback(A=>{A!==E.current&&(E.current=A,v(A))},[]),S=i||b,_=o||w,C=m.useRef(null),E=m.useRef(null),N=m.useRef(d),k=c!=null,T=tg(c),j=tg(s),I=tg(u),q=m.useCallback(()=>{if(!C.current||!E.current)return;const A={placement:e,strategy:n,middleware:f};j.current&&(A.platform=j.current),v$(C.current,E.current,A).then(L=>{const R={...L,isPositioned:I.current!==!1};P.current&&!nf(N.current,R)&&(N.current=R,Oo.flushSync(()=>{h(R)}))})},[f,e,n,j,I]);ph(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[u]);const P=m.useRef(!1);ph(()=>(P.current=!0,()=>{P.current=!1}),[]),ph(()=>{if(S&&(C.current=S),_&&(E.current=_),S&&_){if(T.current)return T.current(S,_,q);q()}},[S,_,q,T,k]);const V=m.useMemo(()=>({reference:C,floating:E,setReference:g,setFloating:x}),[g,x]),U=m.useMemo(()=>({reference:S,floating:_}),[S,_]),G=m.useMemo(()=>{const A={position:n,left:0,top:0};if(!U.floating)return A;const L=_S(U.floating,d.x),R=_S(U.floating,d.y);return a?{...A,transform:"translate("+L+"px, "+R+"px)",...vR(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:R}},[n,a,U.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:q,refs:V,elements:U,floatingStyles:G}),[d,q,V,U,G])}const b$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?bS({element:r.current,padding:s}).fn(n):{}:r?bS({element:r,padding:s}).fn(n):{}}}},_$=(t,e)=>({...d$(t),options:[t,e]}),S$=(t,e)=>({...h$(t),options:[t,e]}),C$=(t,e)=>({...g$(t),options:[t,e]}),E$=(t,e)=>({...f$(t),options:[t,e]}),N$=(t,e)=>({...p$(t),options:[t,e]}),k$=(t,e)=>({...m$(t),options:[t,e]}),T$=(t,e)=>({...b$(t),options:[t,e]});var R$="Arrow",yR=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(te.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});yR.displayName=R$;var j$=yR;function Ox(t){const[e,n]=m.useState(void 0);return yt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Dx="Popper",[xR,_p]=gn(Dx),[I$,wR]=xR(Dx),bR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return l.jsx(I$,{scope:e,anchor:r,onAnchorChange:s,children:n})};bR.displayName=Dx;var _R="PopperAnchor",SR=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=wR(_R,n),o=m.useRef(null),a=me(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(te.div,{...s,ref:a})});SR.displayName=_R;var Mx="PopperContent",[P$,A$]=xR(Mx),CR=m.forwardRef((t,e)=>{var Y,Ee,Fe,Se,we,_e;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:b,...y}=t,w=wR(Mx,n),[v,g]=m.useState(null),x=me(e,it=>g(it)),[S,_]=m.useState(null),C=Ox(S),E=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,k=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],I=j.length>0,q={padding:T,boundary:j.filter(D$),altBoundary:I},{refs:P,floatingStyles:V,placement:U,isPositioned:G,middlewareData:A}=w$({strategy:"fixed",placement:k,whileElementsMounted:(...it)=>u$(...it,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[_$({mainAxis:s+N,alignmentAxis:o}),c&&S$({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?C$():void 0,...q}),c&&E$({...q}),N$({...q,apply:({elements:it,rects:nn,availableWidth:Ss,availableHeight:qr})=>{const{width:Cs,height:Mo}=nn.reference,Ai=it.floating.style;Ai.setProperty("--radix-popper-available-width",`${Ss}px`),Ai.setProperty("--radix-popper-available-height",`${qr}px`),Ai.setProperty("--radix-popper-anchor-width",`${Cs}px`),Ai.setProperty("--radix-popper-anchor-height",`${Mo}px`)}}),S&&T$({element:S,padding:a}),M$({arrowWidth:E,arrowHeight:N}),f&&k$({strategy:"referenceHidden",...q})]}),[L,R]=kR(U),W=pt(b);yt(()=>{G&&(W==null||W())},[G,W]);const D=(Y=A.arrow)==null?void 0:Y.x,ne=(Ee=A.arrow)==null?void 0:Ee.y,re=((Fe=A.arrow)==null?void 0:Fe.centerOffset)!==0,[je,ze]=m.useState();return yt(()=>{v&&ze(window.getComputedStyle(v).zIndex)},[v]),l.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:G?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(Se=A.transformOrigin)==null?void 0:Se.x,(we=A.transformOrigin)==null?void 0:we.y].join(" "),...((_e=A.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(P$,{scope:n,placedSide:L,onArrowChange:_,arrowX:D,arrowY:ne,shouldHideArrow:re,children:l.jsx(te.div,{"data-side":L,"data-align":R,...y,ref:x,style:{...y.style,animation:G?void 0:"none"}})})})});CR.displayName=Mx;var ER="PopperArrow",O$={top:"bottom",right:"left",bottom:"top",left:"right"},NR=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=A$(ER,r),o=O$[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(j$,{...s,ref:n,style:{...s.style,display:"block"}})})});NR.displayName=ER;function D$(t){return t!==null}var M$=t=>({name:"transformOrigin",options:t,fn(e){var w,v,g;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=kR(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let b="",y="";return u==="bottom"?(b=o?h:`${f}px`,y=`${-c}px`):u==="top"?(b=o?h:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,y=o?h:`${p}px`):u==="left"&&(b=`${r.floating.width+c}px`,y=o?h:`${p}px`),{data:{x:b,y}}}});function kR(t){const[e,n="center"]=t.split("-");return[e,n]}var L$=bR,TR=SR,RR=CR,jR=NR,[Sp,Ate]=gn("Tooltip",[_p]),Lx=_p(),IR="TooltipProvider",F$=700,SS="tooltip.open",[$$,PR]=Sp(IR),AR=t=>{const{__scopeTooltip:e,delayDuration:n=F$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),a=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx($$,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:m.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};AR.displayName=IR;var OR="Tooltip",[Ote,Cp]=Sp(OR),ry="TooltipTrigger",U$=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Cp(ry,n),i=PR(ry,n),o=Lx(n),a=m.useRef(null),c=me(e,a,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(TR,{asChild:!0,...o,children:l.jsx(te.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:X(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:X(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:X(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:X(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:X(t.onBlur,s.onClose),onClick:X(t.onClick,s.onClose)})})});U$.displayName=ry;var V$="TooltipPortal",[Dte,B$]=Sp(V$,{forceMount:void 0}),al="TooltipContent",DR=m.forwardRef((t,e)=>{const n=B$(al,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Cp(al,t.__scopeTooltip);return l.jsx(In,{present:r||o.open,children:o.disableHoverableContent?l.jsx(MR,{side:s,...i,ref:e}):l.jsx(z$,{side:s,...i,ref:e})})}),z$=m.forwardRef((t,e)=>{const n=Cp(al,t.__scopeTooltip),r=PR(al,t.__scopeTooltip),s=m.useRef(null),i=me(e,s),[o,a]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=m.useCallback(()=>{a(null),h(!1)},[h]),p=m.useCallback((b,y)=>{const w=b.currentTarget,v={x:b.clientX,y:b.clientY},g=K$(v,w.getBoundingClientRect()),x=Y$(v,g),S=Q$(y.getBoundingClientRect()),_=X$([...x,...S]);a(_),h(!0)},[h]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&d){const b=w=>p(w,d),y=w=>p(w,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",y)}}},[c,d,p,f]),m.useEffect(()=>{if(o){const b=y=>{const w=y.target,v={x:y.clientX,y:y.clientY},g=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),x=!J$(v,o);g?f():x&&(f(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,f]),l.jsx(MR,{...t,ref:i})}),[W$,H$]=Sp(OR,{isInside:!1}),q$=Z4("TooltipContent"),MR=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=Cp(al,n),u=Lx(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(SS,d),()=>document.removeEventListener(SS,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(RR,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(q$,{children:r}),l.jsx(W$,{scope:n,isInside:!0,children:l.jsx(b5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});DR.displayName=al;var LR="TooltipArrow",G$=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Lx(n);return H$(LR,n).isInside?null:l.jsx(jR,{...s,...r,ref:e})});G$.displayName=LR;function K$(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Y$(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Q$(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function J$(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function X$(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Z$(e)}function Z$(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var e6=AR,FR=DR;const t6=e6,n6=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(FR,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));n6.displayName=FR.displayName;var Ep=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Np=typeof window>"u"||"Deno"in globalThis;function Xn(){}function r6(t,e){return typeof t=="function"?t(e):t}function s6(t){return typeof t=="number"&&t>=0&&t!==1/0}function i6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sy(t,e){return typeof t=="function"?t(e):t}function o6(t,e){return typeof t=="function"?t(e):t}function CS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Fx(o,e.options))return!1}else if(!su(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function ES(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ru(e.options.mutationKey)!==ru(i))return!1}else if(!su(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Fx(t,e){return((e==null?void 0:e.queryKeyHashFn)||ru)(t)}function ru(t){return JSON.stringify(t,(e,n)=>iy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function su(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>su(t[n],e[n])):!1}function $R(t,e){if(t===e)return t;const n=NS(t)&&NS(e);if(n||iy(t)&&iy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=$R(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:a}return e}function NS(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function iy(t){if(!kS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!kS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function kS(t){return Object.prototype.toString.call(t)==="[object Object]"}function a6(t){return new Promise(e=>{setTimeout(e,t)})}function l6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$R(t,e):e}function c6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function u6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $x=Symbol();function UR(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$x?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var to,Gs,za,JE,d6=(JE=class extends Ep{constructor(){super();Ne(this,to);Ne(this,Gs);Ne(this,za);de(this,za,e=>{if(!Np&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,Gs)||this.setEventListener(F(this,za))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Gs))==null||e.call(this),de(this,Gs,void 0))}setEventListener(e){var n;de(this,za,e),(n=F(this,Gs))==null||n.call(this),de(this,Gs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){F(this,to)!==e&&(de(this,to,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,to)=="boolean"?F(this,to):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},to=new WeakMap,Gs=new WeakMap,za=new WeakMap,JE),VR=new d6,Wa,Ks,Ha,XE,h6=(XE=class extends Ep{constructor(){super();Ne(this,Wa,!0);Ne(this,Ks);Ne(this,Ha);de(this,Ha,e=>{if(!Np&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){F(this,Ks)||this.setEventListener(F(this,Ha))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Ks))==null||e.call(this),de(this,Ks,void 0))}setEventListener(e){var n;de(this,Ha,e),(n=F(this,Ks))==null||n.call(this),de(this,Ks,e(this.setOnline.bind(this)))}setOnline(e){F(this,Wa)!==e&&(de(this,Wa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return F(this,Wa)}},Wa=new WeakMap,Ks=new WeakMap,Ha=new WeakMap,XE),rf=new h6;function f6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function p6(t){return Math.min(1e3*2**t,3e4)}function BR(t){return(t??"online")==="online"?rf.isOnline():!0}var zR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ng(t){return t instanceof zR}function WR(t){let e=!1,n=0,r=!1,s;const i=f6(),o=y=>{var w;r||(f(new zR(y)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>VR.isFocused()&&(t.networkMode==="always"||rf.isOnline())&&t.canRun(),d=()=>BR(t.networkMode)&&t.canRun(),h=y=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,y),s==null||s(),i.resolve(y))},f=y=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,y),s==null||s(),i.reject(y))},p=()=>new Promise(y=>{var w;s=v=>{(r||u())&&y(v)},(w=t.onPause)==null||w.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),b=()=>{if(r)return;let y;const w=n===0?t.initialPromise:void 0;try{y=w??t.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var C;if(r)return;const g=t.retry??(Np?0:3),x=t.retryDelay??p6,S=typeof x=="function"?x(n,v):x,_=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,v);if(e||!_){f(v);return}n++,(C=t.onFail)==null||C.call(t,n,v),a6(S).then(()=>u()?void 0:p()).then(()=>{e?f(v):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?b():p().then(b),i)}}var m6=t=>setTimeout(t,0);function g6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=m6;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Yt=g6(),no,ZE,HR=(ZE=class{constructor(){Ne(this,no)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s6(this.gcTime)&&de(this,no,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Np?1/0:5*60*1e3))}clearGcTimeout(){F(this,no)&&(clearTimeout(F(this,no)),de(this,no,void 0))}},no=new WeakMap,ZE),qa,ro,An,so,Ft,Ru,io,er,Yr,eN,v6=(eN=class extends HR{constructor(e){super();Ne(this,er);Ne(this,qa);Ne(this,ro);Ne(this,An);Ne(this,so);Ne(this,Ft);Ne(this,Ru);Ne(this,io);de(this,io,!1),de(this,Ru,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,so,e.client),de(this,An,F(this,so).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,qa,x6(this.options)),this.state=e.state??F(this,qa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,Ft))==null?void 0:e.promise}setOptions(e){this.options={...F(this,Ru),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,An).remove(this)}setData(e,n){const r=l6(this.state.data,e,this.options);return Ot(this,er,Yr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ot(this,er,Yr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=F(this,Ft))==null?void 0:r.promise;return(s=F(this,Ft))==null||s.cancel(e),n?n.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,qa))}isActive(){return this.observers.some(e=>o6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$x||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>sy(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!i6(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Ft))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Ft))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,An).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(F(this,Ft)&&(F(this,io)?F(this,Ft).cancel({revert:!0}):F(this,Ft).cancelRetry()),this.scheduleGc()),F(this,An).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ot(this,er,Yr).call(this,{type:"invalidate"})}fetch(e,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,Ft))return F(this,Ft).continueRetry(),F(this,Ft).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(de(this,io,!0),r.signal)})},i=()=>{const f=UR(this.options,n),b=(()=>{const y={client:F(this,so),queryKey:this.queryKey,meta:this.meta};return s(y),y})();return de(this,io,!1),this.options.persister?this.options.persister(f,b,this):f(b)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,so),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),de(this,ro,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Ot(this,er,Yr).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,b,y,w;ng(f)&&f.silent||Ot(this,er,Yr).call(this,{type:"error",error:f}),ng(f)||((b=(p=F(this,An).config).onError)==null||b.call(p,f,this),(w=(y=F(this,An).config).onSettled)==null||w.call(y,this.state.data,f,this)),this.scheduleGc()};return de(this,Ft,WR({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,b,y,w;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){c(v);return}(b=(p=F(this,An).config).onSuccess)==null||b.call(p,f,this),(w=(y=F(this,An).config).onSettled)==null||w.call(y,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{Ot(this,er,Yr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Ot(this,er,Yr).call(this,{type:"pause"})},onContinue:()=>{Ot(this,er,Yr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),F(this,Ft).start()}},qa=new WeakMap,ro=new WeakMap,An=new WeakMap,so=new WeakMap,Ft=new WeakMap,Ru=new WeakMap,io=new WeakMap,er=new WeakSet,Yr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...y6(r.data,this.options),fetchMeta:e.meta??null};case"success":return de(this,ro,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return ng(s)&&s.revert&&F(this,ro)?{...F(this,ro),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Yt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),F(this,An).notify({query:this,type:"updated",action:e})})},eN);function y6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:BR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function x6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kr,tN,w6=(tN=class extends Ep{constructor(e={}){super();Ne(this,kr);this.config=e,de(this,kr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Fx(s,n);let o=this.get(i);return o||(o=new v6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){F(this,kr).has(e.queryHash)||(F(this,kr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,kr).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,kr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,kr).get(e)}getAll(){return[...F(this,kr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>CS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>CS(e,r)):n}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kr=new WeakMap,tN),Tr,Gt,oo,Rr,Is,nN,b6=(nN=class extends HR{constructor(e){super();Ne(this,Rr);Ne(this,Tr);Ne(this,Gt);Ne(this,oo);this.mutationId=e.mutationId,de(this,Gt,e.mutationCache),de(this,Tr,[]),this.state=e.state||_6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,Tr).includes(e)||(F(this,Tr).push(e),this.clearGcTimeout(),F(this,Gt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,Tr,F(this,Tr).filter(n=>n!==e)),this.scheduleGc(),F(this,Gt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,Tr).length||(this.state.status==="pending"?this.scheduleGc():F(this,Gt).remove(this))}continue(){var e;return((e=F(this,oo))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,d,h,f,p,b,y,w,v,g,x,S,_,C,E,N;const n=()=>{Ot(this,Rr,Is).call(this,{type:"continue"})};de(this,oo,WR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{Ot(this,Rr,Is).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{Ot(this,Rr,Is).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,Gt).canRun(this)}));const r=this.state.status==="pending",s=!F(this,oo).canStart();try{if(r)n();else{Ot(this,Rr,Is).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=F(this,Gt).config).onMutate)==null?void 0:o.call(i,e,this));const T=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));T!==this.state.context&&Ot(this,Rr,Is).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const k=await F(this,oo).start();return await((d=(u=F(this,Gt).config).onSuccess)==null?void 0:d.call(u,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((b=(p=F(this,Gt).config).onSettled)==null?void 0:b.call(p,k,null,this.state.variables,this.state.context,this)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,k,null,e,this.state.context)),Ot(this,Rr,Is).call(this,{type:"success",data:k}),k}catch(k){try{throw await((g=(v=F(this,Gt).config).onError)==null?void 0:g.call(v,k,e,this.state.context,this)),await((S=(x=this.options).onError)==null?void 0:S.call(x,k,e,this.state.context)),await((C=(_=F(this,Gt).config).onSettled)==null?void 0:C.call(_,void 0,k,this.state.variables,this.state.context,this)),await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,k,e,this.state.context)),k}finally{Ot(this,Rr,Is).call(this,{type:"error",error:k})}}finally{F(this,Gt).runNext(this)}}},Tr=new WeakMap,Gt=new WeakMap,oo=new WeakMap,Rr=new WeakSet,Is=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yt.batch(()=>{F(this,Tr).forEach(r=>{r.onMutationUpdate(e)}),F(this,Gt).notify({mutation:this,type:"updated",action:e})})},nN);function _6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zr,tr,ju,rN,S6=(rN=class extends Ep{constructor(e={}){super();Ne(this,Zr);Ne(this,tr);Ne(this,ju);this.config=e,de(this,Zr,new Set),de(this,tr,new Map),de(this,ju,0)}build(e,n,r){const s=new b6({mutationCache:this,mutationId:++hd(this,ju)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){F(this,Zr).add(e);const n=Od(e);if(typeof n=="string"){const r=F(this,tr).get(n);r?r.push(e):F(this,tr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,Zr).delete(e)){const n=Od(e);if(typeof n=="string"){const r=F(this,tr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&F(this,tr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Od(e);if(typeof n=="string"){const r=F(this,tr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Od(e);if(typeof n=="string"){const s=(r=F(this,tr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yt.batch(()=>{F(this,Zr).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,Zr).clear(),F(this,tr).clear()})}getAll(){return Array.from(F(this,Zr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ES(n,r))}findAll(e={}){return this.getAll().filter(n=>ES(e,n))}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},Zr=new WeakMap,tr=new WeakMap,ju=new WeakMap,rN);function Od(t){var e;return(e=t.options.scope)==null?void 0:e.id}function TS(t){return{onFetch:(e,n)=>{var d,h,f,p,b;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const w=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},v=UR(e.options,e.fetchOptions),g=async(x,S,_)=>{if(y)return Promise.reject();if(S==null&&x.pages.length)return Promise.resolve(x);const E=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};return w(j),j})(),N=await v(E),{maxPages:k}=e.options,T=_?u6:c6;return{pages:T(x.pages,N,k),pageParams:T(x.pageParams,S,k)}};if(s&&i.length){const x=s==="backward",S=x?C6:RS,_={pages:i,pageParams:o},C=S(r,_);a=await g(_,C,x)}else{const x=t??i.length;do{const S=c===0?o[0]??r.initialPageParam:RS(r,a);if(c>0&&S==null)break;a=await g(a,S),c++}while(c<x)}return a};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function RS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function C6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Xe,Ys,Qs,Ga,Ka,Js,Ya,Qa,sN,E6=(sN=class{constructor(t={}){Ne(this,Xe);Ne(this,Ys);Ne(this,Qs);Ne(this,Ga);Ne(this,Ka);Ne(this,Js);Ne(this,Ya);Ne(this,Qa);de(this,Xe,t.queryCache||new w6),de(this,Ys,t.mutationCache||new S6),de(this,Qs,t.defaultOptions||{}),de(this,Ga,new Map),de(this,Ka,new Map),de(this,Js,0)}mount(){hd(this,Js)._++,F(this,Js)===1&&(de(this,Ya,VR.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Xe).onFocus())})),de(this,Qa,rf.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Xe).onOnline())})))}unmount(){var t,e;hd(this,Js)._--,F(this,Js)===0&&((t=F(this,Ya))==null||t.call(this),de(this,Ya,void 0),(e=F(this,Qa))==null||e.call(this),de(this,Qa,void 0))}isFetching(t){return F(this,Xe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,Ys).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Xe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,Xe).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(sy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return F(this,Xe).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=F(this,Xe).get(r.queryHash),i=s==null?void 0:s.state.data,o=r6(e,i);if(o!==void 0)return F(this,Xe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Yt.batch(()=>F(this,Xe).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Xe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,Xe);Yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,Xe);return Yt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Yt.batch(()=>F(this,Xe).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xn).catch(Xn)}invalidateQueries(t,e={}){return Yt.batch(()=>(F(this,Xe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Yt.batch(()=>F(this,Xe).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,Xe).build(this,e);return n.isStaleByTime(sy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=TS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=TS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rf.isOnline()?F(this,Ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Xe)}getMutationCache(){return F(this,Ys)}getDefaultOptions(){return F(this,Qs)}setDefaultOptions(t){de(this,Qs,t)}setQueryDefaults(t,e){F(this,Ga).set(ru(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,Ga).values()],n={};return e.forEach(r=>{su(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){F(this,Ka).set(ru(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,Ka).values()],n={};return e.forEach(r=>{su(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,Qs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Fx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$x&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,Qs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Xe).clear(),F(this,Ys).clear()}},Xe=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,Ga=new WeakMap,Ka=new WeakMap,Js=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,sN),N6=m.createContext(void 0),k6=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(N6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(this,arguments)}var ei;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ei||(ei={}));const jS="popstate";function T6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=Vu(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),oy("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:qR(i))}function r(s,i){Ux(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return j6(e,n,r,t)}function pn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ux(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R6(){return Math.random().toString(36).substr(2,8)}function IS(t,e){return{usr:t.state,key:t.key,idx:e}}function oy(t,e,n,r){return n===void 0&&(n=null),sf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vu(e):e,{state:n,key:e&&e.key||r||R6()})}function qR(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function j6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ei.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(sf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ei.Pop;let w=d(),v=w==null?null:w-u;u=w,c&&c({action:a,location:y.location,delta:v})}function f(w,v){a=ei.Push;let g=oy(y.location,w,v);n&&n(g,w),u=d()+1;let x=IS(g,u),S=y.createHref(g);try{o.pushState(x,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(S)}i&&c&&c({action:a,location:y.location,delta:1})}function p(w,v){a=ei.Replace;let g=oy(y.location,w,v);n&&n(g,w),u=d();let x=IS(g,u),S=y.createHref(g);o.replaceState(x,"",S),i&&c&&c({action:a,location:y.location,delta:0})}function b(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:qR(w);return g=g.replace(/ $/,"%20"),pn(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(jS,h),c=w,()=>{s.removeEventListener(jS,h),c=null}},createHref(w){return e(s,w)},createURL:b,encodeLocation(w){let v=b(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return y}var PS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(PS||(PS={}));function I6(t,e,n){return n===void 0&&(n="/"),P6(t,e,n,!1)}function P6(t,e,n,r){let s=typeof e=="string"?Vu(e):e,i=YR(s.pathname||"/",n);if(i==null)return null;let o=GR(t);A6(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=W6(i);a=B6(o[c],u,r)}return a}function GR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(pn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Oa([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(pn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),GR(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:U6(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of KR(i.path))s(i,o,c)}),e}function KR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=KR(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function A6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:V6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O6=/^:[\w-]+$/,D6=3,M6=2,L6=1,F6=10,$6=-2,AS=t=>t==="*";function U6(t,e){let n=t.split("/"),r=n.length;return n.some(AS)&&(r+=$6),e&&(r+=M6),n.filter(s=>!AS(s)).reduce((s,i)=>s+(O6.test(i)?D6:i===""?L6:F6),r)}function V6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function B6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=OS({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=OS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Oa([i,h.pathname]),pathnameBase:H6(Oa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Oa([i,h.pathnameBase]))}return o}function OS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=a[h];return p&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function z6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ux(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function W6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ux(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function YR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Oa=t=>t.join("/").replace(/\/\/+/g,"/"),H6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function q6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QR=["post","put","patch","delete"];new Set(QR);const G6=["get",...QR];new Set(G6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(this,arguments)}const K6=m.createContext(null),Y6=m.createContext(null),JR=m.createContext(null),kp=m.createContext(null),Tp=m.createContext({outlet:null,matches:[],isDataRoute:!1}),XR=m.createContext(null);function Vx(){return m.useContext(kp)!=null}function ZR(){return Vx()||pn(!1),m.useContext(kp).location}function Q6(t,e){return J6(t,e)}function J6(t,e,n,r){Vx()||pn(!1);let{navigator:s}=m.useContext(JR),{matches:i}=m.useContext(Tp),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ZR(),d;if(e){var h;let w=typeof e=="string"?Vu(e):e;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||pn(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=I6(t,{pathname:p}),y=nU(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Oa([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Oa([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&y?m.createElement(kp.Provider,{value:{location:of({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ei.Pop}},y):y}function X6(){let t=oU(),e=q6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const Z6=m.createElement(X6,null);class eU extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(Tp.Provider,{value:this.props.routeContext},m.createElement(XR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tU(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(K6);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Tp.Provider,{value:e},r)}function nU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||pn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,b=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,b=!1,y=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||Z6,c&&(u<0&&f===0?(b=!0,w=null):u===f&&(b=!0,w=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),g=()=>{let x;return p?x=y:b?x=w:h.route.Component?x=m.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,m.createElement(tU,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(eU,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var ay=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ay||{});function rU(t){let e=m.useContext(Y6);return e||pn(!1),e}function sU(t){let e=m.useContext(Tp);return e||pn(!1),e}function iU(t){let e=sU(),n=e.matches[e.matches.length-1];return n.route.id||pn(!1),n.route.id}function oU(){var t;let e=m.useContext(XR),n=rU(ay.UseRouteError),r=iU(ay.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ly(t){pn(!1)}function lU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ei.Pop,navigator:i,static:o=!1,future:a}=t;Vx()&&pn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:of({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Vu(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:b="default"}=r,y=m.useMemo(()=>{let w=YR(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:b},navigationType:s}},[c,d,h,f,p,b,s]);return y==null?null:m.createElement(JR.Provider,{value:u},m.createElement(kp.Provider,{children:n,value:y}))}function cU(t){let{children:e,location:n}=t;return Q6(cy(e),n)}new Promise(()=>{});function cy(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,cy(r.props.children,i));return}r.type!==ly&&pn(!1),!r.props.index||!r.props.children||pn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cy(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const uU="6";try{window.__reactRouterVersion=uU}catch{}const dU="startTransition",DS=j0[dU];function hU(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=T6({window:s,v5Compat:!0}));let o=i.current,[a,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&DS?DS(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>aU(r),[r]),m.createElement(lU,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var MS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(MS||(MS={}));var LS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(LS||(LS={}));const fU=()=>{};var FS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Cl(e)},Cl=function(t){return new Error("Firebase Database ("+ej.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new mU;const f=i<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nj=function(t){const e=tj(t);return Bx.encodeByteArray(e,!0)},af=function(t){return nj(t).replace(/\./g,"")},lf=function(t){try{return Bx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){return rj(void 0,t)}function rj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!vU(n)||(t[n]=rj(t[n],e[n]));return t}function vU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=()=>yU().__FIREBASE_DEFAULTS__,wU=()=>{if(typeof process>"u"||typeof FS>"u")return;const t=FS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lf(t[1]);return e&&JSON.parse(e)},zx=()=>{try{return fU()||xU()||wU()||bU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sj=t=>{var e,n;return(n=(e=zx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},_U=t=>{const e=sj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ij=()=>{var t;return(t=zx())==null?void 0:t.config},oj=t=>{var e;return(e=zx())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[af(JSON.stringify(n)),af(JSON.stringify(o)),""].join(".")}const Cc={};function CU(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?t.emulator.push(e):t.prod.push(e);return t}function EU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $S=!1;function lj(t,e){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||Cc[t]===e||Cc[t]||$S)return;Cc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=CU().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{$S=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=EU(r),p=n("text"),b=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),w=document.getElementById(y)||document.createElement("a"),v=n("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const x=f.element;a(x),d(w,y);const S=u();c(g,v),x.append(g,b,w,S),document.body.appendChild(x)}i?(b.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function NU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TU(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uj(){return ej.NODE_ADMIN===!0}function RU(){try{return typeof indexedDB=="object"}catch{return!1}}function jU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IU,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?PU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,a,r)}}function PU(t,e){return t.replace(AU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=iu(lf(i[0])||""),n=iu(lf(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},OU=function(t){const e=dj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},DU=function(t){const e=dj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ll(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function uy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cf(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function So(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(US(i)&&US(o)){if(!So(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function US(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function LU(t,e){const n=new FU(t,e);return n.subscribe.bind(n)}class FU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$U(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rg),s.error===void 0&&(s.error=rg),s.complete===void 0&&(s.complete=rg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $U(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rg(){}function Hx(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t){return t&&t._delegate?t._delegate:t}class Co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zU(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BU(t){return t===Vi?void 0:t}function zU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const HU={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},qU=Pe.INFO,GU={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},KU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qx{constructor(e){this.name=e,this._logLevel=qU,this._logHandler=KU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const YU=(t,e)=>e.some(n=>t instanceof n);let VS,BS;function QU(){return VS||(VS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JU(){return BS||(BS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hj=new WeakMap,dy=new WeakMap,fj=new WeakMap,sg=new WeakMap,Gx=new WeakMap;function XU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ci(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hj.set(n,t)}).catch(()=>{}),Gx.set(e,t),e}function ZU(t){if(dy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dy.set(t,e)}let hy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eV(t){hy=t(hy)}function tV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ig(this),e,...n);return fj.set(r,e.sort?e.sort():[e]),ci(r)}:JU().includes(t)?function(...e){return t.apply(ig(this),e),ci(hj.get(this))}:function(...e){return ci(t.apply(ig(this),e))}}function nV(t){return typeof t=="function"?tV(t):(t instanceof IDBTransaction&&ZU(t),YU(t,QU())?new Proxy(t,hy):t)}function ci(t){if(t instanceof IDBRequest)return XU(t);if(sg.has(t))return sg.get(t);const e=nV(t);return e!==t&&(sg.set(t,e),Gx.set(e,t)),e}const ig=t=>Gx.get(t);function rV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ci(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ci(o.result),c.oldVersion,c.newVersion,ci(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const sV=["get","getKey","getAll","getAllKeys","count"],iV=["put","add","delete","clear"],og=new Map;function zS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=iV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return og.set(e,i),i}eV(t=>({...t,get:(e,n,r)=>zS(e,n)||t.get(e,n,r),has:(e,n)=>!!zS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function aV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fy="@firebase/app",WS="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new qx("@firebase/app"),lV="@firebase/app-compat",cV="@firebase/analytics-compat",uV="@firebase/analytics",dV="@firebase/app-check-compat",hV="@firebase/app-check",fV="@firebase/auth",pV="@firebase/auth-compat",mV="@firebase/database",gV="@firebase/data-connect",vV="@firebase/database-compat",yV="@firebase/functions",xV="@firebase/functions-compat",wV="@firebase/installations",bV="@firebase/installations-compat",_V="@firebase/messaging",SV="@firebase/messaging-compat",CV="@firebase/performance",EV="@firebase/performance-compat",NV="@firebase/remote-config",kV="@firebase/remote-config-compat",TV="@firebase/storage",RV="@firebase/storage-compat",jV="@firebase/firestore",IV="@firebase/ai",PV="@firebase/firestore-compat",AV="firebase",OV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="[DEFAULT]",DV={[fy]:"fire-core",[lV]:"fire-core-compat",[uV]:"fire-analytics",[cV]:"fire-analytics-compat",[hV]:"fire-app-check",[dV]:"fire-app-check-compat",[fV]:"fire-auth",[pV]:"fire-auth-compat",[mV]:"fire-rtdb",[gV]:"fire-data-connect",[vV]:"fire-rtdb-compat",[yV]:"fire-fn",[xV]:"fire-fn-compat",[wV]:"fire-iid",[bV]:"fire-iid-compat",[_V]:"fire-fcm",[SV]:"fire-fcm-compat",[CV]:"fire-perf",[EV]:"fire-perf-compat",[NV]:"fire-rc",[kV]:"fire-rc-compat",[TV]:"fire-gcs",[RV]:"fire-gcs-compat",[jV]:"fire-fst",[PV]:"fire-fst-compat",[IV]:"fire-vertex","fire-js":"fire-js",[AV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,MV=new Map,my=new Map;function HS(t,e){try{t.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(my.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;my.set(e,t);for(const n of uf.values())HS(n,t);for(const n of MV.values())HS(n,t);return!0}function Kx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Bu("app","Firebase",LV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=OV;function pj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:py,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ui.create("bad-app-name",{appName:String(s)});if(n||(n=ij()),!n)throw ui.create("no-options");const i=uf.get(s);if(i){if(So(n,i.options)&&So(r,i.config))return i;throw ui.create("duplicate-app",{appName:s})}const o=new WU(s);for(const c of my.values())o.addComponent(c);const a=new FV(n,r,o);return uf.set(s,a),a}function mj(t=py){const e=uf.get(t);if(!e&&t===py&&ij())return pj();if(!e)throw ui.create("no-app",{appName:t});return e}function di(t,e,n){let r=DV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(o.join(" "));return}cl(new Co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="firebase-heartbeat-database",UV=1,ou="firebase-heartbeat-store";let ag=null;function gj(){return ag||(ag=rV($V,UV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ou)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),ag}async function VV(t){try{const n=(await gj()).transaction(ou),r=await n.objectStore(ou).get(vj(t));return await n.done,r}catch(e){if(e instanceof Ti)fs.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(n.message)}}}async function qS(t,e){try{const r=(await gj()).transaction(ou,"readwrite");await r.objectStore(ou).put(e,vj(t)),await r.done}catch(n){if(n instanceof Ti)fs.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fs.warn(r.message)}}}function vj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=1024,zV=30;class WV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=GS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>zV){const o=GV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=GS(),{heartbeatsToSend:r,unsentEntries:s}=HV(this._heartbeatsCache.heartbeats),i=af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return fs.warn(n),""}}}function GS(){return new Date().toISOString().substring(0,10)}function HV(t,e=BV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),KS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),KS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RU()?jU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KS(t){return af(JSON.stringify({version:2,heartbeats:t})).length}function GV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){cl(new Co("platform-logger",e=>new oV(e),"PRIVATE")),cl(new Co("heartbeat",e=>new WV(e),"PRIVATE")),di(fy,WS,t),di(fy,WS,"esm2020"),di("fire-js","")}KV("");function yj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YV=yj,xj=new Bu("auth","Firebase",yj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new qx("@firebase/auth");function QV(t,...e){df.logLevel<=Pe.WARN&&df.warn(`Auth (${kl}): ${t}`,...e)}function mh(t,...e){df.logLevel<=Pe.ERROR&&df.error(`Auth (${kl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw Yx(t,...e)}function Lr(t,...e){return Yx(t,...e)}function wj(t,e,n){const r={...YV(),[e]:n};return new Bu("auth","Firebase",r).create(e,{appName:t.name})}function hi(t){return wj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xj.create(t,...e)}function ue(t,e,...n){if(!t)throw Yx(e,...n)}function ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mh(e),new Error(e)}function ms(t,e){t||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function JV(){return YS()==="http:"||YS()==="https:"}function YS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JV()||kU()||"connection"in navigator)?navigator.onLine:!0}function ZV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=Wx()||cj()}get(){return XV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e){ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nB=new zu(3e4,6e4);function Ip(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Tl(t,e,n,r,s={}){return _j(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Nl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return NU()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&El(t.emulatorConfig.host)&&(u.credentials="include"),bj.fetch()(await Cj(t,t.config.apiHost,n,a),u)})}async function _j(t,e,n){t._canInitEmulator=!1;const r={...eB,...e};try{const s=new rB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Dd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dd(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wj(t,d,u);ps(t,d)}}catch(s){if(s instanceof Ti)throw s;ps(t,"network-request-failed",{message:String(s)})}}async function Sj(t,e,n,r,s={}){const i=await Tl(t,e,n,r,s);return"mfaPendingCredential"in i&&ps(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Cj(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Qx(t.config,s):`${t.config.apiScheme}://${s}`;return tB.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class rB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),nB.get())})}}function Dd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Lr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){return Tl(t,"POST","/v1/accounts:delete",e)}async function hf(t,e){return Tl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iB(t,e=!1){const n=vn(t),r=await n.getIdToken(e),s=Jx(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ec(lg(s.auth_time)),issuedAtTime:Ec(lg(s.iat)),expirationTime:Ec(lg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function lg(t){return Number(t)*1e3}function Jx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{const s=lf(n);return s?JSON.parse(s):(mh("Failed to decode base64 JWT payload"),null)}catch(s){return mh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function QS(t){const e=Jx(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ti&&oB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t){var h;const e=t.auth,n=await t.getIdToken(),r=await au(t,hf(e,{idToken:n}));ue(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?Ej(s.providerUserInfo):[],o=cB(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function lB(t){const e=vn(t);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ej(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uB(t,e){const n=await _j(t,{},async()=>{const r=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Cj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&El(t.emulatorConfig.host)&&(c.credentials="include"),bj.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function dB(t,e){return Tl(t,"POST","/v2/accounts:revokeToken",Ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=QS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await uB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Da;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new aB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await au(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iB(this,e)}reload(){return lB(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await au(this,sB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:b,stsTokenManager:y}=n;ue(h&&y,e,"internal-error");const w=Da.fromJSON(this.name,y);ue(typeof h=="string",e,"internal-error"),js(r,e.name),js(s,e.name),ue(typeof f=="boolean",e,"internal-error"),ue(typeof p=="boolean",e,"internal-error"),js(i,e.name),js(o,e.name),js(a,e.name),js(c,e.name),js(u,e.name),js(d,e.name);const v=new ar({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:w,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(v.providerData=b.map(g=>({...g}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Da;s.updateFromServerResponse(n);const i=new ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ff(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ej(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Da;a.updateFromIdToken(r);const c=new ar({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new Map;function rs(t){ms(t instanceof Function,"Expected a class definition");let e=JS.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nj.type="NONE";const XS=Nj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ma{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gh(this.userKey,s.apiKey,i),this.fullPersistenceKey=gh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?ar._fromGetAccountInfoResponse(this.auth,n,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ma(rs(XS),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||rs(XS);const o=gh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await hf(e,{idToken:d}).catch(()=>{});if(!f)break;h=await ar._fromGetAccountInfoResponse(e,f,d)}else h=ar._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ma(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ma(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pj(e))return"Blackberry";if(Aj(e))return"Webos";if(Tj(e))return"Safari";if((e.includes("chrome/")||Rj(e))&&!e.includes("edge/"))return"Chrome";if(Ij(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kj(t=Zt()){return/firefox\//i.test(t)}function Tj(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rj(t=Zt()){return/crios\//i.test(t)}function jj(t=Zt()){return/iemobile/i.test(t)}function Ij(t=Zt()){return/android/i.test(t)}function Pj(t=Zt()){return/blackberry/i.test(t)}function Aj(t=Zt()){return/webos/i.test(t)}function Xx(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hB(t=Zt()){var e;return Xx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function fB(){return TU()&&document.documentMode===10}function Oj(t=Zt()){return Xx(t)||Ij(t)||Aj(t)||Pj(t)||/windows phone/i.test(t)||jj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t,e=[]){let n;switch(t){case"Browser":n=ZS(Zt());break;case"Worker":n=`${ZS(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB(t,e={}){return Tl(t,"GET","/v2/passwordPolicy",Ip(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=6;class vB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??gB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e1(this),this.idTokenSubscription=new e1(this),this.beforeStateQueue=new pB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hf(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(hi(this));const n=e?vn(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mB(this),n=new vB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await dB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&QV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pp(t){return vn(t)}class e1{constructor(e){this.auth=e,this.observer=null,this.addObserver=LU(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xB(t){Zx=t}function wB(t){return Zx.loadJS(t)}function bB(){return Zx.gapiScript}function _B(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t,e){const n=Kx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(So(i,e??{}))return s;ps(s,"already-initialized")}return n.initialize({options:e})}function CB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EB(t,e,n){const r=Pp(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Mj(e),{host:o,port:a}=NB(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(So(u,r.config.emulator)&&So(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,El(o)?(aj(`${i}//${o}${c}`),lj("Auth",!0)):kB()}function Mj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NB(t){const e=Mj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:t1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:t1(o)}}}function t1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,n){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e){return Sj(t,"POST","/v1/accounts:signInWithIdp",Ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB="http://localhost";class Eo extends Lj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Eo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return La(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,La(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,La(e,n)}buildRequest(){const e={requestUri:TB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Fj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Wu{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Eo._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Wu{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Wu{constructor(){super("twitter.com")}static credential(e,n){return Eo._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e){return Sj(t,"POST","/v1/accounts:signUp",Ip(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ar._fromIdTokenResponse(e,r,s),o=n1(r);return new xi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=n1(r);return new xi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function n1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jB(t){var s;if(ir(t.app))return Promise.reject(hi(t));const e=Pp(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new xi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await RB(e,{returnSecureToken:!0}),r=await xi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends Ti{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,pf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new pf(e,n,r,s)}}function $j(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pf._fromErrorAndOperation(t,i,e,r):i})}async function IB(t,e,n=!1){const r=await au(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e,n=!1){const{auth:r}=t;if(ir(r.app))return Promise.reject(hi(r));const s="reauthenticate";try{const i=await au(t,$j(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=Jx(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),xi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t,e,n=!1){if(ir(t.app))return Promise.reject(hi(t));const r="signIn",s=await $j(t,r,e),i=await xi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function OB(t,e,n,r){return vn(t).onIdTokenChanged(e,n,r)}function DB(t,e,n){return vn(t).beforeAuthStateChanged(e,n)}function MB(t,e,n,r){return vn(t).onAuthStateChanged(e,n,r)}function LB(t){return vn(t).signOut()}const mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=1e3,$B=10;class Vj extends Uj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);fB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$B):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vj.type="LOCAL";const UB=Vj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj extends Uj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bj.type="SESSION";const zj=Bj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ap(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await VB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=ew("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function zB(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function WB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function qB(){return Wj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="firebaseLocalStorageDb",GB=1,gf="firebaseLocalStorage",qj="fbase_key";class Hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Op(t,e){return t.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function KB(){const t=indexedDB.deleteDatabase(Hj);return new Hu(t).toPromise()}function yy(){const t=indexedDB.open(Hj,GB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gf,{keyPath:qj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gf)?e(r):(r.close(),await KB(),e(await yy()))})})}async function r1(t,e,n){const r=Op(t,!0).put({[qj]:e,value:n});return new Hu(r).toPromise()}async function YB(t,e){const n=Op(t,!1).get(e),r=await new Hu(n).toPromise();return r===void 0?null:r.value}function s1(t,e){const n=Op(t,!0).delete(e);return new Hu(n).toPromise()}const QB=800,JB=3;class Gj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ap._getInstance(qB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await WB(),!this.activeServiceWorker)return;this.sender=new BB(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yy();return await r1(e,mf,"1"),await s1(e,mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>r1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Op(s,!1).getAll();return new Hu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gj.type="LOCAL";const XB=Gj;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t,e){return e?rs(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Lj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,n){return La(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e8(t){return AB(t.auth,new tw(t),t.bypassAuthState)}function t8(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),PB(n,new tw(t),t.bypassAuthState)}async function n8(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),IB(n,new tw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e8;case"linkViaPopup":case"linkViaRedirect":return n8;case"reauthViaPopup":case"reauthViaRedirect":return t8;default:ps(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=new zu(2e3,1e4);class pa extends Kj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=ew();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r8.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8="pendingRedirect",vh=new Map;class i8 extends Kj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const r=await o8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o8(t,e){const n=c8(e),r=l8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function a8(t,e){vh.set(t._key(),e)}function l8(t){return rs(t._redirectPersistence)}function c8(t){return gh(s8,t.config.apiKey,t.name)}async function u8(t,e,n=!1){if(ir(t.app))return Promise.reject(hi(t));const r=Pp(t),s=ZB(r,e),o=await new i8(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=10*60*1e3;class h8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Yj(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d8&&this.cachedEventUids.clear(),this.cachedEventUids.has(i1(e))}saveEventToCache(e){this.cachedEventUids.add(i1(e)),this.lastProcessedEventTime=Date.now()}}function i1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8(t,e={}){return Tl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g8=/^https?/;async function v8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await p8(t);for(const n of e)try{if(y8(n))return}catch{}ps(t,"unauthorized-domain")}function y8(t){const e=gy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!g8.test(n))return!1;if(m8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new zu(3e4,6e4);function o1(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function w8(t){return new Promise((e,n)=>{var s,i,o;function r(){o1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o1(),n(Lr(t,"network-request-failed"))},timeout:x8.get()})}if((i=(s=Fr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Fr().gapi)!=null&&o.load)r();else{const a=_B("iframefcb");return Fr()[a]=()=>{gapi.load?r():n(Lr(t,"network-request-failed"))},wB(`${bB()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw yh=null,e})}let yh=null;function b8(t){return yh=yh||w8(t),yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=new zu(5e3,15e3),S8="__/auth/iframe",C8="emulator/auth/iframe",E8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k8(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qx(e,C8):`https://${t.config.authDomain}/${S8}`,r={apiKey:e.apiKey,appName:t.name,v:kl},s=N8.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Nl(r).slice(1)}`}async function T8(t){const e=await b8(t),n=Fr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:k8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E8,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Lr(t,"network-request-failed"),a=Fr().setTimeout(()=>{i(o)},_8.get());function c(){Fr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j8=500,I8=600,P8="_blank",A8="http://localhost";class a1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O8(t,e,n,r=j8,s=I8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...R8,width:r.toString(),height:s.toString(),top:i,left:o},u=Zt().toLowerCase();n&&(a=Rj(u)?P8:n),kj(u)&&(e=e||A8,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(hB(u)&&a!=="_self")return D8(e||"",a),new a1(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new a1(h)}function D8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="__/auth/handler",L8="emulator/auth/handler",F8=encodeURIComponent("fac");async function l1(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kl,eventId:s};if(e instanceof Fj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Wu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${F8}=${encodeURIComponent(c)}`:"";return`${$8(t)}?${Nl(a).slice(1)}${u}`}function $8({config:t}){return t.emulator?Qx(t,L8):`https://${t.authDomain}/${M8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="webStorageSupport";class U8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zj,this._completeRedirectFn=u8,this._overrideRedirectResult=a8}async _openPopup(e,n,r,s){var o;ms((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await l1(e,n,r,gy(),s);return O8(e,i,ew())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await l1(e,n,r,gy(),s);return zB(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ms(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await T8(e),r=new h8(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cg,{type:cg},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[cg];i!==void 0&&n(!!i),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Oj()||Tj()||Xx()}}const V8=U8;var c1="@firebase/auth",u1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W8(t){cl(new Co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dj(t)},u=new yB(r,s,i,c);return CB(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cl(new Co("auth-internal",e=>{const n=Pp(e.getProvider("auth").getImmediate());return(r=>new B8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(c1,u1,z8(t)),di(c1,u1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=5*60,q8=oj("authIdTokenMaxAge")||H8;let d1=null;const G8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q8)return;const s=n==null?void 0:n.token;d1!==s&&(d1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K8(t=mj()){const e=Kx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SB(t,{popupRedirectResolver:V8,persistence:[XB,UB,zj]}),r=oj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=G8(i.toString());DB(n,o,()=>o(n.currentUser)),OB(n,a=>o(a))}}const s=sj("auth");return s&&EB(n,`http://${s}`),n}function Y8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Lr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Y8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W8("Browser");var h1={};const f1="@firebase/database",p1="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qj="";function Q8(t){Qj=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:iu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ws(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new J8(e)}}catch{}return new X8},Qi=Jj("localStorage"),Z8=Jj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new qx("@firebase/database"),ez=function(){let t=1;return function(){return t++}}(),Xj=function(t){const e=UU(t),n=new MU;n.update(e);const r=n.digest();return Bx.encodeByteArray(r)},qu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qu.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e};let Nc=null,m1=!0;const tz=function(t,e){K(!e,"Can't turn on custom loggers persistently."),Fa.logLevel=Pe.VERBOSE,Nc=Fa.log.bind(Fa)},Vt=function(...t){if(m1===!0&&(m1=!1,Nc===null&&Z8.get("logging_enabled")===!0&&tz()),Nc){const e=qu.apply(null,t);Nc(e)}},Gu=function(t){return function(...e){Vt(t,...e)}},xy=function(...t){const e="FIREBASE INTERNAL ERROR: "+qu(...t);Fa.error(e)},gs=function(...t){const e=`FIREBASE FATAL ERROR: ${qu(...t)}`;throw Fa.error(e),new Error(e)},fn=function(...t){const e="FIREBASE WARNING: "+qu(...t);Fa.warn(e)},nz=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zj=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ul="[MIN_NAME]",No="[MAX_NAME]",Rl=function(t,e){if(t===e)return 0;if(t===ul||e===No)return-1;if(e===ul||t===No)return 1;{const n=g1(t),r=g1(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},sz=function(t,e){return t===e?0:t<e?-1:1},ec=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},nw=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=nw(t[e[r]]);return n+="}",n},eI=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function mn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const tI=function(t){K(!Zj(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},iz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function az(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const lz=new RegExp("^-?(0*)\\d{1,10}$"),cz=-2147483648,uz=2147483647,g1=function(t){if(lz.test(t)){const e=Number(t);if(e>=cz&&e<=uz)return e}return null},jl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw fn("Exception was thrown by user callback.",n),e},Math.floor(0))}},dz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fn(e)}}class xh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}xh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="5",nI="v",rI="s",sI="r",iI="f",oI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aI="ls",lI="p",wy="ac",cI="websocket",uI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function pz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function hI(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===cI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===uI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pz(t)&&(n.ns=t.namespace);const s=[];return mn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(){this.counters_={}}incrementCounter(e,n=1){ws(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return gU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={},dg={};function sw(t){const e=t.toString();return ug[e]||(ug[e]=new mz),ug[e]}function gz(t,e){const n=t.toString();return dg[n]||(dg[n]=e()),dg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&jl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="start",yz="close",xz="pLPCommand",wz="pRTLPCB",fI="id",pI="pw",mI="ser",bz="cb",_z="seg",Sz="ts",Cz="d",Ez="dframe",gI=1870,vI=30,Nz=gI-vI,kz=25e3,Tz=3e4;class ma{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gu(e),this.stats_=sw(n),this.urlFn=c=>(this.appCheckToken&&(c[wy]=this.appCheckToken),hI(n,uI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Tz)),rz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iw((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===v1)this.id=a,this.password=c;else if(o===yz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[v1]="t",r[mI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[bz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nI]=rw,this.transportSessionId&&(r[rI]=this.transportSessionId),this.lastSessionId&&(r[aI]=this.lastSessionId),this.applicationId&&(r[lI]=this.applicationId),this.appCheckToken&&(r[wy]=this.appCheckToken),typeof location<"u"&&location.hostname&&oI.test(location.hostname)&&(r[sI]=iI);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ma.forceAllow_=!0}static forceDisallow(){ma.forceDisallow_=!0}static isAvailable(){return ma.forceAllow_?!0:!ma.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!iz()&&!oz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=nj(n),s=eI(r,Nz);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Ez]="t",r[fI]=e,r[pI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class iw{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ez(),window[xz+this.uniqueCallbackIdentifier]=e,window[wz+this.uniqueCallbackIdentifier]=n,this.myIFrame=iw.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vt("frame writing exception"),a.stack&&Vt(a.stack),Vt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fI]=this.myID,e[pI]=this.myPW,e[mI]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vI+r.length<=gI;){const o=this.pendingSegs.shift();r=r+"&"+_z+s+"="+o.seg+"&"+Sz+s+"="+o.ts+"&"+Cz+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(kz)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=16384,jz=45e3;let vf=null;typeof MozWebSocket<"u"?vf=MozWebSocket:typeof WebSocket<"u"&&(vf=WebSocket);class or{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gu(this.connId),this.stats_=sw(n),this.connURL=or.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[nI]=rw,typeof location<"u"&&location.hostname&&oI.test(location.hostname)&&(o[sI]=iI),n&&(o[rI]=n),r&&(o[aI]=r),s&&(o[wy]=s),i&&(o[lI]=i),hI(e,cI,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qi.set("previous_websocket_failure",!0);try{let r;uj(),this.mySock=new vf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){or.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&vf!==null&&!or.forceDisallow_}static previouslyFailed(){return Qi.isInMemoryStorage||Qi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=iu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=eI(n,Rz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}or.responsesRequiredToBeHealthy=2;or.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{static get ALL_TRANSPORTS(){return[ma,or]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=or&&or.isAvailable();let r=n&&!or.previouslyFailed();if(e.webSocketOnly&&(n||fn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[or];else{const s=this.transports_=[];for(const i of lu.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);lu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}lu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=6e4,Pz=5e3,Az=10*1024,Oz=100*1024,hg="t",y1="d",Dz="s",x1="r",Mz="e",w1="o",b1="a",_1="n",S1="p",Lz="h";class Fz{constructor(e,n,r,s,i,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gu("c:"+this.id+":"),this.transportManager_=new lu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=kc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Oz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Az?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hg in e){const n=e[hg];n===b1?this.upgradeIfSecondaryHealthy_():n===x1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===w1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ec("t",e),r=ec("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:S1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:b1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ec("t",e),r=ec("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ec(hg,e);if(y1 in e){const r=e[y1];if(n===Lz){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===_1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Dz?this.onConnectionShutdown_(r):n===x1?this.onReset_(r):n===Mz?xy("Server Error: "+r):n===w1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rw!==r&&fn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),kc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Iz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Pz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:S1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends xI{static getInstance(){return new yf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=32,E1=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Ae("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wi(t){return t.pieces_.length-t.pieceNum_}function Me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function wI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $z(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function bI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _I(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function gt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ae(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Qt(t,e){const n=ge(t),r=ge(e);if(n===null)return e;if(n===r)return Qt(Me(t),Me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ow(t,e){if(wi(t)!==wi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function lr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(wi(t)>wi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Uz{constructor(e,n){this.errorPrefix_=n,this.parts_=bI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=jp(this.parts_[r]);SI(this)}}function Vz(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jp(e),SI(t)}function Bz(t){const e=t.parts_.pop();t.byteLength_-=jp(e),t.parts_.length>0&&(t.byteLength_-=1)}function SI(t){if(t.byteLength_>E1)throw new Error(t.errorPrefix_+"has a key path longer than "+E1+" bytes ("+t.byteLength_+").");if(t.parts_.length>C1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+C1+") or object contains a cycle "+Bi(t))}function Bi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends xI{static getInstance(){return new aw}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=1e3,zz=60*5*1e3,N1=30*1e3,Wz=1.3,Hz=3e4,qz="server_kill",k1=3;class os extends yI{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=os.nextPersistentConnectionId_++,this.log_=Gu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tc,this.maxReconnectDelay_=zz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!uj())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(mt(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Rp,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;os.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ws(e,"w")){const r=ll(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();fn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||DU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=N1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=OU(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):xy("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Hz&&(this.reconnectDelay_=tc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Wz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+os.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Vt("getToken() completed but was canceled"):(Vt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new Fz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{fn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(qz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&fn(h),c())}}}interrupt(e){Vt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],uy(this.interruptReasons_)&&(this.reconnectDelay_=tc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>nw(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Vt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=k1&&(this.reconnectDelay_=N1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=k1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Qj.replace(/\./g,"-")]=1,Wx()?e["framework.cordova"]=1:cj()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yf.getInstance().currentlyOnline();return uy(this.interruptReasons_)&&e}}os.nextPersistentConnectionId_=0;os.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ve(ul,e),s=new ve(ul,n);return this.compare(r,s)!==0}minPost(){return ve.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md;class CI extends Dp{static get __EMPTY_NODE(){return Md}static set __EMPTY_NODE(e){Md=e}compare(e,n){return Rl(e.name,n.name)}isDefinedOn(e){throw Cl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(No,Md)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,Md)}toString(){return".key"}}const $a=new CI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class St{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??St.RED,this.left=s??ln.EMPTY_NODE,this.right=i??ln.EMPTY_NODE}copy(e,n,r,s,i){return new St(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ln.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ln.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}St.RED=!0;St.BLACK=!1;class Gz{copy(e,n,r,s,i){return this}insert(e,n,r){return new St(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ln{constructor(e,n=ln.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ln(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,St.BLACK,null,null))}remove(e){return new ln(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,St.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ld(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ld(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ld(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ld(this.root_,null,this.comparator_,!0,e)}}ln.EMPTY_NODE=new Gz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(t,e){return Rl(t.name,e.name)}function lw(t,e){return Rl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let by;function Yz(t){by=t}const EI=function(t){return typeof t=="number"?"number:"+tI(t):"string:"+t},NI=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ws(e,".sv"),"Priority must be a string or number.")}else K(t===by||t.isEmpty(),"priority of unexpected type.");K(t===by||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T1;class bt{static set __childrenNodeConstructor(e){T1=e}static get __childrenNodeConstructor(){return T1}constructor(e,n=bt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),NI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new bt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:bt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:ge(e)===".priority"?this.priorityNode_:bt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:bt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ge(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||wi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,bt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+EI(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=tI(this.value_):e+=this.value_,this.lazyHash_=Xj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===bt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof bt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=bt.VALUE_TYPE_ORDER.indexOf(n),i=bt.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+n),K(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}bt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kI,TI;function Qz(t){kI=t}function Jz(t){TI=t}class Xz extends Dp{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Rl(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(No,new bt("[PRIORITY-POST]",TI))}makePost(e,n){const r=kI(e);return new ve(n,new bt("[PRIORITY-POST]",r))}toString(){return".priority"}}const nt=new Xz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=Math.log(2);class eW{constructor(e){const n=i=>parseInt(Math.log(i)/Zz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xf=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new St(f,h.node,St.BLACK,null,null);{const p=parseInt(d/2,10)+c,b=s(c,p),y=s(p+1,u);return h=t[p],f=n?n(h):h,new St(f,h.node,St.BLACK,b,y)}},i=function(c){let u=null,d=null,h=t.length;const f=function(b,y){const w=h-b,v=h;h-=b;const g=s(w+1,v),x=t[w],S=n?n(x):x;p(new St(S,x.node,y,null,g))},p=function(b){u?(u.left=b,u=b):(d=b,u=b)};for(let b=0;b<c.count;++b){const y=c.nextBitIsOne(),w=Math.pow(2,c.count-(b+1));y?f(w,St.BLACK):(f(w,St.BLACK),f(w,St.RED))}return d},o=new eW(t.length),a=i(o);return new ln(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg;const Vo={};class ss{static get Default(){return K(Vo&&nt,"ChildrenNode.ts has not been loaded"),fg=fg||new ss({".priority":Vo},{".priority":nt}),fg}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ll(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ln?n:null}hasIndex(e){return ws(this.indexSet_,e.toString())}addIndex(e,n){K(e!==$a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ve.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=xf(r,e.getCompare()):a=Vo;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=a,new ss(d,u)}addToIndexes(e,n){const r=cf(this.indexes_,(s,i)=>{const o=ll(this.indexSet_,i);if(K(o,"Missing index implementation for "+i),s===Vo)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ve.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),xf(a,o.getCompare())}else return Vo;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new ve(e.name,a))),c.insert(e,e.node)}});return new ss(r,this.indexSet_)}removeFromIndexes(e,n){const r=cf(this.indexes_,s=>{if(s===Vo)return s;{const i=n.get(e.name);return i?s.remove(new ve(e.name,i)):s}});return new ss(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc;class ae{static get EMPTY_NODE(){return nc||(nc=new ae(new ln(lw),null,ss.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&NI(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nc}updatePriority(e){return this.children_.isEmpty()?this:new ae(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?nc:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(Me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ve(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?nc:this.priorityNode_;return new ae(s,o,i)}}updateChild(e,n){const r=ge(e);if(r===null)return n;{K(ge(e)!==".priority"||wi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Me(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(nt,(o,a)=>{n[o]=a.val(e),r++,i&&ae.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+EI(this.getPriority().val())+":"),this.forEachChild(nt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Xj(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ve(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ve.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ku?-1:0}withIndex(e){if(e===$a||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ae(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===$a||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(nt),s=n.getIterator(nt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===$a?null:this.indexMap_.get(e.toString())}}ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class tW extends ae{constructor(){super(new ln(lw),ae.EMPTY_NODE,ss.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ae.EMPTY_NODE}isEmpty(){return!1}}const Ku=new tW;Object.defineProperties(ve,{MIN:{value:new ve(ul,ae.EMPTY_NODE)},MAX:{value:new ve(No,Ku)}});CI.__EMPTY_NODE=ae.EMPTY_NODE;bt.__childrenNodeConstructor=ae;Yz(Ku);Jz(Ku);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=!0;function Ct(t,e=null){if(t===null)return ae.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new bt(n,Ct(e))}if(!(t instanceof Array)&&nW){const n=[];let r=!1;if(mn(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Ct(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ve(o,c)))}}),n.length===0)return ae.EMPTY_NODE;const i=xf(n,Kz,o=>o.name,lw);if(r){const o=xf(n,nt.getCompare());return new ae(i,Ct(e),new ss({".priority":o},{".priority":nt}))}else return new ae(i,Ct(e),ss.Default)}else{let n=ae.EMPTY_NODE;return mn(t,(r,s)=>{if(ws(t,r)&&r.substring(0,1)!=="."){const i=Ct(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ct(e))}}Qz(Ct);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW extends Dp{constructor(e){super(),this.indexPath_=e,K(!ye(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Rl(e.name,n.name):i}makePost(e,n){const r=Ct(e),s=ae.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(n,s)}maxPost(){const e=ae.EMPTY_NODE.updateChild(this.indexPath_,Ku);return new ve(No,e)}toString(){return bI(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW extends Dp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Rl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const r=Ct(e);return new ve(n,r)}toString(){return".value"}}const iW=new sW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){return{type:"value",snapshotNode:t}}function dl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function cu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function uu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function oW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(cu(n,a)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(dl(n,r)):o.trackChildChange(uu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(nt,(s,i)=>{n.hasChild(s)||r.trackChildChange(cu(s,i))}),n.isLeafNode()||n.forEachChild(nt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(uu(s,i,o))}else r.trackChildChange(dl(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ae.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this.indexedFilter_=new cw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=du.getStartPost_(e),this.endPost_=du.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ve(n,r))||(r=ae.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ae.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(ae.EMPTY_NODE);const i=this;return n.forEachChild(nt,(o,a)=>{i.matches(new ve(o,a))||(s=s.updateImmediateChild(o,ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new du(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ve(n,r))||(r=ae.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=ae.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(ae.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const a=e;K(a.numChildren()===this.limit_,"");const c=new ve(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,c);if(d&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(uu(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(cu(n,h));const y=a.updateImmediateChild(n,ae.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(dl(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(cu(u.name,u.node)),i.trackChildChange(dl(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,ae.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:No}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new uw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lW(t){return t.loadsAllData()?new cw(t.getIndex()):t.hasLimit()?new aW(t):new du(t)}function R1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nt?n="$priority":t.index_===iW?n="$value":t.index_===$a?n="$key":(K(t.index_ instanceof rW,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function j1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends yI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Gu("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=wf.getListenId_(e,r),a={};this.listens_[o]=a;const c=R1(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),ll(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=wf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=R1(e._queryParams),r=e._path.toString(),s=new Rp;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Nl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=iu(a.responseText)}catch{fn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&fn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(){return{value:null,children:new Map}}function jI(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ge(e);t.children.has(r)||t.children.set(r,bf());const s=t.children.get(r);e=Me(e),jI(s,e,n)}}function _y(t,e,n){t.value!==null?n(e,t.value):uW(t,(r,s)=>{const i=new Ae(e.toString()+"/"+r);_y(s,i,n)})}function uW(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&mn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=10*1e3,hW=30*1e3,fW=5*60*1e3;class pW{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new dW(e);const r=I1+(hW-I1)*Math.random();kc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;mn(e,(s,i)=>{i>0&&ws(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),kc(this.reportStats_.bind(this),Math.floor(Math.random()*2*fW))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cr||(cr={}));function II(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hw(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=cr.ACK_USER_WRITE,this.source=II()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new _f(ke(),n,this.revert)}}else return K(ge(this.path)===e,"operationForChild called for unrelated child."),new _f(Me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.source=e,this.path=n,this.type=cr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new hu(this.source,ke()):new hu(this.source,Me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=cr.OVERWRITE}operationForChild(e){return ye(this.path)?new ko(this.source,ke(),this.snap.getImmediateChild(e)):new ko(this.source,Me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=cr.MERGE}operationForChild(e){if(ye(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new ko(this.source,ke(),n.value):new fu(this.source,ke(),n)}else return K(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fu(this.source,Me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gW(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(oW(o.childName,o.snapshotNode))}),rc(t,s,"child_removed",e,r,n),rc(t,s,"child_added",e,r,n),rc(t,s,"child_moved",i,r,n),rc(t,s,"child_changed",e,r,n),rc(t,s,"value",e,r,n),s}function rc(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>yW(t,a,c)),o.forEach(a=>{const c=vW(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function vW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function yW(t,e,n){if(e.childName==null||n.childName==null)throw Cl("Should only compare child_ events.");const r=new ve(e.childName,e.snapshotNode),s=new ve(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){return{eventCache:t,serverCache:e}}function Tc(t,e,n,r){return Mp(new bi(e,n,r),t.serverCache)}function PI(t,e,n,r){return Mp(t.eventCache,new bi(e,n,r))}function Sf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function To(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg;const xW=()=>(pg||(pg=new ln(sz)),pg);class Ve{static fromObject(e){let n=new Ve(null);return mn(e,(r,s)=>{n=n.set(new Ae(r),s)}),n}constructor(e,n=xW()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(ye(e))return null;{const r=ge(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Me(e),n);return i!=null?{path:gt(new Ae(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const n=ge(e),r=this.children.get(n);return r!==null?r.subtree(Me(e)):new Ve(null)}}set(e,n){if(ye(e))return new Ve(n,this.children);{const r=ge(e),i=(this.children.get(r)||new Ve(null)).set(Me(e),n),o=this.children.insert(r,i);return new Ve(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new Ve(null):new Ve(null,this.children);{const n=ge(e),r=this.children.get(n);if(r){const s=r.remove(Me(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Ve(null):new Ve(this.value,i)}else return this}}get(e){if(ye(e))return this.value;{const n=ge(e),r=this.children.get(n);return r?r.get(Me(e)):null}}setTree(e,n){if(ye(e))return n;{const r=ge(e),i=(this.children.get(r)||new Ve(null)).setTree(Me(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Ve(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(gt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ye(e))return null;{const i=ge(e),o=this.children.get(i);return o?o.findOnPath_(Me(e),gt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);const s=ge(e),i=this.children.get(s);return i?i.foreachOnPath_(Me(e),gt(n,s),r):new Ve(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(gt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new Ve(null))}}function Rc(t,e,n){if(ye(e))return new hr(new Ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Qt(s,e);return i=i.updateChild(o,n),new hr(t.writeTree_.set(s,i))}else{const s=new Ve(n),i=t.writeTree_.setTree(e,s);return new hr(i)}}}function P1(t,e,n){let r=t;return mn(n,(s,i)=>{r=Rc(r,gt(e,s),i)}),r}function A1(t,e){if(ye(e))return hr.empty();{const n=t.writeTree_.setTree(e,new Ve(null));return new hr(n)}}function Sy(t,e){return Do(t,e)!=null}function Do(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qt(n.path,e)):null}function O1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nt,(r,s)=>{e.push(new ve(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ve(r,s.value))}),e}function fi(t,e){if(ye(e))return t;{const n=Do(t,e);return n!=null?new hr(new Ve(n)):new hr(t.writeTree_.subtree(e))}}function Cy(t){return t.writeTree_.isEmpty()}function hl(t,e){return AI(ke(),t.writeTree_,e)}function AI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(K(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=AI(gt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(gt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,e){return LI(e,t)}function wW(t,e,n,r,s){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Rc(t.visibleWrites,e,n)),t.lastWriteId=r}function bW(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function _W(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&SW(a,r.path)?s=!1:lr(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return CW(t),!0;if(r.snap)t.visibleWrites=A1(t.visibleWrites,r.path);else{const a=r.children;mn(a,c=>{t.visibleWrites=A1(t.visibleWrites,gt(r.path,c))})}return!0}else return!1}function SW(t,e){if(t.snap)return lr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lr(gt(t.path,n),e))return!0;return!1}function CW(t){t.visibleWrites=OI(t.allWrites,EW,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function EW(t){return t.visible}function OI(t,e,n){let r=hr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)lr(n,o)?(a=Qt(n,o),r=Rc(r,a,i.snap)):lr(o,n)&&(a=Qt(o,n),r=Rc(r,ke(),i.snap.getChild(a)));else if(i.children){if(lr(n,o))a=Qt(n,o),r=P1(r,a,i.children);else if(lr(o,n))if(a=Qt(o,n),ye(a))r=P1(r,ke(),i.children);else{const c=ll(i.children,ge(a));if(c){const u=c.getChild(Me(a));r=Rc(r,ke(),u)}}}else throw Cl("WriteRecord should have .snap or .children")}}return r}function DI(t,e,n,r,s){if(!r&&!s){const i=Do(t.visibleWrites,e);if(i!=null)return i;{const o=fi(t.visibleWrites,e);if(Cy(o))return n;if(n==null&&!Sy(o,ke()))return null;{const a=n||ae.EMPTY_NODE;return hl(o,a)}}}else{const i=fi(t.visibleWrites,e);if(!s&&Cy(i))return n;if(!s&&n==null&&!Sy(i,ke()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(lr(u.path,e)||lr(e,u.path))},a=OI(t.allWrites,o,e),c=n||ae.EMPTY_NODE;return hl(a,c)}}}function NW(t,e,n){let r=ae.EMPTY_NODE;const s=Do(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(nt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=fi(t.visibleWrites,e);return n.forEachChild(nt,(o,a)=>{const c=hl(fi(i,new Ae(o)),a);r=r.updateImmediateChild(o,c)}),O1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=fi(t.visibleWrites,e);return O1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function kW(t,e,n,r,s){K(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=gt(e,n);if(Sy(t.visibleWrites,i))return null;{const o=fi(t.visibleWrites,i);return Cy(o)?s.getChild(n):hl(o,s.getChild(n))}}function TW(t,e,n,r){const s=gt(e,n),i=Do(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=fi(t.visibleWrites,s);return hl(o,r.getNode().getImmediateChild(n))}else return null}function RW(t,e){return Do(t.visibleWrites,e)}function jW(t,e,n,r,s,i,o){let a;const c=fi(t.visibleWrites,e),u=Do(c,ke());if(u!=null)a=u;else if(n!=null)a=hl(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function IW(){return{visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1}}function Cf(t,e,n,r){return DI(t.writeTree,t.treePath,e,n,r)}function fw(t,e){return NW(t.writeTree,t.treePath,e)}function D1(t,e,n,r){return kW(t.writeTree,t.treePath,e,n,r)}function Ef(t,e){return RW(t.writeTree,gt(t.treePath,e))}function PW(t,e,n,r,s,i){return jW(t.writeTree,t.treePath,e,n,r,s,i)}function pw(t,e,n){return TW(t.writeTree,t.treePath,e,n)}function MI(t,e){return LI(gt(t.treePath,e),t.writeTree)}function LI(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,uu(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,cu(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,dl(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,uu(r,e.snapshotNode,s.oldSnap));else throw Cl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const FI=new OW;class mw{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new bi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pw(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:To(this.viewCache_),i=PW(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t){return{filter:t}}function MW(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function LW(t,e,n,r,s){const i=new AW;let o,a;if(n.type===cr.OVERWRITE){const u=n;u.source.fromUser?o=Ey(t,e,u.path,u.snap,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ye(u.path),o=Nf(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===cr.MERGE){const u=n;u.source.fromUser?o=$W(t,e,u.path,u.children,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Ny(t,e,u.path,u.children,r,s,a,i))}else if(n.type===cr.ACK_USER_WRITE){const u=n;u.revert?o=BW(t,e,u.path,r,s,i):o=UW(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===cr.LISTEN_COMPLETE)o=VW(t,e,n.path,r,i);else throw Cl("Unknown operation type: "+n.type);const c=i.getChanges();return FW(e,o,c),{viewCache:o,changes:c}}function FW(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Sf(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(RI(Sf(e)))}}function $I(t,e,n,r,s,i){const o=e.eventCache;if(Ef(r,n)!=null)return e;{let a,c;if(ye(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=To(e),d=u instanceof ae?u:ae.EMPTY_NODE,h=fw(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=Cf(r,To(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ge(n);if(u===".priority"){K(wi(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=D1(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Me(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=D1(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=pw(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return Tc(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Nf(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(ye(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),p,null)}else{const p=ge(n);if(!c.isCompleteForPath(n)&&wi(n)>1)return e;const b=Me(n),w=c.getNode().getImmediateChild(p).updateChild(b,r);p===".priority"?u=d.updatePriority(c.getNode(),w):u=d.updateChild(c.getNode(),p,w,b,FI,null)}const h=PI(e,u,c.isFullyInitialized()||ye(n),d.filtersNodes()),f=new mw(s,h,i);return $I(t,h,n,s,f,a)}function Ey(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const d=new mw(s,e,i);if(ye(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Tc(e,u,!0,t.filter.filtersNodes());else{const h=ge(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Tc(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=Me(n),p=a.getNode().getImmediateChild(h);let b;if(ye(f))b=r;else{const y=d.getCompleteChild(h);y!=null?wI(f)===".priority"&&y.getChild(_I(f)).isEmpty()?b=y:b=y.updateChild(f,r):b=ae.EMPTY_NODE}if(p.equals(b))c=e;else{const y=t.filter.updateChild(a.getNode(),h,b,f,d,o);c=Tc(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function M1(t,e){return t.eventCache.isCompleteForChild(e)}function $W(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const d=gt(n,c);M1(e,ge(d))&&(a=Ey(t,a,d,u,s,i,o))}),r.foreach((c,u)=>{const d=gt(n,c);M1(e,ge(d))||(a=Ey(t,a,d,u,s,i,o))}),a}function L1(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Ny(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ye(n)?u=r:u=new Ve(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),b=L1(t,p,f);c=Nf(t,c,new Ae(h),b,s,i,o,a)}}),u.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const b=e.serverCache.getNode().getImmediateChild(h),y=L1(t,b,f);c=Nf(t,c,new Ae(h),y,s,i,o,a)}}),c}function UW(t,e,n,r,s,i,o){if(Ef(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Nf(t,e,n,c.getNode().getChild(n),s,i,a,o);if(ye(n)){let u=new Ve(null);return c.getNode().forEachChild($a,(d,h)=>{u=u.set(new Ae(d),h)}),Ny(t,e,n,u,s,i,a,o)}else return e}else{let u=new Ve(null);return r.foreach((d,h)=>{const f=gt(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),Ny(t,e,n,u,s,i,a,o)}}function VW(t,e,n,r,s){const i=e.serverCache,o=PI(e,i.getNode(),i.isFullyInitialized()||ye(n),i.isFiltered());return $I(t,o,n,r,FI,s)}function BW(t,e,n,r,s,i){let o;if(Ef(r,n)!=null)return e;{const a=new mw(r,e,s),c=e.eventCache.getNode();let u;if(ye(n)||ge(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Cf(r,To(e));else{const h=e.serverCache.getNode();K(h instanceof ae,"serverChildren would be complete if leaf node"),d=fw(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=ge(n);let h=pw(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,Me(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,ae.EMPTY_NODE,Me(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Cf(r,To(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Ef(r,ke())!=null,Tc(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new cw(r.getIndex()),i=lW(r);this.processor_=DW(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(ae.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),d=new bi(c,o.isFullyInitialized(),s.filtersNodes()),h=new bi(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Mp(h,d),this.eventGenerator_=new mW(this.query_)}get query(){return this.query_}}function WW(t){return t.viewCache_.serverCache.getNode()}function HW(t){return Sf(t.viewCache_)}function qW(t,e){const n=To(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function F1(t){return t.eventRegistrations_.length===0}function GW(t,e){t.eventRegistrations_.push(e)}function $1(t,e,n){const r=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function U1(t,e,n,r){e.type===cr.MERGE&&e.source.queryId!==null&&(K(To(t.viewCache_),"We should always have a full cache before handling merges"),K(Sf(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=LW(t.processor_,s,e,n,r);return MW(t.processor_,i.viewCache),K(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,UI(t,i.changes,i.viewCache.eventCache.getNode(),null)}function KW(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nt,(i,o)=>{r.push(dl(i,o))}),n.isFullyInitialized()&&r.push(RI(n.getNode())),UI(t,r,n.getNode(),e)}function UI(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return gW(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;class VI{constructor(){this.views=new Map}}function YW(t){K(!kf,"__referenceConstructor has already been defined"),kf=t}function QW(){return K(kf,"Reference.ts has not been loaded"),kf}function JW(t){return t.views.size===0}function gw(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return K(i!=null,"SyncTree gave us an op for an invalid query."),U1(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(U1(o,e,n,r));return i}}function BI(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Cf(n,s?r:null),c=!1;a?c=!0:r instanceof ae?(a=fw(n,r),c=!1):(a=ae.EMPTY_NODE,c=!1);const u=Mp(new bi(a,c,!1),new bi(r,s,!1));return new zW(e,u)}return o}function XW(t,e,n,r,s,i){const o=BI(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),GW(o,n),KW(o,n)}function ZW(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=_i(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat($1(u,n,r)),F1(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat($1(c,n,r)),F1(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!_i(t)&&i.push(new(QW())(e._repo,e._path)),{removed:i,events:o}}function zI(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function pi(t,e){let n=null;for(const r of t.views.values())n=n||qW(r,e);return n}function WI(t,e){if(e._queryParams.loadsAllData())return Fp(t);{const r=e._queryIdentifier;return t.views.get(r)}}function HI(t,e){return WI(t,e)!=null}function _i(t){return Fp(t)!=null}function Fp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;function eH(t){K(!Tf,"__referenceConstructor has already been defined"),Tf=t}function tH(){return K(Tf,"Reference.ts has not been loaded"),Tf}let nH=1;class V1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=IW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qI(t,e,n,r,s){return wW(t.pendingWriteTree_,e,n,r,s),s?Qu(t,new ko(II(),e,n)):[]}function Ji(t,e,n=!1){const r=bW(t.pendingWriteTree_,e);if(_W(t.pendingWriteTree_,e)){let i=new Ve(null);return r.snap!=null?i=i.set(ke(),!0):mn(r.children,o=>{i=i.set(new Ae(o),!0)}),Qu(t,new _f(r.path,i,n))}else return[]}function Yu(t,e,n){return Qu(t,new ko(dw(),e,n))}function rH(t,e,n){const r=Ve.fromObject(n);return Qu(t,new fu(dw(),e,r))}function sH(t,e){return Qu(t,new hu(dw(),e))}function iH(t,e,n){const r=yw(t,n);if(r){const s=xw(r),i=s.path,o=s.queryId,a=Qt(i,e),c=new hu(hw(o),a);return ww(t,i,c)}else return[]}function Rf(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||HI(o,e))){const c=ZW(o,e,n,r);JW(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,p)=>_i(p));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=lH(f);for(let b=0;b<p.length;++b){const y=p[b],w=y.query,v=QI(t,y);t.listenProvider_.startListening(jc(w),pu(t,w),v.hashFn,v.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(jc(e),null):u.forEach(f=>{const p=t.queryToTagMap.get($p(f));t.listenProvider_.stopListening(jc(f),p)}))}cH(t,u)}return a}function GI(t,e,n,r){const s=yw(t,r);if(s!=null){const i=xw(s),o=i.path,a=i.queryId,c=Qt(o,e),u=new ko(hw(a),c,n);return ww(t,o,u)}else return[]}function oH(t,e,n,r){const s=yw(t,r);if(s){const i=xw(s),o=i.path,a=i.queryId,c=Qt(o,e),u=Ve.fromObject(n),d=new fu(hw(a),c,u);return ww(t,o,d)}else return[]}function ky(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const b=Qt(f,s);i=i||pi(p,b),o=o||_i(p)});let a=t.syncPointTree_.get(s);a?(o=o||_i(a),i=i||pi(a,ke())):(a=new VI,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=ae.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,b)=>{const y=pi(b,ke());y&&(i=i.updateImmediateChild(p,y))}));const u=HI(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=$p(e);K(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=uH();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const d=Lp(t.pendingWriteTree_,s);let h=XW(a,e,n,d,i,c);if(!u&&!o&&!r){const f=WI(a,e);h=h.concat(dH(t,e,f))}return h}function vw(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Qt(o,e),u=pi(a,c);if(u)return u});return DI(s,e,i,n,!0)}function aH(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Qt(u,n);r=r||pi(d,h)});let s=t.syncPointTree_.get(n);s?r=r||pi(s,ke()):(s=new VI,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new bi(r,!0,!1):null,a=Lp(t.pendingWriteTree_,e._path),c=BI(s,e,a,i?o.getNode():ae.EMPTY_NODE,i);return HW(c)}function Qu(t,e){return KI(e,t.syncPointTree_,null,Lp(t.pendingWriteTree_,ke()))}function KI(t,e,n,r){if(ye(t.path))return YI(t,e,n,r);{const s=e.get(ke());n==null&&s!=null&&(n=pi(s,ke()));let i=[];const o=ge(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=MI(r,o);i=i.concat(KI(a,c,u,d))}return s&&(i=i.concat(gw(s,t,r,n))),i}}function YI(t,e,n,r){const s=e.get(ke());n==null&&s!=null&&(n=pi(s,ke()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=MI(r,o),d=t.operationForChild(o);d&&(i=i.concat(YI(d,a,c,u)))}),s&&(i=i.concat(gw(s,t,r,n))),i}function QI(t,e){const n=e.query,r=pu(t,n);return{hashFn:()=>(WW(e)||ae.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?iH(t,n._path,r):sH(t,n._path);{const i=az(s,n);return Rf(t,n,null,i)}}}}function pu(t,e){const n=$p(e);return t.queryToTagMap.get(n)}function $p(t){return t._path.toString()+"$"+t._queryIdentifier}function yw(t,e){return t.tagToQueryMap.get(e)}function xw(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function ww(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const s=Lp(t.pendingWriteTree_,e);return gw(r,n,s,null)}function lH(t){return t.fold((e,n,r)=>{if(n&&_i(n))return[Fp(n)];{let s=[];return n&&(s=zI(n)),mn(r,(i,o)=>{s=s.concat(o)}),s}})}function jc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(tH())(t._repo,t._path):t}function cH(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=$p(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function uH(){return nH++}function dH(t,e,n){const r=e._path,s=pu(t,e),i=QI(t,n),o=t.listenProvider_.startListening(jc(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)K(!_i(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!ye(u)&&d&&_i(d))return[Fp(d).query];{let f=[];return d&&(f=f.concat(zI(d).map(p=>p.query))),mn(h,(p,b)=>{f=f.concat(b)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(jc(d),pu(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new bw(n)}node(){return this.node_}}class _w{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=gt(this.path_,e);return new _w(this.syncTree_,n)}node(){return vw(this.syncTree_,this.path_)}}const hH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},B1=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return pH(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},pH=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const s=e.node();if(K(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},mH=function(t,e,n,r){return Sw(e,new _w(n,t),r)},JI=function(t,e,n){return Sw(t,new bw(e),n)};function Sw(t,e,n){const r=t.getPriority().val(),s=B1(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=B1(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new bt(a,Ct(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new bt(s))),o.forEachChild(nt,(a,c)=>{const u=Sw(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ew(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,s=ge(n);for(;s!==null;){const i=ll(r.node.children,s)||{children:{},childCount:0};r=new Cw(s,r,i),n=Me(n),s=ge(n)}return r}function Il(t){return t.node.value}function XI(t,e){t.node.value=e,Ty(t)}function ZI(t){return t.node.childCount>0}function gH(t){return Il(t)===void 0&&!ZI(t)}function Up(t,e){mn(t.node.children,(n,r)=>{e(new Cw(n,t,r))})}function eP(t,e,n,r){n&&!r&&e(t),Up(t,s=>{eP(s,e,!0,r)}),n&&r&&e(t)}function vH(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ju(t){return new Ae(t.parent===null?t.name:Ju(t.parent)+"/"+t.name)}function Ty(t){t.parent!==null&&yH(t.parent,t.name,t)}function yH(t,e,n){const r=gH(n),s=ws(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Ty(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Ty(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH=/[\[\].#$\/\u0000-\u001F\u007F]/,wH=/[\[\].#$\u0000-\u001F\u007F]/,mg=10*1024*1024,tP=function(t){return typeof t=="string"&&t.length!==0&&!xH.test(t)},nP=function(t){return typeof t=="string"&&t.length!==0&&!wH.test(t)},bH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nP(t)},_H=function(t,e,n,r){Nw(Hx(t,"value"),e,n)},Nw=function(t,e,n){const r=n instanceof Ae?new Uz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Bi(r)+" with contents = "+e.toString());if(Zj(e))throw new Error(t+"contains "+e.toString()+" "+Bi(r));if(typeof e=="string"&&e.length>mg/3&&jp(e)>mg)throw new Error(t+"contains a string greater than "+mg+" utf8 bytes "+Bi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(mn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!tP(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Vz(r,o),Nw(t,a,r),Bz(r)}),s&&i)throw new Error(t+' contains ".value" child '+Bi(r)+" in addition to actual children.")}},rP=function(t,e,n,r){if(!nP(n))throw new Error(Hx(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},SH=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rP(t,e,n)},sP=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},CH=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!bH(n))throw new Error(Hx(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kw(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!ow(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function iP(t,e,n){kw(t,n),oP(t,r=>ow(r,e))}function Br(t,e,n){kw(t,n),oP(t,r=>lr(r,e)||lr(e,r))}function oP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(NH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NH(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Nc&&Vt("event: "+n.toString()),jl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="repo_interrupt",TH=25;class RH{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bf(),this.transactionQueueTree_=new Cw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jH(t,e,n){if(t.stats_=sw(t.repoInfo_),t.forceRestClient_||dz())t.server_=new wf(t.repoInfo_,(r,s,i,o)=>{z1(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>W1(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new os(t.repoInfo_,e,(r,s,i,o)=>{z1(t,r,s,i,o)},r=>{W1(t,r)},r=>{PH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=gz(t.repoInfo_,()=>new pW(t.stats_,t.server_)),t.infoData_=new cW,t.infoSyncTree_=new V1({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Yu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Rw(t,"connected",!1),t.serverSyncTree_=new V1({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);Br(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function IH(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Tw(t){return hH({timestamp:IH(t)})}function z1(t,e,n,r,s){t.dataUpdateCount++;const i=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=cf(n,u=>Ct(u));o=oH(t.serverSyncTree_,i,c,s)}else{const c=Ct(n);o=GI(t.serverSyncTree_,i,c,s)}else if(r){const c=cf(n,u=>Ct(u));o=rH(t.serverSyncTree_,i,c)}else{const c=Ct(n);o=Yu(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Bp(t,i)),Br(t.eventQueue_,a,o)}function W1(t,e){Rw(t,"connected",e),e===!1&&DH(t)}function PH(t,e){mn(e,(n,r)=>{Rw(t,n,r)})}function Rw(t,e,n){const r=new Ae("/.info/"+e),s=Ct(n);t.infoData_.updateSnapshot(r,s);const i=Yu(t.infoSyncTree_,r,s);Br(t.eventQueue_,r,i)}function aP(t){return t.nextWriteId_++}function AH(t,e,n){const r=aH(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ct(s).withIndex(e._queryParams.getIndex());ky(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Yu(t.serverSyncTree_,e._path,i);else{const a=pu(t.serverSyncTree_,e);o=GI(t.serverSyncTree_,e._path,i,a)}return Br(t.eventQueue_,e._path,o),Rf(t.serverSyncTree_,e,n,null,!0),i},s=>(Vp(t,"get for query "+mt(e)+" failed: "+s),Promise.reject(new Error(s))))}function OH(t,e,n,r,s){Vp(t,"set",{path:e.toString(),value:n,priority:r});const i=Tw(t),o=Ct(n,r),a=vw(t.serverSyncTree_,e),c=JI(o,a,i),u=aP(t),d=qI(t.serverSyncTree_,e,c,u,!0);kw(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const b=f==="ok";b||fn("set at "+e+" failed: "+f);const y=Ji(t.serverSyncTree_,u,!b);Br(t.eventQueue_,e,y),$H(t,s,f,p)});const h=hP(t,e);Bp(t,h),Br(t.eventQueue_,h,[])}function DH(t){Vp(t,"onDisconnectEvents");const e=Tw(t),n=bf();_y(t.onDisconnect_,ke(),(s,i)=>{const o=mH(s,i,t.serverSyncTree_,e);jI(n,s,o)});let r=[];_y(n,ke(),(s,i)=>{r=r.concat(Yu(t.serverSyncTree_,s,i));const o=hP(t,s);Bp(t,o)}),t.onDisconnect_=bf(),Br(t.eventQueue_,ke(),r)}function MH(t,e,n){let r;ge(e._path)===".info"?r=ky(t.infoSyncTree_,e,n):r=ky(t.serverSyncTree_,e,n),iP(t.eventQueue_,e._path,r)}function LH(t,e,n){let r;ge(e._path)===".info"?r=Rf(t.infoSyncTree_,e,n):r=Rf(t.serverSyncTree_,e,n),iP(t.eventQueue_,e._path,r)}function FH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(kH)}function Vp(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vt(n,...e)}function $H(t,e,n,r){e&&jl(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function lP(t,e,n){return vw(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function jw(t,e=t.transactionQueueTree_){if(e||zp(t,e),Il(e)){const n=uP(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&UH(t,Ju(e),n)}else ZI(e)&&Up(e,n=>{jw(t,n)})}function UH(t,e,n){const r=n.map(u=>u.currentWriteId),s=lP(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];K(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Qt(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{Vp(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Ji(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();zp(t,Ew(t.transactionQueueTree_,e)),jw(t,t.transactionQueueTree_),Br(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)jl(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{fn("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Bp(t,e)}},o)}function Bp(t,e){const n=cP(t,e),r=Ju(n),s=uP(t,n);return VH(t,s,r),r}function VH(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Qt(n,c.path);let d=!1,h;if(K(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Ji(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=TH)d=!0,h="maxretry",s=s.concat(Ji(t.serverSyncTree_,c.currentWriteId,!0));else{const f=lP(t,c.path,o);c.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){Nw("transaction failed: Data returned ",p,c.path);let b=Ct(p);typeof p=="object"&&p!=null&&ws(p,".priority")||(b=b.updatePriority(f.getPriority()));const w=c.currentWriteId,v=Tw(t),g=JI(b,f,v);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=g,c.currentWriteId=aP(t),o.splice(o.indexOf(w),1),s=s.concat(qI(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(Ji(t.serverSyncTree_,w,!0))}else d=!0,h="nodata",s=s.concat(Ji(t.serverSyncTree_,c.currentWriteId,!0))}Br(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}zp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)jl(r[a]);jw(t,t.transactionQueueTree_)}function cP(t,e){let n,r=t.transactionQueueTree_;for(n=ge(e);n!==null&&Il(r)===void 0;)r=Ew(r,n),e=Me(e),n=ge(e);return r}function uP(t,e){const n=[];return dP(t,e,n),n.sort((r,s)=>r.order-s.order),n}function dP(t,e,n){const r=Il(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Up(e,s=>{dP(t,s,n)})}function zp(t,e){const n=Il(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,XI(e,n.length>0?n:void 0)}Up(e,r=>{zp(t,r)})}function hP(t,e){const n=Ju(cP(t,e)),r=Ew(t.transactionQueueTree_,e);return vH(r,s=>{gg(t,s)}),gg(t,r),eP(r,s=>{gg(t,s)}),n}function gg(t,e){const n=Il(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ji(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?XI(e,void 0):n.length=i+1,Br(t.eventQueue_,Ju(e),s);for(let o=0;o<r.length;o++)jl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function zH(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fn(`Invalid query segment '${n}' in query '${t}'`)}return e}const H1=function(t,e){const n=WH(t),r=n.namespace;n.domain==="firebase.com"&&gs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&gs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nz();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new dI(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},WH=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=BH(t.substring(d,h)));const f=zH(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class qH{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ye(this._path)?null:wI(this._path)}get ref(){return new bs(this._repo,this._path)}get _queryIdentifier(){const e=j1(this._queryParams),n=nw(e);return n==="{}"?"default":n}get _queryObject(){return j1(this._queryParams)}isEqual(e){if(e=vn(e),!(e instanceof Iw))return!1;const n=this._repo===e._repo,r=ow(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+$z(this._path)}}class bs extends Iw{constructor(e,n){super(e,n,new uw,!1)}get parent(){const e=_I(this._path);return e===null?null:new bs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class mu{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),r=Ry(this.ref,e);return new mu(this._node.getChild(n),r,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new mu(s,Ry(this.ref,r),nt)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xt(t,e){return t=vn(t),t._checkNotDeleted("ref"),e!==void 0?Ry(t._root,e):t._root}function Ry(t,e){return t=vn(t),ge(t._path)===null?SH("child","path",e):rP("child","path",e),new bs(t._repo,gt(t._path,e))}function sc(t){return sP("remove",t._path),ga(t,null)}function ga(t,e){t=vn(t),sP("set",t._path),_H("set",e,t._path);const n=new Rp;return OH(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Jo(t){t=vn(t);const e=new fP(()=>{}),n=new Wp(e);return AH(t._repo,t,n).then(r=>new mu(r,new bs(t._repo,t._path),t._queryParams.getIndex()))}class Wp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new HH("value",this,new mu(e.snapshotNode,new bs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new qH(this,e,n):null}matches(e){return e instanceof Wp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function GH(t,e,n,r,s){const i=new fP(n,void 0),o=new Wp(i);return MH(t._repo,t,o),()=>LH(t._repo,t,o)}function vg(t,e,n,r){return GH(t,"value",e)}YW(bs);eH(bs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH="FIREBASE_DATABASE_EMULATOR_HOST",jy={};let YH=!1;function QH(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=El(i);t.repoInfo_=new dI(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function JH(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||gs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=H1(i,s),a=o.repoInfo,c;typeof process<"u"&&h1&&(c=h1[KH]),c?(i=`http://${c}?ns=${a.namespace}`,o=H1(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new fz(t.name,t.options,e);CH("Invalid Firebase Database URL",o),ye(o.path)||gs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=ZH(a,t,u,new hz(t,n));return new eq(d,t)}function XH(t,e){const n=jy[e];(!n||n[t.key]!==t)&&gs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),FH(t),delete n[t.key]}function ZH(t,e,n,r){let s=jy[e.name];s||(s={},jy[e.name]=s);let i=s[t.toURLString()];return i&&gs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new RH(t,YH,n,r),s[t.toURLString()]=i,i}class eq{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bs(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gs("Cannot call "+e+" on a deleted database.")}}function tq(t=mj(),e){const n=Kx(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=_U("database");r&&nq(n,...r)}return n}function nq(t,e,n,r={}){t=vn(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&So(r,i.repoInfo_.emulatorOptions))return;gs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xh(xh.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:SU(r.mockUserToken,t.app.options.projectId);o=new xh(a)}El(e)&&(aj(e),lj("Database",!0)),QH(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(t){Q8(kl),cl(new Co("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return JH(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),di(f1,p1,t),di(f1,p1,"esm2020")}os.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};os.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rq();var sq="firebase",iq="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(sq,iq,"app");const oq={apiKey:"AIzaSyAYzzwkqZjf5iWN6Pc4wSz6MYJAzAFJ0wA",authDomain:"gmae111.firebaseapp.com",projectId:"gmae111",storageBucket:"gmae111.firebasestorage.app",messagingSenderId:"223415325596",appId:"1:223415325596:web:272fd4d7aff74d33b3ee59",measurementId:"G-4TEGC1REF4",databaseURL:"https://gmae111-default-rtdb.asia-southeast1.firebasedatabase.app"},pP=pj(oq),yg=K8(pP),wt=tq(pP),mP=m.createContext(void 0),Pw=()=>{const t=m.useContext(mP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},aq=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(!0);m.useEffect(()=>{const c=MB(yg,async u=>{if(n(u),u){const d=xt(wt,`users/${u.uid}`);(await Jo(d)).exists()||await ga(d,{id:u.uid,displayName:`Player_${u.uid.slice(0,6)}`,createdAt:Date.now(),friends:{},friendRequests:{}})}s(!1)});return()=>c()},[]);const i=async()=>{try{await jB(yg)}catch(c){throw console.error("Login error:",c),c}},o=async()=>{try{await LB(yg)}catch(c){throw console.error("Logout error:",c),c}},a={user:e,userId:(e==null?void 0:e.uid)||null,loading:r,login:i,logout:o};return l.jsx(mP.Provider,{value:a,children:t})},Aw=m.createContext({});function Ow(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const Dw=typeof window<"u",gP=Dw?m.useLayoutEffect:m.useEffect,Hp=m.createContext(null);function Mw(t,e){t.indexOf(e)===-1&&t.push(e)}function Lw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const vs=(t,e,n)=>n>e?e:n<t?t:n;let jf=()=>{};const ys={},vP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function yP(t){return typeof t=="object"&&t!==null}const xP=t=>/^0[^.\s]+$/u.test(t);function Fw(t){let e;return()=>(e===void 0&&(e=t()),e)}const $n=t=>t,lq=(t,e)=>n=>e(t(n)),Xu=(...t)=>t.reduce(lq),gu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class $w{constructor(){this.subscriptions=[]}add(e){return Mw(this.subscriptions,e),()=>Lw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $r=t=>t*1e3,Ln=t=>t/1e3;function wP(t,e){return e?t*(1e3/e):0}const bP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cq=1e-7,uq=12;function dq(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=bP(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>cq&&++a<uq);return o}function Zu(t,e,n,r){if(t===e&&n===r)return $n;const s=i=>dq(i,0,1,t,n);return i=>i===0||i===1?i:bP(s(i),e,r)}const _P=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,SP=t=>e=>1-t(1-e),CP=Zu(.33,1.53,.69,.99),Uw=SP(CP),EP=_P(Uw),NP=t=>(t*=2)<1?.5*Uw(t):.5*(2-Math.pow(2,-10*(t-1))),Vw=t=>1-Math.sin(Math.acos(t)),kP=SP(Vw),TP=_P(Vw),hq=Zu(.42,0,1,1),fq=Zu(0,0,.58,1),RP=Zu(.42,0,.58,1),pq=t=>Array.isArray(t)&&typeof t[0]!="number",jP=t=>Array.isArray(t)&&typeof t[0]=="number",q1={linear:$n,easeIn:hq,easeInOut:RP,easeOut:fq,circIn:Vw,circInOut:TP,circOut:kP,backIn:Uw,backInOut:EP,backOut:CP,anticipate:NP},mq=t=>typeof t=="string",G1=t=>{if(jP(t)){jf(t.length===4);const[e,n,r,s]=t;return Zu(e,n,r,s)}else if(mq(t))return jf(q1[t]!==void 0),q1[t];return t},Fd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],K1={value:null,addProjectionMetrics:null};function gq(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(a)}const d={schedule:(h,f=!1,p=!1)=>{const y=p&&s?n:r;return f&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&K1.value&&K1.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const vq=40;function IP(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Fd.reduce((x,S)=>(x[S]=gq(i,e?S:void 0),x),{}),{setup:a,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:b}=o,y=()=>{const x=ys.useManualTiming?s.timestamp:performance.now();n=!1,ys.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,vq),1)),s.timestamp=x,s.isProcessing=!0,a.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),b.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},w=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:Fd.reduce((x,S)=>{const _=o[S];return x[S]=(C,E=!1,N=!1)=>(n||w(),_.schedule(C,E,N)),x},{}),cancel:x=>{for(let S=0;S<Fd.length;S++)o[Fd[S]].cancel(x)},state:s,steps:o}}const{schedule:qe,cancel:Si,state:It,steps:xg}=IP(typeof requestAnimationFrame<"u"?requestAnimationFrame:$n,!0);let wh;function yq(){wh=void 0}const cn={now:()=>(wh===void 0&&cn.set(It.isProcessing||ys.useManualTiming?It.timestamp:performance.now()),wh),set:t=>{wh=t,queueMicrotask(yq)}},PP=t=>e=>typeof e=="string"&&e.startsWith(t),AP=PP("--"),xq=PP("var(--"),Bw=t=>xq(t)?wq.test(t.split("/*")[0].trim()):!1,wq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},vu={...Pl,transform:t=>vs(0,1,t)},$d={...Pl,default:1},Ic=t=>Math.round(t*1e5)/1e5,zw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function bq(t){return t==null}const _q=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ww=(t,e)=>n=>!!(typeof n=="string"&&_q.test(n)&&n.startsWith(t)||e&&!bq(n)&&Object.prototype.hasOwnProperty.call(n,e)),OP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(zw);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Sq=t=>vs(0,255,t),wg={...Pl,transform:t=>Math.round(Sq(t))},Xi={test:Ww("rgb","red"),parse:OP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wg.transform(t)+", "+wg.transform(e)+", "+wg.transform(n)+", "+Ic(vu.transform(r))+")"};function Cq(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Iy={test:Ww("#"),parse:Cq,transform:Xi.transform},ed=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ps=ed("deg"),Ur=ed("%"),le=ed("px"),Eq=ed("vh"),Nq=ed("vw"),Y1={...Ur,parse:t=>Ur.parse(t)/100,transform:t=>Ur.transform(t*100)},va={test:Ww("hsl","hue"),parse:OP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ur.transform(Ic(e))+", "+Ur.transform(Ic(n))+", "+Ic(vu.transform(r))+")"},at={test:t=>Xi.test(t)||Iy.test(t)||va.test(t),parse:t=>Xi.test(t)?Xi.parse(t):va.test(t)?va.parse(t):Iy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xi.transform(t):va.transform(t),getAnimatableNone:t=>{const e=at.parse(t);return e.alpha=0,at.transform(e)}},kq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Tq(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(zw))==null?void 0:e.length)||0)+(((n=t.match(kq))==null?void 0:n.length)||0)>0}const DP="number",MP="color",Rq="var",jq="var(",Q1="${}",Iq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Iq,c=>(at.test(c)?(r.color.push(i),s.push(MP),n.push(at.parse(c))):c.startsWith(jq)?(r.var.push(i),s.push(Rq),n.push(c)):(r.number.push(i),s.push(DP),n.push(parseFloat(c))),++i,Q1)).split(Q1);return{values:n,split:a,indexes:r,types:s}}function LP(t){return yu(t).values}function FP(t){const{split:e,types:n}=yu(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===DP?i+=Ic(s[o]):a===MP?i+=at.transform(s[o]):i+=s[o]}return i}}const Pq=t=>typeof t=="number"?0:at.test(t)?at.getAnimatableNone(t):t;function Aq(t){const e=LP(t);return FP(t)(e.map(Pq))}const Ci={test:Tq,parse:LP,createTransformer:FP,getAnimatableNone:Aq};function bg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Oq({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=bg(c,a,t+1/3),i=bg(c,a,t),o=bg(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function If(t,e){return n=>n>0?e:t}const Ye=(t,e,n)=>t+(e-t)*n,_g=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Dq=[Iy,Xi,va],Mq=t=>Dq.find(e=>e.test(t));function J1(t){const e=Mq(t);if(!e)return!1;let n=e.parse(t);return e===va&&(n=Oq(n)),n}const X1=(t,e)=>{const n=J1(t),r=J1(e);if(!n||!r)return If(t,e);const s={...n};return i=>(s.red=_g(n.red,r.red,i),s.green=_g(n.green,r.green,i),s.blue=_g(n.blue,r.blue,i),s.alpha=Ye(n.alpha,r.alpha,i),Xi.transform(s))},Py=new Set(["none","hidden"]);function Lq(t,e){return Py.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Fq(t,e){return n=>Ye(t,e,n)}function Hw(t){return typeof t=="number"?Fq:typeof t=="string"?Bw(t)?If:at.test(t)?X1:Vq:Array.isArray(t)?$P:typeof t=="object"?at.test(t)?X1:$q:If}function $P(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Hw(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function $q(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Hw(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Uq(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const Vq=(t,e)=>{const n=Ci.createTransformer(e),r=yu(t),s=yu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Py.has(t)&&!s.values.length||Py.has(e)&&!r.values.length?Lq(t,e):Xu($P(Uq(r,s),s.values),n):If(t,e)};function UP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ye(t,e,n):Hw(t)(t,e)}const Bq=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>qe.update(e,n),stop:()=>Si(e),now:()=>It.isProcessing?It.timestamp:cn.now()}},VP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Pf=2e4;function qw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Pf;)e+=n,r=t.next(e);return e>=Pf?1/0:e}function zq(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(qw(r),Pf);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Ln(s)}}const Wq=5;function BP(t,e,n){const r=Math.max(e-Wq,0);return wP(n-t(r),e-r)}const et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Sg=.001;function Hq({duration:t=et.duration,bounce:e=et.bounce,velocity:n=et.velocity,mass:r=et.mass}){let s,i,o=1-e;o=vs(et.minDamping,et.maxDamping,o),t=vs(et.minDuration,et.maxDuration,Ln(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,p=Ay(u,o),b=Math.exp(-h);return Sg-f/p*b},i=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-h),y=Ay(Math.pow(u,2),o);return(-s(u)+Sg>0?-1:1)*((f-p)*b)/y}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-Sg+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,c=Gq(s,i,a);if(t=$r(t),isNaN(c))return{stiffness:et.stiffness,damping:et.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const qq=12;function Gq(t,e,n){let r=n;for(let s=1;s<qq;s++)r=r-t(r)/e(r);return r}function Ay(t,e){return t*Math.sqrt(1-e*e)}const Kq=["duration","bounce"],Yq=["stiffness","damping","mass"];function Z1(t,e){return e.some(n=>t[n]!==void 0)}function Qq(t){let e={velocity:et.velocity,stiffness:et.stiffness,damping:et.damping,mass:et.mass,isResolvedFromDuration:!1,...t};if(!Z1(t,Yq)&&Z1(t,Kq))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*vs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:et.mass,stiffness:s,damping:i}}else{const n=Hq(t);e={...e,...n,mass:et.mass},e.isResolvedFromDuration=!0}return e}function Af(t=et.visualDuration,e=et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=Qq({...n,velocity:-Ln(n.velocity||0)}),b=f||0,y=u/(2*Math.sqrt(c*d)),w=o-i,v=Ln(Math.sqrt(c/d)),g=Math.abs(w)<5;r||(r=g?et.restSpeed.granular:et.restSpeed.default),s||(s=g?et.restDelta.granular:et.restDelta.default);let x;if(y<1){const _=Ay(v,y);x=C=>{const E=Math.exp(-y*v*C);return o-E*((b+y*v*w)/_*Math.sin(_*C)+w*Math.cos(_*C))}}else if(y===1)x=_=>o-Math.exp(-v*_)*(w+(b+v*w)*_);else{const _=v*Math.sqrt(y*y-1);x=C=>{const E=Math.exp(-y*v*C),N=Math.min(_*C,300);return o-E*((b+y*v*w)*Math.sinh(N)+_*w*Math.cosh(N))/_}}const S={calculatedDuration:p&&h||null,next:_=>{const C=x(_);if(p)a.done=_>=h;else{let E=_===0?b:0;y<1&&(E=_===0?$r(b):BP(x,_,C));const N=Math.abs(E)<=r,k=Math.abs(o-C)<=s;a.done=N&&k}return a.value=a.done?o:C,a},toString:()=>{const _=Math.min(qw(S),Pf),C=VP(E=>S.next(_*E).value,_,30);return _+"ms "+C},toTransition:()=>{}};return S}Af.applyToOptions=t=>{const e=zq(t,100,Af);return t.ease=e.ease,t.duration=$r(e.duration),t.type="keyframes",t};function Oy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=N=>a!==void 0&&N<a||c!==void 0&&N>c,b=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let y=n*e;const w=h+y,v=o===void 0?w:o(w);v!==w&&(y=v-h);const g=N=>-y*Math.exp(-N/r),x=N=>v+g(N),S=N=>{const k=g(N),T=x(N);f.done=Math.abs(k)<=u,f.value=f.done?v:T};let _,C;const E=N=>{p(f.value)&&(_=N,C=Af({keyframes:[f.value,b(f.value)],velocity:BP(x,N,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:N=>{let k=!1;return!C&&_===void 0&&(k=!0,S(N),E(N)),_!==void 0&&N>=_?C.next(N-_):(!k&&S(N),f)}}}function Jq(t,e,n){const r=[],s=n||ys.mix||UP,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||$n:e;a=Xu(c,a)}r.push(a)}return r}function Xq(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(jf(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Jq(e,r,s),c=a.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=gu(t[h],t[h+1],d);return a[h](f)};return n?d=>u(vs(t[0],t[i-1],d)):u}function Zq(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=gu(0,e,r);t.push(Ye(n,1,s))}}function eG(t){const e=[0];return Zq(e,t.length-1),e}function tG(t,e){return t.map(n=>n*e)}function nG(t,e){return t.map(()=>e||RP).splice(0,t.length-1)}function Pc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=pq(r)?r.map(G1):G1(r),i={done:!1,value:e[0]},o=tG(n&&n.length===e.length?n:eG(e),t),a=Xq(o,e,{ease:Array.isArray(s)?s:nG(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const rG=t=>t!==null;function Gw(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(rG),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const sG={decay:Oy,inertia:Oy,tween:Pc,keyframes:Pc,spring:Af};function zP(t){typeof t.type=="string"&&(t.type=sG[t.type])}class Kw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const iG=t=>t/100;class Yw extends Kw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==cn.now()&&this.tick(cn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zP(e);const{type:n=Pc,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const c=n||Pc;c!==Pc&&typeof a[0]!="number"&&(this.mixKeyframes=Xu(iG,UP(a[0],a[1])),a=[0,100]);const u=c({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=qw(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:b,onUpdate:y,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let x=this.currentTime,S=r;if(h){const N=Math.min(this.currentTime,s)/a;let k=Math.floor(N),T=N%1;!T&&N>=1&&(T=1),T===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(T=1-T,p&&(T-=p/a)):f==="mirror"&&(S=o)),x=vs(0,1,T)*a}const _=g?{done:!1,value:d[0]}:S.next(x);i&&(_.value=i(_.value));let{done:C}=_;!g&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&b!==Oy&&(_.value=Gw(d,this.options,w,this.speed)),y&&y(_.value),E&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return Ln(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(this.currentTime)}set time(e){var n;e=$r(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(cn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ln(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=Bq,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(cn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function oG(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Zi=t=>t*180/Math.PI,Dy=t=>{const e=Zi(Math.atan2(t[1],t[0]));return My(e)},aG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Dy,rotateZ:Dy,skewX:t=>Zi(Math.atan(t[1])),skewY:t=>Zi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},My=t=>(t=t%360,t<0&&(t+=360),t),eC=Dy,tC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),nC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),lG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tC,scaleY:nC,scale:t=>(tC(t)+nC(t))/2,rotateX:t=>My(Zi(Math.atan2(t[6],t[5]))),rotateY:t=>My(Zi(Math.atan2(-t[2],t[0]))),rotateZ:eC,rotate:eC,skewX:t=>Zi(Math.atan(t[4])),skewY:t=>Zi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ly(t){return t.includes("scale")?1:0}function Fy(t,e){if(!t||t==="none")return Ly(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=lG,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=aG,s=a}if(!s)return Ly(e);const i=r[e],o=s[1].split(",").map(uG);return typeof i=="function"?i(o):o[i]}const cG=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Fy(n,e)};function uG(t){return parseFloat(t.trim())}const Al=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ol=new Set(Al),rC=t=>t===Pl||t===le,dG=new Set(["x","y","z"]),hG=Al.filter(t=>!dG.has(t));function fG(t){const e=[];return hG.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const uo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Fy(e,"x"),y:(t,{transform:e})=>Fy(e,"y")};uo.translateX=uo.x;uo.translateY=uo.y;const ho=new Set;let $y=!1,Uy=!1,Vy=!1;function WP(){if(Uy){const t=Array.from(ho).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=fG(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Uy=!1,$y=!1,ho.forEach(t=>t.complete(Vy)),ho.clear()}function HP(){ho.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Uy=!0)})}function pG(){Vy=!0,HP(),WP(),Vy=!1}class Qw{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ho.add(this),$y||($y=!0,qe.read(HP),qe.resolveKeyframes(WP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}oG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ho.delete(this)}cancel(){this.state==="scheduled"&&(ho.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mG=t=>t.startsWith("--");function gG(t,e,n){mG(e)?t.style.setProperty(e,n):t.style[e]=n}const vG=Fw(()=>window.ScrollTimeline!==void 0),yG={};function xG(t,e){const n=Fw(t);return()=>yG[e]??n()}const qP=xG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),uc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,sC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:uc([0,.65,.55,1]),circOut:uc([.55,0,1,.45]),backIn:uc([.31,.01,.66,-.59]),backOut:uc([.33,1.53,.69,.99])};function GP(t,e){if(t)return typeof t=="function"?qP()?VP(t,e):"ease-out":jP(t)?uc(t):Array.isArray(t)?t.map(n=>GP(n,e)||sC.easeOut):sC[t]}function wG(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=GP(a,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function KP(t){return typeof t=="function"&&"applyToOptions"in t}function bG({type:t,...e}){return KP(t)&&qP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _G extends Kw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,jf(typeof e.type!="string");const u=bG(e);this.animation=wG(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Gw(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):gG(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ln(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&vG()?(this.animation.timeline=e,$n):n(this)}}const YP={anticipate:NP,backInOut:EP,circInOut:TP};function SG(t){return t in YP}function CG(t){typeof t.ease=="string"&&SG(t.ease)&&(t.ease=YP[t.ease])}const iC=10;class EG extends _G{constructor(e){CG(e),zP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Yw({...o,autoplay:!1}),c=$r(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-iC).value,a.sample(c).value,iC),a.stop()}}const oC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ci.test(t)||t==="0")&&!t.startsWith("url("));function NG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function kG(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=oC(s,e),a=oC(i,e);return!o||!a?!1:NG(t)||(n==="spring"||KP(n))&&r}function By(t){t.duration=0,t.type="keyframes"}const TG=new Set(["opacity","clipPath","filter","transform"]),RG=Fw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function jG(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return RG()&&n&&TG.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const IG=40;class PG extends Kw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:u,element:d,...h}){var b;super(),this.stop=()=>{var y,w;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=cn.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||Qw;this.keyframeResolver=new p(a,(y,w,v)=>this.onKeyframesResolved(y,w,f,!v),c,u,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=cn.now(),kG(e,i,o,a)||((ys.instantAnimations||!c)&&(d==null||d(Gw(e,r,n))),e[0]=e[e.length-1],By(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>IG?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&jG(f)?new EG({...f,element:f.motionValue.owner.current}):new Yw(f);p.finished.then(()=>this.notifyFinished()).catch($n),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),pG()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const AG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function OG(t){const e=AG.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function QP(t,e,n=1){const[r,s]=OG(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return vP(o)?parseFloat(o):o}return Bw(s)?QP(s,e,n+1):s}function Jw(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const JP=new Set(["width","height","top","left","right","bottom",...Al]),DG={test:t=>t==="auto",parse:t=>t},XP=t=>e=>e.test(t),ZP=[Pl,le,Ur,Ps,Nq,Eq,DG],aC=t=>ZP.find(XP(t));function MG(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xP(t):!0}const LG=new Set(["brightness","contrast","saturate","opacity"]);function FG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(zw)||[];if(!r)return t;const s=n.replace(r,"");let i=LG.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const $G=/\b([a-z-]*)\(.*?\)/gu,zy={...Ci,getAnimatableNone:t=>{const e=t.match($G);return e?e.map(FG).join(" "):t}},lC={...Pl,transform:Math.round},UG={rotate:Ps,rotateX:Ps,rotateY:Ps,rotateZ:Ps,scale:$d,scaleX:$d,scaleY:$d,scaleZ:$d,skew:Ps,skewX:Ps,skewY:Ps,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:vu,originX:Y1,originY:Y1,originZ:le},Xw={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...UG,zIndex:lC,fillOpacity:vu,strokeOpacity:vu,numOctaves:lC},VG={...Xw,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:zy,WebkitFilter:zy},eA=t=>VG[t];function tA(t,e){let n=eA(t);return n!==zy&&(n=Ci),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const BG=new Set(["auto","none","0"]);function zG(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!BG.has(i)&&yu(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=tA(n,s)}class WG extends Qw{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Bw(u))){const d=QP(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!JP.has(r)||e.length!==2)return;const[s,i]=e,o=aC(s),a=aC(i);if(o!==a)if(rC(o)&&rC(a))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else uo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||MG(e[s]))&&r.push(s);r.length&&zG(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=uo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=uo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function HG(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const nA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function rA(t){return yP(t)&&"offsetHeight"in t}const cC=30,qG=t=>!isNaN(parseFloat(t));class GG{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=cn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=cn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new $w);const r=this.events[e].add(n);return e==="change"?()=>{r(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cC);return wP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fl(t,e){return new GG(t,e)}const{schedule:Zw,cancel:Fte}=IP(queueMicrotask,!1),Yn={x:!1,y:!1};function sA(){return Yn.x||Yn.y}function KG(t){return t==="x"||t==="y"?Yn[t]?null:(Yn[t]=!0,()=>{Yn[t]=!1}):Yn.x||Yn.y?null:(Yn.x=Yn.y=!0,()=>{Yn.x=Yn.y=!1})}function iA(t,e){const n=HG(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function uC(t){return!(t.pointerType==="touch"||sA())}function YG(t,e,n={}){const[r,s,i]=iA(t,n),o=a=>{if(!uC(a))return;const{target:c}=a,u=e(c,a);if(typeof u!="function"||!c)return;const d=h=>{uC(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const oA=(t,e)=>e?t===e?!0:oA(t,e.parentElement):!1,eb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function JG(t){return QG.has(t.tagName)||t.tabIndex!==-1}const bh=new WeakSet;function dC(t){return e=>{e.key==="Enter"&&t(e)}}function Cg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const XG=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=dC(()=>{if(bh.has(n))return;Cg(n,"down");const s=dC(()=>{Cg(n,"up")}),i=()=>Cg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function hC(t){return eb(t)&&!sA()}function ZG(t,e,n={}){const[r,s,i]=iA(t,n),o=a=>{const c=a.currentTarget;if(!hC(a))return;bh.add(c);const u=e(c,a),d=(p,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),bh.has(c)&&bh.delete(c),hC(p)&&typeof u=="function"&&u(p,{success:b})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||oA(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),rA(a)&&(a.addEventListener("focus",u=>XG(u,s)),!JG(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function aA(t){return yP(t)&&"ownerSVGElement"in t}function e9(t){return aA(t)&&t.tagName==="svg"}const Bt=t=>!!(t&&t.getVelocity),t9=[...ZP,at,Ci],n9=t=>t9.find(XP(t)),tb=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function fC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function r9(...t){return e=>{let n=!1;const r=t.map(s=>{const i=fC(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():fC(t[s],null)}}}}function s9(...t){return m.useCallback(r9(...t),t)}class i9 extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=rA(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function o9({children:t,isPresent:e,anchorX:n,root:r}){const s=m.useId(),i=m.useRef(null),o=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=m.useContext(tb),c=s9(i,t==null?void 0:t.ref);return m.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:p}=o.current;if(e||!i.current||!u||!d)return;const b=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const y=document.createElement("style");a&&(y.nonce=a);const w=r??document.head;return w.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(y)&&w.removeChild(y)}},[e]),l.jsx(i9,{isPresent:e,childRef:i,sizeRef:o,children:m.cloneElement(t,{ref:c})})}const a9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const u=Ow(l9),d=m.useId();let h=!0,f=m.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const b of u.values())if(!b)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),m.useMemo(()=>{u.forEach((p,b)=>u.set(b,!1))},[n]),m.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=l.jsx(o9,{isPresent:n,anchorX:a,root:c,children:t})),l.jsx(Hp.Provider,{value:f,children:t})};function l9(){return new Map}function lA(t=!0){const e=m.useContext(Hp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=m.useId();m.useEffect(()=>{if(t)return s(i)},[t]);const o=m.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Ud=t=>t.key||"";function pC(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const qp=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[u,d]=lA(o),h=m.useMemo(()=>pC(t),[t]),f=o&&!u?[]:h.map(Ud),p=m.useRef(!0),b=m.useRef(h),y=Ow(()=>new Map),[w,v]=m.useState(h),[g,x]=m.useState(h);gP(()=>{p.current=!1,b.current=h;for(let C=0;C<g.length;C++){const E=Ud(g[C]);f.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[g,f.length,f.join("-")]);const S=[];if(h!==w){let C=[...h];for(let E=0;E<g.length;E++){const N=g[E],k=Ud(N);f.includes(k)||(C.splice(E,0,N),S.push(N))}return i==="wait"&&S.length&&(C=S),x(pC(C)),v(h),null}const{forceRender:_}=m.useContext(Aw);return l.jsx(l.Fragment,{children:g.map(C=>{const E=Ud(C),N=o&&!u?!1:h===g||f.includes(E),k=()=>{if(y.has(E))y.set(E,!0);else return;let T=!0;y.forEach(j=>{j||(T=!1)}),T&&(_==null||_(),x(b.current),o&&(d==null||d()),r&&r())};return l.jsx(a9,{isPresent:N,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:N?void 0:k,anchorX:a,children:C},E)})})},cA=m.createContext({strict:!1}),mC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pl={};for(const t in mC)pl[t]={isEnabled:e=>mC[t].some(n=>!!e[n])};function c9(t){for(const e in t)pl[e]={...pl[e],...t[e]}}const u9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Of(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||u9.has(t)}let uA=t=>!Of(t);function d9(t){typeof t=="function"&&(uA=e=>e.startsWith("on")?!Of(e):t(e))}try{d9(require("@emotion/is-prop-valid").default)}catch{}function h9(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(uA(s)||n===!0&&Of(s)||!e&&!Of(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Gp=m.createContext({});function Kp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function xu(t){return typeof t=="string"||Array.isArray(t)}const nb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rb=["initial",...nb];function Yp(t){return Kp(t.animate)||rb.some(e=>xu(t[e]))}function dA(t){return!!(Yp(t)||t.variants)}function f9(t,e){if(Yp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||xu(n)?n:void 0,animate:xu(r)?r:void 0}}return t.inherit!==!1?e:{}}function p9(t){const{initial:e,animate:n}=f9(t,m.useContext(Gp));return m.useMemo(()=>({initial:e,animate:n}),[gC(e),gC(n)])}function gC(t){return Array.isArray(t)?t.join(" "):t}function vC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ic={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=vC(t,e.target.x),r=vC(t,e.target.y);return`${n}% ${r}%`}},m9={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ci.parse(t);if(s.length>5)return r;const i=Ci.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const u=Ye(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},Wy={borderRadius:{...ic,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ic,borderTopRightRadius:ic,borderBottomLeftRadius:ic,borderBottomRightRadius:ic,boxShadow:m9};function hA(t,{layout:e,layoutId:n}){return Ol.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wy[t]||t==="opacity")}const g9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v9=Al.length;function y9(t,e,n){let r="",s=!0;for(let i=0;i<v9;i++){const o=Al[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const u=nA(a,Xw[o]);if(!c){s=!1;const d=g9[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function sb(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const u=e[c];if(Ol.has(c)){o=!0;continue}else if(AP(c)){s[c]=u;continue}else{const d=nA(u,Xw[c]);c.startsWith("origin")?(a=!0,i[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=y9(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const ib=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fA(t,e,n){for(const r in e)!Bt(e[r])&&!hA(r,n)&&(t[r]=e[r])}function x9({transformTemplate:t},e){return m.useMemo(()=>{const n=ib();return sb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function w9(t,e){const n=t.style||{},r={};return fA(r,n,t),Object.assign(r,x9(t,e)),r}function b9(t,e){const n={},r=w9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const _9={offset:"stroke-dashoffset",array:"stroke-dasharray"},S9={offset:"strokeDashoffset",array:"strokeDasharray"};function C9(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?_9:S9;t[i.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[i.array]=`${o} ${a}`}function pA(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,u,d){if(sb(t,a,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&C9(h,s,i,o,!1)}const mA=()=>({...ib(),attrs:{}}),gA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function E9(t,e,n,r){const s=m.useMemo(()=>{const i=mA();return pA(i,e,gA(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};fA(i,t.style,t),s.style={...i,...s.style}}return s}const N9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ob(t){return typeof t!="string"||t.includes("-")?!1:!!(N9.indexOf(t)>-1||/[A-Z]/u.test(t))}function k9(t,e,n,{latestValues:r},s,i=!1){const a=(ob(t)?E9:b9)(e,r,s,t),c=h9(e,typeof t=="string",i),u=t!==m.Fragment?{...c,...a,ref:n}:{},{children:d}=e,h=m.useMemo(()=>Bt(d)?d.get():d,[d]);return m.createElement(t,{...u,children:h})}function yC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ab(t,e,n,r){if(typeof e=="function"){const[s,i]=yC(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=yC(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function _h(t){return Bt(t)?t.get():t}function T9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:R9(n,r,s,t),renderState:e()}}function R9(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=_h(i[f]);let{initial:o,animate:a}=t;const c=Yp(t),u=dA(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!Kp(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const b=ab(t,f[p]);if(b){const{transitionEnd:y,transition:w,...v}=b;for(const g in v){let x=v[g];if(Array.isArray(x)){const S=d?x.length-1:0;x=x[S]}x!==null&&(s[g]=x)}for(const g in y)s[g]=y[g]}}}return s}const vA=t=>(e,n)=>{const r=m.useContext(Gp),s=m.useContext(Hp),i=()=>T9(t,e,r,s);return n?i():Ow(i)};function lb(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Bt(r[o])||e.style&&Bt(e.style[o])||hA(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const j9=vA({scrapeMotionValuesFromProps:lb,createRenderState:ib});function yA(t,e,n){const r=lb(t,e,n);for(const s in t)if(Bt(t[s])||Bt(e[s])){const i=Al.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const I9=vA({scrapeMotionValuesFromProps:yA,createRenderState:mA}),P9=Symbol.for("motionComponentSymbol");function ya(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function A9(t,e,n){return m.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ya(n)&&(n.current=r))},[e])}const cb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),O9="framerAppearId",xA="data-"+cb(O9),wA=m.createContext({});function D9(t,e,n,r,s){var y,w;const{visualElement:i}=m.useContext(Gp),o=m.useContext(cA),a=m.useContext(Hp),c=m.useContext(tb).reducedMotion,u=m.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=m.useContext(wA);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&M9(u.current,n,s,h);const f=m.useRef(!1);m.useInsertionEffect(()=>{d&&f.current&&d.update(n,a)});const p=n[xA],b=m.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return gP(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),b.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),b.current=!1),d.enteringChildren=void 0)}),d}function M9(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:bA(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&ya(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function bA(t){if(t)return t.options.allowProjection!==!1?t.projection:bA(t.parent)}function Eg(t,{forwardMotionProps:e=!1}={},n,r){n&&c9(n);const s=ob(t)?I9:j9;function i(a,c){let u;const d={...m.useContext(tb),...a,layoutId:L9(a)},{isStatic:h}=d,f=p9(a),p=s(a,h);if(!h&&Dw){F9();const b=$9(d);u=b.MeasureLayout,f.visualElement=D9(t,p,d,r,b.ProjectionNode)}return l.jsxs(Gp.Provider,{value:f,children:[u&&f.visualElement?l.jsx(u,{visualElement:f.visualElement,...d}):null,k9(t,a,A9(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=m.forwardRef(i);return o[P9]=t,o}function L9({layoutId:t}){const e=m.useContext(Aw).id;return e&&t!==void 0?e+"-"+t:t}function F9(t,e){m.useContext(cA).strict}function $9(t){const{drag:e,layout:n}=pl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function U9(t,e){if(typeof Proxy>"u")return Eg;const n=new Map,r=(i,o)=>Eg(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Eg(o,void 0,t,e)),n.get(o))})}function _A({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function V9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ng(t){return t===void 0||t===1}function Hy({scale:t,scaleX:e,scaleY:n}){return!Ng(t)||!Ng(e)||!Ng(n)}function zi(t){return Hy(t)||SA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SA(t){return xC(t.x)||xC(t.y)}function xC(t){return t&&t!=="0%"}function Df(t,e,n){const r=t-n,s=e*r;return n+s}function wC(t,e,n,r,s){return s!==void 0&&(t=Df(t,s,r)),Df(t,n,r)+e}function qy(t,e=0,n=1,r,s){t.min=wC(t.min,e,n,r,s),t.max=wC(t.max,e,n,r,s)}function CA(t,{x:e,y:n}){qy(t.x,e.translate,e.scale,e.originPoint),qy(t.y,n.translate,n.scale,n.originPoint)}const bC=.999999999999,_C=1.0000000000001;function z9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&wa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,CA(t,o)),r&&zi(i.latestValues)&&wa(t,i.latestValues))}e.x<_C&&e.x>bC&&(e.x=1),e.y<_C&&e.y>bC&&(e.y=1)}function xa(t,e){t.min=t.min+e,t.max=t.max+e}function SC(t,e,n,r,s=.5){const i=Ye(t.min,t.max,s);qy(t,e,n,i,r)}function wa(t,e){SC(t.x,e.x,e.scaleX,e.scale,e.originX),SC(t.y,e.y,e.scaleY,e.scale,e.originY)}function EA(t,e){return _A(B9(t.getBoundingClientRect(),e))}function W9(t,e,n){const r=EA(t,n),{scroll:s}=e;return s&&(xa(r.x,s.offset.x),xa(r.y,s.offset.y)),r}const CC=()=>({translate:0,scale:1,origin:0,originPoint:0}),ba=()=>({x:CC(),y:CC()}),EC=()=>({min:0,max:0}),ht=()=>({x:EC(),y:EC()}),Gy={current:null},NA={current:!1};function H9(){if(NA.current=!0,!!Dw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gy.current=t.matches;t.addEventListener("change",e),e()}else Gy.current=!1}const q9=new WeakMap;function G9(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Bt(s))t.addValue(r,s);else if(Bt(i))t.addValue(r,fl(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,fl(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const NC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=cn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,qe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Yp(n),this.isVariantNode=dA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Bt(p)&&p.set(c[f])}}mount(e){var n;this.current=e,q9.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),NA.current||H9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gy.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Si(this.notifyUpdate),Si(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ol.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&qe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pl){const n=pl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<NC.length;r++){const s=NC[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=G9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=fl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vP(r)||xP(r))?r=parseFloat(r):!n9(r)&&Ci.test(n)&&(r=tA(e,n)),this.setBaseTarget(e,Bt(r)?r.get():r)),Bt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ab(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Bt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new $w),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Zw.render(this.render)}}class kA extends K9{constructor(){super(...arguments),this.KeyframeResolver=WG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function TA(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function Y9(t){return window.getComputedStyle(t)}class Q9 extends kA{constructor(){super(...arguments),this.type="html",this.renderInstance=TA}readValueFromInstance(e,n){var r;if(Ol.has(n))return(r=this.projection)!=null&&r.isProjecting?Ly(n):cG(e,n);{const s=Y9(e),i=(AP(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return EA(e,n)}build(e,n,r){sb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return lb(e,n,r)}}const RA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function J9(t,e,n,r){TA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(RA.has(s)?s:cb(s),e.attrs[s])}class X9 extends kA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ol.has(n)){const r=eA(n);return r&&r.default||0}return n=RA.has(n)?n:cb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yA(e,n,r)}build(e,n,r){pA(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){J9(e,n,r,s)}mount(e){this.isSVGTag=gA(e.tagName),super.mount(e)}}const Z9=(t,e)=>ob(t)?new X9(e):new Q9(e,{allowProjection:t!==m.Fragment});function Ua(t,e,n){const r=t.getProps();return ab(r,e,n!==void 0?n:r.custom,t)}const Ky=t=>Array.isArray(t);function e7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,fl(n))}function t7(t){return Ky(t)?t[t.length-1]||0:t}function n7(t,e){const n=Ua(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=t7(i[o]);e7(t,o,a)}}function r7(t){return!!(Bt(t)&&t.add)}function Yy(t,e){const n=t.getValue("willChange");if(r7(n))return n.add(e);if(!n&&ys.WillChange){const r=new ys.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function jA(t){return t.props[xA]}const s7=t=>t!==null;function i7(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(s7),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const o7={type:"spring",stiffness:500,damping:25,restSpeed:10},a7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),l7={type:"keyframes",duration:.8},c7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u7=(t,{keyframes:e})=>e.length>2?l7:Ol.has(t)?t.startsWith("scale")?a7(e[1]):o7:c7;function d7({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const ub=(t,e,n,r={},s,i)=>o=>{const a=Jw(r,t)||{},c=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-$r(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};d7(a)||Object.assign(d,u7(t,d)),d.duration&&(d.duration=$r(d.duration)),d.repeatDelay&&(d.repeatDelay=$r(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(By(d),d.delay===0&&(h=!0)),(ys.instantAnimations||ys.skipAnimations)&&(h=!0,By(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!i&&e.get()!==void 0){const f=i7(d.keyframes,a);if(f!==void 0){qe.update(()=>{d.onUpdate(f),d.onComplete()});return}}return a.isSync?new Yw(d):new PG(d)};function h7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function IA(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const h=t.getValue(d,t.latestValues[d]??null),f=a[d];if(f===void 0||u&&h7(u,d))continue;const p={delay:n,...Jw(i||{},d)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===b&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=jA(t);if(v){const g=window.MotionHandoffAnimation(v,d,qe);g!==null&&(p.startTime=g,y=!0)}}Yy(t,d),h.start(ub(d,h,f,t.shouldReduceMotion&&JP.has(d)?{type:!1}:p,t,y));const w=h.animation;w&&c.push(w)}return o&&Promise.all(c).then(()=>{qe.update(()=>{o&&n7(t,o)})}),c}function PA(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function Qy(t,e,n={}){var c;const r=Ua(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(IA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return f7(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,d]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function f7(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Qy(c,e,{...o,delay:n+(typeof r=="function"?0:r)+PA(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function p7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Qy(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Qy(t,e,n);else{const s=typeof e=="function"?Ua(t,e,n.custom):e;r=Promise.all(IA(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function AA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const m7=rb.length;function OA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?OA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<m7;n++){const r=rb[n],s=t.props[r];(xu(s)||s===!1)&&(e[r]=s)}return e}const g7=[...nb].reverse(),v7=nb.length;function y7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>p7(t,n,r)))}function x7(t){let e=y7(t),n=kC(),r=!0;const s=c=>(u,d)=>{var f;const h=Ua(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:b,...y}=h;u={...u,...y,...b}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=OA(t.parent)||{},h=[],f=new Set;let p={},b=1/0;for(let w=0;w<v7;w++){const v=g7[w],g=n[v],x=u[v]!==void 0?u[v]:d[v],S=xu(x),_=v===c?g.isActive:null;_===!1&&(b=w);let C=x===d[v]&&x!==u[v]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...p},!g.isActive&&_===null||!x&&!g.prevProp||Kp(x)||typeof x=="boolean")continue;const E=w7(g.prevProp,x);let N=E||v===c&&g.isActive&&!C&&S||w>b&&S,k=!1;const T=Array.isArray(x)?x:[x];let j=T.reduce(s(v),{});_===!1&&(j={});const{prevResolvedValues:I={}}=g,q={...I,...j},P=G=>{N=!0,f.has(G)&&(k=!0,f.delete(G)),g.needsAnimating[G]=!0;const A=t.getValue(G);A&&(A.liveStyle=!1)};for(const G in q){const A=j[G],L=I[G];if(p.hasOwnProperty(G))continue;let R=!1;Ky(A)&&Ky(L)?R=!AA(A,L):R=A!==L,R?A!=null?P(G):f.add(G):A!==void 0&&f.has(G)?P(G):g.protectedKeys[G]=!0}g.prevProp=x,g.prevResolvedValues=j,g.isActive&&(p={...p,...j}),r&&t.blockInitialAnimation&&(N=!1);const V=C&&E;N&&(!V||k)&&h.push(...T.map(G=>{const A={type:v};if(typeof G=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:L}=t,R=Ua(L,G);if(L.enteringChildren&&R){const{delayChildren:W}=R.transition||{};A.delay=PA(L.enteringChildren,t,W)}}return{animation:G,options:A}}))}if(f.size){const w={};if(typeof u.initial!="boolean"){const v=Ua(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(w.transition=v.transition)}f.forEach(v=>{const g=t.getBaseTarget(v),x=t.getValue(v);x&&(x.liveStyle=!0),w[v]=g??null}),h.push({animation:w})}let y=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(h):Promise.resolve()}function a(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=kC()}}}function w7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AA(e,t):!1}function Mi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kC(){return{animate:Mi(!0),whileInView:Mi(),whileHover:Mi(),whileTap:Mi(),whileDrag:Mi(),whileFocus:Mi(),exit:Mi()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class b7 extends Ri{constructor(e){super(e),e.animationState||(e.animationState=x7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let _7=0;class S7 extends Ri{constructor(){super(...arguments),this.id=_7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const C7={animation:{Feature:b7},exit:{Feature:S7}};function wu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function td(t){return{point:{x:t.pageX,y:t.pageY}}}const E7=t=>e=>eb(e)&&t(e,td(e));function Ac(t,e,n,r){return wu(t,e,E7(n),r)}const DA=1e-4,N7=1-DA,k7=1+DA,MA=.01,T7=0-MA,R7=0+MA;function Jt(t){return t.max-t.min}function j7(t,e,n){return Math.abs(t-e)<=n}function TC(t,e,n,r=.5){t.origin=r,t.originPoint=Ye(e.min,e.max,t.origin),t.scale=Jt(n)/Jt(e),t.translate=Ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=N7&&t.scale<=k7||isNaN(t.scale))&&(t.scale=1),(t.translate>=T7&&t.translate<=R7||isNaN(t.translate))&&(t.translate=0)}function Oc(t,e,n,r){TC(t.x,e.x,n.x,r?r.originX:void 0),TC(t.y,e.y,n.y,r?r.originY:void 0)}function RC(t,e,n){t.min=n.min+e.min,t.max=t.min+Jt(e)}function I7(t,e,n){RC(t.x,e.x,n.x),RC(t.y,e.y,n.y)}function jC(t,e,n){t.min=e.min-n.min,t.max=t.min+Jt(e)}function Mf(t,e,n){jC(t.x,e.x,n.x),jC(t.y,e.y,n.y)}function Pn(t){return[t("x"),t("y")]}const LA=({current:t})=>t?t.ownerDocument.defaultView:null,IC=(t,e)=>Math.abs(t-e);function P7(t,e){const n=IC(t.x,e.x),r=IC(t.y,e.y);return Math.sqrt(n**2+r**2)}class FA{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Tg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,b=P7(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!b)return;const{point:y}=f,{timestamp:w}=It;this.history.push({...y,timestamp:w});const{onStart:v,onMove:g}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=kg(p,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:b,onSessionEnd:y,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Tg(f.type==="pointercancel"?this.lastMoveEventInfo:kg(p,this.transformPagePoint),this.history);this.startEvent&&b&&b(f,v),y&&y(f,v)},!eb(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=td(e),c=kg(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=It;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,Tg(c,this.history)),this.removeListeners=Xu(Ac(this.contextWindow,"pointermove",this.handlePointerMove),Ac(this.contextWindow,"pointerup",this.handlePointerUp),Ac(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Si(this.updatePoint)}}function kg(t,e){return e?{point:e(t.point)}:t}function PC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tg({point:t},e){return{point:t,delta:PC(t,$A(e)),offset:PC(t,A7(e)),velocity:O7(e,.1)}}function A7(t){return t[0]}function $A(t){return t[t.length-1]}function O7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=$A(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>$r(e)));)n--;if(!r)return{x:0,y:0};const i=Ln(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function D7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ye(n,t,r.max):Math.min(t,n)),t}function AC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M7(t,{top:e,left:n,bottom:r,right:s}){return{x:AC(t.x,n,s),y:AC(t.y,e,r)}}function OC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function L7(t,e){return{x:OC(t.x,e.x),y:OC(t.y,e.y)}}function F7(t,e){let n=.5;const r=Jt(t),s=Jt(e);return s>r?n=gu(e.min,e.max-r,t.min):r>s&&(n=gu(t.min,t.max-s,e.min)),vs(0,1,n)}function $7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Jy=.35;function U7(t=Jy){return t===!1?t=0:t===!0&&(t=Jy),{x:DC(t,"left","right"),y:DC(t,"top","bottom")}}function DC(t,e,n){return{min:MC(t,e),max:MC(t,n)}}function MC(t,e){return typeof t=="number"?t:t[e]||0}const V7=new WeakMap;class B7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ht(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(td(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:b,onDragStart:y}=this.getProps();if(p&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KG(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(v=>{let g=this.getAxisMotionValue(v).get()||0;if(Ur.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[v];S&&(g=Jt(S)*(parseFloat(g)/100))}}this.originPoint[v]=g}),y&&qe.postRender(()=>y(h,f)),Yy(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:b,onDirectionLock:y,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(b&&this.currentDirection===null){this.currentDirection=z7(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),w&&w(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Pn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new FA(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:LA(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&qe.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Vd(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=D7(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&ya(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=M7(r.layoutBox,e):this.constraints=!1,this.elastic=U7(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$7(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ya(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=W9(r,s.root,this.visualElement.getTransformPagePoint());let o=L7(s.layout.layoutBox,i);if(n){const a=n(V9(o));this.hasMutatedConstraints=!!a,a&&(o=_A(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Pn(d=>{if(!Vd(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,b={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Yy(this.visualElement,e),r.start(ub(e,r,0,n,this.visualElement,!1))}stopAnimation(){Pn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pn(n=>{const{drag:r}=this.getProps();if(!Vd(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ya(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=F7({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(o=>{if(!Vd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Ye(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;V7.set(this.visualElement,this);const e=this.visualElement.current,n=Ac(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ya(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),qe.read(r);const o=wu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Pn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Jy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Vd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function z7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class W7 extends Ri{constructor(e){super(e),this.removeGroupControls=$n,this.removeListeners=$n,this.controls=new B7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$n}unmount(){this.removeGroupControls(),this.removeListeners()}}const LC=t=>(e,n)=>{t&&qe.postRender(()=>t(e,n))};class H7 extends Ri{constructor(){super(...arguments),this.removePointerDownListener=$n}onPointerDown(e){this.session=new FA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:LC(e),onStart:LC(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&qe.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ac(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Rg=!1;class q7 extends m.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Rg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Rg=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||qe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Zw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Rg=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UA(t){const[e,n]=lA(),r=m.useContext(Aw);return l.jsx(q7,{...t,layoutGroup:r,switchLayoutGroup:m.useContext(wA),isPresent:e,safeToRemove:n})}function G7(t,e,n){const r=Bt(t)?t:fl(t);return r.start(ub("",r,e,n)),r.animation}const K7=(t,e)=>t.depth-e.depth;class Y7{constructor(){this.children=[],this.isDirty=!1}add(e){Mw(this.children,e),this.isDirty=!0}remove(e){Lw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(K7),this.isDirty=!1,this.children.forEach(e)}}function Q7(t,e){const n=cn.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Si(r),t(i-e))};return qe.setup(r,!0),()=>Si(r)}const VA=["TopLeft","TopRight","BottomLeft","BottomRight"],J7=VA.length,FC=t=>typeof t=="string"?parseFloat(t):t,$C=t=>typeof t=="number"||le.test(t);function X7(t,e,n,r,s,i){s?(t.opacity=Ye(0,n.opacity??1,Z7(r)),t.opacityExit=Ye(e.opacity??1,0,eK(r))):i&&(t.opacity=Ye(e.opacity??1,n.opacity??1,r));for(let o=0;o<J7;o++){const a=`border${VA[o]}Radius`;let c=UC(e,a),u=UC(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||$C(c)===$C(u)?(t[a]=Math.max(Ye(FC(c),FC(u),r),0),(Ur.test(u)||Ur.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ye(e.rotate||0,n.rotate||0,r))}function UC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Z7=BA(0,.5,kP),eK=BA(.5,.95,$n);function BA(t,e,n){return r=>r<t?0:r>e?1:n(gu(t,e,r))}function VC(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){VC(t.x,e.x),VC(t.y,e.y)}function BC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function zC(t,e,n,r,s){return t-=e,t=Df(t,1/n,r),s!==void 0&&(t=Df(t,1/s,r)),t}function tK(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ur.test(e)&&(e=parseFloat(e),e=Ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ye(i.min,i.max,r);t===i&&(a-=e),t.min=zC(t.min,e,n,a,s),t.max=zC(t.max,e,n,a,s)}function WC(t,e,[n,r,s],i,o){tK(t,e[n],e[r],e[s],e.scale,i,o)}const nK=["x","scaleX","originX"],rK=["y","scaleY","originY"];function HC(t,e,n,r){WC(t.x,e,nK,n?n.x:void 0,r?r.x:void 0),WC(t.y,e,rK,n?n.y:void 0,r?r.y:void 0)}function qC(t){return t.translate===0&&t.scale===1}function zA(t){return qC(t.x)&&qC(t.y)}function GC(t,e){return t.min===e.min&&t.max===e.max}function sK(t,e){return GC(t.x,e.x)&&GC(t.y,e.y)}function KC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WA(t,e){return KC(t.x,e.x)&&KC(t.y,e.y)}function YC(t){return Jt(t.x)/Jt(t.y)}function QC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class iK{constructor(){this.members=[]}add(e){Mw(this.members,e),e.scheduleRender()}remove(e){if(Lw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oK(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const jg=["","X","Y","Z"],aK=1e3;let lK=0;function Ig(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function HA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=jA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qe,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&HA(r)}function qA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=lK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dK),this.nodes.forEach(mK),this.nodes.forEach(gK),this.nodes.forEach(hK)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Y7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $w),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=aA(o)&&!e9(o),this.instance=o;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;qe.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=Q7(f,250),Sh.hasAnimatedSinceResize&&(Sh.hasAnimatedSinceResize=!1,this.nodes.forEach(ZC)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||bK,{onLayoutAnimationStart:y,onLayoutAnimationComplete:w}=u.getProps(),v=!this.targetLayout||!WA(this.targetLayout,p),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...Jw(b,"layout"),onPlay:y,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,g)}else h||ZC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pK),this.nodes.forEach(cK),this.nodes.forEach(uK)):this.nodes.forEach(XC),this.clearAllSnapshots();const a=cn.now();It.delta=vs(0,1e3/60,a-It.timestamp),It.timestamp=a,It.isProcessing=!0,xg.update.process(It),xg.preRender.process(It),xg.render.process(It),It.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fK),this.sharedNodes.forEach(yK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jt(this.snapshot.measuredBox.x)&&!Jt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zA(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||zi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),_K(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ht();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(SK))){const{scroll:d}=this.root;d&&(xa(a.x,d.offset.x),xa(a.y,d.offset.y))}return a}removeElementScroll(o){var c;const a=ht();if(Gn(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Gn(a,o),xa(a.x,h.offset.x),xa(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const c=ht();Gn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&wa(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zi(d.latestValues)&&wa(c,d.latestValues)}return zi(this.latestValues)&&wa(c,this.latestValues),c}removeTransform(o){const a=ht();Gn(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zi(u.latestValues))continue;Hy(u.latestValues)&&u.updateSnapshot();const d=ht(),h=u.measurePageBox();Gn(d,h),HC(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zi(this.latestValues)&&HC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==It.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=It.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ht(),this.targetWithTransforms=ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),I7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),CA(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Hy(this.parent.latestValues)||SA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ht(),this.relativeTargetOrigin=ht(),Mf(this.relativeTargetOrigin,a,c),Gn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===It.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Gn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;z9(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ht());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BC(this.prevProjectionDelta.x,this.projectionDelta.x),BC(this.prevProjectionDelta.y,this.projectionDelta.y)),Oc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!QC(this.projectionDelta.x,this.prevProjectionDelta.x)||!QC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ba(),this.projectionDelta=ba(),this.projectionDeltaWithTransform=ba()}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ba();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ht(),p=c?c.source:void 0,b=this.layout?this.layout.source:void 0,y=p!==b,w=this.getStack(),v=!w||w.members.length<=1,g=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(wK));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const _=S/1e3;eE(h.x,o.x,_),eE(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xK(this.relativeTarget,this.relativeTargetOrigin,f,_),x&&sK(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ht()),Gn(x,this.relativeTarget)),y&&(this.animationValues=d,X7(d,u,this.latestValues,_,g,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{Sh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fl(0)),this.currentAnimation=G7(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(aK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&GA(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ht();const h=Jt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Jt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Gn(a,c),wa(a,d),Oc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iK),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&Ig("z",o,u,this.animationValues);for(let d=0;d<jg.length;d++)Ig(`rotate${jg[d]}`,o,u,this.animationValues),Ig(`skew${jg[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=_h(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=_h(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=oK(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const b in Wy){if(d[b]===void 0)continue;const{correct:y,applyTo:w,isCSSVariable:v}=Wy[b],g=h==="none"?d[b]:y(d[b],u);if(w){const x=w.length;for(let S=0;S<x;S++)o[w[S]]=g}else v?this.options.visualElement.renderState.vars[b]=g:o[b]=g}this.options.layoutId&&(o.pointerEvents=u===this?_h(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(JC),this.root.sharedNodes.clear()}}}function cK(t){t.updateLayout()}function uK(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Pn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Jt(f);f.min=r[h].min,f.max=f.min+p}):GA(i,e.layoutBox,r)&&Pn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Jt(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=ba();Oc(a,r,e.layoutBox);const c=ba();o?Oc(c,t.applyTransform(s,!0),e.measuredBox):Oc(c,r,e.layoutBox);const u=!zA(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const b=ht();Mf(b,e.layoutBox,f.layoutBox);const y=ht();Mf(y,r,p.layoutBox),WA(b,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dK(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fK(t){t.clearSnapshot()}function JC(t){t.clearMeasurements()}function XC(t){t.isLayoutDirty=!1}function pK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function mK(t){t.resolveTargetDelta()}function gK(t){t.calcProjection()}function vK(t){t.resetSkewAndRotation()}function yK(t){t.removeLeadSnapshot()}function eE(t,e,n){t.translate=Ye(e.translate,0,n),t.scale=Ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function tE(t,e,n,r){t.min=Ye(e.min,n.min,r),t.max=Ye(e.max,n.max,r)}function xK(t,e,n,r){tE(t.x,e.x,n.x,r),tE(t.y,e.y,n.y,r)}function wK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bK={duration:.45,ease:[.4,0,.1,1]},nE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rE=nE("applewebkit/")&&!nE("chrome/")?Math.round:$n;function sE(t){t.min=rE(t.min),t.max=rE(t.max)}function _K(t){sE(t.x),sE(t.y)}function GA(t,e,n){return t==="position"||t==="preserve-aspect"&&!j7(YC(e),YC(n),.2)}function SK(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const CK=qA({attachResizeListener:(t,e)=>wu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pg={current:void 0},KA=qA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pg.current){const t=new CK({});t.mount(window),t.setOptions({layoutScroll:!0}),Pg.current=t}return Pg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),EK={pan:{Feature:H7},drag:{Feature:W7,ProjectionNode:KA,MeasureLayout:UA}};function iE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&qe.postRender(()=>i(e,td(e)))}class NK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=YG(e,(n,r)=>(iE(this.node,r,"Start"),s=>iE(this.node,s,"End"))))}unmount(){}}class kK extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xu(wu(this.node.current,"focus",()=>this.onFocus()),wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&qe.postRender(()=>i(e,td(e)))}class TK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=ZG(e,(n,r)=>(oE(this.node,r,"Start"),(s,{success:i})=>oE(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xy=new WeakMap,Ag=new WeakMap,RK=t=>{const e=Xy.get(t.target);e&&e(t)},jK=t=>{t.forEach(RK)};function IK({root:t,...e}){const n=t||document;Ag.has(n)||Ag.set(n,{});const r=Ag.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(jK,{root:t,...e})),r[s]}function PK(t,e,n){const r=IK(e);return Xy.set(t,n),r.observe(t),()=>{Xy.delete(t),r.unobserve(t)}}const AK={some:0,all:1};class OK extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:AK[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return PK(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DK(e,n))&&this.startObserver()}unmount(){}}function DK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const MK={inView:{Feature:OK},tap:{Feature:TK},focus:{Feature:kK},hover:{Feature:NK}},LK={layout:{ProjectionNode:KA,MeasureLayout:UA}},FK={...C7,...MK,...EK,...LK},pe=U9(FK,Z9);var Ir=function(){return Ir=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ir.apply(this,arguments)};function Dl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $K(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function UK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}const VK=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class db extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class BK extends db{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class aE extends db{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lE extends db{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zy||(Zy={}));class zK{constructor(e,{headers:n={},customFetch:r,region:s=Zy.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=VK(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $K(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:c,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const b=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,b.searchParams.set("forceFunctionRegion",p));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(w=o.signal,d.addEventListener("abort",()=>o.abort())):w=o.signal);const v=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:w}).catch(_=>{throw new BK(_)}),g=v.headers.get("x-relay-error");if(g&&g==="true")throw new aE(v);if(!v.ok)throw new lE(v);let x=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return x==="application/json"?S=yield v.json():x==="application/octet-stream"||x==="application/pdf"?S=yield v.blob():x==="text/event-stream"?S=v:x==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof lE||a instanceof aE?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var WK=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},HK=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var p;const v=await i.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var b;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&y===""?(u=204,d="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new WK(o)}return{error:o,data:a,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",y=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${b}`,y&&(a+=` (${y})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},qK=class extends HK{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const cE=new RegExp("[,()]");var Xo=class extends qK{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},GK=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Xo({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Xo({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Xo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Xo({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},KK=class YA{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new GK(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new YA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Xo({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class YK{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const QK="2.89.0",JK=`realtime-js/${QK}`,QA="1.0.0",XK="2.0.0",uE=QA,e0=1e4,ZK=1e3,eY=100;var Ms;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ms||(Ms={}));var dt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(dt||(dt={}));var rr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rr||(rr={}));var t0;(function(t){t.websocket="websocket"})(t0||(t0={}));var Hi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Hi||(Hi={}));class tY{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(p),y=0;b.setUint8(y++,this.KINDS.userBroadcastPush),b.setUint8(y++,c.length),b.setUint8(y++,a.length),b.setUint8(y++,o.length),b.setUint8(y++,u.length),b.setUint8(y++,h.length),b.setUint8(y++,n),Array.from(c,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(a,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(h,v=>b.setUint8(y++,v.charCodeAt(0)));var w=new Uint8Array(p.byteLength+r.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(r),p.byteLength),w.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,c]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+s));c=c+s;const d=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,b={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class JA{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const dE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=nY(o,t,e,s),i),{}):{}},nY=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?XA(i,o):n0(o)},XA=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return oY(e,n)}switch(t){case De.bool:return rY(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return sY(e);case De.json:case De.jsonb:return iY(e);case De.timestamp:return aY(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return n0(e);default:return n0(e)}},n0=t=>t,rY=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},sY=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},iY=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},oY=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>XA(e,a))}return t},aY=t=>typeof t=="string"?t.replace(" ","T"):t,ZA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Og{constructor(e,n,r={},s=e0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hE||(hE={}));class Dc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Dc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Dc.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),b=d.filter(w=>p.indexOf(w.presence_ref)<0),y=h.filter(w=>f.indexOf(w.presence_ref)<0);b.length>0&&(a[u]=b),y.length>0&&(c[u]=y)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fE||(fE={}));var Mc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Mc||(Mc={}));var Jr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Jr||(Jr={}));class _a{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Og(this,rr.join,this.params,this.timeout),this.rejoinTimer=new JA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Dc(this),this.broadcastEndpointURL=ZA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dt.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Mc.PRESENCE]&&this.bindings[Mc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Jr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Jr.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,v=[];for(let g=0;g<w;g++){const x=y[g],{filter:{event:S,schema:_,table:C,filter:E}}=x,N=p&&p[g];if(N&&N.event===S&&_a.isFilterValueEqual(N.schema,_)&&_a.isFilterValueEqual(N.table,C)&&_a.isFilterValueEqual(N.filter,E))v.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),this.state=dt.errored,e==null||e(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Jr.SUBSCRIBED);return}}).receive("error",p=>{this.state=dt.errored,e==null||e(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===dt.joined&&e===Mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Og(this,rr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Og(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>eY){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=rr;if(r&&[a,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var b,y,w;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var b,y,w,v,g,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,_=(b=p.filter)===null||b===void 0?void 0:b.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:y,table:w,commit_timestamp:v,type:g,errors:x}=b;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:v,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(b))}p.callback(f,r)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&_a.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rr.close,{},e)}_onError(e){this._on(rr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dE(e.columns,e.old_record)),n}}const Dg=()=>{},Bd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lY=[1e3,2e3,5e3,1e4],cY=1e4,uY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dY{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=e0,this.transport=null,this.heartbeatIntervalMs=Bd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dg,this.ref=0,this.reconnectTimer=null,this.vsn=uE,this.logger=Dg,this.conn=null,this.sendBuffer=[],this.serializer=new tY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${t0.websocket}`,this.httpEndpoint=ZA(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YK.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return Hi.Connecting;case Ms.open:return Hi.Open;case Ms.closing:return Hi.Closing;default:return Hi.Closed}}isConnected(){return this.connectionState()===Hi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new _a(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ZK,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Bd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ms.open||this.conn.readyState===Ms.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([uY],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:JK};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new JA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,c,u,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:e0,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Bd.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Dg,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:uE,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:b=>lY[b-1]||cY,this.vsn){case QA:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(b,y)=>y(JSON.stringify(b)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(b,y)=>y(JSON.parse(b));break;case XK:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var bu=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hY(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function fY(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function pY(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=hY(t.baseUrl,r,s),c=await fY(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,b=p==null?void 0:p.error;throw new bu((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function zd(t){return t.join("")}var mY=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:zd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zd(t.namespace)}`}),!0}catch(e){if(e instanceof bu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof bu&&n.status===409)return;throw n}}};function Bo(t){return t.join("")}var gY=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof bu&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof bu&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},vY=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=pY({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new mY(this.client,e),this.tableOps=new gY(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Qp=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var yY=class extends Qp{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},r0=class extends Qp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const hb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xY=()=>Response,s0=t=>{if(Array.isArray(t))return t.map(n=>s0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=s0(r)}),e},wY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bY=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function _Y(t,e){if(_u(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SY(t){var e=_Y(t,"string");return _u(e)=="symbol"?e:e+""}function CY(t,e,n){return(e=SY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pE(Object(n),!0).forEach(function(r){CY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Mg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},EY=async(t,e,n)=>{t instanceof await xY()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new yY(Mg(r),s,i))}).catch(r=>{e(new r0(Mg(r),r))}):e(new r0(Mg(t),t))},NY=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(wY(r)?(s.headers=oe({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),oe(oe({},s),n))};async function nd(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,NY(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>EY(c,a,r))})}async function Su(t,e,n,r){return nd(t,"GET",e,n,r)}async function Zn(t,e,n,r,s){return nd(t,"POST",e,r,s,n)}async function i0(t,e,n,r,s){return nd(t,"PUT",e,r,s,n)}async function kY(t,e,n,r){return nd(t,"HEAD",e,oe(oe({},n),{},{noResolveJson:!0}),r)}async function fb(t,e,n,r,s){return nd(t,"DELETE",e,r,s,n)}var TY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}}};let e2;e2=Symbol.toStringTag;var RY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[e2]="BlobDownloadBuilder",this.promise=null}asStream(){return new TY(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}}};const jY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var IY=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=hb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=oe(oe({},mE),r);let a=oe(oe({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=oe(oe({},a),r.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),h=await(t=="PUT"?i0:Zn)(s.fetch,`${s.url}/object/${d}`,i,oe({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c;const u=oe({upsert:mE.upsert},r),d=oe(oe({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await i0(s.fetch,a.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Ge(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=oe({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Zn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Qp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Zn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Zn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Zn(r.fetch,`${r.url}/object/sign/${s}`,oe({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Zn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>oe(oe({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>Su(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new RY(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:s0(await Su(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await kY(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ge(r)&&r instanceof r0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await fb(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=oe(oe(oe({},jY),e),{},{prefix:t||""});return{data:await Zn(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=oe({},t);return{data:await Zn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const t2="2.89.0",n2={"X-Client-Info":`storage-js/${t2}`};var PY=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=oe(oe({},n2),e),this.fetch=hb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Su(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Su(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Zn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await i0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Zn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await fb(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},AY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=oe(oe({},n2),e),this.fetch=hb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Zn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Su(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await fb(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!bY(t))throw new Qp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new vY({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const pb={"X-Client-Info":`storage-js/${t2}`,"Content-Type":"application/json"};var r2=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Sn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Lg=class extends r2{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},OY=class extends r2{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const mb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),DY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),MY=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new Lg(gE(i),r,o))}).catch(()=>{const i=r+"";e(new Lg(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new Lg(s.statusText||`HTTP ${r} error`,r,i))}}else e(new OY(gE(t),t))},LY=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(DY(r)?(s.headers=oe({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,oe(oe({},s),n)):s};async function FY(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,LY(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>MY(c,a,r))})}async function Cn(t,e,n,r,s){return FY(t,"POST",e,r,s,n)}var $Y=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=oe(oe({},pb),e),this.fetch=mb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Cn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Cn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}}},UY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=oe(oe({},pb),e),this.fetch=mb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Cn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Cn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Cn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}},VY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=oe(oe({},pb),e),this.fetch=mb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}},BY=class extends VY{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new zY(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},zY=class extends $Y{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new WY(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},WY=class extends UY{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,oe(oe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},HY=class extends PY{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new IY(this.url,this.headers,t,this.fetch)}get vectors(){return new BY(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AY(this.url+"/iceberg",this.headers,this.fetch)}};const s2="2.89.0",Zo=30*1e3,o0=3,Fg=o0*Zo,qY="http://localhost:9999",GY="supabase.auth.token",KY={"X-Client-Info":`gotrue-js/${s2}`},a0="X-Supabase-Api-Version",i2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QY=10*60*1e3;class Cu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class JY extends Cu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function XY(t){return Z(t)&&t.name==="AuthApiError"}class qi extends Cu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class _s extends Cu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class wn extends _s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZY(t){return Z(t)&&t.name==="AuthSessionMissingError"}class zo extends _s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wd extends _s{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hd extends _s{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eQ(t){return Z(t)&&t.name==="AuthImplicitGrantRedirectError"}class vE extends _s{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tQ extends _s{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class l0 extends _s{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function $g(t){return Z(t)&&t.name==="AuthRetryableFetchError"}class yE extends _s{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class c0 extends _s{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xE=` 	
\r=`.split(""),nQ=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<xE.length;e+=1)t[xE[e].charCodeAt(0)]=-2;for(let e=0;e<Lf.length;e+=1)t[Lf[e].charCodeAt(0)]=e;return t})();function wE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Lf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Lf[r]),e.queuedBits-=6}}function o2(t,e,n){const r=nQ[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{iQ(o,r,n)};for(let o=0;o<t.length;o+=1)o2(t.charCodeAt(o),s,i);return e.join("")}function rQ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sQ(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}rQ(r,e)}}function iQ(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Va(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)o2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function oQ(t){const e=[];return sQ(t,n=>e.push(n)),new Uint8Array(e)}function eo(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>wE(s,n,r)),wE(null,n,r),e.join("")}function aQ(t){return Math.round(Date.now()/1e3)+t}function lQ(){return Symbol("auth-callback")}const Rt=()=>typeof window<"u"&&typeof document<"u",Li={tested:!1,writable:!1},a2=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Li.tested)return Li.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Li.tested=!0,Li.writable=!0}catch{Li.tested=!0,Li.writable=!1}return Li.writable};function cQ(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const l2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uQ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ea=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nt=async(t,e)=>{await t.removeItem(e)};class Jp{constructor(){this.promise=new Jp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Jp.promiseConstructor=Promise;function Ug(t){const e=t.split(".");if(e.length!==3)throw new c0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!YY.test(e[r]))throw new c0("JWT not in base64url format");return{header:JSON.parse(bE(e[0])),payload:JSON.parse(bE(e[1])),signature:Va(e[2]),raw:{header:e[0],payload:e[1]}}}async function dQ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hQ(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function fQ(t){return("0"+t.toString(16)).substr(-2)}function pQ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,fQ).join("")}async function mQ(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function gQ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mQ(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wo(t,e,n=!1){const r=pQ();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ea(t,`${e}-code-verifier`,s);const i=await gQ(r);return[i,r===i?"plain":"s256"]}const vQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yQ(t){const e=t.headers.get(a0);if(!e||!e.match(vQ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xQ(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wQ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ho(t){if(!bQ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _Q(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function _E(t){return JSON.parse(JSON.stringify(t))}const Wi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SQ=[502,503,504];async function SE(t){var e;if(!uQ(t))throw new l0(Wi(t),0);if(SQ.includes(t.status))throw new l0(Wi(t),t.status);let n;try{n=await t.json()}catch(i){throw new qi(Wi(i),i)}let r;const s=yQ(t);if(s&&s.getTime()>=i2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new yE(Wi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new yE(Wi(n),t.status,n.weak_password.reasons);throw new JY(Wi(n),t.status||500,r)}const CQ=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ie(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[a0]||(i[a0]=i2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await EQ(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function EQ(t,e,n,r,s,i){const o=CQ(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new l0(Wi(c),0)}if(a.ok||await SE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await SE(c)}}function Kn(t){var e;let n=null;TQ(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=aQ(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function CE(t){const e=Kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function zs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NQ(t){return{data:t,error:null}}function kQ(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Dl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function EE(t){return t}function TQ(t){return t.access_token&&t.refresh_token&&t.expires_in}const Bg=["global","local","others"];class RQ{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=l2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Bg[0]){if(Bg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bg.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Dl(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kQ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zs})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:EE});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ho(e);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zs})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ho(e);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ho(e);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ho(e.userId);try{const{data:n,error:r}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ho(e.userId),Ho(e.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:EE});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}}function NE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const qo={debug:!!(globalThis&&a2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class c2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jQ extends c2{}async function IQ(t,e,n){qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),qo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw qo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new jQ(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function PQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function u2(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function AQ(t){return parseInt(t,16)}function OQ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function DQ(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=u2(t.address),b=d?`${d}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${p}

${y}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);g+=`
- ${x}`}v+=g}return`${w}
${v}`}class ot extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Ff extends ot{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function MQ({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(d2(o)){if(i.rp.id!==o)return new ot({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function LQ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(d2(r)){if(n.rpId!==r)return new ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class FQ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $Q=new FQ;function UQ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Dl(t,["challenge","user","excludeCredentials"]),i=Va(e).buffer,o=Object.assign(Object.assign({},n),{id:Va(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Va(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function VQ(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Dl(t,["challenge","allowCredentials"]),s=Va(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Va(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function BQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:eo(new Uint8Array(t.response.attestationObject)),clientDataJSON:eo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:eo(new Uint8Array(s.authenticatorData)),clientDataJSON:eo(new Uint8Array(s.clientDataJSON)),signature:eo(new Uint8Array(s.signature)),userHandle:s.userHandle?eo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function d2(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function kE(){var t,e;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function WQ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ff("Browser returned unexpected credential type",e)}:{data:null,error:new Ff("Empty credential response",e)}}catch(e){return{data:null,error:MQ({error:e,options:t})}}}async function HQ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ff("Browser returned unexpected credential type",e)}:{data:null,error:new Ff("Empty credential response",e)}}catch(e){return{data:null,error:LQ({error:e,options:t})}}}const qQ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},GQ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $f(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=$f(a,o):r[i]=$f(o)}else r[i]=o}return r}function KQ(t,e){return $f(qQ,t,e||{})}function YQ(t,e){return $f(GQ,t,e||{})}class QQ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const c=s??$Q.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=KQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await WQ({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=YQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await HQ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Cu("rpId is required for WebAuthn authentication")};try{if(!kE())return{data:null,error:new qi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Cu("rpId is required for WebAuthn registration")};try{if(!kE())return{data:null,error:new qi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new qi("Unexpected error in register",o)}}}}PQ();const JQ={url:qY,storageKey:GY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:KY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function TE(t,e,n){return await n()}const Go={};class Eu{get jwks(){var e,n;return(n=(e=Go[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Go[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Go[this.storageKey]=Object.assign(Object.assign({},Go[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},JQ),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Eu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Rt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new RQ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=l2(i.fetch),this.lock=i.lock||TE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Rt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=IQ:this.lock=TE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new QQ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:a2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=NE(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${s2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Rt()&&(n=cQ(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Rt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),eQ(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Z(n)?this._returnResult({error:n}):this._returnResult({error:new qi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Kn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Wo(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:b},xform:Kn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Kn})}else throw new Wd("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:CE})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:CE})}else throw new Wd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new zo;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,c,u,d,h,f;let p,b;if("message"in e)p=e.message,b=e.signature;else{const{chain:y,wallet:w,statement:v,options:g}=e;let x;if(Rt())if(typeof w=="object")x=w;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")x=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),_=await x.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=u2(_[0]);let E=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const k=await x.request({method:"eth_chainId"});E=AQ(k)}const N={domain:S.host,address:C,statement:v,uri:S.href,version:"1",chainId:E,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=DQ(N),b=await x.request({method:"personal_sign",params:[OQ(p),C]})}try{const{data:y,error:w}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Kn});if(w)throw w;if(!y||!y.session||!y.user){const v=new zo;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(Z(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,s,i,o,a,c,u,d,h,f,p;let b,y;if("message"in e)b=e.message,y=e.signature;else{const{chain:w,wallet:v,statement:g,options:x}=e;let S;if(Rt())if(typeof v=="object")S=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const _=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)b=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=C}}try{const{data:w,error:v}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:eo(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Kn});if(v)throw v;if(!w||!w.session||!w.user){const g=new zo;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Z(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const n=await Fi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new tQ;const{data:i,error:o}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Kn});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Kn}),{data:c,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new zo;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Wo(this.storage,this.storageKey));const{error:h}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Wd("You must provide either an email or phone number.")}catch(a){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Kn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await Wo(this.storage,this.storageKey));const u=await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:NQ});return!((i=u.data)===null||i===void 0)&&i.url&&Rt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new wn;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Wd("You must provide either an email or phone number and a type")}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Fg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Fi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Vg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=_Q(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zs}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wn}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zs})})}catch(n){if(Z(n))return ZY(n)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new wn;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Wo(this.storage,this.storageKey));const{data:u,error:d}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:zs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Ug(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Z(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new wn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Rt())throw new Hd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vE("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new Hd("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const b=f-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,d);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(r){if(Z(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(XY(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=lQ(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wo(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Rt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Z(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:c,access_token:u,nonce:d}=e,h=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kn}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new zo}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hQ(async s=>(s>0&&await dQ(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&$g(i)&&Date.now()+o-r<Zo})}catch(r){if(this._debug(n,"error",r),Z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Rt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Fi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ea(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Vg()}else if(s&&!s.user&&!s.user){const o=await Fi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Nt(this.storage,this.storageKey+"-user"),await ea(this.storage,this.storageKey,s)):s.user=Vg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Fg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Fg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),$g(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Jp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new wn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Z(i)){const o={data:null,error:i};return $g(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ea(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=_E(s);await ea(this.storage,this.storageKey,i)}else{const s=_E(n);await ea(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Zo}ms, refresh threshold is ${o0} ticks`),s<=o0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof c2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?BQ(e.webauthn.credential_response):zQ(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:UQ(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:VQ(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ug(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new wn})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new wn});const o=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Rt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new wn});const o=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Rt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new wn})})}catch(e){if(Z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wn})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+QY>s)return r;const{data:i,error:o}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=Ug(r);n!=null&&n.allowExpired||xQ(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=wQ(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,oQ(`${a}.${c}`)))throw new c0("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}}Eu.nextInstanceID={};const XQ=Eu,ZQ="2.89.0";let dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";const eJ={"X-Client-Info":`supabase-js-${dc}/${ZQ}`},tJ={headers:eJ},nJ={schema:"public"},rJ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sJ={};function Nu(t){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nu(t)}function iJ(t,e){if(Nu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oJ(t){var e=iJ(t,"string");return Nu(e)=="symbol"?e:e+""}function aJ(t,e,n){return(e=oJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RE(Object(n),!0).forEach(function(r){aJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const lJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cJ=()=>Headers,uJ=(t,e,n)=>{const r=lJ(n),s=cJ();return async(i,o)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Ze(Ze({},o),{},{headers:u}))}};function dJ(t){return t.endsWith("/")?t:t+"/"}function hJ(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Ze(Ze({},c),s),auth:Ze(Ze({},u),i),realtime:Ze(Ze({},d),o),storage:{},global:Ze(Ze(Ze({},h),a),{},{headers:Ze(Ze({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function fJ(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dJ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pJ=class extends XQ{constructor(t){super(t)}},mJ=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=fJ(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:nJ,realtime:sJ,auth:Ze(Ze({},rJ),{},{storageKey:o}),global:tJ},c=hJ(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=uJ(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new KK(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new HY(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new zK(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pJ({url:this.authUrl.href,headers:Ze(Ze({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dY(this.realtimeUrl.href,Ze(Ze({},t),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gJ=(t,e,n)=>new mJ(t,e,n);function vJ(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}vJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yJ="https://tgvqlxyeoahcpplytvfu.supabase.co",xJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRndnFseHllb2FoY3BwbHl0dmZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NDA0OTgsImV4cCI6MjA4MjQxNjQ5OH0.KVT7hbUPTyBfA3pqjuUOd7qN_l4LJPDFXPninndRfek",O=gJ(yJ,xJ,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}},global:{headers:{"x-application-name":"kings-cup-party"}}}),fo={A:{value:"A",title:" 1 ",description:" 1 ",emoji:""},2:{value:"2",title:" 2 ",description:" 2 ",emoji:""},3:{value:"3",title:" 3 ",description:"3 ",emoji:""},4:{value:"4",title:" 4 ",description:"4  ",emoji:""},5:{value:"5",title:" (Buddy)",description:" 1   ",emoji:""},6:{value:"6",title:"",description:" ( , )  /",emoji:""},7:{value:"7",title:" 7",description:"  7  7  ",emoji:""},8:{value:"8",title:"",description:" ",emoji:""},9:{value:"9",title:"",description:"  1 ",emoji:""},10:{value:"10",title:"",description:"  1 ",emoji:""},J:{value:"J",title:"",description:" ",emoji:""},Q:{value:"Q",title:"",description:" ",emoji:""},K:{value:"K",title:"King !",description:" 1-3 ,  4 () !",emoji:""}},wJ=["hearts","diamonds","clubs","spades"],h2=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],u0={hearts:"",diamonds:"",clubs:"",spades:""},d0={hearts:"text-destructive",diamonds:"text-destructive",clubs:"text-paper-foreground",spades:"text-paper-foreground"};function qd(){const t=[];for(const e of wJ)for(const n of h2)t.push({value:n,suit:e,id:`${n}-${e}`});return t}function Gd(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function jE(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const IE=11;function bJ(t){const e=Array.from({length:IE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*IE)+1:e[Math.floor(Math.random()*e.length)]}function _J(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Ht();m.useEffect(()=>{const w=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:v}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!v||v.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",w),()=>{window.removeEventListener("beforeunload",w)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const w=O.channel(`room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},v=>{if(v.eventType==="UPDATE"){const g=v.new;e(x=>x?{...x,deck:g.deck||[],current_card:g.current_card,cards_remaining:g.cards_remaining,game_started:g.game_started,is_active:g.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},v=>{v.eventType==="INSERT"?r(g=>g.some(x=>x.id===v.new.id)?g:[...g,v.new]):v.eventType==="DELETE"?r(g=>g.filter(x=>x.id!==v.old.id)):v.eventType==="UPDATE"&&r(g=>g.map(x=>x.id===v.new.id?v.new:x))}).subscribe();return()=>{O.removeChannel(w)}},[t==null?void 0:t.id]);const u=m.useCallback(async w=>{a(!0);try{const v=jE(),g=Gd(qd()),{data:x,error:S}=await O.from("rooms").insert({code:v,host_name:w,deck:g,cards_remaining:52}).select().single();if(S)throw S;const{data:_,error:C}=await O.from("players").insert({room_id:x.id,name:w,is_host:!0}).select().single();if(C)throw C;return e({...x,deck:x.deck,current_card:x.current_card}),r([_]),i(_.id),c({title:"! ",description:`: ${v}`}),{...x,playerId:_.id}}catch(v){return c({title:"",description:v.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(w,v,g)=>{a(!0);try{const{data:x,error:S}=await O.from("rooms").select().eq("code",w.toUpperCase()).eq("is_active",!0).single();if(S||!x)throw new Error(" ");const{data:_}=await O.from("players").select().eq("room_id",x.id).eq("is_active",!0);let C=g?(_||[]).find(k=>k.id===g):null;if(!C){const k=(_||[]).filter(T=>T.name===v);if(k.length>0&&(C=k[0],console.log("Found player with same name, reusing:",C.id),k.length>1)){const T=k.slice(1).map(j=>j.id);await O.from("players").delete().in("id",T)}}let E;if(C)E=C,console.log("Session recovery: found existing player",E.id);else{const k=(_||[]).map(q=>q.avatar).filter(Boolean),T=bJ(k),{data:j,error:I}=await O.from("players").insert({room_id:x.id,name:v,is_host:!1,avatar:T}).select().single();if(I)throw I;E=j}e({...x,deck:x.deck,current_card:x.current_card});const N=new Map;for(const k of _||[])N.set(k.id,k);return N.has(E.id)||N.set(E.id,E),r(Array.from(N.values())),i(E.id),c({title:"! ",description:` ${v}`}),{room:x,playerId:E.id}}catch(x){return c({title:"",description:x.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async()=>{if(!t)return;const w=Gd(qd()),{error:v}=await O.from("rooms").update({game_started:!0,deck:w,cards_remaining:52,current_card:null}).eq("id",t.id);v&&c({title:"",description:v.message,variant:"destructive"})},[t,c]),f=m.useCallback(async()=>{if(!t||t.cards_remaining===0)return;const w=[...t.deck||[]],v=w.pop();if(!v)return;const{error:g}=await O.from("rooms").update({deck:w,current_card:v,cards_remaining:w.length}).eq("id",t.id);g&&c({title:"",description:g.message,variant:"destructive"})},[t,c]),p=m.useCallback(async()=>{if(!t)return;const w=Gd(qd()),{error:v}=await O.from("rooms").update({deck:w,cards_remaining:52,current_card:null}).eq("id",t.id);c(v?{title:"",description:v.message,variant:"destructive"}:{title:"! ",description:""})},[t,c]),b=m.useCallback(async()=>{if(!s||!t)return;await O.from("players").delete().eq("id",s);const{data:w}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!w||w.length===0)&&await O.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),y=m.useCallback(async w=>{a(!0);try{const v=jE(),g=Gd(qd()),{data:x,error:S}=await O.from("rooms").insert({code:v,host_name:w,deck:g,cards_remaining:52,game_started:!0}).select().single();if(S)throw S;const{data:_,error:C}=await O.from("players").insert({room_id:x.id,name:w,is_host:!0}).select().single();if(C)throw C;return e({...x,deck:x.deck,current_card:x.current_card}),r([_]),i(_.id),c({title:" Quick Start!",description:` ${v} `}),x}catch(v){return c({title:"",description:v.message,variant:"destructive"}),null}finally{a(!1)}},[c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,reshuffleDeck:p,leaveRoom:b,quickStart:y}}function SJ(t){return t.value==="A"?1:["10","J","Q","K"].includes(t.value)?0:parseInt(t.value)}function Ws(t){return t.reduce((n,r)=>n+SJ(r),0)%10}function po(t){if(t.length!==2)return{isPok:!1,pokValue:null};const e=Ws(t);return e===9?{isPok:!0,pokValue:9}:e===8?{isPok:!0,pokValue:8}:{isPok:!1,pokValue:null}}function ku(t){if(t.length===2){const e=po(t);if(e.pokValue===9)return{type:"pok9",name:" 9",multiplier:2};if(e.pokValue===8)return{type:"pok8",name:" 8",multiplier:2};const n=t[0].suit===t[1].suit;if(t[0].value===t[1].value)return{type:"pair",name:"",multiplier:2};if(n)return{type:"deng",name:"",multiplier:2}}if(t.length===3){if(t[0].value===t[1].value&&t[1].value===t[2].value)return{type:"tong",name:"",multiplier:5};if(t.every(i=>["J","Q","K"].includes(i.value)))return{type:"samLeung",name:"",multiplier:3};const n=t.map(i=>i.value==="A"?1:i.value==="J"?11:i.value==="Q"?12:i.value==="K"?13:parseInt(i.value)).sort((i,o)=>i-o);if(n[1]===n[0]+1&&n[2]===n[1]+1)return{type:"straight",name:"",multiplier:3};if(t.every(i=>i.suit===t[0].suit))return{type:"flush",name:"",multiplier:3};if(t[0].value===t[1].value||t[1].value===t[2].value||t[0].value===t[2].value)return{type:"deng",name:"",multiplier:3}}return{type:"normal",name:"",multiplier:1}}function CJ(t,e){const n=po(t),r=po(e),s=Ws(t),i=Ws(e),o=ku(t),a=ku(e);return n.isPok&&!r.isPok?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:!n.isPok&&r.isPok?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:n.isPok&&r.isPok?n.pokValue>r.pokValue?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:n.pokValue<r.pokValue?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}:s>i?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:s<i?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}}function Kd(){const t=["hearts","diamonds","clubs","spades"],e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],n=[];for(const r of t)for(const s of e)n.push({suit:r,value:s});return hc(n)}function hc(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function f2(t){switch(t){case"hearts":return"";case"diamonds":return"";case"clubs":return"";case"spades":return""}}function p2(t){return t==="hearts"||t==="diamonds"?"text-red-500":"text-black"}function PE(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const AE=11;function OE(t){const e=Array.from({length:AE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*AE)+1:e[Math.floor(Math.random()*e.length)]}function EJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Ht();m.useEffect(()=>{const _=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:C}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!C||C.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const _=O.channel(`pokdeng-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},C=>{if(C.eventType==="UPDATE"){const E=C.new;e(N=>N?{...N,deck:E.deck||[],game_started:E.game_started,game_phase:E.game_phase||"waiting",current_player_index:E.current_player_index||0,is_active:E.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},C=>{if(C.eventType==="INSERT"){const E=C.new;let N=[];try{typeof E.cards=="string"?N=JSON.parse(E.cards):Array.isArray(E.cards)&&(N=E.cards)}catch(k){console.error("Error parsing cards:",k)}r(k=>k.some(T=>T.id===E.id)?k:(setTimeout(()=>{c({title:" ",description:`${E.name} `,duration:3e3})},0),[...k,{...E,cards:N}]))}else if(C.eventType==="DELETE"){const E=C.old;r(N=>{const k=N.find(T=>T.id===E.id);return k&&setTimeout(()=>{c({title:"",description:`${k.name} `,duration:3e3})},0),N.filter(T=>T.id!==E.id)})}else if(C.eventType==="UPDATE"){const E=C.new;let N=[];try{typeof E.cards=="string"?N=JSON.parse(E.cards):Array.isArray(E.cards)&&(N=E.cards)}catch(k){console.error("Error parsing cards:",k)}r(k=>k.map(T=>T.id===E.id?{...E,cards:N}:T))}}).subscribe();return()=>{O.removeChannel(_)}},[t==null?void 0:t.id,c]);const u=m.useCallback(async _=>{a(!0);try{const C=PE(),E=hc(Kd()),N=OE([]),{data:k,error:T}=await O.from("rooms").insert({code:C,host_name:_,deck:E,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting"}).select().single();if(T)throw T;const{data:j,error:I}=await O.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,avatar:N,player_order:0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:k.current_player_index||0}),r([{...j,cards:[]}]),i(j.id),c({title:"! ",description:`: ${C}`}),{...k,playerId:j.id}}catch(C){return c({title:"",description:C.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(_,C,E)=>{a(!0);try{const{data:N,error:k}=await O.from("rooms").select().eq("code",_.toUpperCase()).eq("is_active",!0).eq("game_type","pokdeng").single();if(k||!N)throw new Error(" ");const{data:T}=await O.from("players").select().eq("room_id",N.id).eq("is_active",!0);let j=E?(T||[]).find(V=>V.id===E):null;if(!j){const V=(T||[]).filter(U=>U.name===C);if(V.length>0&&(j=V[0],console.log("Found player with same name, reusing:",j.id),V.length>1)){const U=V.slice(1).map(G=>G.id);await O.from("players").delete().in("id",U)}}let I;if(j)I=j,console.log("Session recovery: found existing player",I.id);else{if(N.game_started)throw new Error(" ");if(((T==null?void 0:T.length)||0)>=8)throw new Error(" ( 8 )");const V=(T||[]).map(L=>L.avatar).filter(Boolean),U=OE(V),{data:G,error:A}=await O.from("players").insert({room_id:N.id,name:C,is_host:!1,avatar:U,is_dealer:!1,player_order:(T==null?void 0:T.length)||0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(A)throw A;I=G}e({id:N.id,code:N.code,host_name:N.host_name,is_active:N.is_active,deck:N.deck,game_started:N.game_started,game_phase:N.game_phase||"waiting",current_player_index:N.current_player_index||0});const q=V=>V.map(U=>{let G=[];try{typeof U.cards=="string"?G=JSON.parse(U.cards):Array.isArray(U.cards)&&(G=U.cards)}catch(A){console.error("Error parsing cards for player:",U.name,A)}return{...U,cards:G}}),P=new Map;for(const V of T||[])P.set(V.id,V);return P.has(I.id)||P.set(I.id,I),r(q(Array.from(P.values()))),i(I.id),c({title:"! ",description:` ${C}`}),{room:N,playerId:I.id}}catch(N){return c({title:"",description:N.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async()=>{if(!t||n.length<2)return;const C=[...hc(Kd())];await O.from("rooms").update({game_started:!0,deck:C,game_phase:"dealing",current_player_index:0}).eq("id",t.id);for(let E=0;E<n.length;E++){const N=C.pop();await O.from("players").update({cards:[N],points:Ws([N])}).eq("id",n[E].id),await new Promise(k=>setTimeout(k,500))}for(let E=0;E<n.length;E++){const N=n[E].cards.length>0?[...n[E].cards,C.pop()]:[C.pop(),C.pop()],k=Ws(N);await O.from("players").update({cards:N,points:k,has_drawn:!1,result:null,multiplier:1}).eq("id",n[E].id),await new Promise(T=>setTimeout(T,500))}await O.from("rooms").update({deck:C,game_phase:"drawing"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),f=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(I=>I.id===s);if(!_||_.has_drawn||_.cards.length>=3)return;const C=[...t.deck];if(C.length===0)return;const E=C.pop(),N=[..._.cards,E],k=Ws(N);await O.from("rooms").update({deck:C}).eq("id",t.id),await O.from("players").update({cards:N,points:k,has_drawn:!0}).eq("id",s);const T=n.filter(I=>!I.is_dealer),j=T.findIndex(I=>I.id===s);j<T.length-1?await O.from("rooms").update({current_player_index:j+1}).eq("id",t.id):await O.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),p=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(N=>N.id===s);if(!_||_.has_drawn)return;await O.from("players").update({has_drawn:!0}).eq("id",s);const C=n.filter(N=>!N.is_dealer),E=C.findIndex(N=>N.id===s);E<C.length-1?await O.from("rooms").update({current_player_index:E+1}).eq("id",t.id):await O.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),b=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(T=>T.is_dealer);if(!_||_.id!==s)return;const C=[...t.deck];if(C.length===0||_.cards.length>=3)return;const E=C.pop(),N=[..._.cards,E],k=Ws(N);await O.from("rooms").update({deck:C}).eq("id",t.id),await O.from("players").update({cards:N,points:k,has_drawn:!0}).eq("id",_.id)},[t,s,n]),y=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(C=>C.is_dealer);!_||_.id!==s||_.has_drawn||await O.from("players").update({has_drawn:!0}).eq("id",_.id)},[t,s,n]),w=m.useCallback(async()=>{if(!t)return;const _=n.find(E=>E.is_dealer);if(!_)return;const C=n.map(E=>{if(E.is_dealer)return{id:E.id,result:null,multiplier:1};const N=CJ(E.cards,_.cards);return{id:E.id,result:N.result==="player_win"?"player_win":"dealer_win",multiplier:N.playerMultiplier}});for(const E of C)await O.from("players").update({result:E.result,multiplier:E.multiplier}).eq("id",E.id);await O.from("rooms").update({game_phase:"ended"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),v=m.useCallback(async()=>{if(!t)return;const C=[...hc(Kd())],E=[...n].sort((j,I)=>j.player_order-I.player_order),k=(E.findIndex(j=>j.is_dealer)+1)%E.length,T=n.map(j=>{const I=[C.pop(),C.pop()],q=Ws(I),P=j.id===E[k].id;return{id:j.id,cards:I,points:q,has_drawn:!1,result:null,multiplier:1,is_dealer:P}});await O.from("rooms").update({deck:C,game_phase:"drawing",current_player_index:0}).eq("id",t.id);for(const j of T)await O.from("players").update({cards:j.cards,points:j.points,has_drawn:j.has_drawn,result:j.result,multiplier:j.multiplier,is_dealer:j.is_dealer}).eq("id",j.id);c({title:" !",description:""})},[t,n,c]),g=m.useCallback(async()=>{if(!s||!t)return;await O.from("players").delete().eq("id",s);const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await O.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),x=m.useCallback(async(_,C=!1)=>{a(!0);try{const E=PE(),N=hc(Kd()),{data:k,error:T}=await O.from("rooms").insert({code:E,host_name:_,deck:N,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting",game_started:!1}).select().single();if(T)throw T;if(C)return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([]),i(null),c({title:" LIVE Mode!",description:` ${E}  - `}),k;const{data:j,error:I}=await O.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,player_order:0,cards:[]}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([{...j,cards:[]}]),i(j.id),c({title:" Quick Start!",description:` ${E} `}),k}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{a(!1)}},[c]),S=m.useCallback(async _=>{if(t)try{await O.from("players").update({is_dealer:!1}).eq("room_id",t.id).eq("is_dealer",!0),await O.from("players").update({is_dealer:!0}).eq("id",_),c({title:" ",duration:2e3})}catch(C){console.error("Error setting dealer:",C),c({title:" ",variant:"destructive",duration:3e3})}},[t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,standCard:p,dealerDraw:b,dealerStand:y,showdown:w,nextRound:v,leaveRoom:g,quickStart:x,setDealer:S}}const Uf=[{id:1,category:"",word_civilian:"",word_undercover:""},{id:2,category:"",word_civilian:"",word_undercover:""},{id:3,category:"",word_civilian:"",word_undercover:""},{id:4,category:"",word_civilian:"",word_undercover:""},{id:5,category:"",word_civilian:"",word_undercover:""},{id:6,category:"",word_civilian:"",word_undercover:""},{id:7,category:"",word_civilian:"",word_undercover:""},{id:8,category:"",word_civilian:"",word_undercover:""},{id:9,category:"",word_civilian:"",word_undercover:""},{id:10,category:"",word_civilian:"",word_undercover:""},{id:11,category:"",word_civilian:"",word_undercover:""},{id:12,category:"",word_civilian:"",word_undercover:""},{id:13,category:"",word_civilian:"",word_undercover:""},{id:14,category:"",word_civilian:"",word_undercover:""},{id:15,category:"",word_civilian:"",word_undercover:""},{id:16,category:"",word_civilian:"",word_undercover:""},{id:17,category:"",word_civilian:"",word_undercover:""},{id:18,category:"",word_civilian:"",word_undercover:""},{id:19,category:"",word_civilian:"",word_undercover:""},{id:20,category:"",word_civilian:"",word_undercover:""},{id:21,category:"",word_civilian:"",word_undercover:""},{id:22,category:"",word_civilian:"",word_undercover:""},{id:23,category:"",word_civilian:"",word_undercover:""},{id:24,category:"",word_civilian:"",word_undercover:""},{id:25,category:"",word_civilian:"",word_undercover:""},{id:26,category:"",word_civilian:"",word_undercover:""},{id:27,category:"",word_civilian:"",word_undercover:""},{id:28,category:"",word_civilian:"",word_undercover:""},{id:29,category:"",word_civilian:"",word_undercover:""},{id:30,category:"",word_civilian:"",word_undercover:""},{id:31,category:"",word_civilian:"",word_undercover:""},{id:32,category:"",word_civilian:"",word_undercover:""},{id:33,category:"",word_civilian:"",word_undercover:""},{id:34,category:"",word_civilian:"",word_undercover:""},{id:35,category:"",word_civilian:"",word_undercover:""},{id:36,category:"",word_civilian:"",word_undercover:""},{id:37,category:"",word_civilian:"",word_undercover:""},{id:38,category:"",word_civilian:"",word_undercover:""},{id:39,category:"18+",word_civilian:"",word_undercover:""},{id:40,category:"18+",word_civilian:"",word_undercover:""},{id:41,category:"18+",word_civilian:"",word_undercover:""},{id:42,category:"18+",word_civilian:"",word_undercover:""}];function NJ(t){return t<=4||t<=6?1:(t<=8,2)}function kJ(t){let e=Uf;return t&&t!==""&&(e=Uf.filter(n=>n.category===t)),e[Math.floor(Math.random()*e.length)]}function TJ(t,e,n=!1){const r=NJ(t.length),s=n&&t.length>=5?1:0,i=new Set;for(;i.size<r;)i.add(Math.floor(Math.random()*t.length));const o=new Set;if(s>0)for(;o.size<s;){const a=Math.floor(Math.random()*t.length);i.has(a)||o.add(a)}return t.map((a,c)=>{let u="CIVILIAN",d=e.word_civilian;return i.has(c)?(u="UNDERCOVER",d=e.word_undercover):o.has(c)&&(u="MR_WHITE",d="???"),{id:a.id,name:a.name,avatar:a.avatar,role:u,word:d,is_alive:!0,vote_count:0,has_voted:!1,is_host:a.is_host}})}function RJ(t){const e=t.filter(s=>s.is_alive),n=e.filter(s=>s.role==="UNDERCOVER"),r=e.filter(s=>s.role==="CIVILIAN"||s.role==="MR_WHITE");return n.length>=r.length?{isGameOver:!0,winner:"UNDERCOVER",reason:"! "}:n.length===0?{isGameOver:!0,winner:"CIVILIAN",reason:" ! "}:{isGameOver:!1,winner:null,reason:""}}function jJ(t){const e=t.filter(s=>s.is_alive);if(e.length===0)return null;const n=Math.max(...e.map(s=>s.vote_count));if(n===0)return null;const r=e.filter(s=>s.vote_count===n);return r[Math.floor(Math.random()*r.length)]}function m2(){const t=new Set(Uf.map(e=>e.category));return["",...Array.from(t)]}let ml=[],IJ=1e3;function Yd(){return[...Uf,...ml]}function PJ(t){const e={...t,id:IJ++};return ml.push(e),e}function AJ(t){if(t.id>=1e3){const e=ml.findIndex(n=>n.id===t.id);e!==-1&&(ml[e]=t)}}function OJ(t){t>=1e3&&(ml=ml.filter(e=>e.id!==t))}function DJ(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const DE=15;function ME(t){const e=Array.from({length:DE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*DE)+1:e[Math.floor(Math.random()*e.length)]}function MJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Ht();m.useEffect(()=>{const S=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const S=O.channel(`undercover-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},_=>{if(_.eventType==="UPDATE"){const C=_.new;e(E=>E?{...E,game_phase:C.game_phase||"WAITING",current_turn_index:C.current_player_index||0,is_active:C.is_active,vocabulary:C.current_card||null,round:C.cards_remaining||1,timer_seconds:C.timer_seconds||30,include_mr_white:C.include_mr_white||!1,selected_category:C.selected_category||""}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},_=>{if(_.eventType==="INSERT"){const C=_.new;r(E=>E.some(N=>N.id===C.id)?E:(setTimeout(()=>{c({title:" ",description:`${C.name} `,duration:3e3})},0),[...E,{id:C.id,name:C.name,avatar:C.avatar,role:C.role||"CIVILIAN",word:C.word||"",is_alive:C.is_alive??!0,vote_count:C.vote_count||0,has_voted:C.has_voted||!1,voted_for:C.voted_for,is_host:C.is_host}]))}else if(_.eventType==="DELETE"){const C=_.old;console.log("DELETE event received for player:",C.id,C.name),r(E=>{const N=E.find(T=>T.id===C.id);N?(console.log("Removing player from list:",N.name),setTimeout(()=>{c({title:"",description:`${N.name} `,duration:3e3})},0)):console.log("Player not found in current list, ID:",C.id);const k=E.filter(T=>T.id!==C.id);return console.log("Players after filter:",k.length,"players"),k})}else if(_.eventType==="UPDATE"){const C=_.new;r(E=>E.map(N=>N.id===C.id?{...N,role:C.role||N.role,word:C.word||N.word,is_alive:C.is_alive??N.is_alive,vote_count:C.vote_count??N.vote_count,has_voted:C.has_voted??N.has_voted,voted_for:C.voted_for}:N))}}).subscribe();return()=>{O.removeChannel(S)}},[t==null?void 0:t.id,c]);const u=m.useCallback(async S=>{a(!0);try{const _=DJ(),C=ME([]),{data:E,error:N}=await O.from("rooms").insert({code:_,host_name:S,game_type:"undercover",game_phase:"WAITING",cards_remaining:1}).select().single();if(N)throw N;const{data:k,error:T}=await O.from("players").insert({room_id:E.id,name:S,is_host:!0,avatar:C,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(T)throw T;return e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,game_phase:"WAITING",current_turn_index:0,vocabulary:null,round:1,timer_seconds:30,include_mr_white:!1,selected_category:""}),r([{id:k.id,name:k.name,avatar:k.avatar,role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,is_host:!0}]),i(k.id),c({title:"!",description:`: ${_}`}),{...E,playerId:k.id}}catch(_){return c({title:"",description:_.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(S,_,C)=>{a(!0);try{const{data:E,error:N}=await O.from("rooms").select("*").eq("code",S.toUpperCase()).eq("is_active",!0).single();if(N)throw new Error("");const{data:k}=await O.from("players").select("*").eq("room_id",E.id).eq("is_active",!0);let T=C?(k||[]).find(P=>P.id===C):null;if(!T){const P=(k||[]).filter(V=>V.name===_);if(P.length>0&&(T=P[0],console.log("Found player with same name, reusing:",T.id),P.length>1)){const V=P.slice(1).map(U=>U.id);console.log("Cleaning up duplicate players:",V),await O.from("players").delete().in("id",V)}}let j;if(T)j=T,console.log("Session recovery: found existing player",j.id,"is_host:",j.is_host);else{if(E.game_phase!=="WAITING")throw new Error(" ");const P=(k||[]).map(A=>A.avatar),V=ME(P),{data:U,error:G}=await O.from("players").insert({room_id:E.id,name:_,is_host:!1,avatar:V,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(G)throw G;j=U}e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,game_phase:E.game_phase||"WAITING",current_turn_index:E.current_player_index||0,vocabulary:E.current_card||null,round:E.cards_remaining||1,timer_seconds:E.timer_seconds||30,include_mr_white:E.include_mr_white||!1,selected_category:E.selected_category||""});const I=new Map;for(const P of k||[])I.set(P.id,P);I.has(j.id)||I.set(j.id,j);const q=Array.from(I.values()).map(P=>({id:P.id,name:P.name,avatar:P.avatar,role:P.role||"CIVILIAN",word:P.word||"",is_alive:P.is_alive??!0,vote_count:P.vote_count||0,has_voted:P.has_voted||!1,is_host:P.is_host}));return console.log("All players after join:",q.map(P=>({name:P.name,is_host:P.is_host}))),r(q),i(j.id),c({title:"!",description:` ${_}`}),{room:E,playerId:j.id}}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async(S="",_=!1)=>{if(console.log("startGame called with:",{category:S,includeMrWhite:_,room:t,playersCount:n.length}),!t||n.length<4){c({title:"",description:" 4 ",variant:"destructive"});return}try{const C=kJ(S);console.log("Selected vocabulary:",C);const E=TJ(n.map(k=>({id:k.id,name:k.name,avatar:k.avatar,is_host:k.is_host})),C,_);console.log("Assigned roles:",E);for(const k of E){const{error:T}=await O.from("players").update({role:k.role,word:k.word,is_alive:!0,vote_count:0,has_voted:!1}).eq("id",k.id);if(T)throw console.error("Error updating player:",T),T}console.log("Players updated successfully");const{error:N}=await O.from("rooms").update({game_phase:"REVEAL_WORD",current_card:C,current_player_index:0,cards_remaining:1,game_started:!0}).eq("id",t.id);if(N)throw console.error("Error updating room:",N),N;console.log("Room updated successfully"),r(E),c({title:" !",description:""})}catch(C){console.error("Error starting game:",C),c({title:"",description:" ",variant:"destructive"})}},[t,n,c]),f=m.useCallback(async()=>{t&&await O.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0}).eq("id",t.id)},[t]),p=m.useCallback(async()=>{if(!t)return;const S=n.filter(C=>C.is_alive),_=(t.current_turn_index+1)%S.length;await O.from("rooms").update({current_player_index:_}).eq("id",t.id)},[t,n]),b=m.useCallback(async()=>{if(t){for(const S of n)await O.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id);await O.from("rooms").update({game_phase:"VOTING"}).eq("id",t.id)}},[t,n]),y=m.useCallback(async()=>{if(!t)return;const{data:S}=await O.from("players").select("*").eq("room_id",t.id);if(!S)return;const _=S.map(E=>({id:E.id,name:E.name,avatar:E.avatar,role:E.role,word:E.word||"",is_alive:E.is_alive,vote_count:E.vote_count||0,has_voted:E.has_voted||!1,voted_for:E.voted_for,is_host:E.is_host})),C=jJ(_);C&&(await O.from("players").update({is_alive:!1}).eq("id",C.id),c({title:` ${C.name} !`,description:C.role==="UNDERCOVER"?"!":C.role==="MR_WHITE"?"! ":" "})),await O.from("rooms").update({game_phase:"VOTE_RESULT"}).eq("id",t.id)},[t,c]),w=m.useCallback(async S=>{if(!s||!t)return;const _=n.find(k=>k.id===s);if(!_||_.has_voted||!_.is_alive)return;await O.from("players").update({has_voted:!0,voted_for:S}).eq("id",s);const C=n.find(k=>k.id===S);C&&await O.from("players").update({vote_count:(C.vote_count||0)+1}).eq("id",S),c({title:" ",description:` ${C==null?void 0:C.name}`});const E=n.filter(k=>k.is_alive);E.filter(k=>k.has_voted).length+1>=E.length&&await y()},[s,n,t,c,y]),v=m.useCallback(async()=>{if(!t)return;const{data:S}=await O.from("players").select("*").eq("room_id",t.id);if(!S)return;const _=S.map(E=>({id:E.id,name:E.name,avatar:E.avatar,role:E.role,word:E.word||"",is_alive:E.is_alive,vote_count:E.vote_count||0,has_voted:E.has_voted||!1,voted_for:E.voted_for,is_host:E.is_host})),C=RJ(_);if(C.isGameOver)await O.from("rooms").update({game_phase:"FINISHED"}).eq("id",t.id),c({title:C.winner==="CIVILIAN"?" !":"!",description:C.reason});else{await O.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0,cards_remaining:(t.round||1)+1}).eq("id",t.id);for(const E of _)await O.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",E.id)}},[t,c]),g=m.useCallback(async()=>{if(t){for(const S of n)await O.from("players").update({role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id);await O.from("rooms").update({game_phase:"WAITING",current_player_index:0,current_card:null,cards_remaining:1,game_started:!1}).eq("id",t.id),c({title:" ",description:"!"})}},[t,n,c]),x=m.useCallback(async()=>{if(!s||!t)return;console.log("Leaving room - deleting player:",s);const{error:S}=await O.from("players").delete().eq("id",s);if(S){console.error("Error deleting player:",S),c({title:"",description:"",variant:"destructive"});return}console.log("Player deleted successfully");const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&(console.log("No remaining players, deleting room"),await O.from("rooms").delete().eq("id",t.id)),e(null),r([]),i(null),c({title:" "})},[s,t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,categories:m2(),createRoom:u,joinRoom:d,startGame:h,startDescribePhase:f,nextTurn:p,startVoting:b,votePlayer:w,endVoting:y,checkResultAndContinue:v,restartGame:g,leaveRoom:x}}function LJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Ht();m.useEffect(()=>{const C=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:E}=await O.from("players").select("id").eq("room_id",t.id);(!E||E.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[s,t]);const h=m.useCallback(async()=>{const{data:C,error:E}=await O.from("paranoia_questions").select("*").eq("is_default",!1);if(E){console.error("Error fetching questions:",E);return}a(C||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback((C=[])=>{if(o.length===0)return null;const E=o.filter(N=>!C.includes(N.id));return E.length===0?o[Math.floor(Math.random()*o.length)]:E[Math.floor(Math.random()*E.length)]},[o]),p=m.useCallback(()=>{var k;if(n.length===0)return null;const E=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((k=[...n].sort((T,j)=>T.player_order-j.player_order)[E])==null?void 0:k.id)||null},[n,t==null?void 0:t.current_player_index]),b=m.useCallback(async()=>{if(!t)return;const C=t.game_state,E=(C==null?void 0:C.used_question_ids)||[],N=f(E);if(!N){d({title:"Error",description:"No questions available"});return}const k=p();if(!k)return;const T=[...E,N.id],j={phase:"ASKING",asker_id:k,victim_id:null,question:N.question,question_id:N.id,is_revealed:!1,used_question_ids:T},{error:I}=await O.from("rooms").update({game_state:j,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);I&&(console.error("Error starting round:",I),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),y=m.useCallback(async C=>{if(!t||!t.game_state)return;const N={...t.game_state,phase:"REVEALING",victim_id:C},{error:k}=await O.from("rooms").update({game_state:N}).eq("id",t.id);k&&(console.error("Error selecting victim:",k),d({title:"Error",description:"Failed to select victim"}))},[t,d]),w=m.useCallback(async()=>{if(!t||!t.game_state)return;const E={...t.game_state,is_revealed:!0},{error:N}=await O.from("rooms").update({game_state:E}).eq("id",t.id);N&&(console.error("Error revealing question:",N),d({title:"Error",description:"Failed to reveal question"}))},[t,d]),v=m.useCallback(async()=>{await b()},[b]),g=m.useCallback(async C=>{u(!0);try{const E=Math.random().toString(36).substring(2,8).toUpperCase(),{data:N,error:k}=await O.from("rooms").insert({code:E,host_name:C,game_type:"paranoia",game_started:!1,game_state:null,current_player_index:0}).select().single();if(k)throw k;const{data:T,error:j}=await O.from("players").insert({room_id:N.id,name:C,is_host:!0,player_order:0}).select().single();if(j)throw j;return e(N),i(T.id),r([T]),{code:N.code,playerId:T.id}}catch(E){return console.error("Error creating room:",E),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),x=m.useCallback(async(C,E,N)=>{u(!0);try{const{data:k,error:T}=await O.from("rooms").select("*").eq("code",C.toUpperCase()).eq("game_type","paranoia").single();if(T)throw T;const{data:j}=await O.from("players").select("*").eq("room_id",k.id);let I=N?(j||[]).find(V=>V.id===N):null;if(!I){const V=(j||[]).filter(U=>U.name===E);if(V.length>0&&(I=V[0],console.log("Found player with same name, reusing:",I.id),V.length>1)){const U=V.slice(1).map(G=>G.id);await O.from("players").delete().in("id",U)}}let q;if(I)q=I,console.log("Session recovery: found existing player",q.id);else{const{data:V,error:U}=await O.from("players").insert({room_id:k.id,name:E,is_host:!1,player_order:(j==null?void 0:j.length)||0}).select().single();if(U)throw U;q=V}e(k),i(q.id);const P=new Map;for(const V of j||[])P.set(V.id,V);return P.has(q.id)||P.set(q.id,q),r(Array.from(P.values())),{room:k,playerId:q.id}}catch(k){return console.error("Error joining room:",k),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),S=m.useCallback(async()=>{if(!t)return;const{error:C}=await O.from("rooms").update({game_started:!0}).eq("id",t.id);if(C){console.error("Error starting game:",C),d({title:"Error",description:"Failed to start game"});return}await b()},[t,b,d]),_=m.useCallback(async()=>{s&&(await O.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(!t)return;const C=O.channel(`paranoia-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},N=>{N.eventType==="UPDATE"&&e(N.new)}).subscribe(),E=O.channel(`paranoia-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:N}=await O.from("players").select("*").eq("room_id",t.id).order("player_order");r(N||[])}).subscribe();return()=>{O.removeChannel(C),O.removeChannel(E)}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:g,joinRoom:x,startGame:S,startRound:b,selectVictim:y,revealQuestion:w,skipQuestion:v,leaveRoom:_}}function FJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Ht();m.useEffect(()=>{const _=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:C}=await O.from("players").select("id").eq("room_id",t.id);(!C||C.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]);const h=m.useCallback(async()=>{const{data:_,error:C}=await O.from("five_sec_questions").select("*");if(C){console.error("Error fetching questions:",C);return}a(_||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback(()=>o.length===0?null:o[Math.floor(Math.random()*o.length)],[o]),p=m.useCallback(()=>{var N;if(n.length===0)return null;const C=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((N=[...n].sort((k,T)=>k.player_order-T.player_order)[C])==null?void 0:N.id)||null},[n,t==null?void 0:t.current_player_index]),b=m.useCallback(async()=>{var j;if(!t)return;const _=f();if(!_){d({title:"Error",description:"No questions available"});return}const C=p();if(!C)return;const E=((j=t.game_state)==null?void 0:j.timeLimit)||5,N=new Date(Date.now()+E*1e3).toISOString(),k={phase:"PLAYING",player_id:C,topic:_.topic,end_time:N,votes:{},timeLimit:E},{error:T}=await O.from("rooms").update({game_state:k,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);T&&(console.error("Error starting round:",T),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),y=m.useCallback(async()=>{if(console.log("finishAnswering called",{room:t==null?void 0:t.id,game_state:t==null?void 0:t.game_state}),!t||!t.game_state){console.error("Cannot finish answering: no room or game_state");return}const C={...t.game_state,phase:"JUDGING"};console.log("Updating to JUDGING phase",C);const{error:E,data:N}=await O.from("rooms").update({game_state:C}).eq("id",t.id).select();E?(console.error("Error finishing answering:",E),d({title:"Error",description:"Failed to finish answering"})):console.log("Successfully updated to JUDGING",N)},[t,d]),w=m.useCallback(async _=>{if(!t||!t.game_state||!s)return;const C=t.game_state;if(s===C.player_id)return;const E={...C.votes,[s]:_},N={...C,votes:E},{error:k}=await O.from("rooms").update({game_state:N}).eq("id",t.id);k&&(console.error("Error voting:",k),d({title:"Error",description:"Failed to vote"}))},[t,s,d]),v=m.useCallback(async(_,C=5)=>{u(!0);try{const E=Math.random().toString(36).substring(2,8).toUpperCase(),{data:N,error:k}=await O.from("rooms").insert({code:E,host_name:_,game_type:"fivesec",game_started:!1,game_state:{timeLimit:C},current_player_index:0}).select().single();if(k)throw k;const{data:T,error:j}=await O.from("players").insert({room_id:N.id,name:_,is_host:!0,player_order:0,points:0}).select().single();if(j)throw j;return e(N),i(T.id),r([T]),{code:N.code,playerId:T.id}}catch(E){return console.error("Error creating room:",E),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),g=m.useCallback(async(_,C,E)=>{u(!0);try{const{data:N,error:k}=await O.from("rooms").select("*").eq("code",_.toUpperCase()).eq("game_type","fivesec").single();if(k)throw k;const{data:T}=await O.from("players").select("*").eq("room_id",N.id);let j=E?(T||[]).find(P=>P.id===E):null;if(!j){const P=(T||[]).filter(V=>V.name===C);if(P.length>0&&(j=P[0],console.log("Found player with same name, reusing:",j.id),P.length>1)){const V=P.slice(1).map(U=>U.id);await O.from("players").delete().in("id",V)}}let I;if(j)I=j,console.log("Session recovery: found existing player",I.id);else{const{data:P,error:V}=await O.from("players").insert({room_id:N.id,name:C,is_host:!1,player_order:(T==null?void 0:T.length)||0,points:0}).select().single();if(V)throw V;I=P}e(N),i(I.id);const q=new Map;for(const P of T||[])q.set(P.id,P);return q.has(I.id)||q.set(I.id,I),r(Array.from(q.values())),{room:N,playerId:I.id}}catch(N){return console.error("Error joining room:",N),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),x=m.useCallback(async()=>{if(!t)return;const{error:_}=await O.from("rooms").update({game_started:!0}).eq("id",t.id);if(_){console.error("Error starting game:",_),d({title:"Error",description:"Failed to start game"});return}await b()},[t,b,d]),S=m.useCallback(async()=>{s&&(await O.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(!t)return;const _=O.channel(`fivesec-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},E=>{E.eventType==="UPDATE"&&e(E.new)}).subscribe(),C=O.channel(`fivesec-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:E}=await O.from("players").select("*").eq("room_id",t.id).order("player_order");r(E||[])}).subscribe();return()=>{O.removeChannel(_),O.removeChannel(C)}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:v,joinRoom:g,startGame:x,startRound:b,finishAnswering:y,vote:w,leaveRoom:S}}const kt={PLAYER_ID:"kcp_player_id",PLAYER_NAME:"kcp_player_name",ROOM_CODE:"kcp_room_code",GAME_TYPE:"kcp_game_type",AVATAR:"kcp_avatar"};function LE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function $J(){const[t,e]=m.useState({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),[n,r]=m.useState(!0),[s,i]=m.useState(!1);m.useEffect(()=>{(()=>{const d=new URLSearchParams(window.location.search),h=d.get("room"),f=d.get("game"),p=localStorage.getItem(kt.PLAYER_ID),b=localStorage.getItem(kt.PLAYER_NAME),y=h||localStorage.getItem(kt.ROOM_CODE),w=f||localStorage.getItem(kt.GAME_TYPE),v=localStorage.getItem(kt.AVATAR),g=v?parseInt(v,10):null;e({playerId:p,playerName:b,roomCode:y,gameType:w,avatar:g});const S=!!(p&&y&&w);i(S),r(!1),S&&console.log("Session found:",{roomCode:y,gameType:w,playerName:b})})()},[]);const o=m.useCallback(u=>{const d={...t,...u};if(d.playerId||(d.playerId=LE()),d.playerId&&localStorage.setItem(kt.PLAYER_ID,d.playerId),d.playerName&&localStorage.setItem(kt.PLAYER_NAME,d.playerName),d.roomCode&&localStorage.setItem(kt.ROOM_CODE,d.roomCode),d.gameType&&localStorage.setItem(kt.GAME_TYPE,d.gameType),d.avatar!==null&&d.avatar!==void 0&&localStorage.setItem(kt.AVATAR,d.avatar.toString()),d.roomCode&&d.gameType){const h=new URL(window.location.href);h.searchParams.set("room",d.roomCode),h.searchParams.set("game",d.gameType),window.history.replaceState({},"",h.toString())}e(d),i(!!(d.playerId&&d.roomCode&&d.gameType))},[t]),a=m.useCallback(()=>{localStorage.removeItem(kt.PLAYER_ID),localStorage.removeItem(kt.PLAYER_NAME),localStorage.removeItem(kt.ROOM_CODE),localStorage.removeItem(kt.GAME_TYPE),localStorage.removeItem(kt.AVATAR);const u=new URL(window.location.href);u.searchParams.delete("room"),u.searchParams.delete("game"),window.history.replaceState({},"",u.pathname),e({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),i(!1)},[]),c=m.useCallback(()=>{let u=localStorage.getItem(kt.PLAYER_ID);return u||(u=LE(),localStorage.setItem(kt.PLAYER_ID,u)),u},[]);return{sessionData:t,isRecovering:n,hasSession:s,saveSession:o,clearSession:a,getOrCreatePlayerId:c}}const UJ=vp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/5 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-muted hover:text-foreground active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 active:scale-[0.98]",glass:"bg-card/80 backdrop-blur border border-border text-foreground hover:bg-card active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?J4:"button";return l.jsx(o,{className:$(UJ({variant:e,size:n,className:t})),ref:i,...s})});M.displayName="Button";const be=m.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));be.displayName="Input";var zg="focusScope.autoFocusOnMount",Wg="focusScope.autoFocusOnUnmount",FE={bubbles:!1,cancelable:!0},VJ="FocusScope",gb=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=m.useState(null),u=pt(s),d=pt(i),h=m.useRef(null),f=me(e,y=>c(y)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(x){if(p.paused||!a)return;const S=x.target;a.contains(S)?h.current=S:As(h.current,{select:!0})},w=function(x){if(p.paused||!a)return;const S=x.relatedTarget;S!==null&&(a.contains(S)||As(h.current,{select:!0}))},v=function(x){if(document.activeElement===document.body)for(const _ of x)_.removedNodes.length>0&&As(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const g=new MutationObserver(v);return a&&g.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),g.disconnect()}}},[r,a,p.paused]),m.useEffect(()=>{if(a){UE.add(p);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(zg,FE);a.addEventListener(zg,u),a.dispatchEvent(v),v.defaultPrevented||(BJ(GJ(g2(a)),{select:!0}),document.activeElement===y&&As(a))}return()=>{a.removeEventListener(zg,u),setTimeout(()=>{const v=new CustomEvent(Wg,FE);a.addEventListener(Wg,d),a.dispatchEvent(v),v.defaultPrevented||As(y??document.body,{select:!0}),a.removeEventListener(Wg,d),UE.remove(p)},0)}}},[a,u,d,p]);const b=m.useCallback(y=>{if(!n&&!r||p.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const g=y.currentTarget,[x,S]=zJ(g);x&&S?!y.shiftKey&&v===S?(y.preventDefault(),n&&As(x,{select:!0})):y.shiftKey&&v===x&&(y.preventDefault(),n&&As(S,{select:!0})):v===g&&y.preventDefault()}},[n,r,p.paused]);return l.jsx(te.div,{tabIndex:-1,...o,ref:f,onKeyDown:b})});gb.displayName=VJ;function BJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(As(r,{select:e}),document.activeElement!==n)return}function zJ(t){const e=g2(t),n=$E(e,t),r=$E(e.reverse(),t);return[n,r]}function g2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $E(t,e){for(const n of t)if(!WJ(n,{upTo:e}))return n}function WJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function HJ(t){return t instanceof HTMLInputElement&&"select"in t}function As(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&HJ(t)&&e&&t.select()}}var UE=qJ();function qJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=VE(t,e),t.unshift(e)},remove(e){var n;t=VE(t,e),(n=t[0])==null||n.resume()}}}function VE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function GJ(t){return t.filter(e=>e.tagName!=="A")}var Hg=0;function v2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BE()),document.body.insertAdjacentElement("beforeend",t[1]??BE()),Hg++,()=>{Hg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hg--}},[])}function BE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ch="right-scroll-bar-position",Eh="width-before-scroll-bar",KJ="with-scroll-bars-hidden",YJ="--removed-body-scroll-bar-size";function qg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function QJ(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var JJ=typeof window<"u"?m.useLayoutEffect:m.useEffect,zE=new WeakMap;function XJ(t,e){var n=QJ(null,function(r){return t.forEach(function(s){return qg(s,r)})});return JJ(function(){var r=zE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||qg(a,null)}),i.forEach(function(a){s.has(a)||qg(a,o)})}zE.set(n,t)},[t]),n}function ZJ(t){return t}function eX(t,e){e===void 0&&(e=ZJ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function tX(t){t===void 0&&(t={});var e=eX(null);return e.options=Ir({async:!0,ssr:!1},t),e}var y2=function(t){var e=t.sideCar,n=Dl(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Ir({},n))};y2.isSideCarExport=!0;function nX(t,e){return t.useMedium(e),y2}var x2=tX(),Gg=function(){},Xp=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Gg,onWheelCapture:Gg,onTouchMoveCapture:Gg}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,b=t.noIsolation,y=t.inert,w=t.allowPinchZoom,v=t.as,g=v===void 0?"div":v,x=t.gapMode,S=Dl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=XJ([n,e]),E=Ir(Ir({},S),s);return m.createElement(m.Fragment,null,d&&m.createElement(_,{sideCar:x2,removeScrollBar:u,shards:h,noRelative:p,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:x}),o?m.cloneElement(m.Children.only(a),Ir(Ir({},E),{ref:C})):m.createElement(g,Ir({},E,{className:c,ref:C}),a))});Xp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xp.classNames={fullWidth:Eh,zeroRight:Ch};var rX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function sX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=rX();return e&&t.setAttribute("nonce",e),t}function iX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function oX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var aX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=sX())&&(iX(e,n),oX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lX=function(){var t=aX();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},w2=function(){var t=lX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},cX={left:0,top:0,right:0,gap:0},Kg=function(t){return parseInt(t||"",10)||0},uX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Kg(n),Kg(r),Kg(s)]},dX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cX;var e=uX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},hX=w2(),Ba="data-scroll-locked",fX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(KJ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ba,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ch,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Eh," .").concat(Eh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ba,`] {
    `).concat(YJ,": ").concat(a,`px;
  }
`)},WE=function(){var t=parseInt(document.body.getAttribute(Ba)||"0",10);return isFinite(t)?t:0},pX=function(){m.useEffect(function(){return document.body.setAttribute(Ba,(WE()+1).toString()),function(){var t=WE()-1;t<=0?document.body.removeAttribute(Ba):document.body.setAttribute(Ba,t.toString())}},[])},mX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;pX();var i=m.useMemo(function(){return dX(s)},[s]);return m.createElement(hX,{styles:fX(i,!e,s,n?"":"!important")})},h0=!1;if(typeof window<"u")try{var Qd=Object.defineProperty({},"passive",{get:function(){return h0=!0,!0}});window.addEventListener("test",Qd,Qd),window.removeEventListener("test",Qd,Qd)}catch{h0=!1}var Ko=h0?{passive:!1}:!1,gX=function(t){return t.tagName==="TEXTAREA"},b2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!gX(t)&&n[e]==="visible")},vX=function(t){return b2(t,"overflowY")},yX=function(t){return b2(t,"overflowX")},HE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=_2(t,r);if(s){var i=S2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},xX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},wX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},_2=function(t,e){return t==="v"?vX(e):yX(e)},S2=function(t,e){return t==="v"?xX(e):wX(e)},bX=function(t,e){return t==="h"&&e==="rtl"?-1:1},_X=function(t,e,n,r,s){var i=bX(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=S2(t,a),b=p[0],y=p[1],w=p[2],v=y-w-i*b;(b||v)&&_2(t,a)&&(h+=v,f+=b);var g=a.parentNode;a=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Jd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},qE=function(t){return[t.deltaX,t.deltaY]},GE=function(t){return t&&"current"in t?t.current:t},SX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},CX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},EX=0,Yo=[];function NX(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(EX++)[0],i=m.useState(w2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=UK([t.lockRef.current],(t.shards||[]).map(GE),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=Jd(y),g=n.current,x="deltaX"in y?y.deltaX:g[0]-v[0],S="deltaY"in y?y.deltaY:g[1]-v[1],_,C=y.target,E=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in y&&E==="h"&&C.type==="range")return!1;var N=HE(E,C);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=HE(E,C)),!N)return!1;if(!r.current&&"changedTouches"in y&&(x||S)&&(r.current=_),!_)return!0;var k=r.current||_;return _X(k,w,y,k==="h"?x:S,!0)},[]),c=m.useCallback(function(y){var w=y;if(!(!Yo.length||Yo[Yo.length-1]!==i)){var v="deltaY"in w?qE(w):Jd(w),g=e.current.filter(function(_){return _.name===w.type&&(_.target===w.target||w.target===_.shadowParent)&&SX(_.delta,v)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var x=(o.current.shards||[]).map(GE).filter(Boolean).filter(function(_){return _.contains(w.target)}),S=x.length>0?a(w,x[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(y,w,v,g){var x={name:y,delta:w,target:v,should:g,shadowParent:kX(v)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(S){return S!==x})},1)},[]),d=m.useCallback(function(y){n.current=Jd(y),r.current=void 0},[]),h=m.useCallback(function(y){u(y.type,qE(y),y.target,a(y,t.lockRef.current))},[]),f=m.useCallback(function(y){u(y.type,Jd(y),y.target,a(y,t.lockRef.current))},[]);m.useEffect(function(){return Yo.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Ko),document.addEventListener("touchmove",c,Ko),document.addEventListener("touchstart",d,Ko),function(){Yo=Yo.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Ko),document.removeEventListener("touchmove",c,Ko),document.removeEventListener("touchstart",d,Ko)}},[]);var p=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:CX(s)}):null,p?m.createElement(mX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const TX=nX(x2,NX);var vb=m.forwardRef(function(t,e){return m.createElement(Xp,Ir({},t,{ref:e,sideCar:TX}))});vb.classNames=Xp.classNames;var RX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qo=new WeakMap,Xd=new WeakMap,Zd={},Yg=0,C2=function(t){return t&&(t.host||C2(t.parentNode))},jX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=C2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},IX=function(t,e,n,r){var s=jX(e,Array.isArray(t)?t:[t]);Zd[n]||(Zd[n]=new WeakMap);var i=Zd[n],o=[],a=new Set,c=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),b=p!==null&&p!=="false",y=(Qo.get(f)||0)+1,w=(i.get(f)||0)+1;Qo.set(f,y),i.set(f,w),o.push(f),y===1&&b&&Xd.set(f,!0),w===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(e),a.clear(),Yg++,function(){o.forEach(function(h){var f=Qo.get(h)-1,p=i.get(h)-1;Qo.set(h,f),i.set(h,p),f||(Xd.has(h)||h.removeAttribute(r),Xd.delete(h)),p||h.removeAttribute(n)}),Yg--,Yg||(Qo=new WeakMap,Qo=new WeakMap,Xd=new WeakMap,Zd={})}},E2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=RX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),IX(r,s,n,"aria-hidden")):function(){return null}},Zp="Dialog",[N2,Ute]=gn(Zp),[PX,vr]=N2(Zp),k2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),c=m.useRef(null),[u,d]=pr({prop:r,defaultProp:s??!1,onChange:i,caller:Zp});return l.jsx(PX,{scope:e,triggerRef:a,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};k2.displayName=Zp;var T2="DialogTrigger",R2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(T2,n),i=me(e,s.triggerRef);return l.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wb(s.open),...r,ref:i,onClick:X(t.onClick,s.onOpenToggle)})});R2.displayName=T2;var yb="DialogPortal",[AX,j2]=N2(yb,{forceMount:void 0}),I2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=vr(yb,e);return l.jsx(AX,{scope:e,forceMount:n,children:m.Children.map(r,o=>l.jsx(In,{present:n||i.open,children:l.jsx(pp,{asChild:!0,container:s,children:o})}))})};I2.displayName=yb;var Vf="DialogOverlay",P2=m.forwardRef((t,e)=>{const n=j2(Vf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=vr(Vf,t.__scopeDialog);return i.modal?l.jsx(In,{present:r||i.open,children:l.jsx(DX,{...s,ref:e})}):null});P2.displayName=Vf;var OX=sl("DialogOverlay.RemoveScroll"),DX=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(Vf,n);return l.jsx(vb,{as:OX,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(te.div,{"data-state":wb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ro="DialogContent",A2=m.forwardRef((t,e)=>{const n=j2(Ro,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=vr(Ro,t.__scopeDialog);return l.jsx(In,{present:r||i.open,children:i.modal?l.jsx(MX,{...s,ref:e}):l.jsx(LX,{...s,ref:e})})});A2.displayName=Ro;var MX=m.forwardRef((t,e)=>{const n=vr(Ro,t.__scopeDialog),r=m.useRef(null),s=me(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return E2(i)},[]),l.jsx(O2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:X(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:X(t.onFocusOutside,i=>i.preventDefault())})}),LX=m.forwardRef((t,e)=>{const n=vr(Ro,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return l.jsx(O2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),O2=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=vr(Ro,n),c=m.useRef(null),u=me(e,c);return v2(),l.jsxs(l.Fragment,{children:[l.jsx(gb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(Mu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":wb(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(FX,{titleId:a.titleId}),l.jsx(UX,{contentRef:c,descriptionId:a.descriptionId})]})]})}),xb="DialogTitle",D2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(xb,n);return l.jsx(te.h2,{id:s.titleId,...r,ref:e})});D2.displayName=xb;var M2="DialogDescription",L2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(M2,n);return l.jsx(te.p,{id:s.descriptionId,...r,ref:e})});L2.displayName=M2;var F2="DialogClose",$2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(F2,n);return l.jsx(te.button,{type:"button",...r,ref:e,onClick:X(t.onClick,()=>s.onOpenChange(!1))})});$2.displayName=F2;function wb(t){return t?"open":"closed"}var U2="DialogTitleWarning",[Vte,V2]=Y4(U2,{contentName:Ro,titleName:xb,docsSlug:"dialog"}),FX=({titleId:t})=>{const e=V2(U2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},$X="DialogDescriptionWarning",UX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${V2($X).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},VX=k2,BX=R2,zX=I2,B2=P2,z2=A2,W2=D2,H2=L2,WX=$2;const Wr=VX,ji=BX,HX=zX,q2=m.forwardRef(({className:t,...e},n)=>l.jsx(B2,{ref:n,className:$("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));q2.displayName=B2.displayName;const yr=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(HX,{children:[l.jsx(q2,{}),l.jsxs(z2,{ref:r,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(WX,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[l.jsx(co,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yr.displayName=z2.displayName;const xr=({className:t,...e})=>l.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});xr.displayName="DialogHeader";const wr=m.forwardRef(({className:t,...e},n)=>l.jsx(W2,{ref:n,className:$("text-lg font-semibold leading-none tracking-tight",t),...e}));wr.displayName=W2.displayName;const em=m.forwardRef(({className:t,...e},n)=>l.jsx(H2,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));em.displayName=H2.displayName;var qX=m.createContext(void 0);function Ml(t){const e=m.useContext(qX);return t||e||"ltr"}function f0(t,[e,n]){return Math.min(n,Math.max(e,t))}function GX(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var bb="ScrollArea",[G2,Bte]=gn(bb),[KX,zn]=G2(bb),K2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,c]=m.useState(null),[u,d]=m.useState(null),[h,f]=m.useState(null),[p,b]=m.useState(null),[y,w]=m.useState(null),[v,g]=m.useState(0),[x,S]=m.useState(0),[_,C]=m.useState(!1),[E,N]=m.useState(!1),k=me(e,j=>c(j)),T=Ml(s);return l.jsx(KX,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:E,onScrollbarYEnabledChange:N,onCornerWidthChange:g,onCornerHeightChange:S,children:l.jsx(te.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});K2.displayName=bb;var Y2="ScrollAreaViewport",Q2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=zn(Y2,n),a=m.useRef(null),c=me(e,a,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(te.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Q2.displayName=Y2;var Hr="ScrollAreaScrollbar",_b=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return m.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?l.jsx(YX,{...r,ref:e,forceMount:n}):s.type==="scroll"?l.jsx(QX,{...r,ref:e,forceMount:n}):s.type==="auto"?l.jsx(J2,{...r,ref:e,forceMount:n}):s.type==="always"?l.jsx(Sb,{...r,ref:e}):null});_b.displayName=Hr;var YX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(In,{present:n||i,children:l.jsx(J2,{"data-state":i?"visible":"hidden",...r,ref:e})})}),QX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),i=t.orientation==="horizontal",o=nm(()=>c("SCROLL_END"),100),[a,c]=GX("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),l.jsx(In,{present:n||a!=="hidden",children:l.jsx(Sb,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:X(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:X(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),J2=m.forwardRef((t,e)=>{const n=zn(Hr,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=m.useState(!1),a=t.orientation==="horizontal",c=nm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:d)}},10);return gl(n.viewport,c),gl(n.content,c),l.jsx(In,{present:r||i,children:l.jsx(Sb,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Sb=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=zn(Hr,t.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[a,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=nO(a.viewport,a.content),d={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return nZ(f,o.current,a,p)}return n==="horizontal"?l.jsx(JX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=KE(f,a,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?l.jsx(XX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=KE(f,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),JX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=zn(Hr,t.__scopeScrollArea),[o,a]=m.useState(),c=m.useRef(null),u=me(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(Z2,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tm(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),sO(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zf(o.paddingLeft),paddingEnd:zf(o.paddingRight)}})}})}),XX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=zn(Hr,t.__scopeScrollArea),[o,a]=m.useState(),c=m.useRef(null),u=me(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(Z2,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tm(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),sO(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zf(o.paddingTop),paddingEnd:zf(o.paddingBottom)}})}})}),[ZX,X2]=G2(Hr),Z2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,p=zn(Hr,n),[b,y]=m.useState(null),w=me(e,k=>y(k)),v=m.useRef(null),g=m.useRef(""),x=p.viewport,S=r.content-r.viewport,_=pt(d),C=pt(c),E=nm(h,10);function N(k){if(v.current){const T=k.clientX-v.current.left,j=k.clientY-v.current.top;u({x:T,y:j})}}return m.useEffect(()=>{const k=T=>{const j=T.target;(b==null?void 0:b.contains(j))&&_(T,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[x,b,S,_]),m.useEffect(C,[r,C]),gl(b,E),gl(p.content,E),l.jsx(ZX,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:pt(i),onThumbPointerUp:pt(o),onThumbPositionChange:C,onThumbPointerDown:pt(a),children:l.jsx(te.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:X(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),v.current=b.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(k))}),onPointerMove:X(t.onPointerMove,N),onPointerUp:X(t.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=g.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Bf="ScrollAreaThumb",eO=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=X2(Bf,t.__scopeScrollArea);return l.jsx(In,{present:n||s.hasThumb,children:l.jsx(eZ,{ref:e,...r})})}),eZ=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=zn(Bf,n),o=X2(Bf,n),{onThumbPositionChange:a}=o,c=me(e,h=>o.onThumbChange(h)),u=m.useRef(void 0),d=nm(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const p=rZ(h,a);u.current=p,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,a]),l.jsx(te.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:X(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),b=h.clientX-p.left,y=h.clientY-p.top;o.onThumbPointerDown({x:b,y})}),onPointerUp:X(t.onPointerUp,o.onThumbPointerUp)})});eO.displayName=Bf;var Cb="ScrollAreaCorner",tO=m.forwardRef((t,e)=>{const n=zn(Cb,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(tZ,{...t,ref:e}):null});tO.displayName=Cb;var tZ=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=zn(Cb,n),[i,o]=m.useState(0),[a,c]=m.useState(0),u=!!(i&&a);return gl(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),gl(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?l.jsx(te.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function zf(t){return t?parseInt(t,10):0}function nO(t,e){const n=t/e;return isNaN(n)?0:n}function tm(t){const e=nO(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function nZ(t,e,n,r="ltr"){const s=tm(n),i=s/2,o=e||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return rO([c,u],h)(t)}function KE(t,e,n="ltr"){const r=tm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=f0(t,c);return rO([0,o],[0,a])(u)}function rO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function sO(t,e){return t>0&&t<e}var rZ=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function nm(t,e){const n=pt(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function gl(t,e){const n=pt(e);yt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var iO=K2,sZ=Q2,iZ=tO;const Ll=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(iO,{ref:r,className:$("relative overflow-hidden",t),...n,children:[l.jsx(sZ,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(oO,{}),l.jsx(iZ,{})]}));Ll.displayName=iO.displayName;const oO=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>l.jsx(_b,{ref:r,orientation:e,className:$("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(eO,{className:"relative flex-1 rounded-full bg-border"})}));oO.displayName=_b.displayName;const aO="admin_floating_names";function Wf(){try{const t=localStorage.getItem(aO);return t?JSON.parse(t):[]}catch{return[]}}function p0(t){localStorage.setItem(aO,JSON.stringify(t))}async function rm(){try{const{data:t,error:e}=await O.from("floating_names").select("name").order("created_at",{ascending:!0});return e?(console.error("Error fetching floating names:",e),Wf()):(t==null?void 0:t.map(n=>n.name))||[]}catch{return Wf()}}async function oZ(t){try{const{error:e}=await O.from("floating_names").insert({name:t});if(e){console.error("Error adding floating name:",e);const n=Wf();return n.push(t),p0(n),!1}return!0}catch{const e=Wf();return e.push(t),p0(e),!1}}async function aZ(t){try{const{error:e}=await O.from("floating_names").delete().eq("name",t);return e?(console.error("Error removing floating name:",e),!1):!0}catch{return!1}}async function lZ(){try{const{error:t}=await O.from("floating_names").delete().neq("name","");return t?(console.error("Error clearing floating names:",t),!1):(p0([]),!0)}catch{return!1}}const Sa="admin_game_covers";function Hf(){try{const t=localStorage.getItem(Sa);return t?JSON.parse(t):{}}catch{return{}}}async function m0(){try{const{data:t,error:e}=await O.from("game_covers").select("id, cover_url").not("cover_url","is",null);if(e){console.error("Error fetching game covers from Supabase:",e);const r=Hf();return console.log(" Using localStorage covers:",Object.keys(r)),r}const n={};return t==null||t.forEach(r=>{r.cover_url&&(n[r.id]=r.cover_url)}),console.log(` Loaded ${Object.keys(n).length} covers from Supabase`),n}catch(t){return console.error("Exception loading covers:",t),Hf()}}async function cZ(t,e){const n=Hf();n[t]=e;try{localStorage.setItem(Sa,JSON.stringify(n)),console.log(` Saved ${t} to localStorage`)}catch(r){if(r instanceof DOMException&&r.name==="QuotaExceededError"){console.warn(` LocalStorage quota exceeded, saving only ${t}`);try{localStorage.setItem(Sa,JSON.stringify({[t]:e}))}catch{return console.error(" Failed to save even single game cover"),!1}}else return console.error(" Error saving to localStorage:",r),!1}try{const{error:r}=await O.from("game_covers").upsert({id:t,cover_url:e,updated_at:new Date().toISOString()},{onConflict:"id"});if(r)return console.error(`Error saving ${t} to Supabase:`,r),console.error(`Data length: ${e.length} characters`),!0;console.log(` Saved ${t} to Supabase`);try{const s=Hf();delete s[t],Object.keys(s).length>0?localStorage.setItem(Sa,JSON.stringify(s)):localStorage.removeItem(Sa)}catch{}return!0}catch(r){return console.error("Exception saving game cover:",r),!0}}async function uZ(t){try{const{error:e}=await O.from("game_covers").update({cover_url:null,updated_at:new Date().toISOString()}).eq("id",t);return e?(console.error("Error removing game cover:",e),!1):!0}catch{return!1}}async function dZ(){try{const{error:t}=await O.from("game_covers").update({cover_url:null,updated_at:new Date().toISOString()}).not("cover_url","is",null);return t?(console.error("Error clearing game covers:",t),!1):(localStorage.removeItem(Sa),!0)}catch{return!1}}function hZ({games:t,onClose:e,onCoversUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[a,c]=m.useState(null),u=m.useRef({}),{toast:d}=Ht();m.useEffect(()=>{(async()=>{const v=await m0();s(v)})()},[]);const h=w=>new Promise((v,g)=>{const x=new FileReader;x.onload=S=>{var C;const _=new Image;_.onload=()=>{const E=document.createElement("canvas"),N=E.getContext("2d");if(!N){g(new Error("Could not get canvas context"));return}let k=_.width,T=_.height;const j=800,I=1200;if(k>j||T>I){const P=Math.min(j/k,I/T);k=k*P,T=T*P}E.width=k,E.height=T,N.drawImage(_,0,0,k,T);const q=E.toDataURL("image/jpeg",.85);v(q)},_.onerror=()=>g(new Error("Failed to load image")),_.src=(C=S.target)==null?void 0:C.result},x.onerror=()=>g(x.error),x.readAsDataURL(w)}),f=async(w,v)=>{var x;if(console.log(` Uploading ${v.name} for ${w}`,{type:v.type,size:v.size,sizeInMB:(v.size/1024/1024).toFixed(2)+" MB"}),!v.type.startsWith("image/")){d({title:"",description:` ${v.name} `,variant:"destructive"});return}const g=10*1024*1024;if(v.size>g){const S=(v.size/1024/1024).toFixed(2);d({title:"",description:` ${S} MB ( 10 MB)`,variant:"destructive"});return}c(w),o(!0);try{console.log(` Converting ${v.name} to base64...`);const S=await h(v);if(console.log(` Base64 size: ${(S.length/1024).toFixed(2)} KB`),console.log(" Saving to storage..."),await cZ(w,S)){console.log(" Saved successfully!");const C={...r,[w]:S};s(C),n(),d({title:"! ",description:` ${(x=t.find(E=>E.id===w))==null?void 0:x.name} `})}else console.error(" Save failed"),d({title:"",description:" ",variant:"destructive"})}catch(S){console.error(" Upload error:",S),d({title:"",description:S instanceof Error?S.message:"",variant:"destructive"})}finally{o(!1),c(null)}},p=async w=>{o(!0);const v=await uZ(w);if(o(!1),v){const g={...r};delete g[w],s(g),n(),d({title:"",description:""})}else d({title:"",description:"",variant:"destructive"})},b=async()=>{o(!0);const w=await dZ();o(!1),w?(s({}),n(),d({title:"",description:""})):d({title:"",description:"",variant:"destructive"})},y=w=>{var v;(v=u.current[w])==null||v.click()};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-black w-full max-w-2xl rounded-2xl border border-indigo-500/30 shadow-2xl overflow-hidden",children:[l.jsx("div",{className:"bg-indigo-600/30 px-6 py-4 border-b border-indigo-500/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center",children:l.jsx(Yv,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),l.jsx("p",{className:"text-indigo-300 text-sm",children:""})]})]}),l.jsx(M,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(co,{className:"w-5 h-5"})})]})}),l.jsx(Ll,{className:"h-[60vh]",children:l.jsxs("div",{className:"p-6 space-y-4",children:[t.map(w=>l.jsx("div",{className:"bg-black/30 rounded-xl border border-indigo-500/20 p-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`w-24 h-32 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center bg-gradient-to-br ${w.gradient}`,style:r[w.id]?{backgroundImage:`url(${r[w.id]})`,backgroundSize:"cover",backgroundPosition:"center"}:void 0,children:!r[w.id]&&l.jsx("span",{className:"text-5xl",children:w.emoji})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:w.name}),r[w.id]&&l.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>p(w.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[l.jsx(eu,{className:"w-4 h-4 mr-1"}),""]})]}),l.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:v=>u.current[w.id]=v,onChange:v=>{var x;const g=(x=v.target.files)==null?void 0:x[0];g&&(f(w.id,g),v.target.value="")}}),l.jsx(M,{variant:"secondary",size:"sm",onClick:()=>y(w.id),disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full",children:a===w.id?l.jsxs(l.Fragment,{children:[l.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Z5,{className:"w-4 h-4 mr-2"}),r[w.id]?"":""]})}),r[w.id]&&l.jsx("p",{className:"text-xs text-green-400",children:" "})]})]})},w.id)),l.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4",children:l.jsxs("p",{className:"text-indigo-300 text-sm",children:[" ",l.jsx("strong",{children:":"}),"  (JPG, PNG, GIF, WEBP)  10MB"]})})]})}),l.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-indigo-500/30",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs(M,{variant:"outline",onClick:b,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[l.jsx(Ia,{className:"w-4 h-4 mr-2"}),""]}),l.jsx(M,{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700",children:""})]})})]})})}const fZ=[{id:"doraemon",emoji:"",name:"King's Cup",gradient:"from-red-500 to-orange-500"},{id:"pokdeng",emoji:"",name:"Pok Deng",gradient:"from-emerald-500 to-green-600"},{id:"undercover",emoji:"",name:"Undercover",gradient:"from-purple-600 to-indigo-600"},{id:"paranoia",emoji:"",name:"Paranoia",gradient:"from-pink-500 to-rose-600"},{id:"5-sec",emoji:"",name:"5 Second Rule",gradient:"from-yellow-400 to-orange-500"}];function lO({onClose:t,games:e,onCoversUpdate:n}){const r=e&&e.length>0?e:fZ,[s,i]=m.useState([]),[o,a]=m.useState(""),[c,u]=m.useState(!0),[d,h]=m.useState(!1),[f,p]=m.useState("names");m.useEffect(()=>{b()},[]);const b=async()=>{u(!0);const g=await rm();i(g),u(!1)},y=async()=>{if(!o.trim())return;const g=o.trim();a(""),i(x=>[...x,g]),await oZ(g)},w=async g=>{const x=s[g];i(S=>S.filter((_,C)=>C!==g)),await aZ(x)},v=async()=>{i([]),await lZ()};return d&&r.length>0?l.jsx(hZ,{games:r,onClose:()=>h(!1),onCoversUpdate:()=>{h(!1),n==null||n()}}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-black w-full max-w-md rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:[l.jsx("div",{className:"bg-purple-600/30 px-6 py-4 border-b border-purple-500/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center",children:l.jsx(Bn,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Admin Panel"}),l.jsx("p",{className:"text-purple-300 text-sm",children:" BONNE"})]})]}),l.jsx(M,{variant:"ghost",size:"icon",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(co,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"bg-black/20 px-6 py-3 border-b border-purple-500/20 flex gap-2",children:[l.jsxs(M,{variant:f==="names"?"default":"ghost",size:"sm",onClick:()=>p("names"),className:f==="names"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[l.jsx(Bn,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{variant:f==="covers"?"default":"ghost",size:"sm",onClick:()=>p("covers"),className:f==="covers"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[l.jsx(Yv,{className:"w-4 h-4 mr-2"}),""]})]}),f==="names"?l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-white/60 text-sm",children:" Lobby"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{placeholder:"...",value:o,onChange:g=>a(g.target.value),onKeyDown:g=>g.key==="Enter"&&y(),className:"flex-1 bg-white/10 border-purple-500/30 text-white placeholder:text-white/40",maxLength:20}),l.jsx(M,{onClick:y,disabled:!o.trim(),className:"bg-purple-500 hover:bg-purple-600 text-white",children:l.jsx($u,{className:"w-4 h-4"})})]}),l.jsx(Ll,{className:"h-48 rounded-lg bg-black/30 border border-purple-500/20",children:l.jsx("div",{className:"p-3 space-y-2",children:c?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(zt,{className:"w-6 h-6 text-purple-400 animate-spin"})}):s.length===0?l.jsx("p",{className:"text-center text-white/40 text-sm py-8",children:""}):s.map((g,x)=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:[l.jsx("span",{className:"text-white font-medium",children:g}),l.jsx(M,{variant:"ghost",size:"icon",onClick:()=>w(x),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(eu,{className:"w-4 h-4"})})]},x))})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(M,{variant:"outline",onClick:v,disabled:s.length===0,className:"flex-1 border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300",children:[l.jsx(eu,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:t,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white",children:[l.jsx(yp,{className:"w-4 h-4 mr-2"}),""]})]}),l.jsx("div",{className:"text-center pt-2 border-t border-purple-500/20",children:l.jsxs("p",{className:"text-purple-300 text-sm",children:[":"," ",l.jsx("span",{className:"font-bold text-white",children:s.length})," "]})})]}):l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-white/60 text-sm mb-4",children:""})}),l.jsxs(M,{onClick:()=>h(!0),disabled:r.length===0,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Yv,{className:"w-5 h-5 mr-2"}),""]}),r.length===0&&l.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:l.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),l.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:l.jsxs("p",{className:"text-white/60 text-sm",children:[" ",l.jsx("strong",{children:":"}),"  (  )"]})}),l.jsx(M,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]})]})})}const Tt=["#ff6b6b","#4ecdc4","#ffe66d","#a8e6cf","#ff8b94","#c7ceea","#b5ead7","#ffd3b6","#dcedc1","#a0d2eb","#d4a5a5","#ffaaa5","#ffc6ff","#9bf6ff","#caffbf","#fdffb6","#bdb2ff","#ffc6ff","#a0c4ff","#ffadad"];function Eb({names:t}){const e=m.useRef(null),n=m.useRef([]),r=m.useRef();m.useEffect(()=>{if(t.length===0)return;const i=new Set;n.current=t.map((o,a)=>{let c=Tt[a%Tt.length],u=0;for(;i.has(c)&&u<Tt.length;)c=Tt[(a+u)%Tt.length],u++;return i.add(c),{x:Math.random()*(window.innerWidth-100),y:Math.random()*(window.innerHeight-30),vx:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),vy:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),color:c,element:null}})},[t]);const s=m.useCallback(()=>{n.current.forEach(i=>{if(!i.element)return;i.x+=i.vx,i.y+=i.vy;const o=i.element.getBoundingClientRect();if(i.x<=0||i.x+o.width>=window.innerWidth){i.vx*=-1,i.x=Math.max(0,Math.min(i.x,window.innerWidth-o.width));const a=Tt[Math.floor(Math.random()*Tt.length)];i.color=a,i.element.style.color=a,i.element.style.textShadow=`0 0 10px ${a}, 0 0 20px ${a}, 0 0 30px ${a}`}if(i.y<=0||i.y+o.height>=window.innerHeight){i.vy*=-1,i.y=Math.max(0,Math.min(i.y,window.innerHeight-o.height));const a=Tt[Math.floor(Math.random()*Tt.length)];i.color=a,i.element.style.color=a,i.element.style.textShadow=`0 0 10px ${a}, 0 0 20px ${a}, 0 0 30px ${a}`}i.element.style.transform=`translate(${i.x}px, ${i.y}px)`}),r.current=requestAnimationFrame(s)},[]);return m.useEffect(()=>{if(t.length!==0)return r.current=requestAnimationFrame(s),()=>{r.current&&cancelAnimationFrame(r.current)}},[t,s]),t.length===0?null:l.jsx("div",{ref:e,className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map((i,o)=>{var a,c,u,d;return l.jsxs("div",{ref:h=>{n.current[o]&&(n.current[o].element=h)},className:"fixed text-sm font-bold pointer-events-none whitespace-nowrap",style:{color:((a=n.current[o])==null?void 0:a.color)||Tt[o%Tt.length],filter:"brightness(1.2) saturate(1.3)",textShadow:`0 0 8px ${((c=n.current[o])==null?void 0:c.color)||Tt[o%Tt.length]}, 0 0 15px ${((u=n.current[o])==null?void 0:u.color)||Tt[o%Tt.length]}, 0 0 25px ${((d=n.current[o])==null?void 0:d.color)||Tt[o%Tt.length]}`,left:0,top:0,willChange:"transform"},children:[o===0&&" ",i]},o)})})}const pZ={th:{back:"",loading:"...",error:"",close:"",save:"",cancel:"",edit:"",delete:"",add:"",search:"",confirm:"",selectGame:"",selectGamePrompt:"",kingsCup:"",kingsCupDesc:"King's Cup - ",kingsCupSubtitle:"",pokDeng:"",pokDengDesc:"Pok Deng - ",undercover:"Undercover",undercoverDesc:" - ",partyMotto:" ",liveMode:"LIVE",liveModeDesc:"Host  ",enterNameToStart:"",enterCodeAndName:"",roomCodePlaceholder:" (6 )",quickStartDesc:"!",themeChange:"",themeSelectTheme:"",createRoom:"",joinRoom:"",roomCode:"",yourName:"",enterName:"...",enterCode:" 6 ...",createNewRoom:"",joinRoomBtn:"",quickStart:" ",creating:"...",joining:"...",room:"",waitingForPlayers:"",players:"",host:"Host",leaveRoom:"",startGame:"",minPlayers:"",people:"",undercoverTitle:"Undercover",undercoverSubtitle:" - !",category:"",allCategories:"",includeMrWhite:" (Mr. White)",revealWord:"",holdToReveal:" (!)",yourWord:":",holdToView:"",role:"",startDescribe:"",describePhase:"",describeRound:"",turn:"",nextPlayer:"",nextPerson:"",startVoting:"",voting:"!",vote:"",waitingForOthers:"...",selectSpy:"",selectSuspect:"",voteResult:"",votes:"",continue:"",gameOver:"",finalResult:"",restartGame:"",civilian:"",spy:"",gameStarted:" !",eliminated:"!",waitingPlayers:"",playersInRoom:"",needMinPlayers:" 4 ",seeYourWord:"",tapToReveal:" (!)",yourWordIs:"",holdToSee:"",alivePlayers:"",manageWords:"",vocabularyManager:"",addWord:"",editWord:"",editVocabulary:"",addVocabulary:"",addNewWord:"",categoryName:"",categoryPlaceholder:" , ",civilianWord:"",civilianPlaceholder:"",undercoverWord:"",undercoverPlaceholder:"",searchWords:"...",searchVocabulary:"...",noWords:"",noWordsFound:"",noVocabularyFound:"",noVocabularyYet:" ",addWordToStart:"",cannotEditDefault:"",cannotDeleteDefault:"",words:"",invalidName:"",nameTooShort:" ( 2 )",nameTooLong:" ( 20 )",nameContainsBadWords:"",roomNotFound:"",gameAlreadyStarted:" ",pokDengTitle:" ",pokDengSubtitle:"!",bet:"",draw:"",stand:"",showdown:"",nextRound:"",dealer:"",setDealer:"",points:"",multiplier:"",winner:"",roomCreated:"! ",roomJoined:"! ",playerJoined:" ",playerLeft:" ",leftRoom:" ",voted:" ",youVotedFor:""},en:{back:"Back",loading:"Loading...",error:"Error",close:"Close",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",confirm:"Confirm",selectGame:"Select Game",selectGamePrompt:"Choose a game to play",kingsCup:"King's Cup",kingsCupDesc:"King's Cup - Drinking Game",kingsCupSubtitle:"Drink till you drop!",pokDeng:"Pok Deng",pokDengDesc:"Pok Deng - Card Game",undercover:"Undercover",undercoverDesc:"Find the Spy - Detective Game",partyMotto:"Drink for fun, Party til' dawn",liveMode:"LIVE",liveModeDesc:"Host shares screen, players use phones",enterNameToStart:"Enter your name to start",enterCodeAndName:"Enter room code and your name",roomCodePlaceholder:"Room Code (6 digits)",quickStartDesc:"Enter your name and start playing!",themeChange:"Change Theme",themeSelectTheme:"Select Theme",createRoom:"Create Room",joinRoom:"Join Room",roomCode:"Room Code",yourName:"Your Name",enterName:"Enter name...",enterCode:"Enter 6-digit code...",createNewRoom:"Create New Room",joinRoomBtn:" Join Room",quickStart:" Quick Start",creating:"Creating...",joining:"Joining...",room:"Room",waitingForPlayers:"Waiting for players",players:"Players",host:"Host",leaveRoom:"Leave Room",startGame:"Start Game",minPlayers:"Need at least",people:"players",undercoverTitle:"Undercover",undercoverSubtitle:"Find the impostor among you!",category:"Category",allCategories:"All",includeMrWhite:"Include Mr. White",revealWord:"Reveal Your Word",holdToReveal:"Hold to reveal (Don't let others see!)",yourWord:"Your word is:",holdToView:"Hold to view word",role:"Role",startDescribe:"Start Describing",describePhase:"Round",describeRound:"Describe Round",turn:"Turn",nextPlayer:"Next",nextPerson:"Next Person",startVoting:"Start Voting",voting:"Vote!",vote:"Vote",waitingForOthers:"Waiting for others...",selectSpy:"Select who you think is the spy",selectSuspect:"Select who you think is the spy",voteResult:"Vote Result",votes:"votes",continue:"Continue",gameOver:"Game Over",finalResult:"Final Result",restartGame:"Restart Game",civilian:"Civilian",spy:"Undercover",gameStarted:" Game Started!",eliminated:"has been eliminated!",waitingPlayers:"Waiting for players",playersInRoom:"Players in Room",needMinPlayers:"Need at least 4 players",seeYourWord:"See Your Word",tapToReveal:"Hold to reveal (Don't let others see!)",yourWordIs:"Your word is",holdToSee:"Hold to see word",alivePlayers:"Alive Players",manageWords:"Manage Words",vocabularyManager:"Vocabulary Manager",addWord:"Add Word",editWord:"Edit Vocabulary",editVocabulary:"Edit Vocabulary",addVocabulary:"Add New Vocabulary",addNewWord:"Add New Vocabulary",categoryName:"Category",categoryPlaceholder:"e.g. Food, Places",civilianWord:"Civilian Word",civilianPlaceholder:"Word for civilians",undercoverWord:"Undercover Word",undercoverPlaceholder:"Word for undercover",searchWords:"Search words...",searchVocabulary:"Search vocabulary...",noWords:"No vocabularies yet",noWordsFound:"No matching vocabularies found",noVocabularyFound:"No matching vocabularies found",noVocabularyYet:"No vocabularies yet. Click Add Word to get started",addWordToStart:"Click Add Word to get started",cannotEditDefault:"Cannot edit default words",cannotDeleteDefault:"Cannot delete default words",words:"words",invalidName:"Invalid name",nameTooShort:"Name too short (minimum 2 characters)",nameTooLong:"Name too long (maximum 20 characters)",nameContainsBadWords:"Please use an appropriate name",roomNotFound:"Room not found",gameAlreadyStarted:"Game already started, cannot join",pokDengTitle:" Pok Deng",pokDengSubtitle:"Thai card game!",bet:"Bet",draw:"Draw",stand:"Stand",showdown:"Showdown",nextRound:"Next Round",dealer:"Dealer",setDealer:"Set as Dealer",points:"Points",multiplier:"x",winner:"Winner",roomCreated:"Room created successfully! ",roomJoined:"Joined room successfully! ",playerJoined:" New player joined",playerLeft:" Player left",leftRoom:" Left room",voted:" Voted",youVotedFor:"You voted for"}};let qf="th";function mZ(t){qf=t,typeof window<"u"&&localStorage.setItem("language",t)}function Gf(){if(typeof window<"u"){const t=localStorage.getItem("language");(t==="th"||t==="en")&&(qf=t)}return qf}function B(t){return pZ[qf][t]}typeof window<"u"&&Gf();const gZ=["","","","","","","","","","","","","","fuck","shit","bitch","ass","damn","hell","dick","pussy","cock","cunt","bastard","nazi","hitler","xxx","porn","sex"];function Kf(t){const e=t.trim();if(e.length<2)return{isValid:!1,error:"nameTooShort"};if(e.length>20)return{isValid:!1,error:"nameTooLong"};const n=e.toLowerCase();for(const s of gZ)if(n.includes(s.toLowerCase()))return{isValid:!1,error:"nameContainsBadWords"};return/[a-zA-Z0-9-]/.test(e)?{isValid:!0}:{isValid:!1,error:"invalidName"}}function vZ({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const[i,o]=m.useState("menu"),[a,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(""),[p,b]=m.useState(!1),[y,w]=m.useState(!1),[v,g]=m.useState([]),x=m.useRef(""),{toast:S}=Ht();m.useEffect(()=>{(async()=>{const k=await rm();g(k)})()},[y]),m.useEffect(()=>{const N=k=>{if(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)return;const T=k.key.toLowerCase(),j=x.current+T;"adminhee444".startsWith(j)?(x.current=j,j==="adminhee444"&&n&&(x.current="",b(!0))):x.current="adminhee444".startsWith(T)?T:""};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[n]);const _=async()=>{if(!a.trim())return;const N=Kf(a);if(!N.isValid){S({title:B("error"),description:N.error||B("invalidName"),variant:"destructive"});return}await t(a.trim())},C=async()=>{if(!a.trim()||!u.trim())return;if(u.trim()==="777777"&&a.trim().toUpperCase()==="BONNE"){w(!0);return}const N=Kf(a);if(!N.isValid){S({title:B("error"),description:N.error||B("invalidName"),variant:"destructive"});return}await e(u.trim(),a.trim())},E=async()=>{!h.trim()||!n||(await n(h.trim()),b(!1),f(""))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx(Eb,{names:v}),y&&l.jsx(lO,{onClose:()=>w(!1)}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&l.jsx("div",{className:"absolute top-4 left-4 z-20",children:l.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(ja,{className:"w-5 h-5 rotate-180"})})}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:["",B("kingsCup")]}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("kingsCupSubtitle")})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[i==="menu"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>o("create"),children:[l.jsx($u,{className:"w-5 h-5"}),B("createNewRoom")]}),l.jsx("p",{className:"text-white/50 text-xs text-center"})]}),l.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>o("join"),children:[l.jsx(Bn,{className:"w-5 h-5"}),B("joinRoom")]}),n&&l.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[l.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>b(!0),disabled:r,children:[l.jsx(Xh,{className:"w-5 h-5"})," ",B("liveMode")]}),l.jsx("p",{className:"text-white/50 text-xs text-center",children:B("liveModeDesc")})]})]}),i==="create"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("createNewRoom")}),l.jsx("p",{className:"text-white/60 text-sm",children:B("enterNameToStart")})]}),l.jsx(be,{placeholder:B("yourName"),value:a,onChange:N=>c(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:B("back")}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:_,disabled:!a.trim()||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[B("createRoom"),l.jsx(ja,{className:"w-4 h-4"})]})})]})]}),i==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("joinRoom")}),l.jsx("p",{className:"text-white/60 text-sm",children:B("enterCodeAndName")})]}),l.jsx(be,{placeholder:B("roomCodePlaceholder"),value:u,onChange:N=>d(N.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),l.jsx(be,{placeholder:B("yourName"),value:a,onChange:N=>c(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:B("back")}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:C,disabled:!a.trim()||u.length!==6||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[B("joinRoom"),l.jsx(ja,{className:"w-4 h-4"})]})})]})]})]}),l.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:B("partyMotto")}),l.jsx(Wr,{open:p,onOpenChange:b,children:l.jsxs(yr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[l.jsxs(xr,{children:[l.jsx(wr,{className:"text-center text-white",children:B("quickStart")}),l.jsx(em,{className:"text-center text-white/60",children:B("quickStartDesc")})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsx(be,{placeholder:"",value:h,onChange:N=>f(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&h.trim()&&E()}}),l.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:E,disabled:!h.trim()||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Xh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function sm({className:t}){return l.jsxs("div",{className:$("absolute inset-0 overflow-hidden",t),children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),l.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("defs",{children:l.jsx("pattern",{id:"diamond-pattern",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M10 0L20 10L10 20L0 10Z",fill:"white",opacity:"0.5"})})}),l.jsx("rect",{width:"100%",height:"100%",fill:"url(#diamond-pattern)"})]}),l.jsx("div",{className:"absolute inset-2 sm:inset-3 rounded-lg border-2 border-white/20"}),l.jsx("div",{className:"absolute inset-3 sm:inset-4 rounded-md border border-white/10"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 rounded-full border-2 border-white/30 flex items-center justify-center",children:l.jsx("div",{className:"w-12 h-12 sm:w-18 sm:h-18 rounded-full border border-white/20 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white font-bold text-lg sm:text-2xl leading-none",children:""}),l.jsx("div",{className:"text-white/60 text-[8px] sm:text-xs mt-0.5",children:"K's Cup"})]})})}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[l.jsx("div",{className:"absolute w-20 sm:w-28 h-0.5 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),l.jsx("div",{className:"absolute w-0.5 h-20 sm:h-28 bg-gradient-to-b from-transparent via-white/20 to-transparent"})]})]})})]})}function yZ({value:t,suit:e}){const n=u0[e],r=d0[e];return(()=>{switch(t){case"A":return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("span",{className:$("text-7xl sm:text-8xl",r),children:n})});case"2":return l.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"3":return l.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"4":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]})]});case"5":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n})})]});case"6":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]})]});case"7":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-1/3 flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n})})]});case"8":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-3 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-[30%] flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n})}),l.jsx("div",{className:"absolute inset-x-0 bottom-[30%] flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})})]});case"9":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n})})]});case"10":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-[25%] flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n})}),l.jsx("div",{className:"absolute inset-x-0 bottom-[25%] flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})})]});case"J":case"Q":case"K":return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:$("text-6xl sm:text-7xl font-bold",r),children:t}),l.jsx("div",{className:$("text-4xl sm:text-5xl mt-1",r),children:n})]})});default:return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("span",{className:$("text-6xl sm:text-7xl",r),children:n})})}})()}function YE({card:t,isFlipped:e=!0,size:n="lg",showRule:r=!1}){const s={sm:"w-16 h-24",md:"w-24 h-36",lg:"w-32 h-48 sm:w-44 sm:h-64 md:w-52 md:h-72",large:"w-56 h-80 sm:w-72 sm:h-[26rem] md:w-80 md:h-[30rem]"},i={sm:"text-sm",md:"text-lg",lg:"text-xl sm:text-2xl md:text-3xl",large:"text-3xl sm:text-4xl md:text-5xl"},o={sm:"text-sm",md:"text-lg",lg:"text-lg sm:text-xl md:text-2xl",large:"text-2xl sm:text-3xl md:text-4xl"};if(!t)return l.jsx("div",{className:$(s[n],"rounded-xl bg-muted border-2 border-dashed border-border flex items-center justify-center"),children:l.jsx("span",{className:"text-muted-foreground text-3xl",children:"?"})});const a=fo[t.value];return l.jsxs("div",{className:"card-flip",children:[l.jsxs("div",{className:$("card-inner relative",s[n],e&&"flipped"),children:[l.jsx("div",{className:$("card-face rounded-xl overflow-hidden shadow-xl",s[n]),children:l.jsx(sm,{})}),l.jsxs("div",{className:$("card-face card-back rounded-xl bg-paper border border-paper-border shadow-xl overflow-hidden",s[n]),children:[l.jsxs("div",{className:$("absolute top-2 left-2 sm:top-3 sm:left-3 flex flex-col items-center",d0[t.suit]),children:[l.jsx("span",{className:$("font-bold leading-none",i[n]),children:t.value}),l.jsx("span",{className:$("leading-none",o[n]),children:u0[t.suit]})]}),l.jsx("div",{className:"absolute inset-0 px-8 py-10 sm:px-10 sm:py-12",children:l.jsx(yZ,{value:t.value,suit:t.suit})}),l.jsxs("div",{className:$("absolute bottom-2 right-2 sm:bottom-3 sm:right-3 flex flex-col items-center rotate-180",d0[t.suit]),children:[l.jsx("span",{className:$("font-bold leading-none",i[n]),children:t.value}),l.jsx("span",{className:$("leading-none",o[n]),children:u0[t.suit]})]})]})]}),r&&e&&a&&l.jsx("div",{className:"mt-6 text-center max-w-xs mx-auto",children:l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-5 border border-white/10",children:[l.jsx("div",{className:"text-4xl mb-3",children:a.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:a.title}),l.jsx("p",{className:"text-white/70",children:a.description})]})})]})}function g0(){return l.jsxs("div",{className:"flex flex-col items-center justify-center py-4 select-none",children:[l.jsx(pe.div,{animate:{scale:[1,1.15,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"mb-3",children:l.jsx("span",{className:"text-5xl sm:text-6xl block",children:""})}),l.jsx(pe.p,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-sm sm:text-base font-medium",children:"..."})]})}function cO({players:t,currentPlayerId:e}){return l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[l.jsxs("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:[l.jsx(t3,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"}),l.jsxs("span",{className:"text-white",children:[" (",t.length,")"]})]}),l.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto sm:flex-wrap sm:overflow-visible pb-2 sm:pb-0 -mx-1 px-1 scrollbar-hide",children:t.map(n=>l.jsxs("div",{className:$("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0 min-w-[70px] sm:min-w-[90px]",n.id===e?"bg-white text-black ring-2 ring-amber-400":"bg-white/10 text-white hover:bg-white/20"),children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:`/king-s-cup-party/${n.avatar||1}.jpg`,alt:n.name,className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full object-cover border-2 sm:border-3 border-white/40 shadow-lg"}),n.is_host&&l.jsx(Qh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"})]}),l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"truncate max-w-[60px] sm:max-w-[80px]",children:n.name}),n.id===e&&l.jsx("span",{className:"text-[10px] sm:text-xs opacity-60",children:"()"})]})]},n.id))})]})}function xZ({cardsRemaining:t,onDraw:e,disabled:n,showCount:r=!0}){const s=m.useMemo(()=>Array.from({length:8}).map(()=>({rotation:(Math.random()-.5)*6,offsetX:(Math.random()-.5)*4,offsetY:(Math.random()-.5)*2})),[]),i=Math.min(Math.ceil(t/7),8);return t===0?l.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64 rounded-xl border-2 border-dashed border-white/20 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:l.jsx("span",{className:"text-white/50 text-sm sm:text-lg",children:""})}):l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64",children:Array.from({length:i}).map((o,a)=>{const c=a===i-1,u=s[a];return l.jsx("div",{className:$("absolute w-full h-full rounded-xl transition-all duration-200 overflow-hidden","shadow-lg",c&&!n&&"hover:scale-[1.03] hover:-translate-y-2 cursor-pointer hover:shadow-xl"),style:{bottom:`${a*2}px`,transform:`rotate(${u.rotation}deg) translateX(${u.offsetX}px)`,zIndex:a},onClick:c&&!n?e:void 0,children:l.jsx(sm,{})},a)})}),r&&l.jsxs("div",{className:"absolute -top-8 sm:-top-10 left-1/2 -translate-x-1/2 px-3 sm:px-4 py-1 sm:py-1.5 rounded-full bg-black/60 backdrop-blur-sm text-xs sm:text-sm font-medium border border-white/10 z-20",children:[l.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:t}),l.jsx("span",{className:"text-white/60 ml-1",children:""})]})]})}const uO=m.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));uO.displayName="Textarea";const Qg="custom_rules_";function dO(t){const[e,n]=m.useState(fo);return m.useEffect(()=>{const i=localStorage.getItem(Qg+t);if(i)try{n(JSON.parse(i))}catch{n(fo)}},[t]),{customRules:e,saveRules:i=>{n(i),localStorage.setItem(Qg+t,JSON.stringify(i))},resetRules:()=>{n(fo),localStorage.removeItem(Qg+t)}}}function wZ({roomCode:t,isHost:e,onRulesChange:n}){const{toast:r}=Ht(),[s,i]=m.useState(!1),[o,a]=m.useState(fo),{customRules:c,saveRules:u,resetRules:d}=dO(t);m.useEffect(()=>{a(c),n==null||n(c)},[c,n]);const h=()=>{u(o),n==null||n(o),i(!1),r({title:" !",description:""})},f=()=>{d(),a(fo),n==null||n(fo),r({title:" ",description:""})},p=(b,y,w)=>{a(v=>({...v,[b]:{...v[b],[y]:w}}))};return e?l.jsxs(Wr,{open:s,onOpenChange:i,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(Ex,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"max-w-lg max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[l.jsx(xr,{children:l.jsx(wr,{className:"text-xl font-bold flex items-center gap-2",children:" "})}),l.jsx(Ll,{className:"h-[60vh] pr-4",children:l.jsx("div",{className:"space-y-4",children:h2.map(b=>{var y,w,v;return l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("span",{className:"text-2xl w-10 h-10 flex items-center justify-center bg-white/10 rounded-lg font-bold",children:b}),l.jsx(be,{value:((y=o[b])==null?void 0:y.emoji)||"",onChange:g=>p(b,"emoji",g.target.value),className:"w-16 text-center text-xl bg-black/30 border-white/20",placeholder:""}),l.jsx(be,{value:((w=o[b])==null?void 0:w.title)||"",onChange:g=>p(b,"title",g.target.value),className:"flex-1 bg-black/30 border-white/20",placeholder:""})]}),l.jsx(uO,{value:((v=o[b])==null?void 0:v.description)||"",onChange:g=>p(b,"description",g.target.value),className:"bg-black/30 border-white/20 resize-none",placeholder:"...",rows:2})]},b)})})}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[l.jsxs(M,{variant:"outline",onClick:f,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[l.jsx(Ia,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:h,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[l.jsx(YT,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}const bZ=vp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Tu({className:t,variant:e,...n}){return l.jsx("div",{className:$(bZ({variant:e}),t),...n})}async function _Z(t,e=3){try{const n=[],r=` Undercover  "${t}"
    
:
-  
-  Undercover 
- 
- 

:
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""

 ${e}  "${t}":`;await new Promise(i=>setTimeout(i,1500));const s=t.toLowerCase();return s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}),n.slice(0,e)}catch(n){throw console.error("Error generating vocabulary:",n),new Error(" ")}}async function hO(t,e=4,n="medium"){try{await new Promise(c=>setTimeout(c,1e3));const r=[" 1 ",""," 1  "," 1 "," 1 "],s=[":  '' "," 1-21  7  7 ","  "," "," '':  ","  ","  "],i=["Master Rule:   ",":  ''  3 ",":    1 ",":   2 ","  ",`:  ${e}  `,":   "];let o;switch(n){case"easy":o=r;break;case"hard":o=i;break;default:o=s}const a=o[Math.floor(Math.random()*o.length)];return{card:t,rule:a,difficulty:n}}catch(r){throw console.error("Error generating rule:",r),new Error(" ")}}async function SZ(t=5,e=4){const n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],r=["easy","medium","hard"],s=[];for(let i=0;i<t;i++){const o=n[Math.floor(Math.random()*n.length)],a=r[Math.floor(Math.random()*r.length)];s.push(hO(o,e,a))}return Promise.all(s)}async function CZ(t=5){try{const e=` Paranoia
    
:
- 
-   
- 
- 

:
- "?"
- "?"
- "?"

 ${t} :`;return await new Promise(s=>setTimeout(s,1200)),[...["?","?","?","?","?","?","?","?","?","?","?","?","?","?","?"]].sort(()=>Math.random()-.5).slice(0,t)}catch(e){return console.error("Error generating Paranoia questions:",e),["?","?","?","?","?"].slice(0,t)}}function EZ({playerCount:t,onApplyRule:e}){const[n,r]=m.useState(!1),[s,i]=m.useState(!1),[o,a]=m.useState([]),[c,u]=m.useState(null),{toast:d}=Ht(),h=async()=>{i(!0);try{const w=await SZ(5,t);a(w),d({title:" !",description:`AI  ${w.length} `})}catch(w){d({title:"",description:w instanceof Error?w.message:"",variant:"destructive"})}finally{i(!1)}},f=async w=>{i(!0);try{const v=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],g=v[Math.floor(Math.random()*v.length)],x=await hO(g,t,w);a([x,...o]),d({title:" !",description:` ${x.card}`})}catch(v){d({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{i(!1)}},p=(w,v)=>{navigator.clipboard.writeText(`${w.card}: ${w.rule}`),u(v),setTimeout(()=>u(null),2e3),d({title:"!",description:""})},b=w=>{switch(w){case"easy":return"bg-green-500/20 text-green-400 border-green-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"hard":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},y=w=>{switch(w){case"easy":return"";case"medium":return"";case"hard":return"";default:return w}};return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",size:"sm",className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30 text-purple-300 hover:from-purple-500/30 hover:to-pink-500/30",children:[l.jsx(fa,{className:"w-4 h-4 mr-2"}),"AI "]})}),l.jsxs(yr,{className:"sm:max-w-2xl bg-gray-900 text-white border-white/20 max-h-[90vh] flex flex-col",children:[l.jsxs(xr,{children:[l.jsxs(wr,{className:"flex items-center gap-2 text-xl",children:[l.jsx(fa,{className:"w-6 h-6 text-purple-400"}),"AI Rule Generator"]}),l.jsxs(em,{className:"text-white/60",children:[" AI   ",t," "]})]}),l.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(M,{onClick:()=>h(),disabled:s,className:"flex-1 bg-purple-500 hover:bg-purple-600",children:s?l.jsxs(l.Fragment,{children:[l.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(fa,{className:"w-4 h-4 mr-2"})," 5 "]})}),o.length>0&&l.jsx(M,{onClick:()=>a([]),variant:"outline",className:"border-white/20 text-white/70 hover:bg-white/10",children:""})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(M,{onClick:()=>f("easy"),disabled:s,variant:"outline",className:"border-green-500/30 text-green-400 hover:bg-green-500/10",size:"sm",children:"+ "}),l.jsx(M,{onClick:()=>f("medium"),disabled:s,variant:"outline",className:"border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10",size:"sm",children:"+ "}),l.jsx(M,{onClick:()=>f("hard"),disabled:s,variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",size:"sm",children:"+ "})]}),o.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-sm font-semibold text-white/80",children:[" (",o.length,"):"]}),o.map((w,v)=>l.jsx("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs(Tu,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[" ",w.card]}),l.jsx(Tu,{variant:"outline",className:b(w.difficulty),children:y(w.difficulty)})]}),l.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:w.rule})]}),l.jsx(M,{onClick:()=>p(w,v),size:"sm",variant:"ghost",className:"text-white/60 hover:text-white hover:bg-white/10",children:c===v?l.jsx(il,{className:"w-4 h-4 text-green-400"}):l.jsx(bo,{className:"w-4 h-4"})})]})},v))]}):l.jsxs("div",{className:"text-center py-12 text-white/40",children:[l.jsx(fa,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),l.jsx("p",{className:"text-sm",children:" AI "})]})]}),l.jsx("div",{className:"border-t border-white/10 pt-4 mt-4",children:l.jsx("p",{className:"text-xs text-white/40 text-center",children:"  "})})]})]})}const fO=()=>{const{userId:t}=Pw(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[a,c]=m.useState(!0);return m.useEffect(()=>{if(!t){n([]),s([]),o([]),c(!1);return}const w=xt(wt,`users/${t}/friends`),v=xt(wt,`users/${t}/friendRequests`),g=xt(wt,`users/${t}/gameInvites`),x=vg(w,C=>{const E=C.val();if(E){const N=Object.entries(E).map(([k,T])=>({id:k,displayName:T.displayName,addedAt:T.addedAt}));n(N)}else n([]);c(!1)}),S=vg(v,C=>{const E=C.val();if(E){const N=Object.entries(E).map(([k,T])=>({id:k,fromId:T.fromId,fromName:T.fromName,sentAt:T.sentAt}));s(N)}else s([])}),_=vg(g,C=>{const E=C.val();if(E){const k=Object.entries(E).map(([T,j])=>({id:T,fromId:j.fromId,fromName:j.fromName,roomCode:j.roomCode,gameType:j.gameType,gameName:j.gameName,sentAt:j.sentAt})).filter(T=>Date.now()-T.sentAt<10*60*1e3);o(k)}else o([])});return()=>{x(),S(),_()}},[t]),{friends:e,friendRequests:r,gameInvites:i,loading:a,searchUserById:async w=>{if(!w||w===t)return null;const v=xt(wt,`users/${w}`),g=await Jo(v);if(g.exists()){const x=g.val();return{id:x.id,displayName:x.displayName}}return null},sendFriendRequest:async w=>{if(!t)return!1;const v=xt(wt,`users/${t}`),g=await Jo(v);if(!g.exists())return!1;const x=g.val(),S=xt(wt,`users/${t}/friends/${w}`);if((await Jo(S)).exists())return!1;const C=xt(wt,`users/${w}/friendRequests/${t}`);return await ga(C,{fromId:t,fromName:x.displayName,sentAt:Date.now()}),!0},acceptFriendRequest:async(w,v,g)=>{if(!t)return!1;const x=xt(wt,`users/${t}`),S=await Jo(x);if(!S.exists())return!1;const _=S.val(),C=xt(wt,`users/${t}/friends/${v}`),E=xt(wt,`users/${v}/friends/${t}`);await ga(C,{displayName:g,addedAt:Date.now()}),await ga(E,{displayName:_.displayName,addedAt:Date.now()});const N=xt(wt,`users/${t}/friendRequests/${w}`);return await sc(N),!0},declineFriendRequest:async w=>{if(!t)return!1;const v=xt(wt,`users/${t}/friendRequests/${w}`);return await sc(v),!0},removeFriend:async w=>{if(!t)return!1;const v=xt(wt,`users/${t}/friends/${w}`),g=xt(wt,`users/${w}/friends/${t}`);return await sc(v),await sc(g),!0},sendGameInvite:async(w,v,g,x)=>{if(!t)return!1;const S=xt(wt,`users/${t}`),_=await Jo(S);if(!_.exists())return!1;const C=_.val(),E=xt(wt,`users/${w}/gameInvites/${Date.now()}`);return await ga(E,{fromId:t,fromName:C.displayName,roomCode:v,gameType:g,gameName:x,sentAt:Date.now()}),!0},dismissGameInvite:async w=>{if(!t)return!1;const v=xt(wt,`users/${t}/gameInvites/${w}`);return await sc(v),!0}}},NZ=({onClose:t,currentRoomCode:e,currentGameType:n,currentGameName:r,onJoinRoom:s})=>{const{userId:i,logout:o}=Pw(),{friends:a,friendRequests:c,gameInvites:u,loading:d,searchUserById:h,sendFriendRequest:f,acceptFriendRequest:p,declineFriendRequest:b,removeFriend:y,sendGameInvite:w,dismissGameInvite:v}=fO(),[g,x]=m.useState(""),[S,_]=m.useState(null),[C,E]=m.useState(!1),[N,k]=m.useState("friends"),[T,j]=m.useState(null),I=async()=>{if(!g.trim())return;E(!0);const D=await h(g.trim());_(D),E(!1),D||Lt.error("")},q=async()=>{if(!S)return;await f(S.id)?(Lt.success("!"),_(null),x("")):Lt.error("")},P=async(D,ne,re)=>{await p(D,ne,re)&&Lt.success(` ${re} !`)},V=async D=>{await b(D),Lt.info("")},U=async(D,ne)=>{await y(D)&&Lt.info(` ${ne} `)},G=async(D,ne)=>{if(!e||!n||!r){Lt.error("");return}j(D);const re=await w(D,e,n,r);j(null),re?Lt.success(` ${ne} !`):Lt.error("")},A=async D=>{await v(D.id),s?(s(D.roomCode,D.gameType),t(),Lt.success(` ${D.roomCode}...`)):(navigator.clipboard.writeText(D.roomCode),Lt.success(` ${D.roomCode} !`))},L=async D=>{await v(D),Lt.info("")},R=()=>{i&&(navigator.clipboard.writeText(i),Lt.success(" ID !"))},W=async()=>{await o(),t(),Lt.info("")};return c.length+u.length,l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:t,children:l.jsxs(pe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-zinc-900 rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden border border-zinc-700",onClick:D=>D.stopPropagation(),children:[l.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:l.jsx(Bn,{size:20})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:""}),l.jsxs("p",{className:"text-xs text-white/70",children:["ID: ",i==null?void 0:i.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M,{size:"icon",variant:"ghost",onClick:R,className:"text-white hover:bg-white/20",children:l.jsx(bo,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:W,className:"text-white hover:bg-white/20",children:l.jsx(yp,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:t,className:"text-white hover:bg-white/20",children:l.jsx(co,{size:18})})]})]})}),l.jsxs("div",{className:"flex border-b border-zinc-700",children:[l.jsxs("button",{onClick:()=>k("friends"),className:`flex-1 py-3 text-sm font-medium transition-colors ${N==="friends"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(Bn,{size:16,className:"inline mr-1"}),""]}),l.jsxs("button",{onClick:()=>k("requests"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${N==="requests"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(z5,{size:16,className:"inline mr-1"}),"",c.length>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-red-500 rounded-full text-xs",children:c.length})]}),l.jsxs("button",{onClick:()=>k("invites"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${N==="invites"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(sS,{size:16,className:"inline mr-1"}),"",u.length>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-green-500 rounded-full text-xs",children:u.length})]}),l.jsx("button",{onClick:()=>k("search"),className:`flex-1 py-3 text-sm font-medium transition-colors ${N==="search"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:l.jsx(Jv,{size:16,className:"inline"})})]}),l.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:d?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(zt,{className:"animate-spin",size:24})}):l.jsxs(l.Fragment,{children:[N==="friends"&&l.jsxs("div",{className:"space-y-2",children:[e&&l.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-lg border border-green-500/30",children:[l.jsxs("p",{className:"text-sm text-green-400 flex items-center gap-2",children:[l.jsx(sS,{size:16}),":"," ",l.jsx("span",{className:"font-bold",children:e})]}),l.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:""})]}),a.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):a.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold",children:D.displayName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:D.displayName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",D.id.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[e&&l.jsx(M,{size:"icon",onClick:()=>G(D.id,D.displayName),disabled:T===D.id,className:"bg-green-600 hover:bg-green-700",children:T===D.id?l.jsx(zt,{className:"animate-spin",size:18}):l.jsx(X5,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>U(D.id,D.displayName),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(e3,{size:18})})]})]},D.id))]}),N==="requests"&&l.jsx("div",{className:"space-y-2",children:c.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):c.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold",children:D.fromName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:D.fromName}),l.jsx("p",{className:"text-xs text-zinc-500",children:""})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(M,{size:"icon",onClick:()=>P(D.id,D.fromId,D.fromName),className:"bg-green-600 hover:bg-green-700",children:l.jsx(il,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>V(D.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(co,{size:18})})]})]},D.id))}),N==="invites"&&l.jsx("div",{className:"space-y-2",children:u.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):u.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 bg-zinc-800 rounded-lg border border-green-500/30",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center font-bold",children:D.fromName.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:D.fromName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",D.gameName]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("div",{className:"flex-1 bg-zinc-900 px-3 py-2 rounded text-sm",children:[l.jsx("span",{className:"text-zinc-400",children:": "}),l.jsx("span",{className:"text-green-400 font-mono font-bold",children:D.roomCode})]}),l.jsxs(M,{size:"sm",onClick:()=>A(D),className:"bg-green-600 hover:bg-green-700",children:[l.jsx(il,{size:16,className:"mr-1"}),""]}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>L(D.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(co,{size:18})})]}),l.jsxs("p",{className:"text-xs text-zinc-600 mt-2",children:[""," ",Math.max(0,Math.ceil((10*60*1e3-(Date.now()-D.sentAt))/6e4))," ",""]})]},D.id))}),N==="search"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{value:g,onChange:D=>x(D.target.value),placeholder:" ID ...",className:"bg-zinc-800 border-zinc-700"}),l.jsx(M,{onClick:I,disabled:C,children:C?l.jsx(zt,{className:"animate-spin",size:18}):l.jsx(Jv,{size:18})})]}),S&&l.jsxs(pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-zinc-800 rounded-lg border border-cyan-500/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold text-lg",children:S.displayName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-lg",children:S.displayName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",S.id.slice(0,8),"..."]})]})]}),l.jsxs(M,{onClick:q,className:"bg-cyan-600 hover:bg-cyan-700",children:[l.jsx(QT,{size:18,className:"mr-2"}),""]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-zinc-800/50 rounded-lg",children:[l.jsx("p",{className:"text-sm text-zinc-400 text-center",children:" ID :"}),l.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[l.jsx("code",{className:"bg-zinc-900 px-3 py-2 rounded text-cyan-400 text-sm break-all",children:i}),l.jsx(M,{size:"icon",variant:"ghost",onClick:R,children:l.jsx(bo,{size:16})})]})]})]})]})})]})})},Fl=({currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})=>{const{user:s,loading:i,login:o}=Pw(),{gameInvites:a,friendRequests:c}=fO(),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=async()=>{f(!0);try{await o(),Lt.success("!")}catch{Lt.error("")}finally{f(!1)}},b=((a==null?void 0:a.length)||0)+((c==null?void 0:c.length)||0);return i?l.jsx(M,{variant:"ghost",size:"icon",disabled:!0,children:l.jsx(zt,{className:"animate-spin",size:20})}):l.jsxs(l.Fragment,{children:[s?l.jsxs(M,{onClick:()=>d(!0),className:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 relative",children:[l.jsx(Bn,{size:18,className:"mr-2"}),"",b>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center animate-pulse",children:b})]}):l.jsxs(M,{onClick:p,disabled:h,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[h?l.jsx(zt,{className:"animate-spin mr-2",size:18}):l.jsx(Q5,{size:18,className:"mr-2"}),""]}),l.jsx(qp,{children:u&&l.jsx(NZ,{onClose:()=>d(!1),currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})})]})};function pO({active:t,duration:e=3e3,onComplete:n}){const[r,s]=m.useState([]);return m.useEffect(()=>{if(!t){s([]);return}const i=["#FFD700","#FF69B4","#00CED1","#FF6347","#9370DB","#32CD32","#FF1493","#00BFFF"],o=[],a=50;for(let h=0;h<a;h++)o.push({id:h,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,scale:Math.random()*.5+.5,color:i[Math.floor(Math.random()*i.length)],velocityX:(Math.random()-.5)*8,velocityY:Math.random()*3+2,rotationSpeed:(Math.random()-.5)*10});s(o);const c=Date.now();let u;const d=()=>{if(Date.now()-c>e){s([]),n==null||n();return}s(f=>f.map(p=>({...p,x:p.x+p.velocityX,y:p.y+p.velocityY,rotation:p.rotation+p.rotationSpeed,velocityY:p.velocityY+.2}))),u=requestAnimationFrame(d)};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}},[t,e,n]),!t||r.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:r.map(i=>l.jsx("div",{className:"absolute w-3 h-3 rounded-sm",style:{left:i.x,top:i.y,backgroundColor:i.color,transform:`rotate(${i.rotation}deg) scale(${i.scale})`,transition:"none"}},i.id))})}function kZ({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onDrawCard:i,onReshuffle:o,onLeave:a}){var C,E,N,k,T,j;const{toast:c}=Ht(),[u,d]=m.useState(!1),[h,f]=m.useState(0),[p,b]=m.useState(0),y=m.useRef(null),{customRules:w}=dO(t.code),v=w,g=async()=>{const I=t.code;let q=!1;try{navigator.clipboard&&navigator.clipboard.writeText&&(await navigator.clipboard.writeText(I),q=!0)}catch{}if(!q)try{const P=document.createElement("textarea");P.value=I,P.style.position="fixed",P.style.left="-9999px",P.style.top="0",document.body.appendChild(P),P.focus(),P.select();const V=document.execCommand("copy");document.body.removeChild(P),q=V}catch{}c({title:q?" !":" ",description:I,duration:5e3})},x=()=>{if(t.cards_remaining===0)return;const I=Date.now();if(I-p<500&&h>0){const P=h+1;if(f(P),b(I),P>=3&&r){f(0),o(),c({title:" !",description:""});return}}else f(1),b(I),S()},S=()=>{t.cards_remaining!==0&&(d(!1),setTimeout(()=>{i(),setTimeout(()=>{d(!0),setTimeout(()=>{var I;(I=y.current)==null||I.scrollIntoView({behavior:"smooth",block:"center"})},300)},300)},200))},_=t.cards_remaining===0&&t.current_card!==null;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[l.jsx(pO,{active:_&&t.cards_remaining===0,duration:6e3}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l.jsx(M,{variant:"ghost",size:"icon",onClick:a,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(yp,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:" "}),l.jsxs("button",{onClick:g,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[l.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),l.jsx(bo,{className:"w-3 h-3"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fl,{currentRoomCode:t.code,currentGameType:"kingscup",currentGameName:B("kingsCup")}),r&&l.jsx(wZ,{roomCode:t.code,isHost:r}),l.jsx(EZ,{playerCount:e.length}),r&&t.game_started&&!_&&l.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{o(),c({title:" !",description:""})},className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(Jh,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r&&!t.game_started&&l.jsxs(M,{variant:"default",onClick:s,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[l.jsx(Fu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]})]})]}),l.jsx("div",{className:"mb-2 sm:mb-4",children:l.jsx(cO,{players:e,currentPlayerId:n??void 0})}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 sm:py-6 md:py-8 relative z-10",children:t.game_started?_?l.jsx("div",{className:"text-center px-2",children:l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-white/10",children:[l.jsx("div",{className:"text-5xl sm:text-6xl mb-3 sm:mb-4",children:""}),l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"!"}),l.jsx("p",{className:"text-white/60 mb-4 sm:mb-6 text-base sm:text-lg",children:" !"}),r&&l.jsxs(M,{variant:"default",size:"lg",onClick:o,className:"bg-white text-black hover:bg-white/90",children:[l.jsx(Jh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})]})}):l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center w-full px-2 sm:px-4",children:r?l.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[t.current_card?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(YE,{card:t.current_card,isFlipped:!0,showRule:!1,size:"large"}),l.jsx("div",{className:"mt-6 sm:mt-8 bg-black/60 backdrop-blur-md rounded-2xl px-6 py-4 sm:px-8 sm:py-6 border border-white/10 max-w-md",children:l.jsxs("div",{className:"flex items-center gap-4 sm:gap-5",children:[l.jsx("span",{className:"text-4xl sm:text-5xl md:text-6xl",children:((C=v[t.current_card.value])==null?void 0:C.emoji)||""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-amber-400 font-bold text-lg sm:text-xl md:text-2xl",children:(E=v[t.current_card.value])==null?void 0:E.title}),l.jsx("p",{className:"text-white/80 text-sm sm:text-base md:text-lg",children:(N=v[t.current_card.value])==null?void 0:N.description})]})]})})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-48 h-72 sm:w-56 sm:h-80 md:w-64 md:h-96 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20",children:l.jsx(g0,{})}),l.jsx("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:l.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center",children:["",l.jsx("br",{}),""]})})]}),l.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-full px-6 py-2 border border-white/10",children:[l.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-white",children:t.cards_remaining}),l.jsx("span",{className:"text-white/60 ml-2",children:""})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-8 md:gap-12",children:[t.current_card?l.jsx(YE,{card:t.current_card,isFlipped:u,showRule:!1}):l.jsx("div",{className:"w-32 h-48 sm:w-44 sm:h-64 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-xl border-2 border-dashed border-white/20",children:l.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center px-2",children:["",l.jsx("br",{}),""]})}),l.jsx(xZ,{cardsRemaining:t.cards_remaining,onDraw:x,disabled:t.cards_remaining===0,showCount:!0})]}),t.current_card&&u&&l.jsx("div",{ref:y,className:"mt-4 sm:mt-6 bg-black/60 backdrop-blur-md rounded-xl px-5 py-3 sm:px-6 sm:py-4 border border-white/10 max-w-sm",children:l.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[l.jsx("span",{className:"text-3xl sm:text-4xl",children:((k=v[t.current_card.value])==null?void 0:k.emoji)||""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-amber-400 font-bold text-sm sm:text-base",children:(T=v[t.current_card.value])==null?void 0:T.title}),l.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:(j=v[t.current_card.value])==null?void 0:j.description})]})]})})]})}):l.jsxs("div",{className:"text-center px-2",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[l.jsx(g0,{}),l.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?'  ""':" Host "})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),l.jsx("button",{onClick:g,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})})]})}function TZ({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const[i,o]=m.useState("menu"),[a,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(""),[p,b]=m.useState(!1),[y,w]=m.useState([]),v=m.useRef("");m.useEffect(()=>{(async()=>{const C=await rm();w(C)})()},[]),m.useEffect(()=>{const _=C=>{if(C.target instanceof HTMLInputElement||C.target instanceof HTMLTextAreaElement)return;const E=C.key.toLowerCase(),N=v.current+E;"adminhee444".startsWith(N)?(v.current=N,N==="adminhee444"&&n&&(v.current="",b(!0))):v.current="adminhee444".startsWith(E)?E:""};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[n]);const g=async()=>{a.trim()&&await t(a.trim())},x=async()=>{!a.trim()||!u.trim()||await e(u.trim(),a.trim())},S=async()=>{!h.trim()||!n||(await n(h.trim()),b(!1),f(""))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx(Eb,{names:y}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&l.jsx("div",{className:"absolute top-4 left-4 z-20",children:l.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(ja,{className:"w-5 h-5 rotate-180"})})}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:""}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:" Online"})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[i==="menu"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>o("create"),children:[l.jsx($u,{className:"w-5 h-5"}),""]}),l.jsx("p",{className:"text-white/50 text-xs text-center"})]}),l.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>o("join"),children:[l.jsx(Bn,{className:"w-5 h-5"}),""]}),n&&l.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[l.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>b(!0),disabled:r,children:[l.jsx(Xh,{className:"w-5 h-5"})," LIVE"]}),l.jsx("p",{className:"text-white/50 text-xs text-center",children:" "})]})]}),i==="create"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),l.jsx(be,{placeholder:"",value:a,onChange:_=>c(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:""}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:g,disabled:!a.trim()||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:["",l.jsx(ja,{className:"w-4 h-4"})]})})]})]}),i==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),l.jsx(be,{placeholder:" (6 )",value:u,onChange:_=>d(_.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),l.jsx(be,{placeholder:"",value:a,onChange:_=>c(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:""}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:x,disabled:!a.trim()||u.length!==6||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:["",l.jsx(ja,{className:"w-4 h-4"})]})})]})]})]}),l.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:" 2-8 "}),l.jsx(Wr,{open:p,onOpenChange:b,children:l.jsxs(yr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[l.jsxs(xr,{children:[l.jsx(wr,{className:"text-center text-white",children:" LIVE Mode"}),l.jsx(em,{className:"text-center text-white/60",children:""})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsx(be,{placeholder:"",value:h,onChange:_=>f(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:_=>{_.key==="Enter"&&h.trim()&&S()}}),l.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:S,disabled:!h.trim()||r,children:r?l.jsx(zt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Xh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function RZ({card:t,faceDown:e=!1}){return e?l.jsx("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md shadow-md overflow-hidden relative",children:l.jsx(sm,{})}):l.jsxs(pe.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.3},className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md bg-white border border-gray-200 shadow-md flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-xs sm:text-sm font-bold ${p2(t.suit)}`,children:t.value}),l.jsx("span",{className:"text-sm sm:text-base",children:f2(t.suit)})]})}function jZ({players:t,currentPlayerId:e,showCards:n=!1,currentTurnPlayerId:r,gamePhase:s}){return l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[l.jsx("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:l.jsxs("span",{className:"text-white",children:["  (",t.length,")"]})}),l.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:t.map(i=>{const o=i.id===r,a=i.cards&&i.cards.length===2?po(i.cards):{isPok:!1,pokValue:null},c=i.cards&&i.cards.length>0?ku(i.cards):null;return l.jsxs("div",{className:$("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0",i.is_dealer?"bg-amber-500/20 border-2 border-amber-500":o?"bg-green-500/20 border-2 border-green-500 animate-pulse":i.id===e?"bg-white/20 ring-2 ring-white/50":"bg-white/10 text-white"),children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:`/king-s-cup-party/${i.avatar||1}.jpg`,alt:i.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-white/40 shadow-lg"}),i.is_host&&l.jsx(Qh,{className:"w-4 h-4 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"}),i.is_dealer&&l.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 text-[10px] bg-amber-500 text-black px-1.5 rounded-full font-bold",children:""})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-white truncate max-w-[70px] sm:max-w-[80px] block",children:i.name}),s==="drawing"&&i.has_drawn&&l.jsx("span",{className:"text-[10px] text-green-400",children:" "}),o&&l.jsx("span",{className:"text-[10px] text-green-300",children:" "})]}),i.cards&&i.cards.length>0&&l.jsx("div",{className:"flex gap-1 mt-1",children:i.cards.map((u,d)=>l.jsx(RZ,{card:u,faceDown:!n},d))}),n&&i.cards&&i.cards.length>0&&l.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[l.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-400",children:i.points}),a.isPok&&a.pokValue!==null&&l.jsxs("span",{className:"text-[9px] sm:text-[10px] bg-green-500 text-white px-1.5 py-0.5 rounded-full animate-bounce",children:[" ",a.pokValue,"!"]}),c&&c.type!=="normal"&&!a.isPok&&l.jsx("span",{className:"text-[9px] sm:text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full",children:c.name})]}),i.result&&n&&l.jsx("span",{className:`text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full ${i.result==="player_win"?"bg-green-500 text-white":i.is_dealer?"bg-amber-500 text-black":"bg-red-500 text-white"}`,children:i.is_dealer?"":i.result==="player_win"?` ${i.multiplier&&i.multiplier>1?` x${i.multiplier}`:""}`:""})]},i.id)})})]})}var IZ="Label",mO=m.forwardRef((t,e)=>l.jsx(te.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));mO.displayName=IZ;var gO=mO;const PZ=vp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$t=m.forwardRef(({className:t,...e},n)=>l.jsx(gO,{ref:n,className:$(PZ(),t),...e}));$t.displayName=gO.displayName;const QE={pok9Multiplier:2,pok8Multiplier:2,tongMultiplier:5,samLeungMultiplier:3,straightMultiplier:3,flushMultiplier:3,dengMultiplier:2,pairMultiplier:2};function AZ({roomCode:t,isHost:e}){const{toast:n}=Ht(),[r,s]=m.useState(!1),[i,o]=m.useState(QE);m.useEffect(()=>{const d=localStorage.getItem(`pokdeng_rules_${t}`);d&&o(JSON.parse(d))},[t]);const a=()=>{localStorage.setItem(`pokdeng_rules_${t}`,JSON.stringify(i)),s(!1),n({title:" !",description:""})},c=()=>{o(QE),localStorage.removeItem(`pokdeng_rules_${t}`),n({title:" ",description:""})},u=(d,h)=>{o(f=>({...f,[d]:Math.max(1,Math.min(10,h))}))};return e?l.jsxs(Wr,{open:r,onOpenChange:s,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:l.jsx(Ex,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"max-w-md max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[l.jsx(xr,{children:l.jsx(wr,{className:"text-xl font-bold flex items-center gap-2",children:" "})}),l.jsx(Ll,{className:"h-[60vh] pr-4",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," 9"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pok9Multiplier,onChange:d=>u("pok9Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2  9 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," 8"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pok8Multiplier,onChange:d=>u("pok8Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2  8 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Three of a Kind)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.tongMultiplier,onChange:d=>u("tongMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 7-7-7)"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""}),""]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.samLeungMultiplier,onChange:d=>u("samLeungMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:"J-Q-K ( 3 )"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Straight)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.straightMultiplier,onChange:d=>u("straightMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 5-6-7)"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Flush)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.flushMultiplier,onChange:d=>u("flushMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Same Suit)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.dengMultiplier,onChange:d=>u("dengMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs($t,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Pair)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pairMultiplier,onChange:d=>u("pairMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]})]})}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[l.jsxs(M,{variant:"outline",onClick:c,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[l.jsx(Ia,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:a,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[l.jsx(YT,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}function OZ({card:t,faceDown:e=!1}){return e?l.jsx("div",{className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl shadow-xl overflow-hidden relative",children:l.jsx(sm,{})}):l.jsxs(pe.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.4},className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl bg-white border-2 border-gray-200 shadow-xl flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-2xl sm:text-3xl font-bold ${p2(t.suit)}`,children:t.value}),l.jsx("span",{className:"text-3xl sm:text-4xl",children:f2(t.suit)})]})}function DZ({room:t,players:e,currentPlayerId:n,isHost:r,isLiveMode:s=!1,onStartGame:i,onDrawCard:o,onStandCard:a,onDealerDraw:c,onDealerStand:u,onShowdown:d,onNextRound:h,onLeave:f,onSetDealer:p}){var A,L;const{toast:b}=Ht(),[y,w]=m.useState(!1),[v,g]=m.useState(!1),x=()=>{const R=t.code;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(R).then(()=>{b({title:" !",description:`: ${R}`,duration:3e3})}).catch(()=>{S(R)}):S(R)},S=R=>{const W=document.createElement("textarea");W.value=R,W.style.position="fixed",W.style.top="0",W.style.left="0",W.style.width="2em",W.style.height="2em",W.style.padding="0",W.style.border="none",W.style.outline="none",W.style.boxShadow="none",W.style.background="transparent",document.body.appendChild(W),W.focus(),W.select();try{document.execCommand("copy"),b({title:" !",description:`: ${R}`,duration:3e3})}catch{b({title:" ",description:`${R} ()`,duration:5e3})}document.body.removeChild(W)},_=e.find(R=>R.id===n),C=e.find(R=>R.is_dealer),E=e.filter(R=>!R.is_dealer).sort((R,W)=>R.player_order-W.player_order),N=t.game_phase==="drawing"?E[t.current_player_index]:null,k=(N==null?void 0:N.id)===n,T=t.game_phase==="showdown"&&C&&!C.has_drawn,j=_==null?void 0:_.is_dealer,I=e.every(R=>R.has_drawn),q=e.filter(R=>R.has_drawn).length,P=e.length,V=t.game_phase==="showdown"||t.game_phase==="ended",U=r&&s,G=m.useRef(!1);return m.useEffect(()=>{if(t.game_phase==="showdown"&&I&&!G.current){G.current=!0;const R=setTimeout(()=>{d()},1e3);return()=>clearTimeout(R)}(t.game_phase==="drawing"||t.game_phase==="waiting")&&(G.current=!1)},[t.game_phase,I,d]),l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l.jsx(M,{variant:"ghost",size:"icon",onClick:f,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(yp,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:[" "," ",U&&l.jsx("span",{className:"text-amber-400",children:" LIVE"})]}),l.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[l.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),l.jsx(bo,{className:"w-3 h-3"}),l.jsxs("div",{className:"flex items-center gap-1 ml-1 bg-green-500/20 border border-green-500/50 rounded-full px-1.5 py-0.5",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-[10px] text-green-300 font-medium",children:"LIVE"})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fl,{currentRoomCode:t.code,currentGameType:"pokdeng",currentGameName:B("pokDeng")}),(r||s&&!n)&&p&&l.jsxs(Wr,{open:v,onOpenChange:g,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-amber-400 hover:text-amber-300 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:l.jsx(Qh,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"bg-black/95 border-amber-500/50 text-white max-w-md",children:[l.jsx(xr,{children:l.jsx(wr,{className:"text-amber-400 text-xl",children:" "})}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:e.map(R=>l.jsx(M,{onClick:()=>{p(R.id),g(!1),b({title:" ",description:`${R.name} `})},variant:R.is_dealer?"default":"outline",className:`h-auto py-3 ${R.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black border-amber-400":"border-white/30 text-white hover:bg-white/10"}`,children:l.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-sm font-medium truncate max-w-full",children:R.name}),R.is_dealer&&l.jsx("span",{className:"text-xl",children:""})]})},R.id))})]})]}),(r||s&&!n)&&l.jsx(AZ,{roomCode:t.code,isHost:!0}),(r||s&&!n)&&t.game_started&&l.jsx(M,{variant:"ghost",size:"icon",onClick:h,className:"text-green-400 hover:text-green-300 hover:bg-green-400/10 w-8 h-8 sm:w-10 sm:h-10",title:" / ",children:l.jsx(Ia,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(r||s&&!n)&&!t.game_started&&l.jsxs(M,{variant:"default",onClick:i,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[l.jsx(Fu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]})]})]}),l.jsx("div",{className:"mb-2 sm:mb-4",children:U?l.jsx(jZ,{players:e.map(R=>({id:R.id,name:R.name,is_host:R.is_host,avatar:R.avatar,cards:R.cards,points:R.points,is_dealer:R.is_dealer,has_drawn:R.has_drawn,result:R.result??void 0,multiplier:R.multiplier})),currentPlayerId:n??void 0,showCards:V||t.game_started,currentTurnPlayerId:N==null?void 0:N.id,gamePhase:t.game_phase??void 0}):l.jsx(cO,{players:e.map(R=>({id:R.id,name:R.name,is_host:R.is_host,avatar:R.avatar})),currentPlayerId:n??void 0})}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-4 md:py-6 relative z-10 overflow-y-auto",children:t.game_started?U?l.jsxs("div",{className:"flex flex-col items-center justify-start w-full h-full overflow-y-auto",children:[l.jsx("div",{className:"text-center mb-4 sm:mb-6",children:l.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-6 sm:px-8 py-2 sm:py-3 rounded-full text-lg sm:text-xl md:text-2xl font-medium",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&` : ${(N==null?void 0:N.name)||"..."}`,t.game_phase==="showdown"&&(T?" ":" !"),t.game_phase==="ended"&&" "]})}),l.jsxs("div",{className:"text-white text-sm mb-4 bg-black/50 p-3 rounded",children:[l.jsxs("div",{children:[": ",e.length," "]}),l.jsxs("div",{children:[": ",(C==null?void 0:C.name)||""]}),l.jsxs("div",{children:[": ",q,"/",P]}),e.map(R=>{var W;return l.jsxs("div",{className:"text-xs",children:[R.name,": cards=",((W=R.cards)==null?void 0:W.length)||0," "]},R.id)})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-6xl px-4",children:e.length===0?l.jsx("div",{className:"col-span-full text-white text-center text-xl bg-red-500/20 p-8 rounded",children:"  - players.length = 0"}):e.map(R=>{var W;return l.jsxs("div",{className:`p-6 rounded-2xl border-2 ${R.is_dealer?"bg-amber-500/20 border-amber-500":"bg-white/5 border-white/20"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-white font-bold text-lg",children:[R.is_dealer?" ":"",R.name]}),R.is_dealer&&l.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]}),l.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[R.points||0," "]})]})]}),l.jsx("div",{className:"flex gap-2 justify-center mb-4 min-h-[100px]",children:R.cards&&R.cards.length>0?R.cards.map((D,ne)=>l.jsxs("div",{className:"w-16 h-24 rounded-lg bg-white border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-xl font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-2xl",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},ne)):l.jsxs("div",{className:"text-white bg-red-500/30 p-4 rounded text-sm",children:[" player.cards = ",JSON.stringify(R.cards),l.jsx("br",{}),"length = ",((W=R.cards)==null?void 0:W.length)||0]})}),l.jsx("div",{className:"text-center",children:R.result&&t.game_phase==="ended"?l.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${R.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[R.result==="player_win"?" !":" ",R.multiplier&&R.multiplier>1&&` x${R.multiplier}`]}):R.has_drawn?l.jsx("span",{className:"text-sm text-green-300",children:" "}):l.jsx("span",{className:"text-sm text-yellow-300 animate-pulse",children:" ..."})})]},R.id)})}),l.jsxs("div",{className:"flex flex-col items-center gap-3 py-4 sm:py-6 mt-4",children:[(r||s&&!n)&&p&&t.game_phase!=="ended"&&l.jsxs(M,{onClick:()=>g(!0),variant:"outline",size:"sm",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 hover:text-amber-300",children:[l.jsx(Qh,{className:"w-4 h-4 mr-2"}),""]}),t.game_phase==="showdown"&&l.jsx("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-xl px-6 py-4 mb-2",children:l.jsxs("p",{className:"text-blue-300 text-center text-sm",children:[" : ",q,"/",P," ",l.jsx("br",{}),l.jsx("span",{className:"text-xs text-blue-200/60",children:e.map(R=>`${R.name}: ${R.has_drawn?"":""}`).join(" | ")})]})}),T&&l.jsx("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl px-6 py-4",children:l.jsxs("p",{className:"text-amber-400 font-medium text-center text-lg",children:[" ",l.jsx("br",{}),l.jsx("span",{className:"text-sm text-amber-300/70",children:""})]})}),t.game_phase==="showdown"&&l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsxs(M,{onClick:d,disabled:!I,size:"lg",className:`font-bold text-lg px-8 py-6 ${I?"bg-purple-500 hover:bg-purple-600 text-white animate-pulse":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[l.jsx(Kv,{className:"w-6 h-6 mr-2"}),I?"":` (${q}/${P})`]}),!I&&q>=P-1&&l.jsx(M,{onClick:d,variant:"outline",size:"sm",className:"text-xs text-orange-400 border-orange-500/50 hover:bg-orange-500/20",children:""})]}),t.game_phase==="ended"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-6 mb-6",children:[l.jsx("h2",{className:"text-center text-2xl sm:text-3xl font-bold text-amber-400 mb-6",children:" "}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-white/20",children:[l.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""})]})}),l.jsx("tbody",{children:e.sort((R,W)=>R.result==="player_win"&&W.result!=="player_win"?-1:R.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(R.points||0)).map((R,W)=>l.jsxs("tr",{className:`border-b border-white/10 transition-all hover:bg-white/5 ${R.result==="player_win"?"bg-green-500/10":"bg-red-500/5"}`,children:[l.jsx("td",{className:"py-4 px-4 text-center",children:l.jsx("span",{className:`text-2xl font-bold ${W===0&&R.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&R.result==="player_win"?"":W+1})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/30"}),l.jsx("div",{children:l.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2",children:[R.name,R.is_dealer&&l.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]})})]})}),l.jsxs("td",{className:"py-4 px-4 text-center",children:[l.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-amber-400",children:R.points||0}),l.jsx("span",{className:"text-white/50 text-sm ml-1",children:""})]}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"flex gap-1 justify-center",children:R.cards&&R.cards.length>0?R.cards.map((D,ne)=>l.jsxs("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded bg-white border border-gray-200 flex flex-col items-center justify-center text-xs",children:[l.jsx("span",{className:`font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-sm",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},ne)):l.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),l.jsx("td",{className:"py-4 px-4 text-center",children:R.result==="player_win"?l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-green-400 font-bold text-sm sm:text-base",children:"!"}),R.multiplier&&R.multiplier>1&&l.jsxs("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-0.5 rounded",children:["x",R.multiplier]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-red-400 font-bold text-sm sm:text-base",children:""})]})})]},R.id))})]})}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/20 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-green-400 font-bold text-lg",children:e.filter(R=>R.result==="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-red-400 font-bold text-lg",children:e.filter(R=>R.result!=="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-amber-400 font-bold text-lg",children:Math.max(...e.map(R=>R.points||0))})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-white font-bold text-lg",children:e.length})]})]})]}),l.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold text-lg px-8",children:[l.jsx(Ia,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="drawing"&&l.jsx("div",{className:"mt-4 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:l.jsxs("p",{className:"text-white/50 text-sm sm:text-base text-center",children:["  LIVE ",l.jsx("br",{}),""]})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[l.jsx("div",{className:"text-center mb-4",children:l.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-4 py-1 rounded-full text-sm",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&(k?" !":j?" ...":` : ${(N==null?void 0:N.name)||"..."}`),t.game_phase==="showdown"&&(T&&j?" !":T?" ":" "),t.game_phase==="ended"&&" "]})}),_&&l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-4 sm:p-6 border border-white/10 mb-4 w-full max-w-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[_.avatar&&l.jsx("img",{src:`/king-s-cup-party/${_.avatar}.jpg`,alt:_.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-white font-bold text-lg",children:_.is_dealer?"  ()":" "})]}),_.cards.length>0&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-amber-400",children:_.points}),_.cards.length===2&&po(_.cards).isPok&&l.jsxs("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-bounce",children:[" ",po(_.cards).pokValue,"!"]}),_.cards.length>0&&((A=ku(_.cards))==null?void 0:A.type)!=="normal"&&!po(_.cards).isPok&&l.jsx("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:(L=ku(_.cards))==null?void 0:L.name})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[_.cards.map((R,W)=>l.jsx(OZ,{card:R},W)),_.cards.length===0&&l.jsx("div",{className:"w-20 h-28 rounded-xl border-2 border-dashed border-white/30 flex items-center justify-center",children:l.jsx("span",{className:"text-white/30",children:"-"})})]}),_.result&&V&&!_.is_dealer&&l.jsx("div",{className:"text-center",children:l.jsxs("span",{className:`text-lg font-bold px-4 py-2 rounded-full ${_.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[_.result==="player_win"?" !":" ",_.multiplier>1&&` x${_.multiplier}`]})})]}),!j&&k&&!(_!=null&&_.has_drawn)&&_.cards.length<3&&t.game_phase==="drawing"&&l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsxs(M,{onClick:o,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white text-lg px-8 py-6",children:[l.jsx(iS,{className:"w-5 h-5 mr-2"}),""]}),l.jsxs(M,{onClick:a,variant:"outline",size:"lg",className:"border-white/30 text-white hover:bg-white/10 text-lg px-8 py-6",children:[l.jsx(oS,{className:"w-5 h-5 mr-2"}),""]})]}),j&&T&&!(_!=null&&_.has_drawn)&&l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsx("p",{className:"text-amber-400 font-medium text-center mb-2",children:" "}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[_.cards.length<3&&l.jsxs(M,{onClick:c,size:"lg",className:"bg-amber-500 hover:bg-amber-600 text-black text-lg px-8 py-6 font-bold",children:[l.jsx(iS,{className:"w-5 h-5 mr-2"}),""]}),l.jsxs(M,{onClick:u,variant:"outline",size:"lg",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 text-lg px-8 py-6",children:[l.jsx(oS,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="ended"&&l.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-4 sm:p-6 mb-4 overflow-y-auto max-h-[60vh]",children:[l.jsx("h2",{className:"text-center text-xl sm:text-2xl font-bold text-amber-400 mb-4",children:" "}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-white text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-white/20",children:[l.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:"#"}),l.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""})]})}),l.jsx("tbody",{children:e.sort((R,W)=>R.result==="player_win"&&W.result!=="player_win"?-1:R.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(R.points||0)).map((R,W)=>l.jsxs("tr",{className:`border-b border-white/10 ${R.result==="player_win"?"bg-green-500/10":"bg-red-500/5"} ${R.id===n?"ring-2 ring-amber-500":""}`,children:[l.jsx("td",{className:"py-3 px-2 text-center",children:l.jsx("span",{className:`text-lg font-bold ${W===0&&R.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&R.result==="player_win"?"":W+1})}),l.jsx("td",{className:"py-3 px-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"font-bold text-sm",children:[R.name,R.id===n&&l.jsx("span",{className:"text-amber-400 ml-1",children:"()"})]}),R.is_dealer&&l.jsx("span",{className:"text-[10px] bg-amber-500 text-black px-1 rounded w-fit",children:""})]})]})}),l.jsx("td",{className:"py-3 px-2 text-center",children:l.jsx("span",{className:"text-xl font-bold text-amber-400",children:R.points||0})}),l.jsx("td",{className:"py-3 px-2",children:l.jsx("div",{className:"flex gap-1 justify-center",children:R.cards&&R.cards.length>0?R.cards.map((D,ne)=>l.jsxs("div",{className:"w-6 h-9 rounded bg-white border border-gray-200 flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-[10px] font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-xs",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},ne)):l.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),l.jsx("td",{className:"py-3 px-2 text-center",children:R.result==="player_win"?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"text-green-400 font-bold text-xs",children:""}),R.multiplier&&R.multiplier>1&&l.jsxs("span",{className:"text-[10px] text-green-300 bg-green-500/20 px-1 rounded",children:["x",R.multiplier]})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"text-red-400 font-bold text-xs",children:""})]})})]},R.id))})]})}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 grid grid-cols-4 gap-2",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-green-400 font-bold text-sm",children:e.filter(R=>R.result==="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-red-400 font-bold text-sm",children:e.filter(R=>R.result!=="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-amber-400 font-bold text-sm",children:Math.max(...e.map(R=>R.points||0))})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-white font-bold text-sm",children:e.length})]})]})]}),(r||s&&!n)&&!s&&l.jsxs("div",{className:"flex justify-center gap-3 py-4",children:[t.game_phase==="showdown"&&I&&l.jsxs(M,{onClick:d,size:"lg",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-6 animate-pulse",children:[l.jsx(Kv,{className:"w-5 h-5 mr-2"}),""]}),t.game_phase==="ended"&&l.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-6",children:[l.jsx(Ia,{className:"w-5 h-5 mr-2"}),""]})]}),!k&&!T&&t.game_phase==="drawing"&&(_==null?void 0:_.has_drawn)&&l.jsx("div",{className:"text-center text-white/50",children:l.jsx("p",{children:"  ..."})}),!k&&!T&&t.game_phase==="drawing"&&!(_!=null&&_.has_drawn)&&!j&&l.jsx("div",{className:"text-center text-white/50",children:l.jsx("p",{children:"..."})})]}):l.jsxs("div",{className:"text-center px-2 w-full max-w-2xl",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[l.jsx(g0,{}),l.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?s?"  LIVE -  ":'  ""':" Host "})]}),(r||s&&!n)&&p&&e.length>=1&&l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white text-sm sm:text-base mb-3 font-medium",children:" "}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:e.map(R=>l.jsxs(M,{onClick:()=>p(R.id),variant:R.is_dealer?"default":"outline",className:`${R.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black":"border-white/30 text-white hover:bg-white/10"}`,children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-6 h-6 rounded-full object-cover mr-2"}),l.jsx("span",{className:"truncate",children:R.name}),R.is_dealer&&l.jsx("span",{className:"ml-1",children:""})]},R.id))})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),l.jsx("button",{onClick:x,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})}),l.jsxs("div",{className:"relative z-10 mt-auto",children:[l.jsx(M,{variant:"ghost",size:"sm",onClick:()=>w(!y),className:"w-full text-white/50 hover:text-white/80",children:y?" ":" "}),y&&l.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-xl p-3 mt-2 border border-white/10",children:l.jsxs("ul",{className:"text-white/60 text-xs space-y-1",children:[l.jsx("li",{children:"  8/9 =  ( 2 )"}),l.jsx("li",{children:"  =  5 "}),l.jsx("li",{children:" // =  3 "}),l.jsx("li",{children:"  (/) =  2 "}),l.jsx("li",{children:"  = "})]})})]})]})}const Hs=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Hs.displayName="Card";const MZ=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));MZ.displayName="CardHeader";const LZ=m.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));LZ.displayName="CardTitle";const FZ=m.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));FZ.displayName="CardDescription";const qs=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));qs.displayName="CardContent";const $Z=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));$Z.displayName="CardFooter";var Jg="rovingFocusGroup.onEntryFocus",UZ={bubbles:!1,cancelable:!0},rd="RovingFocusGroup",[v0,vO,VZ]=fp(rd),[BZ,im]=gn(rd,[VZ]),[zZ,WZ]=BZ(rd),yO=m.forwardRef((t,e)=>l.jsx(v0.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(v0.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(HZ,{...t,ref:e})})}));yO.displayName=rd;var HZ=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=m.useRef(null),p=me(e,f),b=Ml(i),[y,w]=pr({prop:o,defaultProp:a??null,onChange:c,caller:rd}),[v,g]=m.useState(!1),x=pt(u),S=vO(n),_=m.useRef(!1),[C,E]=m.useState(0);return m.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Jg,x),()=>N.removeEventListener(Jg,x)},[x]),l.jsx(zZ,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(N=>w(N),[w]),onItemShiftTab:m.useCallback(()=>g(!0),[]),onFocusableItemAdd:m.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>E(N=>N-1),[]),children:l.jsx(te.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:X(t.onMouseDown,()=>{_.current=!0}),onFocus:X(t.onFocus,N=>{const k=!_.current;if(N.target===N.currentTarget&&k&&!v){const T=new CustomEvent(Jg,UZ);if(N.currentTarget.dispatchEvent(T),!T.defaultPrevented){const j=S().filter(U=>U.focusable),I=j.find(U=>U.active),q=j.find(U=>U.id===y),V=[I,q,...j].filter(Boolean).map(U=>U.ref.current);bO(V,d)}}_.current=!1}),onBlur:X(t.onBlur,()=>g(!1))})})}),xO="RovingFocusGroupItem",wO=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,c=Dr(),u=i||c,d=WZ(xO,n),h=d.currentTabStopId===u,f=vO(n),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:y}=d;return m.useEffect(()=>{if(r)return p(),()=>b()},[r,p,b]),l.jsx(v0.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(te.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:X(t.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:X(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:X(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=KZ(w,d.orientation,d.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=f().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const S=x.indexOf(w.currentTarget);x=d.loop?YZ(x,S+1):x.slice(S+1)}setTimeout(()=>bO(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});wO.displayName=xO;var qZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KZ(t,e,n){const r=GZ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qZ[r]}function bO(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function YZ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var _O=yO,SO=wO,om="Tabs",[QZ,zte]=gn(om,[im]),CO=im(),[JZ,Nb]=QZ(om),EO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=t,d=Ml(a),[h,f]=pr({prop:r,onChange:s,defaultProp:i??"",caller:om});return l.jsx(JZ,{scope:n,baseId:Dr(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:l.jsx(te.div,{dir:d,"data-orientation":o,...u,ref:e})})});EO.displayName=om;var NO="TabsList",kO=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Nb(NO,n),o=CO(n);return l.jsx(_O,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(te.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});kO.displayName=NO;var TO="TabsTrigger",RO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=Nb(TO,n),a=CO(n),c=PO(o.baseId,r),u=AO(o.baseId,r),d=r===o.value;return l.jsx(SO,{asChild:!0,...a,focusable:!s,active:d,children:l.jsx(te.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:X(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:X(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:X(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});RO.displayName=TO;var jO="TabsContent",IO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=Nb(jO,n),c=PO(a.baseId,r),u=AO(a.baseId,r),d=r===a.value,h=m.useRef(d);return m.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),l.jsx(In,{present:s||d,children:({present:f})=>l.jsx(te.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});IO.displayName=jO;function PO(t,e){return`${t}-trigger-${e}`}function AO(t,e){return`${t}-content-${e}`}var XZ=EO,OO=kO,DO=RO,MO=IO;const ZZ=XZ,LO=m.forwardRef(({className:t,...e},n)=>l.jsx(OO,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));LO.displayName=OO.displayName;const y0=m.forwardRef(({className:t,...e},n)=>l.jsx(DO,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));y0.displayName=DO.displayName;const x0=m.forwardRef(({className:t,...e},n)=>l.jsx(MO,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));x0.displayName=MO.displayName;var am="Collapsible",[eee,FO]=gn(am),[tee,kb]=eee(am),$O=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[c,u]=pr({prop:r,defaultProp:s??!1,onChange:o,caller:am});return l.jsx(tee,{scope:n,disabled:i,contentId:Dr(),open:c,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),children:l.jsx(te.div,{"data-state":Rb(c),"data-disabled":i?"":void 0,...a,ref:e})})});$O.displayName=am;var UO="CollapsibleTrigger",VO=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=kb(UO,n);return l.jsx(te.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Rb(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:X(t.onClick,s.onOpenToggle)})});VO.displayName=UO;var Tb="CollapsibleContent",BO=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=kb(Tb,t.__scopeCollapsible);return l.jsx(In,{present:n||s.open,children:({present:i})=>l.jsx(nee,{...r,ref:e,present:i})})});BO.displayName=Tb;var nee=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=kb(Tb,n),[a,c]=m.useState(r),u=m.useRef(null),d=me(e,u),h=m.useRef(0),f=h.current,p=m.useRef(0),b=p.current,y=o.open||a,w=m.useRef(y),v=m.useRef(void 0);return m.useEffect(()=>{const g=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(g)},[]),yt(()=>{const g=u.current;if(g){v.current=v.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const x=g.getBoundingClientRect();h.current=x.height,p.current=x.width,w.current||(g.style.transitionDuration=v.current.transitionDuration,g.style.animationName=v.current.animationName),c(r)}},[o.open,r]),l.jsx(te.div,{"data-state":Rb(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:y&&s})});function Rb(t){return t?"open":"closed"}var ree=$O,see=VO,iee=BO,br="Accordion",oee=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[jb,aee,lee]=fp(br),[lm,Wte]=gn(br,[lee,FO]),Ib=FO(),zO=z.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return l.jsx(jb.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?l.jsx(hee,{...i,ref:e}):l.jsx(dee,{...s,ref:e})})});zO.displayName=br;var[WO,cee]=lm(br),[HO,uee]=lm(br,{collapsible:!1}),dee=z.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[a,c]=pr({prop:n,defaultProp:r??"",onChange:s,caller:br});return l.jsx(WO,{scope:t.__scopeAccordion,value:z.useMemo(()=>a?[a]:[],[a]),onItemOpen:c,onItemClose:z.useCallback(()=>i&&c(""),[i,c]),children:l.jsx(HO,{scope:t.__scopeAccordion,collapsible:i,children:l.jsx(qO,{...o,ref:e})})})}),hee=z.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o,a]=pr({prop:n,defaultProp:r??[],onChange:s,caller:br}),c=z.useCallback(d=>a((h=[])=>[...h,d]),[a]),u=z.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return l.jsx(WO,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:l.jsx(HO,{scope:t.__scopeAccordion,collapsible:!0,children:l.jsx(qO,{...i,ref:e})})})}),[fee,cm]=lm(br),qO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,a=z.useRef(null),c=me(a,e),u=aee(n),h=Ml(s)==="ltr",f=X(t.onKeyDown,p=>{var N;if(!oee.includes(p.key))return;const b=p.target,y=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),w=y.findIndex(k=>k.ref.current===b),v=y.length;if(w===-1)return;p.preventDefault();let g=w;const x=0,S=v-1,_=()=>{g=w+1,g>S&&(g=x)},C=()=>{g=w-1,g<x&&(g=S)};switch(p.key){case"Home":g=x;break;case"End":g=S;break;case"ArrowRight":i==="horizontal"&&(h?_():C());break;case"ArrowDown":i==="vertical"&&_();break;case"ArrowLeft":i==="horizontal"&&(h?C():_());break;case"ArrowUp":i==="vertical"&&C();break}const E=g%v;(N=y[E].ref.current)==null||N.focus()});return l.jsx(fee,{scope:n,disabled:r,direction:s,orientation:i,children:l.jsx(jb.Slot,{scope:n,children:l.jsx(te.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:f})})})}),Yf="AccordionItem",[pee,Pb]=lm(Yf),GO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=cm(Yf,n),o=cee(Yf,n),a=Ib(n),c=Dr(),u=r&&o.value.includes(r)||!1,d=i.disabled||t.disabled;return l.jsx(pee,{scope:n,open:u,disabled:d,triggerId:c,children:l.jsx(ree,{"data-orientation":i.orientation,"data-state":ZO(u),...a,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});GO.displayName=Yf;var KO="AccordionHeader",YO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(br,n),i=Pb(KO,n);return l.jsx(te.h3,{"data-orientation":s.orientation,"data-state":ZO(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});YO.displayName=KO;var w0="AccordionTrigger",QO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(br,n),i=Pb(w0,n),o=uee(w0,n),a=Ib(n);return l.jsx(jb.ItemSlot,{scope:n,children:l.jsx(see,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...a,...r,ref:e})})});QO.displayName=w0;var JO="AccordionContent",XO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(br,n),i=Pb(JO,n),o=Ib(n);return l.jsx(iee,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});XO.displayName=JO;function ZO(t){return t?"open":"closed"}var mee=zO,gee=GO,vee=YO,eD=QO,tD=XO;const yee=mee,nD=m.forwardRef(({className:t,...e},n)=>l.jsx(gee,{ref:n,className:$("border-b",t),...e}));nD.displayName="AccordionItem";const rD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsx(vee,{className:"flex",children:l.jsxs(eD,{ref:r,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,l.jsx(Cx,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));rD.displayName=eD.displayName;const sD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsx(tD,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:l.jsx("div",{className:$("pb-4 pt-0",t),children:e})}));sD.displayName=tD.displayName;function xee({vocabularies:t,categories:e,onAdd:n,onUpdate:r,onDelete:s}){const[i,o]=m.useState(!1),[a,c]=m.useState(null),[u,d]=m.useState(""),[h,f]=m.useState(!1),{toast:p}=Ht(),[b,y]=m.useState(""),[w,v]=m.useState(""),[g,x]=m.useState(""),S=m.useMemo(()=>{const k=t.filter(j=>{if(!u)return!0;const I=u.toLowerCase();return j.category.toLowerCase().includes(I)||j.word_civilian.toLowerCase().includes(I)||j.word_undercover.toLowerCase().includes(I)}),T={};return k.forEach(j=>{T[j.category]||(T[j.category]=[]),T[j.category].push(j)}),Object.entries(T).sort(([j],[I])=>j.localeCompare(I))},[t,u]),_=()=>{c(null),y(""),v(""),x(""),o(!0)},C=k=>{c(k),y(k.category),v(k.word_civilian),x(k.word_undercover),o(!0)},E=()=>{!b||!w||!g||(a?r({...a,category:b,word_civilian:w,word_undercover:g}):n({category:b,word_civilian:w,word_undercover:g}),o(!1))},N=async()=>{if(!b.trim()){p({title:"",description:" AI ",variant:"destructive"});return}f(!0);try{const k=await _Z(b,3);k.forEach(T=>{n(T)}),p({title:" !",description:` ${k.length}  "${b}"`}),o(!1),y(""),v(""),x("")}catch(k){p({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{f(!1)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rS,{className:"w-5 h-5 text-purple-400"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:B("vocabularyManager")}),l.jsxs(Tu,{variant:"secondary",className:"bg-purple-500/20",children:[t.length," ",B("words")]})]}),l.jsxs(Wr,{open:i,onOpenChange:o,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{onClick:_,size:"sm",className:"bg-purple-500 hover:bg-purple-600",children:[l.jsx($u,{className:"w-4 h-4 mr-1"}),B("addWord")]})}),l.jsxs(yr,{className:"bg-gray-900 text-white border-white/20",children:[l.jsx(xr,{children:l.jsx(wr,{children:B(a?"editVocabulary":"addVocabulary")})}),l.jsxs("div",{className:"space-y-4 mt-4",children:[l.jsxs("div",{children:[l.jsx($t,{htmlFor:"category",children:B("category")}),l.jsx(be,{id:"category",value:b,onChange:k=>y(k.target.value),placeholder:B("categoryPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx($t,{htmlFor:"civilian",children:B("civilianWord")}),l.jsx(be,{id:"civilian",value:w,onChange:k=>v(k.target.value),placeholder:B("civilianPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx($t,{htmlFor:"undercover",children:B("undercoverWord")}),l.jsx(be,{id:"undercover",value:g,onChange:k=>x(k.target.value),placeholder:B("undercoverPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),!a&&l.jsx(M,{onClick:N,disabled:!b.trim()||h,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",variant:"default",children:h?l.jsxs(l.Fragment,{children:[l.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"})," AI..."]}):l.jsxs(l.Fragment,{children:[l.jsx(fa,{className:"w-4 h-4 mr-2"}),"  AI (3 )"]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("span",{className:"w-full border-t border-white/10"})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"bg-gray-900 px-2 text-white/40",children:a?"":""})})]}),l.jsx(M,{onClick:E,disabled:!b||!w||!g,className:"w-full bg-purple-500 hover:bg-purple-600",children:B(a?"save":"add")})]})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Jv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),l.jsx(be,{type:"text",placeholder:B("searchVocabulary"),value:u,onChange:k=>d(k.target.value),className:"bg-black/30 border-white/20 text-white pl-10"})]}),l.jsx(yee,{type:"multiple",className:"space-y-2",children:S.map(([k,T])=>l.jsxs(nD,{value:k,className:"bg-black/40 border-white/10 rounded-lg overflow-hidden",children:[l.jsx(rD,{className:"px-4 hover:bg-white/5 hover:no-underline",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-white",children:k}),l.jsx(Tu,{variant:"secondary",className:"bg-purple-500/20",children:T.length})]})}),l.jsx(sD,{className:"px-4 pb-4",children:l.jsx("div",{className:"space-y-2 mt-2",children:T.map(j=>l.jsx(Hs,{className:"bg-black/40 border-white/10",children:l.jsx(qs,{className:"p-3",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("civilian")}),l.jsx("span",{className:"text-green-400 font-medium",children:j.word_civilian})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("undercover")}),l.jsx("span",{className:"text-red-400 font-medium",children:j.word_undercover})]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(M,{size:"sm",variant:"ghost",onClick:()=>C(j),disabled:j.id<1e3,className:"h-8 w-8 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:j.id<1e3?B("cannotEditDefault"):B("edit"),children:l.jsx(Qv,{className:"w-4 h-4"})}),l.jsx(M,{size:"sm",variant:"ghost",onClick:()=>s(j.id),disabled:j.id<1e3,className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:j.id<1e3?B("cannotDeleteDefault"):B("delete"),children:l.jsx(eu,{className:"w-4 h-4"})})]})]})})},j.id))})})]},k))}),S.length===0&&l.jsxs("div",{className:"text-center py-12 text-white/40",children:[l.jsx(rS,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),l.jsx("p",{children:B(u?"noVocabularyFound":"noVocabularyYet")})]})]})}function wee({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState(""),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(Yd()),[f,p]=m.useState(!1),{toast:b}=Ht(),y=S=>{PJ(S),h(Yd())},w=S=>{AJ(S),h(Yd())},v=S=>{OJ(S),h(Yd())},g=()=>{const S=Kf(s);if(!S.isValid){b({title:B("error"),description:S.error||B("invalidName"),variant:"destructive"});return}t(s.trim())},x=()=>{const S=Kf(o);if(!S.isValid){b({title:B("error"),description:S.error||B("invalidName"),variant:"destructive"});return}c.trim()&&e(c.trim().toUpperCase(),o.trim())};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),l.jsxs(M,{variant:"ghost",onClick:n,className:"absolute top-4 left-4 text-white/70 hover:text-white z-20",children:[l.jsx(wl,{className:"w-5 h-5 mr-2"}),B("back")]}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:B("undercoverTitle")}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("undercoverSubtitle")})]}),l.jsxs(Wr,{open:f,onOpenChange:p,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",className:"absolute top-4 right-4 text-white/70 hover:text-white z-20 border-white/20",children:[l.jsx(Ex,{className:"w-5 h-5 mr-2"}),B("manageWords")]})}),l.jsxs(yr,{className:"bg-gray-900 text-white border-white/20 max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(xr,{children:l.jsx(wr,{children:B("vocabularyManager")})}),l.jsx(xee,{vocabularies:d,categories:m2(),onAdd:y,onUpdate:w,onDelete:v})]})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10 w-full max-w-md relative z-10",children:l.jsx(qs,{className:"p-4 sm:p-6",children:l.jsxs(ZZ,{defaultValue:"create",className:"w-full",children:[l.jsxs(LO,{className:"grid w-full grid-cols-2 bg-black/40",children:[l.jsxs(y0,{value:"create",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[l.jsx(Bn,{className:"w-4 h-4 mr-2"}),B("createRoom")]}),l.jsxs(y0,{value:"join",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[l.jsx(QT,{className:"w-4 h-4 mr-2"}),B("joinRoom")]})]}),l.jsxs(x0,{value:"create",className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),l.jsx(be,{type:"text",placeholder:B("enterName"),value:s,onChange:S=>i(S.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),l.jsx(M,{onClick:g,disabled:!s.trim()||r,className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:B(r?"creating":"createNewRoom")})]}),l.jsxs(x0,{value:"join",className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("roomCode")}),l.jsx(be,{type:"text",placeholder:B("enterCode"),value:c,onChange:S=>u(S.target.value.toUpperCase()),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40 font-mono text-center text-xl tracking-widest",maxLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),l.jsx(be,{type:"text",placeholder:B("enterName"),value:o,onChange:S=>a(S.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),l.jsx(M,{onClick:x,disabled:!o.trim()||c.length!==6||r,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:B(r?"joining":"joinRoomBtn")})]})]})})})]})}function Ab(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bee=[" ","Enter","ArrowUp","ArrowDown"],_ee=[" ","Enter"],jo="Select",[um,dm,See]=fp(jo),[$l,Hte]=gn(jo,[See,_p]),hm=_p(),[Cee,Ii]=$l(jo),[Eee,Nee]=$l(jo),iD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:b}=t,y=hm(e),[w,v]=m.useState(null),[g,x]=m.useState(null),[S,_]=m.useState(!1),C=Ml(u),[E,N]=pr({prop:r,defaultProp:s??!1,onChange:i,caller:jo}),[k,T]=pr({prop:o,defaultProp:a,onChange:c,caller:jo}),j=m.useRef(null),I=w?b||!!w.closest("form"):!0,[q,P]=m.useState(new Set),V=Array.from(q).map(U=>U.props.value).join(";");return l.jsx(L$,{...y,children:l.jsxs(Cee,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:g,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:Dr(),value:k,onValueChange:T,open:E,onOpenChange:N,dir:C,triggerPointerDownPosRef:j,disabled:f,children:[l.jsx(um.Provider,{scope:e,children:l.jsx(Eee,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(U=>{P(G=>new Set(G).add(U))},[]),onNativeOptionRemove:m.useCallback(U=>{P(G=>{const A=new Set(G);return A.delete(U),A})},[]),children:n})}),I?l.jsxs(RD,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:U=>T(U.target.value),disabled:f,form:b,children:[k===void 0?l.jsx("option",{value:""}):null,Array.from(q)]},V):null]})})};iD.displayName=jo;var oD="SelectTrigger",aD=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=hm(n),o=Ii(oD,n),a=o.disabled||r,c=me(e,o.onTriggerChange),u=dm(n),d=m.useRef("touch"),[h,f,p]=ID(y=>{const w=u().filter(x=>!x.disabled),v=w.find(x=>x.value===o.value),g=PD(w,y,v);g!==void 0&&o.onValueChange(g.value)}),b=y=>{a||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return l.jsx(TR,{asChild:!0,...i,children:l.jsx(te.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":jD(o.value)?"":void 0,...s,ref:c,onClick:X(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&b(y)}),onPointerDown:X(s.onPointerDown,y=>{d.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:X(s.onKeyDown,y=>{const w=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(w&&y.key===" ")&&bee.includes(y.key)&&(b(),y.preventDefault())})})})});aD.displayName=oD;var lD="SelectValue",cD=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=Ii(lD,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=me(e,c.onValueNodeChange);return yt(()=>{u(d)},[u,d]),l.jsx(te.span,{...a,ref:h,style:{pointerEvents:"none"},children:jD(c.value)?l.jsx(l.Fragment,{children:o}):i})});cD.displayName=lD;var kee="SelectIcon",uD=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(te.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});uD.displayName=kee;var Tee="SelectPortal",dD=t=>l.jsx(pp,{asChild:!0,...t});dD.displayName=Tee;var Io="SelectContent",hD=m.forwardRef((t,e)=>{const n=Ii(Io,t.__scopeSelect),[r,s]=m.useState();if(yt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Oo.createPortal(l.jsx(fD,{scope:t.__scopeSelect,children:l.jsx(um.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(pD,{...t,ref:e})});hD.displayName=Io;var Qn=10,[fD,Pi]=$l(Io),Ree="SelectContentImpl",jee=sl("SelectContent.RemoveScroll"),pD=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:b,hideWhenDetached:y,avoidCollisions:w,...v}=t,g=Ii(Io,n),[x,S]=m.useState(null),[_,C]=m.useState(null),E=me(e,Y=>S(Y)),[N,k]=m.useState(null),[T,j]=m.useState(null),I=dm(n),[q,P]=m.useState(!1),V=m.useRef(!1);m.useEffect(()=>{if(x)return E2(x)},[x]),v2();const U=m.useCallback(Y=>{const[Ee,...Fe]=I().map(_e=>_e.ref.current),[Se]=Fe.slice(-1),we=document.activeElement;for(const _e of Y)if(_e===we||(_e==null||_e.scrollIntoView({block:"nearest"}),_e===Ee&&_&&(_.scrollTop=0),_e===Se&&_&&(_.scrollTop=_.scrollHeight),_e==null||_e.focus(),document.activeElement!==we))return},[I,_]),G=m.useCallback(()=>U([N,x]),[U,N,x]);m.useEffect(()=>{q&&G()},[q,G]);const{onOpenChange:A,triggerPointerDownPosRef:L}=g;m.useEffect(()=>{if(x){let Y={x:0,y:0};const Ee=Se=>{var we,_e;Y={x:Math.abs(Math.round(Se.pageX)-(((we=L.current)==null?void 0:we.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((_e=L.current)==null?void 0:_e.y)??0))}},Fe=Se=>{Y.x<=10&&Y.y<=10?Se.preventDefault():x.contains(Se.target)||A(!1),document.removeEventListener("pointermove",Ee),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",Fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",Fe,{capture:!0})}}},[x,A,L]),m.useEffect(()=>{const Y=()=>A(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[A]);const[R,W]=ID(Y=>{const Ee=I().filter(we=>!we.disabled),Fe=Ee.find(we=>we.ref.current===document.activeElement),Se=PD(Ee,Y,Fe);Se&&setTimeout(()=>Se.ref.current.focus())}),D=m.useCallback((Y,Ee,Fe)=>{const Se=!V.current&&!Fe;(g.value!==void 0&&g.value===Ee||Se)&&(k(Y),Se&&(V.current=!0))},[g.value]),ne=m.useCallback(()=>x==null?void 0:x.focus(),[x]),re=m.useCallback((Y,Ee,Fe)=>{const Se=!V.current&&!Fe;(g.value!==void 0&&g.value===Ee||Se)&&j(Y)},[g.value]),je=r==="popper"?b0:mD,ze=je===b0?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:b,hideWhenDetached:y,avoidCollisions:w}:{};return l.jsx(fD,{scope:n,content:x,viewport:_,onViewportChange:C,itemRefCallback:D,selectedItem:N,onItemLeave:ne,itemTextRefCallback:re,focusSelectedItem:G,selectedItemText:T,position:r,isPositioned:q,searchRef:R,children:l.jsx(vb,{as:jee,allowPinchZoom:!0,children:l.jsx(gb,{asChild:!0,trapped:g.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:X(s,Y=>{var Ee;(Ee=g.trigger)==null||Ee.focus({preventScroll:!0}),Y.preventDefault()}),children:l.jsx(Mu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:l.jsx(je,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:Y=>Y.preventDefault(),...v,...ze,onPlaced:()=>P(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:X(v.onKeyDown,Y=>{const Ee=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!Ee&&Y.key.length===1&&W(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let Se=I().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const we=Y.target,_e=Se.indexOf(we);Se=Se.slice(_e+1)}setTimeout(()=>U(Se)),Y.preventDefault()}})})})})})})});pD.displayName=Ree;var Iee="SelectItemAlignedPosition",mD=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ii(Io,n),o=Pi(Io,n),[a,c]=m.useState(null),[u,d]=m.useState(null),h=me(e,E=>d(E)),f=dm(n),p=m.useRef(!1),b=m.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:v,focusSelectedItem:g}=o,x=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&y&&w&&v){const E=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(i.dir!=="rtl"){const we=T.left-N.left,_e=k.left-we,it=E.left-_e,nn=E.width+it,Ss=Math.max(nn,N.width),qr=window.innerWidth-Qn,Cs=f0(_e,[Qn,Math.max(Qn,qr-Ss)]);a.style.minWidth=nn+"px",a.style.left=Cs+"px"}else{const we=N.right-T.right,_e=window.innerWidth-k.right-we,it=window.innerWidth-E.right-_e,nn=E.width+it,Ss=Math.max(nn,N.width),qr=window.innerWidth-Qn,Cs=f0(_e,[Qn,Math.max(Qn,qr-Ss)]);a.style.minWidth=nn+"px",a.style.right=Cs+"px"}const j=f(),I=window.innerHeight-Qn*2,q=y.scrollHeight,P=window.getComputedStyle(u),V=parseInt(P.borderTopWidth,10),U=parseInt(P.paddingTop,10),G=parseInt(P.borderBottomWidth,10),A=parseInt(P.paddingBottom,10),L=V+U+q+A+G,R=Math.min(w.offsetHeight*5,L),W=window.getComputedStyle(y),D=parseInt(W.paddingTop,10),ne=parseInt(W.paddingBottom,10),re=E.top+E.height/2-Qn,je=I-re,ze=w.offsetHeight/2,Y=w.offsetTop+ze,Ee=V+U+Y,Fe=L-Ee;if(Ee<=re){const we=j.length>0&&w===j[j.length-1].ref.current;a.style.bottom="0px";const _e=u.clientHeight-y.offsetTop-y.offsetHeight,it=Math.max(je,ze+(we?ne:0)+_e+G),nn=Ee+it;a.style.height=nn+"px"}else{const we=j.length>0&&w===j[0].ref.current;a.style.top="0px";const it=Math.max(re,V+y.offsetTop+(we?D:0)+ze)+Fe;a.style.height=it+"px",y.scrollTop=Ee-re+y.offsetTop}a.style.margin=`${Qn}px 0`,a.style.minHeight=R+"px",a.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,u,y,w,v,i.dir,r]);yt(()=>x(),[x]);const[S,_]=m.useState();yt(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const C=m.useCallback(E=>{E&&b.current===!0&&(x(),g==null||g(),b.current=!1)},[x,g]);return l.jsx(Aee,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(te.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mD.displayName=Iee;var Pee="SelectPopperPosition",b0=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Qn,...i}=t,o=hm(n);return l.jsx(RR,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});b0.displayName=Pee;var[Aee,Ob]=$l(Io,{}),_0="SelectViewport",gD=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Pi(_0,n),o=Ob(_0,n),a=me(e,i.onViewportChange),c=m.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(um.Slot,{scope:n,children:l.jsx(te.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:X(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const b=window.innerHeight-Qn*2,y=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(y,w);if(v<b){const g=v+p,x=Math.min(b,g),S=g-x;h.style.height=x+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});gD.displayName=_0;var vD="SelectGroup",[Oee,Dee]=$l(vD),Mee=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Dr();return l.jsx(Oee,{scope:n,id:s,children:l.jsx(te.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Mee.displayName=vD;var yD="SelectLabel",xD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Dee(yD,n);return l.jsx(te.div,{id:s.id,...r,ref:e})});xD.displayName=yD;var Qf="SelectItem",[Lee,wD]=$l(Qf),bD=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Ii(Qf,n),c=Pi(Qf,n),u=a.value===r,[d,h]=m.useState(i??""),[f,p]=m.useState(!1),b=me(e,g=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,g,r,s)}),y=Dr(),w=m.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(Lee,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(g=>{h(x=>x||((g==null?void 0:g.textContent)??"").trim())},[]),children:l.jsx(um.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(te.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:X(o.onFocus,()=>p(!0)),onBlur:X(o.onBlur,()=>p(!1)),onClick:X(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:X(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:X(o.onPointerDown,g=>{w.current=g.pointerType}),onPointerMove:X(o.onPointerMove,g=>{var x;w.current=g.pointerType,s?(x=c.onItemLeave)==null||x.call(c):w.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(o.onPointerLeave,g=>{var x;g.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:X(o.onKeyDown,g=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&g.key===" "||(_ee.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})})})})});bD.displayName=Qf;var fc="SelectItemText",_D=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ii(fc,n),a=Pi(fc,n),c=wD(fc,n),u=Nee(fc,n),[d,h]=m.useState(null),f=me(e,v=>h(v),c.onItemTextChange,v=>{var g;return(g=a.itemTextRefCallback)==null?void 0:g.call(a,v,c.value,c.disabled)}),p=d==null?void 0:d.textContent,b=m.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=u;return yt(()=>(y(b),()=>w(b)),[y,w,b]),l.jsxs(l.Fragment,{children:[l.jsx(te.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Oo.createPortal(i.children,o.valueNode):null]})});_D.displayName=fc;var SD="SelectItemIndicator",CD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return wD(SD,n).isSelected?l.jsx(te.span,{"aria-hidden":!0,...r,ref:e}):null});CD.displayName=SD;var S0="SelectScrollUpButton",ED=m.forwardRef((t,e)=>{const n=Pi(S0,t.__scopeSelect),r=Ob(S0,t.__scopeSelect),[s,i]=m.useState(!1),o=me(e,r.onScrollButtonChange);return yt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(kD,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});ED.displayName=S0;var C0="SelectScrollDownButton",ND=m.forwardRef((t,e)=>{const n=Pi(C0,t.__scopeSelect),r=Ob(C0,t.__scopeSelect),[s,i]=m.useState(!1),o=me(e,r.onScrollButtonChange);return yt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(kD,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});ND.displayName=C0;var kD=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Pi("SelectScrollButton",n),o=m.useRef(null),a=dm(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),yt(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(te.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:X(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:X(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:X(s.onPointerLeave,()=>{c()})})}),Fee="SelectSeparator",TD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(te.div,{"aria-hidden":!0,...r,ref:e})});TD.displayName=Fee;var E0="SelectArrow",$ee=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=hm(n),i=Ii(E0,n),o=Pi(E0,n);return i.open&&o.position==="popper"?l.jsx(jR,{...s,...r,ref:e}):null});$ee.displayName=E0;var Uee="SelectBubbleInput",RD=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=me(r,s),o=Ab(e);return m.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),l.jsx(te.select,{...n,style:{...NT,...n.style},ref:i,defaultValue:e})});RD.displayName=Uee;function jD(t){return t===""||t===void 0}function ID(t){const e=pt(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function PD(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Vee(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Vee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Bee=iD,AD=aD,zee=cD,Wee=uD,Hee=dD,OD=hD,qee=gD,DD=xD,MD=bD,Gee=_D,Kee=CD,LD=ED,FD=ND,$D=TD;const Yee=Bee,Qee=zee,UD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(AD,{ref:r,className:$("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(Wee,{asChild:!0,children:l.jsx(Cx,{className:"h-4 w-4 opacity-50"})})]}));UD.displayName=AD.displayName;const VD=m.forwardRef(({className:t,...e},n)=>l.jsx(LD,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(q5,{className:"h-4 w-4"})}));VD.displayName=LD.displayName;const BD=m.forwardRef(({className:t,...e},n)=>l.jsx(FD,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(Cx,{className:"h-4 w-4"})}));BD.displayName=FD.displayName;const zD=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(Hee,{children:l.jsxs(OD,{ref:s,className:$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(VD,{}),l.jsx(qee,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(BD,{})]})}));zD.displayName=OD.displayName;const Jee=m.forwardRef(({className:t,...e},n)=>l.jsx(DD,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Jee.displayName=DD.displayName;const WD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(MD,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Kee,{children:l.jsx(il,{className:"h-4 w-4"})})}),l.jsx(Gee,{children:e})]}));WD.displayName=MD.displayName;const Xee=m.forwardRef(({className:t,...e},n)=>l.jsx($D,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));Xee.displayName=$D.displayName;var fm="Switch",[Zee,qte]=gn(fm),[ete,tte]=Zee(fm),HD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,p]=m.useState(null),b=me(e,x=>p(x)),y=m.useRef(!1),w=f?d||!!f.closest("form"):!0,[v,g]=pr({prop:s,defaultProp:i??!1,onChange:u,caller:fm});return l.jsxs(ete,{scope:n,checked:v,disabled:a,children:[l.jsx(te.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":YD(v),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:b,onClick:X(t.onClick,x=>{g(S=>!S),w&&(y.current=x.isPropagationStopped(),y.current||x.stopPropagation())})}),w&&l.jsx(KD,{control:f,bubbles:!y.current,name:r,value:c,checked:v,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});HD.displayName=fm;var qD="SwitchThumb",GD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tte(qD,n);return l.jsx(te.span,{"data-state":YD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});GD.displayName=qD;var nte="SwitchBubbleInput",KD=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),a=me(o,i),c=Ab(n),u=Ox(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const b=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(b)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});KD.displayName=nte;function YD(t){return t?"checked":"unchecked"}var QD=HD,rte=GD;const JD=m.forwardRef(({className:t,...e},n)=>l.jsx(QD,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:l.jsx(rte,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));JD.displayName=QD.displayName;function ste({room:t,players:e,currentPlayerId:n,isHost:r,categories:s,onStartGame:i,onRestartGame:o,onLeave:a}){const[c,u]=m.useState(""),[d,h]=m.useState(!1),[f,p]=m.useState(!1),b=e.find(g=>g.id===n),y=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[B("room"),": ",t.code]}),l.jsxs("p",{className:"text-white/60",children:[B("waitingPlayers")," (",e.length,"/10 ",B("people"),")"]})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),l.jsx("div",{className:"space-y-2",children:e.map(g=>l.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-white/5",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"flex-1",children:g.name}),g.is_host&&l.jsxs(Tu,{variant:"secondary",className:"bg-purple-500/20",children:[" ",B("host")]})]},g.id))})]})}),r&&l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx($t,{htmlFor:"category",className:"text-white/80",children:B("category")}),l.jsxs(Yee,{value:c,onValueChange:u,children:[l.jsx(UD,{id:"category",className:"bg-black/30 border-white/20 text-white",children:l.jsx(Qee,{})}),l.jsx(zD,{children:s.map(g=>l.jsx(WD,{value:g,children:g},g))})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx($t,{htmlFor:"mr-white",className:"text-white/80",children:B("includeMrWhite")}),l.jsx(JD,{id:"mr-white",checked:d,onCheckedChange:g=>{console.log("Mr. White toggled:",g),h(g)}})]}),l.jsx(M,{onClick:()=>{console.log("Starting game with:",{selectedCategory:c,includeMrWhite:d}),i(c,d)},disabled:e.length<4,className:"w-full bg-purple-500 hover:bg-purple-600",children:e.length<4?B("needMinPlayers"):B("startGame")})]})})]}),w=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:B("seeYourWord")}),l.jsx("p",{className:"text-white/60",children:B("tapToReveal")})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsx(qs,{className:"p-8",children:l.jsx("div",{className:"relative h-48 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 cursor-pointer select-none",onMouseDown:()=>p(!0),onMouseUp:()=>p(!1),onMouseLeave:()=>p(!1),onTouchStart:()=>p(!0),onTouchEnd:()=>p(!1),children:f?l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-sm text-white/80 mb-2",children:[B("yourWordIs"),":"]}),l.jsx("p",{className:"text-4xl font-bold",children:b==null?void 0:b.word}),l.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[B("role"),": ",b==null?void 0:b.role]})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(Kv,{className:"w-12 h-12 mb-2 mx-auto"}),l.jsx("p",{children:B("holdToSee")})]})})})}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(g=>l.jsxs("div",{className:"p-3 rounded bg-white/5 flex items-center gap-2",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-sm",children:g.name})]},g.id))})]})}),r&&l.jsxs(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:[" ",B("restartGame")]})]}),v=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"text-center",children:l.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[" ",B("gameOver"),"!"]})}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("finalResult"),":"]}),l.jsx("div",{className:"space-y-2",children:e.map(g=>l.jsx("div",{className:`p-3 rounded ${g.is_alive?"bg-green-900/20":"bg-red-900/20"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"font-semibold",children:[g.name," ",g.is_alive?"":""]}),l.jsxs("div",{className:"text-sm text-white/60",children:[g.role," - ",g.word]})]})]})},g.id))})]})}),r&&l.jsx(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:B("restartGame")})]});return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 sm:p-6 relative",children:[l.jsx(pO,{active:t.game_phase==="FINISHED",duration:5e3}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),l.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-center z-20",children:[l.jsxs(M,{variant:"ghost",onClick:a,className:"text-white/70 hover:text-white",children:[l.jsx(wl,{className:"w-5 h-5 mr-2"}),B("leaveRoom")]}),l.jsx(Fl,{currentRoomCode:t.code,currentGameType:"undercover",currentGameName:B("undercoverTitle")})]}),l.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10",children:l.jsxs("div",{className:"w-full max-w-2xl",children:[t.game_phase==="WAITING"&&y(),(t.game_phase==="REVEAL_WORD"||t.game_phase==="DESCRIBE"||t.game_phase==="VOTING"||t.game_phase==="VOTE_RESULT")&&w(),t.game_phase==="FINISHED"&&v()]})})]})}const mo=[{id:"default",name:"",nameEn:"Classic",colors:{primary:"#8b5cf6",secondary:"#ec4899",accent:"#f59e0b",background:"rgba(0, 0, 0, 0.6)",cardBg:"rgba(0, 0, 0, 0.4)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.6)"},gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"},{id:"neon",name:"",nameEn:"Neon",colors:{primary:"#00ff88",secondary:"#00d9ff",accent:"#ff00ff",background:"rgba(10, 10, 30, 0.8)",cardBg:"rgba(20, 20, 40, 0.6)",text:"#00ff88",textSecondary:"rgba(0, 255, 136, 0.6)"},gradient:"linear-gradient(135deg, #00ff88 0%, #00d9ff 50%, #ff00ff 100%)"},{id:"sunset",name:"",nameEn:"Sunset",colors:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#ff8c42",background:"rgba(20, 10, 30, 0.7)",cardBg:"rgba(40, 20, 40, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #ff6b6b 0%, #ff8c42 50%, #ffd93d 100%)"},{id:"ocean",name:"",nameEn:"Ocean",colors:{primary:"#0066ff",secondary:"#00ccff",accent:"#00ffcc",background:"rgba(0, 20, 40, 0.8)",cardBg:"rgba(0, 40, 80, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #0066ff 0%, #00ccff 50%, #00ffcc 100%)"},{id:"forest",name:"",nameEn:"Forest",colors:{primary:"#2d6a4f",secondary:"#52b788",accent:"#95d5b2",background:"rgba(20, 30, 20, 0.8)",cardBg:"rgba(30, 50, 30, 0.6)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #2d6a4f 0%, #52b788 50%, #95d5b2 100%)"},{id:"royal",name:"",nameEn:"Royal",colors:{primary:"#6d28d9",secondary:"#a855f7",accent:"#fbbf24",background:"rgba(20, 10, 40, 0.8)",cardBg:"rgba(40, 20, 60, 0.6)",text:"#fbbf24",textSecondary:"rgba(251, 191, 36, 0.7)"},gradient:"linear-gradient(135deg, #6d28d9 0%, #a855f7 50%, #fbbf24 100%)"},{id:"dark",name:"",nameEn:"Dark",colors:{primary:"#374151",secondary:"#6b7280",accent:"#9ca3af",background:"rgba(0, 0, 0, 0.9)",cardBg:"rgba(20, 20, 20, 0.8)",text:"#f3f4f6",textSecondary:"rgba(243, 244, 246, 0.6)"},gradient:"linear-gradient(135deg, #1f2937 0%, #374151 100%)"},{id:"candy",name:"",nameEn:"Candy",colors:{primary:"#ff69b4",secondary:"#ffd700",accent:"#00bfff",background:"rgba(255, 192, 203, 0.2)",cardBg:"rgba(255, 255, 255, 0.3)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.8)"},gradient:"linear-gradient(135deg, #ff69b4 0%, #ffd700 50%, #00bfff 100%)"}],XD="party-games-theme";function Db(){if(typeof window>"u")return mo[0];const t=localStorage.getItem(XD);return mo.find(e=>e.id===t)||mo[0]}function ZD(t){if(typeof window>"u")return;const e=mo.find(r=>r.id===t);if(!e)return;localStorage.setItem(XD,t);const n=document.documentElement;n.style.setProperty("--color-primary",e.colors.primary),n.style.setProperty("--color-secondary",e.colors.secondary),n.style.setProperty("--color-accent",e.colors.accent),n.style.setProperty("--color-background",e.colors.background),n.style.setProperty("--color-card-bg",e.colors.cardBg),n.style.setProperty("--color-text",e.colors.text),n.style.setProperty("--color-text-secondary",e.colors.textSecondary),n.style.setProperty("--gradient",e.gradient),window.dispatchEvent(new CustomEvent("themechange",{detail:e}))}function ite(){if(typeof window>"u")return;const t=Db();ZD(t.id)}function sd(){const[t,e]=m.useState(Db());return m.useEffect(()=>{const n=r=>{e(r.detail)};return window.addEventListener("themechange",n),()=>{window.removeEventListener("themechange",n)}},[]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 transition-all duration-1000 ease-out",style:{background:t.gradient}}),t.backgroundImage&&l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 transition-opacity duration-1000",style:{backgroundImage:t.backgroundImage}}),l.jsx("div",{className:"absolute inset-0 bg-black/30 transition-colors duration-1000"}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute w-96 h-96 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.primary,top:"10%",left:"10%",animationDelay:"0s",animationDuration:"8s"}}),l.jsx("div",{className:"absolute w-80 h-80 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.secondary,top:"60%",right:"10%",animationDelay:"2s",animationDuration:"10s"}}),l.jsx("div",{className:"absolute w-64 h-64 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.accent,bottom:"20%",left:"50%",animationDelay:"4s",animationDuration:"12s"}})]})]})}function ote(){const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(!1),{toast:f}=Ht();m.useEffect(()=>{n&&p()},[n]);const p=async()=>{const{data:x,error:S}=await O.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(S){console.error("Error loading questions:",S);return}const _=(x||[]).map(C=>({...C,is_default:C.is_default??!1}));e(_)},b=async()=>{if(!o.trim()){f({title:" ",variant:"destructive"});return}const{error:x}=await O.from("paranoia_questions").insert({question:o.trim(),is_default:!1});if(x){console.error("Error adding question:",x),f({title:" ",variant:"destructive"});return}f({title:" !"}),a(""),p()},y=async()=>{if(!s||!o.trim())return;if(s.is_default){f({title:" ",variant:"destructive"});return}const{error:x}=await O.from("paranoia_questions").update({question:o.trim()}).eq("id",s.id);if(x){console.error("Error updating question:",x),f({title:" ",variant:"destructive"});return}f({title:" !"}),i(null),a(""),p()},w=async x=>{if(x.is_default){f({title:" ",variant:"destructive"});return}const{error:S}=await O.from("paranoia_questions").delete().eq("id",x.id);if(S){console.error("Error deleting question:",S),f({title:" ",variant:"destructive"});return}f({title:" !"}),p()},v=async()=>{h(!0);try{const x=await CZ(5),{error:S}=await O.from("paranoia_questions").insert(x.map(_=>({question:_,is_default:!1})));if(S)throw S;f({title:"  5  AI !",description:""}),p()}catch(x){console.error("Error generating AI questions:",x),f({title:" ",variant:"destructive"})}finally{h(!1)}},g=t.filter(x=>x.question.toLowerCase().includes(c.toLowerCase()));return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(Qv,{className:"w-4 h-4"}),""]})}),l.jsxs(yr,{className:"sm:max-w-[600px] max-h-[90vh]",children:[l.jsx(xr,{children:l.jsx(wr,{className:"text-2xl",children:" Paranoia"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:v,disabled:d,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[l.jsx(fa,{className:"w-4 h-4 mr-2"}),d?" AI...":"  AI (5 )"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx($t,{htmlFor:"question",children:s?"":""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{id:"question",value:o,onChange:x=>a(x.target.value),placeholder:" ?",onKeyDown:x=>{x.key==="Enter"&&(s?y():b())}}),s?l.jsxs(l.Fragment,{children:[l.jsx(M,{onClick:y,children:""}),l.jsx(M,{variant:"outline",onClick:()=>{i(null),a("")},children:""})]}):l.jsx(M,{onClick:b,children:l.jsx($u,{className:"w-4 h-4"})})]})]}),l.jsx(be,{placeholder:"...",value:c,onChange:x=>u(x.target.value)}),l.jsx(Ll,{className:"h-[400px] pr-4",children:l.jsx("div",{className:"space-y-2",children:g.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:c?"":" "}):g.map(x=>l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm",children:x.question}),x.is_default&&l.jsx("span",{className:"text-xs text-muted-foreground",children:"()"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{if(x.is_default){f({title:" ",variant:"destructive"});return}i(x),a(x.question)},disabled:x.is_default,children:l.jsx(Qv,{className:"w-4 h-4"})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>w(x),disabled:x.is_default,children:l.jsx(eu,{className:"w-4 h-4"})})]})]},x.id))})}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",g.length," "]})]})]})]})}function ate({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState("select"),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(null),[f,p]=m.useState(!1),b=async()=>{if(!o.trim())return;const v=await t(o.trim());v&&h(v)},y=async()=>{!o.trim()||!c.trim()||await e(c.trim(),o.trim())},w=()=>{d&&(navigator.clipboard.writeText(d),p(!0),setTimeout(()=>p(!1),2e3))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[l.jsx(sd,{}),l.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Paranoia"}),l.jsx("p",{className:"text-white/70",children:" / "})]}),l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(ote,{})}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[s==="select"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:()=>i("create"),className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[l.jsx(Bn,{className:"w-5 h-5 mr-2"}),""]}),l.jsx(M,{onClick:()=>i("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),s==="create"&&!d&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsx(M,{onClick:b,disabled:r||!o.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]}),s==="create"&&d&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-white/80",children:":"}),l.jsx("div",{onClick:w,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:l.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:d})}),l.jsx(M,{onClick:w,variant:"outline",className:"border-white/30 text-white",children:f?l.jsxs(l.Fragment,{children:[l.jsx(il,{className:"w-4 h-4 mr-2"})," !"]}):l.jsxs(l.Fragment,{children:[l.jsx(bo,{className:"w-4 h-4 mr-2"})," "]})}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),s==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:c,onChange:v=>u(v.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),l.jsx(M,{onClick:y,disabled:r||!o.trim()||!c.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function lte({gameState:t,myId:e,players:n,onSelectVictim:r,onRevealQuestion:s,onSkipQuestion:i,onNextRound:o}){const a=e===t.asker_id,c=e===t.victim_id,u=d=>{var h;return((h=n.find(f=>f.id===d))==null?void 0:h.name)||"Unknown"};return t.phase==="ASKING"&&a?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-red-900 to-red-800 p-6 text-white text-center rounded-2xl shadow-2xl border border-red-700",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-bold mb-4",children:"! ()"}),l.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-black/40 p-4 rounded-xl mb-6 border border-red-500/50",children:l.jsxs("p",{className:"text-lg italic",children:['"',t.question,'"']})}),l.jsx("p",{className:"text-sm opacity-80 mb-4",children:":"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.filter(d=>d.id!==e).map((d,h)=>l.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*h},children:l.jsx(M,{onClick:()=>r(d.id),className:"w-full bg-red-700 hover:bg-red-600 text-white py-4",children:d.name})},d.id))})]}):t.phase==="ASKING"?l.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10",children:[l.jsx(pe.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"text-6xl mb-6",children:""}),l.jsxs("p",{className:"text-xl text-white",children:[l.jsx("span",{className:"font-bold text-yellow-400",children:u(t.asker_id)})," ","..."]}),l.jsx("p",{className:"text-sm text-white/60 mt-2",children:"..."})]}):t.phase==="REVEALING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-br from-slate-800 to-slate-900 text-white rounded-2xl border border-slate-700",children:[l.jsxs("h2",{className:"text-lg mb-2",children:[l.jsx("span",{className:"text-red-400 font-bold",children:u(t.asker_id)})," ","..."]}),l.jsxs(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5,delay:.3},className:"text-4xl font-bold text-yellow-400 my-4",children:[" ",u(t.victim_id)]}),l.jsx(qp,{mode:"wait",children:t.is_revealed?l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white text-black p-6 rounded-xl",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"..."}),l.jsxs(pe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl font-bold",children:['"',t.question,'"']}),l.jsx(M,{onClick:o,className:"mt-6 bg-blue-600 hover:bg-blue-500",children:" "})]},"revealed"):l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-6 space-y-4",children:c?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg",children:["?"," ",l.jsx("span",{className:"text-2xl",children:""})]}),l.jsx(M,{onClick:s,className:"w-full bg-pink-600 hover:bg-pink-500 py-6 text-xl font-bold",children:" "}),l.jsx(M,{onClick:i,variant:"ghost",className:"w-full text-white/60 hover:text-white",children:" "})]}):l.jsxs("p",{className:"text-white/70",children:[""," ",l.jsx("span",{className:"text-yellow-400",children:u(t.victim_id)})," ","..."]})},"unrevealed")})]}):l.jsx("div",{className:"text-white text-center",children:"Loading..."})}function cte({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onSelectVictim:o,onRevealQuestion:a,onSkipQuestion:c,onLeave:u}){const d=t.game_state;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[l.jsx(sd,{}),l.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[l.jsxs(M,{variant:"ghost",size:"sm",onClick:u,className:"text-white hover:bg-white/10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs("div",{className:"text-white text-center",children:[l.jsx("p",{className:"text-sm opacity-70",children:""}),l.jsx("p",{className:"font-mono font-bold",children:t.code})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fl,{currentRoomCode:t.code,currentGameType:"paranoia",currentGameName:"Paranoia"}),l.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.jsx(Bn,{className:"w-4 h-4"}),l.jsx("span",{children:e.length})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?d?l.jsx("div",{className:"w-full max-w-sm",children:l.jsx(lte,{gameState:d,myId:n||"",players:e,onSelectVictim:o,onRevealQuestion:a,onSkipQuestion:c,onNextRound:i})}):l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),l.jsx("p",{children:"..."})]}):l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Paranoia"}),l.jsx("p",{className:"text-white/70",children:"..."})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),l.jsx("div",{className:"space-y-2",children:e.map((h,f)=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:"flex items-center gap-2 text-white",children:[l.jsx("span",{className:"text-lg",children:h.is_host?"":""}),l.jsx("span",{children:h.name}),h.id===n&&l.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},h.id))})]}),r&&e.length>=3&&l.jsxs(M,{onClick:s,className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[l.jsx(Fu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<3&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" 3 "}),!r&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}var Mb="Radio",[ute,eM]=gn(Mb),[dte,hte]=ute(Mb),tM=m.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:c,form:u,...d}=t,[h,f]=m.useState(null),p=me(e,w=>f(w)),b=m.useRef(!1),y=h?u||!!h.closest("form"):!0;return l.jsxs(dte,{scope:n,checked:s,disabled:o,children:[l.jsx(te.button,{type:"button",role:"radio","aria-checked":s,"data-state":iM(s),"data-disabled":o?"":void 0,disabled:o,value:a,...d,ref:p,onClick:X(t.onClick,w=>{s||c==null||c(),y&&(b.current=w.isPropagationStopped(),b.current||w.stopPropagation())})}),y&&l.jsx(sM,{control:h,bubbles:!b.current,name:r,value:a,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});tM.displayName=Mb;var nM="RadioIndicator",rM=m.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=hte(nM,n);return l.jsx(In,{present:r||i.checked,children:l.jsx(te.span,{"data-state":iM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});rM.displayName=nM;var fte="RadioBubbleInput",sM=m.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),a=me(o,i),c=Ab(n),u=Ox(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const b=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(b)}},[c,n,r]),l.jsx(te.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sM.displayName=fte;function iM(t){return t?"checked":"unchecked"}var pte=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pm="RadioGroup",[mte,Gte]=gn(pm,[im,eM]),oM=im(),aM=eM(),[gte,vte]=mte(pm),lM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,p=oM(n),b=Ml(u),[y,w]=pr({prop:i,defaultProp:s??null,onChange:h,caller:pm});return l.jsx(gte,{scope:n,name:r,required:o,disabled:a,value:y,onValueChange:w,children:l.jsx(_O,{asChild:!0,...p,orientation:c,dir:b,loop:d,children:l.jsx(te.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":a?"":void 0,dir:b,...f,ref:e})})})});lM.displayName=pm;var cM="RadioGroupItem",uM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=vte(cM,n),o=i.disabled||r,a=oM(n),c=aM(n),u=m.useRef(null),d=me(e,u),h=i.value===s.value,f=m.useRef(!1);return m.useEffect(()=>{const p=y=>{pte.includes(y.key)&&(f.current=!0)},b=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",b)}},[]),l.jsx(SO,{asChild:!0,...a,focusable:!o,active:h,children:l.jsx(tM,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:d,onCheck:()=>i.onValueChange(s.value),onKeyDown:X(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:X(s.onFocus,()=>{var p;f.current&&((p=u.current)==null||p.click())})})})});uM.displayName=cM;var yte="RadioGroupIndicator",dM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=aM(n);return l.jsx(rM,{...s,...r,ref:e})});dM.displayName=yte;var hM=lM,fM=uM,xte=dM;const pM=m.forwardRef(({className:t,...e},n)=>l.jsx(hM,{className:$("grid gap-2",t),...e,ref:n}));pM.displayName=hM.displayName;const mM=m.forwardRef(({className:t,...e},n)=>l.jsx(fM,{ref:n,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:l.jsx(xte,{className:"flex items-center justify-center",children:l.jsx(G5,{className:"h-2.5 w-2.5 fill-current text-current"})})}));mM.displayName=fM.displayName;function wte({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState("select"),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(null),[f,p]=m.useState(!1),[b,y]=m.useState(5),w=async()=>{if(!o.trim())return;const x=await t(o.trim(),b);x&&h(x)},v=async()=>{!o.trim()||!c.trim()||await e(c.trim(),o.trim())},g=()=>{d&&(navigator.clipboard.writeText(d),p(!0),setTimeout(()=>p(!1),2e3))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[l.jsx(sd,{}),l.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"5 Second Rule"}),l.jsx("p",{className:"text-white/70",children:" 3 ...  5 !"})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[s==="select"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:()=>i("create"),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[l.jsx(Bn,{className:"w-5 h-5 mr-2"}),""]}),l.jsx(M,{onClick:()=>i("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),s==="create"&&!d&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:x=>a(x.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-white/80 text-sm mb-3 block flex items-center gap-2",children:[l.jsx(K5,{className:"w-4 h-4"}),""]}),l.jsx(pM,{value:b.toString(),onValueChange:x=>y(Number(x)),children:l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5,10,15,20].map(x=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(mM,{value:x.toString(),id:`time-${x}`,className:"border-white/40"}),l.jsxs($t,{htmlFor:`time-${x}`,className:"text-white cursor-pointer",children:[x," "]})]},x))})})]}),l.jsx(M,{onClick:w,disabled:r||!o.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]}),s==="create"&&d&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-white/80",children:":"}),l.jsx("div",{onClick:g,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:l.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:d})}),l.jsx(M,{onClick:g,variant:"outline",className:"border-white/30 text-white",children:f?l.jsxs(l.Fragment,{children:[l.jsx(il,{className:"w-4 h-4 mr-2"})," !"]}):l.jsxs(l.Fragment,{children:[l.jsx(bo,{className:"w-4 h-4 mr-2"})," "]})}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),s==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:x=>a(x.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:c,onChange:x=>u(x.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),l.jsx(M,{onClick:v,disabled:r||!o.trim()||!c.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function bte({gameState:t,myId:e,players:n,onFinishAnswering:r,onVote:s,onNextRound:i}){const o=t.timeLimit||5,[a,c]=m.useState(o),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=n.find(_=>_.id===t.player_id),b=e===t.player_id,y=Object.keys(t.votes||{}).includes(e),w=Object.values(t.votes||{}).length,v=Object.values(t.votes||{}).filter(Boolean).length,g=w-v,x=n.filter(_=>_.id!==t.player_id).length;m.useEffect(()=>{if(t.phase!=="PLAYING")return;const _=setInterval(()=>{const C=Date.now(),N=(new Date(t.end_time).getTime()-C)/1e3;N<=0?(c(0),d(!0),clearInterval(_)):c(N)},100);return()=>clearInterval(_)},[t.end_time,t.phase]),m.useEffect(()=>{t.phase==="PLAYING"&&(d(!1),c(t.timeLimit||5),f(!1))},[t.player_id,t.phase,t.timeLimit]),m.useEffect(()=>{console.log("FiveSecGame state:",{phase:t.phase,player_id:t.player_id,isMe:b,hasVoted:y,voteCount:w,totalVoters:x})},[t.phase,t.player_id,b,y,w,x]);const S=()=>b?a<=1?"from-red-600 to-red-800":a<=2?"from-orange-500 to-red-600":a<=3?"from-yellow-500 to-orange-500":"from-orange-500 to-yellow-600":a<=1?"from-red-600 to-pink-800":a<=2?"from-purple-500 to-red-600":a<=3?"from-indigo-500 to-purple-500":"from-blue-500 to-indigo-700";return t.phase==="PLAYING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-6 text-center rounded-2xl text-white bg-gradient-to-br ${S()} transition-colors duration-300 shadow-2xl`,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("span",{className:"text-sm opacity-80",children:":"}),l.jsx("h2",{className:"text-2xl font-bold",children:p==null?void 0:p.name})]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white text-black p-6 rounded-xl shadow-lg my-6",children:[l.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:" 3 ..."}),l.jsx("h1",{className:"text-xl md:text-2xl font-extrabold",children:t.topic})]}),l.jsx(pe.div,{animate:{scale:a<=2?[1,1.05,1]:1},transition:{repeat:a<=2?1/0:0,duration:.5},className:"relative w-32 h-32 mx-auto flex items-center justify-center border-4 border-white rounded-full bg-black/30",children:l.jsx("span",{className:"text-5xl font-mono font-bold",children:a>0?a.toFixed(1):""})}),b&&l.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:l.jsx(M,{onClick:r,className:"mt-6 w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 text-xl shadow-lg",children:a>0?" !":" "})}),!b&&l.jsxs("p",{className:"mt-4 text-sm opacity-80",children:[" ",p==null?void 0:p.name," ",a>0?"":"","..."]})]}):t.phase==="JUDGING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 text-center rounded-2xl bg-gradient-to-br from-purple-800 to-indigo-900 text-white shadow-2xl",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-bold mb-2",children:"!"}),l.jsxs("p",{className:"text-lg mb-4",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:p==null?void 0:p.name})," ",""]}),l.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-6",children:[l.jsx("p",{className:"text-sm opacity-80",children:":"}),l.jsx("p",{className:"text-lg font-bold",children:t.topic})]}),l.jsx(qp,{mode:"wait",children:!b&&!y&&l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsx(M,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-500 py-6 text-xl font-bold",children:" "}),l.jsx(M,{onClick:()=>s(!1),className:"bg-red-600 hover:bg-red-500 py-6 text-xl font-bold",children:" "})]})}),y&&!b&&l.jsx("p",{className:"text-green-400 mb-4",children:" "}),b&&l.jsx("p",{className:"text-yellow-400 mb-4",children:"..."}),l.jsxs("div",{className:"bg-black/30 rounded-xl p-4 mb-6",children:[l.jsxs("p",{className:"text-sm opacity-80 mb-2",children:[": ",w,"/",x]}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsxs("span",{className:"text-green-400 text-lg",children:[" ",v]}),l.jsxs("span",{className:"text-red-400 text-lg",children:[" ",g]})]})]}),w>=x&&l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[l.jsx("div",{className:"text-2xl font-bold mb-4",children:v>g?l.jsx("span",{className:"text-green-400",children:" !"}):l.jsx("span",{className:"text-red-400",children:" !"})}),l.jsx(M,{onClick:i,className:"bg-blue-600 hover:bg-blue-500 px-8",children:" "})]})]}):l.jsx("div",{className:"text-white text-center",children:"Loading..."})}function _te({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onFinishAnswering:o,onVote:a,onLeave:c}){const u=t.game_state;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[l.jsx(sd,{}),l.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[l.jsxs(M,{variant:"ghost",size:"sm",onClick:c,className:"text-white hover:bg-white/10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs("div",{className:"text-white text-center",children:[l.jsx("p",{className:"text-sm opacity-70",children:""}),l.jsx("p",{className:"font-mono font-bold",children:t.code})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Fl,{currentRoomCode:t.code,currentGameType:"5-sec",currentGameName:"5 Second Rule"}),l.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.jsx(Bn,{className:"w-4 h-4"}),l.jsx("span",{children:e.length})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?u?l.jsx("div",{className:"w-full max-w-sm",children:l.jsx(bte,{gameState:u,myId:n||"",players:e,onFinishAnswering:o,onVote:a,onNextRound:i})}):l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),l.jsx("p",{children:"..."})]}):l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:"5 Second Rule"}),l.jsx("p",{className:"text-white/70",children:"..."}),(u==null?void 0:u.timeLimit)&&l.jsxs("p",{className:"text-yellow-400 text-sm mt-2",children:[" : ",u.timeLimit," "]})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),l.jsx("div",{className:"space-y-2",children:e.map((d,h)=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:"flex items-center gap-2 text-white",children:[l.jsx("span",{className:"text-lg",children:d.is_host?"":""}),l.jsx("span",{children:d.name}),d.id===n&&l.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},d.id))})]}),r&&e.length>=2&&l.jsxs(M,{onClick:s,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[l.jsx(Fu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<2&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" 2 "}),!r&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}function Ste(){const[t,e]=m.useState(Gf());m.useEffect(()=>{e(Gf())},[]);const n=()=>{const r=t==="th"?"en":"th";mZ(r),e(r),window.location.reload()};return l.jsxs(M,{variant:"outline",size:"sm",onClick:n,className:"bg-black/40 backdrop-blur-md border-white/20 text-white hover:bg-black/60",children:[l.jsx(Y5,{className:"w-4 h-4 mr-2"}),t==="th"?"TH":"EN"]})}function Cte(){const[t,e]=m.useState(Db()),[n,r]=m.useState(!1),s=Gf();m.useEffect(()=>{const o=a=>{e(a.detail)};return window.addEventListener("themechange",o),()=>{window.removeEventListener("themechange",o)}},[]);const i=o=>{ZD(o),e(mo.find(a=>a.id===o)||mo[0])};return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-110",title:B("themeChange"),children:l.jsx(J5,{className:"h-5 w-5"})})}),l.jsxs(yr,{className:"sm:max-w-[600px] bg-black/90 backdrop-blur-xl border-white/20",children:[l.jsx(xr,{children:l.jsx(wr,{className:"text-2xl font-bold text-white",children:B("themeSelectTheme")})}),l.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:mo.map(o=>l.jsx("button",{onClick:()=>{i(o.id),r(!1)},className:`
                relative p-4 rounded-lg border-2 transition-all duration-300 hover:scale-105
                ${t.id===o.id?"border-white shadow-xl scale-105":"border-white/20 hover:border-white/40"}
              `,style:{background:o.gradient},children:l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.primary}}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.secondary}}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.accent}})]}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-bold text-white text-lg",children:s==="th"?o.name:o.nameEn})}),t.id===o.id&&l.jsx("div",{className:"absolute top-2 right-2",children:l.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:l.jsx("span",{className:"text-black text-sm",children:""})})})]})},o.id))})]})]})}const Ete=()=>{var Lb,Fb,$b;const[t,e]=m.useState("select"),[n,r]=m.useState([]),[s,i]=m.useState(!1),[o,a]=m.useState(!0),{sessionData:c,hasSession:u,saveSession:d,clearSession:h}=$J(),[f,p]=m.useState(!1),[b,y]=m.useState({}),{room:w,players:v,currentPlayerId:g,isLoading:x,createRoom:S,joinRoom:_,startGame:C,drawCard:E,reshuffleDeck:N,leaveRoom:k,quickStart:T}=_J(),{room:j,players:I,currentPlayerId:q,isLoading:P,createRoom:V,joinRoom:U,startGame:G,drawCard:A,standCard:L,dealerDraw:R,dealerStand:W,showdown:D,nextRound:ne,leaveRoom:re,quickStart:je,setDealer:ze}=EJ(),{room:Y,players:Ee,currentPlayerId:Fe,isLoading:Se,categories:we,createRoom:_e,joinRoom:it,startGame:nn,startDescribePhase:Ss,nextTurn:qr,startVoting:Cs,votePlayer:Mo,checkResultAndContinue:Ai,restartGame:id,leaveRoom:Es}=MJ(),{room:Oi,players:_r,currentPlayerId:od,isLoading:mm,createRoom:qt,joinRoom:Sr,startGame:gm,startRound:vm,selectVictim:Lo,revealQuestion:ym,skipQuestion:ad,leaveRoom:Fo}=LJ(),{room:Wn,players:Ul,currentPlayerId:Gr,isLoading:xm,createRoom:ld,joinRoom:$o,startGame:cd,startRound:wm,finishAnswering:Vl,vote:Cr,leaveRoom:ud}=FJ(),ce=v.find(ee=>ee.id===g),Te=(ce==null?void 0:ce.is_host)??!1,Ie=I.find(ee=>ee.id===q),yn=(Ie==null?void 0:Ie.is_host)??!1,[ct,xn]=m.useState(0),rt=w?{code:w.code,type:"kingscup",name:B("kingsCup")}:j?{code:j.code,type:"pokdeng",name:B("pokDeng")}:Y?{code:Y.code,type:"undercover",name:B("undercoverTitle")}:Oi?{code:Oi.code,type:"paranoia",name:"Paranoia"}:Wn?{code:Wn.code,type:"5-sec",name:"5 Second Rule"}:null,We=m.useMemo(()=>[{id:"doraemon",emoji:"",name:B("kingsCup"),desc:B("kingsCupDesc"),gradient:"from-red-500 to-orange-500",bgColor:"#ef4444"},{id:"pokdeng",emoji:"",name:B("pokDeng"),desc:B("pokDengDesc"),gradient:"from-emerald-500 to-green-600",bgColor:"#10b981"},{id:"undercover",emoji:"",name:B("undercoverTitle"),desc:B("undercoverDesc"),gradient:"from-purple-600 to-indigo-600",bgColor:"#9333ea"},{id:"paranoia",emoji:"",name:"Paranoia",desc:" - ",gradient:"from-pink-500 to-rose-600",bgColor:"#ec4899"},{id:"5-sec",emoji:"",name:"5 Second Rule",desc:" 5  - ",gradient:"from-yellow-400 to-orange-500",bgColor:"#f59e0b"}],[]),bm=m.useCallback(()=>{xn(ee=>(ee+1)%We.length)},[We.length]),_m=m.useCallback(()=>{xn(ee=>(ee-1+We.length)%We.length)},[We.length]);m.useEffect(()=>{(async()=>{if(!u||!c.roomCode||!c.gameType||!c.playerName){a(!1);return}console.log("Attempting session recovery:",c);try{const Q=c.gameType,se=c.roomCode,Oe=c.playerName,ut=c.playerId;(Q==="doraemon"||Q==="pokdeng"||Q==="undercover"||Q==="paranoia"||Q==="5-sec")&&e(Q);let rn=!1;switch(Q){case"doraemon":rn=await _(se,Oe,ut);break;case"pokdeng":rn=await U(se,Oe,ut);break;case"undercover":rn=await it(se,Oe,ut);break;case"paranoia":rn=await Sr(se,Oe,ut);break;case"5-sec":rn=await $o(se,Oe,ut);break}rn?console.log("Session recovery successful!"):(console.log("Session recovery failed, clearing session"),h(),e("select"))}catch(Q){console.error("Session recovery error:",Q),h(),e("select")}finally{a(!1)}})()},[u]);const Bl=m.useCallback(async(ee,Q)=>{let se;switch(Q){case"doraemon":se=await S(ee);break;case"pokdeng":se=await V(ee);break;case"undercover":se=await _e(ee);break;case"paranoia":se=await qt(ee);break;case"5-sec":se=await ld(ee);break}if(se){const Oe=typeof se=="string"?se:se.code||se.code,ut=typeof se=="object"&&se!==null&&"playerId"in se?se.playerId:void 0;d({playerName:ee,roomCode:Oe,gameType:Q,playerId:ut})}return se},[S,V,_e,qt,ld,d]),Di=m.useCallback(async(ee,Q,se)=>{let Oe=null;switch(se){case"doraemon":Oe=await _(ee,Q);break;case"pokdeng":Oe=await U(ee,Q);break;case"undercover":Oe=await it(ee,Q);break;case"paranoia":Oe=await Sr(ee,Q);break;case"5-sec":Oe=await $o(ee,Q);break}if(Oe){const ut=typeof Oe=="object"&&Oe!==null&&"playerId"in Oe?Oe.playerId:void 0;d({playerName:Q,roomCode:ee.toUpperCase(),gameType:se,playerId:ut})}return!!Oe},[_,U,it,Sr,$o,d]),gM=m.useCallback(async(ee,Q)=>{const se=localStorage.getItem("playerName")||`Player_${Math.random().toString(36).slice(2,6)}`,ut={kingscup:"doraemon",doraemon:"doraemon",pokdeng:"pokdeng",undercover:"undercover",paranoia:"paranoia","5-sec":"5-sec"}[Q]||"doraemon";e(ut),await Di(ee,se,ut)||e("select")},[Di]),zl=m.useCallback(ee=>{switch(h(),ee){case"doraemon":k();break;case"pokdeng":re();break;case"undercover":Es();break;case"paranoia":Fo();break;case"5-sec":ud();break}e("select")},[h,k,re,Es,Fo,ud]);if(m.useEffect(()=>{const ee=async()=>{const se=await rm();r(se)},Q=async()=>{const se=await m0();y(se)};ee(),Q()},[t,f]),m.useEffect(()=>{if(t!=="select")return;const ee=Q=>{if(Q.key==="ArrowRight"&&bm(),Q.key==="ArrowLeft"&&_m(),Q.key==="Enter"){const se=We[ct];e(se.id)}};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[t,ct,bm,_m,We]),o)return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-zinc-900 flex flex-col items-center justify-center gap-4",children:[l.jsx(zt,{className:"w-12 h-12 animate-spin text-cyan-400"}),l.jsx("p",{className:"text-white text-xl font-medium",children:"..."}),l.jsx("p",{className:"text-zinc-400 text-sm",children:"Recovering session..."})]});if(t==="select"){const ee=We[ct];return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] relative overflow-hidden bg-zinc-900 text-white flex flex-col",children:[l.jsx(sd,{}),l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:.3},transition:{duration:.8},className:`absolute inset-0 bg-gradient-to-br ${ee.gradient} mix-blend-overlay`},ct),l.jsx(Eb,{names:n}),l.jsxs("div",{className:"relative z-[60] flex items-center justify-between px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-red-600 flex items-center justify-center font-bold text-lg shadow-lg",children:""}),l.jsx("span",{className:"text-xl font-bold",children:"Party Games"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Fl,{currentRoomCode:rt==null?void 0:rt.code,currentGameType:rt==null?void 0:rt.type,currentGameName:rt==null?void 0:rt.name,onJoinRoom:gM}),l.jsx(Ste,{}),l.jsx(Cte,{}),l.jsx("span",{className:"text-zinc-400 text-sm",children:new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 relative z-10",children:[l.jsxs(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30},className:"text-center mb-8",children:[l.jsx("h1",{className:"text-5xl md:text-6xl font-black mb-2 tracking-tight drop-shadow-2xl",children:ee.name}),l.jsx("p",{className:"text-zinc-400 text-lg",children:ee.desc})]},ee.name),l.jsxs("div",{className:"relative w-full max-w-5xl h-[380px] flex items-center justify-center perspective-[1000px]",children:[l.jsx("button",{onClick:_m,className:"absolute left-0 z-30 p-3 rounded-full bg-black/50 hover:bg-black/80 transition-all hover:scale-110",children:l.jsx(W5,{size:32})}),l.jsx("div",{className:"relative h-full w-full flex items-center justify-center",children:We.map((Q,se)=>{const Oe=se-ct;let ut=Oe;Oe>We.length/2&&(ut=Oe-We.length),Oe<-We.length/2&&(ut=Oe+We.length);const rn=se===ct,vM=Math.abs(ut)<=2,dd=b[Q.id];return vM?l.jsxs(pe.div,{className:"absolute cursor-pointer",initial:!1,animate:{x:ut*280,scale:rn?1.15:.75,rotateY:ut*8,opacity:rn?1:.4,filter:rn?"grayscale(0%)":"grayscale(40%)"},transition:{type:"spring",stiffness:300,damping:30},onClick:()=>xn(se),style:{zIndex:rn?20:10-Math.abs(ut)},children:[l.jsx("div",{className:`
                        w-[240px] h-[320px] rounded-2xl shadow-2xl overflow-hidden
                        flex flex-col items-center justify-center relative
                        ${dd?"":`bg-gradient-to-br ${Q.gradient}`}
                        ${rn?"border-4 border-cyan-400 shadow-cyan-400/30":"border-2 border-white/20"}
                      `,style:{backgroundImage:dd?`url(${dd})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:dd?l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4",children:l.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg text-center",children:Q.name})}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-8xl mb-4 drop-shadow-lg",children:Q.emoji}),l.jsx("h3",{className:"text-2xl font-bold text-white drop-shadow-lg",children:Q.name})]})}),rn&&l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute -inset-4 bg-cyan-400/20 rounded-3xl blur-2xl -z-10"})]},Q.id):null})}),l.jsx("button",{onClick:bm,className:"absolute right-0 z-30 p-3 rounded-full bg-black/50 hover:bg-black/80 transition-all hover:scale-110",children:l.jsx(H5,{size:32})})]}),l.jsx(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-10 flex items-center gap-4",children:l.jsxs(M,{size:"lg",onClick:()=>e(ee.id),className:"bg-white text-black hover:bg-white/90 px-10 py-6 rounded-full font-bold text-xl shadow-2xl hover:scale-105 transition-transform flex items-center gap-3",children:[l.jsx(Fu,{fill:"black",size:24}),"Start Game"]})})]}),l.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-8 pb-6 text-zinc-500 text-sm font-medium",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"border border-zinc-600 px-2 py-1 rounded text-xs",children:""}),l.jsx("span",{className:"border border-zinc-600 px-2 py-1 rounded text-xs",children:""}),"Select"]}),l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"border border-zinc-600 px-3 py-1 rounded text-xs",children:"A"}),"OK"]})]}),l.jsx("div",{className:"relative z-10 flex items-center justify-center gap-2 pb-8",children:We.map((Q,se)=>l.jsx("button",{onClick:()=>xn(se),className:`w-2.5 h-2.5 rounded-full transition-all ${se===ct?"bg-cyan-400 w-8":"bg-zinc-600 hover:bg-zinc-500"}`},se))}),f&&l.jsx(lO,{onClose:()=>p(!1),games:We,onCoversUpdate:async()=>{const Q=await m0();y(Q)}})]})}if(t==="pokdeng")return j?l.jsx(DZ,{room:j,players:I,currentPlayerId:q,isHost:yn,isLiveMode:s,onStartGame:G,onDrawCard:A,onStandCard:L,onDealerDraw:R,onDealerStand:W,onShowdown:D,onNextRound:ne,onLeave:()=>{i(!1),zl("pokdeng")},onSetDealer:ze}):l.jsx(TZ,{onCreateRoom:async ee=>await Bl(ee,"pokdeng"),onJoinRoom:async(ee,Q)=>Di(ee,Q,"pokdeng"),onQuickStart:async ee=>{i(!0);const Q=await je(ee,!0);if(Q){const se=typeof Q=="string"?Q:Q.code;d({playerName:ee,roomCode:se,gameType:"pokdeng"})}return Q},isLoading:P,onBack:()=>e("select")});if(t==="undercover"){if(!Y)return l.jsx(wee,{onCreateRoom:async Q=>Bl(Q,"undercover"),onJoinRoom:async(Q,se)=>Di(Q,se,"undercover"),onBack:()=>e("select"),isLoading:Se});const ee=((Lb=Ee.find(Q=>Q.id===Fe))==null?void 0:Lb.is_host)||!1;return l.jsx(ste,{room:Y,players:Ee,currentPlayerId:Fe,isHost:ee,categories:we,onStartGame:nn,onRestartGame:id,onLeave:()=>zl("undercover")})}if(t==="paranoia"){if(!Oi)return l.jsx(ate,{onCreateRoom:async Q=>Bl(Q,"paranoia"),onJoinRoom:async(Q,se)=>Di(Q,se,"paranoia"),onBack:()=>e("select"),isLoading:mm});const ee=((Fb=_r.find(Q=>Q.id===od))==null?void 0:Fb.is_host)||!1;return l.jsx(cte,{room:Oi,players:_r,currentPlayerId:od,isHost:ee,onStartGame:gm,onStartRound:vm,onSelectVictim:Lo,onRevealQuestion:ym,onSkipQuestion:ad,onLeave:()=>zl("paranoia")})}if(t==="5-sec"){if(!Wn)return l.jsx(wte,{onCreateRoom:async Q=>Bl(Q,"5-sec"),onJoinRoom:async(Q,se)=>Di(Q,se,"5-sec"),onBack:()=>e("select"),isLoading:xm});const ee=(($b=Ul.find(Q=>Q.id===Gr))==null?void 0:$b.is_host)||!1;return l.jsx(_te,{room:Wn,players:Ul,currentPlayerId:Gr,isHost:ee,onStartGame:cd,onStartRound:wm,onFinishAnswering:Vl,onVote:Cr,onLeave:()=>zl("5-sec")})}return w?l.jsx(kZ,{room:w,players:v,currentPlayerId:g,isHost:Te,onStartGame:C,onDrawCard:E,onReshuffle:N,onLeave:()=>zl("doraemon")}):l.jsx(vZ,{onCreateRoom:async ee=>Bl(ee,"doraemon"),onJoinRoom:async(ee,Q)=>Di(ee,Q,"doraemon"),onQuickStart:async ee=>{const Q=await T(ee);if(Q){const se=typeof Q=="string"?Q:Q.code;d({playerName:ee,roomCode:se,gameType:"doraemon"})}return Q},isLoading:x,onBack:()=>e("select")})},Nte=()=>{const t=ZR();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),l.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};function kte(){const[t,e]=m.useState("connected"),[n,r]=m.useState(navigator.onLine),[s,i]=m.useState(null),o=m.useRef(0),a=10,c=m.useRef(null),u=m.useCallback(async()=>{if(document.visibilityState==="visible"&&"wakeLock"in navigator&&!c.current)try{c.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock acquired"),c.current.addEventListener("release",()=>{console.log("Wake Lock released"),c.current=null})}catch(f){f.name!=="NotAllowedError"&&console.log("Wake Lock request failed:",f)}},[]),d=m.useCallback(()=>{c.current&&(c.current.release(),c.current=null)},[]),h=m.useCallback(()=>{if(o.current>=a){console.log("Max reconnection attempts reached"),e("disconnected");return}const f=Math.min(1e3*Math.pow(2,o.current),3e4);console.log(`Reconnecting in ${f}ms (attempt ${o.current+1})`),e("reconnecting"),setTimeout(async()=>{try{await O.realtime.connect(),e("connected"),i(new Date),o.current=0,console.log("Reconnected successfully")}catch(p){console.error("Reconnection failed:",p),o.current++,h()}},f)},[]);return m.useEffect(()=>{const f=()=>{console.log("Network is back online"),r(!0),h()},p=()=>{console.log("Network went offline"),r(!1),e("disconnected")};return window.addEventListener("online",f),window.addEventListener("offline",p),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[h]),m.useEffect(()=>{const f=async()=>{document.visibilityState==="visible"?(console.log("Page became visible, checking connection..."),await u(),(!n||t==="disconnected")&&h()):(console.log("Page became hidden"),d())};return document.addEventListener("visibilitychange",f),u(),()=>{document.removeEventListener("visibilitychange",f),d()}},[n,t,h,u,d]),m.useEffect(()=>{const f=O.channel("connection-monitor");return f.on("system",{event:"*"},p=>{console.log("Supabase system event:",p)}),f.subscribe(p=>{console.log("Supabase channel status:",p),p==="SUBSCRIBED"?(e("connected"),i(new Date),o.current=0):(p==="CLOSED"||p==="CHANNEL_ERROR")&&e("disconnected")}),()=>{O.removeChannel(f)}},[]),m.useEffect(()=>{t==="connected"&&!s&&i(new Date)},[t,s]),{status:t,isOnline:n,reconnect:h,lastConnectedAt:s}}function Tte({showWhenConnected:t=!1}){const{status:e,isOnline:n,reconnect:r}=kte();if(e==="connected"&&!t)return null;const i=((a,c)=>{if(!c)return{icon:aS,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};switch(a){case"reconnecting":return{icon:Jh,text:"...",bgColor:"bg-yellow-500",textColor:"text-black",showRetry:!1,iconClass:"animate-spin"};case"disconnected":return{icon:aS,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};case"connected":return{icon:n3,text:"",bgColor:"bg-green-600",textColor:"text-white",showRetry:!1}}})(e,n),o=i.icon;return l.jsx(qp,{children:l.jsx(pe.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-50 ${i.bgColor} ${i.textColor} px-4 py-3`,children:l.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[l.jsx(o,{className:`w-5 h-5 ${i.iconClass||""}`}),l.jsx("span",{className:"font-medium",children:i.text}),i.showRetry&&l.jsxs(M,{size:"sm",variant:"secondary",onClick:r,className:"ml-2 px-3 py-1 h-auto text-sm",children:[l.jsx(Jh,{className:"w-4 h-4 mr-1"}),""]})]})})})}const Rte=new E6,jte=()=>l.jsx(k6,{client:Rte,children:l.jsx(aq,{children:l.jsxs(t6,{children:[l.jsx(Tte,{}),l.jsx(F3,{}),l.jsx(gF,{}),l.jsx(hU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsxs(cU,{children:[l.jsx(ly,{path:"/",element:l.jsx(Ete,{})}),l.jsx(ly,{path:"*",element:l.jsx(Nte,{})})]})})]})})});ite();xT(document.getElementById("root")).render(l.jsx(jte,{}));
