var $b=t=>{throw TypeError(t)};var _m=(t,e,n)=>e.has(t)||$b("Cannot "+n);var F=(t,e,n)=>(_m(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?$b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,r)=>(_m(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ot=(t,e,n)=>(_m(t,e,"access private method"),n);var dd=(t,e,n,r)=>({set _(s){de(t,e,s,n)},get _(){return F(t,e,r)}});function gM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function sN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iN={exports:{}},Qf={},oN={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=Symbol.for("react.element"),vM=Symbol.for("react.portal"),yM=Symbol.for("react.fragment"),wM=Symbol.for("react.strict_mode"),xM=Symbol.for("react.profiler"),bM=Symbol.for("react.provider"),_M=Symbol.for("react.context"),SM=Symbol.for("react.forward_ref"),CM=Symbol.for("react.suspense"),EM=Symbol.for("react.memo"),NM=Symbol.for("react.lazy"),Ub=Symbol.iterator;function kM(t){return t===null||typeof t!="object"?null:(t=Ub&&t[Ub]||t["@@iterator"],typeof t=="function"?t:null)}var aN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lN=Object.assign,cN={};function gl(t,e,n){this.props=t,this.context=e,this.refs=cN,this.updater=n||aN}gl.prototype.isReactComponent={};gl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uN(){}uN.prototype=gl.prototype;function E0(t,e,n){this.props=t,this.context=e,this.refs=cN,this.updater=n||aN}var N0=E0.prototype=new uN;N0.constructor=E0;lN(N0,gl.prototype);N0.isPureReactComponent=!0;var Vb=Array.isArray,dN=Object.prototype.hasOwnProperty,k0={current:null},hN={key:!0,ref:!0,__self:!0,__source:!0};function fN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)dN.call(e,r)&&!hN.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ju,type:t,key:i,ref:o,props:s,_owner:k0.current}}function TM(t,e){return{$$typeof:ju,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function T0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ju}function RM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bb=/\/+/g;function Sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RM(""+t.key):e.toString(36)}function Zd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ju:case vM:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Sm(o,0):r,Vb(s)?(n="",t!=null&&(n=t.replace(Bb,"$&/")+"/"),Zd(s,e,n,"",function(u){return u})):s!=null&&(T0(s)&&(s=TM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Bb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Vb(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Sm(i,a);o+=Zd(i,e,n,c,s)}else if(c=kM(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Sm(i,a++),o+=Zd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hd(t,e,n){if(t==null)return t;var r=[],s=0;return Zd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},eh={transition:null},IM={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:eh,ReactCurrentOwner:k0};function pN(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:hd,forEach:function(t,e,n){hd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!T0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=gl;we.Fragment=yM;we.Profiler=xM;we.PureComponent=E0;we.StrictMode=wM;we.Suspense=CM;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IM;we.act=pN;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lN({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=k0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)dN.call(e,c)&&!hN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ju,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:_M,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bM,_context:t},t.Consumer=t};we.createElement=fN;we.createFactory=function(t){var e=fN.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:SM,render:t}};we.isValidElement=T0;we.lazy=function(t){return{$$typeof:NM,_payload:{_status:-1,_result:t},_init:jM}};we.memo=function(t,e){return{$$typeof:EM,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=eh.transition;eh.transition={};try{t()}finally{eh.transition=e}};we.unstable_act=pN;we.useCallback=function(t,e){return en.current.useCallback(t,e)};we.useContext=function(t){return en.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return en.current.useDeferredValue(t)};we.useEffect=function(t,e){return en.current.useEffect(t,e)};we.useId=function(){return en.current.useId()};we.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return en.current.useMemo(t,e)};we.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};we.useRef=function(t){return en.current.useRef(t)};we.useState=function(t){return en.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return en.current.useTransition()};we.version="18.3.1";oN.exports=we;var m=oN.exports;const z=sN(m),R0=gM({__proto__:null,default:z},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PM=m,AM=Symbol.for("react.element"),OM=Symbol.for("react.fragment"),DM=Object.prototype.hasOwnProperty,MM=PM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LM={key:!0,ref:!0,__self:!0,__source:!0};function mN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DM.call(e,r)&&!LM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AM,type:t,key:i,ref:o,props:s,_owner:MM.current}}Qf.Fragment=OM;Qf.jsx=mN;Qf.jsxs=mN;iN.exports=Qf;var l=iN.exports,gN={exports:{}},Rn={},vN={exports:{}},yN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,L){var R=A.length;A.push(L);e:for(;0<R;){var W=R-1>>>1,D=A[W];if(0<s(D,L))A[W]=L,A[R]=D,R=W;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],R=A.pop();if(R!==L){A[0]=R;e:for(var W=0,D=A.length,te=D>>>1;W<te;){var re=2*(W+1)-1,je=A[re],ze=re+1,Y=A[ze];if(0>s(je,R))ze<D&&0>s(Y,je)?(A[W]=Y,A[ze]=R,W=ze):(A[W]=je,A[re]=R,W=re);else if(ze<D&&0>s(Y,R))A[W]=Y,A[ze]=R,W=ze;else break e}}return L}function s(A,L){var R=A.sortIndex-L.sortIndex;return R!==0?R:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,b=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=A)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function S(A){if(y=!1,w(A),!b)if(n(c)!==null)b=!0,U(_);else{var L=n(u);L!==null&&G(S,L.startTime-A)}}function _(A,L){b=!1,y&&(y=!1,v(N),N=-1),p=!0;var R=f;try{for(w(L),h=n(c);h!==null&&(!(h.expirationTime>L)||A&&!j());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var D=W(h.expirationTime<=L);L=t.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),w(L)}else r(c);h=n(c)}if(h!==null)var te=!0;else{var re=n(u);re!==null&&G(S,re.startTime-L),te=!1}return te}finally{h=null,f=R,p=!1}}var C=!1,E=null,N=-1,k=5,T=-1;function j(){return!(t.unstable_now()-T<k)}function I(){if(E!==null){var A=t.unstable_now();T=A;var L=!0;try{L=E(!0,A)}finally{L?q():(C=!1,E=null)}}else C=!1}var q;if(typeof g=="function")q=function(){g(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,V=P.port2;P.port1.onmessage=I,q=function(){V.postMessage(null)}}else q=function(){x(I,0)};function U(A){E=A,C||(C=!0,q())}function G(A,L){N=x(function(){A(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){b||p||(b=!0,U(_))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var R=f;f=L;try{return A()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var R=f;f=A;try{return L()}finally{f=R}},t.unstable_scheduleCallback=function(A,L,R){var W=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?W+R:W):R=W,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=R+D,A={id:d++,callback:L,priorityLevel:A,startTime:R,expirationTime:D,sortIndex:-1},R>W?(A.sortIndex=R,e(u,A),n(c)===null&&A===n(u)&&(y?(v(N),N=-1):y=!0,G(S,R-W))):(A.sortIndex=D,e(c,A),b||p||(b=!0,U(_))),A},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(A){var L=f;return function(){var R=f;f=L;try{return A.apply(this,arguments)}finally{f=R}}}})(yN);vN.exports=yN;var FM=vN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M=m,Tn=FM;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wN=new Set,Mc={};function Io(t,e){Qa(t,e),Qa(t+"Capture",e)}function Qa(t,e){for(Mc[t]=e,t=0;t<e.length;t++)wN.add(e[t])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jg=Object.prototype.hasOwnProperty,UM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zb={},Wb={};function VM(t){return Jg.call(Wb,t)?!0:Jg.call(zb,t)?!1:UM.test(t)?Wb[t]=!0:(zb[t]=!0,!1)}function BM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zM(t,e,n,r){if(e===null||typeof e>"u"||BM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var j0=/[\-:]([a-z])/g;function I0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(j0,I0);Pt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(j0,I0);Pt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(j0,I0);Pt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function P0(t,e,n,r){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zM(e,n,s,r)&&(n=null),r||s===null?VM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ws=$M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fd=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),Xg=Symbol.for("react.profiler"),xN=Symbol.for("react.provider"),bN=Symbol.for("react.context"),O0=Symbol.for("react.forward_ref"),Zg=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),D0=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),_N=Symbol.for("react.offscreen"),Hb=Symbol.iterator;function zl(t){return t===null||typeof t!="object"?null:(t=Hb&&t[Hb]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Cm;function ic(t){if(Cm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cm=e&&e[1]||""}return`
`+Cm+t}var Em=!1;function Nm(t,e){if(!t||Em)return"";Em=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Em=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ic(t):""}function WM(t){switch(t.tag){case 5:return ic(t.type);case 16:return ic("Lazy");case 13:return ic("Suspense");case 19:return ic("SuspenseList");case 0:case 2:case 15:return t=Nm(t.type,!1),t;case 11:return t=Nm(t.type.render,!1),t;case 1:return t=Nm(t.type,!0),t;default:return""}}function tv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case Xg:return"Profiler";case A0:return"StrictMode";case Zg:return"Suspense";case ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bN:return(t.displayName||"Context")+".Consumer";case xN:return(t._context.displayName||"Context")+".Provider";case O0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D0:return e=t.displayName||null,e!==null?e:tv(t.type)||"Memo";case Os:e=t._payload,t=t._init;try{return tv(t(e))}catch{}}return null}function HM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(e);case 8:return e===A0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qM(t){var e=SN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){t._valueTracker||(t._valueTracker=qM(t))}function CN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=SN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nv(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function EN(t,e){e=e.checked,e!=null&&P0(t,"checked",e,!1)}function rv(t,e){EN(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sv(t,e.type,n):e.hasOwnProperty("defaultValue")&&sv(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sv(t,e,n){(e!=="number"||Eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oc=Array.isArray;function Sa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function iv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(oc(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function NN(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,TN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GM=["Webkit","ms","Moz","O"];Object.keys(fc).forEach(function(t){GM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fc[e]=fc[t]})});function RN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fc.hasOwnProperty(t)&&fc[t]?(""+e).trim():e+"px"}function jN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=RN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KM=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function av(t,e){if(e){if(KM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function lv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cv=null;function M0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uv=null,Ca=null,Ea=null;function Qb(t){if(t=Au(t)){if(typeof uv!="function")throw Error(H(280));var e=t.stateNode;e&&(e=tp(e),uv(t.stateNode,t.type,e))}}function IN(t){Ca?Ea?Ea.push(t):Ea=[t]:Ca=t}function PN(){if(Ca){var t=Ca,e=Ea;if(Ea=Ca=null,Qb(t),e)for(t=0;t<e.length;t++)Qb(e[t])}}function AN(t,e){return t(e)}function ON(){}var km=!1;function DN(t,e,n){if(km)return t(e,n);km=!0;try{return AN(t,e,n)}finally{km=!1,(Ca!==null||Ea!==null)&&(ON(),PN())}}function Fc(t,e){var n=t.stateNode;if(n===null)return null;var r=tp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var dv=!1;if(as)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){dv=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{dv=!1}function YM(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var pc=!1,Nh=null,kh=!1,hv=null,QM={onError:function(t){pc=!0,Nh=t}};function JM(t,e,n,r,s,i,o,a,c){pc=!1,Nh=null,YM.apply(QM,arguments)}function XM(t,e,n,r,s,i,o,a,c){if(JM.apply(this,arguments),pc){if(pc){var u=Nh;pc=!1,Nh=null}else throw Error(H(198));kh||(kh=!0,hv=u)}}function Po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jb(t){if(Po(t)!==t)throw Error(H(188))}function ZM(t){var e=t.alternate;if(!e){if(e=Po(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jb(s),t;if(i===r)return Jb(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function LN(t){return t=ZM(t),t!==null?FN(t):null}function FN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FN(t);if(e!==null)return e;t=t.sibling}return null}var $N=Tn.unstable_scheduleCallback,Xb=Tn.unstable_cancelCallback,eL=Tn.unstable_shouldYield,tL=Tn.unstable_requestPaint,st=Tn.unstable_now,nL=Tn.unstable_getCurrentPriorityLevel,L0=Tn.unstable_ImmediatePriority,UN=Tn.unstable_UserBlockingPriority,Th=Tn.unstable_NormalPriority,rL=Tn.unstable_LowPriority,VN=Tn.unstable_IdlePriority,Jf=null,Ar=null;function sL(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Jf,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:aL,iL=Math.log,oL=Math.LN2;function aL(t){return t>>>=0,t===0?32:31-(iL(t)/oL|0)|0}var gd=64,vd=4194304;function ac(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ac(a):(i&=o,i!==0&&(r=ac(i)))}else o=n&~s,o!==0?r=ac(o):i!==0&&(r=ac(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),s=1<<n,r|=t[n],e&=~s;return r}function lL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=lL(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function fv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BN(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function Tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function uL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ur(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function F0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function zN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WN,$0,HN,qN,GN,pv=!1,yd=[],ti=null,ni=null,ri=null,$c=new Map,Uc=new Map,Ls=[],dL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zb(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":$c.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(e.pointerId)}}function Hl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Au(e),e!==null&&$0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hL(t,e,n,r,s){switch(e){case"focusin":return ti=Hl(ti,t,e,n,r,s),!0;case"dragenter":return ni=Hl(ni,t,e,n,r,s),!0;case"mouseover":return ri=Hl(ri,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return $c.set(i,Hl($c.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Uc.set(i,Hl(Uc.get(i)||null,t,e,n,r,s)),!0}return!1}function KN(t){var e=qi(t.target);if(e!==null){var n=Po(e);if(n!==null){if(e=n.tag,e===13){if(e=MN(n),e!==null){t.blockedOn=e,GN(t.priority,function(){HN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cv=r,n.target.dispatchEvent(r),cv=null}else return e=Au(n),e!==null&&$0(e),t.blockedOn=n,!1;e.shift()}return!0}function e_(t,e,n){th(t)&&n.delete(e)}function fL(){pv=!1,ti!==null&&th(ti)&&(ti=null),ni!==null&&th(ni)&&(ni=null),ri!==null&&th(ri)&&(ri=null),$c.forEach(e_),Uc.forEach(e_)}function ql(t,e){t.blockedOn===e&&(t.blockedOn=null,pv||(pv=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,fL)))}function Vc(t){function e(s){return ql(s,t)}if(0<yd.length){ql(yd[0],t);for(var n=1;n<yd.length;n++){var r=yd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&ql(ti,t),ni!==null&&ql(ni,t),ri!==null&&ql(ri,t),$c.forEach(e),Uc.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)KN(n),n.blockedOn===null&&Ls.shift()}var Na=ws.ReactCurrentBatchConfig,jh=!0;function pL(t,e,n,r){var s=Re,i=Na.transition;Na.transition=null;try{Re=1,U0(t,e,n,r)}finally{Re=s,Na.transition=i}}function mL(t,e,n,r){var s=Re,i=Na.transition;Na.transition=null;try{Re=4,U0(t,e,n,r)}finally{Re=s,Na.transition=i}}function U0(t,e,n,r){if(jh){var s=mv(t,e,n,r);if(s===null)Fm(t,e,r,Ih,n),Zb(t,r);else if(hL(s,t,e,n,r))r.stopPropagation();else if(Zb(t,r),e&4&&-1<dL.indexOf(t)){for(;s!==null;){var i=Au(s);if(i!==null&&WN(i),i=mv(t,e,n,r),i===null&&Fm(t,e,r,Ih,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fm(t,e,r,null,n)}}var Ih=null;function mv(t,e,n,r){if(Ih=null,t=M0(r),t=qi(t),t!==null)if(e=Po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ih=t,null}function YN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nL()){case L0:return 1;case UN:return 4;case Th:case rL:return 16;case VN:return 536870912;default:return 16}default:return 16}}var Xs=null,V0=null,nh=null;function QN(){if(nh)return nh;var t,e=V0,n=e.length,r,s="value"in Xs?Xs.value:Xs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nh=s.slice(t,1<r?1-r:void 0)}function rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wd(){return!0}function t_(){return!1}function jn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wd:t_,this.isPropagationStopped=t_,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),e}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=jn(vl),Pu=Je({},vl,{view:0,detail:0}),gL=jn(Pu),Rm,jm,Gl,Xf=Je({},Pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gl&&(Gl&&t.type==="mousemove"?(Rm=t.screenX-Gl.screenX,jm=t.screenY-Gl.screenY):jm=Rm=0,Gl=t),Rm)},movementY:function(t){return"movementY"in t?t.movementY:jm}}),n_=jn(Xf),vL=Je({},Xf,{dataTransfer:0}),yL=jn(vL),wL=Je({},Pu,{relatedTarget:0}),Im=jn(wL),xL=Je({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),bL=jn(xL),_L=Je({},vl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SL=jn(_L),CL=Je({},vl,{data:0}),r_=jn(CL),EL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kL[t])?!!e[t]:!1}function z0(){return TL}var RL=Je({},Pu,{key:function(t){if(t.key){var e=EL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z0,charCode:function(t){return t.type==="keypress"?rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jL=jn(RL),IL=Je({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s_=jn(IL),PL=Je({},Pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z0}),AL=jn(PL),OL=Je({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),DL=jn(OL),ML=Je({},Xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LL=jn(ML),FL=[9,13,27,32],W0=as&&"CompositionEvent"in window,mc=null;as&&"documentMode"in document&&(mc=document.documentMode);var $L=as&&"TextEvent"in window&&!mc,JN=as&&(!W0||mc&&8<mc&&11>=mc),i_=" ",o_=!1;function XN(t,e){switch(t){case"keyup":return FL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function UL(t,e){switch(t){case"compositionend":return ZN(e);case"keypress":return e.which!==32?null:(o_=!0,i_);case"textInput":return t=e.data,t===i_&&o_?null:t;default:return null}}function VL(t,e){if(na)return t==="compositionend"||!W0&&XN(t,e)?(t=QN(),nh=V0=Xs=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JN&&e.locale!=="ko"?null:e.data;default:return null}}var BL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!BL[t.type]:e==="textarea"}function ek(t,e,n,r){IN(r),e=Ph(e,"onChange"),0<e.length&&(n=new B0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gc=null,Bc=null;function zL(t){dk(t,0)}function Zf(t){var e=ia(t);if(CN(e))return t}function WL(t,e){if(t==="change")return e}var tk=!1;if(as){var Pm;if(as){var Am="oninput"in document;if(!Am){var l_=document.createElement("div");l_.setAttribute("oninput","return;"),Am=typeof l_.oninput=="function"}Pm=Am}else Pm=!1;tk=Pm&&(!document.documentMode||9<document.documentMode)}function c_(){gc&&(gc.detachEvent("onpropertychange",nk),Bc=gc=null)}function nk(t){if(t.propertyName==="value"&&Zf(Bc)){var e=[];ek(e,Bc,t,M0(t)),DN(zL,e)}}function HL(t,e,n){t==="focusin"?(c_(),gc=e,Bc=n,gc.attachEvent("onpropertychange",nk)):t==="focusout"&&c_()}function qL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zf(Bc)}function GL(t,e){if(t==="click")return Zf(e)}function KL(t,e){if(t==="input"||t==="change")return Zf(e)}function YL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:YL;function zc(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jg.call(e,s)||!fr(t[s],e[s]))return!1}return!0}function u_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d_(t,e){var n=u_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u_(n)}}function rk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sk(){for(var t=window,e=Eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Eh(t.document)}return e}function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QL(t){var e=sk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rk(n.ownerDocument.documentElement,n)){if(r!==null&&H0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=d_(n,i);var o=d_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JL=as&&"documentMode"in document&&11>=document.documentMode,ra=null,gv=null,vc=null,vv=!1;function h_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vv||ra==null||ra!==Eh(r)||(r=ra,"selectionStart"in r&&H0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&zc(vc,r)||(vc=r,r=Ph(gv,"onSelect"),0<r.length&&(e=new B0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ra)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},Om={},ik={};as&&(ik=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function ep(t){if(Om[t])return Om[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ik)return Om[t]=e[n];return t}var ok=ep("animationend"),ak=ep("animationiteration"),lk=ep("animationstart"),ck=ep("transitionend"),uk=new Map,f_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){uk.set(t,e),Io(e,[t])}for(var Dm=0;Dm<f_.length;Dm++){var Mm=f_[Dm],XL=Mm.toLowerCase(),ZL=Mm[0].toUpperCase()+Mm.slice(1);Ei(XL,"on"+ZL)}Ei(ok,"onAnimationEnd");Ei(ak,"onAnimationIteration");Ei(lk,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(ck,"onTransitionEnd");Qa("onMouseEnter",["mouseout","mouseover"]);Qa("onMouseLeave",["mouseout","mouseover"]);Qa("onPointerEnter",["pointerout","pointerover"]);Qa("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e4=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function p_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XM(r,e,void 0,t),t.currentTarget=null}function dk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;p_(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;p_(s,a,u),i=c}}}if(kh)throw t=hv,kh=!1,hv=null,t}function Ue(t,e){var n=e[_v];n===void 0&&(n=e[_v]=new Set);var r=t+"__bubble";n.has(r)||(hk(e,t,2,!1),n.add(r))}function Lm(t,e,n){var r=0;e&&(r|=4),hk(n,t,r,e)}var bd="_reactListening"+Math.random().toString(36).slice(2);function Wc(t){if(!t[bd]){t[bd]=!0,wN.forEach(function(n){n!=="selectionchange"&&(e4.has(n)||Lm(n,!1,t),Lm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bd]||(e[bd]=!0,Lm("selectionchange",!1,e))}}function hk(t,e,n,r){switch(YN(e)){case 1:var s=pL;break;case 4:s=mL;break;default:s=U0}n=s.bind(null,e,n,t),s=void 0,!dv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qi(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}DN(function(){var u=i,d=M0(n),h=[];e:{var f=uk.get(t);if(f!==void 0){var p=B0,b=t;switch(t){case"keypress":if(rh(n)===0)break e;case"keydown":case"keyup":p=jL;break;case"focusin":b="focus",p=Im;break;case"focusout":b="blur",p=Im;break;case"beforeblur":case"afterblur":p=Im;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=n_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=yL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=AL;break;case ok:case ak:case lk:p=bL;break;case ck:p=DL;break;case"scroll":p=gL;break;case"wheel":p=LL;break;case"copy":case"cut":case"paste":p=SL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=s_}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,w;g!==null;){w=g;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=Fc(g,v),S!=null&&y.push(Hc(g,S,w)))),x)break;g=g.return}0<y.length&&(f=new p(f,b,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==cv&&(b=n.relatedTarget||n.fromElement)&&(qi(b)||b[ls]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=u,b=b?qi(b):null,b!==null&&(x=Po(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(y=n_,S="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=s_,S="onPointerLeave",v="onPointerEnter",g="pointer"),x=p==null?f:ia(p),w=b==null?f:ia(b),f=new y(S,g+"leave",p,n,d),f.target=x,f.relatedTarget=w,S=null,qi(d)===u&&(y=new y(v,g+"enter",b,n,d),y.target=w,y.relatedTarget=x,S=y),x=S,p&&b)t:{for(y=p,v=b,g=0,w=y;w;w=$o(w))g++;for(w=0,S=v;S;S=$o(S))w++;for(;0<g-w;)y=$o(y),g--;for(;0<w-g;)v=$o(v),w--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=$o(y),v=$o(v)}y=null}else y=null;p!==null&&m_(h,f,p,y,!1),b!==null&&x!==null&&m_(h,x,b,y,!0)}}e:{if(f=u?ia(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=WL;else if(a_(f))if(tk)_=KL;else{_=qL;var C=HL}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=GL);if(_&&(_=_(t,u))){ek(h,_,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&sv(f,"number",f.value)}switch(C=u?ia(u):window,t){case"focusin":(a_(C)||C.contentEditable==="true")&&(ra=C,gv=u,vc=null);break;case"focusout":vc=gv=ra=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,h_(h,n,d);break;case"selectionchange":if(JL)break;case"keydown":case"keyup":h_(h,n,d)}var E;if(W0)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else na?XN(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(JN&&n.locale!=="ko"&&(na||N!=="onCompositionStart"?N==="onCompositionEnd"&&na&&(E=QN()):(Xs=d,V0="value"in Xs?Xs.value:Xs.textContent,na=!0)),C=Ph(u,N),0<C.length&&(N=new r_(N,t,null,n,d),h.push({event:N,listeners:C}),E?N.data=E:(E=ZN(n),E!==null&&(N.data=E)))),(E=$L?UL(t,n):VL(t,n))&&(u=Ph(u,"onBeforeInput"),0<u.length&&(d=new r_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}dk(h,e)})}function Hc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ph(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fc(t,n),i!=null&&r.unshift(Hc(t,i,s)),i=Fc(t,e),i!=null&&r.push(Hc(t,i,s))),t=t.return}return r}function $o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Fc(n,i),c!=null&&o.unshift(Hc(n,c,a))):s||(c=Fc(n,i),c!=null&&o.push(Hc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var t4=/\r\n?/g,n4=/\u0000|\uFFFD/g;function g_(t){return(typeof t=="string"?t:""+t).replace(t4,`
`).replace(n4,"")}function _d(t,e,n){if(e=g_(e),g_(t)!==e&&n)throw Error(H(425))}function Ah(){}var yv=null,wv=null;function xv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bv=typeof setTimeout=="function"?setTimeout:void 0,r4=typeof clearTimeout=="function"?clearTimeout:void 0,v_=typeof Promise=="function"?Promise:void 0,s4=typeof queueMicrotask=="function"?queueMicrotask:typeof v_<"u"?function(t){return v_.resolve(null).then(t).catch(i4)}:bv;function i4(t){setTimeout(function(){throw t})}function $m(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vc(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function y_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yl=Math.random().toString(36).slice(2),jr="__reactFiber$"+yl,qc="__reactProps$"+yl,ls="__reactContainer$"+yl,_v="__reactEvents$"+yl,o4="__reactListeners$"+yl,a4="__reactHandles$"+yl;function qi(t){var e=t[jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ls]||n[jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=y_(t);t!==null;){if(n=t[jr])return n;t=y_(t)}return e}t=n,n=t.parentNode}return null}function Au(t){return t=t[jr]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function tp(t){return t[qc]||null}var Sv=[],oa=-1;function Ni(t){return{current:t}}function Be(t){0>oa||(t.current=Sv[oa],Sv[oa]=null,oa--)}function Me(t,e){oa++,Sv[oa]=t.current,t.current=e}var gi={},zt=Ni(gi),cn=Ni(!1),mo=gi;function Ja(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function un(t){return t=t.childContextTypes,t!=null}function Oh(){Be(cn),Be(zt)}function w_(t,e,n){if(zt.current!==gi)throw Error(H(168));Me(zt,e),Me(cn,n)}function fk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,HM(t)||"Unknown",s));return Je({},n,r)}function Dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,mo=zt.current,Me(zt,t),Me(cn,cn.current),!0}function x_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=fk(t,e,mo),r.__reactInternalMemoizedMergedChildContext=t,Be(cn),Be(zt),Me(zt,t)):Be(cn),Me(cn,n)}var Xr=null,np=!1,Um=!1;function pk(t){Xr===null?Xr=[t]:Xr.push(t)}function l4(t){np=!0,pk(t)}function ki(){if(!Um&&Xr!==null){Um=!0;var t=0,e=Re;try{var n=Xr;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xr=null,np=!1}catch(s){throw Xr!==null&&(Xr=Xr.slice(t+1)),$N(L0,ki),s}finally{Re=e,Um=!1}}return null}var aa=[],la=0,Mh=null,Lh=0,On=[],Dn=0,go=null,es=1,ts="";function Fi(t,e){aa[la++]=Lh,aa[la++]=Mh,Mh=t,Lh=e}function mk(t,e,n){On[Dn++]=es,On[Dn++]=ts,On[Dn++]=go,go=t;var r=es;t=ts;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,es=1<<32-ur(e)+s|n<<s|r,ts=i+t}else es=1<<i|n<<s|r,ts=t}function q0(t){t.return!==null&&(Fi(t,1),mk(t,1,0))}function G0(t){for(;t===Mh;)Mh=aa[--la],aa[la]=null,Lh=aa[--la],aa[la]=null;for(;t===go;)go=On[--Dn],On[Dn]=null,ts=On[--Dn],On[Dn]=null,es=On[--Dn],On[Dn]=null}var Nn=null,En=null,He=!1,sr=null;function gk(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,En=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=go!==null?{id:es,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,En=null,!0):!1;default:return!1}}function Cv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ev(t){if(He){var e=En;if(e){var n=e;if(!b_(t,e)){if(Cv(t))throw Error(H(418));e=si(n.nextSibling);var r=Nn;e&&b_(t,e)?gk(r,n):(t.flags=t.flags&-4097|2,He=!1,Nn=t)}}else{if(Cv(t))throw Error(H(418));t.flags=t.flags&-4097|2,He=!1,Nn=t}}}function __(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Sd(t){if(t!==Nn)return!1;if(!He)return __(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xv(t.type,t.memoizedProps)),e&&(e=En)){if(Cv(t))throw vk(),Error(H(418));for(;e;)gk(t,e),e=si(e.nextSibling)}if(__(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Nn?si(t.stateNode.nextSibling):null;return!0}function vk(){for(var t=En;t;)t=si(t.nextSibling)}function Xa(){En=Nn=null,He=!1}function K0(t){sr===null?sr=[t]:sr.push(t)}var c4=ws.ReactCurrentBatchConfig;function Kl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Cd(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function S_(t){var e=t._init;return e(t._payload)}function yk(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=li(v,g),v.index=0,v.sibling=null,v}function i(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,S){return g===null||g.tag!==6?(g=Gm(w,v.mode,S),g.return=v,g):(g=s(g,w),g.return=v,g)}function c(v,g,w,S){var _=w.type;return _===ta?d(v,g,w.props.children,S,w.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Os&&S_(_)===g.type)?(S=s(g,w.props),S.ref=Kl(v,g,w),S.return=v,S):(S=uh(w.type,w.key,w.props,null,v.mode,S),S.ref=Kl(v,g,w),S.return=v,S)}function u(v,g,w,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Km(w,v.mode,S),g.return=v,g):(g=s(g,w.children||[]),g.return=v,g)}function d(v,g,w,S,_){return g===null||g.tag!==7?(g=ao(w,v.mode,S,_),g.return=v,g):(g=s(g,w),g.return=v,g)}function h(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Gm(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case fd:return w=uh(g.type,g.key,g.props,null,v.mode,w),w.ref=Kl(v,null,g),w.return=v,w;case ea:return g=Km(g,v.mode,w),g.return=v,g;case Os:var S=g._init;return h(v,S(g._payload),w)}if(oc(g)||zl(g))return g=ao(g,v.mode,w,null),g.return=v,g;Cd(v,g)}return null}function f(v,g,w,S){var _=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(v,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:return w.key===_?c(v,g,w,S):null;case ea:return w.key===_?u(v,g,w,S):null;case Os:return _=w._init,f(v,g,_(w._payload),S)}if(oc(w)||zl(w))return _!==null?null:d(v,g,w,S,null);Cd(v,w)}return null}function p(v,g,w,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,a(g,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case fd:return v=v.get(S.key===null?w:S.key)||null,c(g,v,S,_);case ea:return v=v.get(S.key===null?w:S.key)||null,u(g,v,S,_);case Os:var C=S._init;return p(v,g,w,C(S._payload),_)}if(oc(S)||zl(S))return v=v.get(w)||null,d(g,v,S,_,null);Cd(g,S)}return null}function b(v,g,w,S){for(var _=null,C=null,E=g,N=g=0,k=null;E!==null&&N<w.length;N++){E.index>N?(k=E,E=null):k=E.sibling;var T=f(v,E,w[N],S);if(T===null){E===null&&(E=k);break}t&&E&&T.alternate===null&&e(v,E),g=i(T,g,N),C===null?_=T:C.sibling=T,C=T,E=k}if(N===w.length)return n(v,E),He&&Fi(v,N),_;if(E===null){for(;N<w.length;N++)E=h(v,w[N],S),E!==null&&(g=i(E,g,N),C===null?_=E:C.sibling=E,C=E);return He&&Fi(v,N),_}for(E=r(v,E);N<w.length;N++)k=p(E,v,N,w[N],S),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?N:k.key),g=i(k,g,N),C===null?_=k:C.sibling=k,C=k);return t&&E.forEach(function(j){return e(v,j)}),He&&Fi(v,N),_}function y(v,g,w,S){var _=zl(w);if(typeof _!="function")throw Error(H(150));if(w=_.call(w),w==null)throw Error(H(151));for(var C=_=null,E=g,N=g=0,k=null,T=w.next();E!==null&&!T.done;N++,T=w.next()){E.index>N?(k=E,E=null):k=E.sibling;var j=f(v,E,T.value,S);if(j===null){E===null&&(E=k);break}t&&E&&j.alternate===null&&e(v,E),g=i(j,g,N),C===null?_=j:C.sibling=j,C=j,E=k}if(T.done)return n(v,E),He&&Fi(v,N),_;if(E===null){for(;!T.done;N++,T=w.next())T=h(v,T.value,S),T!==null&&(g=i(T,g,N),C===null?_=T:C.sibling=T,C=T);return He&&Fi(v,N),_}for(E=r(v,E);!T.done;N++,T=w.next())T=p(E,v,N,T.value,S),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?N:T.key),g=i(T,g,N),C===null?_=T:C.sibling=T,C=T);return t&&E.forEach(function(I){return e(v,I)}),He&&Fi(v,N),_}function x(v,g,w,S){if(typeof w=="object"&&w!==null&&w.type===ta&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case fd:e:{for(var _=w.key,C=g;C!==null;){if(C.key===_){if(_=w.type,_===ta){if(C.tag===7){n(v,C.sibling),g=s(C,w.props.children),g.return=v,v=g;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Os&&S_(_)===C.type){n(v,C.sibling),g=s(C,w.props),g.ref=Kl(v,C,w),g.return=v,v=g;break e}n(v,C);break}else e(v,C);C=C.sibling}w.type===ta?(g=ao(w.props.children,v.mode,S,w.key),g.return=v,v=g):(S=uh(w.type,w.key,w.props,null,v.mode,S),S.ref=Kl(v,g,w),S.return=v,v=S)}return o(v);case ea:e:{for(C=w.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=s(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Km(w,v.mode,S),g.return=v,v=g}return o(v);case Os:return C=w._init,x(v,g,C(w._payload),S)}if(oc(w))return b(v,g,w,S);if(zl(w))return y(v,g,w,S);Cd(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,w),g.return=v,v=g):(n(v,g),g=Gm(w,v.mode,S),g.return=v,v=g),o(v)):n(v,g)}return x}var Za=yk(!0),wk=yk(!1),Fh=Ni(null),$h=null,ca=null,Y0=null;function Q0(){Y0=ca=$h=null}function J0(t){var e=Fh.current;Be(Fh),t._currentValue=e}function Nv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ka(t,e){$h=t,Y0=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(Y0!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if($h===null)throw Error(H(308));ca=t,$h.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var Gi=null;function X0(t){Gi===null?Gi=[t]:Gi.push(t)}function xk(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,X0(e)):(n.next=s.next,s.next=n),e.interleaved=n,cs(t,r)}function cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function Z0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function is(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cs(t,n)}return s=r.interleaved,s===null?(e.next=e,X0(r)):(e.next=s.next,s.next=e),r.interleaved=e,cs(t,n)}function sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}function C_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uh(t,e,n,r){var s=t.updateQueue;Ds=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,y=a;switch(f=e,p=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){h=b.call(p,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,f=typeof b=="function"?b.call(p,h,f):b,f==null)break e;h=Je({},h,f);break e;case 2:Ds=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yo|=o,t.lanes=o,t.memoizedState=h}}function E_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Ou={},Or=Ni(Ou),Gc=Ni(Ou),Kc=Ni(Ou);function Ki(t){if(t===Ou)throw Error(H(174));return t}function ew(t,e){switch(Me(Kc,e),Me(Gc,t),Me(Or,Ou),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ov(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ov(e,t)}Be(Or),Me(Or,e)}function el(){Be(Or),Be(Gc),Be(Kc)}function _k(t){Ki(Kc.current);var e=Ki(Or.current),n=ov(e,t.type);e!==n&&(Me(Gc,t),Me(Or,n))}function tw(t){Gc.current===t&&(Be(Or),Be(Gc))}var Ke=Ni(0);function Vh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vm=[];function nw(){for(var t=0;t<Vm.length;t++)Vm[t]._workInProgressVersionPrimary=null;Vm.length=0}var ih=ws.ReactCurrentDispatcher,Bm=ws.ReactCurrentBatchConfig,vo=0,Qe=null,ht=null,bt=null,Bh=!1,yc=!1,Yc=0,u4=0;function Dt(){throw Error(H(321))}function rw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fr(t[n],e[n]))return!1;return!0}function sw(t,e,n,r,s,i){if(vo=i,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ih.current=t===null||t.memoizedState===null?p4:m4,t=n(r,s),yc){i=0;do{if(yc=!1,Yc=0,25<=i)throw Error(H(301));i+=1,bt=ht=null,e.updateQueue=null,ih.current=g4,t=n(r,s)}while(yc)}if(ih.current=zh,e=ht!==null&&ht.next!==null,vo=0,bt=ht=Qe=null,Bh=!1,e)throw Error(H(300));return t}function iw(){var t=Yc!==0;return Yc=0,t}function Nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Qe.memoizedState=bt=t:bt=bt.next=t,bt}function Vn(){if(ht===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=bt===null?Qe.memoizedState:bt.next;if(e!==null)bt=e,ht=t;else{if(t===null)throw Error(H(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},bt===null?Qe.memoizedState=bt=t:bt=bt.next=t}return bt}function Qc(t,e){return typeof e=="function"?e(t):e}function zm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ht,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((vo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,Qe.lanes|=d,yo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,fr(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qe.lanes|=i,yo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wm(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);fr(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sk(){}function Ck(t,e){var n=Qe,r=Vn(),s=e(),i=!fr(r.memoizedState,s);if(i&&(r.memoizedState=s,on=!0),r=r.queue,ow(kk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||bt!==null&&bt.memoizedState.tag&1){if(n.flags|=2048,Jc(9,Nk.bind(null,n,r,s,e),void 0,null),Ct===null)throw Error(H(349));vo&30||Ek(n,e,s)}return s}function Ek(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nk(t,e,n,r){e.value=n,e.getSnapshot=r,Tk(e)&&Rk(t)}function kk(t,e,n){return n(function(){Tk(e)&&Rk(t)})}function Tk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fr(t,n)}catch{return!0}}function Rk(t){var e=cs(t,1);e!==null&&dr(e,t,1,-1)}function N_(t){var e=Nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},e.queue=t,t=t.dispatch=f4.bind(null,Qe,t),[e.memoizedState,t]}function Jc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jk(){return Vn().memoizedState}function oh(t,e,n,r){var s=Nr();Qe.flags|=t,s.memoizedState=Jc(1|e,n,void 0,r===void 0?null:r)}function rp(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(ht!==null){var o=ht.memoizedState;if(i=o.destroy,r!==null&&rw(r,o.deps)){s.memoizedState=Jc(e,n,i,r);return}}Qe.flags|=t,s.memoizedState=Jc(1|e,n,i,r)}function k_(t,e){return oh(8390656,8,t,e)}function ow(t,e){return rp(2048,8,t,e)}function Ik(t,e){return rp(4,2,t,e)}function Pk(t,e){return rp(4,4,t,e)}function Ak(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ok(t,e,n){return n=n!=null?n.concat([t]):null,rp(4,4,Ak.bind(null,e,t),n)}function aw(){}function Dk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Lk(t,e,n){return vo&21?(fr(n,e)||(n=BN(),Qe.lanes|=n,yo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function d4(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Bm.transition;Bm.transition={};try{t(!1),e()}finally{Re=n,Bm.transition=r}}function Fk(){return Vn().memoizedState}function h4(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$k(t))Uk(e,n);else if(n=xk(t,e,n,r),n!==null){var s=Xt();dr(n,t,r,s),Vk(n,e,r)}}function f4(t,e,n){var r=ai(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($k(t))Uk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,fr(a,o)){var c=e.interleaved;c===null?(s.next=s,X0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=xk(t,e,s,r),n!==null&&(s=Xt(),dr(n,t,r,s),Vk(n,e,r))}}function $k(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function Uk(t,e){yc=Bh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}var zh={readContext:Un,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},p4={readContext:Un,useCallback:function(t,e){return Nr().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:k_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oh(4194308,4,Ak.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oh(4194308,4,t,e)},useInsertionEffect:function(t,e){return oh(4,2,t,e)},useMemo:function(t,e){var n=Nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=h4.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=Nr();return t={current:t},e.memoizedState=t},useState:N_,useDebugValue:aw,useDeferredValue:function(t){return Nr().memoizedState=t},useTransition:function(){var t=N_(!1),e=t[0];return t=d4.bind(null,t[1]),Nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,s=Nr();if(He){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Ct===null)throw Error(H(349));vo&30||Ek(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,k_(kk.bind(null,r,i,t),[t]),r.flags|=2048,Jc(9,Nk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nr(),e=Ct.identifierPrefix;if(He){var n=ts,r=es;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=u4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},m4={readContext:Un,useCallback:Dk,useContext:Un,useEffect:ow,useImperativeHandle:Ok,useInsertionEffect:Ik,useLayoutEffect:Pk,useMemo:Mk,useReducer:zm,useRef:jk,useState:function(){return zm(Qc)},useDebugValue:aw,useDeferredValue:function(t){var e=Vn();return Lk(e,ht.memoizedState,t)},useTransition:function(){var t=zm(Qc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:Fk,unstable_isNewReconciler:!1},g4={readContext:Un,useCallback:Dk,useContext:Un,useEffect:ow,useImperativeHandle:Ok,useInsertionEffect:Ik,useLayoutEffect:Pk,useMemo:Mk,useReducer:Wm,useRef:jk,useState:function(){return Wm(Qc)},useDebugValue:aw,useDeferredValue:function(t){var e=Vn();return ht===null?e.memoizedState=t:Lk(e,ht.memoizedState,t)},useTransition:function(){var t=Wm(Qc)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:Fk,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sp={isMounted:function(t){return(t=t._reactInternals)?Po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ai(t),i=is(r,s);i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(dr(e,t,s,r),sh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=ai(t),i=is(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ii(t,i,s),e!==null&&(dr(e,t,s,r),sh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=ai(t),s=is(n,r);s.tag=2,e!=null&&(s.callback=e),e=ii(t,s,r),e!==null&&(dr(e,t,r,n),sh(e,t,r))}};function T_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zc(n,r)||!zc(s,i):!0}function Bk(t,e,n){var r=!1,s=gi,i=e.contextType;return typeof i=="object"&&i!==null?i=Un(i):(s=un(e)?mo:zt.current,r=e.contextTypes,i=(r=r!=null)?Ja(t,s):gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function R_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sp.enqueueReplaceState(e,e.state,null)}function Tv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Z0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Un(i):(i=un(e)?mo:zt.current,s.context=Ja(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sp.enqueueReplaceState(s,s.state,null),Uh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function tl(t,e){try{var n="",r=e;do n+=WM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v4=typeof WeakMap=="function"?WeakMap:Map;function zk(t,e,n){n=is(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hh||(Hh=!0,$v=r),Rv(t,e)},n}function Wk(t,e,n){n=is(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rv(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function j_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=I4.bind(null,t,e,n),e.then(t,t))}function I_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=is(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var y4=ws.ReactCurrentOwner,on=!1;function Kt(t,e,n,r){e.child=t===null?wk(e,null,n,r):Za(e,t.child,n,r)}function A_(t,e,n,r,s){n=n.render;var i=e.ref;return ka(e,s),r=sw(t,e,n,r,i,s),n=iw(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(He&&n&&q0(e),e.flags|=1,Kt(t,e,r,s),e.child)}function O_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Hk(t,e,i,r,s)):(t=uh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zc,n(o,r)&&t.ref===e.ref)return us(t,e,s)}return e.flags|=1,t=li(i,r),t.ref=e.ref,t.return=e,e.child=t}function Hk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zc(i,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,us(t,e,s)}return jv(t,e,n,r,s)}function qk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(da,bn),bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(da,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(da,bn),bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Me(da,bn),bn|=r;return Kt(t,e,s,n),e.child}function Gk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jv(t,e,n,r,s){var i=un(n)?mo:zt.current;return i=Ja(e,i),ka(e,s),n=sw(t,e,n,r,i,s),r=iw(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(He&&r&&q0(e),e.flags|=1,Kt(t,e,n,s),e.child)}function D_(t,e,n,r,s){if(un(n)){var i=!0;Dh(e)}else i=!1;if(ka(e,s),e.stateNode===null)ah(t,e),Bk(e,n,r),Tv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=un(n)?mo:zt.current,u=Ja(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&R_(e,o,r,u),Ds=!1;var f=e.memoizedState;o.state=f,Uh(e,r,o,s),c=e.memoizedState,a!==r||f!==c||cn.current||Ds?(typeof d=="function"&&(kv(e,n,d,r),c=e.memoizedState),(a=Ds||T_(e,n,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=un(n)?mo:zt.current,c=Ja(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&R_(e,o,r,c),Ds=!1,f=e.memoizedState,o.state=f,Uh(e,r,o,s);var b=e.memoizedState;a!==h||f!==b||cn.current||Ds?(typeof p=="function"&&(kv(e,n,p,r),b=e.memoizedState),(u=Ds||T_(e,n,u,r,f,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Iv(t,e,n,r,i,s)}function Iv(t,e,n,r,s,i){Gk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&x_(e,n,!1),us(t,e,i);r=e.stateNode,y4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Za(e,t.child,null,i),e.child=Za(e,null,a,i)):Kt(t,e,a,i),e.memoizedState=r.state,s&&x_(e,n,!0),e.child}function Kk(t){var e=t.stateNode;e.pendingContext?w_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w_(t,e.context,!1),ew(t,e.containerInfo)}function M_(t,e,n,r,s){return Xa(),K0(s),e.flags|=256,Kt(t,e,n,r),e.child}var Pv={dehydrated:null,treeContext:null,retryLane:0};function Av(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yk(t,e,n){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(Ke,s&1),t===null)return Ev(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ap(o,r,0,null),t=ao(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Av(n),e.memoizedState=Pv,t):lw(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return w4(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=li(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=li(a,i):(i=ao(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Av(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Pv,r}return i=t.child,t=i.sibling,r=li(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lw(t,e){return e=ap({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ed(t,e,n,r){return r!==null&&K0(r),Za(e,t.child,null,n),t=lw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hm(Error(H(422))),Ed(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ap({mode:"visible",children:r.children},s,0,null),i=ao(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Za(e,t.child,null,o),e.child.memoizedState=Av(o),e.memoizedState=Pv,i);if(!(e.mode&1))return Ed(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(H(419)),r=Hm(i,r,void 0),Ed(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=Ct,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(t,s),dr(r,t,s,-1))}return pw(),r=Hm(Error(H(421))),Ed(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=P4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=si(s.nextSibling),Nn=e,He=!0,sr=null,t!==null&&(On[Dn++]=es,On[Dn++]=ts,On[Dn++]=go,es=t.id,ts=t.overflow,go=e),e=lw(e,r.children),e.flags|=4096,e)}function L_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nv(t.return,e,n)}function qm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L_(t,n,e);else if(t.tag===19)L_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qm(e,!0,n,null,i);break;case"together":qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function x4(t,e,n){switch(e.tag){case 3:Kk(e),Xa();break;case 5:_k(e);break;case 1:un(e.type)&&Dh(e);break;case 4:ew(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(Fh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Yk(t,e,n):(Me(Ke,Ke.current&1),t=us(t,e,n),t!==null?t.sibling:null);Me(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,qk(t,e,n)}return us(t,e,n)}var Jk,Ov,Xk,Zk;Jk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ov=function(){};Xk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ki(Or.current);var i=null;switch(n){case"input":s=nv(t,s),r=nv(t,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=iv(t,s),r=iv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ah)}av(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Zk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yl(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function b4(t,e,n){var r=e.pendingProps;switch(G0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return un(e.type)&&Oh(),Mt(e),null;case 3:return r=e.stateNode,el(),Be(cn),Be(zt),nw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sr!==null&&(Bv(sr),sr=null))),Ov(t,e),Mt(e),null;case 5:tw(e);var s=Ki(Kc.current);if(n=e.type,t!==null&&e.stateNode!=null)Xk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Mt(e),null}if(t=Ki(Or.current),Sd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jr]=e,r[qc]=i,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(s=0;s<lc.length;s++)Ue(lc[s],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":qb(r,i),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",r);break;case"textarea":Kb(r,i),Ue("invalid",r)}av(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&_d(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_d(r.textContent,a,t),s=["children",""+a]):Mc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":pd(r),Gb(r,i,!0);break;case"textarea":pd(r),Yb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ah)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jr]=e,t[qc]=r,Jk(t,e,!1,!1),e.stateNode=t;e:{switch(o=lv(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),s=r;break;case"iframe":case"object":case"embed":Ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<lc.length;s++)Ue(lc[s],t);s=r;break;case"source":Ue("error",t),s=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),s=r;break;case"details":Ue("toggle",t),s=r;break;case"input":qb(t,r),s=nv(t,r),Ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":Kb(t,r),s=iv(t,r),Ue("invalid",t);break;default:s=r}av(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?jN(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&TN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Lc(t,c):typeof c=="number"&&Lc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",t):c!=null&&P0(t,i,c,o))}switch(n){case"input":pd(t),Gb(t,r,!1);break;case"textarea":pd(t),Yb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Sa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ah)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)Zk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ki(Kc.current),Ki(Or.current),Sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[jr]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:_d(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Be(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&En!==null&&e.mode&1&&!(e.flags&128))vk(),Xa(),e.flags|=98560,i=!1;else if(i=Sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[jr]=e}else Xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else sr!==null&&(Bv(sr),sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?gt===0&&(gt=3):pw())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return el(),Ov(t,e),t===null&&Wc(e.stateNode.containerInfo),Mt(e),null;case 10:return J0(e.type._context),Mt(e),null;case 17:return un(e.type)&&Oh(),Mt(e),null;case 19:if(Be(Ke),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Yl(i,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vh(t),o!==null){for(e.flags|=128,Yl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>nl&&(e.flags|=128,r=!0,Yl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return Mt(e),null}else 2*st()-i.renderingStartTime>nl&&n!==1073741824&&(e.flags|=128,r=!0,Yl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=Ke.current,Me(Ke,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return fw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function _4(t,e){switch(G0(e),e.tag){case 1:return un(e.type)&&Oh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return el(),Be(cn),Be(zt),nw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tw(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return el(),null;case 10:return J0(e.type._context),null;case 22:case 23:return fw(),null;case 24:return null;default:return null}}var Nd=!1,$t=!1,S4=typeof WeakSet=="function"?WeakSet:Set,J=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Dv(t,e,n){try{n()}catch(r){tt(t,e,r)}}var F_=!1;function C4(t,e){if(yv=jh,t=sk(),H0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wv={focusedElem:t,selectionRange:n},jh=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,x=b.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Jn(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){tt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return b=F_,F_=!1,b}function wc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dv(e,n,i)}s=s.next}while(s!==r)}}function ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eT(t){var e=t.alternate;e!==null&&(t.alternate=null,eT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jr],delete e[qc],delete e[_v],delete e[o4],delete e[a4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tT(t){return t.tag===5||t.tag===3||t.tag===4}function $_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ah));else if(r!==4&&(t=t.child,t!==null))for(Lv(t,e,n),t=t.sibling;t!==null;)Lv(t,e,n),t=t.sibling}function Fv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fv(t,e,n),t=t.sibling;t!==null;)Fv(t,e,n),t=t.sibling}var Rt=null,nr=!1;function ks(t,e,n){for(n=n.child;n!==null;)nT(t,e,n),n=n.sibling}function nT(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Jf,n)}catch{}switch(n.tag){case 5:$t||ua(n,e);case 6:var r=Rt,s=nr;Rt=null,ks(t,e,n),Rt=r,nr=s,Rt!==null&&(nr?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(nr?(t=Rt,n=n.stateNode,t.nodeType===8?$m(t.parentNode,n):t.nodeType===1&&$m(t,n),Vc(t)):$m(Rt,n.stateNode));break;case 4:r=Rt,s=nr,Rt=n.stateNode.containerInfo,nr=!0,ks(t,e,n),Rt=r,nr=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dv(n,e,o),s=s.next}while(s!==r)}ks(t,e,n);break;case 1:if(!$t&&(ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tt(n,e,a)}ks(t,e,n);break;case 21:ks(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,ks(t,e,n),$t=r):ks(t,e,n);break;default:ks(t,e,n)}}function U_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new S4),e.forEach(function(r){var s=A4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,nr=!1;break e;case 3:Rt=a.stateNode.containerInfo,nr=!0;break e;case 4:Rt=a.stateNode.containerInfo,nr=!0;break e}a=a.return}if(Rt===null)throw Error(H(160));nT(i,o,s),Rt=null,nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rT(e,t),e=e.sibling}function rT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),Er(t),r&4){try{wc(3,t,t.return),ip(3,t)}catch(y){tt(t,t.return,y)}try{wc(5,t,t.return)}catch(y){tt(t,t.return,y)}}break;case 1:Hn(e,t),Er(t),r&512&&n!==null&&ua(n,n.return);break;case 5:if(Hn(e,t),Er(t),r&512&&n!==null&&ua(n,n.return),t.flags&32){var s=t.stateNode;try{Lc(s,"")}catch(y){tt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&EN(s,i),lv(a,o);var u=lv(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?jN(s,h):d==="dangerouslySetInnerHTML"?TN(s,h):d==="children"?Lc(s,h):P0(s,d,h,u)}switch(a){case"input":rv(s,i);break;case"textarea":NN(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Sa(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Sa(s,!!i.multiple,i.defaultValue,!0):Sa(s,!!i.multiple,i.multiple?[]:"",!1))}s[qc]=i}catch(y){tt(t,t.return,y)}}break;case 6:if(Hn(e,t),Er(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){tt(t,t.return,y)}}break;case 3:if(Hn(e,t),Er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vc(e.containerInfo)}catch(y){tt(t,t.return,y)}break;case 4:Hn(e,t),Er(t);break;case 13:Hn(e,t),Er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dw=st())),r&4&&U_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||d,Hn(e,t),$t=u):Hn(e,t),Er(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(f=J,p=f.child,f.tag){case 0:case 11:case 14:case 15:wc(4,f,f.return);break;case 1:ua(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){tt(r,n,y)}}break;case 5:ua(f,f.return);break;case 22:if(f.memoizedState!==null){B_(h);continue}}p!==null?(p.return=f,J=p):B_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=RN("display",o))}catch(y){tt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){tt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),Er(t),r&4&&U_(t);break;case 21:break;default:Hn(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tT(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lc(s,""),r.flags&=-33);var i=$_(t);Fv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$_(t);Lv(t,a,o);break;default:throw Error(H(161))}}catch(c){tt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E4(t,e,n){J=t,sT(t)}function sT(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nd;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||$t;a=Nd;var u=$t;if(Nd=o,($t=c)&&!u)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?z_(s):c!==null?(c.return=o,J=c):z_(s);for(;i!==null;)J=i,sT(i),i=i.sibling;J=s,Nd=a,$t=u}V_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):V_(t)}}function V_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&E_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}E_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Vc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}$t||e.flags&512&&Mv(e)}catch(f){tt(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function B_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function z_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ip(4,e)}catch(c){tt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tt(e,s,c)}}var i=e.return;try{Mv(e)}catch(c){tt(e,i,c)}break;case 5:var o=e.return;try{Mv(e)}catch(c){tt(e,o,c)}}}catch(c){tt(e,e.return,c)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var N4=Math.ceil,Wh=ws.ReactCurrentDispatcher,cw=ws.ReactCurrentOwner,Fn=ws.ReactCurrentBatchConfig,Ce=0,Ct=null,lt=null,It=0,bn=0,da=Ni(0),gt=0,Xc=null,yo=0,op=0,uw=0,xc=null,sn=null,dw=0,nl=1/0,Qr=null,Hh=!1,$v=null,oi=null,kd=!1,Zs=null,qh=0,bc=0,Uv=null,lh=-1,ch=0;function Xt(){return Ce&6?st():lh!==-1?lh:lh=st()}function ai(t){return t.mode&1?Ce&2&&It!==0?It&-It:c4.transition!==null?(ch===0&&(ch=BN()),ch):(t=Re,t!==0||(t=window.event,t=t===void 0?16:YN(t.type)),t):1}function dr(t,e,n,r){if(50<bc)throw bc=0,Uv=null,Error(H(185));Iu(t,n,r),(!(Ce&2)||t!==Ct)&&(t===Ct&&(!(Ce&2)&&(op|=n),gt===4&&Fs(t,It)),dn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(nl=st()+500,np&&ki()))}function dn(t,e){var n=t.callbackNode;cL(t,e);var r=Rh(t,t===Ct?It:0);if(r===0)n!==null&&Xb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xb(n),e===1)t.tag===0?l4(W_.bind(null,t)):pk(W_.bind(null,t)),s4(function(){!(Ce&6)&&ki()}),n=null;else{switch(zN(r)){case 1:n=L0;break;case 4:n=UN;break;case 16:n=Th;break;case 536870912:n=VN;break;default:n=Th}n=hT(n,iT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iT(t,e){if(lh=-1,ch=0,Ce&6)throw Error(H(327));var n=t.callbackNode;if(Ta()&&t.callbackNode!==n)return null;var r=Rh(t,t===Ct?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gh(t,r);else{e=r;var s=Ce;Ce|=2;var i=aT();(Ct!==t||It!==e)&&(Qr=null,nl=st()+500,oo(t,e));do try{R4();break}catch(a){oT(t,a)}while(!0);Q0(),Wh.current=i,Ce=s,lt!==null?e=0:(Ct=null,It=0,e=gt)}if(e!==0){if(e===2&&(s=fv(t),s!==0&&(r=s,e=Vv(t,s))),e===1)throw n=Xc,oo(t,0),Fs(t,r),dn(t,st()),n;if(e===6)Fs(t,r);else{if(s=t.current.alternate,!(r&30)&&!k4(s)&&(e=Gh(t,r),e===2&&(i=fv(t),i!==0&&(r=i,e=Vv(t,i))),e===1))throw n=Xc,oo(t,0),Fs(t,r),dn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:$i(t,sn,Qr);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=dw+500-st(),10<e)){if(Rh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bv($i.bind(null,t,sn,Qr),e);break}$i(t,sn,Qr);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ur(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N4(r/1960))-r,10<r){t.timeoutHandle=bv($i.bind(null,t,sn,Qr),r);break}$i(t,sn,Qr);break;case 5:$i(t,sn,Qr);break;default:throw Error(H(329))}}}return dn(t,st()),t.callbackNode===n?iT.bind(null,t):null}function Vv(t,e){var n=xc;return t.current.memoizedState.isDehydrated&&(oo(t,e).flags|=256),t=Gh(t,e),t!==2&&(e=sn,sn=n,e!==null&&Bv(e)),t}function Bv(t){sn===null?sn=t:sn.push.apply(sn,t)}function k4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~uw,e&=~op,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function W_(t){if(Ce&6)throw Error(H(327));Ta();var e=Rh(t,0);if(!(e&1))return dn(t,st()),null;var n=Gh(t,e);if(t.tag!==0&&n===2){var r=fv(t);r!==0&&(e=r,n=Vv(t,r))}if(n===1)throw n=Xc,oo(t,0),Fs(t,e),dn(t,st()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,sn,Qr),dn(t,st()),null}function hw(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(nl=st()+500,np&&ki())}}function wo(t){Zs!==null&&Zs.tag===0&&!(Ce&6)&&Ta();var e=Ce;Ce|=1;var n=Fn.transition,r=Re;try{if(Fn.transition=null,Re=1,t)return t()}finally{Re=r,Fn.transition=n,Ce=e,!(Ce&6)&&ki()}}function fw(){bn=da.current,Be(da)}function oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r4(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(G0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oh();break;case 3:el(),Be(cn),Be(zt),nw();break;case 5:tw(r);break;case 4:el();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:J0(r.type._context);break;case 22:case 23:fw()}n=n.return}if(Ct=t,lt=t=li(t.current,null),It=bn=e,gt=0,Xc=null,uw=op=yo=0,sn=xc=null,Gi!==null){for(e=0;e<Gi.length;e++)if(n=Gi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gi=null}return t}function oT(t,e){do{var n=lt;try{if(Q0(),ih.current=zh,Bh){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bh=!1}if(vo=0,bt=ht=Qe=null,yc=!1,Yc=0,cw.current=null,n===null||n.return===null){gt=1,Xc=e,lt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=It,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=I_(o);if(p!==null){p.flags&=-257,P_(p,o,a,i,e),p.mode&1&&j_(i,u,e),e=p,c=u;var b=e.updateQueue;if(b===null){var y=new Set;y.add(c),e.updateQueue=y}else b.add(c);break e}else{if(!(e&1)){j_(i,u,e),pw();break e}c=Error(H(426))}}else if(He&&a.mode&1){var x=I_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),P_(x,o,a,i,e),K0(tl(c,a));break e}}i=c=tl(c,a),gt!==4&&(gt=2),xc===null?xc=[i]:xc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=zk(i,c,e);C_(i,v);break e;case 1:a=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oi===null||!oi.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Wk(i,a,e);C_(i,S);break e}}i=i.return}while(i!==null)}cT(n)}catch(_){e=_,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function aT(){var t=Wh.current;return Wh.current=zh,t===null?zh:t}function pw(){(gt===0||gt===3||gt===2)&&(gt=4),Ct===null||!(yo&268435455)&&!(op&268435455)||Fs(Ct,It)}function Gh(t,e){var n=Ce;Ce|=2;var r=aT();(Ct!==t||It!==e)&&(Qr=null,oo(t,e));do try{T4();break}catch(s){oT(t,s)}while(!0);if(Q0(),Ce=n,Wh.current=r,lt!==null)throw Error(H(261));return Ct=null,It=0,gt}function T4(){for(;lt!==null;)lT(lt)}function R4(){for(;lt!==null&&!eL();)lT(lt)}function lT(t){var e=dT(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?cT(t):lt=e,cw.current=null}function cT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_4(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,lt=null;return}}else if(n=b4(n,e,bn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);gt===0&&(gt=5)}function $i(t,e,n){var r=Re,s=Fn.transition;try{Fn.transition=null,Re=1,j4(t,e,n,r)}finally{Fn.transition=s,Re=r}return null}function j4(t,e,n,r){do Ta();while(Zs!==null);if(Ce&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(uL(t,i),t===Ct&&(lt=Ct=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||kd||(kd=!0,hT(Th,function(){return Ta(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fn.transition,Fn.transition=null;var o=Re;Re=1;var a=Ce;Ce|=4,cw.current=null,C4(t,n),rT(n,t),QL(wv),jh=!!yv,wv=yv=null,t.current=n,E4(n),tL(),Ce=a,Re=o,Fn.transition=i}else t.current=n;if(kd&&(kd=!1,Zs=t,qh=s),i=t.pendingLanes,i===0&&(oi=null),sL(n.stateNode),dn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hh)throw Hh=!1,t=$v,$v=null,t;return qh&1&&t.tag!==0&&Ta(),i=t.pendingLanes,i&1?t===Uv?bc++:(bc=0,Uv=t):bc=0,ki(),null}function Ta(){if(Zs!==null){var t=zN(qh),e=Fn.transition,n=Re;try{if(Fn.transition=null,Re=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,qh=0,Ce&6)throw Error(H(331));var s=Ce;for(Ce|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(J=u;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:wc(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var f=d.sibling,p=d.return;if(eT(d),d===u){J=null;break}if(f!==null){f.return=p,J=f;break}J=p}}}var b=i.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,J=v;break e}J=i.return}}var g=t.current;for(J=g;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ip(9,a)}}catch(_){tt(a,a.return,_)}if(a===o){J=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,J=S;break e}J=a.return}}if(Ce=s,ki(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Jf,t)}catch{}r=!0}return r}finally{Re=n,Fn.transition=e}}return!1}function H_(t,e,n){e=tl(n,e),e=zk(t,e,1),t=ii(t,e,1),e=Xt(),t!==null&&(Iu(t,1,e),dn(t,e))}function tt(t,e,n){if(t.tag===3)H_(t,t,n);else for(;e!==null;){if(e.tag===3){H_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=tl(n,t),t=Wk(e,t,1),e=ii(e,t,1),t=Xt(),e!==null&&(Iu(e,1,t),dn(e,t));break}}e=e.return}}function I4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(It&n)===n&&(gt===4||gt===3&&(It&130023424)===It&&500>st()-dw?oo(t,0):uw|=n),dn(t,e)}function uT(t,e){e===0&&(t.mode&1?(e=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):e=1);var n=Xt();t=cs(t,e),t!==null&&(Iu(t,e,n),dn(t,n))}function P4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uT(t,n)}function A4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),uT(t,n)}var dT;dT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,x4(t,e,n);on=!!(t.flags&131072)}else on=!1,He&&e.flags&1048576&&mk(e,Lh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ah(t,e),t=e.pendingProps;var s=Ja(e,zt.current);ka(e,n),s=sw(null,e,r,t,s,n);var i=iw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(i=!0,Dh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Z0(e),s.updater=sp,e.stateNode=s,s._reactInternals=e,Tv(e,r,t,n),e=Iv(null,e,r,!0,i,n)):(e.tag=0,He&&i&&q0(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ah(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=D4(r),t=Jn(r,t),s){case 0:e=jv(null,e,r,t,n);break e;case 1:e=D_(null,e,r,t,n);break e;case 11:e=A_(null,e,r,t,n);break e;case 14:e=O_(null,e,r,Jn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),jv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),D_(t,e,r,s,n);case 3:e:{if(Kk(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,bk(t,e),Uh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=tl(Error(H(423)),e),e=M_(t,e,r,n,s);break e}else if(r!==s){s=tl(Error(H(424)),e),e=M_(t,e,r,n,s);break e}else for(En=si(e.stateNode.containerInfo.firstChild),Nn=e,He=!0,sr=null,n=wk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xa(),r===s){e=us(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return _k(e),t===null&&Ev(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,xv(r,s)?o=null:i!==null&&xv(r,i)&&(e.flags|=32),Gk(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Ev(e),null;case 13:return Yk(t,e,n);case 4:return ew(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Za(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),A_(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Me(Fh,r._currentValue),r._currentValue=o,i!==null)if(fr(i.value,o)){if(i.children===s.children&&!cn.current){e=us(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=is(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Nv(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ka(e,n),s=Un(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=Jn(r,e.pendingProps),s=Jn(r.type,s),O_(t,e,r,s,n);case 15:return Hk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),ah(t,e),e.tag=1,un(r)?(t=!0,Dh(e)):t=!1,ka(e,n),Bk(e,r,s),Tv(e,r,s,n),Iv(null,e,r,!0,t,n);case 19:return Qk(t,e,n);case 22:return qk(t,e,n)}throw Error(H(156,e.tag))};function hT(t,e){return $N(t,e)}function O4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new O4(t,e,n,r)}function mw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D4(t){if(typeof t=="function")return mw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O0)return 11;if(t===D0)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return ao(n.children,s,i,e);case A0:o=8,s|=8;break;case Xg:return t=Mn(12,n,e,s|2),t.elementType=Xg,t.lanes=i,t;case Zg:return t=Mn(13,n,e,s),t.elementType=Zg,t.lanes=i,t;case ev:return t=Mn(19,n,e,s),t.elementType=ev,t.lanes=i,t;case _N:return ap(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xN:o=10;break e;case bN:o=9;break e;case O0:o=11;break e;case D0:o=14;break e;case Os:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ao(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function ap(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=_N,t.lanes=n,t.stateNode={isHidden:!1},t}function Gm(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Km(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tm(0),this.expirationTimes=Tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gw(t,e,n,r,s,i,o,a,c){return t=new M4(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z0(i),t}function L4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fT(t){if(!t)return gi;t=t._reactInternals;e:{if(Po(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(un(n))return fk(t,n,e)}return e}function pT(t,e,n,r,s,i,o,a,c){return t=gw(n,r,!0,t,s,i,o,a,c),t.context=fT(null),n=t.current,r=Xt(),s=ai(n),i=is(r,s),i.callback=e??null,ii(n,i,s),t.current.lanes=s,Iu(t,s,r),dn(t,r),t}function lp(t,e,n,r){var s=e.current,i=Xt(),o=ai(s);return n=fT(n),e.context===null?e.context=n:e.pendingContext=n,e=is(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(s,e,o),t!==null&&(dr(t,s,o,i),sh(t,s,o)),o}function Kh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vw(t,e){q_(t,e),(t=t.alternate)&&q_(t,e)}function F4(){return null}var mT=typeof reportError=="function"?reportError:function(t){console.error(t)};function yw(t){this._internalRoot=t}cp.prototype.render=yw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));lp(t,e,null,null)};cp.prototype.unmount=yw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){lp(null,t,null,null)}),e[ls]=null}};function cp(t){this._internalRoot=t}cp.prototype.unstable_scheduleHydration=function(t){if(t){var e=qN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&KN(t)}};function ww(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G_(){}function $4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Kh(o);i.call(u)}}var o=pT(e,r,t,0,null,!1,!1,"",G_);return t._reactRootContainer=o,t[ls]=o.current,Wc(t.nodeType===8?t.parentNode:t),wo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Kh(c);a.call(u)}}var c=gw(t,0,!1,null,null,!1,!1,"",G_);return t._reactRootContainer=c,t[ls]=c.current,Wc(t.nodeType===8?t.parentNode:t),wo(function(){lp(e,c,n,r)}),c}function dp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Kh(o);a.call(c)}}lp(e,o,t,s)}else o=$4(n,e,t,s,r);return Kh(o)}WN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ac(e.pendingLanes);n!==0&&(F0(e,n|1),dn(e,st()),!(Ce&6)&&(nl=st()+500,ki()))}break;case 13:wo(function(){var r=cs(t,1);if(r!==null){var s=Xt();dr(r,t,1,s)}}),vw(t,1)}};$0=function(t){if(t.tag===13){var e=cs(t,134217728);if(e!==null){var n=Xt();dr(e,t,134217728,n)}vw(t,134217728)}};HN=function(t){if(t.tag===13){var e=ai(t),n=cs(t,e);if(n!==null){var r=Xt();dr(n,t,e,r)}vw(t,e)}};qN=function(){return Re};GN=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};uv=function(t,e,n){switch(e){case"input":if(rv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tp(r);if(!s)throw Error(H(90));CN(r),rv(r,s)}}}break;case"textarea":NN(t,n);break;case"select":e=n.value,e!=null&&Sa(t,!!n.multiple,e,!1)}};AN=hw;ON=wo;var U4={usingClientEntryPoint:!1,Events:[Au,ia,tp,IN,PN,hw]},Ql={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V4={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LN(t),t===null?null:t.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||F4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{Jf=Td.inject(V4),Ar=Td}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U4;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ww(e))throw Error(H(200));return L4(t,e,null,n)};Rn.createRoot=function(t,e){if(!ww(t))throw Error(H(299));var n=!1,r="",s=mT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gw(t,1,!1,null,null,n,!1,r,s),t[ls]=e.current,Wc(t.nodeType===8?t.parentNode:t),new yw(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=LN(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return wo(t)};Rn.hydrate=function(t,e,n){if(!up(e))throw Error(H(200));return dp(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!ww(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=mT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pT(e,null,t,1,n??null,s,!1,i,o),t[ls]=e.current,Wc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new cp(e)};Rn.render=function(t,e,n){if(!up(e))throw Error(H(200));return dp(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!up(t))throw Error(H(40));return t._reactRootContainer?(wo(function(){dp(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};Rn.unstable_batchedUpdates=hw;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!up(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return dp(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function gT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gT)}catch(t){console.error(t)}}gT(),gN.exports=Rn;var Ao=gN.exports;const vT=sN(Ao);var yT,K_=Ao;yT=K_.createRoot,K_.hydrateRoot;const B4=1,z4=1e6;let Ym=0;function W4(){return Ym=(Ym+1)%Number.MAX_SAFE_INTEGER,Ym.toString()}const Qm=new Map,Y_=t=>{if(Qm.has(t))return;const e=setTimeout(()=>{Qm.delete(t),_c({type:"REMOVE_TOAST",toastId:t})},z4);Qm.set(t,e)},H4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,B4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Y_(n):t.toasts.forEach(r=>{Y_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},dh=[];let hh={toasts:[]};function _c(t){hh=H4(hh,t),dh.forEach(e=>{e(hh)})}function q4({...t}){const e=W4(),n=s=>_c({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>_c({type:"DISMISS_TOAST",toastId:e});return _c({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Wt(){const[t,e]=m.useState(hh);return m.useEffect(()=>(dh.push(e),()=>{const n=dh.indexOf(e);n>-1&&dh.splice(n,1)}),[t]),{...t,toast:q4,dismiss:n=>_c({type:"DISMISS_TOAST",toastId:n})}}function X(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Q_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wT(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Q_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Q_(t[s],null)}}}}function me(...t){return m.useCallback(wT(...t),t)}function G4(t,e){const n=m.createContext(e),r=i=>{const{children:o,...a}=i,c=m.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function mn(t,e=[]){let n=[];function r(i,o){const a=m.createContext(o),c=n.length;n=[...n,o];const u=h=>{var v;const{scope:f,children:p,...b}=h,y=((v=f==null?void 0:f[t])==null?void 0:v[c])||a,x=m.useMemo(()=>b,Object.values(b));return l.jsx(y.Provider,{value:x,children:p})};u.displayName=i+"Provider";function d(h,f){var y;const p=((y=f==null?void 0:f[t])==null?void 0:y[c])||a,b=m.useContext(p);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,K4(s,...e)]}function K4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function rl(t){const e=Q4(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,a=m.Children.toArray(i),c=a.find(X4);if(c){const u=c.props.children,d=a.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return l.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Y4=rl("Slot");function Q4(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=e5(s),a=Z4(i,s.props);return s.type!==m.Fragment&&(a.ref=r?wT(r,o):o),m.cloneElement(s,a)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var xT=Symbol("radix.slottable");function J4(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=xT,e}function X4(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xT}function Z4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function e5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function hp(t){const e=t+"CollectionProvider",[n,r]=mn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:x,children:v}=y,g=z.useRef(null),w=z.useRef(new Map).current;return l.jsx(s,{scope:x,itemMap:w,collectionRef:g,children:v})};o.displayName=e;const a=t+"CollectionSlot",c=rl(a),u=z.forwardRef((y,x)=>{const{scope:v,children:g}=y,w=i(a,v),S=me(x,w.collectionRef);return l.jsx(c,{ref:S,children:g})});u.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=rl(d),p=z.forwardRef((y,x)=>{const{scope:v,children:g,...w}=y,S=z.useRef(null),_=me(x,S),C=i(d,v);return z.useEffect(()=>(C.itemMap.set(S,{ref:S,...w}),()=>void C.itemMap.delete(S))),l.jsx(f,{[h]:"",ref:_,children:g})});p.displayName=d;function b(y){const x=i(t+"CollectionConsumer",y);return z.useCallback(()=>{const g=x.collectionRef.current;if(!g)return[];const w=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((C,E)=>w.indexOf(C.ref.current)-w.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},b,r]}var t5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ee=t5.reduce((t,e)=>{const n=rl(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bT(t,e){t&&Ao.flushSync(()=>t.dispatchEvent(e))}function ft(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function n5(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var r5="DismissableLayer",zv="dismissableLayer.update",s5="dismissableLayer.pointerDownOutside",i5="dismissableLayer.focusOutside",J_,_T=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Du=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=m.useContext(_T),[d,h]=m.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=m.useState({}),b=me(e,E=>h(E)),y=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(x),g=d?y.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=g>=v,_=a5(E=>{const N=E.target,k=[...u.branches].some(T=>T.contains(N));!S||k||(s==null||s(E),o==null||o(E),E.defaultPrevented||a==null||a())},f),C=l5(E=>{const N=E.target;[...u.branches].some(T=>T.contains(N))||(i==null||i(E),o==null||o(E),E.defaultPrevented||a==null||a())},f);return n5(E=>{g===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(J_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),X_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=J_)}},[d,f,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),X_())},[d,u]),m.useEffect(()=>{const E=()=>p({});return document.addEventListener(zv,E),()=>document.removeEventListener(zv,E)},[]),l.jsx(ee.div,{...c,ref:b,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:X(t.onFocusCapture,C.onFocusCapture),onBlurCapture:X(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:X(t.onPointerDownCapture,_.onPointerDownCapture)})});Du.displayName=r5;var o5="DismissableLayerBranch",ST=m.forwardRef((t,e)=>{const n=m.useContext(_T),r=m.useRef(null),s=me(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(ee.div,{...t,ref:s})});ST.displayName=o5;function a5(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){CT(s5,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function l5(t,e=globalThis==null?void 0:globalThis.document){const n=ft(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&CT(i5,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function X_(){const t=new CustomEvent(zv);document.dispatchEvent(t)}function CT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bT(s,i):s.dispatchEvent(i)}var c5=Du,u5=ST,vt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},d5="Portal",fp=m.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=m.useState(!1);vt(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?vT.createPortal(l.jsx(ee.div,{...r,ref:e}),o):null});fp.displayName=d5;function h5(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var In=t=>{const{present:e,children:n}=t,r=f5(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=me(r.ref,p5(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};In.displayName="Presence";function f5(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[a,c]=h5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Rd(r.current);i.current=a==="mounted"?u:"none"},[a]),vt(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,p=Rd(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),vt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const y=Rd(r.current).includes(p.animationName);if(p.target===e&&y&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=p=>{p.target===e&&(i.current=Rd(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Rd(t){return(t==null?void 0:t.animationName)||"none"}function p5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var m5=R0[" useInsertionEffect ".trim().toString()]||vt;function pr({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=g5({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const d=m.useRef(t!==void 0);m.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=m.useCallback(d=>{var h;if(a){const f=v5(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,t,i,o]);return[c,u]}function g5({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),i=m.useRef(e);return m5(()=>{i.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function v5(t){return typeof t=="function"}var ET=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),y5="VisuallyHidden",pp=m.forwardRef((t,e)=>l.jsx(ee.span,{...t,ref:e,style:{...ET,...t.style}}));pp.displayName=y5;var w5=pp,xw="ToastProvider",[bw,x5,b5]=hp("Toast"),[NT,Ite]=mn("Toast",[b5]),[_5,mp]=NT(xw),kT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${xw}\`. Expected non-empty \`string\`.`),l.jsx(bw.Provider,{scope:e,children:l.jsx(_5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:m.useCallback(()=>d(p=>p+1),[]),onToastRemove:m.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};kT.displayName=xw;var TT="ToastViewport",S5=["F8"],Wv="toast.viewportPause",Hv="toast.viewportResume",RT=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=S5,label:s="Notifications ({hotkey})",...i}=t,o=mp(TT,n),a=x5(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=me(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const x=v=>{var w;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),m.useEffect(()=>{const x=c.current,v=h.current;if(b&&x&&v){const g=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Wv);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Hv);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!x.contains(C.relatedTarget)&&w()},_=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",g),x.addEventListener("focusout",S),x.addEventListener("pointermove",g),x.addEventListener("pointerleave",_),window.addEventListener("blur",g),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",g),x.removeEventListener("focusout",S),x.removeEventListener("pointermove",g),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",g),window.removeEventListener("focus",w)}}},[b,o.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:x})=>{const g=a().map(w=>{const S=w.ref.current,_=[S,...M5(S)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?g.reverse():g).flat()},[a]);return m.useEffect(()=>{const x=h.current;if(x){const v=g=>{var _,C,E;const w=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!w){const N=document.activeElement,k=g.shiftKey;if(g.target===x&&k){(_=u.current)==null||_.focus();return}const I=y({tabbingDirection:k?"backwards":"forwards"}),q=I.findIndex(P=>P===N);Jm(I.slice(q+1))?g.preventDefault():k?(C=u.current)==null||C.focus():(E=d.current)==null||E.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[a,y]),l.jsxs(u5,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&l.jsx(qv,{ref:u,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"forwards"});Jm(x)}}),l.jsx(bw.Slot,{scope:n,children:l.jsx(ee.ol,{tabIndex:-1,...i,ref:f})}),b&&l.jsx(qv,{ref:d,onFocusFromOutsideViewport:()=>{const x=y({tabbingDirection:"backwards"});Jm(x)}})]})});RT.displayName=TT;var jT="ToastFocusProxy",qv=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=mp(jT,n);return l.jsx(pp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});qv.displayName=jT;var Mu="Toast",C5="toast.swipeStart",E5="toast.swipeMove",N5="toast.swipeCancel",k5="toast.swipeEnd",IT=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a,c]=pr({prop:r,defaultProp:s??!0,onChange:i,caller:Mu});return l.jsx(In,{present:n||a,children:l.jsx(j5,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:ft(t.onPause),onResume:ft(t.onResume),onSwipeStart:X(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:X(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:X(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:X(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});IT.displayName=Mu;var[T5,R5]=NT(Mu,{onClose(){}}),j5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...b}=t,y=mp(Mu,n),[x,v]=m.useState(null),g=me(e,P=>v(P)),w=m.useRef(null),S=m.useRef(null),_=s||y.duration,C=m.useRef(0),E=m.useRef(_),N=m.useRef(0),{onToastAdd:k,onToastRemove:T}=y,j=ft(()=>{var V;(x==null?void 0:x.contains(document.activeElement))&&((V=y.viewport)==null||V.focus()),o()}),I=m.useCallback(P=>{!P||P===1/0||(window.clearTimeout(N.current),C.current=new Date().getTime(),N.current=window.setTimeout(j,P))},[j]);m.useEffect(()=>{const P=y.viewport;if(P){const V=()=>{I(E.current),u==null||u()},U=()=>{const G=new Date().getTime()-C.current;E.current=E.current-G,window.clearTimeout(N.current),c==null||c()};return P.addEventListener(Wv,U),P.addEventListener(Hv,V),()=>{P.removeEventListener(Wv,U),P.removeEventListener(Hv,V)}}},[y.viewport,_,c,u,I]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&I(_)},[i,_,y.isClosePausedRef,I]),m.useEffect(()=>(k(),()=>T()),[k,T]);const q=m.useMemo(()=>x?FT(x):null,[x]);return y.viewport?l.jsxs(l.Fragment,{children:[q&&l.jsx(I5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:q}),l.jsx(T5,{scope:n,onClose:j,children:Ao.createPortal(l.jsx(bw.ItemSlot,{scope:n,children:l.jsx(c5,{asChild:!0,onEscapeKeyDown:X(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||j(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(ee.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...b,ref:g,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:X(t.onKeyDown,P=>{P.key==="Escape"&&(a==null||a(P.nativeEvent),P.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:X(t.onPointerDown,P=>{P.button===0&&(w.current={x:P.clientX,y:P.clientY})}),onPointerMove:X(t.onPointerMove,P=>{if(!w.current)return;const V=P.clientX-w.current.x,U=P.clientY-w.current.y,G=!!S.current,A=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,R=A?L(0,V):0,W=A?0:L(0,U),D=P.pointerType==="touch"?10:2,te={x:R,y:W},re={originalEvent:P,delta:te};G?(S.current=te,jd(E5,h,re,{discrete:!1})):Z_(te,y.swipeDirection,D)?(S.current=te,jd(C5,d,re,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(V)>D||Math.abs(U)>D)&&(w.current=null)}),onPointerUp:X(t.onPointerUp,P=>{const V=S.current,U=P.target;if(U.hasPointerCapture(P.pointerId)&&U.releasePointerCapture(P.pointerId),S.current=null,w.current=null,V){const G=P.currentTarget,A={originalEvent:P,delta:V};Z_(V,y.swipeDirection,y.swipeThreshold)?jd(k5,p,A,{discrete:!0}):jd(N5,f,A,{discrete:!0}),G.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),I5=t=>{const{__scopeToast:e,children:n,...r}=t,s=mp(Mu,e),[i,o]=m.useState(!1),[a,c]=m.useState(!1);return O5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(fp,{asChild:!0,children:l.jsx(pp,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},P5="ToastTitle",PT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(ee.div,{...r,ref:e})});PT.displayName=P5;var A5="ToastDescription",AT=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(ee.div,{...r,ref:e})});AT.displayName=A5;var OT="ToastAction",DT=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(LT,{altText:n,asChild:!0,children:l.jsx(_w,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${OT}\`. Expected non-empty \`string\`.`),null)});DT.displayName=OT;var MT="ToastClose",_w=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=R5(MT,n);return l.jsx(LT,{asChild:!0,children:l.jsx(ee.button,{type:"button",...r,ref:e,onClick:X(t.onClick,s.onClose)})})});_w.displayName=MT;var LT=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(ee.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function FT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),D5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...FT(r))}}),e}function jd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bT(s,i):s.dispatchEvent(i)}var Z_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function O5(t=()=>{}){const e=ft(t);vt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function D5(t){return t.nodeType===t.ELEMENT_NODE}function M5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var L5=kT,$T=RT,UT=IT,VT=PT,BT=AT,zT=DT,WT=_w;function HT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=HT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=HT(t))&&(r&&(r+=" "),r+=e);return r}const eS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tS=qT,gp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tS(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=eS(d)||eS(h);return s[u][f]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(b=>{let[y,x]=b;return Array.isArray(x)?x.includes({...i,...a}[y]):{...i,...a}[y]===x})?[...u,h,f]:u},[]);return tS(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>m.createElement("svg",{ref:c,...$5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:GT("lucide",s),...a},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(U5,{ref:i,iconNode:e,className:GT(`lucide-${F5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=he("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=he("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=he("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=he("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=he("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=he("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=he("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=he("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=he("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=he("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ew="-",t3=t=>{const e=r3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Ew);return a[0]===""&&a.length!==1&&a.shift(),QT(a,e)||n3(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},QT=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?QT(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ew);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},aS=/^\[(.+)\]$/,n3=t=>{if(aS.test(t)){const e=aS.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},r3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return i3(Object.entries(t.classGroups),n).forEach(([i,o])=>{Jv(o,r,i,e)}),r},Jv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:lS(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(s3(s)){Jv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Jv(o,lS(e,i),n,r)})})},lS=(t,e)=>{let n=t;return e.split(Ew).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},s3=t=>t.isThemeGetter,i3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,o3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},JT="!",a3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let x=0;x<a.length;x++){let v=a[x];if(u===0){if(v===s&&(r||a.slice(x,x+i)===e)){c.push(a.slice(d,x)),d=x+i;continue}if(v==="/"){h=x;continue}}v==="["?u++:v==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(JT),b=p?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:b,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},l3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},c3=t=>({cache:o3(t.cacheSize),parseClassName:a3(t),...t3(t)}),u3=/\s+/,d3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(u3);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let b=!!p,y=r(b?f.substring(0,p):f);if(!y){if(!b){a=u+(a.length>0?" "+a:a);continue}if(y=r(f),!y){a=u+(a.length>0?" "+a:a);continue}b=!1}const x=l3(d).join(":"),v=h?x+JT:x,g=v+y;if(i.includes(g))continue;i.push(g);const w=s(y,b);for(let S=0;S<w.length;++S){const _=w[S];i.push(v+_)}a=u+(a.length>0?" "+a:a)}return a};function h3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=XT(e))&&(r&&(r+=" "),r+=n);return r}const XT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=XT(t[r]))&&(n&&(n+=" "),n+=e);return n};function f3(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=c3(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=d3(c,n);return s(c,d),d}return function(){return i(h3.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},ZT=/^\[(?:([a-z-]+):)?(.+)\]$/i,p3=/^\d+\/\d+$/,m3=new Set(["px","full","screen"]),g3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,v3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,y3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,w3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,x3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=t=>Ia(t)||m3.has(t)||p3.test(t),Ts=t=>xl(t,"length",T3),Ia=t=>!!t&&!Number.isNaN(Number(t)),Xm=t=>xl(t,"number",Ia),Jl=t=>!!t&&Number.isInteger(Number(t)),b3=t=>t.endsWith("%")&&Ia(t.slice(0,-1)),fe=t=>ZT.test(t),Rs=t=>g3.test(t),_3=new Set(["length","size","percentage"]),S3=t=>xl(t,_3,eR),C3=t=>xl(t,"position",eR),E3=new Set(["image","url"]),N3=t=>xl(t,E3,j3),k3=t=>xl(t,"",R3),Xl=()=>!0,xl=(t,e,n)=>{const r=ZT.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},T3=t=>v3.test(t)&&!y3.test(t),eR=()=>!1,R3=t=>w3.test(t),j3=t=>x3.test(t),I3=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),c=$e("contrast"),u=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),f=$e("gap"),p=$e("gradientColorStops"),b=$e("gradientColorStopPositions"),y=$e("inset"),x=$e("margin"),v=$e("opacity"),g=$e("padding"),w=$e("saturate"),S=$e("scale"),_=$e("sepia"),C=$e("skew"),E=$e("space"),N=$e("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",fe,e],I=()=>[fe,e],q=()=>["",Kr,Ts],P=()=>["auto",Ia,fe],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",fe],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ia,fe];return{cacheSize:500,separator:":",theme:{colors:[Xl],spacing:[Kr,Ts],blur:["none","",Rs,fe],brightness:W(),borderColor:[t],borderRadius:["none","","full",Rs,fe],borderSpacing:I(),borderWidth:q(),contrast:W(),grayscale:L(),hueRotate:W(),invert:L(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[b3,Ts],inset:j(),margin:j(),opacity:W(),padding:I(),saturate:W(),scale:W(),sepia:L(),skew:W(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Rs]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),fe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jl,fe]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Jl,fe]}],"grid-cols":[{"grid-cols":[Xl]}],"col-start-end":[{col:["auto",{span:["full",Jl,fe]},fe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Xl]}],"row-start-end":[{row:["auto",{span:[Jl,fe]},fe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[Rs]},Rs]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Rs,Ts]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xm]}],"font-family":[{font:[Xl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Ia,Xm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,Ts]}],"underline-offset":[{"underline-offset":["auto",Kr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),C3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",S3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Kr,fe]}],"outline-w":[{outline:[Kr,Ts]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Kr,Ts]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Rs,k3]}],"shadow-color":[{shadow:[Xl]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Rs,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Jl,fe]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kr,Ts,Xm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},P3=f3(I3);function $(...t){return P3(qT(t))}const A3=L5,tR=m.forwardRef(({className:t,...e},n)=>l.jsx($T,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));tR.displayName=$T.displayName;const O3=gp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nR=m.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(UT,{ref:r,className:$(O3({variant:e}),t),...n}));nR.displayName=UT.displayName;const D3=m.forwardRef(({className:t,...e},n)=>l.jsx(zT,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));D3.displayName=zT.displayName;const rR=m.forwardRef(({className:t,...e},n)=>l.jsx(WT,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(lo,{className:"h-4 w-4"})}));rR.displayName=WT.displayName;const sR=m.forwardRef(({className:t,...e},n)=>l.jsx(VT,{ref:n,className:$("text-sm font-semibold",t),...e}));sR.displayName=VT.displayName;const iR=m.forwardRef(({className:t,...e},n)=>l.jsx(BT,{ref:n,className:$("text-sm opacity-90",t),...e}));iR.displayName=BT.displayName;function M3(){const{toasts:t}=Wt();return l.jsxs(A3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(nR,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(sR,{children:n}),r&&l.jsx(iR,{children:r})]}),s,l.jsx(rR,{})]},e)}),l.jsx(tR,{})]})}var cS=["light","dark"],L3="(prefers-color-scheme: dark)",F3=m.createContext(void 0),$3={setTheme:t=>{},themes:[]},U3=()=>{var t;return(t=m.useContext(F3))!=null?t:$3};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?cS.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,y=!1,x=!0)=>{let v=o?o[b]:b,g=y?b+"|| ''":`'${v}'`,w="";return s&&x&&!y&&cS.includes(b)&&(w+=`d.style.colorScheme = '${b}';`),n==="class"?y||v?w+=`c.add(${g})`:w+="null":v&&(w+=`d[s](n,${g})`),w},p=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${L3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var V3=t=>{switch(t){case"success":return W3;case"info":return q3;case"warning":return H3;case"error":return G3;default:return null}},B3=Array(12).fill(0),z3=({visible:t,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},z.createElement("div",{className:"sonner-spinner"},B3.map((n,r)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),W3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),H3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),q3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),G3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),K3=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Y3=()=>{let[t,e]=z.useState(document.hidden);return z.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Xv=1,Q3=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Xv++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],z.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(X3(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Xv++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},rn=new Q3,J3=(t,e)=>{let n=(e==null?void 0:e.id)||Xv++;return rn.addToast({title:t,...e,id:n}),n},X3=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Z3=J3,eF=()=>rn.toasts,tF=()=>rn.getActiveToasts(),qt=Object.assign(Z3,{success:rn.success,info:rn.info,warning:rn.warning,error:rn.error,custom:rn.custom,message:rn.message,promise:rn.promise,dismiss:rn.dismiss,loading:rn.loading},{getHistory:eF,getToasts:tF});function nF(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}nF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Id(t){return t.label!==void 0}var rF=3,sF="32px",iF="16px",uS=4e3,oF=356,aF=14,lF=20,cF=200;function qn(...t){return t.filter(Boolean).join(" ")}function uF(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var dF=t=>{var e,n,r,s,i,o,a,c,u,d,h;let{invert:f,toast:p,unstyled:b,interacting:y,setHeights:x,visibleToasts:v,heights:g,index:w,toasts:S,expanded:_,removeToast:C,defaultRichColors:E,closeButton:N,style:k,cancelButtonStyle:T,actionButtonStyle:j,className:I="",descriptionClassName:q="",duration:P,position:V,gap:U,loadingIcon:G,expandByDefault:A,classNames:L,icons:R,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:D}=t,[te,re]=z.useState(null),[je,ze]=z.useState(null),[Y,Ee]=z.useState(!1),[Le,Se]=z.useState(!1),[xe,_e]=z.useState(!1),[it,nn]=z.useState(!1),[Ss,qr]=z.useState(!1),[Cs,Do]=z.useState(0),[Ai,sd]=z.useState(0),Es=z.useRef(p.duration||P||uS),Oi=z.useRef(null),_r=z.useRef(null),id=w===0,pm=w+1<=v,Ht=p.type,Sr=p.dismissible!==!1,mm=p.className||"",gm=p.descriptionClassName||"",Mo=z.useMemo(()=>g.findIndex(ce=>ce.toastId===p.id)||0,[g,p.id]),vm=z.useMemo(()=>{var ce;return(ce=p.closeButton)!=null?ce:N},[p.closeButton,N]),od=z.useMemo(()=>p.duration||P||uS,[p.duration,P]),Lo=z.useRef(0),Wn=z.useRef(0),Fl=z.useRef(0),Gr=z.useRef(null),[ym,ad]=V.split("-"),Fo=z.useMemo(()=>g.reduce((ce,Te,Ie)=>Ie>=Mo?ce:ce+Te.height,0),[g,Mo]),ld=Y3(),wm=p.invert||f,$l=Ht==="loading";Wn.current=z.useMemo(()=>Mo*U+Fo,[Mo,Fo]),z.useEffect(()=>{Es.current=od},[od]),z.useEffect(()=>{Ee(!0)},[]),z.useEffect(()=>{let ce=_r.current;if(ce){let Te=ce.getBoundingClientRect().height;return sd(Te),x(Ie=>[{toastId:p.id,height:Te,position:p.position},...Ie]),()=>x(Ie=>Ie.filter(vn=>vn.toastId!==p.id))}},[x,p.id]),z.useLayoutEffect(()=>{if(!Y)return;let ce=_r.current,Te=ce.style.height;ce.style.height="auto";let Ie=ce.getBoundingClientRect().height;ce.style.height=Te,sd(Ie),x(vn=>vn.find(ct=>ct.toastId===p.id)?vn.map(ct=>ct.toastId===p.id?{...ct,height:Ie}:ct):[{toastId:p.id,height:Ie,position:p.position},...vn])},[Y,p.title,p.description,x,p.id]);let Cr=z.useCallback(()=>{Se(!0),Do(Wn.current),x(ce=>ce.filter(Te=>Te.toastId!==p.id)),setTimeout(()=>{C(p)},cF)},[p,C,x,Wn]);z.useEffect(()=>{if(p.promise&&Ht==="loading"||p.duration===1/0||p.type==="loading")return;let ce;return _||y||D&&ld?(()=>{if(Fl.current<Lo.current){let Te=new Date().getTime()-Lo.current;Es.current=Es.current-Te}Fl.current=new Date().getTime()})():Es.current!==1/0&&(Lo.current=new Date().getTime(),ce=setTimeout(()=>{var Te;(Te=p.onAutoClose)==null||Te.call(p,p),Cr()},Es.current)),()=>clearTimeout(ce)},[_,y,p,Ht,D,ld,Cr]),z.useEffect(()=>{p.delete&&Cr()},[Cr,p.delete]);function cd(){var ce,Te,Ie;return R!=null&&R.loading?z.createElement("div",{className:qn(L==null?void 0:L.loader,(ce=p==null?void 0:p.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":Ht==="loading"},R.loading):G?z.createElement("div",{className:qn(L==null?void 0:L.loader,(Te=p==null?void 0:p.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":Ht==="loading"},G):z.createElement(z3,{className:qn(L==null?void 0:L.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader),visible:Ht==="loading"})}return z.createElement("li",{tabIndex:0,ref:_r,className:qn(I,mm,L==null?void 0:L.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[Ht],(n=p==null?void 0:p.classNames)==null?void 0:n[Ht]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:E,"data-styled":!(p.jsx||p.unstyled||b),"data-mounted":Y,"data-promise":!!p.promise,"data-swiped":Ss,"data-removed":Le,"data-visible":pm,"data-y-position":ym,"data-x-position":ad,"data-index":w,"data-front":id,"data-swiping":xe,"data-dismissible":Sr,"data-type":Ht,"data-invert":wm,"data-swipe-out":it,"data-swipe-direction":je,"data-expanded":!!(_||A&&Y),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${Le?Cs:Wn.current}px`,"--initial-height":A?"auto":`${Ai}px`,...k,...p.style},onDragEnd:()=>{_e(!1),re(null),Gr.current=null},onPointerDown:ce=>{$l||!Sr||(Oi.current=new Date,Do(Wn.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(_e(!0),Gr.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,Te,Ie,vn;if(it||!Sr)return;Gr.current=null;let ct=Number(((ce=_r.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yn=Number(((Te=_r.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ns=new Date().getTime()-((Ie=Oi.current)==null?void 0:Ie.getTime()),rt=te==="x"?ct:yn,We=Math.abs(rt)/Ns;if(Math.abs(rt)>=lF||We>.11){Do(Wn.current),(vn=p.onDismiss)==null||vn.call(p,p),ze(te==="x"?ct>0?"right":"left":yn>0?"down":"up"),Cr(),nn(!0),qr(!1);return}_e(!1),re(null)},onPointerMove:ce=>{var Te,Ie,vn,ct;if(!Gr.current||!Sr||((Te=window.getSelection())==null?void 0:Te.toString().length)>0)return;let yn=ce.clientY-Gr.current.y,Ns=ce.clientX-Gr.current.x,rt=(Ie=t.swipeDirections)!=null?Ie:uF(V);!te&&(Math.abs(Ns)>1||Math.abs(yn)>1)&&re(Math.abs(Ns)>Math.abs(yn)?"x":"y");let We={x:0,y:0};te==="y"?(rt.includes("top")||rt.includes("bottom"))&&(rt.includes("top")&&yn<0||rt.includes("bottom")&&yn>0)&&(We.y=yn):te==="x"&&(rt.includes("left")||rt.includes("right"))&&(rt.includes("left")&&Ns<0||rt.includes("right")&&Ns>0)&&(We.x=Ns),(Math.abs(We.x)>0||Math.abs(We.y)>0)&&qr(!0),(vn=_r.current)==null||vn.style.setProperty("--swipe-amount-x",`${We.x}px`),(ct=_r.current)==null||ct.style.setProperty("--swipe-amount-y",`${We.y}px`)}},vm&&!p.jsx?z.createElement("button",{"aria-label":W,"data-disabled":$l,"data-close-button":!0,onClick:$l||!Sr?()=>{}:()=>{var ce;Cr(),(ce=p.onDismiss)==null||ce.call(p,p)},className:qn(L==null?void 0:L.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=R==null?void 0:R.close)!=null?i:K3):null,p.jsx||m.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:z.createElement(z.Fragment,null,Ht||p.icon||p.promise?z.createElement("div",{"data-icon":"",className:qn(L==null?void 0:L.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||cd():null,p.type!=="loading"?p.icon||(R==null?void 0:R[Ht])||V3(Ht):null):null,z.createElement("div",{"data-content":"",className:qn(L==null?void 0:L.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},z.createElement("div",{"data-title":"",className:qn(L==null?void 0:L.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?z.createElement("div",{"data-description":"",className:qn(q,gm,L==null?void 0:L.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),m.isValidElement(p.cancel)?p.cancel:p.cancel&&Id(p.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||T,onClick:ce=>{var Te,Ie;Id(p.cancel)&&Sr&&((Ie=(Te=p.cancel).onClick)==null||Ie.call(Te,ce),Cr())},className:qn(L==null?void 0:L.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,m.isValidElement(p.action)?p.action:p.action&&Id(p.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||j,onClick:ce=>{var Te,Ie;Id(p.action)&&((Ie=(Te=p.action).onClick)==null||Ie.call(Te,ce),!ce.defaultPrevented&&Cr())},className:qn(L==null?void 0:L.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function dS(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function hF(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?iF:sF;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),n}var fF=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:b=rF,toastOptions:y,dir:x=dS(),gap:v=aF,loadingIcon:g,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:_}=t,[C,E]=z.useState([]),N=z.useMemo(()=>Array.from(new Set([r].concat(C.filter(D=>D.position).map(D=>D.position)))),[C,r]),[k,T]=z.useState([]),[j,I]=z.useState(!1),[q,P]=z.useState(!1),[V,U]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=z.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=z.useRef(null),R=z.useRef(!1),W=z.useCallback(D=>{E(te=>{var re;return(re=te.find(je=>je.id===D.id))!=null&&re.delete||rn.dismiss(D.id),te.filter(({id:je})=>je!==D.id)})},[]);return z.useEffect(()=>rn.subscribe(D=>{if(D.dismiss){E(te=>te.map(re=>re.id===D.id?{...re,delete:!0}:re));return}setTimeout(()=>{vT.flushSync(()=>{E(te=>{let re=te.findIndex(je=>je.id===D.id);return re!==-1?[...te.slice(0,re),{...te[re],...D},...te.slice(re+1)]:[D,...te]})})})}),[]),z.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:te})=>{U(te?"dark":"light")})}catch{D.addListener(({matches:re})=>{try{U(re?"dark":"light")}catch(je){console.error(je)}})}},[d]),z.useEffect(()=>{C.length<=1&&I(!1)},[C]),z.useEffect(()=>{let D=te=>{var re,je;s.every(ze=>te[ze]||te.code===ze)&&(I(!0),(re=G.current)==null||re.focus()),te.code==="Escape"&&(document.activeElement===G.current||(je=G.current)!=null&&je.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[s]),z.useEffect(()=>{if(G.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,R.current=!1)}},[G.current]),z.createElement("section",{ref:e,"aria-label":`${S} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((D,te)=>{var re;let[je,ze]=D.split("-");return C.length?z.createElement("ol",{key:D,dir:x==="auto"?dS():x,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":je,"data-lifted":j&&C.length>1&&!i,"data-x-position":ze,style:{"--front-toast-height":`${((re=k[0])==null?void 0:re.height)||0}px`,"--width":`${oF}px`,"--gap":`${v}px`,...p,...hF(c,u)},onBlur:Y=>{R.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(R.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||R.current||(R.current=!0,L.current=Y.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{q||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},C.filter(Y=>!Y.position&&te===0||Y.position===D).map((Y,Ee)=>{var Le,Se;return z.createElement(dF,{key:Y.id,icons:w,index:Ee,toast:Y,defaultRichColors:h,duration:(Le=y==null?void 0:y.duration)!=null?Le:f,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:b,closeButton:(Se=y==null?void 0:y.closeButton)!=null?Se:o,interacting:q,position:D,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:W,toasts:C.filter(xe=>xe.position==Y.position),heights:k.filter(xe=>xe.position==Y.position),setHeights:T,expandByDefault:i,gap:v,loadingIcon:g,expanded:j,pauseWhenPageIsHidden:_,swipeDirections:t.swipeDirections})})):null}))});const pF=({...t})=>{const{theme:e="system"}=U3();return l.jsx(fF,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var mF=R0[" useId ".trim().toString()]||(()=>{}),gF=0;function Dr(t){const[e,n]=m.useState(mF());return vt(()=>{t||n(r=>r??String(gF++))},[t]),t||(e?`radix-${e}`:"")}const vF=["top","right","bottom","left"],vi=Math.min,_n=Math.max,Xh=Math.round,Pd=Math.floor,Mr=t=>({x:t,y:t}),yF={left:"right",right:"left",bottom:"top",top:"bottom"},wF={start:"end",end:"start"};function Zv(t,e,n){return _n(t,vi(e,n))}function ds(t,e){return typeof t=="function"?t(e):t}function hs(t){return t.split("-")[0]}function bl(t){return t.split("-")[1]}function Nw(t){return t==="x"?"y":"x"}function kw(t){return t==="y"?"height":"width"}const xF=new Set(["top","bottom"]);function Pr(t){return xF.has(hs(t))?"y":"x"}function Tw(t){return Nw(Pr(t))}function bF(t,e,n){n===void 0&&(n=!1);const r=bl(t),s=Tw(t),i=kw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Zh(o)),[o,Zh(o)]}function _F(t){const e=Zh(t);return[ey(t),e,ey(e)]}function ey(t){return t.replace(/start|end/g,e=>wF[e])}const hS=["left","right"],fS=["right","left"],SF=["top","bottom"],CF=["bottom","top"];function EF(t,e,n){switch(t){case"top":case"bottom":return n?e?fS:hS:e?hS:fS;case"left":case"right":return e?SF:CF;default:return[]}}function NF(t,e,n,r){const s=bl(t);let i=EF(hs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(ey)))),i}function Zh(t){return t.replace(/left|right|bottom|top/g,e=>yF[e])}function kF(t){return{top:0,right:0,bottom:0,left:0,...t}}function oR(t){return typeof t!="number"?kF(t):{top:t,right:t,bottom:t,left:t}}function ef(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function pS(t,e,n){let{reference:r,floating:s}=t;const i=Pr(e),o=Tw(e),a=kw(o),c=hs(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(bl(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const TF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=pS(u,r,c),f=r,p={},b=0;for(let y=0;y<a.length;y++){const{name:x,fn:v}=a[y],{x:g,y:w,data:S,reset:_}=await v({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=g??d,h=w??h,p={...p,[x]:{...p[x],...S}},_&&b<=50&&(b++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:d,y:h}=pS(u,f,c)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function eu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ds(e,t),b=oR(p),x=a[f?h==="floating"?"reference":"floating":h],v=ef(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),g=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},_=ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:w,strategy:c}):g);return{top:(v.top-_.top+b.top)/S.y,bottom:(_.bottom-v.bottom+b.bottom)/S.y,left:(v.left-_.left+b.left)/S.x,right:(_.right-v.right+b.right)/S.x}}const RF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=ds(t,e)||{};if(u==null)return{};const h=oR(d),f={x:n,y:r},p=Tw(s),b=kw(p),y=await o.getDimensions(u),x=p==="y",v=x?"top":"left",g=x?"bottom":"right",w=x?"clientHeight":"clientWidth",S=i.reference[b]+i.reference[p]-f[p]-i.floating[b],_=f[p]-i.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[w]||i.floating[b]);const N=S/2-_/2,k=E/2-y[b]/2-1,T=vi(h[v],k),j=vi(h[g],k),I=T,q=E-y[b]-j,P=E/2-y[b]/2+N,V=Zv(I,P,q),U=!c.arrow&&bl(s)!=null&&P!==V&&i.reference[b]/2-(P<I?T:j)-y[b]/2<0,G=U?P<I?P-I:P-q:0;return{[p]:f[p]+G,data:{[p]:V,centerOffset:P-V-G,...U&&{alignmentOffset:G}},reset:U}}}),jF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,...x}=ds(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=hs(s),g=Pr(a),w=hs(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=f||(w||!y?[Zh(a)]:_F(a)),C=b!=="none";!f&&C&&_.push(...NF(a,y,b,S));const E=[a,..._],N=await eu(e,x),k=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(N[v]),h){const P=bF(s,o,S);k.push(N[P[0]],N[P[1]])}if(T=[...T,{placement:s,overflows:k}],!k.every(P=>P<=0)){var j,I;const P=(((j=i.flip)==null?void 0:j.index)||0)+1,V=E[P];if(V&&(!(h==="alignment"?g!==Pr(V):!1)||T.every(A=>A.overflows[0]>0&&Pr(A.placement)===g)))return{data:{index:P,overflows:T},reset:{placement:V}};let U=(I=T.filter(G=>G.overflows[0]<=0).sort((G,A)=>G.overflows[1]-A.overflows[1])[0])==null?void 0:I.placement;if(!U)switch(p){case"bestFit":{var q;const G=(q=T.filter(A=>{if(C){const L=Pr(A.placement);return L===g||L==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(L=>L>0).reduce((L,R)=>L+R,0)]).sort((A,L)=>A[1]-L[1])[0])==null?void 0:q[0];G&&(U=G);break}case"initialPlacement":U=a;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function mS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gS(t){return vF.some(e=>t[e]>=0)}const IF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ds(t,e);switch(r){case"referenceHidden":{const i=await eu(e,{...s,elementContext:"reference"}),o=mS(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:gS(o)}}}case"escaped":{const i=await eu(e,{...s,altBoundary:!0}),o=mS(i,n.floating);return{data:{escapedOffsets:o,escaped:gS(o)}}}default:return{}}}}},aR=new Set(["left","top"]);async function PF(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=hs(n),a=bl(n),c=Pr(n)==="y",u=aR.has(o)?-1:1,d=i&&c?-1:1,h=ds(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof b=="number"&&(p=a==="end"?b*-1:b),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const AF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await PF(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},OF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y:g}=x;return{x:v,y:g}}},...c}=ds(t,e),u={x:n,y:r},d=await eu(e,c),h=Pr(hs(s)),f=Nw(h);let p=u[f],b=u[h];if(i){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",g=p+d[x],w=p-d[v];p=Zv(g,p,w)}if(o){const x=h==="y"?"top":"left",v=h==="y"?"bottom":"right",g=b+d[x],w=b-d[v];b=Zv(g,b,w)}const y=a.fn({...e,[f]:p,[h]:b});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[h]:o}}}}}},DF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=ds(t,e),d={x:n,y:r},h=Pr(s),f=Nw(h);let p=d[f],b=d[h];const y=ds(a,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const w=f==="y"?"height":"width",S=i.reference[f]-i.floating[w]+x.mainAxis,_=i.reference[f]+i.reference[w]-x.mainAxis;p<S?p=S:p>_&&(p=_)}if(u){var v,g;const w=f==="y"?"width":"height",S=aR.has(hs(s)),_=i.reference[h]-i.floating[w]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:x.crossAxis),C=i.reference[h]+i.reference[w]+(S?0:((g=o.offset)==null?void 0:g[h])||0)-(S?x.crossAxis:0);b<_?b=_:b>C&&(b=C)}return{[f]:p,[h]:b}}}},MF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=ds(t,e),d=await eu(e,u),h=hs(s),f=bl(s),p=Pr(s)==="y",{width:b,height:y}=i.floating;let x,v;h==="top"||h==="bottom"?(x=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,x=f==="end"?"top":"bottom");const g=y-d.top-d.bottom,w=b-d.left-d.right,S=vi(y-d[x],g),_=vi(b-d[v],w),C=!e.middlewareData.shift;let E=S,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=g),C&&!f){const T=_n(d.left,0),j=_n(d.right,0),I=_n(d.top,0),q=_n(d.bottom,0);p?N=b-2*(T!==0||j!==0?T+j:_n(d.left,d.right)):E=y-2*(I!==0||q!==0?I+q:_n(d.top,d.bottom))}await c({...e,availableWidth:N,availableHeight:E});const k=await o.getDimensions(a.floating);return b!==k.width||y!==k.height?{reset:{rects:!0}}:{}}}};function yp(){return typeof window<"u"}function _l(t){return lR(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zr(t){var e;return(e=(lR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lR(t){return yp()?t instanceof Node||t instanceof kn(t).Node:!1}function mr(t){return yp()?t instanceof Element||t instanceof kn(t).Element:!1}function Vr(t){return yp()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function vS(t){return!yp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}const LF=new Set(["inline","contents"]);function $u(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!LF.has(s)}const FF=new Set(["table","td","th"]);function $F(t){return FF.has(_l(t))}const UF=[":popover-open",":modal"];function wp(t){return UF.some(e=>{try{return t.matches(e)}catch{return!1}})}const VF=["transform","translate","scale","rotate","perspective"],BF=["transform","translate","scale","rotate","perspective","filter"],zF=["paint","layout","strict","content"];function Rw(t){const e=jw(),n=mr(t)?gr(t):t;return VF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||BF.some(r=>(n.willChange||"").includes(r))||zF.some(r=>(n.contain||"").includes(r))}function WF(t){let e=yi(t);for(;Vr(e)&&!il(e);){if(Rw(e))return e;if(wp(e))return null;e=yi(e)}return null}function jw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const HF=new Set(["html","body","#document"]);function il(t){return HF.has(_l(t))}function gr(t){return kn(t).getComputedStyle(t)}function xp(t){return mr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yi(t){if(_l(t)==="html")return t;const e=t.assignedSlot||t.parentNode||vS(t)&&t.host||zr(t);return vS(e)?e.host:e}function cR(t){const e=yi(t);return il(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&$u(e)?e:cR(e)}function tu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=cR(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=kn(s);if(i){const a=ty(o);return e.concat(o,o.visualViewport||[],$u(s)?s:[],a&&n?tu(a):[])}return e.concat(s,tu(s,[],n))}function ty(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uR(t){const e=gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Xh(n)!==i||Xh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Iw(t){return mr(t)?t:t.contextElement}function Pa(t){const e=Iw(t);if(!Vr(e))return Mr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=uR(e);let o=(i?Xh(n.width):n.width)/r,a=(i?Xh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const qF=Mr(0);function dR(t){const e=kn(t);return!jw()||!e.visualViewport?qF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function bo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Iw(t);let o=Mr(1);e&&(r?mr(r)&&(o=Pa(r)):o=Pa(t));const a=GF(i,n,r)?dR(i):Mr(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=kn(i),p=r&&mr(r)?kn(r):r;let b=f,y=ty(b);for(;y&&r&&p!==b;){const x=Pa(y),v=y.getBoundingClientRect(),g=gr(y),w=v.left+(y.clientLeft+parseFloat(g.paddingLeft))*x.x,S=v.top+(y.clientTop+parseFloat(g.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=w,u+=S,b=kn(y),y=ty(b)}}return ef({width:d,height:h,x:c,y:u})}function Pw(t,e){const n=xp(t).scrollLeft;return e?e.left+n:bo(zr(t)).left+n}function hR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Pw(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function KF(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=zr(r),a=e?wp(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Mr(1);const d=Mr(0),h=Vr(r);if((h||!h&&!i)&&((_l(r)!=="body"||$u(o))&&(c=xp(r)),Vr(r))){const p=bo(r);u=Pa(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?hR(o,c,!0):Mr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function YF(t){return Array.from(t.getClientRects())}function QF(t){const e=zr(t),n=xp(t),r=t.ownerDocument.body,s=_n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Pw(t);const a=-n.scrollTop;return gr(r).direction==="rtl"&&(o+=_n(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function JF(t,e){const n=kn(t),r=zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=jw();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const XF=new Set(["absolute","fixed"]);function ZF(t,e){const n=bo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vr(t)?Pa(t):Mr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function yS(t,e,n){let r;if(e==="viewport")r=JF(t,n);else if(e==="document")r=QF(zr(t));else if(mr(e))r=ZF(e,n);else{const s=dR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ef(r)}function fR(t,e){const n=yi(t);return n===e||!mr(n)||il(n)?!1:gr(n).position==="fixed"||fR(n,e)}function e$(t,e){const n=e.get(t);if(n)return n;let r=tu(t,[],!1).filter(a=>mr(a)&&_l(a)!=="body"),s=null;const i=gr(t).position==="fixed";let o=i?yi(t):t;for(;mr(o)&&!il(o);){const a=gr(o),c=Rw(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&XF.has(s.position)||$u(o)&&!c&&fR(t,o))?r=r.filter(d=>d!==o):s=a,o=yi(o)}return e.set(t,r),r}function t$(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?wp(e)?[]:e$(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,d)=>{const h=yS(e,d,s);return u.top=_n(h.top,u.top),u.right=vi(h.right,u.right),u.bottom=vi(h.bottom,u.bottom),u.left=_n(h.left,u.left),u},yS(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function n$(t){const{width:e,height:n}=uR(t);return{width:e,height:n}}function r$(t,e,n){const r=Vr(e),s=zr(e),i=n==="fixed",o=bo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Mr(0);function u(){c.x=Pw(s)}if(r||!r&&!i)if((_l(e)!=="body"||$u(s))&&(a=xp(e)),r){const p=bo(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?hR(s,a):Mr(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Zm(t){return gr(t).position==="static"}function wS(t,e){if(!Vr(t)||gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return zr(t)===n&&(n=n.ownerDocument.body),n}function pR(t,e){const n=kn(t);if(wp(t))return n;if(!Vr(t)){let s=yi(t);for(;s&&!il(s);){if(mr(s)&&!Zm(s))return s;s=yi(s)}return n}let r=wS(t,e);for(;r&&$F(r)&&Zm(r);)r=wS(r,e);return r&&il(r)&&Zm(r)&&!Rw(r)?n:r||WF(t)||n}const s$=async function(t){const e=this.getOffsetParent||pR,n=this.getDimensions,r=await n(t.floating);return{reference:r$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function i$(t){return gr(t).direction==="rtl"}const o$={convertOffsetParentRelativeRectToViewportRelativeRect:KF,getDocumentElement:zr,getClippingRect:t$,getOffsetParent:pR,getElementRects:s$,getClientRects:YF,getDimensions:n$,getScale:Pa,isElement:mr,isRTL:i$};function mR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function a$(t,e){let n=null,r;const s=zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const b=Pd(h),y=Pd(s.clientWidth-(d+f)),x=Pd(s.clientHeight-(h+p)),v=Pd(d),w={rootMargin:-b+"px "+-y+"px "+-x+"px "+-v+"px",threshold:_n(0,vi(1,c))||1};let S=!0;function _(C){const E=C[0].intersectionRatio;if(E!==c){if(!S)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!mR(u,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(_,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),i}function l$(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Iw(t),d=s||i?[...u?tu(u):[],...tu(e)]:[];d.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=u&&a?a$(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let b,y=c?bo(t):null;c&&x();function x(){const v=bo(t);y&&!mR(y,v)&&n(),y=v,b=requestAnimationFrame(x)}return n(),()=>{var v;d.forEach(g=>{s&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(b)}}const c$=AF,u$=OF,d$=jF,h$=MF,f$=IF,xS=RF,p$=DF,m$=(t,e,n)=>{const r=new Map,s={platform:o$,...n},i={...s.platform,_c:r};return TF(t,e,{...s,platform:i})};var g$=typeof document<"u",v$=function(){},fh=g$?m.useLayoutEffect:v$;function tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!tf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!tf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function gR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bS(t,e){const n=gR(t);return Math.round(e*n)/n}function eg(t){const e=m.useRef(t);return fh(()=>{e.current=t}),e}function y$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[d,h]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=m.useState(r);tf(f,r)||p(r);const[b,y]=m.useState(null),[x,v]=m.useState(null),g=m.useCallback(A=>{A!==C.current&&(C.current=A,y(A))},[]),w=m.useCallback(A=>{A!==E.current&&(E.current=A,v(A))},[]),S=i||b,_=o||x,C=m.useRef(null),E=m.useRef(null),N=m.useRef(d),k=c!=null,T=eg(c),j=eg(s),I=eg(u),q=m.useCallback(()=>{if(!C.current||!E.current)return;const A={placement:e,strategy:n,middleware:f};j.current&&(A.platform=j.current),m$(C.current,E.current,A).then(L=>{const R={...L,isPositioned:I.current!==!1};P.current&&!tf(N.current,R)&&(N.current=R,Ao.flushSync(()=>{h(R)}))})},[f,e,n,j,I]);fh(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[u]);const P=m.useRef(!1);fh(()=>(P.current=!0,()=>{P.current=!1}),[]),fh(()=>{if(S&&(C.current=S),_&&(E.current=_),S&&_){if(T.current)return T.current(S,_,q);q()}},[S,_,q,T,k]);const V=m.useMemo(()=>({reference:C,floating:E,setReference:g,setFloating:w}),[g,w]),U=m.useMemo(()=>({reference:S,floating:_}),[S,_]),G=m.useMemo(()=>{const A={position:n,left:0,top:0};if(!U.floating)return A;const L=bS(U.floating,d.x),R=bS(U.floating,d.y);return a?{...A,transform:"translate("+L+"px, "+R+"px)",...gR(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:R}},[n,a,U.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:q,refs:V,elements:U,floatingStyles:G}),[d,q,V,U,G])}const w$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?xS({element:r.current,padding:s}).fn(n):{}:r?xS({element:r,padding:s}).fn(n):{}}}},x$=(t,e)=>({...c$(t),options:[t,e]}),b$=(t,e)=>({...u$(t),options:[t,e]}),_$=(t,e)=>({...p$(t),options:[t,e]}),S$=(t,e)=>({...d$(t),options:[t,e]}),C$=(t,e)=>({...h$(t),options:[t,e]}),E$=(t,e)=>({...f$(t),options:[t,e]}),N$=(t,e)=>({...w$(t),options:[t,e]});var k$="Arrow",vR=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(ee.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});vR.displayName=k$;var T$=vR;function Aw(t){const[e,n]=m.useState(void 0);return vt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ow="Popper",[yR,bp]=mn(Ow),[R$,wR]=yR(Ow),xR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return l.jsx(R$,{scope:e,anchor:r,onAnchorChange:s,children:n})};xR.displayName=Ow;var bR="PopperAnchor",_R=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=wR(bR,n),o=m.useRef(null),a=me(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(ee.div,{...s,ref:a})});_R.displayName=bR;var Dw="PopperContent",[j$,I$]=yR(Dw),SR=m.forwardRef((t,e)=>{var Y,Ee,Le,Se,xe,_e;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:b,...y}=t,x=wR(Dw,n),[v,g]=m.useState(null),w=me(e,it=>g(it)),[S,_]=m.useState(null),C=Aw(S),E=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,k=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],I=j.length>0,q={padding:T,boundary:j.filter(A$),altBoundary:I},{refs:P,floatingStyles:V,placement:U,isPositioned:G,middlewareData:A}=y$({strategy:"fixed",placement:k,whileElementsMounted:(...it)=>l$(...it,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[x$({mainAxis:s+N,alignmentAxis:o}),c&&b$({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?_$():void 0,...q}),c&&S$({...q}),C$({...q,apply:({elements:it,rects:nn,availableWidth:Ss,availableHeight:qr})=>{const{width:Cs,height:Do}=nn.reference,Ai=it.floating.style;Ai.setProperty("--radix-popper-available-width",`${Ss}px`),Ai.setProperty("--radix-popper-available-height",`${qr}px`),Ai.setProperty("--radix-popper-anchor-width",`${Cs}px`),Ai.setProperty("--radix-popper-anchor-height",`${Do}px`)}}),S&&N$({element:S,padding:a}),O$({arrowWidth:E,arrowHeight:N}),f&&E$({strategy:"referenceHidden",...q})]}),[L,R]=NR(U),W=ft(b);vt(()=>{G&&(W==null||W())},[G,W]);const D=(Y=A.arrow)==null?void 0:Y.x,te=(Ee=A.arrow)==null?void 0:Ee.y,re=((Le=A.arrow)==null?void 0:Le.centerOffset)!==0,[je,ze]=m.useState();return vt(()=>{v&&ze(window.getComputedStyle(v).zIndex)},[v]),l.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:G?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:je,"--radix-popper-transform-origin":[(Se=A.transformOrigin)==null?void 0:Se.x,(xe=A.transformOrigin)==null?void 0:xe.y].join(" "),...((_e=A.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(j$,{scope:n,placedSide:L,onArrowChange:_,arrowX:D,arrowY:te,shouldHideArrow:re,children:l.jsx(ee.div,{"data-side":L,"data-align":R,...y,ref:w,style:{...y.style,animation:G?void 0:"none"}})})})});SR.displayName=Dw;var CR="PopperArrow",P$={top:"bottom",right:"left",bottom:"top",left:"right"},ER=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=I$(CR,r),o=P$[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(T$,{...s,ref:n,style:{...s.style,display:"block"}})})});ER.displayName=CR;function A$(t){return t!==null}var O$=t=>({name:"transformOrigin",options:t,fn(e){var x,v,g;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=NR(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let b="",y="";return u==="bottom"?(b=o?h:`${f}px`,y=`${-c}px`):u==="top"?(b=o?h:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,y=o?h:`${p}px`):u==="left"&&(b=`${r.floating.width+c}px`,y=o?h:`${p}px`),{data:{x:b,y}}}});function NR(t){const[e,n="center"]=t.split("-");return[e,n]}var D$=xR,kR=_R,TR=SR,RR=ER,[_p,Pte]=mn("Tooltip",[bp]),Mw=bp(),jR="TooltipProvider",M$=700,_S="tooltip.open",[L$,IR]=_p(jR),PR=t=>{const{__scopeTooltip:e,delayDuration:n=M$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),a=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(L$,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:m.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};PR.displayName=jR;var AR="Tooltip",[Ate,Sp]=_p(AR),ny="TooltipTrigger",F$=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sp(ny,n),i=IR(ny,n),o=Mw(n),a=m.useRef(null),c=me(e,a,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(kR,{asChild:!0,...o,children:l.jsx(ee.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:X(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:X(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:X(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:X(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:X(t.onBlur,s.onClose),onClick:X(t.onClick,s.onClose)})})});F$.displayName=ny;var $$="TooltipPortal",[Ote,U$]=_p($$,{forceMount:void 0}),ol="TooltipContent",OR=m.forwardRef((t,e)=>{const n=U$(ol,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Sp(ol,t.__scopeTooltip);return l.jsx(In,{present:r||o.open,children:o.disableHoverableContent?l.jsx(DR,{side:s,...i,ref:e}):l.jsx(V$,{side:s,...i,ref:e})})}),V$=m.forwardRef((t,e)=>{const n=Sp(ol,t.__scopeTooltip),r=IR(ol,t.__scopeTooltip),s=m.useRef(null),i=me(e,s),[o,a]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=m.useCallback(()=>{a(null),h(!1)},[h]),p=m.useCallback((b,y)=>{const x=b.currentTarget,v={x:b.clientX,y:b.clientY},g=q$(v,x.getBoundingClientRect()),w=G$(v,g),S=K$(y.getBoundingClientRect()),_=Q$([...w,...S]);a(_),h(!0)},[h]);return m.useEffect(()=>()=>f(),[f]),m.useEffect(()=>{if(c&&d){const b=x=>p(x,d),y=x=>p(x,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",y)}}},[c,d,p,f]),m.useEffect(()=>{if(o){const b=y=>{const x=y.target,v={x:y.clientX,y:y.clientY},g=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),w=!Y$(v,o);g?f():w&&(f(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,f]),l.jsx(DR,{...t,ref:i})}),[B$,z$]=_p(AR,{isInside:!1}),W$=J4("TooltipContent"),DR=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=Sp(ol,n),u=Mw(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(_S,d),()=>document.removeEventListener(_S,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(Du,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(TR,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(W$,{children:r}),l.jsx(B$,{scope:n,isInside:!0,children:l.jsx(w5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});OR.displayName=ol;var MR="TooltipArrow",H$=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Mw(n);return z$(MR,n).isInside?null:l.jsx(RR,{...s,...r,ref:e})});H$.displayName=MR;function q$(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function G$(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function K$(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Y$(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function Q$(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),J$(e)}function J$(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var X$=PR,LR=OR;const Z$=X$,e6=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(LR,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));e6.displayName=LR.displayName;var Cp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ep=typeof window>"u"||"Deno"in globalThis;function Xn(){}function t6(t,e){return typeof t=="function"?t(e):t}function n6(t){return typeof t=="number"&&t>=0&&t!==1/0}function r6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ry(t,e){return typeof t=="function"?t(e):t}function s6(t,e){return typeof t=="function"?t(e):t}function SS(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Lw(o,e.options))return!1}else if(!ru(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function CS(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(nu(e.options.mutationKey)!==nu(i))return!1}else if(!ru(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Lw(t,e){return((e==null?void 0:e.queryKeyHashFn)||nu)(t)}function nu(t){return JSON.stringify(t,(e,n)=>sy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ru(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ru(t[n],e[n])):!1}function FR(t,e){if(t===e)return t;const n=ES(t)&&ES(e);if(n||sy(t)&&sy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=FR(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:a}return e}function ES(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function sy(t){if(!NS(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!NS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function NS(t){return Object.prototype.toString.call(t)==="[object Object]"}function i6(t){return new Promise(e=>{setTimeout(e,t)})}function o6(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?FR(t,e):e}function a6(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function l6(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fw=Symbol();function $R(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var eo,Gs,Ba,QE,c6=(QE=class extends Cp{constructor(){super();Ne(this,eo);Ne(this,Gs);Ne(this,Ba);de(this,Ba,e=>{if(!Ep&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,Gs)||this.setEventListener(F(this,Ba))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Gs))==null||e.call(this),de(this,Gs,void 0))}setEventListener(e){var n;de(this,Ba,e),(n=F(this,Gs))==null||n.call(this),de(this,Gs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){F(this,eo)!==e&&(de(this,eo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,eo)=="boolean"?F(this,eo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},eo=new WeakMap,Gs=new WeakMap,Ba=new WeakMap,QE),UR=new c6,za,Ks,Wa,JE,u6=(JE=class extends Cp{constructor(){super();Ne(this,za,!0);Ne(this,Ks);Ne(this,Wa);de(this,Wa,e=>{if(!Ep&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){F(this,Ks)||this.setEventListener(F(this,Wa))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Ks))==null||e.call(this),de(this,Ks,void 0))}setEventListener(e){var n;de(this,Wa,e),(n=F(this,Ks))==null||n.call(this),de(this,Ks,e(this.setOnline.bind(this)))}setOnline(e){F(this,za)!==e&&(de(this,za,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return F(this,za)}},za=new WeakMap,Ks=new WeakMap,Wa=new WeakMap,JE),nf=new u6;function d6(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function h6(t){return Math.min(1e3*2**t,3e4)}function VR(t){return(t??"online")==="online"?nf.isOnline():!0}var BR=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tg(t){return t instanceof BR}function zR(t){let e=!1,n=0,r=!1,s;const i=d6(),o=y=>{var x;r||(f(new BR(y)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>UR.isFocused()&&(t.networkMode==="always"||nf.isOnline())&&t.canRun(),d=()=>VR(t.networkMode)&&t.canRun(),h=y=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,y),s==null||s(),i.resolve(y))},f=y=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,y),s==null||s(),i.reject(y))},p=()=>new Promise(y=>{var x;s=v=>{(r||u())&&y(v)},(x=t.onPause)==null||x.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),b=()=>{if(r)return;let y;const x=n===0?t.initialPromise:void 0;try{y=x??t.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var C;if(r)return;const g=t.retry??(Ep?0:3),w=t.retryDelay??h6,S=typeof w=="function"?w(n,v):w,_=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,v);if(e||!_){f(v);return}n++,(C=t.onFail)==null||C.call(t,n,v),i6(S).then(()=>u()?void 0:p()).then(()=>{e?f(v):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?b():p().then(b),i)}}var f6=t=>setTimeout(t,0);function p6(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=f6;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Yt=p6(),to,XE,WR=(XE=class{constructor(){Ne(this,to)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),n6(this.gcTime)&&de(this,to,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ep?1/0:5*60*1e3))}clearGcTimeout(){F(this,to)&&(clearTimeout(F(this,to)),de(this,to,void 0))}},to=new WeakMap,XE),Ha,no,An,ro,Lt,Tu,so,er,Yr,ZE,m6=(ZE=class extends WR{constructor(e){super();Ne(this,er);Ne(this,Ha);Ne(this,no);Ne(this,An);Ne(this,ro);Ne(this,Lt);Ne(this,Tu);Ne(this,so);de(this,so,!1),de(this,Tu,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,ro,e.client),de(this,An,F(this,ro).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,Ha,v6(this.options)),this.state=e.state??F(this,Ha),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,Lt))==null?void 0:e.promise}setOptions(e){this.options={...F(this,Tu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,An).remove(this)}setData(e,n){const r=o6(this.state.data,e,this.options);return Ot(this,er,Yr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ot(this,er,Yr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=F(this,Lt))==null?void 0:r.promise;return(s=F(this,Lt))==null||s.cancel(e),n?n.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,Ha))}isActive(){return this.observers.some(e=>s6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ry(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!r6(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Lt))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,Lt))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,An).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(F(this,Lt)&&(F(this,so)?F(this,Lt).cancel({revert:!0}):F(this,Lt).cancelRetry()),this.scheduleGc()),F(this,An).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ot(this,er,Yr).call(this,{type:"invalidate"})}fetch(e,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,Lt))return F(this,Lt).continueRetry(),F(this,Lt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(de(this,so,!0),r.signal)})},i=()=>{const f=$R(this.options,n),b=(()=>{const y={client:F(this,ro),queryKey:this.queryKey,meta:this.meta};return s(y),y})();return de(this,so,!1),this.options.persister?this.options.persister(f,b,this):f(b)},a=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,ro),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),de(this,no,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Ot(this,er,Yr).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,b,y,x;tg(f)&&f.silent||Ot(this,er,Yr).call(this,{type:"error",error:f}),tg(f)||((b=(p=F(this,An).config).onError)==null||b.call(p,f,this),(x=(y=F(this,An).config).onSettled)==null||x.call(y,this.state.data,f,this)),this.scheduleGc()};return de(this,Lt,zR({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,b,y,x;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){c(v);return}(b=(p=F(this,An).config).onSuccess)==null||b.call(p,f,this),(x=(y=F(this,An).config).onSettled)==null||x.call(y,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{Ot(this,er,Yr).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Ot(this,er,Yr).call(this,{type:"pause"})},onContinue:()=>{Ot(this,er,Yr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),F(this,Lt).start()}},Ha=new WeakMap,no=new WeakMap,An=new WeakMap,ro=new WeakMap,Lt=new WeakMap,Tu=new WeakMap,so=new WeakMap,er=new WeakSet,Yr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...g6(r.data,this.options),fetchMeta:e.meta??null};case"success":return de(this,no,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return tg(s)&&s.revert&&F(this,no)?{...F(this,no),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Yt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),F(this,An).notify({query:this,type:"updated",action:e})})},ZE);function g6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function v6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kr,eN,y6=(eN=class extends Cp{constructor(e={}){super();Ne(this,kr);this.config=e,de(this,kr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Lw(s,n);let o=this.get(i);return o||(o=new m6({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){F(this,kr).has(e.queryHash)||(F(this,kr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,kr).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,kr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,kr).get(e)}getAll(){return[...F(this,kr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>SS(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>SS(e,r)):n}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},kr=new WeakMap,eN),Tr,Gt,io,Rr,Is,tN,w6=(tN=class extends WR{constructor(e){super();Ne(this,Rr);Ne(this,Tr);Ne(this,Gt);Ne(this,io);this.mutationId=e.mutationId,de(this,Gt,e.mutationCache),de(this,Tr,[]),this.state=e.state||x6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,Tr).includes(e)||(F(this,Tr).push(e),this.clearGcTimeout(),F(this,Gt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,Tr,F(this,Tr).filter(n=>n!==e)),this.scheduleGc(),F(this,Gt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,Tr).length||(this.state.status==="pending"?this.scheduleGc():F(this,Gt).remove(this))}continue(){var e;return((e=F(this,io))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,d,h,f,p,b,y,x,v,g,w,S,_,C,E,N;const n=()=>{Ot(this,Rr,Is).call(this,{type:"continue"})};de(this,io,zR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,T)=>{Ot(this,Rr,Is).call(this,{type:"failed",failureCount:k,error:T})},onPause:()=>{Ot(this,Rr,Is).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,Gt).canRun(this)}));const r=this.state.status==="pending",s=!F(this,io).canStart();try{if(r)n();else{Ot(this,Rr,Is).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=F(this,Gt).config).onMutate)==null?void 0:o.call(i,e,this));const T=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));T!==this.state.context&&Ot(this,Rr,Is).call(this,{type:"pending",context:T,variables:e,isPaused:s})}const k=await F(this,io).start();return await((d=(u=F(this,Gt).config).onSuccess)==null?void 0:d.call(u,k,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,k,e,this.state.context)),await((b=(p=F(this,Gt).config).onSettled)==null?void 0:b.call(p,k,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,k,null,e,this.state.context)),Ot(this,Rr,Is).call(this,{type:"success",data:k}),k}catch(k){try{throw await((g=(v=F(this,Gt).config).onError)==null?void 0:g.call(v,k,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,k,e,this.state.context)),await((C=(_=F(this,Gt).config).onSettled)==null?void 0:C.call(_,void 0,k,this.state.variables,this.state.context,this)),await((N=(E=this.options).onSettled)==null?void 0:N.call(E,void 0,k,e,this.state.context)),k}finally{Ot(this,Rr,Is).call(this,{type:"error",error:k})}}finally{F(this,Gt).runNext(this)}}},Tr=new WeakMap,Gt=new WeakMap,io=new WeakMap,Rr=new WeakSet,Is=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yt.batch(()=>{F(this,Tr).forEach(r=>{r.onMutationUpdate(e)}),F(this,Gt).notify({mutation:this,type:"updated",action:e})})},tN);function x6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Zr,tr,Ru,nN,b6=(nN=class extends Cp{constructor(e={}){super();Ne(this,Zr);Ne(this,tr);Ne(this,Ru);this.config=e,de(this,Zr,new Set),de(this,tr,new Map),de(this,Ru,0)}build(e,n,r){const s=new w6({mutationCache:this,mutationId:++dd(this,Ru)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){F(this,Zr).add(e);const n=Ad(e);if(typeof n=="string"){const r=F(this,tr).get(n);r?r.push(e):F(this,tr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,Zr).delete(e)){const n=Ad(e);if(typeof n=="string"){const r=F(this,tr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&F(this,tr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ad(e);if(typeof n=="string"){const r=F(this,tr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Ad(e);if(typeof n=="string"){const s=(r=F(this,tr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yt.batch(()=>{F(this,Zr).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,Zr).clear(),F(this,tr).clear()})}getAll(){return Array.from(F(this,Zr))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>CS(n,r))}findAll(e={}){return this.getAll().filter(n=>CS(e,n))}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},Zr=new WeakMap,tr=new WeakMap,Ru=new WeakMap,nN);function Ad(t){var e;return(e=t.options.scope)==null?void 0:e.id}function kS(t){return{onFetch:(e,n)=>{var d,h,f,p,b;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},v=$R(e.options,e.fetchOptions),g=async(w,S,_)=>{if(y)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const E=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:S,direction:_?"backward":"forward",meta:e.options.meta};return x(j),j})(),N=await v(E),{maxPages:k}=e.options,T=_?l6:a6;return{pages:T(w.pages,N,k),pageParams:T(w.pageParams,S,k)}};if(s&&i.length){const w=s==="backward",S=w?_6:TS,_={pages:i,pageParams:o},C=S(r,_);a=await g(_,C,w)}else{const w=t??i.length;do{const S=c===0?o[0]??r.initialPageParam:TS(r,a);if(c>0&&S==null)break;a=await g(a,S),c++}while(c<w)}return a};e.options.persister?e.fetchFn=()=>{var y,x;return(x=(y=e.options).persister)==null?void 0:x.call(y,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function TS(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function _6(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Xe,Ys,Qs,qa,Ga,Js,Ka,Ya,rN,S6=(rN=class{constructor(t={}){Ne(this,Xe);Ne(this,Ys);Ne(this,Qs);Ne(this,qa);Ne(this,Ga);Ne(this,Js);Ne(this,Ka);Ne(this,Ya);de(this,Xe,t.queryCache||new y6),de(this,Ys,t.mutationCache||new b6),de(this,Qs,t.defaultOptions||{}),de(this,qa,new Map),de(this,Ga,new Map),de(this,Js,0)}mount(){dd(this,Js)._++,F(this,Js)===1&&(de(this,Ka,UR.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Xe).onFocus())})),de(this,Ya,nf.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Xe).onOnline())})))}unmount(){var t,e;dd(this,Js)._--,F(this,Js)===0&&((t=F(this,Ka))==null||t.call(this),de(this,Ka,void 0),(e=F(this,Ya))==null||e.call(this),de(this,Ya,void 0))}isFetching(t){return F(this,Xe).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,Ys).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Xe).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,Xe).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ry(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return F(this,Xe).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=F(this,Xe).get(r.queryHash),i=s==null?void 0:s.state.data,o=t6(e,i);if(o!==void 0)return F(this,Xe).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Yt.batch(()=>F(this,Xe).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Xe).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,Xe);Yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,Xe);return Yt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Yt.batch(()=>F(this,Xe).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xn).catch(Xn)}invalidateQueries(t,e={}){return Yt.batch(()=>(F(this,Xe).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Yt.batch(()=>F(this,Xe).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,Xe).build(this,e);return n.isStaleByTime(ry(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=kS(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=kS(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nf.isOnline()?F(this,Ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Xe)}getMutationCache(){return F(this,Ys)}getDefaultOptions(){return F(this,Qs)}setDefaultOptions(t){de(this,Qs,t)}setQueryDefaults(t,e){F(this,qa).set(nu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,qa).values()],n={};return e.forEach(r=>{ru(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){F(this,Ga).set(nu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,Ga).values()],n={};return e.forEach(r=>{ru(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,Qs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Lw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Fw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,Qs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Xe).clear(),F(this,Ys).clear()}},Xe=new WeakMap,Ys=new WeakMap,Qs=new WeakMap,qa=new WeakMap,Ga=new WeakMap,Js=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,rN),C6=m.createContext(void 0),E6=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(C6.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(this,arguments)}var ei;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ei||(ei={}));const RS="popstate";function N6(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=Uu(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),iy("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:HR(i))}function r(s,i){$w(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return T6(e,n,r,t)}function fn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $w(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k6(){return Math.random().toString(36).substr(2,8)}function jS(t,e){return{usr:t.state,key:t.key,idx:e}}function iy(t,e,n,r){return n===void 0&&(n=null),rf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Uu(e):e,{state:n,key:e&&e.key||r||k6()})}function HR(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Uu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function T6(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ei.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(rf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ei.Pop;let x=d(),v=x==null?null:x-u;u=x,c&&c({action:a,location:y.location,delta:v})}function f(x,v){a=ei.Push;let g=iy(y.location,x,v);n&&n(g,x),u=d()+1;let w=jS(g,u),S=y.createHref(g);try{o.pushState(w,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(S)}i&&c&&c({action:a,location:y.location,delta:1})}function p(x,v){a=ei.Replace;let g=iy(y.location,x,v);n&&n(g,x),u=d();let w=jS(g,u),S=y.createHref(g);o.replaceState(w,"",S),i&&c&&c({action:a,location:y.location,delta:0})}function b(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:HR(x);return g=g.replace(/ $/,"%20"),fn(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return a},get location(){return t(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(RS,h),c=x,()=>{s.removeEventListener(RS,h),c=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let v=b(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(x){return o.go(x)}};return y}var IS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(IS||(IS={}));function R6(t,e,n){return n===void 0&&(n="/"),j6(t,e,n,!1)}function j6(t,e,n,r){let s=typeof e=="string"?Uu(e):e,i=KR(s.pathname||"/",n);if(i==null)return null;let o=qR(t);I6(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=B6(i);a=U6(o[c],u,r)}return a}function qR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(fn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Aa([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(fn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qR(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:F6(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of GR(i.path))s(i,o,c)}),e}function GR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=GR(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function I6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const P6=/^:[\w-]+$/,A6=3,O6=2,D6=1,M6=10,L6=-2,PS=t=>t==="*";function F6(t,e){let n=t.split("/"),r=n.length;return n.some(PS)&&(r+=L6),e&&(r+=O6),n.filter(s=>!PS(s)).reduce((s,i)=>s+(P6.test(i)?A6:i===""?D6:M6),r)}function $6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function U6(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=AS({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=AS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Aa([i,h.pathname]),pathnameBase:z6(Aa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Aa([i,h.pathnameBase]))}return o}function AS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V6(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=a[h];return p&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function V6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$w(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function B6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $w(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function KR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Aa=t=>t.join("/").replace(/\/\/+/g,"/"),z6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function W6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YR=["post","put","patch","delete"];new Set(YR);const H6=["get",...YR];new Set(H6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(this,arguments)}const q6=m.createContext(null),G6=m.createContext(null),QR=m.createContext(null),Np=m.createContext(null),kp=m.createContext({outlet:null,matches:[],isDataRoute:!1}),JR=m.createContext(null);function Uw(){return m.useContext(Np)!=null}function XR(){return Uw()||fn(!1),m.useContext(Np).location}function K6(t,e){return Y6(t,e)}function Y6(t,e,n,r){Uw()||fn(!1);let{navigator:s}=m.useContext(QR),{matches:i}=m.useContext(kp),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=XR(),d;if(e){var h;let x=typeof e=="string"?Uu(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||fn(!1),d=x}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=R6(t,{pathname:p}),y=eU(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Aa([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Aa([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&y?m.createElement(Np.Provider,{value:{location:sf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ei.Pop}},y):y}function Q6(){let t=sU(),e=W6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const J6=m.createElement(Q6,null);class X6 extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(kp.Provider,{value:this.props.routeContext},m.createElement(JR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z6(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(q6);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(kp.Provider,{value:e},r)}function eU(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||fn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,b=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,b=!1,y=null,x=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||J6,c&&(u<0&&f===0?(b=!0,x=null):u===f&&(b=!0,x=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),g=()=>{let w;return p?w=y:b?w=x:h.route.Component?w=m.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,m.createElement(Z6,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(X6,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var oy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oy||{});function tU(t){let e=m.useContext(G6);return e||fn(!1),e}function nU(t){let e=m.useContext(kp);return e||fn(!1),e}function rU(t){let e=nU(),n=e.matches[e.matches.length-1];return n.route.id||fn(!1),n.route.id}function sU(){var t;let e=m.useContext(JR),n=tU(oy.UseRouteError),r=rU(oy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ay(t){fn(!1)}function oU(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ei.Pop,navigator:i,static:o=!1,future:a}=t;Uw()&&fn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:sf({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Uu(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:b="default"}=r,y=m.useMemo(()=>{let x=KR(d,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:p,key:b},navigationType:s}},[c,d,h,f,p,b,s]);return y==null?null:m.createElement(QR.Provider,{value:u},m.createElement(Np.Provider,{children:n,value:y}))}function aU(t){let{children:e,location:n}=t;return K6(ly(e),n)}new Promise(()=>{});function ly(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let i=[...e,s];if(r.type===m.Fragment){n.push.apply(n,ly(r.props.children,i));return}r.type!==ay&&fn(!1),!r.props.index||!r.props.children||fn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ly(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lU="6";try{window.__reactRouterVersion=lU}catch{}const cU="startTransition",OS=R0[cU];function uU(t){let{basename:e,children:n,future:r,window:s}=t,i=m.useRef();i.current==null&&(i.current=N6({window:s,v5Compat:!0}));let o=i.current,[a,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&OS?OS(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>iU(r),[r]),m.createElement(oU,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var DS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DS||(DS={}));var MS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(MS||(MS={}));const dU=()=>{};var LS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Sl(e)},Sl=function(t){return new Error("Firebase Database ("+ZR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},hU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[d],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ej(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new fU;const f=i<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tj=function(t){const e=ej(t);return Vw.encodeByteArray(e,!0)},of=function(t){return tj(t).replace(/\./g,"")},af=function(t){try{return Vw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){return nj(void 0,t)}function nj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mU(n)||(t[n]=nj(t[n],e[n]));return t}function mU(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=()=>gU().__FIREBASE_DEFAULTS__,yU=()=>{if(typeof process>"u"||typeof LS>"u")return;const t=LS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&af(t[1]);return e&&JSON.parse(e)},Bw=()=>{try{return dU()||vU()||yU()||wU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rj=t=>{var e,n;return(n=(e=Bw())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},xU=t=>{const e=rj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sj=()=>{var t;return(t=Bw())==null?void 0:t.config},ij=t=>{var e;return(e=Bw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[of(JSON.stringify(n)),of(JSON.stringify(o)),""].join(".")}const Sc={};function _U(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sc))Sc[e]?t.emulator.push(e):t.prod.push(e);return t}function SU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let FS=!1;function aj(t,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Sc[t]===e||Sc[t]||FS)return;Sc[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=_U().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{FS=!0,o()},f}function d(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=SU(r),p=n("text"),b=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),x=document.getElementById(y)||document.createElement("a"),v=n("preprendIcon"),g=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;a(w),d(x,y);const S=u();c(g,v),w.append(g,b,x,S),document.body.appendChild(w)}i?(b.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function CU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NU(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cj(){return ZR.NODE_ADMIN===!0}function kU(){try{return typeof indexedDB=="object"}catch{return!1}}function TU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RU,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jU(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,a,r)}}function jU(t,e){return t.replace(IU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const IU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=su(af(i[0])||""),n=su(af(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},PU=function(t){const e=uj(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},AU=function(t){const e=uj(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function al(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function cy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lf(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function _o(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($S(i)&&$S(o)){if(!_o(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $S(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+r[h]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function DU(t,e){const n=new MU(t,e);return n.subscribe.bind(n)}class MU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ng),s.error===void 0&&(s.error=ng),s.complete===void 0&&(s.complete=ng);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ng(){}function Ww(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Rp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return t&&t._delegate?t._delegate:t}class So{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VU(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UU(t){return t===Ui?void 0:t}function VU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $U(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const zU={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},WU=Pe.INFO,HU={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},qU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=HU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hw{constructor(e){this.name=e,this._logLevel=WU,this._logHandler=qU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const GU=(t,e)=>e.some(n=>t instanceof n);let US,VS;function KU(){return US||(US=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YU(){return VS||(VS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dj=new WeakMap,uy=new WeakMap,hj=new WeakMap,rg=new WeakMap,qw=new WeakMap;function QU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ci(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dj.set(n,t)}).catch(()=>{}),qw.set(e,t),e}function JU(t){if(uy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});uy.set(t,e)}let dy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XU(t){dy=t(dy)}function ZU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sg(this),e,...n);return hj.set(r,e.sort?e.sort():[e]),ci(r)}:YU().includes(t)?function(...e){return t.apply(sg(this),e),ci(dj.get(this))}:function(...e){return ci(t.apply(sg(this),e))}}function eV(t){return typeof t=="function"?ZU(t):(t instanceof IDBTransaction&&JU(t),GU(t,KU())?new Proxy(t,dy):t)}function ci(t){if(t instanceof IDBRequest)return QU(t);if(rg.has(t))return rg.get(t);const e=eV(t);return e!==t&&(rg.set(t,e),qw.set(e,t)),e}const sg=t=>qw.get(t);function tV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ci(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ci(o.result),c.oldVersion,c.newVersion,ci(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nV=["get","getKey","getAll","getAllKeys","count"],rV=["put","add","delete","clear"],ig=new Map;function BS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ig.get(e))return ig.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return ig.set(e,i),i}XU(t=>({...t,get:(e,n,r)=>BS(e,n)||t.get(e,n,r),has:(e,n)=>!!BS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hy="@firebase/app",zS="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Hw("@firebase/app"),oV="@firebase/app-compat",aV="@firebase/analytics-compat",lV="@firebase/analytics",cV="@firebase/app-check-compat",uV="@firebase/app-check",dV="@firebase/auth",hV="@firebase/auth-compat",fV="@firebase/database",pV="@firebase/data-connect",mV="@firebase/database-compat",gV="@firebase/functions",vV="@firebase/functions-compat",yV="@firebase/installations",wV="@firebase/installations-compat",xV="@firebase/messaging",bV="@firebase/messaging-compat",_V="@firebase/performance",SV="@firebase/performance-compat",CV="@firebase/remote-config",EV="@firebase/remote-config-compat",NV="@firebase/storage",kV="@firebase/storage-compat",TV="@firebase/firestore",RV="@firebase/ai",jV="@firebase/firestore-compat",IV="firebase",PV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="[DEFAULT]",AV={[hy]:"fire-core",[oV]:"fire-core-compat",[lV]:"fire-analytics",[aV]:"fire-analytics-compat",[uV]:"fire-app-check",[cV]:"fire-app-check-compat",[dV]:"fire-auth",[hV]:"fire-auth-compat",[fV]:"fire-rtdb",[pV]:"fire-data-connect",[mV]:"fire-rtdb-compat",[gV]:"fire-fn",[vV]:"fire-fn-compat",[yV]:"fire-iid",[wV]:"fire-iid-compat",[xV]:"fire-fcm",[bV]:"fire-fcm-compat",[_V]:"fire-perf",[SV]:"fire-perf-compat",[CV]:"fire-rc",[EV]:"fire-rc-compat",[NV]:"fire-gcs",[kV]:"fire-gcs-compat",[TV]:"fire-fst",[jV]:"fire-fst-compat",[RV]:"fire-vertex","fire-js":"fire-js",[IV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,OV=new Map,py=new Map;function WS(t,e){try{t.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ll(t){const e=t.name;if(py.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;py.set(e,t);for(const n of cf.values())WS(n,t);for(const n of OV.values())WS(n,t);return!0}function Gw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Vu("app","Firebase",DV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=PV;function fj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ui.create("bad-app-name",{appName:String(s)});if(n||(n=sj()),!n)throw ui.create("no-options");const i=cf.get(s);if(i){if(_o(n,i.options)&&_o(r,i.config))return i;throw ui.create("duplicate-app",{appName:s})}const o=new BU(s);for(const c of py.values())o.addComponent(c);const a=new MV(n,r,o);return cf.set(s,a),a}function pj(t=fy){const e=cf.get(t);if(!e&&t===fy&&sj())return fj();if(!e)throw ui.create("no-app",{appName:t});return e}function di(t,e,n){let r=AV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(o.join(" "));return}ll(new So(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="firebase-heartbeat-database",FV=1,iu="firebase-heartbeat-store";let og=null;function mj(){return og||(og=tV(LV,FV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),og}async function $V(t){try{const n=(await mj()).transaction(iu),r=await n.objectStore(iu).get(gj(t));return await n.done,r}catch(e){if(e instanceof Ti)fs.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(n.message)}}}async function HS(t,e){try{const r=(await mj()).transaction(iu,"readwrite");await r.objectStore(iu).put(e,gj(t)),await r.done}catch(n){if(n instanceof Ti)fs.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fs.warn(r.message)}}}function gj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=1024,VV=30;class BV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>VV){const o=HV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qS(),{heartbeatsToSend:r,unsentEntries:s}=zV(this._heartbeatsCache.heartbeats),i=of(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return fs.warn(n),""}}}function qS(){return new Date().toISOString().substring(0,10)}function zV(t,e=UV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),GS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),GS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kU()?TU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $V(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function GS(t){return of(JSON.stringify({version:2,heartbeats:t})).length}function HV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){ll(new So("platform-logger",e=>new sV(e),"PRIVATE")),ll(new So("heartbeat",e=>new BV(e),"PRIVATE")),di(hy,zS,t),di(hy,zS,"esm2020"),di("fire-js","")}qV("");function vj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GV=vj,yj=new Vu("auth","Firebase",vj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Hw("@firebase/auth");function KV(t,...e){uf.logLevel<=Pe.WARN&&uf.warn(`Auth (${Nl}): ${t}`,...e)}function ph(t,...e){uf.logLevel<=Pe.ERROR&&uf.error(`Auth (${Nl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw Kw(t,...e)}function Lr(t,...e){return Kw(t,...e)}function wj(t,e,n){const r={...GV(),[e]:n};return new Vu("auth","Firebase",r).create(e,{appName:t.name})}function hi(t){return wj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yj.create(t,...e)}function ue(t,e,...n){if(!t)throw Kw(e,...n)}function ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ph(e),new Error(e)}function ms(t,e){t||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YV(){return KS()==="http:"||KS()==="https:"}function KS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YV()||EU()||"connection"in navigator)?navigator.onLine:!0}function JV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ms(n>e,"Short delay should be less than long delay!"),this.isMobile=zw()||lj()}get(){return QV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eB=new Bu(3e4,6e4);function jp(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function kl(t,e,n,r,s={}){return bj(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=El({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return CU()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(u.credentials="include"),xj.fetch()(await Sj(t,t.config.apiHost,n,a),u)})}async function bj(t,e,n){t._canInitEmulator=!1;const r={...XV,...e};try{const s=new tB(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Od(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Od(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Od(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Od(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wj(t,d,u);ps(t,d)}}catch(s){if(s instanceof Ti)throw s;ps(t,"network-request-failed",{message:String(s)})}}async function _j(t,e,n,r,s={}){const i=await kl(t,e,n,r,s);return"mfaPendingCredential"in i&&ps(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Sj(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Yw(t.config,s):`${t.config.apiScheme}://${s}`;return ZV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class tB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),eB.get())})}}function Od(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Lr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nB(t,e){return kl(t,"POST","/v1/accounts:delete",e)}async function df(t,e){return kl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rB(t,e=!1){const n=gn(t),r=await n.getIdToken(e),s=Qw(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Cc(ag(s.auth_time)),issuedAtTime:Cc(ag(s.iat)),expirationTime:Cc(ag(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ag(t){return Number(t)*1e3}function Qw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const s=af(n);return s?JSON.parse(s):(ph("Failed to decode base64 JWT payload"),null)}catch(s){return ph("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function YS(t){const e=Qw(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ti&&sB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hf(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ou(t,df(e,{idToken:n}));ue(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?Cj(s.providerUserInfo):[],o=aB(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function oB(t){const e=gn(t);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Cj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){const n=await bj(t,{},async()=>{const r=El({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Sj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(c.credentials="include"),xj.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cB(t,e){return kl(t,"POST","/v2/accounts:revokeToken",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=YS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await lB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Oa;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new iB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ou(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rB(this,e)}reload(){return oB(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await ou(this,nB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:b,stsTokenManager:y}=n;ue(h&&y,e,"internal-error");const x=Oa.fromJSON(this.name,y);ue(typeof h=="string",e,"internal-error"),js(r,e.name),js(s,e.name),ue(typeof f=="boolean",e,"internal-error"),ue(typeof p=="boolean",e,"internal-error"),js(i,e.name),js(o,e.name),js(a,e.name),js(c,e.name),js(u,e.name),js(d,e.name);const v=new ar({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:x,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(v.providerData=b.map(g=>({...g}))),c&&(v._redirectEventId=c),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oa;s.updateFromServerResponse(n);const i=new ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Cj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Oa;a.updateFromIdToken(r);const c=new ar({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new Map;function rs(t){ms(t instanceof Function,"Expected a class definition");let e=QS.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ej.type="NONE";const JS=Ej;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t,e,n){return`firebase:${t}:${e}:${n}`}class Da{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=mh(this.userKey,s.apiKey,i),this.fullPersistenceKey=mh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await df(this.auth,{idToken:e}).catch(()=>{});return n?ar._fromGetAccountInfoResponse(this.auth,n,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Da(rs(JS),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||rs(JS);const o=mh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await df(e,{idToken:d}).catch(()=>{});if(!f)break;h=await ar._fromGetAccountInfoResponse(e,f,d)}else h=ar._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Da(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Da(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ij(e))return"Blackberry";if(Pj(e))return"Webos";if(kj(e))return"Safari";if((e.includes("chrome/")||Tj(e))&&!e.includes("edge/"))return"Chrome";if(jj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nj(t=Zt()){return/firefox\//i.test(t)}function kj(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tj(t=Zt()){return/crios\//i.test(t)}function Rj(t=Zt()){return/iemobile/i.test(t)}function jj(t=Zt()){return/android/i.test(t)}function Ij(t=Zt()){return/blackberry/i.test(t)}function Pj(t=Zt()){return/webos/i.test(t)}function Jw(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uB(t=Zt()){var e;return Jw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dB(){return NU()&&document.documentMode===10}function Aj(t=Zt()){return Jw(t)||jj(t)||Pj(t)||Ij(t)||/windows phone/i.test(t)||Rj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t,e=[]){let n;switch(t){case"Browser":n=XS(Zt());break;case"Worker":n=`${XS(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e={}){return kl(t,"GET","/v2/passwordPolicy",jp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=6;class mB{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZS(this),this.idTokenSubscription=new ZS(this),this.beforeStateQueue=new hB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await df(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(hi(this));const n=e?gn(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fB(this),n=new mB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&KV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ip(t){return gn(t)}class ZS{constructor(e){this.auth=e,this.observer=null,this.addObserver=DU(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vB(t){Xw=t}function yB(t){return Xw.loadJS(t)}function wB(){return Xw.gapiScript}function xB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t,e){const n=Gw(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_o(i,e??{}))return s;ps(s,"already-initialized")}return n.initialize({options:e})}function _B(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SB(t,e,n){const r=Ip(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Dj(e),{host:o,port:a}=CB(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(_o(u,r.config.emulator)&&_o(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Cl(o)?(oj(`${i}//${o}${c}`),aj("Auth",!0)):EB()}function Dj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CB(t){const e=Dj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:e1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:e1(o)}}}function e1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,n){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t,e){return _j(t,"POST","/v1/accounts:signInWithIdp",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="http://localhost";class Co extends Mj{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ps("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Co(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ma(e,n)}buildRequest(){const e={requestUri:NB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=El(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Lj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends zu{constructor(){super("facebook.com")}static credential(e){return Co._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Co._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends zu{constructor(){super("github.com")}static credential(e){return Co._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends zu{constructor(){super("twitter.com")}static credential(e,n){return Co._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t,e){return _j(t,"POST","/v1/accounts:signUp",jp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ar._fromIdTokenResponse(e,r,s),o=t1(r);return new wi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=t1(r);return new wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function t1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t){var s;if(ir(t.app))return Promise.reject(hi(t));const e=Ip(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new wi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await kB(e,{returnSecureToken:!0}),r=await wi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Ti{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ff(e,n,r,s)}}function Fj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(t,i,e,r):i})}async function RB(t,e,n=!1){const r=await ou(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jB(t,e,n=!1){const{auth:r}=t;if(ir(r.app))return Promise.reject(hi(r));const s="reauthenticate";try{const i=await ou(t,Fj(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=Qw(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e,n=!1){if(ir(t.app))return Promise.reject(hi(t));const r="signIn",s=await Fj(t,r,e),i=await wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function PB(t,e,n,r){return gn(t).onIdTokenChanged(e,n,r)}function AB(t,e,n){return gn(t).beforeAuthStateChanged(e,n)}function OB(t,e,n,r){return gn(t).onAuthStateChanged(e,n,r)}function DB(t){return gn(t).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=1e3,LB=10;class Uj extends $j{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uj.type="LOCAL";const FB=Uj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj extends $j{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vj.type="SESSION";const Bj=Vj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Pp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await $B(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=Zw("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function VB(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function BB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WB(){return zj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="firebaseLocalStorageDb",HB=1,mf="firebaseLocalStorage",Hj="fbase_key";class Wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ap(t,e){return t.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function qB(){const t=indexedDB.deleteDatabase(Wj);return new Wu(t).toPromise()}function vy(){const t=indexedDB.open(Wj,HB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mf,{keyPath:Hj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),await qB(),e(await vy()))})})}async function n1(t,e,n){const r=Ap(t,!0).put({[Hj]:e,value:n});return new Wu(r).toPromise()}async function GB(t,e){const n=Ap(t,!1).get(e),r=await new Wu(n).toPromise();return r===void 0?null:r.value}function r1(t,e){const n=Ap(t,!0).delete(e);return new Wu(n).toPromise()}const KB=800,YB=3;class qj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pp._getInstance(WB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await BB(),!this.activeServiceWorker)return;this.sender=new UB(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vy();return await n1(e,pf,"1"),await r1(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ap(s,!1).getAll();return new Wu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qj.type="LOCAL";const QB=qj;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t,e){return e?rs(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Mj{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XB(t){return IB(t.auth,new ex(t),t.bypassAuthState)}function ZB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),jB(n,new ex(t),t.bypassAuthState)}async function e8(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),RB(n,new ex(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XB;case"linkViaPopup":case"linkViaRedirect":return e8;case"reauthViaPopup":case"reauthViaRedirect":return ZB;default:ps(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=new Bu(2e3,1e4);class fa extends Gj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=Zw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t8.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="pendingRedirect",gh=new Map;class r8 extends Gj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const r=await s8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s8(t,e){const n=a8(e),r=o8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function i8(t,e){gh.set(t._key(),e)}function o8(t){return rs(t._redirectPersistence)}function a8(t){return mh(n8,t.config.apiKey,t.name)}async function l8(t,e,n=!1){if(ir(t.app))return Promise.reject(hi(t));const r=Ip(t),s=JB(r,e),o=await new r8(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=10*60*1e3;class u8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kj(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c8&&this.cachedEventUids.clear(),this.cachedEventUids.has(s1(e))}saveEventToCache(e){this.cachedEventUids.add(s1(e)),this.lastProcessedEventTime=Date.now()}}function s1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function d8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(t,e={}){return kl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p8=/^https?/;async function m8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await h8(t);for(const n of e)try{if(g8(n))return}catch{}ps(t,"unauthorized-domain")}function g8(t){const e=my(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!p8.test(n))return!1;if(f8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8=new Bu(3e4,6e4);function i1(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y8(t){return new Promise((e,n)=>{var s,i,o;function r(){i1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i1(),n(Lr(t,"network-request-failed"))},timeout:v8.get()})}if((i=(s=Fr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Fr().gapi)!=null&&o.load)r();else{const a=xB("iframefcb");return Fr()[a]=()=>{gapi.load?r():n(Lr(t,"network-request-failed"))},yB(`${wB()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw vh=null,e})}let vh=null;function w8(t){return vh=vh||y8(t),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new Bu(5e3,15e3),b8="__/auth/iframe",_8="emulator/auth/iframe",S8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E8(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yw(e,_8):`https://${t.config.authDomain}/${b8}`,r={apiKey:e.apiKey,appName:t.name,v:Nl},s=C8.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${El(r).slice(1)}`}async function N8(t){const e=await w8(t),n=Fr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:E8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S8,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Lr(t,"network-request-failed"),a=Fr().setTimeout(()=>{i(o)},x8.get());function c(){Fr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T8=500,R8=600,j8="_blank",I8="http://localhost";class o1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P8(t,e,n,r=T8,s=R8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...k8,width:r.toString(),height:s.toString(),top:i,left:o},u=Zt().toLowerCase();n&&(a=Tj(u)?j8:n),Nj(u)&&(e=e||I8,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[p,b])=>`${f}${p}=${b},`,"");if(uB(u)&&a!=="_self")return A8(e||"",a),new o1(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new o1(h)}function A8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8="__/auth/handler",D8="emulator/auth/handler",M8=encodeURIComponent("fac");async function a1(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Nl,eventId:s};if(e instanceof Lj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof zu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${M8}=${encodeURIComponent(c)}`:"";return`${L8(t)}?${El(a).slice(1)}${u}`}function L8({config:t}){return t.emulator?Yw(t,D8):`https://${t.authDomain}/${O8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="webStorageSupport";class F8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bj,this._completeRedirectFn=l8,this._overrideRedirectResult=i8}async _openPopup(e,n,r,s){var o;ms((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await a1(e,n,r,my(),s);return P8(e,i,Zw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await a1(e,n,r,my(),s);return VB(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ms(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await N8(e),r=new u8(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lg,{type:lg},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[lg];i!==void 0&&n(!!i),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Aj()||kj()||Jw()}}const $8=F8;var l1="@firebase/auth",c1="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B8(t){ll(new So("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oj(t)},u=new gB(r,s,i,c);return _B(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ll(new So("auth-internal",e=>{const n=Ip(e.getProvider("auth").getImmediate());return(r=>new U8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(l1,c1,V8(t)),di(l1,c1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=5*60,W8=ij("authIdTokenMaxAge")||z8;let u1=null;const H8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>W8)return;const s=n==null?void 0:n.token;u1!==s&&(u1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function q8(t=pj()){const e=Gw(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bB(t,{popupRedirectResolver:$8,persistence:[QB,FB,Bj]}),r=ij("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=H8(i.toString());AB(n,o,()=>o(n.currentUser)),PB(n,a=>o(a))}}const s=rj("auth");return s&&SB(n,`http://${s}`),n}function G8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}vB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Lr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",G8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B8("Browser");var d1={};const h1="@firebase/database",f1="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yj="";function K8(t){Yj=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:su(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y8(e)}}catch{}return new Q8},Yi=Qj("localStorage"),J8=Qj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Hw("@firebase/database"),X8=function(){let t=1;return function(){return t++}}(),Jj=function(t){const e=FU(t),n=new OU;n.update(e);const r=n.digest();return Vw.encodeByteArray(r)},Hu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hu.apply(null,r):typeof r=="object"?e+=pt(r):e+=r,e+=" "}return e};let Ec=null,p1=!0;const Z8=function(t,e){K(!e,"Can't turn on custom loggers persistently."),La.logLevel=Pe.VERBOSE,Ec=La.log.bind(La)},Ut=function(...t){if(p1===!0&&(p1=!1,Ec===null&&J8.get("logging_enabled")===!0&&Z8()),Ec){const e=Hu.apply(null,t);Ec(e)}},qu=function(t){return function(...e){Ut(t,...e)}},yy=function(...t){const e="FIREBASE INTERNAL ERROR: "+Hu(...t);La.error(e)},gs=function(...t){const e=`FIREBASE FATAL ERROR: ${Hu(...t)}`;throw La.error(e),new Error(e)},hn=function(...t){const e="FIREBASE WARNING: "+Hu(...t);La.warn(e)},ez=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xj=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},tz=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},cl="[MIN_NAME]",Eo="[MAX_NAME]",Tl=function(t,e){if(t===e)return 0;if(t===cl||e===Eo)return-1;if(e===cl||t===Eo)return 1;{const n=m1(t),r=m1(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},nz=function(t,e){return t===e?0:t<e?-1:1},Zl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},tx=function(t){if(typeof t!="object"||t===null)return pt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pt(e[r]),n+=":",n+=tx(t[e[r]]);return n+="}",n},Zj=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function pn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const eI=function(t){K(!Xj(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},rz=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},sz=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function iz(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const oz=new RegExp("^-?(0*)\\d{1,10}$"),az=-2147483648,lz=2147483647,m1=function(t){if(oz.test(t)){const e=Number(t);if(e>=az&&e<=lz)return e}return null},Rl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw hn("Exception was thrown by user callback.",n),e},Math.floor(0))}},cz=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hn(e)}}class yh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}yh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="5",tI="v",nI="s",rI="r",sI="f",iI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oI="ls",aI="p",wy="ac",lI="websocket",cI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function hz(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dI(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===lI)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cI)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);hz(t)&&(n.ns=t.namespace);const s=[];return pn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(){this.counters_={}}incrementCounter(e,n=1){xs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return pU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg={},ug={};function rx(t){const e=t.toString();return cg[e]||(cg[e]=new fz),cg[e]}function pz(t,e){const n=t.toString();return ug[n]||(ug[n]=e()),ug[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Rl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="start",gz="close",vz="pLPCommand",yz="pRTLPCB",hI="id",fI="pw",pI="ser",wz="cb",xz="seg",bz="ts",_z="d",Sz="dframe",mI=1870,gI=30,Cz=mI-gI,Ez=25e3,Nz=3e4;class pa{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qu(e),this.stats_=rx(n),this.urlFn=c=>(this.appCheckToken&&(c[wy]=this.appCheckToken),dI(n,cI,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new mz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Nz)),tz(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sx((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===g1)this.id=a,this.password=c;else if(o===gz)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[g1]="t",r[pI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[wz]=this.scriptTagHolder.uniqueCallbackIdentifier),r[tI]=nx,this.transportSessionId&&(r[nI]=this.transportSessionId),this.lastSessionId&&(r[oI]=this.lastSessionId),this.applicationId&&(r[aI]=this.applicationId),this.appCheckToken&&(r[wy]=this.appCheckToken),typeof location<"u"&&location.hostname&&iI.test(location.hostname)&&(r[rI]=sI);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pa.forceAllow_=!0}static forceDisallow(){pa.forceDisallow_=!0}static isAvailable(){return pa.forceAllow_?!0:!pa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rz()&&!sz()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tj(n),s=Zj(r,Cz);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Sz]="t",r[hI]=e,r[fI]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sx{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=X8(),window[vz+this.uniqueCallbackIdentifier]=e,window[yz+this.uniqueCallbackIdentifier]=n,this.myIFrame=sx.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ut("frame writing exception"),a.stack&&Ut(a.stack),Ut(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ut("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hI]=this.myID,e[fI]=this.myPW,e[pI]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gI+r.length<=mI;){const o=this.pendingSegs.shift();r=r+"&"+xz+s+"="+o.seg+"&"+bz+s+"="+o.ts+"&"+_z+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Ez)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=16384,Tz=45e3;let gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);class or{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qu(this.connId),this.stats_=rx(n),this.connURL=or.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[tI]=nx,typeof location<"u"&&location.hostname&&iI.test(location.hostname)&&(o[rI]=sI),n&&(o[nI]=n),r&&(o[oI]=r),s&&(o[wy]=s),i&&(o[aI]=i),dI(e,lI,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yi.set("previous_websocket_failure",!0);try{let r;cj(),this.mySock=new gf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){or.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gf!==null&&!or.forceDisallow_}static previouslyFailed(){return Yi.isInMemoryStorage||Yi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=su(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Zj(n,kz);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Tz))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}or.responsesRequiredToBeHealthy=2;or.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{static get ALL_TRANSPORTS(){return[pa,or]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=or&&or.isAvailable();let r=n&&!or.previouslyFailed();if(e.webSocketOnly&&(n||hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[or];else{const s=this.transports_=[];for(const i of au.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);au.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}au.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=6e4,jz=5e3,Iz=10*1024,Pz=100*1024,dg="t",v1="d",Az="s",y1="r",Oz="e",w1="o",x1="a",b1="n",_1="p",Dz="h";class Mz{constructor(e,n,r,s,i,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qu("c:"+this.id+":"),this.transportManager_=new au(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Nc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Pz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Iz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(dg in e){const n=e[dg];n===x1?this.upgradeIfSecondaryHealthy_():n===y1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===w1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zl("t",e),r=Zl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:x1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:b1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zl("t",e),r=Zl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zl(dg,e);if(v1 in e){const r=e[v1];if(n===Dz){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===b1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Az?this.onConnectionShutdown_(r):n===y1?this.onReset_(r):n===Oz?yy("Server Error: "+r):n===w1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nx!==r&&hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Nc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Rz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends yI{static getInstance(){return new vf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!zw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=32,C1=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Ae("")}function ge(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xi(t){return t.pieces_.length-t.pieceNum_}function De(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function wI(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Lz(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function xI(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function bI(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function mt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Ae(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function Qt(t,e){const n=ge(t),r=ge(e);if(n===null)return e;if(n===r)return Qt(De(t),De(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ix(t,e){if(xi(t)!==xi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function lr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xi(t)>xi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Fz{constructor(e,n){this.errorPrefix_=n,this.parts_=xI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rp(this.parts_[r]);_I(this)}}function $z(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Rp(e),_I(t)}function Uz(t){const e=t.parts_.pop();t.byteLength_-=Rp(e),t.parts_.length>0&&(t.byteLength_-=1)}function _I(t){if(t.byteLength_>C1)throw new Error(t.errorPrefix_+"has a key path longer than "+C1+" bytes ("+t.byteLength_+").");if(t.parts_.length>S1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+S1+") or object contains a cycle "+Vi(t))}function Vi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends yI{static getInstance(){return new ox}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=1e3,Vz=60*5*1e3,E1=30*1e3,Bz=1.3,zz=3e4,Wz="server_kill",N1=3;class os extends vI{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=os.nextPersistentConnectionId_++,this.log_=qu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ec,this.maxReconnectDelay_=Vz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!cj())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ox.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(pt(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Tp,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;os.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xs(e,"w")){const r=al(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||AU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=E1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=PU(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):yy("Unrecognized action received from server: "+pt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zz&&(this.reconnectDelay_=ec),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Bz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+os.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(h){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ut("getToken() completed but was canceled"):(Ut("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new Mz(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,p=>{hn(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Wz)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&hn(h),c())}}}interrupt(e){Ut("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ut("Resuming connection for reason: "+e),delete this.interruptReasons_[e],cy(this.interruptReasons_)&&(this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>tx(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ut("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=N1&&(this.reconnectDelay_=E1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ut("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=N1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Yj.replace(/\./g,"-")]=1,zw()?e["framework.cordova"]=1:lj()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vf.getInstance().currentlyOnline();return cy(this.interruptReasons_)&&e}}os.nextPersistentConnectionId_=0;os.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ve(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Op=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ve(cl,e),s=new ve(cl,n);return this.compare(r,s)!==0}minPost(){return ve.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd;class SI extends Op{static get __EMPTY_NODE(){return Dd}static set __EMPTY_NODE(e){Dd=e}compare(e,n){return Tl(e.name,n.name)}isDefinedOn(e){throw Sl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Eo,Dd)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new ve(e,Dd)}toString(){return".key"}}const Fa=new SI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??an.EMPTY_NODE,this.right=i??an.EMPTY_NODE}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return an.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return an.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_t.RED=!0;_t.BLACK=!1;class Hz{copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class an{constructor(e,n=an.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new an(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_t.BLACK,null,null))}remove(e){return new an(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_t.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Md(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Md(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Md(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Md(this.root_,null,this.comparator_,!0,e)}}an.EMPTY_NODE=new Hz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t,e){return Tl(t.name,e.name)}function ax(t,e){return Tl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xy;function Gz(t){xy=t}const CI=function(t){return typeof t=="number"?"number:"+eI(t):"string:"+t},EI=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xs(e,".sv"),"Priority must be a string or number.")}else K(t===xy||t.isEmpty(),"priority of unexpected type.");K(t===xy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k1;class xt{static set __childrenNodeConstructor(e){k1=e}static get __childrenNodeConstructor(){return k1}constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),EI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:ge(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ge(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||xi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(De(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+CI(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=eI(this.value_):e+=this.value_,this.lazyHash_=Jj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=xt.VALUE_TYPE_ORDER.indexOf(n),i=xt.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+n),K(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NI,kI;function Kz(t){NI=t}function Yz(t){kI=t}class Qz extends Op{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Tl(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Eo,new xt("[PRIORITY-POST]",kI))}makePost(e,n){const r=NI(e);return new ve(n,new xt("[PRIORITY-POST]",r))}toString(){return".priority"}}const nt=new Qz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=Math.log(2);class Xz{constructor(e){const n=i=>parseInt(Math.log(i)/Jz,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yf=function(t,e,n,r){t.sort(e);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=t[c],f=n?n(h):h,new _t(f,h.node,_t.BLACK,null,null);{const p=parseInt(d/2,10)+c,b=s(c,p),y=s(p+1,u);return h=t[p],f=n?n(h):h,new _t(f,h.node,_t.BLACK,b,y)}},i=function(c){let u=null,d=null,h=t.length;const f=function(b,y){const x=h-b,v=h;h-=b;const g=s(x+1,v),w=t[x],S=n?n(w):w;p(new _t(S,w.node,y,null,g))},p=function(b){u?(u.left=b,u=b):(d=b,u=b)};for(let b=0;b<c.count;++b){const y=c.nextBitIsOne(),x=Math.pow(2,c.count-(b+1));y?f(x,_t.BLACK):(f(x,_t.BLACK),f(x,_t.RED))}return d},o=new Xz(t.length),a=i(o);return new an(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg;const Uo={};class ss{static get Default(){return K(Uo&&nt,"ChildrenNode.ts has not been loaded"),hg=hg||new ss({".priority":Uo},{".priority":nt}),hg}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=al(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof an?n:null}hasIndex(e){return xs(this.indexSet_,e.toString())}addIndex(e,n){K(e!==Fa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ve.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=yf(r,e.getCompare()):a=Uo;const c=e.toString(),u={...this.indexSet_};u[c]=e;const d={...this.indexes_};return d[c]=a,new ss(d,u)}addToIndexes(e,n){const r=lf(this.indexes_,(s,i)=>{const o=al(this.indexSet_,i);if(K(o,"Missing index implementation for "+i),s===Uo)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(ve.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),yf(a,o.getCompare())}else return Uo;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new ve(e.name,a))),c.insert(e,e.node)}});return new ss(r,this.indexSet_)}removeFromIndexes(e,n){const r=lf(this.indexes_,s=>{if(s===Uo)return s;{const i=n.get(e.name);return i?s.remove(new ve(e.name,i)):s}});return new ss(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc;class oe{static get EMPTY_NODE(){return tc||(tc=new oe(new an(ax),null,ss.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&EI(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tc}updatePriority(e){return this.children_.isEmpty()?this:new oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?tc:n}}getChild(e){const n=ge(e);return n===null?this:this.getImmediateChild(n).getChild(De(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ve(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?tc:this.priorityNode_;return new oe(s,o,i)}}updateChild(e,n){const r=ge(e);if(r===null)return n;{K(ge(e)!==".priority"||xi(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(De(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(nt,(o,a)=>{n[o]=a.val(e),r++,i&&oe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+CI(this.getPriority().val())+":"),this.forEachChild(nt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Jj(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ve(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ve(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ve(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ve.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ve.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gu?-1:0}withIndex(e){if(e===Fa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new oe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Fa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(nt),s=n.getIterator(nt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Fa?null:this.indexMap_.get(e.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Zz extends oe{constructor(){super(new an(ax),oe.EMPTY_NODE,ss.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return oe.EMPTY_NODE}isEmpty(){return!1}}const Gu=new Zz;Object.defineProperties(ve,{MIN:{value:new ve(cl,oe.EMPTY_NODE)},MAX:{value:new ve(Eo,Gu)}});SI.__EMPTY_NODE=oe.EMPTY_NODE;xt.__childrenNodeConstructor=oe;Gz(Gu);Yz(Gu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=!0;function St(t,e=null){if(t===null)return oe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xt(n,St(e))}if(!(t instanceof Array)&&eW){const n=[];let r=!1;if(pn(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=St(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new ve(o,c)))}}),n.length===0)return oe.EMPTY_NODE;const i=yf(n,qz,o=>o.name,ax);if(r){const o=yf(n,nt.getCompare());return new oe(i,St(e),new ss({".priority":o},{".priority":nt}))}else return new oe(i,St(e),ss.Default)}else{let n=oe.EMPTY_NODE;return pn(t,(r,s)=>{if(xs(t,r)&&r.substring(0,1)!=="."){const i=St(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(St(e))}}Kz(St);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW extends Op{constructor(e){super(),this.indexPath_=e,K(!ye(e)&&ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Tl(e.name,n.name):i}makePost(e,n){const r=St(e),s=oe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(n,s)}maxPost(){const e=oe.EMPTY_NODE.updateChild(this.indexPath_,Gu);return new ve(Eo,e)}toString(){return xI(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW extends Op{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Tl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(e,n){const r=St(e);return new ve(n,r)}toString(){return".value"}}const rW=new nW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){return{type:"value",snapshotNode:t}}function ul(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function lu(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function cu(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function sW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(lu(n,a)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ul(n,r)):o.trackChildChange(cu(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(nt,(s,i)=>{n.hasChild(s)||r.trackChildChange(lu(s,i))}),n.isLeafNode()||n.forEachChild(nt,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(cu(s,i,o))}else r.trackChildChange(ul(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?oe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this.indexedFilter_=new lx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=uu.getStartPost_(e),this.endPost_=uu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ve(n,r))||(r=oe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=oe.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(oe.EMPTY_NODE);const i=this;return n.forEachChild(nt,(o,a)=>{i.matches(new ve(o,a))||(s=s.updateImmediateChild(o,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new uu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ve(n,r))||(r=oe.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=oe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(oe.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,p)=>h(p,f)}else o=this.index_.getCompare();const a=e;K(a.numChildren()===this.limit_,"");const c=new ve(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const p=f==null?1:o(f,c);if(d&&!r.isEmpty()&&p>=0)return i!=null&&i.trackChildChange(cu(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(lu(n,h));const y=a.updateImmediateChild(n,oe.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(ul(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?e:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(lu(u.name,u.node)),i.trackChildChange(ul(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,oe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cl}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new cx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oW(t){return t.loadsAllData()?new lx(t.getIndex()):t.hasLimit()?new iW(t):new uu(t)}function T1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nt?n="$priority":t.index_===rW?n="$value":t.index_===Fa?n="$key":(K(t.index_ instanceof tW,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=pt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function R1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends vI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=qu("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=wf.getListenId_(e,r),a={};this.listens_[o]=a;const c=T1(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),al(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=wf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=T1(e._queryParams),r=e._path.toString(),s=new Tp;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+El(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=su(a.responseText)}catch{hn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&hn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){return{value:null,children:new Map}}function RI(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ge(e);t.children.has(r)||t.children.set(r,xf());const s=t.children.get(r);e=De(e),RI(s,e,n)}}function by(t,e,n){t.value!==null?n(e,t.value):lW(t,(r,s)=>{const i=new Ae(e.toString()+"/"+r);by(s,i,n)})}function lW(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&pn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=10*1e3,uW=30*1e3,dW=5*60*1e3;class hW{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cW(e);const r=j1+(uW-j1)*Math.random();Nc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;pn(e,(s,i)=>{i>0&&xs(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Nc(this.reportStats_.bind(this),Math.floor(Math.random()*2*dW))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cr||(cr={}));function jI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ux(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=cr.ACK_USER_WRITE,this.source=jI()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new bf(ke(),n,this.revert)}}else return K(ge(this.path)===e,"operationForChild called for unrelated child."),new bf(De(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.source=e,this.path=n,this.type=cr.LISTEN_COMPLETE}operationForChild(e){return ye(this.path)?new du(this.source,ke()):new du(this.source,De(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=cr.OVERWRITE}operationForChild(e){return ye(this.path)?new No(this.source,ke(),this.snap.getImmediateChild(e)):new No(this.source,De(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=cr.MERGE}operationForChild(e){if(ye(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new No(this.source,ke(),n.value):new hu(this.source,ke(),n)}else return K(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hu(this.source,De(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=ge(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pW(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(sW(o.childName,o.snapshotNode))}),nc(t,s,"child_removed",e,r,n),nc(t,s,"child_added",e,r,n),nc(t,s,"child_moved",i,r,n),nc(t,s,"child_changed",e,r,n),nc(t,s,"value",e,r,n),s}function nc(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>gW(t,a,c)),o.forEach(a=>{const c=mW(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function mW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function gW(t,e,n){if(e.childName==null||n.childName==null)throw Sl("Should only compare child_ events.");const r=new ve(e.childName,e.snapshotNode),s=new ve(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t,e){return{eventCache:t,serverCache:e}}function kc(t,e,n,r){return Dp(new bi(e,n,r),t.serverCache)}function II(t,e,n,r){return Dp(t.eventCache,new bi(e,n,r))}function _f(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ko(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg;const vW=()=>(fg||(fg=new an(nz)),fg);class Ve{static fromObject(e){let n=new Ve(null);return pn(e,(r,s)=>{n=n.set(new Ae(r),s)}),n}constructor(e,n=vW()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(ye(e))return null;{const r=ge(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(De(e),n);return i!=null?{path:mt(new Ae(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const n=ge(e),r=this.children.get(n);return r!==null?r.subtree(De(e)):new Ve(null)}}set(e,n){if(ye(e))return new Ve(n,this.children);{const r=ge(e),i=(this.children.get(r)||new Ve(null)).set(De(e),n),o=this.children.insert(r,i);return new Ve(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new Ve(null):new Ve(null,this.children);{const n=ge(e),r=this.children.get(n);if(r){const s=r.remove(De(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Ve(null):new Ve(this.value,i)}else return this}}get(e){if(ye(e))return this.value;{const n=ge(e),r=this.children.get(n);return r?r.get(De(e)):null}}setTree(e,n){if(ye(e))return n;{const r=ge(e),i=(this.children.get(r)||new Ve(null)).setTree(De(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Ve(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(mt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ye(e))return null;{const i=ge(e),o=this.children.get(i);return o?o.findOnPath_(De(e),mt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);const s=ge(e),i=this.children.get(s);return i?i.foreachOnPath_(De(e),mt(n,s),r):new Ve(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(mt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new Ve(null))}}function Tc(t,e,n){if(ye(e))return new hr(new Ve(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Qt(s,e);return i=i.updateChild(o,n),new hr(t.writeTree_.set(s,i))}else{const s=new Ve(n),i=t.writeTree_.setTree(e,s);return new hr(i)}}}function I1(t,e,n){let r=t;return pn(n,(s,i)=>{r=Tc(r,mt(e,s),i)}),r}function P1(t,e){if(ye(e))return hr.empty();{const n=t.writeTree_.setTree(e,new Ve(null));return new hr(n)}}function _y(t,e){return Oo(t,e)!=null}function Oo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qt(n.path,e)):null}function A1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nt,(r,s)=>{e.push(new ve(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ve(r,s.value))}),e}function fi(t,e){if(ye(e))return t;{const n=Oo(t,e);return n!=null?new hr(new Ve(n)):new hr(t.writeTree_.subtree(e))}}function Sy(t){return t.writeTree_.isEmpty()}function dl(t,e){return PI(ke(),t.writeTree_,e)}function PI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(K(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=PI(mt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(mt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){return MI(e,t)}function yW(t,e,n,r,s){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Tc(t.visibleWrites,e,n)),t.lastWriteId=r}function wW(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function xW(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&bW(a,r.path)?s=!1:lr(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return _W(t),!0;if(r.snap)t.visibleWrites=P1(t.visibleWrites,r.path);else{const a=r.children;pn(a,c=>{t.visibleWrites=P1(t.visibleWrites,mt(r.path,c))})}return!0}else return!1}function bW(t,e){if(t.snap)return lr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lr(mt(t.path,n),e))return!0;return!1}function _W(t){t.visibleWrites=AI(t.allWrites,SW,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function SW(t){return t.visible}function AI(t,e,n){let r=hr.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)lr(n,o)?(a=Qt(n,o),r=Tc(r,a,i.snap)):lr(o,n)&&(a=Qt(o,n),r=Tc(r,ke(),i.snap.getChild(a)));else if(i.children){if(lr(n,o))a=Qt(n,o),r=I1(r,a,i.children);else if(lr(o,n))if(a=Qt(o,n),ye(a))r=I1(r,ke(),i.children);else{const c=al(i.children,ge(a));if(c){const u=c.getChild(De(a));r=Tc(r,ke(),u)}}}else throw Sl("WriteRecord should have .snap or .children")}}return r}function OI(t,e,n,r,s){if(!r&&!s){const i=Oo(t.visibleWrites,e);if(i!=null)return i;{const o=fi(t.visibleWrites,e);if(Sy(o))return n;if(n==null&&!_y(o,ke()))return null;{const a=n||oe.EMPTY_NODE;return dl(o,a)}}}else{const i=fi(t.visibleWrites,e);if(!s&&Sy(i))return n;if(!s&&n==null&&!_y(i,ke()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(lr(u.path,e)||lr(e,u.path))},a=AI(t.allWrites,o,e),c=n||oe.EMPTY_NODE;return dl(a,c)}}}function CW(t,e,n){let r=oe.EMPTY_NODE;const s=Oo(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(nt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=fi(t.visibleWrites,e);return n.forEachChild(nt,(o,a)=>{const c=dl(fi(i,new Ae(o)),a);r=r.updateImmediateChild(o,c)}),A1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=fi(t.visibleWrites,e);return A1(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function EW(t,e,n,r,s){K(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=mt(e,n);if(_y(t.visibleWrites,i))return null;{const o=fi(t.visibleWrites,i);return Sy(o)?s.getChild(n):dl(o,s.getChild(n))}}function NW(t,e,n,r){const s=mt(e,n),i=Oo(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=fi(t.visibleWrites,s);return dl(o,r.getNode().getImmediateChild(n))}else return null}function kW(t,e){return Oo(t.visibleWrites,e)}function TW(t,e,n,r,s,i,o){let a;const c=fi(t.visibleWrites,e),u=Oo(c,ke());if(u!=null)a=u;else if(n!=null)a=dl(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let p=f.getNext();for(;p&&d.length<s;)h(p,r)!==0&&d.push(p),p=f.getNext();return d}else return[]}function RW(){return{visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1}}function Sf(t,e,n,r){return OI(t.writeTree,t.treePath,e,n,r)}function hx(t,e){return CW(t.writeTree,t.treePath,e)}function O1(t,e,n,r){return EW(t.writeTree,t.treePath,e,n,r)}function Cf(t,e){return kW(t.writeTree,mt(t.treePath,e))}function jW(t,e,n,r,s,i){return TW(t.writeTree,t.treePath,e,n,r,s,i)}function fx(t,e,n){return NW(t.writeTree,t.treePath,e,n)}function DI(t,e){return MI(mt(t.treePath,e),t.writeTree)}function MI(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,cu(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,lu(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,ul(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,cu(r,e.snapshotNode,s.oldSnap));else throw Sl("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const LI=new PW;class px{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new bi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ko(this.viewCache_),i=jW(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){return{filter:t}}function OW(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DW(t,e,n,r,s){const i=new IW;let o,a;if(n.type===cr.OVERWRITE){const u=n;u.source.fromUser?o=Cy(t,e,u.path,u.snap,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ye(u.path),o=Ef(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===cr.MERGE){const u=n;u.source.fromUser?o=LW(t,e,u.path,u.children,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Ey(t,e,u.path,u.children,r,s,a,i))}else if(n.type===cr.ACK_USER_WRITE){const u=n;u.revert?o=UW(t,e,u.path,r,s,i):o=FW(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===cr.LISTEN_COMPLETE)o=$W(t,e,n.path,r,i);else throw Sl("Unknown operation type: "+n.type);const c=i.getChanges();return MW(e,o,c),{viewCache:o,changes:c}}function MW(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=_f(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(TI(_f(e)))}}function FI(t,e,n,r,s,i){const o=e.eventCache;if(Cf(r,n)!=null)return e;{let a,c;if(ye(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ko(e),d=u instanceof oe?u:oe.EMPTY_NODE,h=hx(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=Sf(r,ko(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ge(n);if(u===".priority"){K(xi(n)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const h=O1(r,n,d,c);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=De(n);let h;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const f=O1(r,n,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=fx(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return kc(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function Ef(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(ye(n))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(n,r);u=d.updateFullNode(c.getNode(),p,null)}else{const p=ge(n);if(!c.isCompleteForPath(n)&&xi(n)>1)return e;const b=De(n),x=c.getNode().getImmediateChild(p).updateChild(b,r);p===".priority"?u=d.updatePriority(c.getNode(),x):u=d.updateChild(c.getNode(),p,x,b,LI,null)}const h=II(e,u,c.isFullyInitialized()||ye(n),d.filtersNodes()),f=new px(s,h,i);return FI(t,h,n,s,f,a)}function Cy(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const d=new px(s,e,i);if(ye(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=kc(e,u,!0,t.filter.filtersNodes());else{const h=ge(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=kc(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=De(n),p=a.getNode().getImmediateChild(h);let b;if(ye(f))b=r;else{const y=d.getCompleteChild(h);y!=null?wI(f)===".priority"&&y.getChild(bI(f)).isEmpty()?b=y:b=y.updateChild(f,r):b=oe.EMPTY_NODE}if(p.equals(b))c=e;else{const y=t.filter.updateChild(a.getNode(),h,b,f,d,o);c=kc(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function D1(t,e){return t.eventCache.isCompleteForChild(e)}function LW(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const d=mt(n,c);D1(e,ge(d))&&(a=Cy(t,a,d,u,s,i,o))}),r.foreach((c,u)=>{const d=mt(n,c);D1(e,ge(d))||(a=Cy(t,a,d,u,s,i,o))}),a}function M1(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Ey(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ye(n)?u=r:u=new Ve(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const p=e.serverCache.getNode().getImmediateChild(h),b=M1(t,p,f);c=Ef(t,c,new Ae(h),b,s,i,o,a)}}),u.children.inorderTraversal((h,f)=>{const p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!p){const b=e.serverCache.getNode().getImmediateChild(h),y=M1(t,b,f);c=Ef(t,c,new Ae(h),y,s,i,o,a)}}),c}function FW(t,e,n,r,s,i,o){if(Cf(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ye(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ef(t,e,n,c.getNode().getChild(n),s,i,a,o);if(ye(n)){let u=new Ve(null);return c.getNode().forEachChild(Fa,(d,h)=>{u=u.set(new Ae(d),h)}),Ey(t,e,n,u,s,i,a,o)}else return e}else{let u=new Ve(null);return r.foreach((d,h)=>{const f=mt(n,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),Ey(t,e,n,u,s,i,a,o)}}function $W(t,e,n,r,s){const i=e.serverCache,o=II(e,i.getNode(),i.isFullyInitialized()||ye(n),i.isFiltered());return FI(t,o,n,r,LI,s)}function UW(t,e,n,r,s,i){let o;if(Cf(r,n)!=null)return e;{const a=new px(r,e,s),c=e.eventCache.getNode();let u;if(ye(n)||ge(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Sf(r,ko(e));else{const h=e.serverCache.getNode();K(h instanceof oe,"serverChildren would be complete if leaf node"),d=hx(r,h)}d=d,u=t.filter.updateFullNode(c,d,i)}else{const d=ge(n);let h=fx(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=t.filter.updateChild(c,d,h,De(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,oe.EMPTY_NODE,De(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Sf(r,ko(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Cf(r,ke())!=null,kc(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new lx(r.getIndex()),i=oW(r);this.processor_=AW(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(oe.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(oe.EMPTY_NODE,a.getNode(),null),d=new bi(c,o.isFullyInitialized(),s.filtersNodes()),h=new bi(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Dp(h,d),this.eventGenerator_=new fW(this.query_)}get query(){return this.query_}}function BW(t){return t.viewCache_.serverCache.getNode()}function zW(t){return _f(t.viewCache_)}function WW(t,e){const n=ko(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(ge(e)).isEmpty())?n.getChild(e):null}function L1(t){return t.eventRegistrations_.length===0}function HW(t,e){t.eventRegistrations_.push(e)}function F1(t,e,n){const r=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function $1(t,e,n,r){e.type===cr.MERGE&&e.source.queryId!==null&&(K(ko(t.viewCache_),"We should always have a full cache before handling merges"),K(_f(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=DW(t.processor_,s,e,n,r);return OW(t.processor_,i.viewCache),K(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,$I(t,i.changes,i.viewCache.eventCache.getNode(),null)}function qW(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nt,(i,o)=>{r.push(ul(i,o))}),n.isFullyInitialized()&&r.push(TI(n.getNode())),$I(t,r,n.getNode(),e)}function $I(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return pW(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf;class UI{constructor(){this.views=new Map}}function GW(t){K(!Nf,"__referenceConstructor has already been defined"),Nf=t}function KW(){return K(Nf,"Reference.ts has not been loaded"),Nf}function YW(t){return t.views.size===0}function mx(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return K(i!=null,"SyncTree gave us an op for an invalid query."),$1(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat($1(o,e,n,r));return i}}function VI(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Sf(n,s?r:null),c=!1;a?c=!0:r instanceof oe?(a=hx(n,r),c=!1):(a=oe.EMPTY_NODE,c=!1);const u=Dp(new bi(a,c,!1),new bi(r,s,!1));return new VW(e,u)}return o}function QW(t,e,n,r,s,i){const o=VI(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),HW(o,n),qW(o,n)}function JW(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=_i(t);if(s==="default")for(const[c,u]of t.views.entries())o=o.concat(F1(u,n,r)),L1(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(o=o.concat(F1(c,n,r)),L1(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!_i(t)&&i.push(new(KW())(e._repo,e._path)),{removed:i,events:o}}function BI(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function pi(t,e){let n=null;for(const r of t.views.values())n=n||WW(r,e);return n}function zI(t,e){if(e._queryParams.loadsAllData())return Lp(t);{const r=e._queryIdentifier;return t.views.get(r)}}function WI(t,e){return zI(t,e)!=null}function _i(t){return Lp(t)!=null}function Lp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;function XW(t){K(!kf,"__referenceConstructor has already been defined"),kf=t}function ZW(){return K(kf,"Reference.ts has not been loaded"),kf}let eH=1;class U1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=RW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function HI(t,e,n,r,s){return yW(t.pendingWriteTree_,e,n,r,s),s?Yu(t,new No(jI(),e,n)):[]}function Qi(t,e,n=!1){const r=wW(t.pendingWriteTree_,e);if(xW(t.pendingWriteTree_,e)){let i=new Ve(null);return r.snap!=null?i=i.set(ke(),!0):pn(r.children,o=>{i=i.set(new Ae(o),!0)}),Yu(t,new bf(r.path,i,n))}else return[]}function Ku(t,e,n){return Yu(t,new No(ux(),e,n))}function tH(t,e,n){const r=Ve.fromObject(n);return Yu(t,new hu(ux(),e,r))}function nH(t,e){return Yu(t,new du(ux(),e))}function rH(t,e,n){const r=vx(t,n);if(r){const s=yx(r),i=s.path,o=s.queryId,a=Qt(i,e),c=new du(dx(o),a);return wx(t,i,c)}else return[]}function Tf(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||WI(o,e))){const c=JW(o,e,n,r);YW(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(a=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,p)=>_i(p));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const p=oH(f);for(let b=0;b<p.length;++b){const y=p[b],x=y.query,v=YI(t,y);t.listenProvider_.startListening(Rc(x),fu(t,x),v.hashFn,v.onComplete)}}}!h&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(Rc(e),null):u.forEach(f=>{const p=t.queryToTagMap.get(Fp(f));t.listenProvider_.stopListening(Rc(f),p)}))}aH(t,u)}return a}function qI(t,e,n,r){const s=vx(t,r);if(s!=null){const i=yx(s),o=i.path,a=i.queryId,c=Qt(o,e),u=new No(dx(a),c,n);return wx(t,o,u)}else return[]}function sH(t,e,n,r){const s=vx(t,r);if(s){const i=yx(s),o=i.path,a=i.queryId,c=Qt(o,e),u=Ve.fromObject(n),d=new hu(dx(a),c,u);return wx(t,o,d)}else return[]}function Ny(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,p)=>{const b=Qt(f,s);i=i||pi(p,b),o=o||_i(p)});let a=t.syncPointTree_.get(s);a?(o=o||_i(a),i=i||pi(a,ke())):(a=new UI,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=oe.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((p,b)=>{const y=pi(b,ke());y&&(i=i.updateImmediateChild(p,y))}));const u=WI(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=Fp(e);K(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const p=lH();t.queryToTagMap.set(f,p),t.tagToQueryMap.set(p,f)}const d=Mp(t.pendingWriteTree_,s);let h=QW(a,e,n,d,i,c);if(!u&&!o&&!r){const f=zI(a,e);h=h.concat(cH(t,e,f))}return h}function gx(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Qt(o,e),u=pi(a,c);if(u)return u});return OI(s,e,i,n,!0)}function iH(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const h=Qt(u,n);r=r||pi(d,h)});let s=t.syncPointTree_.get(n);s?r=r||pi(s,ke()):(s=new UI,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new bi(r,!0,!1):null,a=Mp(t.pendingWriteTree_,e._path),c=VI(s,e,a,i?o.getNode():oe.EMPTY_NODE,i);return zW(c)}function Yu(t,e){return GI(e,t.syncPointTree_,null,Mp(t.pendingWriteTree_,ke()))}function GI(t,e,n,r){if(ye(t.path))return KI(t,e,n,r);{const s=e.get(ke());n==null&&s!=null&&(n=pi(s,ke()));let i=[];const o=ge(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,d=DI(r,o);i=i.concat(GI(a,c,u,d))}return s&&(i=i.concat(mx(s,t,r,n))),i}}function KI(t,e,n,r){const s=e.get(ke());n==null&&s!=null&&(n=pi(s,ke()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=DI(r,o),d=t.operationForChild(o);d&&(i=i.concat(KI(d,a,c,u)))}),s&&(i=i.concat(mx(s,t,r,n))),i}function YI(t,e){const n=e.query,r=fu(t,n);return{hashFn:()=>(BW(e)||oe.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?rH(t,n._path,r):nH(t,n._path);{const i=iz(s,n);return Tf(t,n,null,i)}}}}function fu(t,e){const n=Fp(e);return t.queryToTagMap.get(n)}function Fp(t){return t._path.toString()+"$"+t._queryIdentifier}function vx(t,e){return t.tagToQueryMap.get(e)}function yx(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function wx(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const s=Mp(t.pendingWriteTree_,e);return mx(r,n,s,null)}function oH(t){return t.fold((e,n,r)=>{if(n&&_i(n))return[Lp(n)];{let s=[];return n&&(s=BI(n)),pn(r,(i,o)=>{s=s.concat(o)}),s}})}function Rc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ZW())(t._repo,t._path):t}function aH(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Fp(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function lH(){return eH++}function cH(t,e,n){const r=e._path,s=fu(t,e),i=YI(t,n),o=t.listenProvider_.startListening(Rc(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)K(!_i(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,d,h)=>{if(!ye(u)&&d&&_i(d))return[Lp(d).query];{let f=[];return d&&(f=f.concat(BI(d).map(p=>p.query))),pn(h,(p,b)=>{f=f.concat(b)}),f}});for(let u=0;u<c.length;++u){const d=c[u];t.listenProvider_.stopListening(Rc(d),fu(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new xx(n)}node(){return this.node_}}class bx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=mt(this.path_,e);return new bx(this.syncTree_,n)}node(){return gx(this.syncTree_,this.path_)}}const uH=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},V1=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dH(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hH(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dH=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},hH=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const s=e.node();if(K(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},fH=function(t,e,n,r){return _x(e,new bx(n,t),r)},QI=function(t,e,n){return _x(t,new xx(e),n)};function _x(t,e,n){const r=t.getPriority().val(),s=V1(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=V1(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new xt(a,St(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new xt(s))),o.forEachChild(nt,(a,c)=>{const u=_x(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Cx(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,s=ge(n);for(;s!==null;){const i=al(r.node.children,s)||{children:{},childCount:0};r=new Sx(s,r,i),n=De(n),s=ge(n)}return r}function jl(t){return t.node.value}function JI(t,e){t.node.value=e,ky(t)}function XI(t){return t.node.childCount>0}function pH(t){return jl(t)===void 0&&!XI(t)}function $p(t,e){pn(t.node.children,(n,r)=>{e(new Sx(n,t,r))})}function ZI(t,e,n,r){n&&!r&&e(t),$p(t,s=>{ZI(s,e,!0,r)}),n&&r&&e(t)}function mH(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Qu(t){return new Ae(t.parent===null?t.name:Qu(t.parent)+"/"+t.name)}function ky(t){t.parent!==null&&gH(t.parent,t.name,t)}function gH(t,e,n){const r=pH(n),s=xs(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,ky(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,ky(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH=/[\[\].#$\/\u0000-\u001F\u007F]/,yH=/[\[\].#$\u0000-\u001F\u007F]/,pg=10*1024*1024,eP=function(t){return typeof t=="string"&&t.length!==0&&!vH.test(t)},tP=function(t){return typeof t=="string"&&t.length!==0&&!yH.test(t)},wH=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),tP(t)},xH=function(t,e,n,r){Ex(Ww(t,"value"),e,n)},Ex=function(t,e,n){const r=n instanceof Ae?new Fz(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Vi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Vi(r)+" with contents = "+e.toString());if(Xj(e))throw new Error(t+"contains "+e.toString()+" "+Vi(r));if(typeof e=="string"&&e.length>pg/3&&Rp(e)>pg)throw new Error(t+"contains a string greater than "+pg+" utf8 bytes "+Vi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(pn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!eP(o)))throw new Error(t+" contains an invalid key ("+o+") "+Vi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$z(r,o),Ex(t,a,r),Uz(r)}),s&&i)throw new Error(t+' contains ".value" child '+Vi(r)+" in addition to actual children.")}},nP=function(t,e,n,r){if(!tP(n))throw new Error(Ww(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bH=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nP(t,e,n)},rP=function(t,e){if(ge(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},_H=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!eP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!wH(n))throw new Error(Ww(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Nx(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!ix(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function sP(t,e,n){Nx(t,n),iP(t,r=>ix(r,e))}function Br(t,e,n){Nx(t,n),iP(t,r=>lr(r,e)||lr(e,r))}function iP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(CH(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function CH(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ec&&Ut("event: "+n.toString()),Rl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH="repo_interrupt",NH=25;class kH{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xf(),this.transactionQueueTree_=new Sx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function TH(t,e,n){if(t.stats_=rx(t.repoInfo_),t.forceRestClient_||cz())t.server_=new wf(t.repoInfo_,(r,s,i,o)=>{B1(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>z1(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new os(t.repoInfo_,e,(r,s,i,o)=>{B1(t,r,s,i,o)},r=>{z1(t,r)},r=>{jH(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=pz(t.repoInfo_,()=>new hW(t.stats_,t.server_)),t.infoData_=new aW,t.infoSyncTree_=new U1({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ku(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Tx(t,"connected",!1),t.serverSyncTree_=new U1({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);Br(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function RH(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function kx(t){return uH({timestamp:RH(t)})}function B1(t,e,n,r,s){t.dataUpdateCount++;const i=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=lf(n,u=>St(u));o=sH(t.serverSyncTree_,i,c,s)}else{const c=St(n);o=qI(t.serverSyncTree_,i,c,s)}else if(r){const c=lf(n,u=>St(u));o=tH(t.serverSyncTree_,i,c)}else{const c=St(n);o=Ku(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Vp(t,i)),Br(t.eventQueue_,a,o)}function z1(t,e){Tx(t,"connected",e),e===!1&&AH(t)}function jH(t,e){pn(e,(n,r)=>{Tx(t,n,r)})}function Tx(t,e,n){const r=new Ae("/.info/"+e),s=St(n);t.infoData_.updateSnapshot(r,s);const i=Ku(t.infoSyncTree_,r,s);Br(t.eventQueue_,r,i)}function oP(t){return t.nextWriteId_++}function IH(t,e,n){const r=iH(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=St(s).withIndex(e._queryParams.getIndex());Ny(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Ku(t.serverSyncTree_,e._path,i);else{const a=fu(t.serverSyncTree_,e);o=qI(t.serverSyncTree_,e._path,i,a)}return Br(t.eventQueue_,e._path,o),Tf(t.serverSyncTree_,e,n,null,!0),i},s=>(Up(t,"get for query "+pt(e)+" failed: "+s),Promise.reject(new Error(s))))}function PH(t,e,n,r,s){Up(t,"set",{path:e.toString(),value:n,priority:r});const i=kx(t),o=St(n,r),a=gx(t.serverSyncTree_,e),c=QI(o,a,i),u=oP(t),d=HI(t.serverSyncTree_,e,c,u,!0);Nx(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,p)=>{const b=f==="ok";b||hn("set at "+e+" failed: "+f);const y=Qi(t.serverSyncTree_,u,!b);Br(t.eventQueue_,e,y),LH(t,s,f,p)});const h=dP(t,e);Vp(t,h),Br(t.eventQueue_,h,[])}function AH(t){Up(t,"onDisconnectEvents");const e=kx(t),n=xf();by(t.onDisconnect_,ke(),(s,i)=>{const o=fH(s,i,t.serverSyncTree_,e);RI(n,s,o)});let r=[];by(n,ke(),(s,i)=>{r=r.concat(Ku(t.serverSyncTree_,s,i));const o=dP(t,s);Vp(t,o)}),t.onDisconnect_=xf(),Br(t.eventQueue_,ke(),r)}function OH(t,e,n){let r;ge(e._path)===".info"?r=Ny(t.infoSyncTree_,e,n):r=Ny(t.serverSyncTree_,e,n),sP(t.eventQueue_,e._path,r)}function DH(t,e,n){let r;ge(e._path)===".info"?r=Tf(t.infoSyncTree_,e,n):r=Tf(t.serverSyncTree_,e,n),sP(t.eventQueue_,e._path,r)}function MH(t){t.persistentConnection_&&t.persistentConnection_.interrupt(EH)}function Up(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ut(n,...e)}function LH(t,e,n,r){e&&Rl(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function aP(t,e,n){return gx(t.serverSyncTree_,e,n)||oe.EMPTY_NODE}function Rx(t,e=t.transactionQueueTree_){if(e||Bp(t,e),jl(e)){const n=cP(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&FH(t,Qu(e),n)}else XI(e)&&$p(e,n=>{Rx(t,n)})}function FH(t,e,n){const r=n.map(u=>u.currentWriteId),s=aP(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];K(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Qt(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{Up(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(Qi(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Bp(t,Cx(t.transactionQueueTree_,e)),Rx(t,t.transactionQueueTree_),Br(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Rl(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{hn("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Vp(t,e)}},o)}function Vp(t,e){const n=lP(t,e),r=Qu(n),s=cP(t,n);return $H(t,s,r),r}function $H(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Qt(n,c.path);let d=!1,h;if(K(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Qi(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=NH)d=!0,h="maxretry",s=s.concat(Qi(t.serverSyncTree_,c.currentWriteId,!0));else{const f=aP(t,c.path,o);c.currentInputSnapshot=f;const p=e[a].update(f.val());if(p!==void 0){Ex("transaction failed: Data returned ",p,c.path);let b=St(p);typeof p=="object"&&p!=null&&xs(p,".priority")||(b=b.updatePriority(f.getPriority()));const x=c.currentWriteId,v=kx(t),g=QI(b,f,v);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=g,c.currentWriteId=oP(t),o.splice(o.indexOf(x),1),s=s.concat(HI(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(Qi(t.serverSyncTree_,x,!0))}else d=!0,h="nodata",s=s.concat(Qi(t.serverSyncTree_,c.currentWriteId,!0))}Br(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Bp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Rl(r[a]);Rx(t,t.transactionQueueTree_)}function lP(t,e){let n,r=t.transactionQueueTree_;for(n=ge(e);n!==null&&jl(r)===void 0;)r=Cx(r,n),e=De(e),n=ge(e);return r}function cP(t,e){const n=[];return uP(t,e,n),n.sort((r,s)=>r.order-s.order),n}function uP(t,e,n){const r=jl(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);$p(e,s=>{uP(t,s,n)})}function Bp(t,e){const n=jl(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,JI(e,n.length>0?n:void 0)}$p(e,r=>{Bp(t,r)})}function dP(t,e){const n=Qu(lP(t,e)),r=Cx(t.transactionQueueTree_,e);return mH(r,s=>{mg(t,s)}),mg(t,r),ZI(r,s=>{mg(t,s)}),n}function mg(t,e){const n=jl(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Qi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?JI(e,void 0):n.length=i+1,Br(t.eventQueue_,Qu(e),s);for(let o=0;o<r.length;o++)Rl(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function VH(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hn(`Invalid query segment '${n}' in query '${t}'`)}return e}const W1=function(t,e){const n=BH(t),r=n.namespace;n.domain==="firebase.com"&&gs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&gs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ez();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uI(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},BH=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=UH(t.substring(d,h)));const f=VH(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const p=e.slice(0,u);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pt(this.snapshot.exportVal())}}class WH{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ye(this._path)?null:wI(this._path)}get ref(){return new bs(this._repo,this._path)}get _queryIdentifier(){const e=R1(this._queryParams),n=tx(e);return n==="{}"?"default":n}get _queryObject(){return R1(this._queryParams)}isEqual(e){if(e=gn(e),!(e instanceof jx))return!1;const n=this._repo===e._repo,r=ix(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Lz(this._path)}}class bs extends jx{constructor(e,n){super(e,n,new cx,!1)}get parent(){const e=bI(this._path);return e===null?null:new bs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class pu{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),r=Ty(this.ref,e);return new pu(this._node.getChild(n),r,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new pu(s,Ty(this.ref,r),nt)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yt(t,e){return t=gn(t),t._checkNotDeleted("ref"),e!==void 0?Ty(t._root,e):t._root}function Ty(t,e){return t=gn(t),ge(t._path)===null?bH("child","path",e):nP("child","path",e),new bs(t._repo,mt(t._path,e))}function rc(t){return rP("remove",t._path),ma(t,null)}function ma(t,e){t=gn(t),rP("set",t._path),xH("set",e,t._path);const n=new Tp;return PH(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Qo(t){t=gn(t);const e=new hP(()=>{}),n=new zp(e);return IH(t._repo,t,n).then(r=>new pu(r,new bs(t._repo,t._path),t._queryParams.getIndex()))}class zp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new zH("value",this,new pu(e.snapshotNode,new bs(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new WH(this,e,n):null}matches(e){return e instanceof zp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function HH(t,e,n,r,s){const i=new hP(n,void 0),o=new zp(i);return OH(t._repo,t,o),()=>DH(t._repo,t,o)}function gg(t,e,n,r){return HH(t,"value",e)}GW(bs);XW(bs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH="FIREBASE_DATABASE_EMULATOR_HOST",Ry={};let GH=!1;function KH(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=Cl(i);t.repoInfo_=new uI(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function YH(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||gs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ut("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=W1(i,s),a=o.repoInfo,c;typeof process<"u"&&d1&&(c=d1[qH]),c?(i=`http://${c}?ns=${a.namespace}`,o=W1(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new dz(t.name,t.options,e);_H("Invalid Firebase Database URL",o),ye(o.path)||gs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=JH(a,t,u,new uz(t,n));return new XH(d,t)}function QH(t,e){const n=Ry[e];(!n||n[t.key]!==t)&&gs(`Database ${e}(${t.repoInfo_}) has already been deleted.`),MH(t),delete n[t.key]}function JH(t,e,n,r){let s=Ry[e.name];s||(s={},Ry[e.name]=s);let i=s[t.toURLString()];return i&&gs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new kH(t,GH,n,r),s[t.toURLString()]=i,i}class XH{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(TH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bs(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(QH(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gs("Cannot call "+e+" on a deleted database.")}}function ZH(t=pj(),e){const n=Gw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=xU("database");r&&eq(n,...r)}return n}function eq(t,e,n,r={}){t=gn(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&_o(r,i.repoInfo_.emulatorOptions))return;gs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&gs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new yh(yh.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:bU(r.mockUserToken,t.app.options.projectId);o=new yh(a)}Cl(e)&&(oj(e),aj("Database",!0)),KH(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(t){K8(Nl),ll(new So("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return YH(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),di(h1,f1,t),di(h1,f1,"esm2020")}os.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};os.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tq();var nq="firebase",rq="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(nq,rq,"app");const sq={apiKey:"AIzaSyAYzzwkqZjf5iWN6Pc4wSz6MYJAzAFJ0wA",authDomain:"gmae111.firebaseapp.com",projectId:"gmae111",storageBucket:"gmae111.firebasestorage.app",messagingSenderId:"223415325596",appId:"1:223415325596:web:272fd4d7aff74d33b3ee59",measurementId:"G-4TEGC1REF4",databaseURL:"https://gmae111-default-rtdb.asia-southeast1.firebasedatabase.app"},fP=fj(sq),vg=q8(fP),wt=ZH(fP),pP=m.createContext(void 0),Ix=()=>{const t=m.useContext(pP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},iq=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(!0);m.useEffect(()=>{const c=OB(vg,async u=>{if(n(u),u){const d=yt(wt,`users/${u.uid}`);(await Qo(d)).exists()||await ma(d,{id:u.uid,displayName:`Player_${u.uid.slice(0,6)}`,createdAt:Date.now(),friends:{},friendRequests:{}})}s(!1)});return()=>c()},[]);const i=async()=>{try{await TB(vg)}catch(c){throw console.error("Login error:",c),c}},o=async()=>{try{await DB(vg)}catch(c){throw console.error("Logout error:",c),c}},a={user:e,userId:(e==null?void 0:e.uid)||null,loading:r,login:i,logout:o};return l.jsx(pP.Provider,{value:a,children:t})},Px=m.createContext({});function Ax(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ox=typeof window<"u",mP=Ox?m.useLayoutEffect:m.useEffect,Wp=m.createContext(null);function Dx(t,e){t.indexOf(e)===-1&&t.push(e)}function Mx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const vs=(t,e,n)=>n>e?e:n<t?t:n;let Rf=()=>{};const ys={},gP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function vP(t){return typeof t=="object"&&t!==null}const yP=t=>/^0[^.\s]+$/u.test(t);function Lx(t){let e;return()=>(e===void 0&&(e=t()),e)}const $n=t=>t,oq=(t,e)=>n=>e(t(n)),Ju=(...t)=>t.reduce(oq),mu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Fx{constructor(){this.subscriptions=[]}add(e){return Dx(this.subscriptions,e),()=>Mx(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $r=t=>t*1e3,Ln=t=>t/1e3;function wP(t,e){return e?t*(1e3/e):0}const xP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,aq=1e-7,lq=12;function cq(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=xP(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>aq&&++a<lq);return o}function Xu(t,e,n,r){if(t===e&&n===r)return $n;const s=i=>cq(i,0,1,t,n);return i=>i===0||i===1?i:xP(s(i),e,r)}const bP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_P=t=>e=>1-t(1-e),SP=Xu(.33,1.53,.69,.99),$x=_P(SP),CP=bP($x),EP=t=>(t*=2)<1?.5*$x(t):.5*(2-Math.pow(2,-10*(t-1))),Ux=t=>1-Math.sin(Math.acos(t)),NP=_P(Ux),kP=bP(Ux),uq=Xu(.42,0,1,1),dq=Xu(0,0,.58,1),TP=Xu(.42,0,.58,1),hq=t=>Array.isArray(t)&&typeof t[0]!="number",RP=t=>Array.isArray(t)&&typeof t[0]=="number",H1={linear:$n,easeIn:uq,easeInOut:TP,easeOut:dq,circIn:Ux,circInOut:kP,circOut:NP,backIn:$x,backInOut:CP,backOut:SP,anticipate:EP},fq=t=>typeof t=="string",q1=t=>{if(RP(t)){Rf(t.length===4);const[e,n,r,s]=t;return Xu(e,n,r,s)}else if(fq(t))return Rf(H1[t]!==void 0),H1[t];return t},Ld=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],G1={value:null,addProjectionMetrics:null};function pq(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(a)}const d={schedule:(h,f=!1,p=!1)=>{const y=p&&s?n:r;return f&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&G1.value&&G1.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const mq=40;function jP(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Ld.reduce((w,S)=>(w[S]=pq(i,e?S:void 0),w),{}),{setup:a,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:p,postRender:b}=o,y=()=>{const w=ys.useManualTiming?s.timestamp:performance.now();n=!1,ys.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,mq),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),p.process(s),b.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(y))},x=()=>{n=!0,r=!0,s.isProcessing||t(y)};return{schedule:Ld.reduce((w,S)=>{const _=o[S];return w[S]=(C,E=!1,N=!1)=>(n||x(),_.schedule(C,E,N)),w},{}),cancel:w=>{for(let S=0;S<Ld.length;S++)o[Ld[S]].cancel(w)},state:s,steps:o}}const{schedule:qe,cancel:Si,state:jt,steps:yg}=jP(typeof requestAnimationFrame<"u"?requestAnimationFrame:$n,!0);let wh;function gq(){wh=void 0}const ln={now:()=>(wh===void 0&&ln.set(jt.isProcessing||ys.useManualTiming?jt.timestamp:performance.now()),wh),set:t=>{wh=t,queueMicrotask(gq)}},IP=t=>e=>typeof e=="string"&&e.startsWith(t),PP=IP("--"),vq=IP("var(--"),Vx=t=>vq(t)?yq.test(t.split("/*")[0].trim()):!1,yq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Il={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gu={...Il,transform:t=>vs(0,1,t)},Fd={...Il,default:1},jc=t=>Math.round(t*1e5)/1e5,Bx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wq(t){return t==null}const xq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zx=(t,e)=>n=>!!(typeof n=="string"&&xq.test(n)&&n.startsWith(t)||e&&!wq(n)&&Object.prototype.hasOwnProperty.call(n,e)),AP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(Bx);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},bq=t=>vs(0,255,t),wg={...Il,transform:t=>Math.round(bq(t))},Ji={test:zx("rgb","red"),parse:AP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wg.transform(t)+", "+wg.transform(e)+", "+wg.transform(n)+", "+jc(gu.transform(r))+")"};function _q(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const jy={test:zx("#"),parse:_q,transform:Ji.transform},Zu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ps=Zu("deg"),Ur=Zu("%"),le=Zu("px"),Sq=Zu("vh"),Cq=Zu("vw"),K1={...Ur,parse:t=>Ur.parse(t)/100,transform:t=>Ur.transform(t*100)},ga={test:zx("hsl","hue"),parse:AP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ur.transform(jc(e))+", "+Ur.transform(jc(n))+", "+jc(gu.transform(r))+")"},at={test:t=>Ji.test(t)||jy.test(t)||ga.test(t),parse:t=>Ji.test(t)?Ji.parse(t):ga.test(t)?ga.parse(t):jy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ji.transform(t):ga.transform(t),getAnimatableNone:t=>{const e=at.parse(t);return e.alpha=0,at.transform(e)}},Eq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Nq(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Bx))==null?void 0:e.length)||0)+(((n=t.match(Eq))==null?void 0:n.length)||0)>0}const OP="number",DP="color",kq="var",Tq="var(",Y1="${}",Rq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Rq,c=>(at.test(c)?(r.color.push(i),s.push(DP),n.push(at.parse(c))):c.startsWith(Tq)?(r.var.push(i),s.push(kq),n.push(c)):(r.number.push(i),s.push(OP),n.push(parseFloat(c))),++i,Y1)).split(Y1);return{values:n,split:a,indexes:r,types:s}}function MP(t){return vu(t).values}function LP(t){const{split:e,types:n}=vu(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===OP?i+=jc(s[o]):a===DP?i+=at.transform(s[o]):i+=s[o]}return i}}const jq=t=>typeof t=="number"?0:at.test(t)?at.getAnimatableNone(t):t;function Iq(t){const e=MP(t);return LP(t)(e.map(jq))}const Ci={test:Nq,parse:MP,createTransformer:LP,getAnimatableNone:Iq};function xg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Pq({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=xg(c,a,t+1/3),i=xg(c,a,t),o=xg(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function jf(t,e){return n=>n>0?e:t}const Ye=(t,e,n)=>t+(e-t)*n,bg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Aq=[jy,Ji,ga],Oq=t=>Aq.find(e=>e.test(t));function Q1(t){const e=Oq(t);if(!e)return!1;let n=e.parse(t);return e===ga&&(n=Pq(n)),n}const J1=(t,e)=>{const n=Q1(t),r=Q1(e);if(!n||!r)return jf(t,e);const s={...n};return i=>(s.red=bg(n.red,r.red,i),s.green=bg(n.green,r.green,i),s.blue=bg(n.blue,r.blue,i),s.alpha=Ye(n.alpha,r.alpha,i),Ji.transform(s))},Iy=new Set(["none","hidden"]);function Dq(t,e){return Iy.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Mq(t,e){return n=>Ye(t,e,n)}function Wx(t){return typeof t=="number"?Mq:typeof t=="string"?Vx(t)?jf:at.test(t)?J1:$q:Array.isArray(t)?FP:typeof t=="object"?at.test(t)?J1:Lq:jf}function FP(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>Wx(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function Lq(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Wx(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Fq(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const $q=(t,e)=>{const n=Ci.createTransformer(e),r=vu(t),s=vu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Iy.has(t)&&!s.values.length||Iy.has(e)&&!r.values.length?Dq(t,e):Ju(FP(Fq(r,s),s.values),n):jf(t,e)};function $P(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ye(t,e,n):Wx(t)(t,e)}const Uq=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>qe.update(e,n),stop:()=>Si(e),now:()=>jt.isProcessing?jt.timestamp:ln.now()}},UP=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},If=2e4;function Hx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<If;)e+=n,r=t.next(e);return e>=If?1/0:e}function Vq(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Hx(r),If);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Ln(s)}}const Bq=5;function VP(t,e,n){const r=Math.max(e-Bq,0);return wP(n-t(r),e-r)}const et={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_g=.001;function zq({duration:t=et.duration,bounce:e=et.bounce,velocity:n=et.velocity,mass:r=et.mass}){let s,i,o=1-e;o=vs(et.minDamping,et.maxDamping,o),t=vs(et.minDuration,et.maxDuration,Ln(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,p=Py(u,o),b=Math.exp(-h);return _g-f/p*b},i=u=>{const h=u*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-h),y=Py(Math.pow(u,2),o);return(-s(u)+_g>0?-1:1)*((f-p)*b)/y}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-_g+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,c=Hq(s,i,a);if(t=$r(t),isNaN(c))return{stiffness:et.stiffness,damping:et.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Wq=12;function Hq(t,e,n){let r=n;for(let s=1;s<Wq;s++)r=r-t(r)/e(r);return r}function Py(t,e){return t*Math.sqrt(1-e*e)}const qq=["duration","bounce"],Gq=["stiffness","damping","mass"];function X1(t,e){return e.some(n=>t[n]!==void 0)}function Kq(t){let e={velocity:et.velocity,stiffness:et.stiffness,damping:et.damping,mass:et.mass,isResolvedFromDuration:!1,...t};if(!X1(t,Gq)&&X1(t,qq))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*vs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:et.mass,stiffness:s,damping:i}}else{const n=zq(t);e={...e,...n,mass:et.mass},e.isResolvedFromDuration=!0}return e}function Pf(t=et.visualDuration,e=et.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=Kq({...n,velocity:-Ln(n.velocity||0)}),b=f||0,y=u/(2*Math.sqrt(c*d)),x=o-i,v=Ln(Math.sqrt(c/d)),g=Math.abs(x)<5;r||(r=g?et.restSpeed.granular:et.restSpeed.default),s||(s=g?et.restDelta.granular:et.restDelta.default);let w;if(y<1){const _=Py(v,y);w=C=>{const E=Math.exp(-y*v*C);return o-E*((b+y*v*x)/_*Math.sin(_*C)+x*Math.cos(_*C))}}else if(y===1)w=_=>o-Math.exp(-v*_)*(x+(b+v*x)*_);else{const _=v*Math.sqrt(y*y-1);w=C=>{const E=Math.exp(-y*v*C),N=Math.min(_*C,300);return o-E*((b+y*v*x)*Math.sinh(N)+_*x*Math.cosh(N))/_}}const S={calculatedDuration:p&&h||null,next:_=>{const C=w(_);if(p)a.done=_>=h;else{let E=_===0?b:0;y<1&&(E=_===0?$r(b):VP(w,_,C));const N=Math.abs(E)<=r,k=Math.abs(o-C)<=s;a.done=N&&k}return a.value=a.done?o:C,a},toString:()=>{const _=Math.min(Hx(S),If),C=UP(E=>S.next(_*E).value,_,30);return _+"ms "+C},toTransition:()=>{}};return S}Pf.applyToOptions=t=>{const e=Vq(t,100,Pf);return t.ease=e.ease,t.duration=$r(e.duration),t.type="keyframes",t};function Ay({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=N=>a!==void 0&&N<a||c!==void 0&&N>c,b=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let y=n*e;const x=h+y,v=o===void 0?x:o(x);v!==x&&(y=v-h);const g=N=>-y*Math.exp(-N/r),w=N=>v+g(N),S=N=>{const k=g(N),T=w(N);f.done=Math.abs(k)<=u,f.value=f.done?v:T};let _,C;const E=N=>{p(f.value)&&(_=N,C=Pf({keyframes:[f.value,b(f.value)],velocity:VP(w,N,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:N=>{let k=!1;return!C&&_===void 0&&(k=!0,S(N),E(N)),_!==void 0&&N>=_?C.next(N-_):(!k&&S(N),f)}}}function Yq(t,e,n){const r=[],s=n||ys.mix||$P,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||$n:e;a=Ju(c,a)}r.push(a)}return r}function Qq(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Rf(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Yq(e,r,s),c=a.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=mu(t[h],t[h+1],d);return a[h](f)};return n?d=>u(vs(t[0],t[i-1],d)):u}function Jq(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=mu(0,e,r);t.push(Ye(n,1,s))}}function Xq(t){const e=[0];return Jq(e,t.length-1),e}function Zq(t,e){return t.map(n=>n*e)}function e9(t,e){return t.map(()=>e||TP).splice(0,t.length-1)}function Ic({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=hq(r)?r.map(q1):q1(r),i={done:!1,value:e[0]},o=Zq(n&&n.length===e.length?n:Xq(e),t),a=Qq(o,e,{ease:Array.isArray(s)?s:e9(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const t9=t=>t!==null;function qx(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(t9),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const n9={decay:Ay,inertia:Ay,tween:Ic,keyframes:Ic,spring:Pf};function BP(t){typeof t.type=="string"&&(t.type=n9[t.type])}class Gx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const r9=t=>t/100;class Kx extends Gx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==ln.now()&&this.tick(ln.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;BP(e);const{type:n=Ic,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const c=n||Ic;c!==Ic&&typeof a[0]!="number"&&(this.mixKeyframes=Ju(r9,$P(a[0],a[1])),a=[0,100]);const u=c({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Hx(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:p,type:b,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,S=r;if(h){const N=Math.min(this.currentTime,s)/a;let k=Math.floor(N),T=N%1;!T&&N>=1&&(T=1),T===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(T=1-T,p&&(T-=p/a)):f==="mirror"&&(S=o)),w=vs(0,1,T)*a}const _=g?{done:!1,value:d[0]}:S.next(w);i&&(_.value=i(_.value));let{done:C}=_;!g&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&b!==Ay&&(_.value=qx(d,this.options,x,this.speed)),y&&y(_.value),E&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return Ln(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(this.currentTime)}set time(e){var n;e=$r(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ln.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ln(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=Uq,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function s9(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Xi=t=>t*180/Math.PI,Oy=t=>{const e=Xi(Math.atan2(t[1],t[0]));return Dy(e)},i9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Oy,rotateZ:Oy,skewX:t=>Xi(Math.atan(t[1])),skewY:t=>Xi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Dy=t=>(t=t%360,t<0&&(t+=360),t),Z1=Oy,eC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),o9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eC,scaleY:tC,scale:t=>(eC(t)+tC(t))/2,rotateX:t=>Dy(Xi(Math.atan2(t[6],t[5]))),rotateY:t=>Dy(Xi(Math.atan2(-t[2],t[0]))),rotateZ:Z1,rotate:Z1,skewX:t=>Xi(Math.atan(t[4])),skewY:t=>Xi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function My(t){return t.includes("scale")?1:0}function Ly(t,e){if(!t||t==="none")return My(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=o9,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=i9,s=a}if(!s)return My(e);const i=r[e],o=s[1].split(",").map(l9);return typeof i=="function"?i(o):o[i]}const a9=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Ly(n,e)};function l9(t){return parseFloat(t.trim())}const Pl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Al=new Set(Pl),nC=t=>t===Il||t===le,c9=new Set(["x","y","z"]),u9=Pl.filter(t=>!c9.has(t));function d9(t){const e=[];return u9.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const co={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ly(e,"x"),y:(t,{transform:e})=>Ly(e,"y")};co.translateX=co.x;co.translateY=co.y;const uo=new Set;let Fy=!1,$y=!1,Uy=!1;function zP(){if($y){const t=Array.from(uo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=d9(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$y=!1,Fy=!1,uo.forEach(t=>t.complete(Uy)),uo.clear()}function WP(){uo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($y=!0)})}function h9(){Uy=!0,WP(),zP(),Uy=!1}class Yx{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(uo.add(this),Fy||(Fy=!0,qe.read(WP),qe.resolveKeyframes(zP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}s9(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),uo.delete(this)}cancel(){this.state==="scheduled"&&(uo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const f9=t=>t.startsWith("--");function p9(t,e,n){f9(e)?t.style.setProperty(e,n):t.style[e]=n}const m9=Lx(()=>window.ScrollTimeline!==void 0),g9={};function v9(t,e){const n=Lx(t);return()=>g9[e]??n()}const HP=v9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,rC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cc([0,.65,.55,1]),circOut:cc([.55,0,1,.45]),backIn:cc([.31,.01,.66,-.59]),backOut:cc([.33,1.53,.69,.99])};function qP(t,e){if(t)return typeof t=="function"?HP()?UP(t,e):"ease-out":RP(t)?cc(t):Array.isArray(t)?t.map(n=>qP(n,e)||rC.easeOut):rC[t]}function y9(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=qP(a,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function GP(t){return typeof t=="function"&&"applyToOptions"in t}function w9({type:t,...e}){return GP(t)&&HP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class x9 extends Gx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Rf(typeof e.type!="string");const u=w9(e);this.animation=y9(n,r,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=qx(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):p9(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ln(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ln(e)}get time(){return Ln(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$r(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&m9()?(this.animation.timeline=e,$n):n(this)}}const KP={anticipate:EP,backInOut:CP,circInOut:kP};function b9(t){return t in KP}function _9(t){typeof t.ease=="string"&&b9(t.ease)&&(t.ease=KP[t.ease])}const sC=10;class S9 extends x9{constructor(e){_9(e),BP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Kx({...o,autoplay:!1}),c=$r(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-sC).value,a.sample(c).value,sC),a.stop()}}const iC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ci.test(t)||t==="0")&&!t.startsWith("url("));function C9(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function E9(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=iC(s,e),a=iC(i,e);return!o||!a?!1:C9(t)||(n==="spring"||GP(n))&&r}function Vy(t){t.duration=0,t.type="keyframes"}const N9=new Set(["opacity","clipPath","filter","transform"]),k9=Lx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function T9(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return k9()&&n&&N9.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const R9=40;class j9 extends Gx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:u,element:d,...h}){var b;super(),this.stop=()=>{var y,x;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=ln.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...h},p=(d==null?void 0:d.KeyframeResolver)||Yx;this.keyframeResolver=new p(a,(y,x,v)=>this.onKeyframesResolved(y,x,f,!v),c,u,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=ln.now(),E9(e,i,o,a)||((ys.instantAnimations||!c)&&(d==null||d(qx(e,r,n))),e[0]=e[e.length-1],Vy(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>R9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&T9(f)?new S9({...f,element:f.motionValue.owner.current}):new Kx(f);p.finished.then(()=>this.notifyFinished()).catch($n),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),h9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const I9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function P9(t){const e=I9.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function YP(t,e,n=1){const[r,s]=P9(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return gP(o)?parseFloat(o):o}return Vx(s)?YP(s,e,n+1):s}function Qx(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const QP=new Set(["width","height","top","left","right","bottom",...Pl]),A9={test:t=>t==="auto",parse:t=>t},JP=t=>e=>e.test(t),XP=[Il,le,Ur,Ps,Cq,Sq,A9],oC=t=>XP.find(JP(t));function O9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yP(t):!0}const D9=new Set(["brightness","contrast","saturate","opacity"]);function M9(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Bx)||[];if(!r)return t;const s=n.replace(r,"");let i=D9.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const L9=/\b([a-z-]*)\(.*?\)/gu,By={...Ci,getAnimatableNone:t=>{const e=t.match(L9);return e?e.map(M9).join(" "):t}},aC={...Il,transform:Math.round},F9={rotate:Ps,rotateX:Ps,rotateY:Ps,rotateZ:Ps,scale:Fd,scaleX:Fd,scaleY:Fd,scaleZ:Fd,skew:Ps,skewX:Ps,skewY:Ps,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:gu,originX:K1,originY:K1,originZ:le},Jx={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le,...F9,zIndex:aC,fillOpacity:gu,strokeOpacity:gu,numOctaves:aC},$9={...Jx,color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,filter:By,WebkitFilter:By},ZP=t=>$9[t];function eA(t,e){let n=ZP(t);return n!==By&&(n=Ci),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const U9=new Set(["auto","none","0"]);function V9(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!U9.has(i)&&vu(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=eA(n,s)}class B9 extends Yx{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Vx(u))){const d=YP(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!QP.has(r)||e.length!==2)return;const[s,i]=e,o=oC(s),a=oC(i);if(o!==a)if(nC(o)&&nC(a))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else co[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||O9(e[s]))&&r.push(s);r.length&&V9(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=co[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=co[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function z9(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const tA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function nA(t){return vP(t)&&"offsetHeight"in t}const lC=30,W9=t=>!isNaN(parseFloat(t));class H9{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=ln.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=W9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Fx);const r=this.events[e].add(n);return e==="change"?()=>{r(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lC);return wP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(t,e){return new H9(t,e)}const{schedule:Xx,cancel:Lte}=jP(queueMicrotask,!1),Yn={x:!1,y:!1};function rA(){return Yn.x||Yn.y}function q9(t){return t==="x"||t==="y"?Yn[t]?null:(Yn[t]=!0,()=>{Yn[t]=!1}):Yn.x||Yn.y?null:(Yn.x=Yn.y=!0,()=>{Yn.x=Yn.y=!1})}function sA(t,e){const n=z9(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function cC(t){return!(t.pointerType==="touch"||rA())}function G9(t,e,n={}){const[r,s,i]=sA(t,n),o=a=>{if(!cC(a))return;const{target:c}=a,u=e(c,a);if(typeof u!="function"||!c)return;const d=h=>{cC(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const iA=(t,e)=>e?t===e?!0:iA(t,e.parentElement):!1,Zx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,K9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Y9(t){return K9.has(t.tagName)||t.tabIndex!==-1}const xh=new WeakSet;function uC(t){return e=>{e.key==="Enter"&&t(e)}}function Sg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Q9=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=uC(()=>{if(xh.has(n))return;Sg(n,"down");const s=uC(()=>{Sg(n,"up")}),i=()=>Sg(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function dC(t){return Zx(t)&&!rA()}function J9(t,e,n={}){const[r,s,i]=sA(t,n),o=a=>{const c=a.currentTarget;if(!dC(a))return;xh.add(c);const u=e(c,a),d=(p,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),xh.has(c)&&xh.delete(c),dC(p)&&typeof u=="function"&&u(p,{success:b})},h=p=>{d(p,c===window||c===document||n.useGlobalTarget||iA(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),nA(a)&&(a.addEventListener("focus",u=>Q9(u,s)),!Y9(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function oA(t){return vP(t)&&"ownerSVGElement"in t}function X9(t){return oA(t)&&t.tagName==="svg"}const Vt=t=>!!(t&&t.getVelocity),Z9=[...XP,at,Ci],eG=t=>Z9.find(JP(t)),eb=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function hC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tG(...t){return e=>{let n=!1;const r=t.map(s=>{const i=hC(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hC(t[s],null)}}}}function nG(...t){return m.useCallback(tG(...t),t)}class rG extends m.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=nA(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sG({children:t,isPresent:e,anchorX:n,root:r}){const s=m.useId(),i=m.useRef(null),o=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=m.useContext(eb),c=nG(i,t==null?void 0:t.ref);return m.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:p}=o.current;if(e||!i.current||!u||!d)return;const b=n==="left"?`left: ${f}`:`right: ${p}`;i.current.dataset.motionPopId=s;const y=document.createElement("style");a&&(y.nonce=a);const x=r??document.head;return x.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{x.contains(y)&&x.removeChild(y)}},[e]),l.jsx(rG,{isPresent:e,childRef:i,sizeRef:o,children:m.cloneElement(t,{ref:c})})}const iG=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const u=Ax(oG),d=m.useId();let h=!0,f=m.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const b of u.values())if(!b)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return i&&h&&(f={...f}),m.useMemo(()=>{u.forEach((p,b)=>u.set(b,!1))},[n]),m.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=l.jsx(sG,{isPresent:n,anchorX:a,root:c,children:t})),l.jsx(Wp.Provider,{value:f,children:t})};function oG(){return new Map}function aA(t=!0){const e=m.useContext(Wp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=m.useId();m.useEffect(()=>{if(t)return s(i)},[t]);const o=m.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const $d=t=>t.key||"";function fC(t){const e=[];return m.Children.forEach(t,n=>{m.isValidElement(n)&&e.push(n)}),e}const Hp=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[u,d]=aA(o),h=m.useMemo(()=>fC(t),[t]),f=o&&!u?[]:h.map($d),p=m.useRef(!0),b=m.useRef(h),y=Ax(()=>new Map),[x,v]=m.useState(h),[g,w]=m.useState(h);mP(()=>{p.current=!1,b.current=h;for(let C=0;C<g.length;C++){const E=$d(g[C]);f.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[g,f.length,f.join("-")]);const S=[];if(h!==x){let C=[...h];for(let E=0;E<g.length;E++){const N=g[E],k=$d(N);f.includes(k)||(C.splice(E,0,N),S.push(N))}return i==="wait"&&S.length&&(C=S),w(fC(C)),v(h),null}const{forceRender:_}=m.useContext(Px);return l.jsx(l.Fragment,{children:g.map(C=>{const E=$d(C),N=o&&!u?!1:h===g||f.includes(E),k=()=>{if(y.has(E))y.set(E,!0);else return;let T=!0;y.forEach(j=>{j||(T=!1)}),T&&(_==null||_(),w(b.current),o&&(d==null||d()),r&&r())};return l.jsx(iG,{isPresent:N,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:N?void 0:k,anchorX:a,children:C},E)})})},lA=m.createContext({strict:!1}),pC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fl={};for(const t in pC)fl[t]={isEnabled:e=>pC[t].some(n=>!!e[n])};function aG(t){for(const e in t)fl[e]={...fl[e],...t[e]}}const lG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Af(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||lG.has(t)}let cA=t=>!Af(t);function cG(t){typeof t=="function"&&(cA=e=>e.startsWith("on")?!Af(e):t(e))}try{cG(require("@emotion/is-prop-valid").default)}catch{}function uG(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(cA(s)||n===!0&&Af(s)||!e&&!Af(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const qp=m.createContext({});function Gp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yu(t){return typeof t=="string"||Array.isArray(t)}const tb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nb=["initial",...tb];function Kp(t){return Gp(t.animate)||nb.some(e=>yu(t[e]))}function uA(t){return!!(Kp(t)||t.variants)}function dG(t,e){if(Kp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||yu(n)?n:void 0,animate:yu(r)?r:void 0}}return t.inherit!==!1?e:{}}function hG(t){const{initial:e,animate:n}=dG(t,m.useContext(qp));return m.useMemo(()=>({initial:e,animate:n}),[mC(e),mC(n)])}function mC(t){return Array.isArray(t)?t.join(" "):t}function gC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const sc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=gC(t,e.target.x),r=gC(t,e.target.y);return`${n}% ${r}%`}},fG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ci.parse(t);if(s.length>5)return r;const i=Ci.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const u=Ye(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},zy={borderRadius:{...sc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sc,borderTopRightRadius:sc,borderBottomLeftRadius:sc,borderBottomRightRadius:sc,boxShadow:fG};function dA(t,{layout:e,layoutId:n}){return Al.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!zy[t]||t==="opacity")}const pG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mG=Pl.length;function gG(t,e,n){let r="",s=!0;for(let i=0;i<mG;i++){const o=Pl[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const u=tA(a,Jx[o]);if(!c){s=!1;const d=pG[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function rb(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const u=e[c];if(Al.has(c)){o=!0;continue}else if(PP(c)){s[c]=u;continue}else{const d=tA(u,Jx[c]);c.startsWith("origin")?(a=!0,i[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=gG(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const sb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hA(t,e,n){for(const r in e)!Vt(e[r])&&!dA(r,n)&&(t[r]=e[r])}function vG({transformTemplate:t},e){return m.useMemo(()=>{const n=sb();return rb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yG(t,e){const n=t.style||{},r={};return hA(r,n,t),Object.assign(r,vG(t,e)),r}function wG(t,e){const n={},r=yG(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const xG={offset:"stroke-dashoffset",array:"stroke-dasharray"},bG={offset:"strokeDashoffset",array:"strokeDasharray"};function _G(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?xG:bG;t[i.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[i.array]=`${o} ${a}`}function fA(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,u,d){if(rb(t,a,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&_G(h,s,i,o,!1)}const pA=()=>({...sb(),attrs:{}}),mA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function SG(t,e,n,r){const s=m.useMemo(()=>{const i=pA();return fA(i,e,mA(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};hA(i,t.style,t),s.style={...i,...s.style}}return s}const CG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ib(t){return typeof t!="string"||t.includes("-")?!1:!!(CG.indexOf(t)>-1||/[A-Z]/u.test(t))}function EG(t,e,n,{latestValues:r},s,i=!1){const a=(ib(t)?SG:wG)(e,r,s,t),c=uG(e,typeof t=="string",i),u=t!==m.Fragment?{...c,...a,ref:n}:{},{children:d}=e,h=m.useMemo(()=>Vt(d)?d.get():d,[d]);return m.createElement(t,{...u,children:h})}function vC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ob(t,e,n,r){if(typeof e=="function"){const[s,i]=vC(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=vC(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function bh(t){return Vt(t)?t.get():t}function NG({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:kG(n,r,s,t),renderState:e()}}function kG(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=bh(i[f]);let{initial:o,animate:a}=t;const c=Kp(t),u=uA(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!Gp(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const b=ob(t,f[p]);if(b){const{transitionEnd:y,transition:x,...v}=b;for(const g in v){let w=v[g];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(s[g]=w)}for(const g in y)s[g]=y[g]}}}return s}const gA=t=>(e,n)=>{const r=m.useContext(qp),s=m.useContext(Wp),i=()=>NG(t,e,r,s);return n?i():Ax(i)};function ab(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(Vt(r[o])||e.style&&Vt(e.style[o])||dA(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const TG=gA({scrapeMotionValuesFromProps:ab,createRenderState:sb});function vA(t,e,n){const r=ab(t,e,n);for(const s in t)if(Vt(t[s])||Vt(e[s])){const i=Pl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const RG=gA({scrapeMotionValuesFromProps:vA,createRenderState:pA}),jG=Symbol.for("motionComponentSymbol");function va(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IG(t,e,n){return m.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):va(n)&&(n.current=r))},[e])}const lb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),PG="framerAppearId",yA="data-"+lb(PG),wA=m.createContext({});function AG(t,e,n,r,s){var y,x;const{visualElement:i}=m.useContext(qp),o=m.useContext(lA),a=m.useContext(Wp),c=m.useContext(eb).reducedMotion,u=m.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=m.useContext(wA);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&OG(u.current,n,s,h);const f=m.useRef(!1);m.useInsertionEffect(()=>{d&&f.current&&d.update(n,a)});const p=n[yA],b=m.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return mP(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),b.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),b.current=!1),d.enteringChildren=void 0)}),d}function OG(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xA(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&va(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function xA(t){if(t)return t.options.allowProjection!==!1?t.projection:xA(t.parent)}function Cg(t,{forwardMotionProps:e=!1}={},n,r){n&&aG(n);const s=ib(t)?RG:TG;function i(a,c){let u;const d={...m.useContext(eb),...a,layoutId:DG(a)},{isStatic:h}=d,f=hG(a),p=s(a,h);if(!h&&Ox){MG();const b=LG(d);u=b.MeasureLayout,f.visualElement=AG(t,p,d,r,b.ProjectionNode)}return l.jsxs(qp.Provider,{value:f,children:[u&&f.visualElement?l.jsx(u,{visualElement:f.visualElement,...d}):null,EG(t,a,IG(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=m.forwardRef(i);return o[jG]=t,o}function DG({layoutId:t}){const e=m.useContext(Px).id;return e&&t!==void 0?e+"-"+t:t}function MG(t,e){m.useContext(lA).strict}function LG(t){const{drag:e,layout:n}=fl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function FG(t,e){if(typeof Proxy>"u")return Cg;const n=new Map,r=(i,o)=>Cg(i,o,t,e),s=(i,o)=>r(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Cg(o,void 0,t,e)),n.get(o))})}function bA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $G({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function UG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Eg(t){return t===void 0||t===1}function Wy({scale:t,scaleX:e,scaleY:n}){return!Eg(t)||!Eg(e)||!Eg(n)}function Bi(t){return Wy(t)||_A(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _A(t){return yC(t.x)||yC(t.y)}function yC(t){return t&&t!=="0%"}function Of(t,e,n){const r=t-n,s=e*r;return n+s}function wC(t,e,n,r,s){return s!==void 0&&(t=Of(t,s,r)),Of(t,n,r)+e}function Hy(t,e=0,n=1,r,s){t.min=wC(t.min,e,n,r,s),t.max=wC(t.max,e,n,r,s)}function SA(t,{x:e,y:n}){Hy(t.x,e.translate,e.scale,e.originPoint),Hy(t.y,n.translate,n.scale,n.originPoint)}const xC=.999999999999,bC=1.0000000000001;function VG(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&wa(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,SA(t,o)),r&&Bi(i.latestValues)&&wa(t,i.latestValues))}e.x<bC&&e.x>xC&&(e.x=1),e.y<bC&&e.y>xC&&(e.y=1)}function ya(t,e){t.min=t.min+e,t.max=t.max+e}function _C(t,e,n,r,s=.5){const i=Ye(t.min,t.max,s);Hy(t,e,n,i,r)}function wa(t,e){_C(t.x,e.x,e.scaleX,e.scale,e.originX),_C(t.y,e.y,e.scaleY,e.scale,e.originY)}function CA(t,e){return bA(UG(t.getBoundingClientRect(),e))}function BG(t,e,n){const r=CA(t,n),{scroll:s}=e;return s&&(ya(r.x,s.offset.x),ya(r.y,s.offset.y)),r}const SC=()=>({translate:0,scale:1,origin:0,originPoint:0}),xa=()=>({x:SC(),y:SC()}),CC=()=>({min:0,max:0}),dt=()=>({x:CC(),y:CC()}),qy={current:null},EA={current:!1};function zG(){if(EA.current=!0,!!Ox)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qy.current=t.matches;t.addEventListener("change",e),e()}else qy.current=!1}const WG=new WeakMap;function HG(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Vt(s))t.addValue(r,s);else if(Vt(i))t.addValue(r,hl(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,hl(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const EC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class qG{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Yx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=ln.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,qe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Kp(n),this.isVariantNode=uA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Vt(p)&&p.set(c[f])}}mount(e){var n;this.current=e,WG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),EA.current||zG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qy.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Si(this.notifyUpdate),Si(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Al.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&qe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in fl){const n=fl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<EC.length;r++){const s=EC[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=HG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=hl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(gP(r)||yP(r))?r=parseFloat(r):!eG(r)&&Ci.test(n)&&(r=eA(e,n)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=ob(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Fx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Xx.render(this.render)}}class NA extends qG{constructor(){super(...arguments),this.KeyframeResolver=B9}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kA(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function GG(t){return window.getComputedStyle(t)}class KG extends NA{constructor(){super(...arguments),this.type="html",this.renderInstance=kA}readValueFromInstance(e,n){var r;if(Al.has(n))return(r=this.projection)!=null&&r.isProjecting?My(n):a9(e,n);{const s=GG(e),i=(PP(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CA(e,n)}build(e,n,r){rb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ab(e,n,r)}}const TA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YG(t,e,n,r){kA(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(TA.has(s)?s:lb(s),e.attrs[s])}class QG extends NA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Al.has(n)){const r=ZP(n);return r&&r.default||0}return n=TA.has(n)?n:lb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vA(e,n,r)}build(e,n,r){fA(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){YG(e,n,r,s)}mount(e){this.isSVGTag=mA(e.tagName),super.mount(e)}}const JG=(t,e)=>ib(t)?new QG(e):new KG(e,{allowProjection:t!==m.Fragment});function $a(t,e,n){const r=t.getProps();return ob(r,e,n!==void 0?n:r.custom,t)}const Gy=t=>Array.isArray(t);function XG(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,hl(n))}function ZG(t){return Gy(t)?t[t.length-1]||0:t}function e7(t,e){const n=$a(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=ZG(i[o]);XG(t,o,a)}}function t7(t){return!!(Vt(t)&&t.add)}function Ky(t,e){const n=t.getValue("willChange");if(t7(n))return n.add(e);if(!n&&ys.WillChange){const r=new ys.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function RA(t){return t.props[yA]}const n7=t=>t!==null;function r7(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(n7),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const s7={type:"spring",stiffness:500,damping:25,restSpeed:10},i7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),o7={type:"keyframes",duration:.8},a7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l7=(t,{keyframes:e})=>e.length>2?o7:Al.has(t)?t.startsWith("scale")?i7(e[1]):s7:a7;function c7({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const cb=(t,e,n,r={},s,i)=>o=>{const a=Qx(r,t)||{},c=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-$r(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};c7(a)||Object.assign(d,l7(t,d)),d.duration&&(d.duration=$r(d.duration)),d.repeatDelay&&(d.repeatDelay=$r(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Vy(d),d.delay===0&&(h=!0)),(ys.instantAnimations||ys.skipAnimations)&&(h=!0,Vy(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!i&&e.get()!==void 0){const f=r7(d.keyframes,a);if(f!==void 0){qe.update(()=>{d.onUpdate(f),d.onComplete()});return}}return a.isSync?new Kx(d):new j9(d)};function u7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jA(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const h=t.getValue(d,t.latestValues[d]??null),f=a[d];if(f===void 0||u&&u7(u,d))continue;const p={delay:n,...Qx(i||{},d)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===b&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=RA(t);if(v){const g=window.MotionHandoffAnimation(v,d,qe);g!==null&&(p.startTime=g,y=!0)}}Ky(t,d),h.start(cb(d,h,f,t.shouldReduceMotion&&QP.has(d)?{type:!1}:p,t,y));const x=h.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{qe.update(()=>{o&&e7(t,o)})}),c}function IA(t,e,n,r=0,s=1){const i=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(i,o):s===1?i*r:a-i*r}function Yy(t,e,n={}){var c;const r=$a(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(jA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return d7(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,d]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function d7(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Yy(c,e,{...o,delay:n+(typeof r=="function"?0:r)+IA(t.variantChildren,c,r,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function h7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Yy(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Yy(t,e,n);else{const s=typeof e=="function"?$a(t,e,n.custom):e;r=Promise.all(jA(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function PA(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const f7=nb.length;function AA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?AA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<f7;n++){const r=nb[n],s=t.props[r];(yu(s)||s===!1)&&(e[r]=s)}return e}const p7=[...tb].reverse(),m7=tb.length;function g7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>h7(t,n,r)))}function v7(t){let e=g7(t),n=NC(),r=!0;const s=c=>(u,d)=>{var f;const h=$a(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:b,...y}=h;u={...u,...y,...b}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,d=AA(t.parent)||{},h=[],f=new Set;let p={},b=1/0;for(let x=0;x<m7;x++){const v=p7[x],g=n[v],w=u[v]!==void 0?u[v]:d[v],S=yu(w),_=v===c?g.isActive:null;_===!1&&(b=x);let C=w===d[v]&&w!==u[v]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...p},!g.isActive&&_===null||!w&&!g.prevProp||Gp(w)||typeof w=="boolean")continue;const E=y7(g.prevProp,w);let N=E||v===c&&g.isActive&&!C&&S||x>b&&S,k=!1;const T=Array.isArray(w)?w:[w];let j=T.reduce(s(v),{});_===!1&&(j={});const{prevResolvedValues:I={}}=g,q={...I,...j},P=G=>{N=!0,f.has(G)&&(k=!0,f.delete(G)),g.needsAnimating[G]=!0;const A=t.getValue(G);A&&(A.liveStyle=!1)};for(const G in q){const A=j[G],L=I[G];if(p.hasOwnProperty(G))continue;let R=!1;Gy(A)&&Gy(L)?R=!PA(A,L):R=A!==L,R?A!=null?P(G):f.add(G):A!==void 0&&f.has(G)?P(G):g.protectedKeys[G]=!0}g.prevProp=w,g.prevResolvedValues=j,g.isActive&&(p={...p,...j}),r&&t.blockInitialAnimation&&(N=!1);const V=C&&E;N&&(!V||k)&&h.push(...T.map(G=>{const A={type:v};if(typeof G=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:L}=t,R=$a(L,G);if(L.enteringChildren&&R){const{delayChildren:W}=R.transition||{};A.delay=IA(L.enteringChildren,t,W)}}return{animation:G,options:A}}))}if(f.size){const x={};if(typeof u.initial!="boolean"){const v=$a(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(x.transition=v.transition)}f.forEach(v=>{const g=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),x[v]=g??null}),h.push({animation:x})}let y=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(h):Promise.resolve()}function a(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=NC()}}}function y7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PA(e,t):!1}function Di(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NC(){return{animate:Di(!0),whileInView:Di(),whileHover:Di(),whileTap:Di(),whileDrag:Di(),whileFocus:Di(),exit:Di()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class w7 extends Ri{constructor(e){super(e),e.animationState||(e.animationState=v7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let x7=0;class b7 extends Ri{constructor(){super(...arguments),this.id=x7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _7={animation:{Feature:w7},exit:{Feature:b7}};function wu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ed(t){return{point:{x:t.pageX,y:t.pageY}}}const S7=t=>e=>Zx(e)&&t(e,ed(e));function Pc(t,e,n,r){return wu(t,e,S7(n),r)}const OA=1e-4,C7=1-OA,E7=1+OA,DA=.01,N7=0-DA,k7=0+DA;function Jt(t){return t.max-t.min}function T7(t,e,n){return Math.abs(t-e)<=n}function kC(t,e,n,r=.5){t.origin=r,t.originPoint=Ye(e.min,e.max,t.origin),t.scale=Jt(n)/Jt(e),t.translate=Ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=C7&&t.scale<=E7||isNaN(t.scale))&&(t.scale=1),(t.translate>=N7&&t.translate<=k7||isNaN(t.translate))&&(t.translate=0)}function Ac(t,e,n,r){kC(t.x,e.x,n.x,r?r.originX:void 0),kC(t.y,e.y,n.y,r?r.originY:void 0)}function TC(t,e,n){t.min=n.min+e.min,t.max=t.min+Jt(e)}function R7(t,e,n){TC(t.x,e.x,n.x),TC(t.y,e.y,n.y)}function RC(t,e,n){t.min=e.min-n.min,t.max=t.min+Jt(e)}function Df(t,e,n){RC(t.x,e.x,n.x),RC(t.y,e.y,n.y)}function Pn(t){return[t("x"),t("y")]}const MA=({current:t})=>t?t.ownerDocument.defaultView:null,jC=(t,e)=>Math.abs(t-e);function j7(t,e){const n=jC(t.x,e.x),r=jC(t.y,e.y);return Math.sqrt(n**2+r**2)}class LA{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,b=j7(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!b)return;const{point:y}=f,{timestamp:x}=jt;this.history.push({...y,timestamp:x});const{onStart:v,onMove:g}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Ng(p,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:b,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=kg(f.type==="pointercancel"?this.lastMoveEventInfo:Ng(p,this.transformPagePoint),this.history);this.startEvent&&b&&b(f,v),y&&y(f,v)},!Zx(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const a=ed(e),c=Ng(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=jt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,kg(c,this.history)),this.removeListeners=Ju(Pc(this.contextWindow,"pointermove",this.handlePointerMove),Pc(this.contextWindow,"pointerup",this.handlePointerUp),Pc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Si(this.updatePoint)}}function Ng(t,e){return e?{point:e(t.point)}:t}function IC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kg({point:t},e){return{point:t,delta:IC(t,FA(e)),offset:IC(t,I7(e)),velocity:P7(e,.1)}}function I7(t){return t[0]}function FA(t){return t[t.length-1]}function P7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=FA(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>$r(e)));)n--;if(!r)return{x:0,y:0};const i=Ln(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function A7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ye(n,t,r.max):Math.min(t,n)),t}function PC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O7(t,{top:e,left:n,bottom:r,right:s}){return{x:PC(t.x,n,s),y:PC(t.y,e,r)}}function AC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function D7(t,e){return{x:AC(t.x,e.x),y:AC(t.y,e.y)}}function M7(t,e){let n=.5;const r=Jt(t),s=Jt(e);return s>r?n=mu(e.min,e.max-r,t.min):r>s&&(n=mu(t.min,t.max-s,e.min)),vs(0,1,n)}function L7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qy=.35;function F7(t=Qy){return t===!1?t=0:t===!0&&(t=Qy),{x:OC(t,"left","right"),y:OC(t,"top","bottom")}}function OC(t,e,n){return{min:DC(t,e),max:DC(t,n)}}function DC(t,e){return typeof t=="number"?t:t[e]||0}const $7=new WeakMap;class U7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ed(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:b,onDragStart:y}=this.getProps();if(p&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q9(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pn(v=>{let g=this.getAxisMotionValue(v).get()||0;if(Ur.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[v];S&&(g=Jt(S)*(parseFloat(g)/100))}}this.originPoint[v]=g}),y&&qe.postRender(()=>y(h,f)),Ky(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:b,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(b&&this.currentDirection===null){this.currentDirection=V7(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),x&&x(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Pn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new LA(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:MA(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&qe.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ud(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=A7(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&va(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=O7(r.layoutBox,e):this.constraints=!1,this.elastic=F7(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=L7(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!va(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=BG(r,s.root,this.visualElement.getTransformPagePoint());let o=D7(s.layout.layoutBox,i);if(n){const a=n($G(o));this.hasMutatedConstraints=!!a,a&&(o=bA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Pn(d=>{if(!Ud(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,b={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Ky(this.visualElement,e),r.start(cb(e,r,0,n,this.visualElement,!1))}stopAnimation(){Pn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pn(n=>{const{drag:r}=this.getProps();if(!Ud(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!va(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=M7({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pn(o=>{if(!Ud(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Ye(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;$7.set(this.visualElement,this);const e=this.visualElement.current,n=Pc(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();va(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),qe.read(r);const o=wu(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Pn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Qy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ud(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function V7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class B7 extends Ri{constructor(e){super(e),this.removeGroupControls=$n,this.removeListeners=$n,this.controls=new U7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$n}unmount(){this.removeGroupControls(),this.removeListeners()}}const MC=t=>(e,n)=>{t&&qe.postRender(()=>t(e,n))};class z7 extends Ri{constructor(){super(...arguments),this.removePointerDownListener=$n}onPointerDown(e){this.session=new LA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:MC(e),onStart:MC(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&qe.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Pc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _h={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Tg=!1;class W7 extends m.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),Tg&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Tg=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||qe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Tg=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $A(t){const[e,n]=aA(),r=m.useContext(Px);return l.jsx(W7,{...t,layoutGroup:r,switchLayoutGroup:m.useContext(wA),isPresent:e,safeToRemove:n})}function H7(t,e,n){const r=Vt(t)?t:hl(t);return r.start(cb("",r,e,n)),r.animation}const q7=(t,e)=>t.depth-e.depth;class G7{constructor(){this.children=[],this.isDirty=!1}add(e){Dx(this.children,e),this.isDirty=!0}remove(e){Mx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(q7),this.isDirty=!1,this.children.forEach(e)}}function K7(t,e){const n=ln.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Si(r),t(i-e))};return qe.setup(r,!0),()=>Si(r)}const UA=["TopLeft","TopRight","BottomLeft","BottomRight"],Y7=UA.length,LC=t=>typeof t=="string"?parseFloat(t):t,FC=t=>typeof t=="number"||le.test(t);function Q7(t,e,n,r,s,i){s?(t.opacity=Ye(0,n.opacity??1,J7(r)),t.opacityExit=Ye(e.opacity??1,0,X7(r))):i&&(t.opacity=Ye(e.opacity??1,n.opacity??1,r));for(let o=0;o<Y7;o++){const a=`border${UA[o]}Radius`;let c=$C(e,a),u=$C(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||FC(c)===FC(u)?(t[a]=Math.max(Ye(LC(c),LC(u),r),0),(Ur.test(u)||Ur.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ye(e.rotate||0,n.rotate||0,r))}function $C(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const J7=VA(0,.5,NP),X7=VA(.5,.95,$n);function VA(t,e,n){return r=>r<t?0:r>e?1:n(mu(t,e,r))}function UC(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){UC(t.x,e.x),UC(t.y,e.y)}function VC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BC(t,e,n,r,s){return t-=e,t=Of(t,1/n,r),s!==void 0&&(t=Of(t,1/s,r)),t}function Z7(t,e=0,n=1,r=.5,s,i=t,o=t){if(Ur.test(e)&&(e=parseFloat(e),e=Ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ye(i.min,i.max,r);t===i&&(a-=e),t.min=BC(t.min,e,n,a,s),t.max=BC(t.max,e,n,a,s)}function zC(t,e,[n,r,s],i,o){Z7(t,e[n],e[r],e[s],e.scale,i,o)}const eK=["x","scaleX","originX"],tK=["y","scaleY","originY"];function WC(t,e,n,r){zC(t.x,e,eK,n?n.x:void 0,r?r.x:void 0),zC(t.y,e,tK,n?n.y:void 0,r?r.y:void 0)}function HC(t){return t.translate===0&&t.scale===1}function BA(t){return HC(t.x)&&HC(t.y)}function qC(t,e){return t.min===e.min&&t.max===e.max}function nK(t,e){return qC(t.x,e.x)&&qC(t.y,e.y)}function GC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zA(t,e){return GC(t.x,e.x)&&GC(t.y,e.y)}function KC(t){return Jt(t.x)/Jt(t.y)}function YC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rK{constructor(){this.members=[]}add(e){Dx(this.members,e),e.scheduleRender()}remove(e){if(Mx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sK(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Rg=["","X","Y","Z"],iK=1e3;let oK=0;function jg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function WA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=RA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qe,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&WA(r)}function HA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=oK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cK),this.nodes.forEach(fK),this.nodes.forEach(pK),this.nodes.forEach(uK)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new G7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Fx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=oA(o)&&!X9(o),this.instance=o;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;qe.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,d&&d(),d=K7(f,250),_h.hasAnimatedSinceResize&&(_h.hasAnimatedSinceResize=!1,this.nodes.forEach(XC)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||wK,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=u.getProps(),v=!this.targetLayout||!zA(this.targetLayout,p),g=!h&&f;if(this.options.layoutRoot||this.resumeFrom||g||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Qx(b,"layout"),onPlay:y,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,g)}else h||XC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hK),this.nodes.forEach(aK),this.nodes.forEach(lK)):this.nodes.forEach(JC),this.clearAllSnapshots();const a=ln.now();jt.delta=vs(0,1e3/60,a-jt.timestamp),jt.timestamp=a,jt.isProcessing=!0,yg.update.process(jt),yg.preRender.process(jt),yg.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dK),this.sharedNodes.forEach(gK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jt(this.snapshot.measuredBox.x)&&!Jt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!BA(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Bi(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),xK(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return dt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(bK))){const{scroll:d}=this.root;d&&(ya(a.x,d.offset.x),ya(a.y,d.offset.y))}return a}removeElementScroll(o){var c;const a=dt();if(Gn(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Gn(a,o),ya(a.x,h.offset.x),ya(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const c=dt();Gn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&wa(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Bi(d.latestValues)&&wa(c,d.latestValues)}return Bi(this.latestValues)&&wa(c,this.latestValues),c}removeTransform(o){const a=dt();Gn(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Bi(u.latestValues))continue;Wy(u.latestValues)&&u.updateSnapshot();const d=dt(),h=u.measurePageBox();Gn(d,h),WC(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Bi(this.latestValues)&&WC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=jt.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),R7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),SA(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Wy(this.parent.latestValues)||_A(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Df(this.relativeTargetOrigin,a,c),Gn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Gn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;VG(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VC(this.prevProjectionDelta.x,this.projectionDelta.x),VC(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!YC(this.projectionDelta.x,this.prevProjectionDelta.x)||!YC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xa(),this.projectionDelta=xa(),this.projectionDeltaWithTransform=xa()}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=xa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=dt(),p=c?c.source:void 0,b=this.layout?this.layout.source:void 0,y=p!==b,x=this.getStack(),v=!x||x.members.length<=1,g=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(yK));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const _=S/1e3;ZC(h.x,o.x,_),ZC(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Df(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vK(this.relativeTarget,this.relativeTargetOrigin,f,_),w&&nK(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=dt()),Gn(w,this.relativeTarget)),y&&(this.animationValues=d,Q7(d,u,this.latestValues,_,g,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{_h.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hl(0)),this.currentAnimation=H7(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&qA(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||dt();const h=Jt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Jt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Gn(a,c),wa(a,d),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new rK),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&jg("z",o,u,this.animationValues);for(let d=0;d<Rg.length;d++)jg(`rotate${Rg[d]}`,o,u,this.animationValues),jg(`skew${Rg[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=bh(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=bh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Bi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=sK(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const b in zy){if(d[b]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:v}=zy[b],g=h==="none"?d[b]:y(d[b],u);if(x){const w=x.length;for(let S=0;S<w;S++)o[x[S]]=g}else v?this.options.visualElement.renderState.vars[b]=g:o[b]=g}this.options.layoutId&&(o.pointerEvents=u===this?bh(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(QC),this.root.sharedNodes.clear()}}}function aK(t){t.updateLayout()}function lK(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Pn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Jt(f);f.min=r[h].min,f.max=f.min+p}):qA(i,e.layoutBox,r)&&Pn(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Jt(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=xa();Ac(a,r,e.layoutBox);const c=xa();o?Ac(c,t.applyTransform(s,!0),e.measuredBox):Ac(c,r,e.layoutBox);const u=!BA(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const b=dt();Df(b,e.layoutBox,f.layoutBox);const y=dt();Df(y,r,p.layoutBox),zA(b,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function cK(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dK(t){t.clearSnapshot()}function QC(t){t.clearMeasurements()}function JC(t){t.isLayoutDirty=!1}function hK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function XC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fK(t){t.resolveTargetDelta()}function pK(t){t.calcProjection()}function mK(t){t.resetSkewAndRotation()}function gK(t){t.removeLeadSnapshot()}function ZC(t,e,n){t.translate=Ye(e.translate,0,n),t.scale=Ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function eE(t,e,n,r){t.min=Ye(e.min,n.min,r),t.max=Ye(e.max,n.max,r)}function vK(t,e,n,r){eE(t.x,e.x,n.x,r),eE(t.y,e.y,n.y,r)}function yK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const wK={duration:.45,ease:[.4,0,.1,1]},tE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nE=tE("applewebkit/")&&!tE("chrome/")?Math.round:$n;function rE(t){t.min=nE(t.min),t.max=nE(t.max)}function xK(t){rE(t.x),rE(t.y)}function qA(t,e,n){return t==="position"||t==="preserve-aspect"&&!T7(KC(e),KC(n),.2)}function bK(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const _K=HA({attachResizeListener:(t,e)=>wu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ig={current:void 0},GA=HA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ig.current){const t=new _K({});t.mount(window),t.setOptions({layoutScroll:!0}),Ig.current=t}return Ig.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),SK={pan:{Feature:z7},drag:{Feature:B7,ProjectionNode:GA,MeasureLayout:$A}};function sE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&qe.postRender(()=>i(e,ed(e)))}class CK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=G9(e,(n,r)=>(sE(this.node,r,"Start"),s=>sE(this.node,s,"End"))))}unmount(){}}class EK extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ju(wu(this.node.current,"focus",()=>this.onFocus()),wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function iE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&qe.postRender(()=>i(e,ed(e)))}class NK extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=J9(e,(n,r)=>(iE(this.node,r,"Start"),(s,{success:i})=>iE(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jy=new WeakMap,Pg=new WeakMap,kK=t=>{const e=Jy.get(t.target);e&&e(t)},TK=t=>{t.forEach(kK)};function RK({root:t,...e}){const n=t||document;Pg.has(n)||Pg.set(n,{});const r=Pg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(TK,{root:t,...e})),r[s]}function jK(t,e,n){const r=RK(e);return Jy.set(t,n),r.observe(t),()=>{Jy.delete(t),r.unobserve(t)}}const IK={some:0,all:1};class PK extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:IK[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return jK(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AK(e,n))&&this.startObserver()}unmount(){}}function AK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const OK={inView:{Feature:PK},tap:{Feature:NK},focus:{Feature:EK},hover:{Feature:CK}},DK={layout:{ProjectionNode:GA,MeasureLayout:$A}},MK={..._7,...OK,...SK,...DK},pe=FG(MK,JG);var Ir=function(){return Ir=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ir.apply(this,arguments)};function Ol(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function LK(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function FK(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}const $K=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ub extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class UK extends ub{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oE extends ub{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aE extends ub{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xy||(Xy={}));class VK{constructor(e,{headers:n={},customFetch:r,region:s=Xy.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$K(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return LK(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:c,body:u,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const b=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,b.searchParams.set("forceFunctionRegion",p));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let x=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(x=o.signal,d.addEventListener("abort",()=>o.abort())):x=o.signal);const v=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:x}).catch(_=>{throw new UK(_)}),g=v.headers.get("x-relay-error");if(g&&g==="true")throw new oE(v);if(!v.ok)throw new aE(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield v.json():w==="application/octet-stream"||w==="application/pdf"?S=yield v.blob():w==="text/event-stream"?S=v:w==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof aE||a instanceof oE?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var BK=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},zK=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(n.method!=="HEAD"){var p;const v=await i.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const y=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),x=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&x&&x.length>1&&(c=parseInt(x[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var b;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,d="OK")}catch{i.status===404&&y===""?(u=204,d="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&n.shouldThrowOnError)throw new BK(o)}return{error:o,data:a,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",y=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";a=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${b}`,y&&(a+=` (${y})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},WK=class extends zK{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const lE=new RegExp("[,()]");var Jo=class extends WK{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&lE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&lE.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},HK=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Jo({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(i.length>0){const o=[...new Set(i)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Jo({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Jo({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Jo({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},qK=class KA{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new HK(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new KA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Jo({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class GK{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const KK="2.89.0",YK=`realtime-js/${KK}`,YA="1.0.0",QK="2.0.0",cE=YA,Zy=1e4,JK=1e3,XK=100;var Ms;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ms||(Ms={}));var ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ut||(ut={}));var rr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(rr||(rr={}));var e0;(function(t){t.websocket="websocket"})(e0||(e0={}));var Wi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Wi||(Wi={}));class ZK{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",c=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+o.length+u.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(p),y=0;b.setUint8(y++,this.KINDS.userBroadcastPush),b.setUint8(y++,c.length),b.setUint8(y++,a.length),b.setUint8(y++,o.length),b.setUint8(y++,u.length),b.setUint8(y++,h.length),b.setUint8(y++,n),Array.from(c,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(a,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>b.setUint8(y++,v.charCodeAt(0))),Array.from(h,v=>b.setUint8(y++,v.charCodeAt(0)));var x=new Uint8Array(p.byteLength+r.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(r),p.byteLength),x.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,c]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(e.slice(c,c+s));c=c+s;const d=r.decode(e.slice(c,c+i));c=c+i;const h=r.decode(e.slice(c,c+o));c=c+o;const f=e.slice(c,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,b={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class QA{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const uE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=eY(o,t,e,s),i),{}):{}},eY=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?JA(i,o):t0(o)},JA=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return sY(e,n)}switch(t){case Oe.bool:return tY(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return nY(e);case Oe.json:case Oe.jsonb:return rY(e);case Oe.timestamp:return iY(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return t0(e);default:return t0(e)}},t0=t=>t,tY=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nY=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rY=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},sY=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>JA(e,a))}return t},iY=t=>typeof t=="string"?t.replace(" ","T"):t,XA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ag{constructor(e,n,r={},s=Zy){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dE||(dE={}));class Oc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Oc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Oc.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),b=d.filter(x=>p.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);b.length>0&&(a[u]=b),y.length>0&&(c[u]=y)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hE||(hE={}));var Dc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Dc||(Dc={}));var Jr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Jr||(Jr={}));class ba{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ag(this,rr.join,this.params,this.timeout),this.rejoinTimer=new QA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Oc(this),this.broadcastEndpointURL=XA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Dc.PRESENCE]&&this.bindings[Dc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Jr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Jr.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,v=[];for(let g=0;g<x;g++){const w=y[g],{filter:{event:S,schema:_,table:C,filter:E}}=w,N=p&&p[g];if(N&&N.event===S&&ba.isFilterValueEqual(N.schema,_)&&ba.isFilterValueEqual(N.table,C)&&ba.isFilterValueEqual(N.filter,E))v.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Jr.SUBSCRIBED);return}}).receive("error",p=>{this.state=ut.errored,e==null||e(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===Dc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ag(this,rr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ag(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>XK){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=rr;if(r&&[a,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var b,y,x;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var b,y,x,v,g,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,_=(b=p.filter)===null||b===void 0?void 0:b.event;return S&&((y=n.ids)===null||y===void 0?void 0:y.includes(S))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(g=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:y,table:x,commit_timestamp:v,type:g,errors:w}=b;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:w}),this._getPayloadRecords(b))}p.callback(f,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ba.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rr.close,{},e)}_onError(e){this._on(rr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=uE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=uE(e.columns,e.old_record)),n}}const Og=()=>{},Vd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oY=[1e3,2e3,5e3,1e4],aY=1e4,lY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cY{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zy,this.transport=null,this.heartbeatIntervalMs=Vd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Og,this.ref=0,this.reconnectTimer=null,this.vsn=cE,this.logger=Og,this.conn=null,this.sendBuffer=[],this.serializer=new ZK,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${e0.websocket}`,this.httpEndpoint=XA(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=GK.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return Wi.Connecting;case Ms.open:return Wi.Open;case Ms.closing:return Wi.Closing;default:return Wi.Closed}}isConnected(){return this.connectionState()===Wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ba(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(JK,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Vd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ms.open||this.conn.readyState===Ms.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([lY],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:YK};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new QA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,c,u,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Zy,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Vd.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Og,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:cE,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:b=>oY[b-1]||aY,this.vsn){case YA:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(b,y)=>y(JSON.stringify(b)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(b,y)=>y(JSON.parse(b));break;case QK:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var xu=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function uY(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function dY(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function hY(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=uY(t.baseUrl,r,s),c=await dY(t.auth),u=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const p=h?f:void 0,b=p==null?void 0:p.error;throw new xu((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function Bd(t){return t.join("")}var fY=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Bd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bd(t.namespace)}`}),!0}catch(e){if(e instanceof xu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof xu&&n.status===409)return;throw n}}};function Vo(t){return t.join("")}var pY=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof xu&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof xu&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},mY=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=hY({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new fY(this.client,e),this.tableOps=new pY(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Yp=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var gY=class extends Yp{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},n0=class extends Yp{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const db=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),vY=()=>Response,r0=t=>{if(Array.isArray(t))return t.map(n=>r0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=r0(r)}),e},yY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},wY=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(t)}function xY(t,e){if(bu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bY(t){var e=xY(t,"string");return bu(e)=="symbol"?e:e+""}function _Y(t,e,n){return(e=bY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(n),!0).forEach(function(r){_Y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Dg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},SY=async(t,e,n)=>{t instanceof await vY()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const s=t.status||500,i=(r==null?void 0:r.statusCode)||s+"";e(new gY(Dg(r),s,i))}).catch(r=>{e(new n0(Dg(r),r))}):e(new n0(Dg(t),t))},CY=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(yY(r)?(s.headers=ie({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),ie(ie({},s),n))};async function td(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,CY(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>SY(c,a,r))})}async function _u(t,e,n,r){return td(t,"GET",e,n,r)}async function Zn(t,e,n,r,s){return td(t,"POST",e,r,s,n)}async function s0(t,e,n,r,s){return td(t,"PUT",e,r,s,n)}async function EY(t,e,n,r){return td(t,"HEAD",e,ie(ie({},n),{},{noResolveJson:!0}),r)}async function hb(t,e,n,r,s){return td(t,"DELETE",e,r,s,n)}var NY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}}};let ZA;ZA=Symbol.toStringTag;var kY=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[ZA]="BlobDownloadBuilder",this.promise=null}asStream(){return new NY(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}}};const TY={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var RY=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=db(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var s=this;try{let i;const o=ie(ie({},pE),r);let a=ie(ie({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=ie(ie({},a),r.headers));const u=s._removeEmptyFolders(e),d=s._getFinalPath(u),h=await(t=="PUT"?s0:Zn)(s.fetch,`${s.url}/object/${d}`,i,ie({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c;const u=ie({upsert:pE.upsert},r),d=ie(ie({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await s0(s.fetch,a.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Ge(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const s=ie({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Zn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new Yp("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Zn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async copy(t,e,n){var r=this;try{return{data:{path:(await Zn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,n){var r=this;try{let s=r._getFinalPath(t),i=await Zn(r.fetch,`${r.url}/object/sign/${s}`,ie({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,n){var r=this;try{const s=await Zn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>ie(ie({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>_u(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new kY(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:r0(await _u(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await EY(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ge(r)&&r instanceof n0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await hb(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const s=ie(ie(ie({},TY),e),{},{prefix:t||""});return{data:await Zn(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}}async listV2(t,e){var n=this;try{const r=ie({},t);return{data:await Zn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const e2="2.89.0",t2={"X-Client-Info":`storage-js/${e2}`};var jY=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ie(ie({},t2),e),this.fetch=db(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await _u(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await _u(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Zn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await s0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ge(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Zn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hb(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},IY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ie(ie({},t2),e),this.fetch=db(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Zn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await _u(e.fetch,s,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await hb(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!wY(t))throw new Yp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new mY({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const fb={"X-Client-Info":`storage-js/${e2}`,"Content-Type":"application/json"};var n2=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Sn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Mg=class extends n2{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},PY=class extends n2{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const pb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),AY=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),OY=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";e(new Mg(mE(i),r,o))}).catch(()=>{const i=r+"";e(new Mg(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";e(new Mg(s.statusText||`HTTP ${r} error`,r,i))}}else e(new PY(mE(t),t))},DY=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(AY(r)?(s.headers=ie({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,ie(ie({},s),n)):s};async function MY(t,e,n,r,s,i){return new Promise((o,a)=>{t(n,DY(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>OY(c,a,r))})}async function Cn(t,e,n,r,s){return MY(t,"POST",e,r,s,n)}var LY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ie(ie({},fb),e),this.fetch=pb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Cn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Cn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Sn(r))return{data:null,error:r};throw r}}},FY=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ie(ie({},fb),e),this.fetch=pb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Cn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Cn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Cn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}},$Y=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ie(ie({},fb),e),this.fetch=pb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Cn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Sn(n))return{data:null,error:n};throw n}}},UY=class extends $Y{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new VY(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},VY=class extends LY{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new BY(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},BY=class extends FY{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ie(ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},zY=class extends jY{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new RY(this.url,this.headers,t,this.fetch)}get vectors(){return new UY(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new IY(this.url+"/iceberg",this.headers,this.fetch)}};const r2="2.89.0",Xo=30*1e3,i0=3,Lg=i0*Xo,WY="http://localhost:9999",HY="supabase.auth.token",qY={"X-Client-Info":`gotrue-js/${r2}`},o0="X-Supabase-Api-Version",s2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GY=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,KY=10*60*1e3;class Su extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class YY extends Su{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function QY(t){return Z(t)&&t.name==="AuthApiError"}class Hi extends Su{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class _s extends Su{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class xn extends _s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JY(t){return Z(t)&&t.name==="AuthSessionMissingError"}class Bo extends _s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zd extends _s{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wd extends _s{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XY(t){return Z(t)&&t.name==="AuthImplicitGrantRedirectError"}class gE extends _s{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ZY extends _s{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class a0 extends _s{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Fg(t){return Z(t)&&t.name==="AuthRetryableFetchError"}class vE extends _s{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class l0 extends _s{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yE=` 	
\r=`.split(""),eQ=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yE.length;e+=1)t[yE[e].charCodeAt(0)]=-2;for(let e=0;e<Mf.length;e+=1)t[Mf[e].charCodeAt(0)]=e;return t})();function wE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mf[r]),e.queuedBits-=6}}function i2(t,e,n){const r=eQ[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{rQ(o,r,n)};for(let o=0;o<t.length;o+=1)i2(t.charCodeAt(o),s,i);return e.join("")}function tQ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nQ(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tQ(r,e)}}function rQ(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ua(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)i2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function sQ(t){const e=[];return nQ(t,n=>e.push(n)),new Uint8Array(e)}function Zi(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>wE(s,n,r)),wE(null,n,r),e.join("")}function iQ(t){return Math.round(Date.now()/1e3)+t}function oQ(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",Mi={tested:!1,writable:!1},o2=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mi.tested)return Mi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mi.tested=!0,Mi.writable=!0}catch{Mi.tested=!0,Mi.writable=!1}return Mi.writable};function aQ(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const a2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lQ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Zo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Li=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Et=async(t,e)=>{await t.removeItem(e)};class Qp{constructor(){this.promise=new Qp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Qp.promiseConstructor=Promise;function $g(t){const e=t.split(".");if(e.length!==3)throw new l0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!GY.test(e[r]))throw new l0("JWT not in base64url format");return{header:JSON.parse(xE(e[0])),payload:JSON.parse(xE(e[1])),signature:Ua(e[2]),raw:{header:e[0],payload:e[1]}}}async function cQ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uQ(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function dQ(t){return("0"+t.toString(16)).substr(-2)}function hQ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,dQ).join("")}async function fQ(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pQ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fQ(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zo(t,e,n=!1){const r=hQ();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Zo(t,`${e}-code-verifier`,s);const i=await pQ(r);return[i,r===i?"plain":"s256"]}const mQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gQ(t){const e=t.headers.get(o0);if(!e||!e.match(mQ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vQ(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yQ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wo(t){if(!wQ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ug(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xQ(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function bE(t){return JSON.parse(JSON.stringify(t))}const zi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bQ=[502,503,504];async function _E(t){var e;if(!lQ(t))throw new a0(zi(t),0);if(bQ.includes(t.status))throw new a0(zi(t),t.status);let n;try{n=await t.json()}catch(i){throw new Hi(zi(i),i)}let r;const s=gQ(t);if(s&&s.getTime()>=s2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vE(zi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new xn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new vE(zi(n),t.status,n.weak_password.reasons);throw new YY(zi(n),t.status||500,r)}const _Q=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function se(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[o0]||(i[o0]=s2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await SQ(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function SQ(t,e,n,r,s,i){const o=_Q(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new a0(zi(c),0)}if(a.ok||await _E(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await _E(c)}}function Kn(t){var e;let n=null;NQ(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=iQ(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function SE(t){const e=Kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function zs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CQ(t){return{data:t,error:null}}function EQ(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Ol(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function CE(t){return t}function NQ(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vg=["global","local","others"];class kQ{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=a2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Vg[0]){if(Vg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vg.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Ol(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:EQ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zs})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:CE});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Wo(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zs})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Wo(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Wo(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:zs})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Wo(e.userId);try{const{data:n,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Wo(e.userId),Wo(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:CE});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Z(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Z(n))return{data:null,error:n};throw n}}}function EE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ho={debug:!!(globalThis&&o2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class l2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TQ extends l2{}async function RQ(t,e,n){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new TQ(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ho.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function jQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function c2(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function IQ(t){return parseInt(t,16)}function PQ(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function AQ(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=c2(t.address),b=d?`${d}://${r}`:r,y=t.statement?`${t.statement}
`:"",x=`${b} wants you to sign in with your Ethereum account:
${p}

${y}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);g+=`
- ${w}`}v+=g}return`${x}
${v}`}class ot extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Lf extends ot{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function OQ({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(u2(o)){if(i.rp.id!==o)return new ot({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function DQ({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(u2(r)){if(n.rpId!==r)return new ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class MQ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const LQ=new MQ;function FQ(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Ol(t,["challenge","user","excludeCredentials"]),i=Ua(e).buffer,o=Object.assign(Object.assign({},n),{id:Ua(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ua(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function $Q(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ol(t,["challenge","allowCredentials"]),s=Ua(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ua(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function UQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function VQ(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zi(new Uint8Array(s.authenticatorData)),clientDataJSON:Zi(new Uint8Array(s.clientDataJSON)),signature:Zi(new Uint8Array(s.signature)),userHandle:s.userHandle?Zi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function u2(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function NE(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function BQ(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Lf("Browser returned unexpected credential type",e)}:{data:null,error:new Lf("Empty credential response",e)}}catch(e){return{data:null,error:OQ({error:e,options:t})}}}async function zQ(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Lf("Browser returned unexpected credential type",e)}:{data:null,error:new Lf("Empty credential response",e)}}catch(e){return{data:null,error:DQ({error:e,options:t})}}}const WQ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},HQ={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ff(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=Ff(a,o):r[i]=Ff(o)}else r[i]=o}return r}function qQ(t,e){return Ff(WQ,t,e||{})}function GQ(t,e){return Ff(HQ,t,e||{})}class KQ{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const c=s??LQ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=qQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await BQ({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=GQ(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await zQ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new Hi("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Su("rpId is required for WebAuthn authentication")};try{if(!NE())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new Hi("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Su("rpId is required for WebAuthn registration")};try{if(!NE())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Z(o)?{data:null,error:o}:{data:null,error:new Hi("Unexpected error in register",o)}}}}jQ();const YQ={url:WY,storageKey:HY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qY,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kE(t,e,n){return await n()}const qo={};class Cu{get jwks(){var e,n;return(n=(e=qo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=qo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},YQ),e);if(this.storageKey=i.storageKey,this.instanceID=(n=Cu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Cu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Tt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new kQ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=a2(i.fetch),this.lock=i.lock||kE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Tt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=RQ:this.lock=kE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new KQ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:o2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=EE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=EE(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${r2}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Tt()&&(n=aQ(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Tt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),XY(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Z(n)?this._returnResult({error:n}):this._returnResult({error:new Hi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Kn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await zo(this.storage,this.storageKey)),i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:b},xform:Kn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Kn})}else throw new zd("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:SE})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:SE})}else throw new zd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Bo;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,c,u,d,h,f;let p,b;if("message"in e)p=e.message,b=e.signature;else{const{chain:y,wallet:x,statement:v,options:g}=e;let w;if(Tt())if(typeof x=="object")w=x;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),_=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=c2(_[0]);let E=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const k=await w.request({method:"eth_chainId"});E=IQ(k)}const N={domain:S.host,address:C,statement:v,uri:S.href,version:"1",chainId:E,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=AQ(N),b=await w.request({method:"personal_sign",params:[PQ(p),C]})}try{const{data:y,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Kn});if(x)throw x;if(!y||!y.session||!y.user){const v=new Bo;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Z(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,s,i,o,a,c,u,d,h,f,p;let b,y;if("message"in e)b=e.message,y=e.signature;else{const{chain:x,wallet:v,statement:g,options:w}=e;let S;if(Tt())if(typeof v=="object")S=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),g?{statement:g}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)b=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=C}}try{const{data:x,error:v}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Zi(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Kn});if(v)throw v;if(!x||!x.session||!x.user){const g=new Bo;return this._returnResult({data:{user:null,session:null},error:g})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(Z(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const n=await Li(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new ZY;const{data:i,error:o}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Kn});if(await Et(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Bo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Kn}),{data:c,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Bo;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await zo(this.storage,this.storageKey));const{error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new zd("You must provide either an email or phone number.")}catch(a){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Kn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await zo(this.storage,this.storageKey));const u=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:CQ});return!((i=u.data)===null||i===void 0)&&i.url&&Tt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new xn;const{error:s}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Z(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new zd("You must provide either an email or phone number and a type")}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Lg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Li(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Ug()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=xQ(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zs}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xn}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zs})})}catch(n){if(Z(n))return JY(n)&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new xn;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await zo(this.storage,this.storageKey));const{data:u,error:d}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:zs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=$g(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Z(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new xn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Z(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Tt())throw new Wd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gE("No code detected.");const{data:g,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=e;if(!i||!a||!o||!u)throw new Wd("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Xo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const b=f-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,d);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(r){if(Z(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Li(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(QY(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=oQ(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await zo(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Tt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Z(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:c,access_token:u,nonce:d}=e,h=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kn}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Bo}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Et(this.storage,`${this.storageKey}-code-verifier`),Z(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uQ(async s=>(s>0&&await cQ(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Fg(i)&&Date.now()+o-r<Xo})}catch(r){if(this._debug(n,"error",r),Z(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Li(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Li(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Zo(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Ug()}else if(s&&!s.user&&!s.user){const o=await Li(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Et(this.storage,this.storageKey+"-user"),await Zo(this.storage,this.storageKey,s)):s.user=Ug()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Lg;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Lg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Fg(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new xn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Z(i)){const o={data:null,error:i};return Fg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Et(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zo(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=bE(s);await Zo(this.storage,this.storageKey,i)}else{const s=bE(n);await Zo(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Et(this.storage,this.storageKey),await Et(this.storage,this.storageKey+"-code-verifier"),await Et(this.storage,this.storageKey+"-user"),this.userStorage&&await Et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Xo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Xo}ms, refresh threshold is ${i0} ticks`),s<=i0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof l2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await zo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await se(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?UQ(e.webauthn.credential_response):VQ(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:FQ(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:$Q(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=$g(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new xn})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new xn});const o=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Tt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new xn});const o=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Tt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new xn})})}catch(e){if(Z(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xn})})}catch(n){if(Z(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+KY>s)return r;const{data:i,error:o}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=$g(r);n!=null&&n.allowExpired||vQ(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=yQ(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,sQ(`${a}.${c}`)))throw new l0("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Z(r))return this._returnResult({data:null,error:r});throw r}}}Cu.nextInstanceID={};const QQ=Cu,JQ="2.89.0";let uc="";typeof Deno<"u"?uc="deno":typeof document<"u"?uc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uc="react-native":uc="node";const XQ={"X-Client-Info":`supabase-js-${uc}/${JQ}`},ZQ={headers:XQ},eJ={schema:"public"},tJ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nJ={};function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(t)}function rJ(t,e){if(Eu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sJ(t){var e=rJ(t,"string");return Eu(e)=="symbol"?e:e+""}function iJ(t,e,n){return(e=sJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TE(Object(n),!0).forEach(function(r){iJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const oJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aJ=()=>Headers,lJ=(t,e,n)=>{const r=oJ(n),s=aJ();return async(i,o)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Ze(Ze({},o),{},{headers:u}))}};function cJ(t){return t.endsWith("/")?t:t+"/"}function uJ(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Ze(Ze({},c),s),auth:Ze(Ze({},u),i),realtime:Ze(Ze({},d),o),storage:{},global:Ze(Ze(Ze({},h),a),{},{headers:Ze(Ze({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function dJ(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cJ(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var hJ=class extends QQ{constructor(t){super(t)}},fJ=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=dJ(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:eJ,realtime:nJ,auth:Ze(Ze({},tJ),{},{storageKey:o}),global:ZQ},c=uJ(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=lJ(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new qK(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new zY(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new VK(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hJ({url:this.authUrl.href,headers:Ze(Ze({},f),d),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new cY(this.realtimeUrl.href,Ze(Ze({},t),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const pJ=(t,e,n)=>new fJ(t,e,n);function mJ(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}mJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const gJ="https://tgvqlxyeoahcpplytvfu.supabase.co",vJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRndnFseHllb2FoY3BwbHl0dmZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NDA0OTgsImV4cCI6MjA4MjQxNjQ5OH0.KVT7hbUPTyBfA3pqjuUOd7qN_l4LJPDFXPninndRfek",O=pJ(gJ,vJ,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}},global:{headers:{"x-application-name":"kings-cup-party"}}}),ho={A:{value:"A",title:" 1 ",description:" 1 ",emoji:""},2:{value:"2",title:" 2 ",description:" 2 ",emoji:""},3:{value:"3",title:" 3 ",description:"3 ",emoji:""},4:{value:"4",title:" 4 ",description:"4  ",emoji:""},5:{value:"5",title:" (Buddy)",description:" 1   ",emoji:""},6:{value:"6",title:"",description:" ( , )  /",emoji:""},7:{value:"7",title:" 7",description:"  7  7  ",emoji:""},8:{value:"8",title:"",description:" ",emoji:""},9:{value:"9",title:"",description:"  1 ",emoji:""},10:{value:"10",title:"",description:"  1 ",emoji:""},J:{value:"J",title:"",description:" ",emoji:""},Q:{value:"Q",title:"",description:" ",emoji:""},K:{value:"K",title:"King !",description:" 1-3 ,  4 () !",emoji:""}},yJ=["hearts","diamonds","clubs","spades"],d2=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],c0={hearts:"",diamonds:"",clubs:"",spades:""},u0={hearts:"text-destructive",diamonds:"text-destructive",clubs:"text-paper-foreground",spades:"text-paper-foreground"};function Hd(){const t=[];for(const e of yJ)for(const n of d2)t.push({value:n,suit:e,id:`${n}-${e}`});return t}function qd(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function RE(){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const jE=11;function wJ(t){const e=Array.from({length:jE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*jE)+1:e[Math.floor(Math.random()*e.length)]}function xJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Wt();m.useEffect(()=>{const x=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:v}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!v||v.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const x=O.channel(`room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},v=>{if(v.eventType==="UPDATE"){const g=v.new;e(w=>w?{...w,deck:g.deck||[],current_card:g.current_card,cards_remaining:g.cards_remaining,game_started:g.game_started,is_active:g.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},v=>{v.eventType==="INSERT"?r(g=>g.some(w=>w.id===v.new.id)?g:[...g,v.new]):v.eventType==="DELETE"?r(g=>g.filter(w=>w.id!==v.old.id)):v.eventType==="UPDATE"&&r(g=>g.map(w=>w.id===v.new.id?v.new:w))}).subscribe();return()=>{O.removeChannel(x)}},[t==null?void 0:t.id]);const u=m.useCallback(async x=>{a(!0);try{const v=RE(),g=qd(Hd()),{data:w,error:S}=await O.from("rooms").insert({code:v,host_name:x,deck:g,cards_remaining:52}).select().single();if(S)throw S;const{data:_,error:C}=await O.from("players").insert({room_id:w.id,name:x,is_host:!0}).select().single();if(C)throw C;return e({...w,deck:w.deck,current_card:w.current_card}),r([_]),i(_.id),c({title:"! ",description:`: ${v}`}),{...w,playerId:_.id}}catch(v){return c({title:"",description:v.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(x,v,g)=>{a(!0);try{const{data:w,error:S}=await O.from("rooms").select().eq("code",x.toUpperCase()).eq("is_active",!0).single();if(S||!w)throw new Error(" ");const{data:_}=await O.from("players").select().eq("room_id",w.id).eq("is_active",!0);let C=g?(_||[]).find(k=>k.id===g):null;if(!C){const k=(_||[]).filter(T=>T.name===v);if(k.length>0&&(C=k[0],console.log("Found player with same name, reusing:",C.id),k.length>1)){const T=k.slice(1).map(j=>j.id);await O.from("players").delete().in("id",T)}}let E;if(C)E=C,console.log("Session recovery: found existing player",E.id);else{const k=(_||[]).map(q=>q.avatar).filter(Boolean),T=wJ(k),{data:j,error:I}=await O.from("players").insert({room_id:w.id,name:v,is_host:!1,avatar:T}).select().single();if(I)throw I;E=j}e({...w,deck:w.deck,current_card:w.current_card});const N=new Map;for(const k of _||[])N.set(k.id,k);return N.has(E.id)||N.set(E.id,E),r(Array.from(N.values())),i(E.id),c({title:"! ",description:` ${v}`}),{room:w,playerId:E.id}}catch(w){return c({title:"",description:w.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async()=>{if(!t)return;const x=qd(Hd()),{error:v}=await O.from("rooms").update({game_started:!0,deck:x,cards_remaining:52,current_card:null}).eq("id",t.id);v&&c({title:"",description:v.message,variant:"destructive"})},[t,c]),f=m.useCallback(async()=>{if(!t||t.cards_remaining===0)return;const x=[...t.deck||[]],v=x.pop();if(!v)return;const{error:g}=await O.from("rooms").update({deck:x,current_card:v,cards_remaining:x.length}).eq("id",t.id);g&&c({title:"",description:g.message,variant:"destructive"})},[t,c]),p=m.useCallback(async()=>{if(!t)return;const x=qd(Hd()),{error:v}=await O.from("rooms").update({deck:x,cards_remaining:52,current_card:null}).eq("id",t.id);c(v?{title:"",description:v.message,variant:"destructive"}:{title:"! ",description:""})},[t,c]),b=m.useCallback(async()=>{if(!s||!t)return;await O.from("players").delete().eq("id",s);const{data:x}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!x||x.length===0)&&await O.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),y=m.useCallback(async x=>{a(!0);try{const v=RE(),g=qd(Hd()),{data:w,error:S}=await O.from("rooms").insert({code:v,host_name:x,deck:g,cards_remaining:52,game_started:!0}).select().single();if(S)throw S;const{data:_,error:C}=await O.from("players").insert({room_id:w.id,name:x,is_host:!0}).select().single();if(C)throw C;return e({...w,deck:w.deck,current_card:w.current_card}),r([_]),i(_.id),c({title:" Quick Start!",description:` ${v} `}),w}catch(v){return c({title:"",description:v.message,variant:"destructive"}),null}finally{a(!1)}},[c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,reshuffleDeck:p,leaveRoom:b,quickStart:y}}function bJ(t){return t.value==="A"?1:["10","J","Q","K"].includes(t.value)?0:parseInt(t.value)}function Ws(t){return t.reduce((n,r)=>n+bJ(r),0)%10}function fo(t){if(t.length!==2)return{isPok:!1,pokValue:null};const e=Ws(t);return e===9?{isPok:!0,pokValue:9}:e===8?{isPok:!0,pokValue:8}:{isPok:!1,pokValue:null}}function Nu(t){if(t.length===2){const e=fo(t);if(e.pokValue===9)return{type:"pok9",name:" 9",multiplier:2};if(e.pokValue===8)return{type:"pok8",name:" 8",multiplier:2};const n=t[0].suit===t[1].suit;if(t[0].value===t[1].value)return{type:"pair",name:"",multiplier:2};if(n)return{type:"deng",name:"",multiplier:2}}if(t.length===3){if(t[0].value===t[1].value&&t[1].value===t[2].value)return{type:"tong",name:"",multiplier:5};if(t.every(i=>["J","Q","K"].includes(i.value)))return{type:"samLeung",name:"",multiplier:3};const n=t.map(i=>i.value==="A"?1:i.value==="J"?11:i.value==="Q"?12:i.value==="K"?13:parseInt(i.value)).sort((i,o)=>i-o);if(n[1]===n[0]+1&&n[2]===n[1]+1)return{type:"straight",name:"",multiplier:3};if(t.every(i=>i.suit===t[0].suit))return{type:"flush",name:"",multiplier:3};if(t[0].value===t[1].value||t[1].value===t[2].value||t[0].value===t[2].value)return{type:"deng",name:"",multiplier:3}}return{type:"normal",name:"",multiplier:1}}function _J(t,e){const n=fo(t),r=fo(e),s=Ws(t),i=Ws(e),o=Nu(t),a=Nu(e);return n.isPok&&!r.isPok?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:!n.isPok&&r.isPok?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:n.isPok&&r.isPok?n.pokValue>r.pokValue?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:n.pokValue<r.pokValue?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}:s>i?{result:"player_win",playerMultiplier:o.multiplier,dealerMultiplier:1}:s<i?{result:"dealer_win",playerMultiplier:1,dealerMultiplier:a.multiplier}:{result:"dealer_win",playerMultiplier:1,dealerMultiplier:1}}function Gd(){const t=["hearts","diamonds","clubs","spades"],e=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],n=[];for(const r of t)for(const s of e)n.push({suit:r,value:s});return dc(n)}function dc(t){const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function h2(t){switch(t){case"hearts":return"";case"diamonds":return"";case"clubs":return"";case"spades":return""}}function f2(t){return t==="hearts"||t==="diamonds"?"text-red-500":"text-black"}function IE(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const PE=11;function AE(t){const e=Array.from({length:PE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*PE)+1:e[Math.floor(Math.random()*e.length)]}function SJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Wt();m.useEffect(()=>{const _=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:C}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!C||C.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const _=O.channel(`pokdeng-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},C=>{if(C.eventType==="UPDATE"){const E=C.new;e(N=>N?{...N,deck:E.deck||[],game_started:E.game_started,game_phase:E.game_phase||"waiting",current_player_index:E.current_player_index||0,is_active:E.is_active}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},C=>{if(C.eventType==="INSERT"){const E=C.new;let N=[];try{typeof E.cards=="string"?N=JSON.parse(E.cards):Array.isArray(E.cards)&&(N=E.cards)}catch(k){console.error("Error parsing cards:",k)}r(k=>k.some(T=>T.id===E.id)?k:(setTimeout(()=>{c({title:" ",description:`${E.name} `,duration:3e3})},0),[...k,{...E,cards:N}]))}else if(C.eventType==="DELETE"){const E=C.old;r(N=>{const k=N.find(T=>T.id===E.id);return k&&setTimeout(()=>{c({title:"",description:`${k.name} `,duration:3e3})},0),N.filter(T=>T.id!==E.id)})}else if(C.eventType==="UPDATE"){const E=C.new;let N=[];try{typeof E.cards=="string"?N=JSON.parse(E.cards):Array.isArray(E.cards)&&(N=E.cards)}catch(k){console.error("Error parsing cards:",k)}r(k=>k.map(T=>T.id===E.id?{...E,cards:N}:T))}}).subscribe();return()=>{O.removeChannel(_)}},[t==null?void 0:t.id,c]);const u=m.useCallback(async _=>{a(!0);try{const C=IE(),E=dc(Gd()),N=AE([]),{data:k,error:T}=await O.from("rooms").insert({code:C,host_name:_,deck:E,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting"}).select().single();if(T)throw T;const{data:j,error:I}=await O.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,avatar:N,player_order:0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:k.current_player_index||0}),r([{...j,cards:[]}]),i(j.id),c({title:"! ",description:`: ${C}`}),{...k,playerId:j.id}}catch(C){return c({title:"",description:C.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(_,C,E)=>{a(!0);try{const{data:N,error:k}=await O.from("rooms").select().eq("code",_.toUpperCase()).eq("is_active",!0).eq("game_type","pokdeng").single();if(k||!N)throw new Error(" ");const{data:T}=await O.from("players").select().eq("room_id",N.id).eq("is_active",!0);let j=E?(T||[]).find(V=>V.id===E):null;if(!j){const V=(T||[]).filter(U=>U.name===C);if(V.length>0&&(j=V[0],console.log("Found player with same name, reusing:",j.id),V.length>1)){const U=V.slice(1).map(G=>G.id);await O.from("players").delete().in("id",U)}}let I;if(j)I=j,console.log("Session recovery: found existing player",I.id);else{if(N.game_started)throw new Error(" ");if(((T==null?void 0:T.length)||0)>=8)throw new Error(" ( 8 )");const V=(T||[]).map(L=>L.avatar).filter(Boolean),U=AE(V),{data:G,error:A}=await O.from("players").insert({room_id:N.id,name:C,is_host:!1,avatar:U,is_dealer:!1,player_order:(T==null?void 0:T.length)||0,cards:[],points:0,bet:0,has_drawn:!1}).select().single();if(A)throw A;I=G}e({id:N.id,code:N.code,host_name:N.host_name,is_active:N.is_active,deck:N.deck,game_started:N.game_started,game_phase:N.game_phase||"waiting",current_player_index:N.current_player_index||0});const q=V=>V.map(U=>{let G=[];try{typeof U.cards=="string"?G=JSON.parse(U.cards):Array.isArray(U.cards)&&(G=U.cards)}catch(A){console.error("Error parsing cards for player:",U.name,A)}return{...U,cards:G}}),P=new Map;for(const V of T||[])P.set(V.id,V);return P.has(I.id)||P.set(I.id,I),r(q(Array.from(P.values()))),i(I.id),c({title:"! ",description:` ${C}`}),{room:N,playerId:I.id}}catch(N){return c({title:"",description:N.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async()=>{if(!t||n.length<2)return;const C=[...dc(Gd())];await O.from("rooms").update({game_started:!0,deck:C,game_phase:"dealing",current_player_index:0}).eq("id",t.id);for(let E=0;E<n.length;E++){const N=C.pop();await O.from("players").update({cards:[N],points:Ws([N])}).eq("id",n[E].id),await new Promise(k=>setTimeout(k,500))}for(let E=0;E<n.length;E++){const N=n[E].cards.length>0?[...n[E].cards,C.pop()]:[C.pop(),C.pop()],k=Ws(N);await O.from("players").update({cards:N,points:k,has_drawn:!1,result:null,multiplier:1}).eq("id",n[E].id),await new Promise(T=>setTimeout(T,500))}await O.from("rooms").update({deck:C,game_phase:"drawing"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),f=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(I=>I.id===s);if(!_||_.has_drawn||_.cards.length>=3)return;const C=[...t.deck];if(C.length===0)return;const E=C.pop(),N=[..._.cards,E],k=Ws(N);await O.from("rooms").update({deck:C}).eq("id",t.id),await O.from("players").update({cards:N,points:k,has_drawn:!0}).eq("id",s);const T=n.filter(I=>!I.is_dealer),j=T.findIndex(I=>I.id===s);j<T.length-1?await O.from("rooms").update({current_player_index:j+1}).eq("id",t.id):await O.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),p=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(N=>N.id===s);if(!_||_.has_drawn)return;await O.from("players").update({has_drawn:!0}).eq("id",s);const C=n.filter(N=>!N.is_dealer),E=C.findIndex(N=>N.id===s);E<C.length-1?await O.from("rooms").update({current_player_index:E+1}).eq("id",t.id):await O.from("rooms").update({game_phase:"showdown"}).eq("id",t.id)},[t,s,n]),b=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(T=>T.is_dealer);if(!_||_.id!==s)return;const C=[...t.deck];if(C.length===0||_.cards.length>=3)return;const E=C.pop(),N=[..._.cards,E],k=Ws(N);await O.from("rooms").update({deck:C}).eq("id",t.id),await O.from("players").update({cards:N,points:k,has_drawn:!0}).eq("id",_.id)},[t,s,n]),y=m.useCallback(async()=>{if(!t||!s)return;const _=n.find(C=>C.is_dealer);!_||_.id!==s||_.has_drawn||await O.from("players").update({has_drawn:!0}).eq("id",_.id)},[t,s,n]),x=m.useCallback(async()=>{if(!t)return;const _=n.find(E=>E.is_dealer);if(!_)return;const C=n.map(E=>{if(E.is_dealer)return{id:E.id,result:null,multiplier:1};const N=_J(E.cards,_.cards);return{id:E.id,result:N.result==="player_win"?"player_win":"dealer_win",multiplier:N.playerMultiplier}});for(const E of C)await O.from("players").update({result:E.result,multiplier:E.multiplier}).eq("id",E.id);await O.from("rooms").update({game_phase:"ended"}).eq("id",t.id),c({title:" !",description:""})},[t,n,c]),v=m.useCallback(async()=>{if(!t)return;const C=[...dc(Gd())],E=[...n].sort((j,I)=>j.player_order-I.player_order),k=(E.findIndex(j=>j.is_dealer)+1)%E.length,T=n.map(j=>{const I=[C.pop(),C.pop()],q=Ws(I),P=j.id===E[k].id;return{id:j.id,cards:I,points:q,has_drawn:!1,result:null,multiplier:1,is_dealer:P}});await O.from("rooms").update({deck:C,game_phase:"drawing",current_player_index:0}).eq("id",t.id);for(const j of T)await O.from("players").update({cards:j.cards,points:j.points,has_drawn:j.has_drawn,result:j.result,multiplier:j.multiplier,is_dealer:j.is_dealer}).eq("id",j.id);c({title:" !",description:""})},[t,n,c]),g=m.useCallback(async()=>{if(!s||!t)return;await O.from("players").delete().eq("id",s);const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await O.from("rooms").delete().eq("id",t.id),e(null),r([]),i(null)},[s,t]),w=m.useCallback(async(_,C=!1)=>{a(!0);try{const E=IE(),N=dc(Gd()),{data:k,error:T}=await O.from("rooms").insert({code:E,host_name:_,deck:N,cards_remaining:52,game_type:"pokdeng",game_phase:"waiting",game_started:!1}).select().single();if(T)throw T;if(C)return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([]),i(null),c({title:" LIVE Mode!",description:` ${E}  - `}),k;const{data:j,error:I}=await O.from("players").insert({room_id:k.id,name:_,is_host:!0,is_dealer:!0,player_order:0,cards:[]}).select().single();if(I)throw I;return e({id:k.id,code:k.code,host_name:k.host_name,is_active:k.is_active,deck:k.deck,game_started:k.game_started,game_phase:k.game_phase||"waiting",current_player_index:0}),r([{...j,cards:[]}]),i(j.id),c({title:" Quick Start!",description:` ${E} `}),k}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{a(!1)}},[c]),S=m.useCallback(async _=>{if(t)try{await O.from("players").update({is_dealer:!1}).eq("room_id",t.id).eq("is_dealer",!0),await O.from("players").update({is_dealer:!0}).eq("id",_),c({title:" ",duration:2e3})}catch(C){console.error("Error setting dealer:",C),c({title:" ",variant:"destructive",duration:3e3})}},[t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,createRoom:u,joinRoom:d,startGame:h,drawCard:f,standCard:p,dealerDraw:b,dealerStand:y,showdown:x,nextRound:v,leaveRoom:g,quickStart:w,setDealer:S}}const $f=[{id:1,category:"",word_civilian:"",word_undercover:""},{id:2,category:"",word_civilian:"",word_undercover:""},{id:3,category:"",word_civilian:"",word_undercover:""},{id:4,category:"",word_civilian:"",word_undercover:""},{id:5,category:"",word_civilian:"",word_undercover:""},{id:6,category:"",word_civilian:"",word_undercover:""},{id:7,category:"",word_civilian:"",word_undercover:""},{id:8,category:"",word_civilian:"",word_undercover:""},{id:9,category:"",word_civilian:"",word_undercover:""},{id:10,category:"",word_civilian:"",word_undercover:""},{id:11,category:"",word_civilian:"",word_undercover:""},{id:12,category:"",word_civilian:"",word_undercover:""},{id:13,category:"",word_civilian:"",word_undercover:""},{id:14,category:"",word_civilian:"",word_undercover:""},{id:15,category:"",word_civilian:"",word_undercover:""},{id:16,category:"",word_civilian:"",word_undercover:""},{id:17,category:"",word_civilian:"",word_undercover:""},{id:18,category:"",word_civilian:"",word_undercover:""},{id:19,category:"",word_civilian:"",word_undercover:""},{id:20,category:"",word_civilian:"",word_undercover:""},{id:21,category:"",word_civilian:"",word_undercover:""},{id:22,category:"",word_civilian:"",word_undercover:""},{id:23,category:"",word_civilian:"",word_undercover:""},{id:24,category:"",word_civilian:"",word_undercover:""},{id:25,category:"",word_civilian:"",word_undercover:""},{id:26,category:"",word_civilian:"",word_undercover:""},{id:27,category:"",word_civilian:"",word_undercover:""},{id:28,category:"",word_civilian:"",word_undercover:""},{id:29,category:"",word_civilian:"",word_undercover:""},{id:30,category:"",word_civilian:"",word_undercover:""},{id:31,category:"",word_civilian:"",word_undercover:""},{id:32,category:"",word_civilian:"",word_undercover:""},{id:33,category:"",word_civilian:"",word_undercover:""},{id:34,category:"",word_civilian:"",word_undercover:""},{id:35,category:"",word_civilian:"",word_undercover:""},{id:36,category:"",word_civilian:"",word_undercover:""},{id:37,category:"",word_civilian:"",word_undercover:""},{id:38,category:"",word_civilian:"",word_undercover:""},{id:39,category:"18+",word_civilian:"",word_undercover:""},{id:40,category:"18+",word_civilian:"",word_undercover:""},{id:41,category:"18+",word_civilian:"",word_undercover:""},{id:42,category:"18+",word_civilian:"",word_undercover:""}];function CJ(t){return t<=4||t<=6?1:(t<=8,2)}function EJ(t){let e=$f;return t&&t!==""&&(e=$f.filter(n=>n.category===t)),e[Math.floor(Math.random()*e.length)]}function NJ(t,e,n=!1){const r=CJ(t.length),s=n&&t.length>=5?1:0,i=new Set;for(;i.size<r;)i.add(Math.floor(Math.random()*t.length));const o=new Set;if(s>0)for(;o.size<s;){const a=Math.floor(Math.random()*t.length);i.has(a)||o.add(a)}return t.map((a,c)=>{let u="CIVILIAN",d=e.word_civilian;return i.has(c)?(u="UNDERCOVER",d=e.word_undercover):o.has(c)&&(u="MR_WHITE",d="???"),{id:a.id,name:a.name,avatar:a.avatar,role:u,word:d,is_alive:!0,vote_count:0,has_voted:!1,is_host:a.is_host}})}function kJ(t){const e=t.filter(s=>s.is_alive),n=e.filter(s=>s.role==="UNDERCOVER"),r=e.filter(s=>s.role==="CIVILIAN"||s.role==="MR_WHITE");return n.length>=r.length?{isGameOver:!0,winner:"UNDERCOVER",reason:"! "}:n.length===0?{isGameOver:!0,winner:"CIVILIAN",reason:" ! "}:{isGameOver:!1,winner:null,reason:""}}function TJ(t){const e=t.filter(s=>s.is_alive);if(e.length===0)return null;const n=Math.max(...e.map(s=>s.vote_count));if(n===0)return null;const r=e.filter(s=>s.vote_count===n);return r[Math.floor(Math.random()*r.length)]}function p2(){const t=new Set($f.map(e=>e.category));return["",...Array.from(t)]}let pl=[],RJ=1e3;function Kd(){return[...$f,...pl]}function jJ(t){const e={...t,id:RJ++};return pl.push(e),e}function IJ(t){if(t.id>=1e3){const e=pl.findIndex(n=>n.id===t.id);e!==-1&&(pl[e]=t)}}function PJ(t){t>=1e3&&(pl=pl.filter(e=>e.id!==t))}function AJ(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}const OE=15;function DE(t){const e=Array.from({length:OE},(n,r)=>r+1).filter(n=>!t.includes(n));return e.length===0?Math.floor(Math.random()*OE)+1:e[Math.floor(Math.random()*e.length)]}function OJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState(!1),{toast:c}=Wt();m.useEffect(()=>{const S=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[s,t]),m.useEffect(()=>{if(!(t!=null&&t.id))return;const S=O.channel(`undercover-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},_=>{if(_.eventType==="UPDATE"){const C=_.new;e(E=>E?{...E,game_phase:C.game_phase||"WAITING",current_turn_index:C.current_player_index||0,is_active:C.is_active,vocabulary:C.current_card||null,round:C.cards_remaining||1,timer_seconds:C.timer_seconds||30,include_mr_white:C.include_mr_white||!1,selected_category:C.selected_category||""}:null)}}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},_=>{if(_.eventType==="INSERT"){const C=_.new;r(E=>E.some(N=>N.id===C.id)?E:(setTimeout(()=>{c({title:" ",description:`${C.name} `,duration:3e3})},0),[...E,{id:C.id,name:C.name,avatar:C.avatar,role:C.role||"CIVILIAN",word:C.word||"",is_alive:C.is_alive??!0,vote_count:C.vote_count||0,has_voted:C.has_voted||!1,voted_for:C.voted_for,is_host:C.is_host}]))}else if(_.eventType==="DELETE"){const C=_.old;console.log("DELETE event received for player:",C.id,C.name),r(E=>{const N=E.find(T=>T.id===C.id);N?(console.log("Removing player from list:",N.name),setTimeout(()=>{c({title:"",description:`${N.name} `,duration:3e3})},0)):console.log("Player not found in current list, ID:",C.id);const k=E.filter(T=>T.id!==C.id);return console.log("Players after filter:",k.length,"players"),k})}else if(_.eventType==="UPDATE"){const C=_.new;r(E=>E.map(N=>N.id===C.id?{...N,role:C.role||N.role,word:C.word||N.word,is_alive:C.is_alive??N.is_alive,vote_count:C.vote_count??N.vote_count,has_voted:C.has_voted??N.has_voted,voted_for:C.voted_for}:N))}}).subscribe();return()=>{O.removeChannel(S)}},[t==null?void 0:t.id,c]);const u=m.useCallback(async S=>{a(!0);try{const _=AJ(),C=DE([]),{data:E,error:N}=await O.from("rooms").insert({code:_,host_name:S,game_type:"undercover",game_phase:"WAITING",cards_remaining:1}).select().single();if(N)throw N;const{data:k,error:T}=await O.from("players").insert({room_id:E.id,name:S,is_host:!0,avatar:C,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(T)throw T;return e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,game_phase:"WAITING",current_turn_index:0,vocabulary:null,round:1,timer_seconds:30,include_mr_white:!1,selected_category:""}),r([{id:k.id,name:k.name,avatar:k.avatar,role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,is_host:!0}]),i(k.id),c({title:"!",description:`: ${_}`}),{...E,playerId:k.id}}catch(_){return c({title:"",description:_.message,variant:"destructive"}),null}finally{a(!1)}},[c]),d=m.useCallback(async(S,_,C)=>{a(!0);try{const{data:E,error:N}=await O.from("rooms").select("*").eq("code",S.toUpperCase()).eq("is_active",!0).single();if(N)throw new Error("");const{data:k}=await O.from("players").select("*").eq("room_id",E.id).eq("is_active",!0);let T=C?(k||[]).find(P=>P.id===C):null;if(!T){const P=(k||[]).filter(V=>V.name===_);if(P.length>0&&(T=P[0],console.log("Found player with same name, reusing:",T.id),P.length>1)){const V=P.slice(1).map(U=>U.id);console.log("Cleaning up duplicate players:",V),await O.from("players").delete().in("id",V)}}let j;if(T)j=T,console.log("Session recovery: found existing player",j.id,"is_host:",j.is_host);else{if(E.game_phase!=="WAITING")throw new Error(" ");const P=(k||[]).map(A=>A.avatar),V=DE(P),{data:U,error:G}=await O.from("players").insert({room_id:E.id,name:_,is_host:!1,avatar:V,is_alive:!0,vote_count:0,has_voted:!1}).select().single();if(G)throw G;j=U}e({id:E.id,code:E.code,host_name:E.host_name,is_active:E.is_active,game_phase:E.game_phase||"WAITING",current_turn_index:E.current_player_index||0,vocabulary:E.current_card||null,round:E.cards_remaining||1,timer_seconds:E.timer_seconds||30,include_mr_white:E.include_mr_white||!1,selected_category:E.selected_category||""});const I=new Map;for(const P of k||[])I.set(P.id,P);I.has(j.id)||I.set(j.id,j);const q=Array.from(I.values()).map(P=>({id:P.id,name:P.name,avatar:P.avatar,role:P.role||"CIVILIAN",word:P.word||"",is_alive:P.is_alive??!0,vote_count:P.vote_count||0,has_voted:P.has_voted||!1,is_host:P.is_host}));return console.log("All players after join:",q.map(P=>({name:P.name,is_host:P.is_host}))),r(q),i(j.id),c({title:"!",description:` ${_}`}),{room:E,playerId:j.id}}catch(E){return c({title:"",description:E.message,variant:"destructive"}),null}finally{a(!1)}},[c]),h=m.useCallback(async(S="",_=!1)=>{if(console.log("startGame called with:",{category:S,includeMrWhite:_,room:t,playersCount:n.length}),!t||n.length<4){c({title:"",description:" 4 ",variant:"destructive"});return}try{const C=EJ(S);console.log("Selected vocabulary:",C);const E=NJ(n.map(k=>({id:k.id,name:k.name,avatar:k.avatar,is_host:k.is_host})),C,_);console.log("Assigned roles:",E);for(const k of E){const{error:T}=await O.from("players").update({role:k.role,word:k.word,is_alive:!0,vote_count:0,has_voted:!1}).eq("id",k.id);if(T)throw console.error("Error updating player:",T),T}console.log("Players updated successfully");const{error:N}=await O.from("rooms").update({game_phase:"REVEAL_WORD",current_card:C,current_player_index:0,cards_remaining:1,game_started:!0}).eq("id",t.id);if(N)throw console.error("Error updating room:",N),N;console.log("Room updated successfully"),r(E),c({title:" !",description:""})}catch(C){console.error("Error starting game:",C),c({title:"",description:" ",variant:"destructive"})}},[t,n,c]),f=m.useCallback(async()=>{t&&await O.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0}).eq("id",t.id)},[t]),p=m.useCallback(async()=>{if(!t)return;const S=n.filter(C=>C.is_alive),_=(t.current_turn_index+1)%S.length;await O.from("rooms").update({current_player_index:_}).eq("id",t.id)},[t,n]),b=m.useCallback(async()=>{if(t){for(const S of n)await O.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id);await O.from("rooms").update({game_phase:"VOTING"}).eq("id",t.id)}},[t,n]),y=m.useCallback(async()=>{if(!t)return;const{data:S}=await O.from("players").select("*").eq("room_id",t.id);if(!S)return;const _=S.map(E=>({id:E.id,name:E.name,avatar:E.avatar,role:E.role,word:E.word||"",is_alive:E.is_alive,vote_count:E.vote_count||0,has_voted:E.has_voted||!1,voted_for:E.voted_for,is_host:E.is_host})),C=TJ(_);C&&(await O.from("players").update({is_alive:!1}).eq("id",C.id),c({title:` ${C.name} !`,description:C.role==="UNDERCOVER"?"!":C.role==="MR_WHITE"?"! ":" "})),await O.from("rooms").update({game_phase:"VOTE_RESULT"}).eq("id",t.id)},[t,c]),x=m.useCallback(async S=>{if(!s||!t)return;const _=n.find(k=>k.id===s);if(!_||_.has_voted||!_.is_alive)return;await O.from("players").update({has_voted:!0,voted_for:S}).eq("id",s);const C=n.find(k=>k.id===S);C&&await O.from("players").update({vote_count:(C.vote_count||0)+1}).eq("id",S),c({title:" ",description:` ${C==null?void 0:C.name}`});const E=n.filter(k=>k.is_alive);E.filter(k=>k.has_voted).length+1>=E.length&&await y()},[s,n,t,c,y]),v=m.useCallback(async()=>{if(!t)return;const{data:S}=await O.from("players").select("*").eq("room_id",t.id);if(!S)return;const _=S.map(E=>({id:E.id,name:E.name,avatar:E.avatar,role:E.role,word:E.word||"",is_alive:E.is_alive,vote_count:E.vote_count||0,has_voted:E.has_voted||!1,voted_for:E.voted_for,is_host:E.is_host})),C=kJ(_);if(C.isGameOver)await O.from("rooms").update({game_phase:"FINISHED"}).eq("id",t.id),c({title:C.winner==="CIVILIAN"?" !":"!",description:C.reason});else{await O.from("rooms").update({game_phase:"DESCRIBE",current_player_index:0,cards_remaining:(t.round||1)+1}).eq("id",t.id);for(const E of _)await O.from("players").update({vote_count:0,has_voted:!1,voted_for:null}).eq("id",E.id)}},[t,c]),g=m.useCallback(async()=>{if(t){for(const S of n)await O.from("players").update({role:"CIVILIAN",word:"",is_alive:!0,vote_count:0,has_voted:!1,voted_for:null}).eq("id",S.id);await O.from("rooms").update({game_phase:"WAITING",current_player_index:0,current_card:null,cards_remaining:1,game_started:!1}).eq("id",t.id),c({title:" ",description:"!"})}},[t,n,c]),w=m.useCallback(async()=>{if(!s||!t)return;console.log("Leaving room - deleting player:",s);const{error:S}=await O.from("players").delete().eq("id",s);if(S){console.error("Error deleting player:",S),c({title:"",description:"",variant:"destructive"});return}console.log("Player deleted successfully");const{data:_}=await O.from("players").select("id").eq("room_id",t.id).eq("is_active",!0);(!_||_.length===0)&&(console.log("No remaining players, deleting room"),await O.from("rooms").delete().eq("id",t.id)),e(null),r([]),i(null),c({title:" "})},[s,t,c]);return{room:t,players:n,currentPlayerId:s,isLoading:o,categories:p2(),createRoom:u,joinRoom:d,startGame:h,startDescribePhase:f,nextTurn:p,startVoting:b,votePlayer:x,endVoting:y,checkResultAndContinue:v,restartGame:g,leaveRoom:w}}function DJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Wt();m.useEffect(()=>{const C=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:E}=await O.from("players").select("id").eq("room_id",t.id);(!E||E.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",C),()=>{window.removeEventListener("beforeunload",C)}},[s,t]);const h=m.useCallback(async()=>{const{data:C,error:E}=await O.from("paranoia_questions").select("*").eq("is_default",!1);if(E){console.error("Error fetching questions:",E);return}a(C||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback((C=[])=>{if(o.length===0)return null;const E=o.filter(N=>!C.includes(N.id));return E.length===0?o[Math.floor(Math.random()*o.length)]:E[Math.floor(Math.random()*E.length)]},[o]),p=m.useCallback(()=>{var k;if(n.length===0)return null;const E=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((k=[...n].sort((T,j)=>T.player_order-j.player_order)[E])==null?void 0:k.id)||null},[n,t==null?void 0:t.current_player_index]),b=m.useCallback(async()=>{if(!t)return;const C=t.game_state,E=(C==null?void 0:C.used_question_ids)||[],N=f(E);if(!N){d({title:"Error",description:"No questions available"});return}const k=p();if(!k)return;const T=[...E,N.id],j={phase:"ASKING",asker_id:k,victim_id:null,question:N.question,question_id:N.id,is_revealed:!1,used_question_ids:T},{error:I}=await O.from("rooms").update({game_state:j,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);I&&(console.error("Error starting round:",I),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),y=m.useCallback(async C=>{if(!t||!t.game_state)return;const N={...t.game_state,phase:"REVEALING",victim_id:C},{error:k}=await O.from("rooms").update({game_state:N}).eq("id",t.id);k&&(console.error("Error selecting victim:",k),d({title:"Error",description:"Failed to select victim"}))},[t,d]),x=m.useCallback(async()=>{if(!t||!t.game_state)return;const E={...t.game_state,is_revealed:!0},{error:N}=await O.from("rooms").update({game_state:E}).eq("id",t.id);N&&(console.error("Error revealing question:",N),d({title:"Error",description:"Failed to reveal question"}))},[t,d]),v=m.useCallback(async()=>{await b()},[b]),g=m.useCallback(async C=>{u(!0);try{const E=Math.random().toString(36).substring(2,8).toUpperCase(),{data:N,error:k}=await O.from("rooms").insert({code:E,host_name:C,game_type:"paranoia",game_started:!1,game_state:null,current_player_index:0}).select().single();if(k)throw k;const{data:T,error:j}=await O.from("players").insert({room_id:N.id,name:C,is_host:!0,player_order:0}).select().single();if(j)throw j;return e(N),i(T.id),r([T]),{code:N.code,playerId:T.id}}catch(E){return console.error("Error creating room:",E),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),w=m.useCallback(async(C,E,N)=>{u(!0);try{const{data:k,error:T}=await O.from("rooms").select("*").eq("code",C.toUpperCase()).eq("game_type","paranoia").single();if(T)throw T;const{data:j}=await O.from("players").select("*").eq("room_id",k.id);let I=N?(j||[]).find(V=>V.id===N):null;if(!I){const V=(j||[]).filter(U=>U.name===E);if(V.length>0&&(I=V[0],console.log("Found player with same name, reusing:",I.id),V.length>1)){const U=V.slice(1).map(G=>G.id);await O.from("players").delete().in("id",U)}}let q;if(I)q=I,console.log("Session recovery: found existing player",q.id);else{const{data:V,error:U}=await O.from("players").insert({room_id:k.id,name:E,is_host:!1,player_order:(j==null?void 0:j.length)||0}).select().single();if(U)throw U;q=V}e(k),i(q.id);const P=new Map;for(const V of j||[])P.set(V.id,V);return P.has(q.id)||P.set(q.id,q),r(Array.from(P.values())),{room:k,playerId:q.id}}catch(k){return console.error("Error joining room:",k),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),S=m.useCallback(async()=>{if(!t)return;const{error:C}=await O.from("rooms").update({game_started:!0}).eq("id",t.id);if(C){console.error("Error starting game:",C),d({title:"Error",description:"Failed to start game"});return}await b()},[t,b,d]),_=m.useCallback(async()=>{s&&(await O.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(!t)return;const C=O.channel(`paranoia-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},N=>{N.eventType==="UPDATE"&&e(N.new)}).subscribe(),E=O.channel(`paranoia-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:N}=await O.from("players").select("*").eq("room_id",t.id).order("player_order");r(N||[])}).subscribe();return()=>{O.removeChannel(C),O.removeChannel(E)}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:g,joinRoom:w,startGame:S,startRound:b,selectVictim:y,revealQuestion:x,skipQuestion:v,leaveRoom:_}}function MJ(){const[t,e]=m.useState(null),[n,r]=m.useState([]),[s,i]=m.useState(null),[o,a]=m.useState([]),[c,u]=m.useState(!1),{toast:d}=Wt();m.useEffect(()=>{const _=async()=>{if(s&&t){await O.from("players").delete().eq("id",s);const{data:C}=await O.from("players").select("id").eq("room_id",t.id);(!C||C.length===0)&&await O.from("rooms").delete().eq("id",t.id)}};return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[s,t]);const h=m.useCallback(async()=>{const{data:_,error:C}=await O.from("five_sec_questions").select("*");if(C){console.error("Error fetching questions:",C);return}a(_||[])},[]);m.useEffect(()=>{h()},[h]);const f=m.useCallback(()=>o.length===0?null:o[Math.floor(Math.random()*o.length)],[o]),p=m.useCallback(()=>{var N;if(n.length===0)return null;const C=(((t==null?void 0:t.current_player_index)||0)+1)%n.length;return((N=[...n].sort((k,T)=>k.player_order-T.player_order)[C])==null?void 0:N.id)||null},[n,t==null?void 0:t.current_player_index]),b=m.useCallback(async()=>{var j;if(!t)return;const _=f();if(!_){d({title:"Error",description:"No questions available"});return}const C=p();if(!C)return;const E=((j=t.game_state)==null?void 0:j.timeLimit)||5,N=new Date(Date.now()+E*1e3).toISOString(),k={phase:"PLAYING",player_id:C,topic:_.topic,end_time:N,votes:{},timeLimit:E},{error:T}=await O.from("rooms").update({game_state:k,current_player_index:(t.current_player_index+1)%n.length}).eq("id",t.id);T&&(console.error("Error starting round:",T),d({title:"Error",description:"Failed to start round"}))},[t,n,f,p,d]),y=m.useCallback(async()=>{if(console.log("finishAnswering called",{room:t==null?void 0:t.id,game_state:t==null?void 0:t.game_state}),!t||!t.game_state){console.error("Cannot finish answering: no room or game_state");return}const C={...t.game_state,phase:"JUDGING"};console.log("Updating to JUDGING phase",C);const{error:E,data:N}=await O.from("rooms").update({game_state:C}).eq("id",t.id).select();E?(console.error("Error finishing answering:",E),d({title:"Error",description:"Failed to finish answering"})):console.log("Successfully updated to JUDGING",N)},[t,d]),x=m.useCallback(async _=>{if(!t||!t.game_state||!s)return;const C=t.game_state;if(s===C.player_id)return;const E={...C.votes,[s]:_},N={...C,votes:E},{error:k}=await O.from("rooms").update({game_state:N}).eq("id",t.id);k&&(console.error("Error voting:",k),d({title:"Error",description:"Failed to vote"}))},[t,s,d]),v=m.useCallback(async(_,C=5)=>{u(!0);try{const E=Math.random().toString(36).substring(2,8).toUpperCase(),{data:N,error:k}=await O.from("rooms").insert({code:E,host_name:_,game_type:"fivesec",game_started:!1,game_state:{timeLimit:C},current_player_index:0}).select().single();if(k)throw k;const{data:T,error:j}=await O.from("players").insert({room_id:N.id,name:_,is_host:!0,player_order:0,points:0}).select().single();if(j)throw j;return e(N),i(T.id),r([T]),{code:N.code,playerId:T.id}}catch(E){return console.error("Error creating room:",E),d({title:"Error",description:"Failed to create room"}),null}finally{u(!1)}},[d]),g=m.useCallback(async(_,C,E)=>{u(!0);try{const{data:N,error:k}=await O.from("rooms").select("*").eq("code",_.toUpperCase()).eq("game_type","fivesec").single();if(k)throw k;const{data:T}=await O.from("players").select("*").eq("room_id",N.id);let j=E?(T||[]).find(P=>P.id===E):null;if(!j){const P=(T||[]).filter(V=>V.name===C);if(P.length>0&&(j=P[0],console.log("Found player with same name, reusing:",j.id),P.length>1)){const V=P.slice(1).map(U=>U.id);await O.from("players").delete().in("id",V)}}let I;if(j)I=j,console.log("Session recovery: found existing player",I.id);else{const{data:P,error:V}=await O.from("players").insert({room_id:N.id,name:C,is_host:!1,player_order:(T==null?void 0:T.length)||0,points:0}).select().single();if(V)throw V;I=P}e(N),i(I.id);const q=new Map;for(const P of T||[])q.set(P.id,P);return q.has(I.id)||q.set(I.id,I),r(Array.from(q.values())),{room:N,playerId:I.id}}catch(N){return console.error("Error joining room:",N),d({title:"Error",description:"Failed to join room"}),!1}finally{u(!1)}},[d]),w=m.useCallback(async()=>{if(!t)return;const{error:_}=await O.from("rooms").update({game_started:!0}).eq("id",t.id);if(_){console.error("Error starting game:",_),d({title:"Error",description:"Failed to start game"});return}await b()},[t,b,d]),S=m.useCallback(async()=>{s&&(await O.from("players").delete().eq("id",s),e(null),i(null),r([]))},[s]);return m.useEffect(()=>{if(!t)return;const _=O.channel(`fivesec-room-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${t.id}`},E=>{E.eventType==="UPDATE"&&e(E.new)}).subscribe(),C=O.channel(`fivesec-players-${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${t.id}`},async()=>{const{data:E}=await O.from("players").select("*").eq("room_id",t.id).order("player_order");r(E||[])}).subscribe();return()=>{O.removeChannel(_),O.removeChannel(C)}},[t==null?void 0:t.id]),{room:t,players:n,currentPlayerId:s,isLoading:c,createRoom:v,joinRoom:g,startGame:w,startRound:b,finishAnswering:y,vote:x,leaveRoom:S}}const Nt={PLAYER_ID:"kcp_player_id",PLAYER_NAME:"kcp_player_name",ROOM_CODE:"kcp_room_code",GAME_TYPE:"kcp_game_type",AVATAR:"kcp_avatar"};function ME(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function LJ(){const[t,e]=m.useState({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),[n,r]=m.useState(!0),[s,i]=m.useState(!1);m.useEffect(()=>{(()=>{const d=new URLSearchParams(window.location.search),h=d.get("room"),f=d.get("game"),p=localStorage.getItem(Nt.PLAYER_ID),b=localStorage.getItem(Nt.PLAYER_NAME),y=h||localStorage.getItem(Nt.ROOM_CODE),x=f||localStorage.getItem(Nt.GAME_TYPE),v=localStorage.getItem(Nt.AVATAR),g=v?parseInt(v,10):null;e({playerId:p,playerName:b,roomCode:y,gameType:x,avatar:g});const S=!!(p&&y&&x);i(S),r(!1),S&&console.log("Session found:",{roomCode:y,gameType:x,playerName:b})})()},[]);const o=m.useCallback(u=>{const d={...t,...u};if(d.playerId||(d.playerId=ME()),d.playerId&&localStorage.setItem(Nt.PLAYER_ID,d.playerId),d.playerName&&localStorage.setItem(Nt.PLAYER_NAME,d.playerName),d.roomCode&&localStorage.setItem(Nt.ROOM_CODE,d.roomCode),d.gameType&&localStorage.setItem(Nt.GAME_TYPE,d.gameType),d.avatar!==null&&d.avatar!==void 0&&localStorage.setItem(Nt.AVATAR,d.avatar.toString()),d.roomCode&&d.gameType){const h=new URL(window.location.href);h.searchParams.set("room",d.roomCode),h.searchParams.set("game",d.gameType),window.history.replaceState({},"",h.toString())}e(d),i(!!(d.playerId&&d.roomCode&&d.gameType))},[t]),a=m.useCallback(()=>{localStorage.removeItem(Nt.PLAYER_ID),localStorage.removeItem(Nt.PLAYER_NAME),localStorage.removeItem(Nt.ROOM_CODE),localStorage.removeItem(Nt.GAME_TYPE),localStorage.removeItem(Nt.AVATAR);const u=new URL(window.location.href);u.searchParams.delete("room"),u.searchParams.delete("game"),window.history.replaceState({},"",u.pathname),e({playerId:null,playerName:null,roomCode:null,gameType:null,avatar:null}),i(!1)},[]),c=m.useCallback(()=>{let u=localStorage.getItem(Nt.PLAYER_ID);return u||(u=ME(),localStorage.setItem(Nt.PLAYER_ID,u)),u},[]);return{sessionData:t,isRecovering:n,hasSession:s,saveSession:o,clearSession:a,getOrCreatePlayerId:c}}const FJ=gp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 active:scale-[0.98]",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/5 active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-muted hover:text-foreground active:scale-[0.98]",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 active:scale-[0.98]",glass:"bg-card/80 backdrop-blur border border-border text-foreground hover:bg-card active:scale-[0.98]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Y4:"button";return l.jsx(o,{className:$(FJ({variant:e,size:n,className:t})),ref:i,...s})});M.displayName="Button";const be=m.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));be.displayName="Input";var Bg="focusScope.autoFocusOnMount",zg="focusScope.autoFocusOnUnmount",LE={bubbles:!1,cancelable:!0},$J="FocusScope",mb=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=m.useState(null),u=ft(s),d=ft(i),h=m.useRef(null),f=me(e,y=>c(y)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?h.current=S:As(h.current,{select:!0})},x=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||As(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&As(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const g=new MutationObserver(v);return a&&g.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),g.disconnect()}}},[r,a,p.paused]),m.useEffect(()=>{if(a){$E.add(p);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(Bg,LE);a.addEventListener(Bg,u),a.dispatchEvent(v),v.defaultPrevented||(UJ(HJ(m2(a)),{select:!0}),document.activeElement===y&&As(a))}return()=>{a.removeEventListener(Bg,u),setTimeout(()=>{const v=new CustomEvent(zg,LE);a.addEventListener(zg,d),a.dispatchEvent(v),v.defaultPrevented||As(y??document.body,{select:!0}),a.removeEventListener(zg,d),$E.remove(p)},0)}}},[a,u,d,p]);const b=m.useCallback(y=>{if(!n&&!r||p.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(x&&v){const g=y.currentTarget,[w,S]=VJ(g);w&&S?!y.shiftKey&&v===S?(y.preventDefault(),n&&As(w,{select:!0})):y.shiftKey&&v===w&&(y.preventDefault(),n&&As(S,{select:!0})):v===g&&y.preventDefault()}},[n,r,p.paused]);return l.jsx(ee.div,{tabIndex:-1,...o,ref:f,onKeyDown:b})});mb.displayName=$J;function UJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(As(r,{select:e}),document.activeElement!==n)return}function VJ(t){const e=m2(t),n=FE(e,t),r=FE(e.reverse(),t);return[n,r]}function m2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FE(t,e){for(const n of t)if(!BJ(n,{upTo:e}))return n}function BJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zJ(t){return t instanceof HTMLInputElement&&"select"in t}function As(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&zJ(t)&&e&&t.select()}}var $E=WJ();function WJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=UE(t,e),t.unshift(e)},remove(e){var n;t=UE(t,e),(n=t[0])==null||n.resume()}}}function UE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function HJ(t){return t.filter(e=>e.tagName!=="A")}var Wg=0;function g2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??VE()),document.body.insertAdjacentElement("beforeend",t[1]??VE()),Wg++,()=>{Wg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Wg--}},[])}function VE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sh="right-scroll-bar-position",Ch="width-before-scroll-bar",qJ="with-scroll-bars-hidden",GJ="--removed-body-scroll-bar-size";function Hg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function KJ(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var YJ=typeof window<"u"?m.useLayoutEffect:m.useEffect,BE=new WeakMap;function QJ(t,e){var n=KJ(null,function(r){return t.forEach(function(s){return Hg(s,r)})});return YJ(function(){var r=BE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Hg(a,null)}),i.forEach(function(a){s.has(a)||Hg(a,o)})}BE.set(n,t)},[t]),n}function JJ(t){return t}function XJ(t,e){e===void 0&&(e=JJ);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function ZJ(t){t===void 0&&(t={});var e=XJ(null);return e.options=Ir({async:!0,ssr:!1},t),e}var v2=function(t){var e=t.sideCar,n=Ol(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Ir({},n))};v2.isSideCarExport=!0;function eX(t,e){return t.useMedium(e),v2}var y2=ZJ(),qg=function(){},Jp=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:qg,onWheelCapture:qg,onTouchMoveCapture:qg}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,b=t.noIsolation,y=t.inert,x=t.allowPinchZoom,v=t.as,g=v===void 0?"div":v,w=t.gapMode,S=Ol(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=QJ([n,e]),E=Ir(Ir({},S),s);return m.createElement(m.Fragment,null,d&&m.createElement(_,{sideCar:y2,removeScrollBar:u,shards:h,noRelative:p,noIsolation:b,inert:y,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?m.cloneElement(m.Children.only(a),Ir(Ir({},E),{ref:C})):m.createElement(g,Ir({},E,{className:c,ref:C}),a))});Jp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jp.classNames={fullWidth:Ch,zeroRight:Sh};var tX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tX();return e&&t.setAttribute("nonce",e),t}function rX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function sX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var iX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nX())&&(rX(e,n),sX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oX=function(){var t=iX();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},w2=function(){var t=oX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},aX={left:0,top:0,right:0,gap:0},Gg=function(t){return parseInt(t||"",10)||0},lX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Gg(n),Gg(r),Gg(s)]},cX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aX;var e=lX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uX=w2(),Va="data-scroll-locked",dX=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qJ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Va,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ch,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Sh," .").concat(Sh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Va,`] {
    `).concat(GJ,": ").concat(a,`px;
  }
`)},zE=function(){var t=parseInt(document.body.getAttribute(Va)||"0",10);return isFinite(t)?t:0},hX=function(){m.useEffect(function(){return document.body.setAttribute(Va,(zE()+1).toString()),function(){var t=zE()-1;t<=0?document.body.removeAttribute(Va):document.body.setAttribute(Va,t.toString())}},[])},fX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;hX();var i=m.useMemo(function(){return cX(s)},[s]);return m.createElement(uX,{styles:dX(i,!e,s,n?"":"!important")})},d0=!1;if(typeof window<"u")try{var Yd=Object.defineProperty({},"passive",{get:function(){return d0=!0,!0}});window.addEventListener("test",Yd,Yd),window.removeEventListener("test",Yd,Yd)}catch{d0=!1}var Go=d0?{passive:!1}:!1,pX=function(t){return t.tagName==="TEXTAREA"},x2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pX(t)&&n[e]==="visible")},mX=function(t){return x2(t,"overflowY")},gX=function(t){return x2(t,"overflowX")},WE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=b2(t,r);if(s){var i=_2(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},yX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},b2=function(t,e){return t==="v"?mX(e):gX(e)},_2=function(t,e){return t==="v"?vX(e):yX(e)},wX=function(t,e){return t==="h"&&e==="rtl"?-1:1},xX=function(t,e,n,r,s){var i=wX(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,d=o>0,h=0,f=0;do{if(!a)break;var p=_2(t,a),b=p[0],y=p[1],x=p[2],v=y-x-i*b;(b||v)&&b2(t,a)&&(h+=v,f+=b);var g=a.parentNode;a=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Qd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HE=function(t){return[t.deltaX,t.deltaY]},qE=function(t){return t&&"current"in t?t.current:t},bX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_X=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},SX=0,Ko=[];function CX(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(SX++)[0],i=m.useState(w2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=FK([t.lockRef.current],(t.shards||[]).map(qE),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=Qd(y),g=n.current,w="deltaX"in y?y.deltaX:g[0]-v[0],S="deltaY"in y?y.deltaY:g[1]-v[1],_,C=y.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in y&&E==="h"&&C.type==="range")return!1;var N=WE(E,C);if(!N)return!0;if(N?_=E:(_=E==="v"?"h":"v",N=WE(E,C)),!N)return!1;if(!r.current&&"changedTouches"in y&&(w||S)&&(r.current=_),!_)return!0;var k=r.current||_;return xX(k,x,y,k==="h"?w:S,!0)},[]),c=m.useCallback(function(y){var x=y;if(!(!Ko.length||Ko[Ko.length-1]!==i)){var v="deltaY"in x?HE(x):Qd(x),g=e.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&bX(_.delta,v)})[0];if(g&&g.should){x.cancelable&&x.preventDefault();return}if(!g){var w=(o.current.shards||[]).map(qE).filter(Boolean).filter(function(_){return _.contains(x.target)}),S=w.length>0?a(x,w[0]):!o.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),u=m.useCallback(function(y,x,v,g){var w={name:y,delta:x,target:v,should:g,shadowParent:EX(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),d=m.useCallback(function(y){n.current=Qd(y),r.current=void 0},[]),h=m.useCallback(function(y){u(y.type,HE(y),y.target,a(y,t.lockRef.current))},[]),f=m.useCallback(function(y){u(y.type,Qd(y),y.target,a(y,t.lockRef.current))},[]);m.useEffect(function(){return Ko.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",d,Go),function(){Ko=Ko.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",d,Go)}},[]);var p=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:_X(s)}):null,p?m.createElement(fX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function EX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const NX=eX(y2,CX);var gb=m.forwardRef(function(t,e){return m.createElement(Jp,Ir({},t,{ref:e,sideCar:NX}))});gb.classNames=Jp.classNames;var kX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yo=new WeakMap,Jd=new WeakMap,Xd={},Kg=0,S2=function(t){return t&&(t.host||S2(t.parentNode))},TX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=S2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},RX=function(t,e,n,r){var s=TX(e,Array.isArray(t)?t:[t]);Xd[n]||(Xd[n]=new WeakMap);var i=Xd[n],o=[],a=new Set,c=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(r),b=p!==null&&p!=="false",y=(Yo.get(f)||0)+1,x=(i.get(f)||0)+1;Yo.set(f,y),i.set(f,x),o.push(f),y===1&&b&&Jd.set(f,!0),x===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(e),a.clear(),Kg++,function(){o.forEach(function(h){var f=Yo.get(h)-1,p=i.get(h)-1;Yo.set(h,f),i.set(h,p),f||(Jd.has(h)||h.removeAttribute(r),Jd.delete(h)),p||h.removeAttribute(n)}),Kg--,Kg||(Yo=new WeakMap,Yo=new WeakMap,Jd=new WeakMap,Xd={})}},C2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=kX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),RX(r,s,n,"aria-hidden")):function(){return null}},Xp="Dialog",[E2,$te]=mn(Xp),[jX,vr]=E2(Xp),N2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=m.useRef(null),c=m.useRef(null),[u,d]=pr({prop:r,defaultProp:s??!1,onChange:i,caller:Xp});return l.jsx(jX,{scope:e,triggerRef:a,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};N2.displayName=Xp;var k2="DialogTrigger",T2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(k2,n),i=me(e,s.triggerRef);return l.jsx(ee.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wb(s.open),...r,ref:i,onClick:X(t.onClick,s.onOpenToggle)})});T2.displayName=k2;var vb="DialogPortal",[IX,R2]=E2(vb,{forceMount:void 0}),j2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=vr(vb,e);return l.jsx(IX,{scope:e,forceMount:n,children:m.Children.map(r,o=>l.jsx(In,{present:n||i.open,children:l.jsx(fp,{asChild:!0,container:s,children:o})}))})};j2.displayName=vb;var Uf="DialogOverlay",I2=m.forwardRef((t,e)=>{const n=R2(Uf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=vr(Uf,t.__scopeDialog);return i.modal?l.jsx(In,{present:r||i.open,children:l.jsx(AX,{...s,ref:e})}):null});I2.displayName=Uf;var PX=rl("DialogOverlay.RemoveScroll"),AX=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(Uf,n);return l.jsx(gb,{as:PX,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(ee.div,{"data-state":wb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),To="DialogContent",P2=m.forwardRef((t,e)=>{const n=R2(To,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=vr(To,t.__scopeDialog);return l.jsx(In,{present:r||i.open,children:i.modal?l.jsx(OX,{...s,ref:e}):l.jsx(DX,{...s,ref:e})})});P2.displayName=To;var OX=m.forwardRef((t,e)=>{const n=vr(To,t.__scopeDialog),r=m.useRef(null),s=me(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return C2(i)},[]),l.jsx(A2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:X(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:X(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:X(t.onFocusOutside,i=>i.preventDefault())})}),DX=m.forwardRef((t,e)=>{const n=vr(To,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return l.jsx(A2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),A2=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=vr(To,n),c=m.useRef(null),u=me(e,c);return g2(),l.jsxs(l.Fragment,{children:[l.jsx(mb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(Du,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":wb(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(MX,{titleId:a.titleId}),l.jsx(FX,{contentRef:c,descriptionId:a.descriptionId})]})]})}),yb="DialogTitle",O2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(yb,n);return l.jsx(ee.h2,{id:s.titleId,...r,ref:e})});O2.displayName=yb;var D2="DialogDescription",M2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(D2,n);return l.jsx(ee.p,{id:s.descriptionId,...r,ref:e})});M2.displayName=D2;var L2="DialogClose",F2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=vr(L2,n);return l.jsx(ee.button,{type:"button",...r,ref:e,onClick:X(t.onClick,()=>s.onOpenChange(!1))})});F2.displayName=L2;function wb(t){return t?"open":"closed"}var $2="DialogTitleWarning",[Ute,U2]=G4($2,{contentName:To,titleName:yb,docsSlug:"dialog"}),MX=({titleId:t})=>{const e=U2($2),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},LX="DialogDescriptionWarning",FX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${U2(LX).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},$X=N2,UX=T2,VX=j2,V2=I2,B2=P2,z2=O2,W2=M2,BX=F2;const Wr=$X,ji=UX,zX=VX,H2=m.forwardRef(({className:t,...e},n)=>l.jsx(V2,{ref:n,className:$("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));H2.displayName=V2.displayName;const yr=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(zX,{children:[l.jsx(H2,{}),l.jsxs(B2,{ref:r,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(BX,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[l.jsx(lo,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yr.displayName=B2.displayName;const wr=({className:t,...e})=>l.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});wr.displayName="DialogHeader";const xr=m.forwardRef(({className:t,...e},n)=>l.jsx(z2,{ref:n,className:$("text-lg font-semibold leading-none tracking-tight",t),...e}));xr.displayName=z2.displayName;const Zp=m.forwardRef(({className:t,...e},n)=>l.jsx(W2,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));Zp.displayName=W2.displayName;var WX=m.createContext(void 0);function Dl(t){const e=m.useContext(WX);return t||e||"ltr"}function h0(t,[e,n]){return Math.min(n,Math.max(e,t))}function HX(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var xb="ScrollArea",[q2,Vte]=mn(xb),[qX,zn]=q2(xb),G2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,c]=m.useState(null),[u,d]=m.useState(null),[h,f]=m.useState(null),[p,b]=m.useState(null),[y,x]=m.useState(null),[v,g]=m.useState(0),[w,S]=m.useState(0),[_,C]=m.useState(!1),[E,N]=m.useState(!1),k=me(e,j=>c(j)),T=Dl(s);return l.jsx(qX,{scope:n,type:r,dir:T,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:E,onScrollbarYEnabledChange:N,onCornerWidthChange:g,onCornerHeightChange:S,children:l.jsx(ee.div,{dir:T,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});G2.displayName=xb;var K2="ScrollAreaViewport",Y2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=zn(K2,n),a=m.useRef(null),c=me(e,a,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(ee.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Y2.displayName=K2;var Hr="ScrollAreaScrollbar",bb=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return m.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?l.jsx(GX,{...r,ref:e,forceMount:n}):s.type==="scroll"?l.jsx(KX,{...r,ref:e,forceMount:n}):s.type==="auto"?l.jsx(Q2,{...r,ref:e,forceMount:n}):s.type==="always"?l.jsx(_b,{...r,ref:e}):null});bb.displayName=Hr;var GX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(In,{present:n||i,children:l.jsx(Q2,{"data-state":i?"visible":"hidden",...r,ref:e})})}),KX=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=zn(Hr,t.__scopeScrollArea),i=t.orientation==="horizontal",o=tm(()=>c("SCROLL_END"),100),[a,c]=HX("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),l.jsx(In,{present:n||a!=="hidden",children:l.jsx(_b,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:X(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:X(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Q2=m.forwardRef((t,e)=>{const n=zn(Hr,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=m.useState(!1),a=t.orientation==="horizontal",c=tm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:d)}},10);return ml(n.viewport,c),ml(n.content,c),l.jsx(In,{present:r||i,children:l.jsx(_b,{"data-state":i?"visible":"hidden",...s,ref:e})})}),_b=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=zn(Hr,t.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[a,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=tO(a.viewport,a.content),d={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return eZ(f,o.current,a,p)}return n==="horizontal"?l.jsx(YX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=GE(f,a,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?l.jsx(QX,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=GE(f,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),YX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=zn(Hr,t.__scopeScrollArea),[o,a]=m.useState(),c=m.useRef(null),u=me(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(X2,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":em(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),rO(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Bf(o.paddingLeft),paddingEnd:Bf(o.paddingRight)}})}})}),QX=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=zn(Hr,t.__scopeScrollArea),[o,a]=m.useState(),c=m.useRef(null),u=me(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(X2,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":em(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),rO(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Bf(o.paddingTop),paddingEnd:Bf(o.paddingBottom)}})}})}),[JX,J2]=q2(Hr),X2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,p=zn(Hr,n),[b,y]=m.useState(null),x=me(e,k=>y(k)),v=m.useRef(null),g=m.useRef(""),w=p.viewport,S=r.content-r.viewport,_=ft(d),C=ft(c),E=tm(h,10);function N(k){if(v.current){const T=k.clientX-v.current.left,j=k.clientY-v.current.top;u({x:T,y:j})}}return m.useEffect(()=>{const k=T=>{const j=T.target;(b==null?void 0:b.contains(j))&&_(T,S)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,b,S,_]),m.useEffect(C,[r,C]),ml(b,E),ml(p.content,E),l.jsx(JX,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:ft(i),onThumbPointerUp:ft(o),onThumbPositionChange:C,onThumbPointerDown:ft(a),children:l.jsx(ee.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:X(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),v.current=b.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(k))}),onPointerMove:X(t.onPointerMove,N),onPointerUp:X(t.onPointerUp,k=>{const T=k.target;T.hasPointerCapture(k.pointerId)&&T.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=g.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Vf="ScrollAreaThumb",Z2=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=J2(Vf,t.__scopeScrollArea);return l.jsx(In,{present:n||s.hasThumb,children:l.jsx(XX,{ref:e,...r})})}),XX=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=zn(Vf,n),o=J2(Vf,n),{onThumbPositionChange:a}=o,c=me(e,h=>o.onThumbChange(h)),u=m.useRef(void 0),d=tm(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const p=tZ(h,a);u.current=p,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,a]),l.jsx(ee.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:X(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),b=h.clientX-p.left,y=h.clientY-p.top;o.onThumbPointerDown({x:b,y})}),onPointerUp:X(t.onPointerUp,o.onThumbPointerUp)})});Z2.displayName=Vf;var Sb="ScrollAreaCorner",eO=m.forwardRef((t,e)=>{const n=zn(Sb,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(ZX,{...t,ref:e}):null});eO.displayName=Sb;var ZX=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=zn(Sb,n),[i,o]=m.useState(0),[a,c]=m.useState(0),u=!!(i&&a);return ml(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),ml(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?l.jsx(ee.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Bf(t){return t?parseInt(t,10):0}function tO(t,e){const n=t/e;return isNaN(n)?0:n}function em(t){const e=tO(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function eZ(t,e,n,r="ltr"){const s=em(n),i=s/2,o=e||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return nO([c,u],h)(t)}function GE(t,e,n="ltr"){const r=em(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=h0(t,c);return nO([0,o],[0,a])(u)}function nO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function rO(t,e){return t>0&&t<e}var tZ=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function tm(t,e){const n=ft(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function ml(t,e){const n=ft(e);vt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var sO=G2,nZ=Y2,rZ=eO;const Ml=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(sO,{ref:r,className:$("relative overflow-hidden",t),...n,children:[l.jsx(nZ,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(iO,{}),l.jsx(rZ,{})]}));Ml.displayName=sO.displayName;const iO=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>l.jsx(bb,{ref:r,orientation:e,className:$("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(Z2,{className:"relative flex-1 rounded-full bg-border"})}));iO.displayName=bb.displayName;const oO="admin_floating_names";function zf(){try{const t=localStorage.getItem(oO);return t?JSON.parse(t):[]}catch{return[]}}function f0(t){localStorage.setItem(oO,JSON.stringify(t))}async function nm(){try{const{data:t,error:e}=await O.from("floating_names").select("name").order("created_at",{ascending:!0});return e?(console.error("Error fetching floating names:",e),zf()):(t==null?void 0:t.map(n=>n.name))||[]}catch{return zf()}}async function sZ(t){try{const{error:e}=await O.from("floating_names").insert({name:t});if(e){console.error("Error adding floating name:",e);const n=zf();return n.push(t),f0(n),!1}return!0}catch{const e=zf();return e.push(t),f0(e),!1}}async function iZ(t){try{const{error:e}=await O.from("floating_names").delete().eq("name",t);return e?(console.error("Error removing floating name:",e),!1):!0}catch{return!1}}async function oZ(){try{const{error:t}=await O.from("floating_names").delete().neq("name","");return t?(console.error("Error clearing floating names:",t),!1):(f0([]),!0)}catch{return!1}}const _a="admin_game_covers";function Wf(){try{const t=localStorage.getItem(_a);return t?JSON.parse(t):{}}catch{return{}}}async function p0(){try{const{data:t,error:e}=await O.from("game_covers").select("id, cover_url").not("cover_url","is",null);if(e){console.error("Error fetching game covers from Supabase:",e);const r=Wf();return console.log(" Using localStorage covers:",Object.keys(r)),r}const n={};return t==null||t.forEach(r=>{r.cover_url&&(n[r.id]=r.cover_url)}),console.log(` Loaded ${Object.keys(n).length} covers from Supabase`),n}catch(t){return console.error("Exception loading covers:",t),Wf()}}async function aZ(t,e){const n=Wf();n[t]=e;try{localStorage.setItem(_a,JSON.stringify(n)),console.log(` Saved ${t} to localStorage`)}catch(r){if(r instanceof DOMException&&r.name==="QuotaExceededError"){console.warn(` LocalStorage quota exceeded, saving only ${t}`);try{localStorage.setItem(_a,JSON.stringify({[t]:e}))}catch{return console.error(" Failed to save even single game cover"),!1}}else return console.error(" Error saving to localStorage:",r),!1}try{const{error:r}=await O.from("game_covers").upsert({id:t,cover_url:e,updated_at:new Date().toISOString()},{onConflict:"id"});if(r)return console.error(`Error saving ${t} to Supabase:`,r),console.error(`Data length: ${e.length} characters`),!0;console.log(` Saved ${t} to Supabase`);try{const s=Wf();delete s[t],Object.keys(s).length>0?localStorage.setItem(_a,JSON.stringify(s)):localStorage.removeItem(_a)}catch{}return!0}catch(r){return console.error("Exception saving game cover:",r),!0}}async function lZ(t){try{const{error:e}=await O.from("game_covers").update({cover_url:null,updated_at:new Date().toISOString()}).eq("id",t);return e?(console.error("Error removing game cover:",e),!1):!0}catch{return!1}}async function cZ(){try{const{error:t}=await O.from("game_covers").update({cover_url:null,updated_at:new Date().toISOString()}).not("cover_url","is",null);return t?(console.error("Error clearing game covers:",t),!1):(localStorage.removeItem(_a),!0)}catch{return!1}}function uZ({games:t,onClose:e,onCoversUpdate:n}){const[r,s]=m.useState({}),[i,o]=m.useState(!1),[a,c]=m.useState(null),u=m.useRef({}),{toast:d}=Wt();m.useEffect(()=>{(async()=>{const v=await p0();s(v)})()},[]);const h=x=>new Promise((v,g)=>{const w=new FileReader;w.onload=S=>{var C;const _=new Image;_.onload=()=>{const E=document.createElement("canvas"),N=E.getContext("2d");if(!N){g(new Error("Could not get canvas context"));return}let k=_.width,T=_.height;const j=800,I=1200;if(k>j||T>I){const P=Math.min(j/k,I/T);k=k*P,T=T*P}E.width=k,E.height=T,N.drawImage(_,0,0,k,T);const q=E.toDataURL("image/jpeg",.85);v(q)},_.onerror=()=>g(new Error("Failed to load image")),_.src=(C=S.target)==null?void 0:C.result},w.onerror=()=>g(w.error),w.readAsDataURL(x)}),f=async(x,v)=>{var w;if(console.log(` Uploading ${v.name} for ${x}`,{type:v.type,size:v.size,sizeInMB:(v.size/1024/1024).toFixed(2)+" MB"}),!v.type.startsWith("image/")){d({title:"",description:` ${v.name} `,variant:"destructive"});return}const g=10*1024*1024;if(v.size>g){const S=(v.size/1024/1024).toFixed(2);d({title:"",description:` ${S} MB ( 10 MB)`,variant:"destructive"});return}c(x),o(!0);try{console.log(` Converting ${v.name} to base64...`);const S=await h(v);if(console.log(` Base64 size: ${(S.length/1024).toFixed(2)} KB`),console.log(" Saving to storage..."),await aZ(x,S)){console.log(" Saved successfully!");const C={...r,[x]:S};s(C),n(),d({title:"! ",description:` ${(w=t.find(E=>E.id===x))==null?void 0:w.name} `})}else console.error(" Save failed"),d({title:"",description:" ",variant:"destructive"})}catch(S){console.error(" Upload error:",S),d({title:"",description:S instanceof Error?S.message:"",variant:"destructive"})}finally{o(!1),c(null)}},p=async x=>{o(!0);const v=await lZ(x);if(o(!1),v){const g={...r};delete g[x],s(g),n(),d({title:"",description:""})}else d({title:"",description:"",variant:"destructive"})},b=async()=>{o(!0);const x=await cZ();o(!1),x?(s({}),n(),d({title:"",description:""})):d({title:"",description:"",variant:"destructive"})},y=x=>{var v;(v=u.current[x])==null||v.click()};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-black w-full max-w-2xl rounded-2xl border border-indigo-500/30 shadow-2xl overflow-hidden",children:[l.jsx("div",{className:"bg-indigo-600/30 px-6 py-4 border-b border-indigo-500/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center",children:l.jsx(Kv,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" "}),l.jsx("p",{className:"text-indigo-300 text-sm",children:""})]})]}),l.jsx(M,{variant:"ghost",size:"icon",onClick:e,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(lo,{className:"w-5 h-5"})})]})}),l.jsx(Ml,{className:"h-[60vh]",children:l.jsxs("div",{className:"p-6 space-y-4",children:[t.map(x=>l.jsx("div",{className:"bg-black/30 rounded-xl border border-indigo-500/20 p-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`w-24 h-32 rounded-xl overflow-hidden flex-shrink-0 flex items-center justify-center bg-gradient-to-br ${x.gradient}`,style:r[x.id]?{backgroundImage:`url(${r[x.id]})`,backgroundSize:"cover",backgroundPosition:"center"}:void 0,children:!r[x.id]&&l.jsx("span",{className:"text-5xl",children:x.emoji})}),l.jsxs("div",{className:"flex-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:x.name}),r[x.id]&&l.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>p(x.id),disabled:i,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:[l.jsx(Zc,{className:"w-4 h-4 mr-1"}),""]})]}),l.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:v=>u.current[x.id]=v,onChange:v=>{var w;const g=(w=v.target.files)==null?void 0:w[0];g&&(f(x.id,g),v.target.value="")}}),l.jsx(M,{variant:"secondary",size:"sm",onClick:()=>y(x.id),disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full",children:a===x.id?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(J5,{className:"w-4 h-4 mr-2"}),r[x.id]?"":""]})}),r[x.id]&&l.jsx("p",{className:"text-xs text-green-400",children:" "})]})]})},x.id)),l.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-4",children:l.jsxs("p",{className:"text-indigo-300 text-sm",children:[" ",l.jsx("strong",{children:":"}),"  (JPG, PNG, GIF, WEBP)  10MB"]})})]})}),l.jsx("div",{className:"bg-black/30 px-6 py-4 border-t border-indigo-500/30",children:l.jsxs("div",{className:"flex justify-between",children:[l.jsxs(M,{variant:"outline",onClick:b,disabled:i||Object.keys(r).length===0,className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:[l.jsx(ja,{className:"w-4 h-4 mr-2"}),""]}),l.jsx(M,{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700",children:""})]})})]})})}const dZ=[{id:"doraemon",emoji:"",name:"King's Cup",gradient:"from-red-500 to-orange-500"},{id:"pokdeng",emoji:"",name:"Pok Deng",gradient:"from-emerald-500 to-green-600"},{id:"undercover",emoji:"",name:"Undercover",gradient:"from-purple-600 to-indigo-600"},{id:"paranoia",emoji:"",name:"Paranoia",gradient:"from-pink-500 to-rose-600"},{id:"5-sec",emoji:"",name:"5 Second Rule",gradient:"from-yellow-400 to-orange-500"}];function aO({onClose:t,games:e,onCoversUpdate:n}){const r=e&&e.length>0?e:dZ,[s,i]=m.useState([]),[o,a]=m.useState(""),[c,u]=m.useState(!0),[d,h]=m.useState(!1),[f,p]=m.useState("names");m.useEffect(()=>{b()},[]);const b=async()=>{u(!0);const g=await nm();i(g),u(!1)},y=async()=>{if(!o.trim())return;const g=o.trim();a(""),i(w=>[...w,g]),await sZ(g)},x=async g=>{const w=s[g];i(S=>S.filter((_,C)=>C!==g)),await iZ(w)},v=async()=>{i([]),await oZ()};return d&&r.length>0?l.jsx(uZ,{games:r,onClose:()=>h(!1),onCoversUpdate:()=>{h(!1),n==null||n()}}):l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-black w-full max-w-md rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:[l.jsx("div",{className:"bg-purple-600/30 px-6 py-4 border-b border-purple-500/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center",children:l.jsx(Bn,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:" Admin Panel"}),l.jsx("p",{className:"text-purple-300 text-sm",children:" BONNE"})]})]}),l.jsx(M,{variant:"ghost",size:"icon",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(lo,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"bg-black/20 px-6 py-3 border-b border-purple-500/20 flex gap-2",children:[l.jsxs(M,{variant:f==="names"?"default":"ghost",size:"sm",onClick:()=>p("names"),className:f==="names"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[l.jsx(Bn,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{variant:f==="covers"?"default":"ghost",size:"sm",onClick:()=>p("covers"),className:f==="covers"?"bg-purple-600 text-white":"text-purple-300 hover:text-white hover:bg-purple-600/20",children:[l.jsx(Kv,{className:"w-4 h-4 mr-2"}),""]})]}),f==="names"?l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-white/60 text-sm",children:" Lobby"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{placeholder:"...",value:o,onChange:g=>a(g.target.value),onKeyDown:g=>g.key==="Enter"&&y(),className:"flex-1 bg-white/10 border-purple-500/30 text-white placeholder:text-white/40",maxLength:20}),l.jsx(M,{onClick:y,disabled:!o.trim(),className:"bg-purple-500 hover:bg-purple-600 text-white",children:l.jsx(Fu,{className:"w-4 h-4"})})]}),l.jsx(Ml,{className:"h-48 rounded-lg bg-black/30 border border-purple-500/20",children:l.jsx("div",{className:"p-3 space-y-2",children:c?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Bt,{className:"w-6 h-6 text-purple-400 animate-spin"})}):s.length===0?l.jsx("p",{className:"text-center text-white/40 text-sm py-8",children:""}):s.map((g,w)=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg bg-purple-500/20 border border-purple-500/30",children:[l.jsx("span",{className:"text-white font-medium",children:g}),l.jsx(M,{variant:"ghost",size:"icon",onClick:()=>x(w),className:"w-8 h-8 text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(Zc,{className:"w-4 h-4"})})]},w))})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs(M,{variant:"outline",onClick:v,disabled:s.length===0,className:"flex-1 border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300",children:[l.jsx(Zc,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:t,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white",children:[l.jsx(vp,{className:"w-4 h-4 mr-2"}),""]})]}),l.jsx("div",{className:"text-center pt-2 border-t border-purple-500/20",children:l.jsxs("p",{className:"text-purple-300 text-sm",children:[":"," ",l.jsx("span",{className:"font-bold text-white",children:s.length})," "]})})]}):l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-white/60 text-sm mb-4",children:""})}),l.jsxs(M,{onClick:()=>h(!0),disabled:r.length===0,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-6 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Kv,{className:"w-5 h-5 mr-2"}),""]}),r.length===0&&l.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 text-center",children:l.jsx("p",{className:"text-yellow-300 text-sm",children:"   Admin Panel "})}),l.jsx("div",{className:"bg-black/30 border border-purple-500/20 rounded-lg p-4",children:l.jsxs("p",{className:"text-white/60 text-sm",children:[" ",l.jsx("strong",{children:":"}),"  (  )"]})}),l.jsx(M,{onClick:t,variant:"outline",className:"w-full border-purple-500/30 text-purple-300 hover:bg-purple-500/20",children:""})]})]})})}const kt=["#ff6b6b","#4ecdc4","#ffe66d","#a8e6cf","#ff8b94","#c7ceea","#b5ead7","#ffd3b6","#dcedc1","#a0d2eb","#d4a5a5","#ffaaa5","#ffc6ff","#9bf6ff","#caffbf","#fdffb6","#bdb2ff","#ffc6ff","#a0c4ff","#ffadad"];function Cb({names:t}){const e=m.useRef(null),n=m.useRef([]),r=m.useRef();m.useEffect(()=>{if(t.length===0)return;const i=new Set;n.current=t.map((o,a)=>{let c=kt[a%kt.length],u=0;for(;i.has(c)&&u<kt.length;)c=kt[(a+u)%kt.length],u++;return i.add(c),{x:Math.random()*(window.innerWidth-100),y:Math.random()*(window.innerHeight-30),vx:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),vy:(Math.random()>.5?1:-1)*(.5+Math.random()*.5),color:c,element:null}})},[t]);const s=m.useCallback(()=>{n.current.forEach(i=>{if(!i.element)return;i.x+=i.vx,i.y+=i.vy;const o=i.element.getBoundingClientRect();if(i.x<=0||i.x+o.width>=window.innerWidth){i.vx*=-1,i.x=Math.max(0,Math.min(i.x,window.innerWidth-o.width));const a=kt[Math.floor(Math.random()*kt.length)];i.color=a,i.element.style.color=a,i.element.style.textShadow=`0 0 10px ${a}, 0 0 20px ${a}, 0 0 30px ${a}`}if(i.y<=0||i.y+o.height>=window.innerHeight){i.vy*=-1,i.y=Math.max(0,Math.min(i.y,window.innerHeight-o.height));const a=kt[Math.floor(Math.random()*kt.length)];i.color=a,i.element.style.color=a,i.element.style.textShadow=`0 0 10px ${a}, 0 0 20px ${a}, 0 0 30px ${a}`}i.element.style.transform=`translate(${i.x}px, ${i.y}px)`}),r.current=requestAnimationFrame(s)},[]);return m.useEffect(()=>{if(t.length!==0)return r.current=requestAnimationFrame(s),()=>{r.current&&cancelAnimationFrame(r.current)}},[t,s]),t.length===0?null:l.jsx("div",{ref:e,className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map((i,o)=>{var a,c,u,d;return l.jsxs("div",{ref:h=>{n.current[o]&&(n.current[o].element=h)},className:"fixed text-sm font-bold pointer-events-none whitespace-nowrap",style:{color:((a=n.current[o])==null?void 0:a.color)||kt[o%kt.length],filter:"brightness(1.2) saturate(1.3)",textShadow:`0 0 8px ${((c=n.current[o])==null?void 0:c.color)||kt[o%kt.length]}, 0 0 15px ${((u=n.current[o])==null?void 0:u.color)||kt[o%kt.length]}, 0 0 25px ${((d=n.current[o])==null?void 0:d.color)||kt[o%kt.length]}`,left:0,top:0,willChange:"transform"},children:[o===0&&" ",i]},o)})})}const hZ={th:{back:"",loading:"...",error:"",close:"",save:"",cancel:"",edit:"",delete:"",add:"",search:"",confirm:"",selectGame:"",selectGamePrompt:"",kingsCup:"",kingsCupDesc:"King's Cup - ",kingsCupSubtitle:"",pokDeng:"",pokDengDesc:"Pok Deng - ",undercover:"Undercover",undercoverDesc:" - ",partyMotto:" ",liveMode:"LIVE",liveModeDesc:"Host  ",enterNameToStart:"",enterCodeAndName:"",roomCodePlaceholder:" (6 )",quickStartDesc:"!",themeChange:"",themeSelectTheme:"",createRoom:"",joinRoom:"",roomCode:"",yourName:"",enterName:"...",enterCode:" 6 ...",createNewRoom:"",joinRoomBtn:"",quickStart:" ",creating:"...",joining:"...",room:"",waitingForPlayers:"",players:"",host:"Host",leaveRoom:"",startGame:"",minPlayers:"",people:"",undercoverTitle:"Undercover",undercoverSubtitle:" - !",category:"",allCategories:"",includeMrWhite:" (Mr. White)",revealWord:"",holdToReveal:" (!)",yourWord:":",holdToView:"",role:"",startDescribe:"",describePhase:"",describeRound:"",turn:"",nextPlayer:"",nextPerson:"",startVoting:"",voting:"!",vote:"",waitingForOthers:"...",selectSpy:"",selectSuspect:"",voteResult:"",votes:"",continue:"",gameOver:"",finalResult:"",restartGame:"",civilian:"",spy:"",gameStarted:" !",eliminated:"!",waitingPlayers:"",playersInRoom:"",needMinPlayers:" 4 ",seeYourWord:"",tapToReveal:" (!)",yourWordIs:"",holdToSee:"",alivePlayers:"",manageWords:"",vocabularyManager:"",addWord:"",editWord:"",editVocabulary:"",addVocabulary:"",addNewWord:"",categoryName:"",categoryPlaceholder:" , ",civilianWord:"",civilianPlaceholder:"",undercoverWord:"",undercoverPlaceholder:"",searchWords:"...",searchVocabulary:"...",noWords:"",noWordsFound:"",noVocabularyFound:"",noVocabularyYet:" ",addWordToStart:"",cannotEditDefault:"",cannotDeleteDefault:"",words:"",invalidName:"",nameTooShort:" ( 2 )",nameTooLong:" ( 20 )",nameContainsBadWords:"",roomNotFound:"",gameAlreadyStarted:" ",pokDengTitle:" ",pokDengSubtitle:"!",bet:"",draw:"",stand:"",showdown:"",nextRound:"",dealer:"",setDealer:"",points:"",multiplier:"",winner:"",roomCreated:"! ",roomJoined:"! ",playerJoined:" ",playerLeft:" ",leftRoom:" ",voted:" ",youVotedFor:""},en:{back:"Back",loading:"Loading...",error:"Error",close:"Close",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",search:"Search",confirm:"Confirm",selectGame:"Select Game",selectGamePrompt:"Choose a game to play",kingsCup:"King's Cup",kingsCupDesc:"King's Cup - Drinking Game",kingsCupSubtitle:"Drink till you drop!",pokDeng:"Pok Deng",pokDengDesc:"Pok Deng - Card Game",undercover:"Undercover",undercoverDesc:"Find the Spy - Detective Game",partyMotto:"Drink for fun, Party til' dawn",liveMode:"LIVE",liveModeDesc:"Host shares screen, players use phones",enterNameToStart:"Enter your name to start",enterCodeAndName:"Enter room code and your name",roomCodePlaceholder:"Room Code (6 digits)",quickStartDesc:"Enter your name and start playing!",themeChange:"Change Theme",themeSelectTheme:"Select Theme",createRoom:"Create Room",joinRoom:"Join Room",roomCode:"Room Code",yourName:"Your Name",enterName:"Enter name...",enterCode:"Enter 6-digit code...",createNewRoom:"Create New Room",joinRoomBtn:" Join Room",quickStart:" Quick Start",creating:"Creating...",joining:"Joining...",room:"Room",waitingForPlayers:"Waiting for players",players:"Players",host:"Host",leaveRoom:"Leave Room",startGame:"Start Game",minPlayers:"Need at least",people:"players",undercoverTitle:"Undercover",undercoverSubtitle:"Find the impostor among you!",category:"Category",allCategories:"All",includeMrWhite:"Include Mr. White",revealWord:"Reveal Your Word",holdToReveal:"Hold to reveal (Don't let others see!)",yourWord:"Your word is:",holdToView:"Hold to view word",role:"Role",startDescribe:"Start Describing",describePhase:"Round",describeRound:"Describe Round",turn:"Turn",nextPlayer:"Next",nextPerson:"Next Person",startVoting:"Start Voting",voting:"Vote!",vote:"Vote",waitingForOthers:"Waiting for others...",selectSpy:"Select who you think is the spy",selectSuspect:"Select who you think is the spy",voteResult:"Vote Result",votes:"votes",continue:"Continue",gameOver:"Game Over",finalResult:"Final Result",restartGame:"Restart Game",civilian:"Civilian",spy:"Undercover",gameStarted:" Game Started!",eliminated:"has been eliminated!",waitingPlayers:"Waiting for players",playersInRoom:"Players in Room",needMinPlayers:"Need at least 4 players",seeYourWord:"See Your Word",tapToReveal:"Hold to reveal (Don't let others see!)",yourWordIs:"Your word is",holdToSee:"Hold to see word",alivePlayers:"Alive Players",manageWords:"Manage Words",vocabularyManager:"Vocabulary Manager",addWord:"Add Word",editWord:"Edit Vocabulary",editVocabulary:"Edit Vocabulary",addVocabulary:"Add New Vocabulary",addNewWord:"Add New Vocabulary",categoryName:"Category",categoryPlaceholder:"e.g. Food, Places",civilianWord:"Civilian Word",civilianPlaceholder:"Word for civilians",undercoverWord:"Undercover Word",undercoverPlaceholder:"Word for undercover",searchWords:"Search words...",searchVocabulary:"Search vocabulary...",noWords:"No vocabularies yet",noWordsFound:"No matching vocabularies found",noVocabularyFound:"No matching vocabularies found",noVocabularyYet:"No vocabularies yet. Click Add Word to get started",addWordToStart:"Click Add Word to get started",cannotEditDefault:"Cannot edit default words",cannotDeleteDefault:"Cannot delete default words",words:"words",invalidName:"Invalid name",nameTooShort:"Name too short (minimum 2 characters)",nameTooLong:"Name too long (maximum 20 characters)",nameContainsBadWords:"Please use an appropriate name",roomNotFound:"Room not found",gameAlreadyStarted:"Game already started, cannot join",pokDengTitle:" Pok Deng",pokDengSubtitle:"Thai card game!",bet:"Bet",draw:"Draw",stand:"Stand",showdown:"Showdown",nextRound:"Next Round",dealer:"Dealer",setDealer:"Set as Dealer",points:"Points",multiplier:"x",winner:"Winner",roomCreated:"Room created successfully! ",roomJoined:"Joined room successfully! ",playerJoined:" New player joined",playerLeft:" Player left",leftRoom:" Left room",voted:" Voted",youVotedFor:"You voted for"}};let Hf="th";function fZ(t){Hf=t,typeof window<"u"&&localStorage.setItem("language",t)}function qf(){if(typeof window<"u"){const t=localStorage.getItem("language");(t==="th"||t==="en")&&(Hf=t)}return Hf}function B(t){return hZ[Hf][t]}typeof window<"u"&&qf();const pZ=["","","","","","","","","","","","","","fuck","shit","bitch","ass","damn","hell","dick","pussy","cock","cunt","bastard","nazi","hitler","xxx","porn","sex"];function Gf(t){const e=t.trim();if(e.length<2)return{isValid:!1,error:"nameTooShort"};if(e.length>20)return{isValid:!1,error:"nameTooLong"};const n=e.toLowerCase();for(const s of pZ)if(n.includes(s.toLowerCase()))return{isValid:!1,error:"nameContainsBadWords"};return/[a-zA-Z0-9-]/.test(e)?{isValid:!0}:{isValid:!1,error:"invalidName"}}function mZ({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const[i,o]=m.useState("menu"),[a,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(""),[p,b]=m.useState(!1),[y,x]=m.useState(!1),[v,g]=m.useState([]),w=m.useRef(""),{toast:S}=Wt();m.useEffect(()=>{(async()=>{const k=await nm();g(k)})()},[y]),m.useEffect(()=>{const N=k=>{if(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)return;const T=k.key.toLowerCase(),j=w.current+T;"adminhee444".startsWith(j)?(w.current=j,j==="adminhee444"&&n&&(w.current="",b(!0))):w.current="adminhee444".startsWith(T)?T:""};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[n]);const _=async()=>{if(!a.trim())return;const N=Gf(a);if(!N.isValid){S({title:B("error"),description:N.error||B("invalidName"),variant:"destructive"});return}await t(a.trim())},C=async()=>{if(!a.trim()||!u.trim())return;if(u.trim()==="777777"&&a.trim().toUpperCase()==="BONNE"){x(!0);return}const N=Gf(a);if(!N.isValid){S({title:B("error"),description:N.error||B("invalidName"),variant:"destructive"});return}await e(u.trim(),a.trim())},E=async()=>{!h.trim()||!n||(await n(h.trim()),b(!1),f(""))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx(Cb,{names:v}),y&&l.jsx(aO,{onClose:()=>x(!1)}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&l.jsx("div",{className:"absolute top-4 left-4 z-20",children:l.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(Ra,{className:"w-5 h-5 rotate-180"})})}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:["",B("kingsCup")]}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("kingsCupSubtitle")})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[i==="menu"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>o("create"),children:[l.jsx(Fu,{className:"w-5 h-5"}),B("createNewRoom")]}),l.jsx("p",{className:"text-white/50 text-xs text-center"})]}),l.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>o("join"),children:[l.jsx(Bn,{className:"w-5 h-5"}),B("joinRoom")]}),n&&l.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[l.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>b(!0),disabled:r,children:[l.jsx(Jh,{className:"w-5 h-5"})," ",B("liveMode")]}),l.jsx("p",{className:"text-white/50 text-xs text-center",children:B("liveModeDesc")})]})]}),i==="create"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("createNewRoom")}),l.jsx("p",{className:"text-white/60 text-sm",children:B("enterNameToStart")})]}),l.jsx(be,{placeholder:B("yourName"),value:a,onChange:N=>c(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:B("back")}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:_,disabled:!a.trim()||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[B("createRoom"),l.jsx(Ra,{className:"w-4 h-4"})]})})]})]}),i==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:B("joinRoom")}),l.jsx("p",{className:"text-white/60 text-sm",children:B("enterCodeAndName")})]}),l.jsx(be,{placeholder:B("roomCodePlaceholder"),value:u,onChange:N=>d(N.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),l.jsx(be,{placeholder:B("yourName"),value:a,onChange:N=>c(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:B("back")}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:C,disabled:!a.trim()||u.length!==6||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[B("joinRoom"),l.jsx(Ra,{className:"w-4 h-4"})]})})]})]})]}),l.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:B("partyMotto")}),l.jsx(Wr,{open:p,onOpenChange:b,children:l.jsxs(yr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[l.jsxs(wr,{children:[l.jsx(xr,{className:"text-center text-white",children:B("quickStart")}),l.jsx(Zp,{className:"text-center text-white/60",children:B("quickStartDesc")})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsx(be,{placeholder:"",value:h,onChange:N=>f(N.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&h.trim()&&E()}}),l.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:E,disabled:!h.trim()||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Jh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function rm({className:t}){return l.jsxs("div",{className:$("absolute inset-0 overflow-hidden",t),children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),l.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("defs",{children:l.jsx("pattern",{id:"diamond-pattern",x:"0",y:"0",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:l.jsx("path",{d:"M10 0L20 10L10 20L0 10Z",fill:"white",opacity:"0.5"})})}),l.jsx("rect",{width:"100%",height:"100%",fill:"url(#diamond-pattern)"})]}),l.jsx("div",{className:"absolute inset-2 sm:inset-3 rounded-lg border-2 border-white/20"}),l.jsx("div",{className:"absolute inset-3 sm:inset-4 rounded-md border border-white/10"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 rounded-full border-2 border-white/30 flex items-center justify-center",children:l.jsx("div",{className:"w-12 h-12 sm:w-18 sm:h-18 rounded-full border border-white/20 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-white font-bold text-lg sm:text-2xl leading-none",children:""}),l.jsx("div",{className:"text-white/60 text-[8px] sm:text-xs mt-0.5",children:"K's Cup"})]})})}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[l.jsx("div",{className:"absolute w-20 sm:w-28 h-0.5 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),l.jsx("div",{className:"absolute w-0.5 h-20 sm:h-28 bg-gradient-to-b from-transparent via-white/20 to-transparent"})]})]})})]})}function gZ({value:t,suit:e}){const n=c0[e],r=u0[e];return(()=>{switch(t){case"A":return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("span",{className:$("text-7xl sm:text-8xl",r),children:n})});case"2":return l.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"3":return l.jsxs("div",{className:"flex flex-col justify-between items-center h-full py-4",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]});case"4":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]})]});case"5":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n}),l.jsx("span",{className:$("text-3xl sm:text-4xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:$("text-3xl sm:text-4xl",r),children:n})})]});case"6":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]})]});case"7":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-4 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-1/3 flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n})})]});case"8":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-8 h-full py-3 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n}),l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-[30%] flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl",r),children:n})}),l.jsx("div",{className:"absolute inset-x-0 bottom-[30%] flex items-center justify-center",children:l.jsx("span",{className:$("text-2xl sm:text-3xl rotate-180",r),children:n})})]});case"9":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n})})]});case"10":return l.jsxs("div",{className:"grid grid-cols-2 gap-x-6 h-full py-2 relative",children:[l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsxs("div",{className:"flex flex-col justify-between items-center",children:[l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n}),l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})]}),l.jsx("div",{className:"absolute inset-x-0 top-[25%] flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl",r),children:n})}),l.jsx("div",{className:"absolute inset-x-0 bottom-[25%] flex items-center justify-center",children:l.jsx("span",{className:$("text-xl sm:text-2xl rotate-180",r),children:n})})]});case"J":case"Q":case"K":return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:$("text-6xl sm:text-7xl font-bold",r),children:t}),l.jsx("div",{className:$("text-4xl sm:text-5xl mt-1",r),children:n})]})});default:return l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsx("span",{className:$("text-6xl sm:text-7xl",r),children:n})})}})()}function KE({card:t,isFlipped:e=!0,size:n="lg",showRule:r=!1}){const s={sm:"w-16 h-24",md:"w-24 h-36",lg:"w-32 h-48 sm:w-44 sm:h-64 md:w-52 md:h-72",large:"w-56 h-80 sm:w-72 sm:h-[26rem] md:w-80 md:h-[30rem]"},i={sm:"text-sm",md:"text-lg",lg:"text-xl sm:text-2xl md:text-3xl",large:"text-3xl sm:text-4xl md:text-5xl"},o={sm:"text-sm",md:"text-lg",lg:"text-lg sm:text-xl md:text-2xl",large:"text-2xl sm:text-3xl md:text-4xl"};if(!t)return l.jsx("div",{className:$(s[n],"rounded-xl bg-muted border-2 border-dashed border-border flex items-center justify-center"),children:l.jsx("span",{className:"text-muted-foreground text-3xl",children:"?"})});const a=ho[t.value];return l.jsxs("div",{className:"card-flip",children:[l.jsxs("div",{className:$("card-inner relative",s[n],e&&"flipped"),children:[l.jsx("div",{className:$("card-face rounded-xl overflow-hidden shadow-xl",s[n]),children:l.jsx(rm,{})}),l.jsxs("div",{className:$("card-face card-back rounded-xl bg-paper border border-paper-border shadow-xl overflow-hidden",s[n]),children:[l.jsxs("div",{className:$("absolute top-2 left-2 sm:top-3 sm:left-3 flex flex-col items-center",u0[t.suit]),children:[l.jsx("span",{className:$("font-bold leading-none",i[n]),children:t.value}),l.jsx("span",{className:$("leading-none",o[n]),children:c0[t.suit]})]}),l.jsx("div",{className:"absolute inset-0 px-8 py-10 sm:px-10 sm:py-12",children:l.jsx(gZ,{value:t.value,suit:t.suit})}),l.jsxs("div",{className:$("absolute bottom-2 right-2 sm:bottom-3 sm:right-3 flex flex-col items-center rotate-180",u0[t.suit]),children:[l.jsx("span",{className:$("font-bold leading-none",i[n]),children:t.value}),l.jsx("span",{className:$("leading-none",o[n]),children:c0[t.suit]})]})]})]}),r&&e&&a&&l.jsx("div",{className:"mt-6 text-center max-w-xs mx-auto",children:l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-5 border border-white/10",children:[l.jsx("div",{className:"text-4xl mb-3",children:a.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:a.title}),l.jsx("p",{className:"text-white/70",children:a.description})]})})]})}function m0(){return l.jsxs("div",{className:"flex flex-col items-center justify-center py-4 select-none",children:[l.jsx(pe.div,{animate:{scale:[1,1.15,1],opacity:[.8,1,.8]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"mb-3",children:l.jsx("span",{className:"text-5xl sm:text-6xl block",children:""})}),l.jsx(pe.p,{animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"text-white/70 text-sm sm:text-base font-medium",children:"..."})]})}function lO({players:t,currentPlayerId:e}){return l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[l.jsxs("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:[l.jsx(Z5,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"}),l.jsxs("span",{className:"text-white",children:[" (",t.length,")"]})]}),l.jsx("div",{className:"flex gap-2 sm:gap-3 overflow-x-auto sm:flex-wrap sm:overflow-visible pb-2 sm:pb-0 -mx-1 px-1 scrollbar-hide",children:t.map(n=>l.jsxs("div",{className:$("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0 min-w-[70px] sm:min-w-[90px]",n.id===e?"bg-white text-black ring-2 ring-amber-400":"bg-white/10 text-white hover:bg-white/20"),children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:`/king-s-cup-party/${n.avatar||1}.jpg`,alt:n.name,className:"w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-full object-cover border-2 sm:border-3 border-white/40 shadow-lg"}),n.is_host&&l.jsx(Yh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"})]}),l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("span",{className:"truncate max-w-[60px] sm:max-w-[80px]",children:n.name}),n.id===e&&l.jsx("span",{className:"text-[10px] sm:text-xs opacity-60",children:"()"})]})]},n.id))})]})}function vZ({cardsRemaining:t,onDraw:e,disabled:n,showCount:r=!0}){const s=m.useMemo(()=>Array.from({length:8}).map(()=>({rotation:(Math.random()-.5)*6,offsetX:(Math.random()-.5)*4,offsetY:(Math.random()-.5)*2})),[]),i=Math.min(Math.ceil(t/7),8);return t===0?l.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64 rounded-xl border-2 border-dashed border-white/20 flex items-center justify-center bg-black/20 backdrop-blur-sm",children:l.jsx("span",{className:"text-white/50 text-sm sm:text-lg",children:""})}):l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative w-28 h-40 sm:w-36 sm:h-52 md:w-44 md:h-64",children:Array.from({length:i}).map((o,a)=>{const c=a===i-1,u=s[a];return l.jsx("div",{className:$("absolute w-full h-full rounded-xl transition-all duration-200 overflow-hidden","shadow-lg",c&&!n&&"hover:scale-[1.03] hover:-translate-y-2 cursor-pointer hover:shadow-xl"),style:{bottom:`${a*2}px`,transform:`rotate(${u.rotation}deg) translateX(${u.offsetX}px)`,zIndex:a},onClick:c&&!n?e:void 0,children:l.jsx(rm,{})},a)})}),r&&l.jsxs("div",{className:"absolute -top-8 sm:-top-10 left-1/2 -translate-x-1/2 px-3 sm:px-4 py-1 sm:py-1.5 rounded-full bg-black/60 backdrop-blur-sm text-xs sm:text-sm font-medium border border-white/10 z-20",children:[l.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:t}),l.jsx("span",{className:"text-white/60 ml-1",children:""})]})]})}const cO=m.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));cO.displayName="Textarea";const Yg="custom_rules_";function uO(t){const[e,n]=m.useState(ho);return m.useEffect(()=>{const i=localStorage.getItem(Yg+t);if(i)try{n(JSON.parse(i))}catch{n(ho)}},[t]),{customRules:e,saveRules:i=>{n(i),localStorage.setItem(Yg+t,JSON.stringify(i))},resetRules:()=>{n(ho),localStorage.removeItem(Yg+t)}}}function yZ({roomCode:t,isHost:e,onRulesChange:n}){const{toast:r}=Wt(),[s,i]=m.useState(!1),[o,a]=m.useState(ho),{customRules:c,saveRules:u,resetRules:d}=uO(t);m.useEffect(()=>{a(c),n==null||n(c)},[c,n]);const h=()=>{u(o),n==null||n(o),i(!1),r({title:" !",description:""})},f=()=>{d(),a(ho),n==null||n(ho),r({title:" ",description:""})},p=(b,y,x)=>{a(v=>({...v,[b]:{...v[b],[y]:x}}))};return e?l.jsxs(Wr,{open:s,onOpenChange:i,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(Cw,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"max-w-lg max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[l.jsx(wr,{children:l.jsx(xr,{className:"text-xl font-bold flex items-center gap-2",children:" "})}),l.jsx(Ml,{className:"h-[60vh] pr-4",children:l.jsx("div",{className:"space-y-4",children:d2.map(b=>{var y,x,v;return l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("span",{className:"text-2xl w-10 h-10 flex items-center justify-center bg-white/10 rounded-lg font-bold",children:b}),l.jsx(be,{value:((y=o[b])==null?void 0:y.emoji)||"",onChange:g=>p(b,"emoji",g.target.value),className:"w-16 text-center text-xl bg-black/30 border-white/20",placeholder:""}),l.jsx(be,{value:((x=o[b])==null?void 0:x.title)||"",onChange:g=>p(b,"title",g.target.value),className:"flex-1 bg-black/30 border-white/20",placeholder:""})]}),l.jsx(cO,{value:((v=o[b])==null?void 0:v.description)||"",onChange:g=>p(b,"description",g.target.value),className:"bg-black/30 border-white/20 resize-none",placeholder:"...",rows:2})]},b)})})}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[l.jsxs(M,{variant:"outline",onClick:f,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[l.jsx(ja,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:h,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[l.jsx(KT,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}const wZ=gp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ku({className:t,variant:e,...n}){return l.jsx("div",{className:$(wZ({variant:e}),t),...n})}async function xZ(t,e=3){try{const n=[],r=` Undercover  "${t}"
    
:
-  
-  Undercover 
- 
- 

:
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""
 "": Civilian: "", Undercover: ""

 ${e}  "${t}":`;await new Promise(i=>setTimeout(i,1500));const s=t.toLowerCase();return s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")||s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):s.includes("")?n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}):n.push({category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""},{category:t,word_civilian:"",word_undercover:""}),n.slice(0,e)}catch(n){throw console.error("Error generating vocabulary:",n),new Error(" ")}}async function dO(t,e=4,n="medium"){try{await new Promise(c=>setTimeout(c,1e3));const r=[" 1 ",""," 1  "," 1 "," 1 "],s=[":  '' "," 1-21  7  7 ","  "," "," '':  ","  ","  "],i=["Master Rule:   ",":  ''  3 ",":    1 ",":   2 ","  ",`:  ${e}  `,":   "];let o;switch(n){case"easy":o=r;break;case"hard":o=i;break;default:o=s}const a=o[Math.floor(Math.random()*o.length)];return{card:t,rule:a,difficulty:n}}catch(r){throw console.error("Error generating rule:",r),new Error(" ")}}async function bZ(t=5,e=4){const n=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],r=["easy","medium","hard"],s=[];for(let i=0;i<t;i++){const o=n[Math.floor(Math.random()*n.length)],a=r[Math.floor(Math.random()*r.length)];s.push(dO(o,e,a))}return Promise.all(s)}async function _Z(t=5){try{const e=` Paranoia
    
:
- 
-   
- 
- 

:
- "?"
- "?"
- "?"

 ${t} :`;return await new Promise(s=>setTimeout(s,1200)),[...["?","?","?","?","?","?","?","?","?","?","?","?","?","?","?"]].sort(()=>Math.random()-.5).slice(0,t)}catch(e){return console.error("Error generating Paranoia questions:",e),["?","?","?","?","?"].slice(0,t)}}function SZ({playerCount:t,onApplyRule:e}){const[n,r]=m.useState(!1),[s,i]=m.useState(!1),[o,a]=m.useState([]),[c,u]=m.useState(null),{toast:d}=Wt(),h=async()=>{i(!0);try{const x=await bZ(5,t);a(x),d({title:" !",description:`AI  ${x.length} `})}catch(x){d({title:"",description:x instanceof Error?x.message:"",variant:"destructive"})}finally{i(!1)}},f=async x=>{i(!0);try{const v=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],g=v[Math.floor(Math.random()*v.length)],w=await dO(g,t,x);a([w,...o]),d({title:" !",description:` ${w.card}`})}catch(v){d({title:"",description:v instanceof Error?v.message:"",variant:"destructive"})}finally{i(!1)}},p=(x,v)=>{navigator.clipboard.writeText(`${x.card}: ${x.rule}`),u(v),setTimeout(()=>u(null),2e3),d({title:"!",description:""})},b=x=>{switch(x){case"easy":return"bg-green-500/20 text-green-400 border-green-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"hard":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},y=x=>{switch(x){case"easy":return"";case"medium":return"";case"hard":return"";default:return x}};return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",size:"sm",className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30 text-purple-300 hover:from-purple-500/30 hover:to-pink-500/30",children:[l.jsx(ha,{className:"w-4 h-4 mr-2"}),"AI "]})}),l.jsxs(yr,{className:"sm:max-w-2xl bg-gray-900 text-white border-white/20 max-h-[90vh] flex flex-col",children:[l.jsxs(wr,{children:[l.jsxs(xr,{className:"flex items-center gap-2 text-xl",children:[l.jsx(ha,{className:"w-6 h-6 text-purple-400"}),"AI Rule Generator"]}),l.jsxs(Zp,{className:"text-white/60",children:[" AI   ",t," "]})]}),l.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(M,{onClick:()=>h(),disabled:s,className:"flex-1 bg-purple-500 hover:bg-purple-600",children:s?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ha,{className:"w-4 h-4 mr-2"})," 5 "]})}),o.length>0&&l.jsx(M,{onClick:()=>a([]),variant:"outline",className:"border-white/20 text-white/70 hover:bg-white/10",children:""})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(M,{onClick:()=>f("easy"),disabled:s,variant:"outline",className:"border-green-500/30 text-green-400 hover:bg-green-500/10",size:"sm",children:"+ "}),l.jsx(M,{onClick:()=>f("medium"),disabled:s,variant:"outline",className:"border-yellow-500/30 text-yellow-400 hover:bg-yellow-500/10",size:"sm",children:"+ "}),l.jsx(M,{onClick:()=>f("hard"),disabled:s,variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",size:"sm",children:"+ "})]}),o.length>0?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-sm font-semibold text-white/80",children:[" (",o.length,"):"]}),o.map((x,v)=>l.jsx("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs(ku,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[" ",x.card]}),l.jsx(ku,{variant:"outline",className:b(x.difficulty),children:y(x.difficulty)})]}),l.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:x.rule})]}),l.jsx(M,{onClick:()=>p(x,v),size:"sm",variant:"ghost",className:"text-white/60 hover:text-white hover:bg-white/10",children:c===v?l.jsx(sl,{className:"w-4 h-4 text-green-400"}):l.jsx(xo,{className:"w-4 h-4"})})]})},v))]}):l.jsxs("div",{className:"text-center py-12 text-white/40",children:[l.jsx(ha,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),l.jsx("p",{className:"text-sm",children:" AI "})]})]}),l.jsx("div",{className:"border-t border-white/10 pt-4 mt-4",children:l.jsx("p",{className:"text-xs text-white/40 text-center",children:"  "})})]})]})}function hO({active:t,duration:e=3e3,onComplete:n}){const[r,s]=m.useState([]);return m.useEffect(()=>{if(!t){s([]);return}const i=["#FFD700","#FF69B4","#00CED1","#FF6347","#9370DB","#32CD32","#FF1493","#00BFFF"],o=[],a=50;for(let h=0;h<a;h++)o.push({id:h,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,scale:Math.random()*.5+.5,color:i[Math.floor(Math.random()*i.length)],velocityX:(Math.random()-.5)*8,velocityY:Math.random()*3+2,rotationSpeed:(Math.random()-.5)*10});s(o);const c=Date.now();let u;const d=()=>{if(Date.now()-c>e){s([]),n==null||n();return}s(f=>f.map(p=>({...p,x:p.x+p.velocityX,y:p.y+p.velocityY,rotation:p.rotation+p.rotationSpeed,velocityY:p.velocityY+.2}))),u=requestAnimationFrame(d)};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}},[t,e,n]),!t||r.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:r.map(i=>l.jsx("div",{className:"absolute w-3 h-3 rounded-sm",style:{left:i.x,top:i.y,backgroundColor:i.color,transform:`rotate(${i.rotation}deg) scale(${i.scale})`,transition:"none"}},i.id))})}function CZ({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onDrawCard:i,onReshuffle:o,onLeave:a}){var C,E,N,k,T,j;const{toast:c}=Wt(),[u,d]=m.useState(!1),[h,f]=m.useState(0),[p,b]=m.useState(0),y=m.useRef(null),{customRules:x}=uO(t.code),v=x,g=async()=>{const I=t.code;let q=!1;try{navigator.clipboard&&navigator.clipboard.writeText&&(await navigator.clipboard.writeText(I),q=!0)}catch{}if(!q)try{const P=document.createElement("textarea");P.value=I,P.style.position="fixed",P.style.left="-9999px",P.style.top="0",document.body.appendChild(P),P.focus(),P.select();const V=document.execCommand("copy");document.body.removeChild(P),q=V}catch{}c({title:q?" !":" ",description:I,duration:5e3})},w=()=>{if(t.cards_remaining===0)return;const I=Date.now();if(I-p<500&&h>0){const P=h+1;if(f(P),b(I),P>=3&&r){f(0),o(),c({title:" !",description:""});return}}else f(1),b(I),S()},S=()=>{t.cards_remaining!==0&&(d(!1),setTimeout(()=>{i(),setTimeout(()=>{d(!0),setTimeout(()=>{var I;(I=y.current)==null||I.scrollIntoView({behavior:"smooth",block:"center"})},300)},300)},200))},_=t.cards_remaining===0&&t.current_card!==null;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[l.jsx(hO,{active:_&&t.cards_remaining===0,duration:6e3}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l.jsx(M,{variant:"ghost",size:"icon",onClick:a,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(vp,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:" "}),l.jsxs("button",{onClick:g,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[l.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),l.jsx(xo,{className:"w-3 h-3"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[r&&l.jsx(yZ,{roomCode:t.code,isHost:r}),l.jsx(SZ,{playerCount:e.length}),r&&t.game_started&&!_&&l.jsx(M,{variant:"ghost",size:"icon",onClick:()=>{o(),c({title:" !",description:""})},className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(Qh,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),r&&!t.game_started&&l.jsxs(M,{variant:"default",onClick:s,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[l.jsx(Lu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]})]})]}),l.jsx("div",{className:"mb-2 sm:mb-4",children:l.jsx(lO,{players:e,currentPlayerId:n??void 0})}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 sm:py-6 md:py-8 relative z-10",children:t.game_started?_?l.jsx("div",{className:"text-center px-2",children:l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 sm:p-8 border border-white/10",children:[l.jsx("div",{className:"text-5xl sm:text-6xl mb-3 sm:mb-4",children:""}),l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"!"}),l.jsx("p",{className:"text-white/60 mb-4 sm:mb-6 text-base sm:text-lg",children:" !"}),r&&l.jsxs(M,{variant:"default",size:"lg",onClick:o,className:"bg-white text-black hover:bg-white/90",children:[l.jsx(Qh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),""]})]})}):l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center w-full px-2 sm:px-4",children:r?l.jsxs("div",{className:"flex flex-col items-center justify-center w-full",children:[t.current_card?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(KE,{card:t.current_card,isFlipped:!0,showRule:!1,size:"large"}),l.jsx("div",{className:"mt-6 sm:mt-8 bg-black/60 backdrop-blur-md rounded-2xl px-6 py-4 sm:px-8 sm:py-6 border border-white/10 max-w-md",children:l.jsxs("div",{className:"flex items-center gap-4 sm:gap-5",children:[l.jsx("span",{className:"text-4xl sm:text-5xl md:text-6xl",children:((C=v[t.current_card.value])==null?void 0:C.emoji)||""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-amber-400 font-bold text-lg sm:text-xl md:text-2xl",children:(E=v[t.current_card.value])==null?void 0:E.title}),l.jsx("p",{className:"text-white/80 text-sm sm:text-base md:text-lg",children:(N=v[t.current_card.value])==null?void 0:N.description})]})]})})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-48 h-72 sm:w-56 sm:h-80 md:w-64 md:h-96 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-2xl border-2 border-dashed border-white/20",children:l.jsx(m0,{})}),l.jsx("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:l.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center",children:["",l.jsx("br",{}),""]})})]}),l.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-full px-6 py-2 border border-white/10",children:[l.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-white",children:t.cards_remaining}),l.jsx("span",{className:"text-white/60 ml-2",children:""})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center gap-4 sm:gap-8 md:gap-12",children:[t.current_card?l.jsx(KE,{card:t.current_card,isFlipped:u,showRule:!1}):l.jsx("div",{className:"w-32 h-48 sm:w-44 sm:h-64 flex items-center justify-center bg-black/30 backdrop-blur-md rounded-xl border-2 border-dashed border-white/20",children:l.jsxs("p",{className:"text-white/50 text-xs sm:text-sm text-center px-2",children:["",l.jsx("br",{}),""]})}),l.jsx(vZ,{cardsRemaining:t.cards_remaining,onDraw:w,disabled:t.cards_remaining===0,showCount:!0})]}),t.current_card&&u&&l.jsx("div",{ref:y,className:"mt-4 sm:mt-6 bg-black/60 backdrop-blur-md rounded-xl px-5 py-3 sm:px-6 sm:py-4 border border-white/10 max-w-sm",children:l.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[l.jsx("span",{className:"text-3xl sm:text-4xl",children:((k=v[t.current_card.value])==null?void 0:k.emoji)||""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-amber-400 font-bold text-sm sm:text-base",children:(T=v[t.current_card.value])==null?void 0:T.title}),l.jsx("p",{className:"text-white/80 text-xs sm:text-sm",children:(j=v[t.current_card.value])==null?void 0:j.description})]})]})})]})}):l.jsxs("div",{className:"text-center px-2",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[l.jsx(m0,{}),l.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?'  ""':" Host "})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),l.jsx("button",{onClick:g,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})})]})}function EZ({onCreateRoom:t,onJoinRoom:e,onQuickStart:n,isLoading:r,onBack:s}){const[i,o]=m.useState("menu"),[a,c]=m.useState(""),[u,d]=m.useState(""),[h,f]=m.useState(""),[p,b]=m.useState(!1),[y,x]=m.useState([]),v=m.useRef("");m.useEffect(()=>{(async()=>{const C=await nm();x(C)})()},[]),m.useEffect(()=>{const _=C=>{if(C.target instanceof HTMLInputElement||C.target instanceof HTMLTextAreaElement)return;const E=C.key.toLowerCase(),N=v.current+E;"adminhee444".startsWith(N)?(v.current=N,N==="adminhee444"&&n&&(v.current="",b(!0))):v.current="adminhee444".startsWith(E)?E:""};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[n]);const g=async()=>{a.trim()&&await t(a.trim())},w=async()=>{!a.trim()||!u.trim()||await e(u.trim(),a.trim())},S=async()=>{!h.trim()||!n||(await n(h.trim()),b(!1),f(""))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx(Cb,{names:y}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/60"}),s&&l.jsx("div",{className:"absolute top-4 left-4 z-20",children:l.jsx(M,{variant:"ghost",size:"icon",onClick:s,className:"text-white/70 hover:text-white hover:bg-white/10",children:l.jsx(Ra,{className:"w-5 h-5 rotate-180"})})}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:""}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:" Online"})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl w-full max-w-xs sm:max-w-sm p-4 sm:p-6 relative z-10 border border-white/10",children:[i==="menu"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:()=>o("create"),children:[l.jsx(Fu,{className:"w-5 h-5"}),""]}),l.jsx("p",{className:"text-white/50 text-xs text-center"})]}),l.jsxs(M,{variant:"outline",size:"lg",className:"w-full border-white/30 text-white hover:bg-white/10",onClick:()=>o("join"),children:[l.jsx(Bn,{className:"w-5 h-5"}),""]}),n&&l.jsxs("div",{className:"space-y-1 pt-2 border-t border-white/10",children:[l.jsxs(M,{variant:"ghost",size:"lg",className:"w-full text-white/70 hover:text-white hover:bg-white/10",onClick:()=>b(!0),disabled:r,children:[l.jsx(Jh,{className:"w-5 h-5"})," LIVE"]}),l.jsx("p",{className:"text-white/50 text-xs text-center",children:" "})]})]}),i==="create"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),l.jsx(be,{placeholder:"",value:a,onChange:_=>c(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:""}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:g,disabled:!a.trim()||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:["",l.jsx(Ra,{className:"w-4 h-4"})]})})]})]}),i==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:""}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),l.jsx(be,{placeholder:" (6 )",value:u,onChange:_=>d(_.target.value.toUpperCase()),className:"text-center text-xl font-mono tracking-widest bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:6}),l.jsx(be,{placeholder:"",value:a,onChange:_=>c(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(M,{variant:"ghost",size:"lg",className:"flex-1 text-white/70 hover:text-white hover:bg-white/10",onClick:()=>o("menu"),children:""}),l.jsx(M,{variant:"default",size:"lg",className:"flex-1 bg-white text-black hover:bg-white/90",onClick:w,disabled:!a.trim()||u.length!==6||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:["",l.jsx(Ra,{className:"w-4 h-4"})]})})]})]})]}),l.jsx("p",{className:"mt-6 text-white/40 text-sm relative z-10",children:" 2-8 "}),l.jsx(Wr,{open:p,onOpenChange:b,children:l.jsxs(yr,{className:"sm:max-w-sm bg-black/90 border-white/20 text-white",children:[l.jsxs(wr,{children:[l.jsx(xr,{className:"text-center text-white",children:" LIVE Mode"}),l.jsx(Zp,{className:"text-center text-white/60",children:""})]}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsx(be,{placeholder:"",value:h,onChange:_=>f(_.target.value),className:"text-center bg-white/10 border-white/20 text-white placeholder:text-white/50",maxLength:20,autoFocus:!0,onKeyDown:_=>{_.key==="Enter"&&h.trim()&&S()}}),l.jsx(M,{variant:"default",size:"lg",className:"w-full bg-white text-black hover:bg-white/90",onClick:S,disabled:!h.trim()||r,children:r?l.jsx(Bt,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx(Jh,{className:"w-5 h-5"}),"!"]})})]})]})})]})}function NZ({card:t,faceDown:e=!1}){return e?l.jsx("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md shadow-md overflow-hidden relative",children:l.jsx(rm,{})}):l.jsxs(pe.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.3},className:"w-8 h-12 sm:w-10 sm:h-14 rounded-md bg-white border border-gray-200 shadow-md flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-xs sm:text-sm font-bold ${f2(t.suit)}`,children:t.value}),l.jsx("span",{className:"text-sm sm:text-base",children:h2(t.suit)})]})}function kZ({players:t,currentPlayerId:e,showCards:n=!1,currentTurnPlayerId:r,gamePhase:s}){return l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-3 sm:p-4 relative z-10 border border-white/10",children:[l.jsx("h3",{className:"text-xs sm:text-sm font-medium text-white/60 mb-2 sm:mb-3 flex items-center gap-2",children:l.jsxs("span",{className:"text-white",children:["  (",t.length,")"]})}),l.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:t.map(i=>{const o=i.id===r,a=i.cards&&i.cards.length===2?fo(i.cards):{isPok:!1,pokValue:null},c=i.cards&&i.cards.length>0?Nu(i.cards):null;return l.jsxs("div",{className:$("flex flex-col items-center gap-1 sm:gap-2 p-2 sm:p-3 rounded-xl text-xs sm:text-sm font-medium transition-all flex-shrink-0",i.is_dealer?"bg-amber-500/20 border-2 border-amber-500":o?"bg-green-500/20 border-2 border-green-500 animate-pulse":i.id===e?"bg-white/20 ring-2 ring-white/50":"bg-white/10 text-white"),children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:`/king-s-cup-party/${i.avatar||1}.jpg`,alt:i.name,className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-white/40 shadow-lg"}),i.is_host&&l.jsx(Yh,{className:"w-4 h-4 text-amber-400 absolute -top-1 -right-1 drop-shadow-md"}),i.is_dealer&&l.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 text-[10px] bg-amber-500 text-black px-1.5 rounded-full font-bold",children:""})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-white truncate max-w-[70px] sm:max-w-[80px] block",children:i.name}),s==="drawing"&&i.has_drawn&&l.jsx("span",{className:"text-[10px] text-green-400",children:" "}),o&&l.jsx("span",{className:"text-[10px] text-green-300",children:" "})]}),i.cards&&i.cards.length>0&&l.jsx("div",{className:"flex gap-1 mt-1",children:i.cards.map((u,d)=>l.jsx(NZ,{card:u,faceDown:!n},d))}),n&&i.cards&&i.cards.length>0&&l.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[l.jsx("span",{className:"text-lg sm:text-xl font-bold text-amber-400",children:i.points}),a.isPok&&a.pokValue!==null&&l.jsxs("span",{className:"text-[9px] sm:text-[10px] bg-green-500 text-white px-1.5 py-0.5 rounded-full animate-bounce",children:[" ",a.pokValue,"!"]}),c&&c.type!=="normal"&&!a.isPok&&l.jsx("span",{className:"text-[9px] sm:text-[10px] bg-purple-500 text-white px-1.5 py-0.5 rounded-full",children:c.name})]}),i.result&&n&&l.jsx("span",{className:`text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full ${i.result==="player_win"?"bg-green-500 text-white":i.is_dealer?"bg-amber-500 text-black":"bg-red-500 text-white"}`,children:i.is_dealer?"":i.result==="player_win"?` ${i.multiplier&&i.multiplier>1?` x${i.multiplier}`:""}`:""})]},i.id)})})]})}var TZ="Label",fO=m.forwardRef((t,e)=>l.jsx(ee.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fO.displayName=TZ;var pO=fO;const RZ=gp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ft=m.forwardRef(({className:t,...e},n)=>l.jsx(pO,{ref:n,className:$(RZ(),t),...e}));Ft.displayName=pO.displayName;const YE={pok9Multiplier:2,pok8Multiplier:2,tongMultiplier:5,samLeungMultiplier:3,straightMultiplier:3,flushMultiplier:3,dengMultiplier:2,pairMultiplier:2};function jZ({roomCode:t,isHost:e}){const{toast:n}=Wt(),[r,s]=m.useState(!1),[i,o]=m.useState(YE);m.useEffect(()=>{const d=localStorage.getItem(`pokdeng_rules_${t}`);d&&o(JSON.parse(d))},[t]);const a=()=>{localStorage.setItem(`pokdeng_rules_${t}`,JSON.stringify(i)),s(!1),n({title:" !",description:""})},c=()=>{o(YE),localStorage.removeItem(`pokdeng_rules_${t}`),n({title:" ",description:""})},u=(d,h)=>{o(f=>({...f,[d]:Math.max(1,Math.min(10,h))}))};return e?l.jsxs(Wr,{open:r,onOpenChange:s,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-white/70 hover:text-amber-400 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:l.jsx(Cw,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"max-w-md max-h-[90vh] bg-gray-900 border-white/10 text-white",children:[l.jsx(wr,{children:l.jsx(xr,{className:"text-xl font-bold flex items-center gap-2",children:" "})}),l.jsx(Ml,{className:"h-[60vh] pr-4",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," 9"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pok9Multiplier,onChange:d=>u("pok9Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2  9 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," 8"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pok8Multiplier,onChange:d=>u("pok8Multiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2  8 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Three of a Kind)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.tongMultiplier,onChange:d=>u("tongMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 7-7-7)"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""}),""]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.samLeungMultiplier,onChange:d=>u("samLeungMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:"J-Q-K ( 3 )"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Straight)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.straightMultiplier,onChange:d=>u("straightMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3  ( 5-6-7)"})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Flush)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.flushMultiplier,onChange:d=>u("flushMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 3 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Same Suit)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.dengMultiplier,onChange:d=>u("dengMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]}),l.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs(Ft,{className:"text-amber-400 font-bold flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl",children:""})," (Pair)"]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{type:"number",min:1,max:10,value:i.pairMultiplier,onChange:d=>u("pairMultiplier",parseInt(d.target.value)||1),className:"w-16 text-center bg-black/30 border-white/20"}),l.jsx("span",{className:"text-white/60",children:""})]})]}),l.jsx("p",{className:"text-xs text-white/50",children:" 2 "})]})]})}),l.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[l.jsxs(M,{variant:"outline",onClick:c,className:"flex-1 border-white/20 text-white hover:bg-white/10",children:[l.jsx(ja,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(M,{onClick:a,className:"flex-1 bg-amber-500 hover:bg-amber-600 text-black",children:[l.jsx(KT,{className:"w-4 h-4 mr-2"}),""]})]})]})]}):null}function IZ({card:t,faceDown:e=!1}){return e?l.jsx("div",{className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl shadow-xl overflow-hidden relative",children:l.jsx(rm,{})}):l.jsxs(pe.div,{initial:{rotateY:180,scale:.8},animate:{rotateY:0,scale:1},transition:{duration:.4},className:"w-20 h-28 sm:w-24 sm:h-36 rounded-xl bg-white border-2 border-gray-200 shadow-xl flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-2xl sm:text-3xl font-bold ${f2(t.suit)}`,children:t.value}),l.jsx("span",{className:"text-3xl sm:text-4xl",children:h2(t.suit)})]})}function PZ({room:t,players:e,currentPlayerId:n,isHost:r,isLiveMode:s=!1,onStartGame:i,onDrawCard:o,onStandCard:a,onDealerDraw:c,onDealerStand:u,onShowdown:d,onNextRound:h,onLeave:f,onSetDealer:p}){var A,L;const{toast:b}=Wt(),[y,x]=m.useState(!1),[v,g]=m.useState(!1),w=()=>{const R=t.code;navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(R).then(()=>{b({title:" !",description:`: ${R}`,duration:3e3})}).catch(()=>{S(R)}):S(R)},S=R=>{const W=document.createElement("textarea");W.value=R,W.style.position="fixed",W.style.top="0",W.style.left="0",W.style.width="2em",W.style.height="2em",W.style.padding="0",W.style.border="none",W.style.outline="none",W.style.boxShadow="none",W.style.background="transparent",document.body.appendChild(W),W.focus(),W.select();try{document.execCommand("copy"),b({title:" !",description:`: ${R}`,duration:3e3})}catch{b({title:" ",description:`${R} ()`,duration:5e3})}document.body.removeChild(W)},_=e.find(R=>R.id===n),C=e.find(R=>R.is_dealer),E=e.filter(R=>!R.is_dealer).sort((R,W)=>R.player_order-W.player_order),N=t.game_phase==="drawing"?E[t.current_player_index]:null,k=(N==null?void 0:N.id)===n,T=t.game_phase==="showdown"&&C&&!C.has_drawn,j=_==null?void 0:_.is_dealer,I=e.every(R=>R.has_drawn),q=e.filter(R=>R.has_drawn).length,P=e.length,V=t.game_phase==="showdown"||t.game_phase==="ended",U=r&&s,G=m.useRef(!1);return m.useEffect(()=>{if(t.game_phase==="showdown"&&I&&!G.current){G.current=!0;const R=setTimeout(()=>{d()},1e3);return()=>clearTimeout(R)}(t.game_phase==="drawing"||t.game_phase==="waiting")&&(G.current=!1)},[t.game_phase,I,d]),l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-2 sm:p-4 md:p-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat blur-sm scale-105",style:{backgroundImage:"url('/king-s-cup-party/bg-game.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsxs("header",{className:"flex items-center justify-between mb-2 sm:mb-4 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[l.jsx(M,{variant:"ghost",size:"icon",onClick:f,className:"text-white/70 hover:text-red-400 hover:bg-red-400/10 w-8 h-8 sm:w-10 sm:h-10",children:l.jsx(vp,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"font-semibold text-white text-sm sm:text-lg",children:[" "," ",U&&l.jsx("span",{className:"text-amber-400",children:" LIVE"})]}),l.jsxs("button",{onClick:w,className:"flex items-center gap-1 text-xs sm:text-sm text-white/60 hover:text-white transition-colors",children:[l.jsx("span",{className:"font-mono bg-white/10 px-1.5 sm:px-2 py-0.5 rounded text-xs sm:text-sm",children:t.code}),l.jsx(xo,{className:"w-3 h-3"}),l.jsxs("div",{className:"flex items-center gap-1 ml-1 bg-green-500/20 border border-green-500/50 rounded-full px-1.5 py-0.5",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-[10px] text-green-300 font-medium",children:"LIVE"})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[(r||s&&!n)&&p&&l.jsxs(Wr,{open:v,onOpenChange:g,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"ghost",size:"icon",className:"text-amber-400 hover:text-amber-300 hover:bg-amber-400/10 w-8 h-8 sm:w-10 sm:h-10",title:"",children:l.jsx(Yh,{className:"w-4 h-4 sm:w-5 sm:h-5"})})}),l.jsxs(yr,{className:"bg-black/95 border-amber-500/50 text-white max-w-md",children:[l.jsx(wr,{children:l.jsx(xr,{className:"text-amber-400 text-xl",children:" "})}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:e.map(R=>l.jsx(M,{onClick:()=>{p(R.id),g(!1),b({title:" ",description:`${R.name} `})},variant:R.is_dealer?"default":"outline",className:`h-auto py-3 ${R.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black border-amber-400":"border-white/30 text-white hover:bg-white/10"}`,children:l.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-sm font-medium truncate max-w-full",children:R.name}),R.is_dealer&&l.jsx("span",{className:"text-xl",children:""})]})},R.id))})]})]}),(r||s&&!n)&&l.jsx(jZ,{roomCode:t.code,isHost:!0}),(r||s&&!n)&&t.game_started&&l.jsx(M,{variant:"ghost",size:"icon",onClick:h,className:"text-green-400 hover:text-green-300 hover:bg-green-400/10 w-8 h-8 sm:w-10 sm:h-10",title:" / ",children:l.jsx(ja,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(r||s&&!n)&&!t.game_started&&l.jsxs(M,{variant:"default",onClick:i,disabled:e.length<2,className:"bg-white text-black hover:bg-white/90 text-xs sm:text-sm px-3 sm:px-4",children:[l.jsx(Lu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:""}),l.jsx("span",{className:"sm:hidden",children:""})]})]})]}),l.jsx("div",{className:"mb-2 sm:mb-4",children:U?l.jsx(kZ,{players:e.map(R=>({id:R.id,name:R.name,is_host:R.is_host,avatar:R.avatar,cards:R.cards,points:R.points,is_dealer:R.is_dealer,has_drawn:R.has_drawn,result:R.result??void 0,multiplier:R.multiplier})),currentPlayerId:n??void 0,showCards:V||t.game_started,currentTurnPlayerId:N==null?void 0:N.id,gamePhase:t.game_phase??void 0}):l.jsx(lO,{players:e.map(R=>({id:R.id,name:R.name,is_host:R.is_host,avatar:R.avatar})),currentPlayerId:n??void 0})}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-2 sm:py-4 md:py-6 relative z-10 overflow-y-auto",children:t.game_started?U?l.jsxs("div",{className:"flex flex-col items-center justify-start w-full h-full overflow-y-auto",children:[l.jsx("div",{className:"text-center mb-4 sm:mb-6",children:l.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-6 sm:px-8 py-2 sm:py-3 rounded-full text-lg sm:text-xl md:text-2xl font-medium",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&` : ${(N==null?void 0:N.name)||"..."}`,t.game_phase==="showdown"&&(T?" ":" !"),t.game_phase==="ended"&&" "]})}),l.jsxs("div",{className:"text-white text-sm mb-4 bg-black/50 p-3 rounded",children:[l.jsxs("div",{children:[": ",e.length," "]}),l.jsxs("div",{children:[": ",(C==null?void 0:C.name)||""]}),l.jsxs("div",{children:[": ",q,"/",P]}),e.map(R=>{var W;return l.jsxs("div",{className:"text-xs",children:[R.name,": cards=",((W=R.cards)==null?void 0:W.length)||0," "]},R.id)})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-6xl px-4",children:e.length===0?l.jsx("div",{className:"col-span-full text-white text-center text-xl bg-red-500/20 p-8 rounded",children:"  - players.length = 0"}):e.map(R=>{var W;return l.jsxs("div",{className:`p-6 rounded-2xl border-2 ${R.is_dealer?"bg-amber-500/20 border-amber-500":"bg-white/5 border-white/20"}`,children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/40"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-white font-bold text-lg",children:[R.is_dealer?" ":"",R.name]}),R.is_dealer&&l.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]}),l.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:[R.points||0," "]})]})]}),l.jsx("div",{className:"flex gap-2 justify-center mb-4 min-h-[100px]",children:R.cards&&R.cards.length>0?R.cards.map((D,te)=>l.jsxs("div",{className:"w-16 h-24 rounded-lg bg-white border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-xl font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-2xl",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},te)):l.jsxs("div",{className:"text-white bg-red-500/30 p-4 rounded text-sm",children:[" player.cards = ",JSON.stringify(R.cards),l.jsx("br",{}),"length = ",((W=R.cards)==null?void 0:W.length)||0]})}),l.jsx("div",{className:"text-center",children:R.result&&t.game_phase==="ended"?l.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-lg font-bold ${R.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[R.result==="player_win"?" !":" ",R.multiplier&&R.multiplier>1&&` x${R.multiplier}`]}):R.has_drawn?l.jsx("span",{className:"text-sm text-green-300",children:" "}):l.jsx("span",{className:"text-sm text-yellow-300 animate-pulse",children:" ..."})})]},R.id)})}),l.jsxs("div",{className:"flex flex-col items-center gap-3 py-4 sm:py-6 mt-4",children:[(r||s&&!n)&&p&&t.game_phase!=="ended"&&l.jsxs(M,{onClick:()=>g(!0),variant:"outline",size:"sm",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 hover:text-amber-300",children:[l.jsx(Yh,{className:"w-4 h-4 mr-2"}),""]}),t.game_phase==="showdown"&&l.jsx("div",{className:"bg-blue-500/20 border border-blue-500/50 rounded-xl px-6 py-4 mb-2",children:l.jsxs("p",{className:"text-blue-300 text-center text-sm",children:[" : ",q,"/",P," ",l.jsx("br",{}),l.jsx("span",{className:"text-xs text-blue-200/60",children:e.map(R=>`${R.name}: ${R.has_drawn?"":""}`).join(" | ")})]})}),T&&l.jsx("div",{className:"bg-amber-500/20 border border-amber-500/50 rounded-xl px-6 py-4",children:l.jsxs("p",{className:"text-amber-400 font-medium text-center text-lg",children:[" ",l.jsx("br",{}),l.jsx("span",{className:"text-sm text-amber-300/70",children:""})]})}),t.game_phase==="showdown"&&l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsxs(M,{onClick:d,disabled:!I,size:"lg",className:`font-bold text-lg px-8 py-6 ${I?"bg-purple-500 hover:bg-purple-600 text-white animate-pulse":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:[l.jsx(Gv,{className:"w-6 h-6 mr-2"}),I?"":` (${q}/${P})`]}),!I&&q>=P-1&&l.jsx(M,{onClick:d,variant:"outline",size:"sm",className:"text-xs text-orange-400 border-orange-500/50 hover:bg-orange-500/20",children:""})]}),t.game_phase==="ended"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-6 mb-6",children:[l.jsx("h2",{className:"text-center text-2xl sm:text-3xl font-bold text-amber-400 mb-6",children:" "}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-white",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-white/20",children:[l.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-left py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""}),l.jsx("th",{className:"text-center py-3 px-4 font-bold text-amber-300",children:""})]})}),l.jsx("tbody",{children:e.sort((R,W)=>R.result==="player_win"&&W.result!=="player_win"?-1:R.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(R.points||0)).map((R,W)=>l.jsxs("tr",{className:`border-b border-white/10 transition-all hover:bg-white/5 ${R.result==="player_win"?"bg-green-500/10":"bg-red-500/5"}`,children:[l.jsx("td",{className:"py-4 px-4 text-center",children:l.jsx("span",{className:`text-2xl font-bold ${W===0&&R.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&R.result==="player_win"?"":W+1})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/30"}),l.jsx("div",{children:l.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2",children:[R.name,R.is_dealer&&l.jsx("span",{className:"text-xs bg-amber-500 text-black px-2 py-0.5 rounded-full",children:""})]})})]})}),l.jsxs("td",{className:"py-4 px-4 text-center",children:[l.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-amber-400",children:R.points||0}),l.jsx("span",{className:"text-white/50 text-sm ml-1",children:""})]}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"flex gap-1 justify-center",children:R.cards&&R.cards.length>0?R.cards.map((D,te)=>l.jsxs("div",{className:"w-8 h-12 sm:w-10 sm:h-14 rounded bg-white border border-gray-200 flex flex-col items-center justify-center text-xs",children:[l.jsx("span",{className:`font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-sm",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},te)):l.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),l.jsx("td",{className:"py-4 px-4 text-center",children:R.result==="player_win"?l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-green-400 font-bold text-sm sm:text-base",children:"!"}),R.multiplier&&R.multiplier>1&&l.jsxs("span",{className:"text-xs text-green-300 bg-green-500/20 px-2 py-0.5 rounded",children:["x",R.multiplier]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-red-400 font-bold text-sm sm:text-base",children:""})]})})]},R.id))})]})}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/20 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-green-400 font-bold text-lg",children:e.filter(R=>R.result==="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-red-400 font-bold text-lg",children:e.filter(R=>R.result!=="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-amber-400 font-bold text-lg",children:Math.max(...e.map(R=>R.points||0))})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-xs",children:""}),l.jsx("div",{className:"text-white font-bold text-lg",children:e.length})]})]})]}),l.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold text-lg px-8",children:[l.jsx(ja,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="drawing"&&l.jsx("div",{className:"mt-4 bg-black/40 backdrop-blur-md rounded-xl px-6 py-4 border border-white/10",children:l.jsxs("p",{className:"text-white/50 text-sm sm:text-base text-center",children:["  LIVE ",l.jsx("br",{}),""]})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[l.jsx("div",{className:"text-center mb-4",children:l.jsxs("span",{className:"bg-amber-500/20 text-amber-400 px-4 py-1 rounded-full text-sm",children:[t.game_phase==="dealing"&&" ...",t.game_phase==="drawing"&&(k?" !":j?" ...":` : ${(N==null?void 0:N.name)||"..."}`),t.game_phase==="showdown"&&(T&&j?" !":T?" ":" "),t.game_phase==="ended"&&" "]})}),_&&l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-4 sm:p-6 border border-white/10 mb-4 w-full max-w-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[_.avatar&&l.jsx("img",{src:`/king-s-cup-party/${_.avatar}.jpg`,alt:_.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-white font-bold text-lg",children:_.is_dealer?"  ()":" "})]}),_.cards.length>0&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-2xl font-bold text-amber-400",children:_.points}),_.cards.length===2&&fo(_.cards).isPok&&l.jsxs("span",{className:"text-xs bg-green-500 text-white px-2 py-0.5 rounded-full animate-bounce",children:[" ",fo(_.cards).pokValue,"!"]}),_.cards.length>0&&((A=Nu(_.cards))==null?void 0:A.type)!=="normal"&&!fo(_.cards).isPok&&l.jsx("span",{className:"text-xs bg-purple-500 text-white px-2 py-0.5 rounded-full",children:(L=Nu(_.cards))==null?void 0:L.name})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center mb-4",children:[_.cards.map((R,W)=>l.jsx(IZ,{card:R},W)),_.cards.length===0&&l.jsx("div",{className:"w-20 h-28 rounded-xl border-2 border-dashed border-white/30 flex items-center justify-center",children:l.jsx("span",{className:"text-white/30",children:"-"})})]}),_.result&&V&&!_.is_dealer&&l.jsx("div",{className:"text-center",children:l.jsxs("span",{className:`text-lg font-bold px-4 py-2 rounded-full ${_.result==="player_win"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[_.result==="player_win"?" !":" ",_.multiplier>1&&` x${_.multiplier}`]})})]}),!j&&k&&!(_!=null&&_.has_drawn)&&_.cards.length<3&&t.game_phase==="drawing"&&l.jsxs("div",{className:"flex gap-4 justify-center",children:[l.jsxs(M,{onClick:o,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white text-lg px-8 py-6",children:[l.jsx(sS,{className:"w-5 h-5 mr-2"}),""]}),l.jsxs(M,{onClick:a,variant:"outline",size:"lg",className:"border-white/30 text-white hover:bg-white/10 text-lg px-8 py-6",children:[l.jsx(iS,{className:"w-5 h-5 mr-2"}),""]})]}),j&&T&&!(_!=null&&_.has_drawn)&&l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsx("p",{className:"text-amber-400 font-medium text-center mb-2",children:" "}),l.jsxs("div",{className:"flex gap-4 justify-center",children:[_.cards.length<3&&l.jsxs(M,{onClick:c,size:"lg",className:"bg-amber-500 hover:bg-amber-600 text-black text-lg px-8 py-6 font-bold",children:[l.jsx(sS,{className:"w-5 h-5 mr-2"}),""]}),l.jsxs(M,{onClick:u,variant:"outline",size:"lg",className:"border-amber-500/50 text-amber-400 hover:bg-amber-500/20 text-lg px-8 py-6",children:[l.jsx(iS,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.game_phase==="ended"&&l.jsxs("div",{className:"w-full max-w-4xl bg-black/60 backdrop-blur-md rounded-2xl border-2 border-amber-500/50 p-4 sm:p-6 mb-4 overflow-y-auto max-h-[60vh]",children:[l.jsx("h2",{className:"text-center text-xl sm:text-2xl font-bold text-amber-400 mb-4",children:" "}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-white text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-white/20",children:[l.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:"#"}),l.jsx("th",{className:"text-left py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""}),l.jsx("th",{className:"text-center py-2 px-2 font-bold text-amber-300 text-xs",children:""})]})}),l.jsx("tbody",{children:e.sort((R,W)=>R.result==="player_win"&&W.result!=="player_win"?-1:R.result!=="player_win"&&W.result==="player_win"?1:(W.points||0)-(R.points||0)).map((R,W)=>l.jsxs("tr",{className:`border-b border-white/10 ${R.result==="player_win"?"bg-green-500/10":"bg-red-500/5"} ${R.id===n?"ring-2 ring-amber-500":""}`,children:[l.jsx("td",{className:"py-3 px-2 text-center",children:l.jsx("span",{className:`text-lg font-bold ${W===0&&R.result==="player_win"?"text-amber-400":"text-white/60"}`,children:W===0&&R.result==="player_win"?"":W+1})}),l.jsx("td",{className:"py-3 px-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"font-bold text-sm",children:[R.name,R.id===n&&l.jsx("span",{className:"text-amber-400 ml-1",children:"()"})]}),R.is_dealer&&l.jsx("span",{className:"text-[10px] bg-amber-500 text-black px-1 rounded w-fit",children:""})]})]})}),l.jsx("td",{className:"py-3 px-2 text-center",children:l.jsx("span",{className:"text-xl font-bold text-amber-400",children:R.points||0})}),l.jsx("td",{className:"py-3 px-2",children:l.jsx("div",{className:"flex gap-1 justify-center",children:R.cards&&R.cards.length>0?R.cards.map((D,te)=>l.jsxs("div",{className:"w-6 h-9 rounded bg-white border border-gray-200 flex flex-col items-center justify-center",children:[l.jsx("span",{className:`text-[10px] font-bold ${D.suit==="hearts"||D.suit==="diamonds"?"text-red-500":"text-black"}`,children:D.value}),l.jsxs("span",{className:"text-xs",children:[D.suit==="hearts"&&"",D.suit==="diamonds"&&"",D.suit==="clubs"&&"",D.suit==="spades"&&""]})]},te)):l.jsx("span",{className:"text-white/30 text-xs",children:"-"})})}),l.jsx("td",{className:"py-3 px-2 text-center",children:R.result==="player_win"?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"text-green-400 font-bold text-xs",children:""}),R.multiplier&&R.multiplier>1&&l.jsxs("span",{className:"text-[10px] text-green-300 bg-green-500/20 px-1 rounded",children:["x",R.multiplier]})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"text-red-400 font-bold text-xs",children:""})]})})]},R.id))})]})}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 grid grid-cols-4 gap-2",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-green-400 font-bold text-sm",children:e.filter(R=>R.result==="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-red-400 font-bold text-sm",children:e.filter(R=>R.result!=="player_win").length})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-amber-400 font-bold text-sm",children:Math.max(...e.map(R=>R.points||0))})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl mb-1",children:""}),l.jsx("div",{className:"text-white/50 text-[10px]",children:""}),l.jsx("div",{className:"text-white font-bold text-sm",children:e.length})]})]})]}),(r||s&&!n)&&!s&&l.jsxs("div",{className:"flex justify-center gap-3 py-4",children:[t.game_phase==="showdown"&&I&&l.jsxs(M,{onClick:d,size:"lg",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-6 animate-pulse",children:[l.jsx(Gv,{className:"w-5 h-5 mr-2"}),""]}),t.game_phase==="ended"&&l.jsxs(M,{onClick:h,size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-6",children:[l.jsx(ja,{className:"w-5 h-5 mr-2"}),""]})]}),!k&&!T&&t.game_phase==="drawing"&&(_==null?void 0:_.has_drawn)&&l.jsx("div",{className:"text-center text-white/50",children:l.jsx("p",{children:"  ..."})}),!k&&!T&&t.game_phase==="drawing"&&!(_!=null&&_.has_drawn)&&!j&&l.jsx("div",{className:"text-center text-white/50",children:l.jsx("p",{children:"..."})})]}):l.jsxs("div",{className:"text-center px-2 w-full max-w-2xl",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-5 sm:p-8 mb-4 sm:mb-6 border border-white/10",children:[l.jsx(m0,{}),l.jsx("p",{className:"text-white/60 text-xs sm:text-sm mt-2",children:r?s?"  LIVE -  ":'  ""':" Host "})]}),(r||s&&!n)&&p&&e.length>=1&&l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 mb-4 sm:mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white text-sm sm:text-base mb-3 font-medium",children:" "}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:e.map(R=>l.jsxs(M,{onClick:()=>p(R.id),variant:R.is_dealer?"default":"outline",className:`${R.is_dealer?"bg-amber-500 hover:bg-amber-600 text-black":"border-white/30 text-white hover:bg-white/10"}`,children:[R.avatar&&l.jsx("img",{src:`/king-s-cup-party/${R.avatar}.jpg`,alt:R.name,className:"w-6 h-6 rounded-full object-cover mr-2"}),l.jsx("span",{className:"truncate",children:R.name}),R.is_dealer&&l.jsx("span",{className:"ml-1",children:""})]},R.id))})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 sm:p-5 inline-block border border-white/10",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1 sm:mb-2",children:""}),l.jsx("button",{onClick:w,className:"font-mono text-3xl sm:text-4xl font-bold text-white tracking-widest hover:opacity-80 transition-opacity",children:t.code})]})]})}),l.jsxs("div",{className:"relative z-10 mt-auto",children:[l.jsx(M,{variant:"ghost",size:"sm",onClick:()=>x(!y),className:"w-full text-white/50 hover:text-white/80",children:y?" ":" "}),y&&l.jsx("div",{className:"bg-black/60 backdrop-blur-md rounded-xl p-3 mt-2 border border-white/10",children:l.jsxs("ul",{className:"text-white/60 text-xs space-y-1",children:[l.jsx("li",{children:"  8/9 =  ( 2 )"}),l.jsx("li",{children:"  =  5 "}),l.jsx("li",{children:" // =  3 "}),l.jsx("li",{children:"  (/) =  2 "}),l.jsx("li",{children:"  = "})]})})]})]})}const Hs=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Hs.displayName="Card";const AZ=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));AZ.displayName="CardHeader";const OZ=m.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));OZ.displayName="CardTitle";const DZ=m.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));DZ.displayName="CardDescription";const qs=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));qs.displayName="CardContent";const MZ=m.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));MZ.displayName="CardFooter";var Qg="rovingFocusGroup.onEntryFocus",LZ={bubbles:!1,cancelable:!0},nd="RovingFocusGroup",[g0,mO,FZ]=hp(nd),[$Z,sm]=mn(nd,[FZ]),[UZ,VZ]=$Z(nd),gO=m.forwardRef((t,e)=>l.jsx(g0.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(g0.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(BZ,{...t,ref:e})})}));gO.displayName=nd;var BZ=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=m.useRef(null),p=me(e,f),b=Dl(i),[y,x]=pr({prop:o,defaultProp:a??null,onChange:c,caller:nd}),[v,g]=m.useState(!1),w=ft(u),S=mO(n),_=m.useRef(!1),[C,E]=m.useState(0);return m.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Qg,w),()=>N.removeEventListener(Qg,w)},[w]),l.jsx(UZ,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(N=>x(N),[x]),onItemShiftTab:m.useCallback(()=>g(!0),[]),onFocusableItemAdd:m.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>E(N=>N-1),[]),children:l.jsx(ee.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:X(t.onMouseDown,()=>{_.current=!0}),onFocus:X(t.onFocus,N=>{const k=!_.current;if(N.target===N.currentTarget&&k&&!v){const T=new CustomEvent(Qg,LZ);if(N.currentTarget.dispatchEvent(T),!T.defaultPrevented){const j=S().filter(U=>U.focusable),I=j.find(U=>U.active),q=j.find(U=>U.id===y),V=[I,q,...j].filter(Boolean).map(U=>U.ref.current);wO(V,d)}}_.current=!1}),onBlur:X(t.onBlur,()=>g(!1))})})}),vO="RovingFocusGroupItem",yO=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,c=Dr(),u=i||c,d=VZ(vO,n),h=d.currentTabStopId===u,f=mO(n),{onFocusableItemAdd:p,onFocusableItemRemove:b,currentTabStopId:y}=d;return m.useEffect(()=>{if(r)return p(),()=>b()},[r,p,b]),l.jsx(g0.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(ee.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:X(t.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:X(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:X(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=HZ(x,d.orientation,d.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=f().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const S=w.indexOf(x.currentTarget);w=d.loop?qZ(w,S+1):w.slice(S+1)}setTimeout(()=>wO(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:y!=null}):o})})});yO.displayName=vO;var zZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function HZ(t,e,n){const r=WZ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zZ[r]}function wO(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function qZ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var xO=gO,bO=yO,im="Tabs",[GZ,Bte]=mn(im,[sm]),_O=sm(),[KZ,Eb]=GZ(im),SO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=t,d=Dl(a),[h,f]=pr({prop:r,onChange:s,defaultProp:i??"",caller:im});return l.jsx(KZ,{scope:n,baseId:Dr(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:l.jsx(ee.div,{dir:d,"data-orientation":o,...u,ref:e})})});SO.displayName=im;var CO="TabsList",EO=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Eb(CO,n),o=_O(n);return l.jsx(xO,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(ee.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});EO.displayName=CO;var NO="TabsTrigger",kO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=Eb(NO,n),a=_O(n),c=jO(o.baseId,r),u=IO(o.baseId,r),d=r===o.value;return l.jsx(bO,{asChild:!0,...a,focusable:!s,active:d,children:l.jsx(ee.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:X(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:X(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:X(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});kO.displayName=NO;var TO="TabsContent",RO=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=Eb(TO,n),c=jO(a.baseId,r),u=IO(a.baseId,r),d=r===a.value,h=m.useRef(d);return m.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),l.jsx(In,{present:s||d,children:({present:f})=>l.jsx(ee.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});RO.displayName=TO;function jO(t,e){return`${t}-trigger-${e}`}function IO(t,e){return`${t}-content-${e}`}var YZ=SO,PO=EO,AO=kO,OO=RO;const QZ=YZ,DO=m.forwardRef(({className:t,...e},n)=>l.jsx(PO,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));DO.displayName=PO.displayName;const v0=m.forwardRef(({className:t,...e},n)=>l.jsx(AO,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));v0.displayName=AO.displayName;const y0=m.forwardRef(({className:t,...e},n)=>l.jsx(OO,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));y0.displayName=OO.displayName;var om="Collapsible",[JZ,MO]=mn(om),[XZ,Nb]=JZ(om),LO=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[c,u]=pr({prop:r,defaultProp:s??!1,onChange:o,caller:om});return l.jsx(XZ,{scope:n,disabled:i,contentId:Dr(),open:c,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),children:l.jsx(ee.div,{"data-state":Tb(c),"data-disabled":i?"":void 0,...a,ref:e})})});LO.displayName=om;var FO="CollapsibleTrigger",$O=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=Nb(FO,n);return l.jsx(ee.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Tb(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:X(t.onClick,s.onOpenToggle)})});$O.displayName=FO;var kb="CollapsibleContent",UO=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Nb(kb,t.__scopeCollapsible);return l.jsx(In,{present:n||s.open,children:({present:i})=>l.jsx(ZZ,{...r,ref:e,present:i})})});UO.displayName=kb;var ZZ=m.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=Nb(kb,n),[a,c]=m.useState(r),u=m.useRef(null),d=me(e,u),h=m.useRef(0),f=h.current,p=m.useRef(0),b=p.current,y=o.open||a,x=m.useRef(y),v=m.useRef(void 0);return m.useEffect(()=>{const g=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(g)},[]),vt(()=>{const g=u.current;if(g){v.current=v.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const w=g.getBoundingClientRect();h.current=w.height,p.current=w.width,x.current||(g.style.transitionDuration=v.current.transitionDuration,g.style.animationName=v.current.animationName),c(r)}},[o.open,r]),l.jsx(ee.div,{"data-state":Tb(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:y&&s})});function Tb(t){return t?"open":"closed"}var eee=LO,tee=$O,nee=UO,br="Accordion",ree=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Rb,see,iee]=hp(br),[am,zte]=mn(br,[iee,MO]),jb=MO(),VO=z.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return l.jsx(Rb.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?l.jsx(cee,{...i,ref:e}):l.jsx(lee,{...s,ref:e})})});VO.displayName=br;var[BO,oee]=am(br),[zO,aee]=am(br,{collapsible:!1}),lee=z.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[a,c]=pr({prop:n,defaultProp:r??"",onChange:s,caller:br});return l.jsx(BO,{scope:t.__scopeAccordion,value:z.useMemo(()=>a?[a]:[],[a]),onItemOpen:c,onItemClose:z.useCallback(()=>i&&c(""),[i,c]),children:l.jsx(zO,{scope:t.__scopeAccordion,collapsible:i,children:l.jsx(WO,{...o,ref:e})})})}),cee=z.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o,a]=pr({prop:n,defaultProp:r??[],onChange:s,caller:br}),c=z.useCallback(d=>a((h=[])=>[...h,d]),[a]),u=z.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return l.jsx(BO,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:l.jsx(zO,{scope:t.__scopeAccordion,collapsible:!0,children:l.jsx(WO,{...i,ref:e})})})}),[uee,lm]=am(br),WO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,a=z.useRef(null),c=me(a,e),u=see(n),h=Dl(s)==="ltr",f=X(t.onKeyDown,p=>{var N;if(!ree.includes(p.key))return;const b=p.target,y=u().filter(k=>{var T;return!((T=k.ref.current)!=null&&T.disabled)}),x=y.findIndex(k=>k.ref.current===b),v=y.length;if(x===-1)return;p.preventDefault();let g=x;const w=0,S=v-1,_=()=>{g=x+1,g>S&&(g=w)},C=()=>{g=x-1,g<w&&(g=S)};switch(p.key){case"Home":g=w;break;case"End":g=S;break;case"ArrowRight":i==="horizontal"&&(h?_():C());break;case"ArrowDown":i==="vertical"&&_();break;case"ArrowLeft":i==="horizontal"&&(h?C():_());break;case"ArrowUp":i==="vertical"&&C();break}const E=g%v;(N=y[E].ref.current)==null||N.focus()});return l.jsx(uee,{scope:n,disabled:r,direction:s,orientation:i,children:l.jsx(Rb.Slot,{scope:n,children:l.jsx(ee.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:f})})})}),Kf="AccordionItem",[dee,Ib]=am(Kf),HO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=lm(Kf,n),o=oee(Kf,n),a=jb(n),c=Dr(),u=r&&o.value.includes(r)||!1,d=i.disabled||t.disabled;return l.jsx(dee,{scope:n,open:u,disabled:d,triggerId:c,children:l.jsx(eee,{"data-orientation":i.orientation,"data-state":JO(u),...a,...s,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});HO.displayName=Kf;var qO="AccordionHeader",GO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=lm(br,n),i=Ib(qO,n);return l.jsx(ee.h3,{"data-orientation":s.orientation,"data-state":JO(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});GO.displayName=qO;var w0="AccordionTrigger",KO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=lm(br,n),i=Ib(w0,n),o=aee(w0,n),a=jb(n);return l.jsx(Rb.ItemSlot,{scope:n,children:l.jsx(tee,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...a,...r,ref:e})})});KO.displayName=w0;var YO="AccordionContent",QO=z.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=lm(br,n),i=Ib(YO,n),o=jb(n);return l.jsx(nee,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});QO.displayName=YO;function JO(t){return t?"open":"closed"}var hee=VO,fee=HO,pee=GO,XO=KO,ZO=QO;const mee=hee,eD=m.forwardRef(({className:t,...e},n)=>l.jsx(fee,{ref:n,className:$("border-b",t),...e}));eD.displayName="AccordionItem";const tD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsx(pee,{className:"flex",children:l.jsxs(XO,{ref:r,className:$("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,l.jsx(Sw,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));tD.displayName=XO.displayName;const nD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsx(ZO,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:l.jsx("div",{className:$("pb-4 pt-0",t),children:e})}));nD.displayName=ZO.displayName;function gee({vocabularies:t,categories:e,onAdd:n,onUpdate:r,onDelete:s}){const[i,o]=m.useState(!1),[a,c]=m.useState(null),[u,d]=m.useState(""),[h,f]=m.useState(!1),{toast:p}=Wt(),[b,y]=m.useState(""),[x,v]=m.useState(""),[g,w]=m.useState(""),S=m.useMemo(()=>{const k=t.filter(j=>{if(!u)return!0;const I=u.toLowerCase();return j.category.toLowerCase().includes(I)||j.word_civilian.toLowerCase().includes(I)||j.word_undercover.toLowerCase().includes(I)}),T={};return k.forEach(j=>{T[j.category]||(T[j.category]=[]),T[j.category].push(j)}),Object.entries(T).sort(([j],[I])=>j.localeCompare(I))},[t,u]),_=()=>{c(null),y(""),v(""),w(""),o(!0)},C=k=>{c(k),y(k.category),v(k.word_civilian),w(k.word_undercover),o(!0)},E=()=>{!b||!x||!g||(a?r({...a,category:b,word_civilian:x,word_undercover:g}):n({category:b,word_civilian:x,word_undercover:g}),o(!1))},N=async()=>{if(!b.trim()){p({title:"",description:" AI ",variant:"destructive"});return}f(!0);try{const k=await xZ(b,3);k.forEach(T=>{n(T)}),p({title:" !",description:` ${k.length}  "${b}"`}),o(!1),y(""),v(""),w("")}catch(k){p({title:"",description:k instanceof Error?k.message:"",variant:"destructive"})}finally{f(!1)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(nS,{className:"w-5 h-5 text-purple-400"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:B("vocabularyManager")}),l.jsxs(ku,{variant:"secondary",className:"bg-purple-500/20",children:[t.length," ",B("words")]})]}),l.jsxs(Wr,{open:i,onOpenChange:o,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{onClick:_,size:"sm",className:"bg-purple-500 hover:bg-purple-600",children:[l.jsx(Fu,{className:"w-4 h-4 mr-1"}),B("addWord")]})}),l.jsxs(yr,{className:"bg-gray-900 text-white border-white/20",children:[l.jsx(wr,{children:l.jsx(xr,{children:B(a?"editVocabulary":"addVocabulary")})}),l.jsxs("div",{className:"space-y-4 mt-4",children:[l.jsxs("div",{children:[l.jsx(Ft,{htmlFor:"category",children:B("category")}),l.jsx(be,{id:"category",value:b,onChange:k=>y(k.target.value),placeholder:B("categoryPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx(Ft,{htmlFor:"civilian",children:B("civilianWord")}),l.jsx(be,{id:"civilian",value:x,onChange:k=>v(k.target.value),placeholder:B("civilianPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx(Ft,{htmlFor:"undercover",children:B("undercoverWord")}),l.jsx(be,{id:"undercover",value:g,onChange:k=>w(k.target.value),placeholder:B("undercoverPlaceholder"),className:"bg-black/30 border-white/20 text-white"})]}),!a&&l.jsx(M,{onClick:N,disabled:!b.trim()||h,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",variant:"default",children:h?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{className:"w-4 h-4 mr-2 animate-spin"})," AI..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ha,{className:"w-4 h-4 mr-2"}),"  AI (3 )"]})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("span",{className:"w-full border-t border-white/10"})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"bg-gray-900 px-2 text-white/40",children:a?"":""})})]}),l.jsx(M,{onClick:E,disabled:!b||!x||!g,className:"w-full bg-purple-500 hover:bg-purple-600",children:B(a?"save":"add")})]})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Qv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),l.jsx(be,{type:"text",placeholder:B("searchVocabulary"),value:u,onChange:k=>d(k.target.value),className:"bg-black/30 border-white/20 text-white pl-10"})]}),l.jsx(mee,{type:"multiple",className:"space-y-2",children:S.map(([k,T])=>l.jsxs(eD,{value:k,className:"bg-black/40 border-white/10 rounded-lg overflow-hidden",children:[l.jsx(tD,{className:"px-4 hover:bg-white/5 hover:no-underline",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-white",children:k}),l.jsx(ku,{variant:"secondary",className:"bg-purple-500/20",children:T.length})]})}),l.jsx(nD,{className:"px-4 pb-4",children:l.jsx("div",{className:"space-y-2 mt-2",children:T.map(j=>l.jsx(Hs,{className:"bg-black/40 border-white/10",children:l.jsx(qs,{className:"p-3",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("civilian")}),l.jsx("span",{className:"text-green-400 font-medium",children:j.word_civilian})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-white/60 text-xs block mb-1",children:B("undercover")}),l.jsx("span",{className:"text-red-400 font-medium",children:j.word_undercover})]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(M,{size:"sm",variant:"ghost",onClick:()=>C(j),disabled:j.id<1e3,className:"h-8 w-8 p-0 text-blue-400 hover:text-blue-300 hover:bg-blue-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:j.id<1e3?B("cannotEditDefault"):B("edit"),children:l.jsx(Yv,{className:"w-4 h-4"})}),l.jsx(M,{size:"sm",variant:"ghost",onClick:()=>s(j.id),disabled:j.id<1e3,className:"h-8 w-8 p-0 text-red-400 hover:text-red-300 hover:bg-red-500/20 disabled:opacity-30 disabled:cursor-not-allowed",title:j.id<1e3?B("cannotDeleteDefault"):B("delete"),children:l.jsx(Zc,{className:"w-4 h-4"})})]})]})})},j.id))})})]},k))}),S.length===0&&l.jsxs("div",{className:"text-center py-12 text-white/40",children:[l.jsx(nS,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),l.jsx("p",{children:B(u?"noVocabularyFound":"noVocabularyYet")})]})]})}function vee({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState(""),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(Kd()),[f,p]=m.useState(!1),{toast:b}=Wt(),y=S=>{jJ(S),h(Kd())},x=S=>{IJ(S),h(Kd())},v=S=>{PJ(S),h(Kd())},g=()=>{const S=Gf(s);if(!S.isValid){b({title:B("error"),description:S.error||B("invalidName"),variant:"destructive"});return}t(s.trim())},w=()=>{const S=Gf(o);if(!S.isValid){b({title:B("error"),description:S.error||B("invalidName"),variant:"destructive"});return}c.trim()&&e(c.trim().toUpperCase(),o.trim())};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 sm:p-6 relative",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),l.jsxs(M,{variant:"ghost",onClick:n,className:"absolute top-4 left-4 text-white/70 hover:text-white z-20",children:[l.jsx(wl,{className:"w-5 h-5 mr-2"}),B("back")]}),l.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[l.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-2 drop-shadow-lg",children:B("undercoverTitle")}),l.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:B("undercoverSubtitle")})]}),l.jsxs(Wr,{open:f,onOpenChange:p,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",className:"absolute top-4 right-4 text-white/70 hover:text-white z-20 border-white/20",children:[l.jsx(Cw,{className:"w-5 h-5 mr-2"}),B("manageWords")]})}),l.jsxs(yr,{className:"bg-gray-900 text-white border-white/20 max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(wr,{children:l.jsx(xr,{children:B("vocabularyManager")})}),l.jsx(gee,{vocabularies:d,categories:p2(),onAdd:y,onUpdate:x,onDelete:v})]})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10 w-full max-w-md relative z-10",children:l.jsx(qs,{className:"p-4 sm:p-6",children:l.jsxs(QZ,{defaultValue:"create",className:"w-full",children:[l.jsxs(DO,{className:"grid w-full grid-cols-2 bg-black/40",children:[l.jsxs(v0,{value:"create",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[l.jsx(Bn,{className:"w-4 h-4 mr-2"}),B("createRoom")]}),l.jsxs(v0,{value:"join",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[l.jsx(YT,{className:"w-4 h-4 mr-2"}),B("joinRoom")]})]}),l.jsxs(y0,{value:"create",className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),l.jsx(be,{type:"text",placeholder:B("enterName"),value:s,onChange:S=>i(S.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),l.jsx(M,{onClick:g,disabled:!s.trim()||r,className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:B(r?"creating":"createNewRoom")})]}),l.jsxs(y0,{value:"join",className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("roomCode")}),l.jsx(be,{type:"text",placeholder:B("enterCode"),value:c,onChange:S=>u(S.target.value.toUpperCase()),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40 font-mono text-center text-xl tracking-widest",maxLength:6})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/60 block mb-2",children:B("yourName")}),l.jsx(be,{type:"text",placeholder:B("enterName"),value:o,onChange:S=>a(S.target.value),className:"bg-black/30 border-white/20 text-white placeholder:text-white/40",maxLength:20})]}),l.jsx(M,{onClick:w,disabled:!o.trim()||c.length!==6||r,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:B(r?"joining":"joinRoomBtn")})]})]})})})]})}function Pb(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var yee=[" ","Enter","ArrowUp","ArrowDown"],wee=[" ","Enter"],Ro="Select",[cm,um,xee]=hp(Ro),[Ll,Wte]=mn(Ro,[xee,bp]),dm=bp(),[bee,Ii]=Ll(Ro),[_ee,See]=Ll(Ro),rD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:p,form:b}=t,y=dm(e),[x,v]=m.useState(null),[g,w]=m.useState(null),[S,_]=m.useState(!1),C=Dl(u),[E,N]=pr({prop:r,defaultProp:s??!1,onChange:i,caller:Ro}),[k,T]=pr({prop:o,defaultProp:a,onChange:c,caller:Ro}),j=m.useRef(null),I=x?b||!!x.closest("form"):!0,[q,P]=m.useState(new Set),V=Array.from(q).map(U=>U.props.value).join(";");return l.jsx(D$,{...y,children:l.jsxs(bee,{required:p,scope:e,trigger:x,onTriggerChange:v,valueNode:g,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:_,contentId:Dr(),value:k,onValueChange:T,open:E,onOpenChange:N,dir:C,triggerPointerDownPosRef:j,disabled:f,children:[l.jsx(cm.Provider,{scope:e,children:l.jsx(_ee,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(U=>{P(G=>new Set(G).add(U))},[]),onNativeOptionRemove:m.useCallback(U=>{P(G=>{const A=new Set(G);return A.delete(U),A})},[]),children:n})}),I?l.jsxs(kD,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:U=>T(U.target.value),disabled:f,form:b,children:[k===void 0?l.jsx("option",{value:""}):null,Array.from(q)]},V):null]})})};rD.displayName=Ro;var sD="SelectTrigger",iD=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=dm(n),o=Ii(sD,n),a=o.disabled||r,c=me(e,o.onTriggerChange),u=um(n),d=m.useRef("touch"),[h,f,p]=RD(y=>{const x=u().filter(w=>!w.disabled),v=x.find(w=>w.value===o.value),g=jD(x,y,v);g!==void 0&&o.onValueChange(g.value)}),b=y=>{a||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return l.jsx(kR,{asChild:!0,...i,children:l.jsx(ee.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":TD(o.value)?"":void 0,...s,ref:c,onClick:X(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&b(y)}),onPointerDown:X(s.onPointerDown,y=>{d.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:X(s.onKeyDown,y=>{const x=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(x&&y.key===" ")&&yee.includes(y.key)&&(b(),y.preventDefault())})})})});iD.displayName=sD;var oD="SelectValue",aD=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=Ii(oD,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=me(e,c.onValueNodeChange);return vt(()=>{u(d)},[u,d]),l.jsx(ee.span,{...a,ref:h,style:{pointerEvents:"none"},children:TD(c.value)?l.jsx(l.Fragment,{children:o}):i})});aD.displayName=oD;var Cee="SelectIcon",lD=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(ee.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});lD.displayName=Cee;var Eee="SelectPortal",cD=t=>l.jsx(fp,{asChild:!0,...t});cD.displayName=Eee;var jo="SelectContent",uD=m.forwardRef((t,e)=>{const n=Ii(jo,t.__scopeSelect),[r,s]=m.useState();if(vt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ao.createPortal(l.jsx(dD,{scope:t.__scopeSelect,children:l.jsx(cm.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(hD,{...t,ref:e})});uD.displayName=jo;var Qn=10,[dD,Pi]=Ll(jo),Nee="SelectContentImpl",kee=rl("SelectContent.RemoveScroll"),hD=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:b,hideWhenDetached:y,avoidCollisions:x,...v}=t,g=Ii(jo,n),[w,S]=m.useState(null),[_,C]=m.useState(null),E=me(e,Y=>S(Y)),[N,k]=m.useState(null),[T,j]=m.useState(null),I=um(n),[q,P]=m.useState(!1),V=m.useRef(!1);m.useEffect(()=>{if(w)return C2(w)},[w]),g2();const U=m.useCallback(Y=>{const[Ee,...Le]=I().map(_e=>_e.ref.current),[Se]=Le.slice(-1),xe=document.activeElement;for(const _e of Y)if(_e===xe||(_e==null||_e.scrollIntoView({block:"nearest"}),_e===Ee&&_&&(_.scrollTop=0),_e===Se&&_&&(_.scrollTop=_.scrollHeight),_e==null||_e.focus(),document.activeElement!==xe))return},[I,_]),G=m.useCallback(()=>U([N,w]),[U,N,w]);m.useEffect(()=>{q&&G()},[q,G]);const{onOpenChange:A,triggerPointerDownPosRef:L}=g;m.useEffect(()=>{if(w){let Y={x:0,y:0};const Ee=Se=>{var xe,_e;Y={x:Math.abs(Math.round(Se.pageX)-(((xe=L.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((_e=L.current)==null?void 0:_e.y)??0))}},Le=Se=>{Y.x<=10&&Y.y<=10?Se.preventDefault():w.contains(Se.target)||A(!1),document.removeEventListener("pointermove",Ee),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",Le,{capture:!0})}}},[w,A,L]),m.useEffect(()=>{const Y=()=>A(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[A]);const[R,W]=RD(Y=>{const Ee=I().filter(xe=>!xe.disabled),Le=Ee.find(xe=>xe.ref.current===document.activeElement),Se=jD(Ee,Y,Le);Se&&setTimeout(()=>Se.ref.current.focus())}),D=m.useCallback((Y,Ee,Le)=>{const Se=!V.current&&!Le;(g.value!==void 0&&g.value===Ee||Se)&&(k(Y),Se&&(V.current=!0))},[g.value]),te=m.useCallback(()=>w==null?void 0:w.focus(),[w]),re=m.useCallback((Y,Ee,Le)=>{const Se=!V.current&&!Le;(g.value!==void 0&&g.value===Ee||Se)&&j(Y)},[g.value]),je=r==="popper"?x0:fD,ze=je===x0?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:b,hideWhenDetached:y,avoidCollisions:x}:{};return l.jsx(dD,{scope:n,content:w,viewport:_,onViewportChange:C,itemRefCallback:D,selectedItem:N,onItemLeave:te,itemTextRefCallback:re,focusSelectedItem:G,selectedItemText:T,position:r,isPositioned:q,searchRef:R,children:l.jsx(gb,{as:kee,allowPinchZoom:!0,children:l.jsx(mb,{asChild:!0,trapped:g.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:X(s,Y=>{var Ee;(Ee=g.trigger)==null||Ee.focus({preventScroll:!0}),Y.preventDefault()}),children:l.jsx(Du,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:l.jsx(je,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:Y=>Y.preventDefault(),...v,...ze,onPlaced:()=>P(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:X(v.onKeyDown,Y=>{const Ee=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!Ee&&Y.key.length===1&&W(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let Se=I().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const xe=Y.target,_e=Se.indexOf(xe);Se=Se.slice(_e+1)}setTimeout(()=>U(Se)),Y.preventDefault()}})})})})})})});hD.displayName=Nee;var Tee="SelectItemAlignedPosition",fD=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ii(jo,n),o=Pi(jo,n),[a,c]=m.useState(null),[u,d]=m.useState(null),h=me(e,E=>d(E)),f=um(n),p=m.useRef(!1),b=m.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:v,focusSelectedItem:g}=o,w=m.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&y&&x&&v){const E=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(i.dir!=="rtl"){const xe=T.left-N.left,_e=k.left-xe,it=E.left-_e,nn=E.width+it,Ss=Math.max(nn,N.width),qr=window.innerWidth-Qn,Cs=h0(_e,[Qn,Math.max(Qn,qr-Ss)]);a.style.minWidth=nn+"px",a.style.left=Cs+"px"}else{const xe=N.right-T.right,_e=window.innerWidth-k.right-xe,it=window.innerWidth-E.right-_e,nn=E.width+it,Ss=Math.max(nn,N.width),qr=window.innerWidth-Qn,Cs=h0(_e,[Qn,Math.max(Qn,qr-Ss)]);a.style.minWidth=nn+"px",a.style.right=Cs+"px"}const j=f(),I=window.innerHeight-Qn*2,q=y.scrollHeight,P=window.getComputedStyle(u),V=parseInt(P.borderTopWidth,10),U=parseInt(P.paddingTop,10),G=parseInt(P.borderBottomWidth,10),A=parseInt(P.paddingBottom,10),L=V+U+q+A+G,R=Math.min(x.offsetHeight*5,L),W=window.getComputedStyle(y),D=parseInt(W.paddingTop,10),te=parseInt(W.paddingBottom,10),re=E.top+E.height/2-Qn,je=I-re,ze=x.offsetHeight/2,Y=x.offsetTop+ze,Ee=V+U+Y,Le=L-Ee;if(Ee<=re){const xe=j.length>0&&x===j[j.length-1].ref.current;a.style.bottom="0px";const _e=u.clientHeight-y.offsetTop-y.offsetHeight,it=Math.max(je,ze+(xe?te:0)+_e+G),nn=Ee+it;a.style.height=nn+"px"}else{const xe=j.length>0&&x===j[0].ref.current;a.style.top="0px";const it=Math.max(re,V+y.offsetTop+(xe?D:0)+ze)+Le;a.style.height=it+"px",y.scrollTop=Ee-re+y.offsetTop}a.style.margin=`${Qn}px 0`,a.style.minHeight=R+"px",a.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,u,y,x,v,i.dir,r]);vt(()=>w(),[w]);const[S,_]=m.useState();vt(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const C=m.useCallback(E=>{E&&b.current===!0&&(w(),g==null||g(),b.current=!1)},[w,g]);return l.jsx(jee,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(ee.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});fD.displayName=Tee;var Ree="SelectPopperPosition",x0=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Qn,...i}=t,o=dm(n);return l.jsx(TR,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});x0.displayName=Ree;var[jee,Ab]=Ll(jo,{}),b0="SelectViewport",pD=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Pi(b0,n),o=Ab(b0,n),a=me(e,i.onViewportChange),c=m.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(cm.Slot,{scope:n,children:l.jsx(ee.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:X(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const b=window.innerHeight-Qn*2,y=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),v=Math.max(y,x);if(v<b){const g=v+p,w=Math.min(b,g),S=g-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});pD.displayName=b0;var mD="SelectGroup",[Iee,Pee]=Ll(mD),Aee=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Dr();return l.jsx(Iee,{scope:n,id:s,children:l.jsx(ee.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Aee.displayName=mD;var gD="SelectLabel",vD=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Pee(gD,n);return l.jsx(ee.div,{id:s.id,...r,ref:e})});vD.displayName=gD;var Yf="SelectItem",[Oee,yD]=Ll(Yf),wD=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Ii(Yf,n),c=Pi(Yf,n),u=a.value===r,[d,h]=m.useState(i??""),[f,p]=m.useState(!1),b=me(e,g=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,g,r,s)}),y=Dr(),x=m.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(Oee,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(g=>{h(w=>w||((g==null?void 0:g.textContent)??"").trim())},[]),children:l.jsx(cm.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(ee.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:X(o.onFocus,()=>p(!0)),onBlur:X(o.onBlur,()=>p(!1)),onClick:X(o.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:X(o.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:X(o.onPointerDown,g=>{x.current=g.pointerType}),onPointerMove:X(o.onPointerMove,g=>{var w;x.current=g.pointerType,s?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(o.onPointerLeave,g=>{var w;g.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:X(o.onKeyDown,g=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&g.key===" "||(wee.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})})})})});wD.displayName=Yf;var hc="SelectItemText",xD=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ii(hc,n),a=Pi(hc,n),c=yD(hc,n),u=See(hc,n),[d,h]=m.useState(null),f=me(e,v=>h(v),c.onItemTextChange,v=>{var g;return(g=a.itemTextRefCallback)==null?void 0:g.call(a,v,c.value,c.disabled)}),p=d==null?void 0:d.textContent,b=m.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=u;return vt(()=>(y(b),()=>x(b)),[y,x,b]),l.jsxs(l.Fragment,{children:[l.jsx(ee.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ao.createPortal(i.children,o.valueNode):null]})});xD.displayName=hc;var bD="SelectItemIndicator",_D=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return yD(bD,n).isSelected?l.jsx(ee.span,{"aria-hidden":!0,...r,ref:e}):null});_D.displayName=bD;var _0="SelectScrollUpButton",SD=m.forwardRef((t,e)=>{const n=Pi(_0,t.__scopeSelect),r=Ab(_0,t.__scopeSelect),[s,i]=m.useState(!1),o=me(e,r.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(ED,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});SD.displayName=_0;var S0="SelectScrollDownButton",CD=m.forwardRef((t,e)=>{const n=Pi(S0,t.__scopeSelect),r=Ab(S0,t.__scopeSelect),[s,i]=m.useState(!1),o=me(e,r.onScrollButtonChange);return vt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(ED,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});CD.displayName=S0;var ED=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Pi("SelectScrollButton",n),o=m.useRef(null),a=um(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),vt(()=>{var d;const u=a().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(ee.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:X(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:X(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:X(s.onPointerLeave,()=>{c()})})}),Dee="SelectSeparator",ND=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(ee.div,{"aria-hidden":!0,...r,ref:e})});ND.displayName=Dee;var C0="SelectArrow",Mee=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=dm(n),i=Ii(C0,n),o=Pi(C0,n);return i.open&&o.position==="popper"?l.jsx(RR,{...s,...r,ref:e}):null});Mee.displayName=C0;var Lee="SelectBubbleInput",kD=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),i=me(r,s),o=Pb(e);return m.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),l.jsx(ee.select,{...n,style:{...ET,...n.style},ref:i,defaultValue:e})});kD.displayName=Lee;function TD(t){return t===""||t===void 0}function RD(t){const e=ft(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function jD(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Fee(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Fee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $ee=rD,ID=iD,Uee=aD,Vee=lD,Bee=cD,PD=uD,zee=pD,AD=vD,OD=wD,Wee=xD,Hee=_D,DD=SD,MD=CD,LD=ND;const qee=$ee,Gee=Uee,FD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(ID,{ref:r,className:$("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(Vee,{asChild:!0,children:l.jsx(Sw,{className:"h-4 w-4 opacity-50"})})]}));FD.displayName=ID.displayName;const $D=m.forwardRef(({className:t,...e},n)=>l.jsx(DD,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(W5,{className:"h-4 w-4"})}));$D.displayName=DD.displayName;const UD=m.forwardRef(({className:t,...e},n)=>l.jsx(MD,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(Sw,{className:"h-4 w-4"})}));UD.displayName=MD.displayName;const VD=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(Bee,{children:l.jsxs(PD,{ref:s,className:$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx($D,{}),l.jsx(zee,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(UD,{})]})}));VD.displayName=PD.displayName;const Kee=m.forwardRef(({className:t,...e},n)=>l.jsx(AD,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Kee.displayName=AD.displayName;const BD=m.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(OD,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(Hee,{children:l.jsx(sl,{className:"h-4 w-4"})})}),l.jsx(Wee,{children:e})]}));BD.displayName=OD.displayName;const Yee=m.forwardRef(({className:t,...e},n)=>l.jsx(LD,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));Yee.displayName=LD.displayName;var hm="Switch",[Qee,Hte]=mn(hm),[Jee,Xee]=Qee(hm),zD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,p]=m.useState(null),b=me(e,w=>p(w)),y=m.useRef(!1),x=f?d||!!f.closest("form"):!0,[v,g]=pr({prop:s,defaultProp:i??!1,onChange:u,caller:hm});return l.jsxs(Jee,{scope:n,checked:v,disabled:a,children:[l.jsx(ee.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":GD(v),"data-disabled":a?"":void 0,disabled:a,value:c,...h,ref:b,onClick:X(t.onClick,w=>{g(S=>!S),x&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),x&&l.jsx(qD,{control:f,bubbles:!y.current,name:r,value:c,checked:v,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});zD.displayName=hm;var WD="SwitchThumb",HD=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Xee(WD,n);return l.jsx(ee.span,{"data-state":GD(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});HD.displayName=WD;var Zee="SwitchBubbleInput",qD=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),a=me(o,i),c=Pb(n),u=Aw(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const b=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(b)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qD.displayName=Zee;function GD(t){return t?"checked":"unchecked"}var KD=zD,ete=HD;const YD=m.forwardRef(({className:t,...e},n)=>l.jsx(KD,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:l.jsx(ete,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));YD.displayName=KD.displayName;function tte({room:t,players:e,currentPlayerId:n,isHost:r,categories:s,onStartGame:i,onRestartGame:o,onLeave:a}){const[c,u]=m.useState(""),[d,h]=m.useState(!1),[f,p]=m.useState(!1),b=e.find(g=>g.id===n),y=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[B("room"),": ",t.code]}),l.jsxs("p",{className:"text-white/60",children:[B("waitingPlayers")," (",e.length,"/10 ",B("people"),")"]})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),l.jsx("div",{className:"space-y-2",children:e.map(g=>l.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-white/5",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"flex-1",children:g.name}),g.is_host&&l.jsxs(ku,{variant:"secondary",className:"bg-purple-500/20",children:[" ",B("host")]})]},g.id))})]})}),r&&l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ft,{htmlFor:"category",className:"text-white/80",children:B("category")}),l.jsxs(qee,{value:c,onValueChange:u,children:[l.jsx(FD,{id:"category",className:"bg-black/30 border-white/20 text-white",children:l.jsx(Gee,{})}),l.jsx(VD,{children:s.map(g=>l.jsx(BD,{value:g,children:g},g))})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Ft,{htmlFor:"mr-white",className:"text-white/80",children:B("includeMrWhite")}),l.jsx(YD,{id:"mr-white",checked:d,onCheckedChange:g=>{console.log("Mr. White toggled:",g),h(g)}})]}),l.jsx(M,{onClick:()=>{console.log("Starting game with:",{selectedCategory:c,includeMrWhite:d}),i(c,d)},disabled:e.length<4,className:"w-full bg-purple-500 hover:bg-purple-600",children:e.length<4?B("needMinPlayers"):B("startGame")})]})})]}),x=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:B("seeYourWord")}),l.jsx("p",{className:"text-white/60",children:B("tapToReveal")})]}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsx(qs,{className:"p-8",children:l.jsx("div",{className:"relative h-48 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 cursor-pointer select-none",onMouseDown:()=>p(!0),onMouseUp:()=>p(!1),onMouseLeave:()=>p(!1),onTouchStart:()=>p(!0),onTouchEnd:()=>p(!1),children:f?l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-sm text-white/80 mb-2",children:[B("yourWordIs"),":"]}),l.jsx("p",{className:"text-4xl font-bold",children:b==null?void 0:b.word}),l.jsxs("p",{className:"text-xs text-white/60 mt-2",children:[B("role"),": ",b==null?void 0:b.role]})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(Gv,{className:"w-12 h-12 mb-2 mx-auto"}),l.jsx("p",{children:B("holdToSee")})]})})})}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("playersInRoom"),":"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.map(g=>l.jsxs("div",{className:"p-3 rounded bg-white/5 flex items-center gap-2",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-8 h-8 rounded-full object-cover border-2 border-white/40"}),l.jsx("span",{className:"text-sm",children:g.name})]},g.id))})]})}),r&&l.jsxs(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:[" ",B("restartGame")]})]}),v=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"text-center",children:l.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[" ",B("gameOver"),"!"]})}),l.jsx(Hs,{className:"bg-black/40 backdrop-blur-md border-white/10",children:l.jsxs(qs,{className:"p-4",children:[l.jsxs("h3",{className:"font-semibold mb-3 text-white/80",children:[B("finalResult"),":"]}),l.jsx("div",{className:"space-y-2",children:e.map(g=>l.jsx("div",{className:`p-3 rounded ${g.is_alive?"bg-green-900/20":"bg-red-900/20"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:`/king-s-cup-party/${g.avatar||1}.jpg`,alt:g.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white/40"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"font-semibold",children:[g.name," ",g.is_alive?"":""]}),l.jsxs("div",{className:"text-sm text-white/60",children:[g.role," - ",g.word]})]})]})},g.id))})]})}),r&&l.jsx(M,{onClick:o,className:"w-full bg-purple-500 hover:bg-purple-600",children:B("restartGame")})]});return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 sm:p-6 relative",children:[l.jsx(hO,{active:t.game_phase==="FINISHED",duration:5e3}),l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/80 to-black/80"}),l.jsxs(M,{variant:"ghost",onClick:a,className:"absolute top-4 left-4 text-white/70 hover:text-white z-20",children:[l.jsx(wl,{className:"w-5 h-5 mr-2"}),B("leaveRoom")]}),l.jsx("div",{className:"flex-1 flex items-center justify-center relative z-10",children:l.jsxs("div",{className:"w-full max-w-2xl",children:[t.game_phase==="WAITING"&&y(),(t.game_phase==="REVEAL_WORD"||t.game_phase==="DESCRIBE"||t.game_phase==="VOTING"||t.game_phase==="VOTE_RESULT")&&x(),t.game_phase==="FINISHED"&&v()]})})]})}const po=[{id:"default",name:"",nameEn:"Classic",colors:{primary:"#8b5cf6",secondary:"#ec4899",accent:"#f59e0b",background:"rgba(0, 0, 0, 0.6)",cardBg:"rgba(0, 0, 0, 0.4)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.6)"},gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundImage:"url('/king-s-cup-party/bg-party.jpg')"},{id:"neon",name:"",nameEn:"Neon",colors:{primary:"#00ff88",secondary:"#00d9ff",accent:"#ff00ff",background:"rgba(10, 10, 30, 0.8)",cardBg:"rgba(20, 20, 40, 0.6)",text:"#00ff88",textSecondary:"rgba(0, 255, 136, 0.6)"},gradient:"linear-gradient(135deg, #00ff88 0%, #00d9ff 50%, #ff00ff 100%)"},{id:"sunset",name:"",nameEn:"Sunset",colors:{primary:"#ff6b6b",secondary:"#ffd93d",accent:"#ff8c42",background:"rgba(20, 10, 30, 0.7)",cardBg:"rgba(40, 20, 40, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #ff6b6b 0%, #ff8c42 50%, #ffd93d 100%)"},{id:"ocean",name:"",nameEn:"Ocean",colors:{primary:"#0066ff",secondary:"#00ccff",accent:"#00ffcc",background:"rgba(0, 20, 40, 0.8)",cardBg:"rgba(0, 40, 80, 0.5)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #0066ff 0%, #00ccff 50%, #00ffcc 100%)"},{id:"forest",name:"",nameEn:"Forest",colors:{primary:"#2d6a4f",secondary:"#52b788",accent:"#95d5b2",background:"rgba(20, 30, 20, 0.8)",cardBg:"rgba(30, 50, 30, 0.6)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.7)"},gradient:"linear-gradient(135deg, #2d6a4f 0%, #52b788 50%, #95d5b2 100%)"},{id:"royal",name:"",nameEn:"Royal",colors:{primary:"#6d28d9",secondary:"#a855f7",accent:"#fbbf24",background:"rgba(20, 10, 40, 0.8)",cardBg:"rgba(40, 20, 60, 0.6)",text:"#fbbf24",textSecondary:"rgba(251, 191, 36, 0.7)"},gradient:"linear-gradient(135deg, #6d28d9 0%, #a855f7 50%, #fbbf24 100%)"},{id:"dark",name:"",nameEn:"Dark",colors:{primary:"#374151",secondary:"#6b7280",accent:"#9ca3af",background:"rgba(0, 0, 0, 0.9)",cardBg:"rgba(20, 20, 20, 0.8)",text:"#f3f4f6",textSecondary:"rgba(243, 244, 246, 0.6)"},gradient:"linear-gradient(135deg, #1f2937 0%, #374151 100%)"},{id:"candy",name:"",nameEn:"Candy",colors:{primary:"#ff69b4",secondary:"#ffd700",accent:"#00bfff",background:"rgba(255, 192, 203, 0.2)",cardBg:"rgba(255, 255, 255, 0.3)",text:"#ffffff",textSecondary:"rgba(255, 255, 255, 0.8)"},gradient:"linear-gradient(135deg, #ff69b4 0%, #ffd700 50%, #00bfff 100%)"}],QD="party-games-theme";function Ob(){if(typeof window>"u")return po[0];const t=localStorage.getItem(QD);return po.find(e=>e.id===t)||po[0]}function JD(t){if(typeof window>"u")return;const e=po.find(r=>r.id===t);if(!e)return;localStorage.setItem(QD,t);const n=document.documentElement;n.style.setProperty("--color-primary",e.colors.primary),n.style.setProperty("--color-secondary",e.colors.secondary),n.style.setProperty("--color-accent",e.colors.accent),n.style.setProperty("--color-background",e.colors.background),n.style.setProperty("--color-card-bg",e.colors.cardBg),n.style.setProperty("--color-text",e.colors.text),n.style.setProperty("--color-text-secondary",e.colors.textSecondary),n.style.setProperty("--gradient",e.gradient),window.dispatchEvent(new CustomEvent("themechange",{detail:e}))}function nte(){if(typeof window>"u")return;const t=Ob();JD(t.id)}function rd(){const[t,e]=m.useState(Ob());return m.useEffect(()=>{const n=r=>{e(r.detail)};return window.addEventListener("themechange",n),()=>{window.removeEventListener("themechange",n)}},[]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 transition-all duration-1000 ease-out",style:{background:t.gradient}}),t.backgroundImage&&l.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-20 transition-opacity duration-1000",style:{backgroundImage:t.backgroundImage}}),l.jsx("div",{className:"absolute inset-0 bg-black/30 transition-colors duration-1000"}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute w-96 h-96 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.primary,top:"10%",left:"10%",animationDelay:"0s",animationDuration:"8s"}}),l.jsx("div",{className:"absolute w-80 h-80 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.secondary,top:"60%",right:"10%",animationDelay:"2s",animationDuration:"10s"}}),l.jsx("div",{className:"absolute w-64 h-64 rounded-full blur-3xl opacity-20 animate-float",style:{backgroundColor:t.colors.accent,bottom:"20%",left:"50%",animationDelay:"4s",animationDuration:"12s"}})]})]})}function rte(){const[t,e]=m.useState([]),[n,r]=m.useState(!1),[s,i]=m.useState(null),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(!1),{toast:f}=Wt();m.useEffect(()=>{n&&p()},[n]);const p=async()=>{const{data:w,error:S}=await O.from("paranoia_questions").select("*").order("created_at",{ascending:!1});if(S){console.error("Error loading questions:",S);return}const _=(w||[]).map(C=>({...C,is_default:C.is_default??!1}));e(_)},b=async()=>{if(!o.trim()){f({title:" ",variant:"destructive"});return}const{error:w}=await O.from("paranoia_questions").insert({question:o.trim(),is_default:!1});if(w){console.error("Error adding question:",w),f({title:" ",variant:"destructive"});return}f({title:" !"}),a(""),p()},y=async()=>{if(!s||!o.trim())return;if(s.is_default){f({title:" ",variant:"destructive"});return}const{error:w}=await O.from("paranoia_questions").update({question:o.trim()}).eq("id",s.id);if(w){console.error("Error updating question:",w),f({title:" ",variant:"destructive"});return}f({title:" !"}),i(null),a(""),p()},x=async w=>{if(w.is_default){f({title:" ",variant:"destructive"});return}const{error:S}=await O.from("paranoia_questions").delete().eq("id",w.id);if(S){console.error("Error deleting question:",S),f({title:" ",variant:"destructive"});return}f({title:" !"}),p()},v=async()=>{h(!0);try{const w=await _Z(5),{error:S}=await O.from("paranoia_questions").insert(w.map(_=>({question:_,is_default:!1})));if(S)throw S;f({title:"  5  AI !",description:""}),p()}catch(w){console.error("Error generating AI questions:",w),f({title:" ",variant:"destructive"})}finally{h(!1)}},g=t.filter(w=>w.question.toLowerCase().includes(c.toLowerCase()));return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(Yv,{className:"w-4 h-4"}),""]})}),l.jsxs(yr,{className:"sm:max-w-[600px] max-h-[90vh]",children:[l.jsx(wr,{children:l.jsx(xr,{className:"text-2xl",children:" Paranoia"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:v,disabled:d,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:[l.jsx(ha,{className:"w-4 h-4 mr-2"}),d?" AI...":"  AI (5 )"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ft,{htmlFor:"question",children:s?"":""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{id:"question",value:o,onChange:w=>a(w.target.value),placeholder:" ?",onKeyDown:w=>{w.key==="Enter"&&(s?y():b())}}),s?l.jsxs(l.Fragment,{children:[l.jsx(M,{onClick:y,children:""}),l.jsx(M,{variant:"outline",onClick:()=>{i(null),a("")},children:""})]}):l.jsx(M,{onClick:b,children:l.jsx(Fu,{className:"w-4 h-4"})})]})]}),l.jsx(be,{placeholder:"...",value:c,onChange:w=>u(w.target.value)}),l.jsx(Ml,{className:"h-[400px] pr-4",children:l.jsx("div",{className:"space-y-2",children:g.length===0?l.jsx("p",{className:"text-center text-muted-foreground py-8",children:c?"":" "}):g.map(w=>l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm",children:w.question}),w.is_default&&l.jsx("span",{className:"text-xs text-muted-foreground",children:"()"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>{if(w.is_default){f({title:" ",variant:"destructive"});return}i(w),a(w.question)},disabled:w.is_default,children:l.jsx(Yv,{className:"w-4 h-4"})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>x(w),disabled:w.is_default,children:l.jsx(Zc,{className:"w-4 h-4"})})]})]},w.id))})}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",g.length," "]})]})]})]})}function ste({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState("select"),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(null),[f,p]=m.useState(!1),b=async()=>{if(!o.trim())return;const v=await t(o.trim());v&&h(v)},y=async()=>{!o.trim()||!c.trim()||await e(c.trim(),o.trim())},x=()=>{d&&(navigator.clipboard.writeText(d),p(!0),setTimeout(()=>p(!1),2e3))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[l.jsx(rd,{}),l.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Paranoia"}),l.jsx("p",{className:"text-white/70",children:" / "})]}),l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(rte,{})}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[s==="select"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:()=>i("create"),className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[l.jsx(Bn,{className:"w-5 h-5 mr-2"}),""]}),l.jsx(M,{onClick:()=>i("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),s==="create"&&!d&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsx(M,{onClick:b,disabled:r||!o.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]}),s==="create"&&d&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-white/80",children:":"}),l.jsx("div",{onClick:x,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:l.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:d})}),l.jsx(M,{onClick:x,variant:"outline",className:"border-white/30 text-white",children:f?l.jsxs(l.Fragment,{children:[l.jsx(sl,{className:"w-4 h-4 mr-2"})," !"]}):l.jsxs(l.Fragment,{children:[l.jsx(xo,{className:"w-4 h-4 mr-2"})," "]})}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),s==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:c,onChange:v=>u(v.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),l.jsx(M,{onClick:y,disabled:r||!o.trim()||!c.trim(),className:"w-full bg-gradient-to-r from-red-600 to-pink-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function ite({gameState:t,myId:e,players:n,onSelectVictim:r,onRevealQuestion:s,onSkipQuestion:i,onNextRound:o}){const a=e===t.asker_id,c=e===t.victim_id,u=d=>{var h;return((h=n.find(f=>f.id===d))==null?void 0:h.name)||"Unknown"};return t.phase==="ASKING"&&a?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-red-900 to-red-800 p-6 text-white text-center rounded-2xl shadow-2xl border border-red-700",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-bold mb-4",children:"! ()"}),l.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-black/40 p-4 rounded-xl mb-6 border border-red-500/50",children:l.jsxs("p",{className:"text-lg italic",children:['"',t.question,'"']})}),l.jsx("p",{className:"text-sm opacity-80 mb-4",children:":"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.filter(d=>d.id!==e).map((d,h)=>l.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*h},children:l.jsx(M,{onClick:()=>r(d.id),className:"w-full bg-red-700 hover:bg-red-600 text-white py-4",children:d.name})},d.id))})]}):t.phase==="ASKING"?l.jsxs(pe.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center p-10",children:[l.jsx(pe.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"text-6xl mb-6",children:""}),l.jsxs("p",{className:"text-xl text-white",children:[l.jsx("span",{className:"font-bold text-yellow-400",children:u(t.asker_id)})," ","..."]}),l.jsx("p",{className:"text-sm text-white/60 mt-2",children:"..."})]}):t.phase==="REVEALING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-br from-slate-800 to-slate-900 text-white rounded-2xl border border-slate-700",children:[l.jsxs("h2",{className:"text-lg mb-2",children:[l.jsx("span",{className:"text-red-400 font-bold",children:u(t.asker_id)})," ","..."]}),l.jsxs(pe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5,delay:.3},className:"text-4xl font-bold text-yellow-400 my-4",children:[" ",u(t.victim_id)]}),l.jsx(Hp,{mode:"wait",children:t.is_revealed?l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 bg-white text-black p-6 rounded-xl",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"..."}),l.jsxs(pe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-xl font-bold",children:['"',t.question,'"']}),l.jsx(M,{onClick:o,className:"mt-6 bg-blue-600 hover:bg-blue-500",children:" "})]},"revealed"):l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-6 space-y-4",children:c?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-lg",children:["?"," ",l.jsx("span",{className:"text-2xl",children:""})]}),l.jsx(M,{onClick:s,className:"w-full bg-pink-600 hover:bg-pink-500 py-6 text-xl font-bold",children:" "}),l.jsx(M,{onClick:i,variant:"ghost",className:"w-full text-white/60 hover:text-white",children:" "})]}):l.jsxs("p",{className:"text-white/70",children:[""," ",l.jsx("span",{className:"text-yellow-400",children:u(t.victim_id)})," ","..."]})},"unrevealed")})]}):l.jsx("div",{className:"text-white text-center",children:"Loading..."})}function ote({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onSelectVictim:o,onRevealQuestion:a,onSkipQuestion:c,onLeave:u}){const d=t.game_state;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[l.jsx(rd,{}),l.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[l.jsxs(M,{variant:"ghost",size:"sm",onClick:u,className:"text-white hover:bg-white/10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs("div",{className:"text-white text-center",children:[l.jsx("p",{className:"text-sm opacity-70",children:""}),l.jsx("p",{className:"font-mono font-bold",children:t.code})]}),l.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.jsx(Bn,{className:"w-4 h-4"}),l.jsx("span",{children:e.length})]})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?d?l.jsx("div",{className:"w-full max-w-sm",children:l.jsx(ite,{gameState:d,myId:n||"",players:e,onSelectVictim:o,onRevealQuestion:a,onSkipQuestion:c,onNextRound:i})}):l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),l.jsx("p",{children:"..."})]}):l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Paranoia"}),l.jsx("p",{className:"text-white/70",children:"..."})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),l.jsx("div",{className:"space-y-2",children:e.map((h,f)=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:"flex items-center gap-2 text-white",children:[l.jsx("span",{className:"text-lg",children:h.is_host?"":""}),l.jsx("span",{children:h.name}),h.id===n&&l.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},h.id))})]}),r&&e.length>=3&&l.jsxs(M,{onClick:s,className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 py-6 text-lg",children:[l.jsx(Lu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<3&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" 3 "}),!r&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}var Db="Radio",[ate,XD]=mn(Db),[lte,cte]=ate(Db),ZD=m.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:c,form:u,...d}=t,[h,f]=m.useState(null),p=me(e,x=>f(x)),b=m.useRef(!1),y=h?u||!!h.closest("form"):!0;return l.jsxs(lte,{scope:n,checked:s,disabled:o,children:[l.jsx(ee.button,{type:"button",role:"radio","aria-checked":s,"data-state":rM(s),"data-disabled":o?"":void 0,disabled:o,value:a,...d,ref:p,onClick:X(t.onClick,x=>{s||c==null||c(),y&&(b.current=x.isPropagationStopped(),b.current||x.stopPropagation())})}),y&&l.jsx(nM,{control:h,bubbles:!b.current,name:r,value:a,checked:s,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});ZD.displayName=Db;var eM="RadioIndicator",tM=m.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=cte(eM,n);return l.jsx(In,{present:r||i.checked,children:l.jsx(ee.span,{"data-state":rM(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});tM.displayName=eM;var ute="RadioBubbleInput",nM=m.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=m.useRef(null),a=me(o,i),c=Pb(n),u=Aw(e);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&p){const b=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(b)}},[c,n,r]),l.jsx(ee.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nM.displayName=ute;function rM(t){return t?"checked":"unchecked"}var dte=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fm="RadioGroup",[hte,qte]=mn(fm,[sm,XD]),sM=sm(),iM=XD(),[fte,pte]=hte(fm),oM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...f}=t,p=sM(n),b=Dl(u),[y,x]=pr({prop:i,defaultProp:s??null,onChange:h,caller:fm});return l.jsx(fte,{scope:n,name:r,required:o,disabled:a,value:y,onValueChange:x,children:l.jsx(xO,{asChild:!0,...p,orientation:c,dir:b,loop:d,children:l.jsx(ee.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":a?"":void 0,dir:b,...f,ref:e})})})});oM.displayName=fm;var aM="RadioGroupItem",lM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=pte(aM,n),o=i.disabled||r,a=sM(n),c=iM(n),u=m.useRef(null),d=me(e,u),h=i.value===s.value,f=m.useRef(!1);return m.useEffect(()=>{const p=y=>{dte.includes(y.key)&&(f.current=!0)},b=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",b)}},[]),l.jsx(bO,{asChild:!0,...a,focusable:!o,active:h,children:l.jsx(ZD,{disabled:o,required:i.required,checked:h,...c,...s,name:i.name,ref:d,onCheck:()=>i.onValueChange(s.value),onKeyDown:X(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:X(s.onFocus,()=>{var p;f.current&&((p=u.current)==null||p.click())})})})});lM.displayName=aM;var mte="RadioGroupIndicator",cM=m.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=iM(n);return l.jsx(tM,{...s,...r,ref:e})});cM.displayName=mte;var uM=oM,dM=lM,gte=cM;const hM=m.forwardRef(({className:t,...e},n)=>l.jsx(uM,{className:$("grid gap-2",t),...e,ref:n}));hM.displayName=uM.displayName;const fM=m.forwardRef(({className:t,...e},n)=>l.jsx(dM,{ref:n,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:l.jsx(gte,{className:"flex items-center justify-center",children:l.jsx(H5,{className:"h-2.5 w-2.5 fill-current text-current"})})}));fM.displayName=dM.displayName;function vte({onCreateRoom:t,onJoinRoom:e,onBack:n,isLoading:r}){const[s,i]=m.useState("select"),[o,a]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(null),[f,p]=m.useState(!1),[b,y]=m.useState(5),x=async()=>{if(!o.trim())return;const w=await t(o.trim(),b);w&&h(w)},v=async()=>{!o.trim()||!c.trim()||await e(c.trim(),o.trim())},g=()=>{d&&(navigator.clipboard.writeText(d),p(!0),setTimeout(()=>p(!1),2e3))};return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col items-center justify-center p-4 relative",children:[l.jsx(rd,{}),l.jsxs(M,{variant:"ghost",size:"sm",onClick:n,className:"absolute top-4 left-4 text-white hover:bg-white/10 z-10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"5 Second Rule"}),l.jsx("p",{className:"text-white/70",children:" 3 ...  5 !"})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-2xl p-6 border border-white/10",children:[s==="select"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs(M,{onClick:()=>i("create"),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[l.jsx(Bn,{className:"w-5 h-5 mr-2"}),""]}),l.jsx(M,{onClick:()=>i("join"),variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 py-6 text-lg",children:""})]}),s==="create"&&!d&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:w=>a(w.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-white/80 text-sm mb-3 block flex items-center gap-2",children:[l.jsx(q5,{className:"w-4 h-4"}),""]}),l.jsx(hM,{value:b.toString(),onValueChange:w=>y(Number(w)),children:l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[5,10,15,20].map(w=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(fM,{value:w.toString(),id:`time-${w}`,className:"border-white/40"}),l.jsxs(Ft,{htmlFor:`time-${w}`,className:"text-white cursor-pointer",children:[w," "]})]},w))})})]}),l.jsx(M,{onClick:x,disabled:r||!o.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]}),s==="create"&&d&&l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx("p",{className:"text-white/80",children:":"}),l.jsx("div",{onClick:g,className:"bg-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/20 transition-colors",children:l.jsx("p",{className:"text-4xl font-mono font-bold text-white tracking-wider",children:d})}),l.jsx(M,{onClick:g,variant:"outline",className:"border-white/30 text-white",children:f?l.jsxs(l.Fragment,{children:[l.jsx(sl,{className:"w-4 h-4 mr-2"})," !"]}):l.jsxs(l.Fragment,{children:[l.jsx(xo,{className:"w-4 h-4 mr-2"})," "]})}),l.jsx("p",{className:"text-white/60 text-sm",children:""})]}),s==="join"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:o,onChange:w=>a(w.target.value),placeholder:"...",className:"bg-white/10 border-white/20 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-white/80 text-sm mb-2 block",children:""}),l.jsx(be,{value:c,onChange:w=>u(w.target.value.toUpperCase()),placeholder:"XXXXXX",className:"bg-white/10 border-white/20 text-white text-center font-mono tracking-wider",maxLength:6})]}),l.jsx(M,{onClick:v,disabled:r||!o.trim()||!c.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600",children:r?"...":""}),l.jsx(M,{variant:"ghost",onClick:()=>i("select"),className:"w-full text-white/60",children:""})]})]})]})]})}function yte({gameState:t,myId:e,players:n,onFinishAnswering:r,onVote:s,onNextRound:i}){const o=t.timeLimit||5,[a,c]=m.useState(o),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=n.find(_=>_.id===t.player_id),b=e===t.player_id,y=Object.keys(t.votes||{}).includes(e),x=Object.values(t.votes||{}).length,v=Object.values(t.votes||{}).filter(Boolean).length,g=x-v,w=n.filter(_=>_.id!==t.player_id).length;m.useEffect(()=>{if(t.phase!=="PLAYING")return;const _=setInterval(()=>{const C=Date.now(),N=(new Date(t.end_time).getTime()-C)/1e3;N<=0?(c(0),d(!0),clearInterval(_)):c(N)},100);return()=>clearInterval(_)},[t.end_time,t.phase]),m.useEffect(()=>{t.phase==="PLAYING"&&(d(!1),c(t.timeLimit||5),f(!1))},[t.player_id,t.phase,t.timeLimit]),m.useEffect(()=>{console.log("FiveSecGame state:",{phase:t.phase,player_id:t.player_id,isMe:b,hasVoted:y,voteCount:x,totalVoters:w})},[t.phase,t.player_id,b,y,x,w]);const S=()=>b?a<=1?"from-red-600 to-red-800":a<=2?"from-orange-500 to-red-600":a<=3?"from-yellow-500 to-orange-500":"from-orange-500 to-yellow-600":a<=1?"from-red-600 to-pink-800":a<=2?"from-purple-500 to-red-600":a<=3?"from-indigo-500 to-purple-500":"from-blue-500 to-indigo-700";return t.phase==="PLAYING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`p-6 text-center rounded-2xl text-white bg-gradient-to-br ${S()} transition-colors duration-300 shadow-2xl`,children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("span",{className:"text-sm opacity-80",children:":"}),l.jsx("h2",{className:"text-2xl font-bold",children:p==null?void 0:p.name})]}),l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white text-black p-6 rounded-xl shadow-lg my-6",children:[l.jsx("p",{className:"text-gray-500 mb-2 text-sm",children:" 3 ..."}),l.jsx("h1",{className:"text-xl md:text-2xl font-extrabold",children:t.topic})]}),l.jsx(pe.div,{animate:{scale:a<=2?[1,1.05,1]:1},transition:{repeat:a<=2?1/0:0,duration:.5},className:"relative w-32 h-32 mx-auto flex items-center justify-center border-4 border-white rounded-full bg-black/30",children:l.jsx("span",{className:"text-5xl font-mono font-bold",children:a>0?a.toFixed(1):""})}),b&&l.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:l.jsx(M,{onClick:r,className:"mt-6 w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 text-xl shadow-lg",children:a>0?" !":" "})}),!b&&l.jsxs("p",{className:"mt-4 text-sm opacity-80",children:[" ",p==null?void 0:p.name," ",a>0?"":"","..."]})]}):t.phase==="JUDGING"?l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-6 text-center rounded-2xl bg-gradient-to-br from-purple-800 to-indigo-900 text-white shadow-2xl",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-bold mb-2",children:"!"}),l.jsxs("p",{className:"text-lg mb-4",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:p==null?void 0:p.name})," ",""]}),l.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-6",children:[l.jsx("p",{className:"text-sm opacity-80",children:":"}),l.jsx("p",{className:"text-lg font-bold",children:t.topic})]}),l.jsx(Hp,{mode:"wait",children:!b&&!y&&l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsx(M,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-500 py-6 text-xl font-bold",children:" "}),l.jsx(M,{onClick:()=>s(!1),className:"bg-red-600 hover:bg-red-500 py-6 text-xl font-bold",children:" "})]})}),y&&!b&&l.jsx("p",{className:"text-green-400 mb-4",children:" "}),b&&l.jsx("p",{className:"text-yellow-400 mb-4",children:"..."}),l.jsxs("div",{className:"bg-black/30 rounded-xl p-4 mb-6",children:[l.jsxs("p",{className:"text-sm opacity-80 mb-2",children:[": ",x,"/",w]}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsxs("span",{className:"text-green-400 text-lg",children:[" ",v]}),l.jsxs("span",{className:"text-red-400 text-lg",children:[" ",g]})]})]}),x>=w&&l.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[l.jsx("div",{className:"text-2xl font-bold mb-4",children:v>g?l.jsx("span",{className:"text-green-400",children:" !"}):l.jsx("span",{className:"text-red-400",children:" !"})}),l.jsx(M,{onClick:i,className:"bg-blue-600 hover:bg-blue-500 px-8",children:" "})]})]}):l.jsx("div",{className:"text-white text-center",children:"Loading..."})}function wte({room:t,players:e,currentPlayerId:n,isHost:r,onStartGame:s,onStartRound:i,onFinishAnswering:o,onVote:a,onLeave:c}){const u=t.game_state;return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] flex flex-col p-4 relative",children:[l.jsx(rd,{}),l.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[l.jsxs(M,{variant:"ghost",size:"sm",onClick:c,className:"text-white hover:bg-white/10",children:[l.jsx(wl,{className:"w-4 h-4 mr-2"}),""]}),l.jsxs("div",{className:"text-white text-center",children:[l.jsx("p",{className:"text-sm opacity-70",children:""}),l.jsx("p",{className:"font-mono font-bold",children:t.code})]}),l.jsxs("div",{className:"flex items-center gap-1 text-white",children:[l.jsx(Bn,{className:"w-4 h-4"}),l.jsx("span",{children:e.length})]})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10",children:t.game_started?u?l.jsx("div",{className:"w-full max-w-sm",children:l.jsx(yte,{gameState:u,myId:n||"",players:e,onFinishAnswering:o,onVote:a,onNextRound:i})}):l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:""}),l.jsx("p",{children:"..."})]}):l.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white",children:"5 Second Rule"}),l.jsx("p",{className:"text-white/70",children:"..."}),(u==null?void 0:u.timeLimit)&&l.jsxs("p",{className:"text-yellow-400 text-sm mt-2",children:[" : ",u.timeLimit," "]})]}),l.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-xl p-4 mb-6 border border-white/10",children:[l.jsx("p",{className:"text-white/70 text-sm mb-3",children:":"}),l.jsx("div",{className:"space-y-2",children:e.map((d,h)=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:"flex items-center gap-2 text-white",children:[l.jsx("span",{className:"text-lg",children:d.is_host?"":""}),l.jsx("span",{children:d.name}),d.id===n&&l.jsx("span",{className:"text-xs text-yellow-400",children:"()"})]},d.id))})]}),r&&e.length>=2&&l.jsxs(M,{onClick:s,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-6 text-lg",children:[l.jsx(Lu,{className:"w-5 h-5 mr-2"}),""]}),r&&e.length<2&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" 2 "}),!r&&l.jsx("p",{className:"text-center text-white/60 text-sm",children:" Host ..."})]})})]})}function xte(){const[t,e]=m.useState(qf());m.useEffect(()=>{e(qf())},[]);const n=()=>{const r=t==="th"?"en":"th";fZ(r),e(r),window.location.reload()};return l.jsxs(M,{variant:"outline",size:"sm",onClick:n,className:"bg-black/40 backdrop-blur-md border-white/20 text-white hover:bg-black/60",children:[l.jsx(G5,{className:"w-4 h-4 mr-2"}),t==="th"?"TH":"EN"]})}function bte(){const[t,e]=m.useState(Ob()),[n,r]=m.useState(!1),s=qf();m.useEffect(()=>{const o=a=>{e(a.detail)};return window.addEventListener("themechange",o),()=>{window.removeEventListener("themechange",o)}},[]);const i=o=>{JD(o),e(po.find(a=>a.id===o)||po[0])};return l.jsxs(Wr,{open:n,onOpenChange:r,children:[l.jsx(ji,{asChild:!0,children:l.jsx(M,{variant:"outline",size:"icon",className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-all duration-200 hover:scale-110",title:B("themeChange"),children:l.jsx(Y5,{className:"h-5 w-5"})})}),l.jsxs(yr,{className:"sm:max-w-[600px] bg-black/90 backdrop-blur-xl border-white/20",children:[l.jsx(wr,{children:l.jsx(xr,{className:"text-2xl font-bold text-white",children:B("themeSelectTheme")})}),l.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:po.map(o=>l.jsx("button",{onClick:()=>{i(o.id),r(!1)},className:`
                relative p-4 rounded-lg border-2 transition-all duration-300 hover:scale-105
                ${t.id===o.id?"border-white shadow-xl scale-105":"border-white/20 hover:border-white/40"}
              `,style:{background:o.gradient},children:l.jsxs("div",{className:"flex flex-col items-center gap-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.primary}}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.secondary}}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white/50",style:{backgroundColor:o.colors.accent}})]}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"font-bold text-white text-lg",children:s==="th"?o.name:o.nameEn})}),t.id===o.id&&l.jsx("div",{className:"absolute top-2 right-2",children:l.jsx("div",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center",children:l.jsx("span",{className:"text-black text-sm",children:""})})})]})},o.id))})]})]})}const pM=()=>{const{userId:t}=Ix(),[e,n]=m.useState([]),[r,s]=m.useState([]),[i,o]=m.useState([]),[a,c]=m.useState(!0);return m.useEffect(()=>{if(!t){n([]),s([]),o([]),c(!1);return}const x=yt(wt,`users/${t}/friends`),v=yt(wt,`users/${t}/friendRequests`),g=yt(wt,`users/${t}/gameInvites`),w=gg(x,C=>{const E=C.val();if(E){const N=Object.entries(E).map(([k,T])=>({id:k,displayName:T.displayName,addedAt:T.addedAt}));n(N)}else n([]);c(!1)}),S=gg(v,C=>{const E=C.val();if(E){const N=Object.entries(E).map(([k,T])=>({id:k,fromId:T.fromId,fromName:T.fromName,sentAt:T.sentAt}));s(N)}else s([])}),_=gg(g,C=>{const E=C.val();if(E){const k=Object.entries(E).map(([T,j])=>({id:T,fromId:j.fromId,fromName:j.fromName,roomCode:j.roomCode,gameType:j.gameType,gameName:j.gameName,sentAt:j.sentAt})).filter(T=>Date.now()-T.sentAt<10*60*1e3);o(k)}else o([])});return()=>{w(),S(),_()}},[t]),{friends:e,friendRequests:r,gameInvites:i,loading:a,searchUserById:async x=>{if(!x||x===t)return null;const v=yt(wt,`users/${x}`),g=await Qo(v);if(g.exists()){const w=g.val();return{id:w.id,displayName:w.displayName}}return null},sendFriendRequest:async x=>{if(!t)return!1;const v=yt(wt,`users/${t}`),g=await Qo(v);if(!g.exists())return!1;const w=g.val(),S=yt(wt,`users/${t}/friends/${x}`);if((await Qo(S)).exists())return!1;const C=yt(wt,`users/${x}/friendRequests/${t}`);return await ma(C,{fromId:t,fromName:w.displayName,sentAt:Date.now()}),!0},acceptFriendRequest:async(x,v,g)=>{if(!t)return!1;const w=yt(wt,`users/${t}`),S=await Qo(w);if(!S.exists())return!1;const _=S.val(),C=yt(wt,`users/${t}/friends/${v}`),E=yt(wt,`users/${v}/friends/${t}`);await ma(C,{displayName:g,addedAt:Date.now()}),await ma(E,{displayName:_.displayName,addedAt:Date.now()});const N=yt(wt,`users/${t}/friendRequests/${x}`);return await rc(N),!0},declineFriendRequest:async x=>{if(!t)return!1;const v=yt(wt,`users/${t}/friendRequests/${x}`);return await rc(v),!0},removeFriend:async x=>{if(!t)return!1;const v=yt(wt,`users/${t}/friends/${x}`),g=yt(wt,`users/${x}/friends/${t}`);return await rc(v),await rc(g),!0},sendGameInvite:async(x,v,g,w)=>{if(!t)return!1;const S=yt(wt,`users/${t}`),_=await Qo(S);if(!_.exists())return!1;const C=_.val(),E=yt(wt,`users/${x}/gameInvites/${Date.now()}`);return await ma(E,{fromId:t,fromName:C.displayName,roomCode:v,gameType:g,gameName:w,sentAt:Date.now()}),!0},dismissGameInvite:async x=>{if(!t)return!1;const v=yt(wt,`users/${t}/gameInvites/${x}`);return await rc(v),!0}}},_te=({onClose:t,currentRoomCode:e,currentGameType:n,currentGameName:r,onJoinRoom:s})=>{const{userId:i,logout:o}=Ix(),{friends:a,friendRequests:c,gameInvites:u,loading:d,searchUserById:h,sendFriendRequest:f,acceptFriendRequest:p,declineFriendRequest:b,removeFriend:y,sendGameInvite:x,dismissGameInvite:v}=pM(),[g,w]=m.useState(""),[S,_]=m.useState(null),[C,E]=m.useState(!1),[N,k]=m.useState("friends"),[T,j]=m.useState(null),I=async()=>{if(!g.trim())return;E(!0);const D=await h(g.trim());_(D),E(!1),D||qt.error("")},q=async()=>{if(!S)return;await f(S.id)?(qt.success("!"),_(null),w("")):qt.error("")},P=async(D,te,re)=>{await p(D,te,re)&&qt.success(` ${re} !`)},V=async D=>{await b(D),qt.info("")},U=async(D,te)=>{await y(D)&&qt.info(` ${te} `)},G=async(D,te)=>{if(!e||!n||!r){qt.error("");return}j(D);const re=await x(D,e,n,r);j(null),re?qt.success(` ${te} !`):qt.error("")},A=async D=>{await v(D.id),s?(s(D.roomCode),t()):(navigator.clipboard.writeText(D.roomCode),qt.success(` ${D.roomCode} !`))},L=async D=>{await v(D),qt.info("")},R=()=>{i&&(navigator.clipboard.writeText(i),qt.success(" ID !"))},W=async()=>{await o(),t(),qt.info("")};return c.length+u.length,l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:t,children:l.jsxs(pe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-zinc-900 rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden border border-zinc-700",onClick:D=>D.stopPropagation(),children:[l.jsx("div",{className:"bg-gradient-to-r from-cyan-600 to-blue-600 p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:l.jsx(Bn,{size:20})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:""}),l.jsxs("p",{className:"text-xs text-white/70",children:["ID: ",i==null?void 0:i.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M,{size:"icon",variant:"ghost",onClick:R,className:"text-white hover:bg-white/20",children:l.jsx(xo,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:W,className:"text-white hover:bg-white/20",children:l.jsx(vp,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:t,className:"text-white hover:bg-white/20",children:l.jsx(lo,{size:18})})]})]})}),l.jsxs("div",{className:"flex border-b border-zinc-700",children:[l.jsxs("button",{onClick:()=>k("friends"),className:`flex-1 py-3 text-sm font-medium transition-colors ${N==="friends"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(Bn,{size:16,className:"inline mr-1"}),""]}),l.jsxs("button",{onClick:()=>k("requests"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${N==="requests"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(V5,{size:16,className:"inline mr-1"}),"",c.length>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-red-500 rounded-full text-xs",children:c.length})]}),l.jsxs("button",{onClick:()=>k("invites"),className:`flex-1 py-3 text-sm font-medium transition-colors relative ${N==="invites"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:[l.jsx(rS,{size:16,className:"inline mr-1"}),"",u.length>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-green-500 rounded-full text-xs",children:u.length})]}),l.jsx("button",{onClick:()=>k("search"),className:`flex-1 py-3 text-sm font-medium transition-colors ${N==="search"?"text-cyan-400 border-b-2 border-cyan-400":"text-zinc-400 hover:text-white"}`,children:l.jsx(Qv,{size:16,className:"inline"})})]}),l.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:d?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx(Bt,{className:"animate-spin",size:24})}):l.jsxs(l.Fragment,{children:[N==="friends"&&l.jsxs("div",{className:"space-y-2",children:[e&&l.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-green-600/20 to-emerald-600/20 rounded-lg border border-green-500/30",children:[l.jsxs("p",{className:"text-sm text-green-400 flex items-center gap-2",children:[l.jsx(rS,{size:16}),": ",l.jsx("span",{className:"font-bold",children:e})]}),l.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:""})]}),a.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):a.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold",children:D.displayName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:D.displayName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",D.id.slice(0,8),"..."]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[e&&l.jsx(M,{size:"icon",onClick:()=>G(D.id,D.displayName),disabled:T===D.id,className:"bg-green-600 hover:bg-green-700",children:T===D.id?l.jsx(Bt,{className:"animate-spin",size:18}):l.jsx(Q5,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>U(D.id,D.displayName),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(X5,{size:18})})]})]},D.id))]}),N==="requests"&&l.jsx("div",{className:"space-y-2",children:c.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):c.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center font-bold",children:D.fromName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:D.fromName}),l.jsx("p",{className:"text-xs text-zinc-500",children:""})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(M,{size:"icon",onClick:()=>P(D.id,D.fromId,D.fromName),className:"bg-green-600 hover:bg-green-700",children:l.jsx(sl,{size:18})}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>V(D.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(lo,{size:18})})]})]},D.id))}),N==="invites"&&l.jsx("div",{className:"space-y-2",children:u.length===0?l.jsx("p",{className:"text-center text-zinc-500 py-8",children:""}):u.map(D=>l.jsxs(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 bg-zinc-800 rounded-lg border border-green-500/30",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center font-bold",children:D.fromName.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:D.fromName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:[" ",D.gameName]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("div",{className:"flex-1 bg-zinc-900 px-3 py-2 rounded text-sm",children:[l.jsx("span",{className:"text-zinc-400",children:": "}),l.jsx("span",{className:"text-green-400 font-mono font-bold",children:D.roomCode})]}),l.jsxs(M,{size:"sm",onClick:()=>A(D),className:"bg-green-600 hover:bg-green-700",children:[l.jsx(sl,{size:16,className:"mr-1"}),""]}),l.jsx(M,{size:"icon",variant:"ghost",onClick:()=>L(D.id),className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:l.jsx(lo,{size:18})})]}),l.jsxs("p",{className:"text-xs text-zinc-600 mt-2",children:[" ",Math.max(0,Math.ceil((10*60*1e3-(Date.now()-D.sentAt))/6e4))," "]})]},D.id))}),N==="search"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{value:g,onChange:D=>w(D.target.value),placeholder:" ID ...",className:"bg-zinc-800 border-zinc-700"}),l.jsx(M,{onClick:I,disabled:C,children:C?l.jsx(Bt,{className:"animate-spin",size:18}):l.jsx(Qv,{size:18})})]}),S&&l.jsxs(pe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-zinc-800 rounded-lg border border-cyan-500/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center font-bold text-lg",children:S.displayName.charAt(0).toUpperCase()}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-lg",children:S.displayName}),l.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",S.id.slice(0,8),"..."]})]})]}),l.jsxs(M,{onClick:q,className:"bg-cyan-600 hover:bg-cyan-700",children:[l.jsx(YT,{size:18,className:"mr-2"}),""]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-zinc-800/50 rounded-lg",children:[l.jsx("p",{className:"text-sm text-zinc-400 text-center",children:" ID :"}),l.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[l.jsx("code",{className:"bg-zinc-900 px-3 py-2 rounded text-cyan-400 text-sm break-all",children:i}),l.jsx(M,{size:"icon",variant:"ghost",onClick:R,children:l.jsx(xo,{size:16})})]})]})]})]})})]})})},Ste=({currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})=>{const{user:s,loading:i,login:o}=Ix(),{gameInvites:a,friendRequests:c}=pM(),[u,d]=m.useState(!1),[h,f]=m.useState(!1),p=async()=>{f(!0);try{await o(),qt.success("!")}catch{qt.error("")}finally{f(!1)}},b=((a==null?void 0:a.length)||0)+((c==null?void 0:c.length)||0);return i?l.jsx(M,{variant:"ghost",size:"icon",disabled:!0,children:l.jsx(Bt,{className:"animate-spin",size:20})}):l.jsxs(l.Fragment,{children:[s?l.jsxs(M,{onClick:()=>d(!0),className:"bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-700 hover:to-blue-700 relative",children:[l.jsx(Bn,{size:18,className:"mr-2"}),"",b>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center animate-pulse",children:b})]}):l.jsxs(M,{onClick:p,disabled:h,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[h?l.jsx(Bt,{className:"animate-spin mr-2",size:18}):l.jsx(K5,{size:18,className:"mr-2"}),""]}),l.jsx(Hp,{children:u&&l.jsx(_te,{onClose:()=>d(!1),currentRoomCode:t,currentGameType:e,currentGameName:n,onJoinRoom:r})})]})},Cte=()=>{var Mb,Lb,Fb;const[t,e]=m.useState("select"),[n,r]=m.useState([]),[s,i]=m.useState(!1),[o,a]=m.useState(!0),{sessionData:c,hasSession:u,saveSession:d,clearSession:h}=LJ(),[f,p]=m.useState(!1),[b,y]=m.useState({}),{room:x,players:v,currentPlayerId:g,isLoading:w,createRoom:S,joinRoom:_,startGame:C,drawCard:E,reshuffleDeck:N,leaveRoom:k,quickStart:T}=xJ(),{room:j,players:I,currentPlayerId:q,isLoading:P,createRoom:V,joinRoom:U,startGame:G,drawCard:A,standCard:L,dealerDraw:R,dealerStand:W,showdown:D,nextRound:te,leaveRoom:re,quickStart:je,setDealer:ze}=SJ(),{room:Y,players:Ee,currentPlayerId:Le,isLoading:Se,categories:xe,createRoom:_e,joinRoom:it,startGame:nn,startDescribePhase:Ss,nextTurn:qr,startVoting:Cs,votePlayer:Do,checkResultAndContinue:Ai,restartGame:sd,leaveRoom:Es}=OJ(),{room:Oi,players:_r,currentPlayerId:id,isLoading:pm,createRoom:Ht,joinRoom:Sr,startGame:mm,startRound:gm,selectVictim:Mo,revealQuestion:vm,skipQuestion:od,leaveRoom:Lo}=DJ(),{room:Wn,players:Fl,currentPlayerId:Gr,isLoading:ym,createRoom:ad,joinRoom:Fo,startGame:ld,startRound:wm,finishAnswering:$l,vote:Cr,leaveRoom:cd}=MJ(),ce=v.find(ne=>ne.id===g),Te=(ce==null?void 0:ce.is_host)??!1,Ie=I.find(ne=>ne.id===q),vn=(Ie==null?void 0:Ie.is_host)??!1,[ct,yn]=m.useState(0),rt=x?{code:x.code,type:"kingscup",name:B("kingsCup")}:j?{code:j.code,type:"pokdeng",name:B("pokDeng")}:Y?{code:Y.code,type:"undercover",name:B("undercoverTitle")}:Oi?{code:Oi.code,type:"paranoia",name:"Paranoia"}:Wn?{code:Wn.code,type:"5-sec",name:"5 Second Rule"}:null,We=m.useMemo(()=>[{id:"doraemon",emoji:"",name:B("kingsCup"),desc:B("kingsCupDesc"),gradient:"from-red-500 to-orange-500",bgColor:"#ef4444"},{id:"pokdeng",emoji:"",name:B("pokDeng"),desc:B("pokDengDesc"),gradient:"from-emerald-500 to-green-600",bgColor:"#10b981"},{id:"undercover",emoji:"",name:B("undercoverTitle"),desc:B("undercoverDesc"),gradient:"from-purple-600 to-indigo-600",bgColor:"#9333ea"},{id:"paranoia",emoji:"",name:"Paranoia",desc:" - ",gradient:"from-pink-500 to-rose-600",bgColor:"#ec4899"},{id:"5-sec",emoji:"",name:"5 Second Rule",desc:" 5  - ",gradient:"from-yellow-400 to-orange-500",bgColor:"#f59e0b"}],[]),xm=m.useCallback(()=>{yn(ne=>(ne+1)%We.length)},[We.length]),bm=m.useCallback(()=>{yn(ne=>(ne-1+We.length)%We.length)},[We.length]);m.useEffect(()=>{(async()=>{if(!u||!c.roomCode||!c.gameType||!c.playerName){a(!1);return}console.log("Attempting session recovery:",c);try{const Q=c.gameType,ae=c.roomCode,Fe=c.playerName,At=c.playerId;(Q==="doraemon"||Q==="pokdeng"||Q==="undercover"||Q==="paranoia"||Q==="5-sec")&&e(Q);let wn=!1;switch(Q){case"doraemon":wn=await _(ae,Fe,At);break;case"pokdeng":wn=await U(ae,Fe,At);break;case"undercover":wn=await it(ae,Fe,At);break;case"paranoia":wn=await Sr(ae,Fe,At);break;case"5-sec":wn=await Fo(ae,Fe,At);break}wn?console.log("Session recovery successful!"):(console.log("Session recovery failed, clearing session"),h(),e("select"))}catch(Q){console.error("Session recovery error:",Q),h(),e("select")}finally{a(!1)}})()},[u]);const Ul=m.useCallback(async(ne,Q)=>{let ae;switch(Q){case"doraemon":ae=await S(ne);break;case"pokdeng":ae=await V(ne);break;case"undercover":ae=await _e(ne);break;case"paranoia":ae=await Ht(ne);break;case"5-sec":ae=await ad(ne);break}if(ae){const Fe=typeof ae=="string"?ae:ae.code||ae.code,At=typeof ae=="object"&&ae!==null&&"playerId"in ae?ae.playerId:void 0;d({playerName:ne,roomCode:Fe,gameType:Q,playerId:At})}return ae},[S,V,_e,Ht,ad,d]),Vl=m.useCallback(async(ne,Q,ae)=>{let Fe=null;switch(ae){case"doraemon":Fe=await _(ne,Q);break;case"pokdeng":Fe=await U(ne,Q);break;case"undercover":Fe=await it(ne,Q);break;case"paranoia":Fe=await Sr(ne,Q);break;case"5-sec":Fe=await Fo(ne,Q);break}if(Fe){const At=typeof Fe=="object"&&Fe!==null&&"playerId"in Fe?Fe.playerId:void 0;d({playerName:Q,roomCode:ne.toUpperCase(),gameType:ae,playerId:At})}return!!Fe},[_,U,it,Sr,Fo,d]),Bl=m.useCallback(ne=>{switch(h(),ne){case"doraemon":k();break;case"pokdeng":re();break;case"undercover":Es();break;case"paranoia":Lo();break;case"5-sec":cd();break}e("select")},[h,k,re,Es,Lo,cd]);if(m.useEffect(()=>{const ne=async()=>{const ae=await nm();r(ae)},Q=async()=>{const ae=await p0();y(ae)};ne(),Q()},[t,f]),m.useEffect(()=>{if(t!=="select")return;const ne=Q=>{if(Q.key==="ArrowRight"&&xm(),Q.key==="ArrowLeft"&&bm(),Q.key==="Enter"){const ae=We[ct];e(ae.id)}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[t,ct,xm,bm,We]),o)return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] bg-zinc-900 flex flex-col items-center justify-center gap-4",children:[l.jsx(Bt,{className:"w-12 h-12 animate-spin text-cyan-400"}),l.jsx("p",{className:"text-white text-xl font-medium",children:"..."}),l.jsx("p",{className:"text-zinc-400 text-sm",children:"Recovering session..."})]});if(t==="select"){const ne=We[ct];return l.jsxs("div",{className:"min-h-screen min-h-[100dvh] relative overflow-hidden bg-zinc-900 text-white flex flex-col",children:[l.jsx(rd,{}),l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:.3},transition:{duration:.8},className:`absolute inset-0 bg-gradient-to-br ${ne.gradient} mix-blend-overlay`},ct),l.jsx(Cb,{names:n}),l.jsxs("div",{className:"relative z-[60] flex items-center justify-between px-6 py-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-red-600 flex items-center justify-center font-bold text-lg shadow-lg",children:""}),l.jsx("span",{className:"text-xl font-bold",children:"Party Games"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ste,{currentRoomCode:rt==null?void 0:rt.code,currentGameType:rt==null?void 0:rt.type,currentGameName:rt==null?void 0:rt.name}),l.jsx(xte,{}),l.jsx(bte,{}),l.jsx("span",{className:"text-zinc-400 text-sm",children:new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 relative z-10",children:[l.jsxs(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:300,damping:30},className:"text-center mb-8",children:[l.jsx("h1",{className:"text-5xl md:text-6xl font-black mb-2 tracking-tight drop-shadow-2xl",children:ne.name}),l.jsx("p",{className:"text-zinc-400 text-lg",children:ne.desc})]},ne.name),l.jsxs("div",{className:"relative w-full max-w-5xl h-[380px] flex items-center justify-center perspective-[1000px]",children:[l.jsx("button",{onClick:bm,className:"absolute left-0 z-30 p-3 rounded-full bg-black/50 hover:bg-black/80 transition-all hover:scale-110",children:l.jsx(B5,{size:32})}),l.jsx("div",{className:"relative h-full w-full flex items-center justify-center",children:We.map((Q,ae)=>{const Fe=ae-ct;let At=Fe;Fe>We.length/2&&(At=Fe-We.length),Fe<-We.length/2&&(At=Fe+We.length);const wn=ae===ct,mM=Math.abs(At)<=2,ud=b[Q.id];return mM?l.jsxs(pe.div,{className:"absolute cursor-pointer",initial:!1,animate:{x:At*280,scale:wn?1.15:.75,rotateY:At*8,opacity:wn?1:.4,filter:wn?"grayscale(0%)":"grayscale(40%)"},transition:{type:"spring",stiffness:300,damping:30},onClick:()=>yn(ae),style:{zIndex:wn?20:10-Math.abs(At)},children:[l.jsx("div",{className:`
                        w-[240px] h-[320px] rounded-2xl shadow-2xl overflow-hidden
                        flex flex-col items-center justify-center relative
                        ${ud?"":`bg-gradient-to-br ${Q.gradient}`}
                        ${wn?"border-4 border-cyan-400 shadow-cyan-400/30":"border-2 border-white/20"}
                      `,style:{backgroundImage:ud?`url(${ud})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:ud?l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4",children:l.jsx("h3",{className:"text-xl font-bold text-white drop-shadow-lg text-center",children:Q.name})}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-8xl mb-4 drop-shadow-lg",children:Q.emoji}),l.jsx("h3",{className:"text-2xl font-bold text-white drop-shadow-lg",children:Q.name})]})}),wn&&l.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute -inset-4 bg-cyan-400/20 rounded-3xl blur-2xl -z-10"})]},Q.id):null})}),l.jsx("button",{onClick:xm,className:"absolute right-0 z-30 p-3 rounded-full bg-black/50 hover:bg-black/80 transition-all hover:scale-110",children:l.jsx(z5,{size:32})})]}),l.jsx(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-10 flex items-center gap-4",children:l.jsxs(M,{size:"lg",onClick:()=>e(ne.id),className:"bg-white text-black hover:bg-white/90 px-10 py-6 rounded-full font-bold text-xl shadow-2xl hover:scale-105 transition-transform flex items-center gap-3",children:[l.jsx(Lu,{fill:"black",size:24}),"Start Game"]})})]}),l.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-8 pb-6 text-zinc-500 text-sm font-medium",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"border border-zinc-600 px-2 py-1 rounded text-xs",children:""}),l.jsx("span",{className:"border border-zinc-600 px-2 py-1 rounded text-xs",children:""}),"Select"]}),l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"border border-zinc-600 px-3 py-1 rounded text-xs",children:"A"}),"OK"]})]}),l.jsx("div",{className:"relative z-10 flex items-center justify-center gap-2 pb-8",children:We.map((Q,ae)=>l.jsx("button",{onClick:()=>yn(ae),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===ct?"bg-cyan-400 w-8":"bg-zinc-600 hover:bg-zinc-500"}`},ae))}),f&&l.jsx(aO,{onClose:()=>p(!1),games:We,onCoversUpdate:async()=>{const Q=await p0();y(Q)}})]})}if(t==="pokdeng")return j?l.jsx(PZ,{room:j,players:I,currentPlayerId:q,isHost:vn,isLiveMode:s,onStartGame:G,onDrawCard:A,onStandCard:L,onDealerDraw:R,onDealerStand:W,onShowdown:D,onNextRound:te,onLeave:()=>{i(!1),Bl("pokdeng")},onSetDealer:ze}):l.jsx(EZ,{onCreateRoom:async ne=>await Ul(ne,"pokdeng"),onJoinRoom:async(ne,Q)=>Vl(ne,Q,"pokdeng"),onQuickStart:async ne=>{i(!0);const Q=await je(ne,!0);if(Q){const ae=typeof Q=="string"?Q:Q.code;d({playerName:ne,roomCode:ae,gameType:"pokdeng"})}return Q},isLoading:P,onBack:()=>e("select")});if(t==="undercover"){if(!Y)return l.jsx(vee,{onCreateRoom:async Q=>Ul(Q,"undercover"),onJoinRoom:async(Q,ae)=>Vl(Q,ae,"undercover"),onBack:()=>e("select"),isLoading:Se});const ne=((Mb=Ee.find(Q=>Q.id===Le))==null?void 0:Mb.is_host)||!1;return l.jsx(tte,{room:Y,players:Ee,currentPlayerId:Le,isHost:ne,categories:xe,onStartGame:nn,onRestartGame:sd,onLeave:()=>Bl("undercover")})}if(t==="paranoia"){if(!Oi)return l.jsx(ste,{onCreateRoom:async Q=>Ul(Q,"paranoia"),onJoinRoom:async(Q,ae)=>Vl(Q,ae,"paranoia"),onBack:()=>e("select"),isLoading:pm});const ne=((Lb=_r.find(Q=>Q.id===id))==null?void 0:Lb.is_host)||!1;return l.jsx(ote,{room:Oi,players:_r,currentPlayerId:id,isHost:ne,onStartGame:mm,onStartRound:gm,onSelectVictim:Mo,onRevealQuestion:vm,onSkipQuestion:od,onLeave:()=>Bl("paranoia")})}if(t==="5-sec"){if(!Wn)return l.jsx(vte,{onCreateRoom:async Q=>Ul(Q,"5-sec"),onJoinRoom:async(Q,ae)=>Vl(Q,ae,"5-sec"),onBack:()=>e("select"),isLoading:ym});const ne=((Fb=Fl.find(Q=>Q.id===Gr))==null?void 0:Fb.is_host)||!1;return l.jsx(wte,{room:Wn,players:Fl,currentPlayerId:Gr,isHost:ne,onStartGame:ld,onStartRound:wm,onFinishAnswering:$l,onVote:Cr,onLeave:()=>Bl("5-sec")})}return x?l.jsx(CZ,{room:x,players:v,currentPlayerId:g,isHost:Te,onStartGame:C,onDrawCard:E,onReshuffle:N,onLeave:()=>Bl("doraemon")}):l.jsx(mZ,{onCreateRoom:async ne=>Ul(ne,"doraemon"),onJoinRoom:async(ne,Q)=>Vl(ne,Q,"doraemon"),onQuickStart:async ne=>{const Q=await T(ne);if(Q){const ae=typeof Q=="string"?Q:Q.code;d({playerName:ne,roomCode:ae,gameType:"doraemon"})}return Q},isLoading:w,onBack:()=>e("select")})},Ete=()=>{const t=XR();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),l.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})};function Nte(){const[t,e]=m.useState("connected"),[n,r]=m.useState(navigator.onLine),[s,i]=m.useState(null),o=m.useRef(0),a=10,c=m.useRef(null),u=m.useCallback(async()=>{if(document.visibilityState==="visible"&&"wakeLock"in navigator&&!c.current)try{c.current=await navigator.wakeLock.request("screen"),console.log("Wake Lock acquired"),c.current.addEventListener("release",()=>{console.log("Wake Lock released"),c.current=null})}catch(f){f.name!=="NotAllowedError"&&console.log("Wake Lock request failed:",f)}},[]),d=m.useCallback(()=>{c.current&&(c.current.release(),c.current=null)},[]),h=m.useCallback(()=>{if(o.current>=a){console.log("Max reconnection attempts reached"),e("disconnected");return}const f=Math.min(1e3*Math.pow(2,o.current),3e4);console.log(`Reconnecting in ${f}ms (attempt ${o.current+1})`),e("reconnecting"),setTimeout(async()=>{try{await O.realtime.connect(),e("connected"),i(new Date),o.current=0,console.log("Reconnected successfully")}catch(p){console.error("Reconnection failed:",p),o.current++,h()}},f)},[]);return m.useEffect(()=>{const f=()=>{console.log("Network is back online"),r(!0),h()},p=()=>{console.log("Network went offline"),r(!1),e("disconnected")};return window.addEventListener("online",f),window.addEventListener("offline",p),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",p)}},[h]),m.useEffect(()=>{const f=async()=>{document.visibilityState==="visible"?(console.log("Page became visible, checking connection..."),await u(),(!n||t==="disconnected")&&h()):(console.log("Page became hidden"),d())};return document.addEventListener("visibilitychange",f),u(),()=>{document.removeEventListener("visibilitychange",f),d()}},[n,t,h,u,d]),m.useEffect(()=>{const f=O.channel("connection-monitor");return f.on("system",{event:"*"},p=>{console.log("Supabase system event:",p)}),f.subscribe(p=>{console.log("Supabase channel status:",p),p==="SUBSCRIBED"?(e("connected"),i(new Date),o.current=0):(p==="CLOSED"||p==="CHANNEL_ERROR")&&e("disconnected")}),()=>{O.removeChannel(f)}},[]),m.useEffect(()=>{t==="connected"&&!s&&i(new Date)},[t,s]),{status:t,isOnline:n,reconnect:h,lastConnectedAt:s}}function kte({showWhenConnected:t=!1}){const{status:e,isOnline:n,reconnect:r}=Nte();if(e==="connected"&&!t)return null;const i=((a,c)=>{if(!c)return{icon:oS,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};switch(a){case"reconnecting":return{icon:Qh,text:"...",bgColor:"bg-yellow-500",textColor:"text-black",showRetry:!1,iconClass:"animate-spin"};case"disconnected":return{icon:oS,text:"",bgColor:"bg-red-600",textColor:"text-white",showRetry:!0};case"connected":return{icon:e3,text:"",bgColor:"bg-green-600",textColor:"text-white",showRetry:!1}}})(e,n),o=i.icon;return l.jsx(Hp,{children:l.jsx(pe.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:`fixed top-0 left-0 right-0 z-50 ${i.bgColor} ${i.textColor} px-4 py-3`,children:l.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-md mx-auto",children:[l.jsx(o,{className:`w-5 h-5 ${i.iconClass||""}`}),l.jsx("span",{className:"font-medium",children:i.text}),i.showRetry&&l.jsxs(M,{size:"sm",variant:"secondary",onClick:r,className:"ml-2 px-3 py-1 h-auto text-sm",children:[l.jsx(Qh,{className:"w-4 h-4 mr-1"}),""]})]})})})}const Tte=new S6,Rte=()=>l.jsx(E6,{client:Tte,children:l.jsx(iq,{children:l.jsxs(Z$,{children:[l.jsx(kte,{}),l.jsx(M3,{}),l.jsx(pF,{}),l.jsx(uU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsxs(aU,{children:[l.jsx(ay,{path:"/",element:l.jsx(Cte,{})}),l.jsx(ay,{path:"*",element:l.jsx(Ete,{})})]})})]})})});nte();yT(document.getElementById("root")).render(l.jsx(Rte,{}));
